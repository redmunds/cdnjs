!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.stampit=e.stampit||{})}(this,function(e){"use strict";function t(e,r){if(void 0===r)return e;if(b(r))return(b(e)?e:[]).concat(r);if(!o(r))return r;for(var s=i(e)?e:{},p=Object.keys(r),n=0;n<p.length;n+=1){var c=p[n],a=r[c];if(void 0!==a){var f=s[c],u=o(f)||b(a)?f:{};s[c]=t(u,a)}}return s}function r(e){return"function"==typeof e}function i(e){var t=typeof e;return!!e&&("object"===t||"function"===t)}function o(e){return!!e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}function s(){var e=j.apply([],arguments).filter(r);return 0===e.length?void 0:e}function p(e,t,i){if(b(t)){var o=t.length,s=e[i]||[];e[i]=s;for(var p=0;p<o;p+=1){var n=t[p];r(n)&&s.indexOf(n)<0&&s.push(n)}}}function n(e,t,r,o){i(t[r])&&(i(e[r])||(e[r]={}),o(e[r],t[r]))}function c(e,t,r){n(e,t,r,g)}function a(e,t,r){n(e,t,r,D)}function f(e){return function t(i){for(var o=[],s=arguments.length-1;s-- >0;)o[s]=arguments[s+1];var p=Object.create(e.methods||null);if(g(p,e.deepProperties),D(p,e.properties),Object.defineProperties(p,e.propertyDescriptors||{}),!e.initializers||0===e.initializers.length)return p;void 0===i&&(i={});for(var n=e.initializers,c=n.length,a=0;a<c;a+=1){var f=n[a];if(r(f)){var u=f.call(p,i,{instance:p,stamp:t,args:[i].concat(o)});p=void 0===u?p:u}}return p}}function u(e,t){var i=f(e);g(i,e.staticDeepProperties),D(i,e.staticProperties),Object.defineProperties(i,e.staticPropertyDescriptors||{});var o=r(i.compose)?i.compose:t;return i.compose=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return o.apply(this,e)},D(i.compose,e),i}function d(e,t){var r=t&&t.compose||t;return i(r)?(a(e,r,"methods"),a(e,r,"properties"),c(e,r,"deepProperties"),a(e,r,"propertyDescriptors"),a(e,r,"staticProperties"),c(e,r,"staticDeepProperties"),a(e,r,"staticPropertyDescriptors"),a(e,r,"configuration"),c(e,r,"deepConfiguration"),p(e,r.initializers,"initializers"),e):e}function v(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=[this].concat(e).filter(i).reduce(d,{});return u(r,v)}function l(e){return r(e)&&r(e.compose)}function h(e,t){return function(){for(var r=arguments.length,i=Array(r);r--;)i[r]=arguments[r];return(this&&this.compose||y).call(this,(o={},o[e]=t.apply(void 0,[{}].concat(i)),o));var o}}function P(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return(this&&this.compose||y).call(this,{initializers:s.apply(void 0,e)})}function m(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return(this&&this.compose||y).call(this,{composers:s.apply(void 0,e)})}function y(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var o=e.filter(i).map(function(e){return l(e)?e:C(e)}),s=v.apply(this||B,o),p=s.compose.deepConfiguration&&s.compose.deepConfiguration.composers;if(b(p))for(var n=0;n<p.length;n+=1)if(r(p[n])){var c=p[n]({stamp:s,composables:o});s=l(c)?c:s}return s}var g=function(e){for(var r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];return r.reduce(t,e)},D=Object.assign,b=Array.isArray,j=Array.prototype.concat,C=function(e){void 0===e&&(e={});var t=e.methods,r=e.properties,o=e.props,n=e.refs,c=e.initializers,a=e.init,f=e.composers,u=e.deepProperties,d=e.deepProps,v=e.propertyDescriptors,l=e.staticProperties,h=e.statics,P=e.staticDeepProperties,m=e.deepStatics,y=e.staticPropertyDescriptors,b=e.configuration,j=e.conf,C=e.deepConfiguration,z=e.deepConf,O=i(o)||i(n)||i(r)?D({},o,n,r):void 0,x=i(d)?g({},d):void 0;x=i(u)?g(x,u):x;var A=i(h)||i(l)?D({},h,l):void 0,S=i(m)?g({},m):void 0;S=i(P)?g(S,P):S;var _=i(j)||i(b)?D({},j,b):void 0,k=i(z)?g({},z):void 0;k=i(C)?g(k,C):k;var M=s(a,c),q=s(f);q&&(k=k||{},p(k,q,"composers"));var w={};return t&&(w.methods=t),O&&(w.properties=O),M&&(w.initializers=M),x&&(w.deepProperties=x),A&&(w.staticProperties=A),t&&(w.methods=t),S&&(w.staticDeepProperties=S),v&&(w.propertyDescriptors=v),y&&(w.staticPropertyDescriptors=y),_&&(w.configuration=_),k&&(w.deepConfiguration=k),w},z=h("methods",D),O=h("properties",D),x=h("deepProperties",g),A=h("staticProperties",D),S=h("staticDeepProperties",g),_=h("configuration",D),k=h("deepConfiguration",g),M=h("propertyDescriptors",D),q=h("staticPropertyDescriptors",D),w={methods:z,properties:O,refs:O,props:O,initializers:P,init:P,composers:m,deepProperties:x,deepProps:x,staticProperties:A,statics:A,staticDeepProperties:S,deepStatics:S,configuration:_,conf:_,deepConfiguration:k,deepConf:k,propertyDescriptors:M,staticPropertyDescriptors:q},B=v({staticProperties:w},{staticProperties:{create:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return this.apply(void 0,e)},compose:y}}),E=y.bind();y.compose=E;var F=D(y,w);e.methods=z,e.properties=O,e.refs=O,e.props=O,e.initializers=P,e.init=P,e.composers=m,e.deepProperties=x,e.deepProps=x,e.staticProperties=A,e.statics=A,e.staticDeepProperties=S,e.deepStatics=S,e.configuration=_,e.conf=_,e.deepConfiguration=k,e.deepConf=k,e.propertyDescriptors=M,e.staticPropertyDescriptors=q,e.compose=E,e.default=F,Object.defineProperty(e,"__esModule",{value:!0})});
