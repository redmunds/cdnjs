!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.redom=e.redom||{})}(this,function(e){"use strict";function t(e,t,r,i){if("function"==typeof e){e.constructor;var o=arguments.length-1;switch(o){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r);case 3:return new e(t,r,i)}for(var u=new Array(o),a=0;o>a;)u[a]=arguments[++a];return new(e.bind.apply(e,u))}for(var f=n(e),l=!0,a=1;a<arguments.length;a++){var s=arguments[a];if(null!=s)if("function"==typeof s&&(s=s(f)),!l||"string"!=typeof s&&"number"!=typeof s){if(mount(f,s))l=!1;else if("object"==typeof s)for(var c in s){var v=s[c];if("style"===c)if("string"==typeof v)f.setAttribute(c,v);else{var d=f.style;for(var m in v)d[m]=v[m]}else c in f?f[c]=s[c]:f.setAttribute(c,s[c])}}else f.textContent=s,l=!1}return f}function n(e,t){var n=t?g:h;if(e in h)return n[e].cloneNode(!1);for(var r,i,o,u=0,a=0,f=0,l=e.length;l>=f;f++){var s=f===l?0:e.charCodeAt(f);if(35===s||46===s||0===s){if(0===u)r=0===f?"div":0===s?e:e.substring(a,f);else{var c=e.substring(a,f);1===u?i=c:o?o+=" "+c:o=c}a=f+1,u=35===s?1:2}}var v=t?p(r):document.createElement(r);return i&&(v.id=i),o&&(v.className=o),n[e]=v,v.cloneNode(!1)}function r(e,t,n){n?e.insertBefore(t,n.el||n):e.appendChild(t)}function i(e,t,n){var o=e.el||e;if(null!=t){var l=t.el||t,s=typeof ChildEl;if("string"===s||"number"===s)return r(o,w(t),n),!0;if(t.views)return t.parent=e,f(o,t.views),!0;if(t.length){for(var c=0;c<t.length;c++)i(o,t[c],n);return!0}return l.nodeType?(t!==l&&(l.view=t),l.mounted&&(l.mounted=!1,t.unmount&&t.unmount(),a(l)),r(o,l,n),(o.mounted||document.contains(l))&&(l.mounted=!0,t.mount&&t.mount(),u(l)),!0):!1}}function o(e,t){var n=e.el||e,r=t.el||t;n.removeChild(r),r.mounted=!1,r.unmount&&r.unmount(),a(r)}function u(e){for(var t=e.firstChild;t;){if(t.mounted)return;t.mounted=!0,t.view&&t.view.mount&&t.view.mount(),u(t),t=t.nextSibling}}function a(e){for(var t=e.firstChild;t;){if(!t.mounted)return;t.mounted=!1,t.view&&t.view.unmount&&t.view.unmount(),a(t),t=t.nextSibling}}function f(e,t){for(var n=e.el||e,r=n.firstChild,o=0;o<t.length;o++){var u=t[o],a=u.el||u;a!==r?i(e,u):r=r.nextSibling}for(;r;){var f=r.nextSibling;n.removeChild(r),r=f}}function l(e,t,n){return new s(e,t,n)}function s(e,t,n){this.View=e,this.key=t,this.initData=n,this.views=[],t&&(this.lookup={})}function c(e){return function(t){for(var n in e)v(t,n,e[n])}}function v(e,t,n){e.addEventListener(t,function(t){n.call(e.view,t)})}function d(e){for(var t=y[e]||(y[e]=n(e,!0)),r=t.cloneNode(!1),i=!0,o=1;o<arguments.length;o++){var u=arguments[o];if(null!=u)if("function"==typeof u&&(u=u(r)),!i||u!==String&&u!==Number)if(mount(r,u))i=!1;else for(var a in u)if("style"===a){var f=r.style,l=u.style;if("string"!=typeof l)for(var s in l)f[s]=l[s];else r.setAttribute(a,u[a])}else r.setAttribute(a,u[a]);else r.textContent=u,i=!1}return r}function m(e){return function(t,n,r){var i=Object.create(e),o=arguments.length;switch(o){case 0:e.init.call(i);break;case 1:e.init.call(i,t);break;case 2:e.init.call(i,t,n);break;case 3:e.init.call(i,t,n,r);break;default:for(var u=new Array(o),a=0;o>a;)e.init.apply(i,u)}return i}}var h={},g={},p=document.createElementNS.bind(document,"http://www.w3.org/2000/svg");t.extend=function(e){return t.bind(this,e)};var w=document.createTextNode.bind(document);s.prototype.update=function(e){var t=this.View,n=this.key,r=this.initData,i=this.views,o=this.parent;if(n){for(var u=this.lookup,a=0;a<e.length;a++){var l=e[a],s="function"==typeof n?n(l):l[n],c=u[s]||(u[s]=new t(r,l,a));i[a]=c,u[s]=c}for(var a=e.length;a<i.length;a++){var s="function"==typeof n?n(l):l[n];u[s]=null,i[a]=null}}else{for(var a=0;a<e.length;a++){var l=e[a],c=i[a]||(i[a]=new t(r,l,a));i[a]=c}for(var a=e.length;a<i.length;a++)i[a]=null}for(var a=0;a<i.length;a++){var l=e[a],c=i[a];c.update&&c.update(l)}i.length=e.length,o&&f(o,i)};var y={};d.extend=function(e){return d.bind(this,e)},e.el=t,e.createElement=n,e.list=l,e.List=s,e.mount=i,e.unmount=o,e.on=c,e.text=w,e.setChildren=f,e.svg=d,e.view=m,Object.defineProperty(e,"__esModule",{value:!0})});