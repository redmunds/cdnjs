!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.redom=e.redom||{})}(this,function(e){"use strict";function n(e){return document.createTextNode(e)}function t(e,n){for(var t=e.el||e,r=t.firstChild,o=0;o<n.length;o++){var u=n[o],a=u.el||u;a!==r?i(e,u):r=r.nextSibling}for(;r;){var l=r.nextSibling;t.removeChild(r),r=l}}function r(e,n,t){t?e.insertBefore(n,t.el||t):e.appendChild(n)}function i(e,n,o){var l=e.el||e,f=n.el||n;if(f.nodeType)return n!==f&&(f.view=n),f.mounted&&(f.mounted=!1,n.unmount&&n.unmount(),a(f)),r(l,f,o),(l.mounted||document.contains(f))&&(f.mounted=!0,n.mount&&n.mount(),u(f)),!0;if(n.views)return n.parent=e,t(l,n.views),!0;if(n.length){for(var s=0;s<n.length;s++)i(e,n[s],o);return!0}return!1}function o(e,n){var t=e.el||e,r=n.el||n;t.removeChild(r),r.mounted=!1,r.unmount&&r.unmount(),a(r)}function u(e){for(var n=e.firstChild;n;){if(n.mounted)return;n.mounted=!0,n.view&&n.view.mount&&n.view.mount(),u(n),n=n.nextSibling}}function a(e){for(var n=e.firstChild;n;){if(!n.mounted)return;n.mounted=!1,n.view&&n.view.unmount&&n.view.unmount(),a(n),n=n.nextSibling}}function l(e,n,t,r){var o;if(e.nodeType)o=e.cloneNode(!1);else{if("string"!=typeof e){if(this.allowComponents){var u=arguments.length;switch(u){case 1:return new e;case 2:return new e(n);case 3:return new e(n,t);case 4:return new e(n,t,r)}for(var a=new Array(u);u--;)a[u]=arguments[u];return new(query.bind.apply(query,a))}throw new Error("Must pass a valid query or component!")}o=this.createElement(e).cloneNode(!1)}for(var l=!0,f=1;f<arguments.length;f++){var s=arguments[f];if("string"!=typeof s&&"number"!=typeof s){if("function"==typeof s&&(s=s(o)),null!=s)if(i(o,s))l=!1;else for(var c in s){var d=s[c];if("style"===c)if("string"==typeof d)o.setAttribute(c,d);else{var v=o.style;for(var h in d)v[h]=d[h]}else this.allowBareProps&&c in o?o[c]=s[c]:o.setAttribute(c,s[c])}}else l?(o.textContent=s,l=!1):o.appendChild(document.createTextNode(s))}return o}function f(e){var n=this.cache;if(e in n)return n[e];for(var t,r,i,o=0,u=0,a=0,l=e.length;l>=a;a++){var f=a===l?0:e.charCodeAt(a);if(35===f||46===f||0===f){if(0===o)t=0===a?"div":0===f?e:e.substring(u,a);else{var s=e.substring(u,a);1===o?r=s:i?i+=" "+s:i=s}u=a+1,o=35===f?1:2}}var c=this.createTag(t);return r&&(c.id=r),i&&(c.className=i),n[e]=c}function s(e,n,t){return new c(e,n,t)}function c(e,n,t){this.View=e,this.key=n,this.initData=t,this.views=[],n&&(this.lookup={})}function d(e){return function(n,t){return 2===arguments.length?function(r){e(r,n,t)}:function(t){for(var r in n)e(t,r,n[r])}}}function v(e){return function(n,t,r){var i=Object.create(e),o=arguments.length;switch(o){case 0:e.init.call(i);break;case 1:e.init.call(i,n);break;case 2:e.init.call(i,n,t);break;case 3:e.init.call(i,n,t,r);break;default:for(var u=new Array(o),a=0;o>a;)e.init.apply(i,u)}return i}}var h={cache:{},expand:l,createElement:f,allowBareProps:!0,allowComponents:!0,createTag:function(e){return document.createElement(e)}},m=l.bind(h);m.extend=function(e){return l.bind(h,h.createElement(e))},c.prototype.update=function(e){var n=this.View,r=this.key,i=this.initData,o=this.views,u=this.parent;if(r){for(var a=this.lookup,l=0;l<e.length;l++){var f=e[l],s="function"==typeof r?r(f):f[r],c=a[s]||(a[s]=new n(i,f,l));o[l]=c,a[s]=c}for(var l=e.length;l<o.length;l++){var s="function"==typeof r?r(f):f[r];a[s]=null,o[l]=null}}else{for(var l=0;l<e.length;l++){var f=e[l],c=o[l]||(o[l]=new n(i,f,l));o[l]=c}for(var l=e.length;l<o.length;l++)o[l]=null}for(var l=0;l<o.length;l++){var f=e[l],c=o[l];c.update&&c.update(f)}o.length=e.length,u&&t(u,o)};var p=d(function(e,n,t){e.addEventListener(n,function(n){t.call(e.view,n)})}),w={cache:{},expand:l,createElement:f,allowBareProps:!1,allowComponents:!1,createTag:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}},g=l.bind(w);g.extend=function(e){return l.bind(this,w.createElement(e))},e.el=m,e.list=s,e.List=c,e.mount=i,e.unmount=o,e.on=p,e.text=n,e.setChildren=t,e.svg=g,e.view=v,Object.defineProperty(e,"__esModule",{value:!0})});