!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.redom=e.redom||{})}(this,function(e){"use strict";function t(e,t){for(var n,r,i,o=0,u=0,d=0,l=e.length;l>=d;d++){var f=d===l?0:e.charCodeAt(d);if(35===f||46===f||0===f){if(0===o)n=0===d?"div":0===f?e:e.substring(u,d);else{var s=e.substring(u,d);1===o?r=s:i?i+=" "+s:i=s}u=d+1,o=35===f?1:2}}if(t)var a=document.createElementNS(t,n);else var a=document.createElement(n);return r&&(a.id=r),i&&(a.className=i),a}function n(e,n){if("function"==typeof e){var r=arguments.length-1;if(r>1){for(var i=new Array(r),o=0;r>o;)i[++o]=arguments[o];return new(e.bind.apply(e,i))}return new e(n)}for(var u=(s[e]||(s[e]=t(e))).cloneNode(!1),d=!0,o=1;o<arguments.length;o++){for(var l=arguments[o];"function"==typeof l;)l=l(u);if(null!=l)if(l.nodeType)u.appendChild(l);else if("string"==typeof l||"number"==typeof l)d?u.textContent=l:u.appendChild(document.createTextNode(l));else if(l.el&&l.el.nodeType){var f=l,a=l.el;f!==a&&(f.el=a,a.__redom_view=f),f.isMounted?f.remounted&&f.remounted():f.mounted&&f.mounted(),u.appendChild(a)}else for(var p in l){var v=l[p];if("style"===p)if("string"==typeof v)u.setAttribute(p,v);else for(var m in v)u.style[m]=v[m];else p in u?(u[p]=v,"autofocus"===p&&u.focus()):u.setAttribute(p,v)}}return u}function r(e,t){for(var n=e.el||e,r=n.firstChild,i=0;i<t.length;i++){var o=t[i];if(o){var u=o.el||o;u!==r?r?n.insertBefore(u,r):n.appendChild(u):r=r.nextSibling}}for(;r;){var d=r.nextSibling;r=d}}function i(e,t,n,r){return new o(e,t,n,r)}function o(e,t,r,i){this.View=t,this.key=r,this.initData=i,this.views=[],this.el="string"==typeof e?n(e):e,r&&(this.lookup={})}function u(e){return document.createTextNode(e)}function d(e,t,n){if(null!=t){var r=e.el||e,i=t.el||t;if(i.nodeType)return t!==i&&(i.view=t),n?r.insertBefore(i,n.el||n):r.appendChild(i),t.isMounted?t.remounted&&t.remounted():(t.isMounted=!0,t.mounted&&t.mounted()),!0;if(t.length){for(var o=0;o<t.length;o++){var i=t.el||t;t.isMounted?t.remounted&&t.remounted():(t.isMounted=!0,t.mounted&&t.mounted())}return!0}return!1}}function l(e,t){var n=e.el||e,r=t.el||t;n.removeChild(r),t.isMounted=!1,t.unmounted&&t.unmounted()}function f(e){for(var n=(a[e]||(a[e]=t(e))).cloneNode(!1),r=!0,i=1;i<arguments.length;i++){for(var o=arguments[i];"function"==typeof o;)o=o(n);if(null!=o)if(o.nodeType)n.appendChild(o);else if("string"==typeof o||"number"==typeof o)r?n.textContent=o:n.appendChild(document.createTextNode(o));else if(o.el&&o.el.nodeType){var u=o,d=o.el;u!==d&&(u.el=d),u.isMounted?u.remounted&&u.remounted():u.mounted&&u.mounted(),n.appendChild(d)}else for(var l in o){var f=o[l];if("style"===l&&"string"!=typeof f)for(var s in f)n.style[s]=f[s];else n.setAttribute(l,f)}}return n}var s={};n.extend=function(e){return n.bind(this,e)},i.extend=o.extend,o.extend=function(e,t,n,r){return o.bind(o,e,t,n,r)},o.prototype.update=function(e){var t=this.View,n=this.key,r=this.initData,i=this.views,o=this.el,u=o.firstChild;if(n)var d=this.lookup;for(var l=0;l<e.length;l++){var f=e[l];if(n){var s="function"==typeof n?n(f):f[n],a=i[l]=d[s]||(d[s]=new t(r,f,l));a.__id=s}else var a=i[l]||(i[l]=new t(r,f,l));var p=a.el;a.el=p,p.__redom_view=a,a.update&&a.update(f),u!==p?(u?o.insertBefore(p,u):o.appendChild(p),a.isMounted?a.remounted&&a.remounted():(a.isMounted=!0,a.mounted&&a.mounted())):u=u.nextSibling}for(;u;){var v=u.nextSibling;if(n){var a=u.__redom_view;if(a){var s=a.__id;d[s]=null}}i[l++]=null,o.removeChild(u),u=v}i.length=e.length};var a={};f.extend=function(e){return f.bind(this,e)},e.el=n,e.list=i,e.List=o,e.mount=d,e.unmount=l,e.setChildren=r,e.svg=f,e.text=u,Object.defineProperty(e,"__esModule",{value:!0})});