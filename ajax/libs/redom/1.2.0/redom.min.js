!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.redom=e.redom||{})}(this,function(e){"use strict";function t(){}function n(e,t,n){var i=new CustomEvent("redom-event",{bubbles:!0,detail:{type:t,data:n}});e.dispatchEvent(i)}function i(e,t,n){if(e.__redom_view){var o=new CustomEvent("redom-event",{bubbles:!1,detail:{type:t,data:n}});e.dispatchEvent(o)}for(var r=e.firstChild;r;)i(r,t,n),r=r.nextSibling}function o(e,t){for(var n,i,o,r=0,d=0,s=0,u=e.length;u>=s;s++){var l=s===u?0:e.charCodeAt(s);if(l===c||l===m||0===l){if(0===r)n=0===s?"div":0===l?e:e.substring(d,s);else{var f=e.substring(d,s);1===r?i=f:o?o+=" "+f:o=f}d=s+1,r=l===c?1:2}}var a=t?p.createElementNS(t,n):p.createElement(n);return i&&(a.id=i),o&&(a.className=o),a}function r(e){return p.createTextNode(e)}function d(e,t,n){var i=e.el||e,o=t.el||t;o.__redom_list&&(o=o.el),t===o&&o.__redom_view&&(t=o.__redom_view),t!==o&&(o.__redom_view=t),n?i.insertBefore(o,n.el||n):i.appendChild(o),t.isMounted?t.remounted&&t.remounted():(t.isMounted=!0,t.mounted&&t.mounted())}function s(e,t){var n=e.el||e,i=t.el||t;t===i&&i.__redom_view&&(t=i.__redom_view),n.removeChild(i),t.isMounted=!1,t.unmounted&&t.unmounted()}function u(e){var t;if("string"==typeof e)t=(h[e]||(h[e]=o(e))).cloneNode(!1);else{if(!e||!e.nodeType)throw new Error("At least one argument required");t=e.cloneNode(!1)}for(var n=!0,i=1;i<arguments.length;i++){var s=arguments[i];if(s)if("function"==typeof s)s(t);else if("string"==typeof s||"number"==typeof s)n?(n=!1,t.textContent=s):t.appendChild(r(s));else if(s.nodeType||s.el&&s.el.nodeType)n=!1,d(t,s);else if("object"==typeof s)for(var u in s){var l=s[u];if("style"===u)if("string"==typeof l)t.setAttribute(u,l);else for(var f in l)t.style[f]=l[f];else u in t||"function"==typeof l?t[u]=l:t.setAttribute(u,l)}}return t}function l(e,t,n,i){return new f(e,t,n,i)}function f(e,t,n,i){this.__redom_list=!0,this.View=t,this.key=n,this.initData=i,this.views=[],this.el="string"==typeof e?u(e):e,n&&(this.lookup={})}function a(e,t){for(var n=e.el||e,i=n.firstChild,o=0;o<t.length;o++){var r=t[o];if(r){var u=r.el||r;u!==i?d(e,r,i):i=i.nextSibling}}for(;i;){var l=i.nextSibling;s(e,i),i=l}}function v(e){var t;if("string"==typeof e)t=(y[e]||(y[e]=o(e,_))).cloneNode(!1);else{if(!e||!e.nodeType)throw new Error("At least one argument required");t=e.cloneNode(!1)}for(var n=!0,i=1;i<arguments.length;i++){var s=arguments[i];if(s)if("function"==typeof s)s=s(t);else if("string"==typeof s||"number"==typeof s)n?(n=!1,t.textContent=s):t.appendChild(r(s));else if(s.nodeType||s.el&&s.el.nodeType)n=!1,d(t,s);else if("object"==typeof s)for(var u in s){var l=s[u];if("style"===u&&"string"!=typeof l)for(var f in l)t.style[f]=l[f];else"function"==typeof l?t[u]=l:t.setAttribute(u,l)}}return t}t.prototype.dispatch=function(e,t){n(this.el,e,t)},t.prototype.dispatchDown=function(e,t){i(this.el,e,t)},t.prototype.listen=function(e,t){var n=this.el,i=function(n){n.detail&&n.detail.type===e?t(n.detail.data,n):"*"===e&&t(n.detail.type,n.detail.data,n)};return n.addEventListener("redom-event",i),{cancel:function(){n.removeEventListener("redom-event",i)}}};var p=document,c="#".charCodeAt(0),m=".".charCodeAt(0),h={};u.extend=function(e){var t=h[e]||(h[e]=o(e));return u.bind(this,t)},f.extend=function(e,t,n,i){return f.bind(f,e,t,n,i)},l.extend=f.extend,f.prototype.update=function(e){var t=this.View,n=this.key,i="function"==typeof n,o=this.initData,r=this.views,d=this.el,s=d.firstChild;if(n)var u=this.lookup;for(var l=0;l<e.length;l++){var f,a=e[l];if(n){var v=i?n(a):a[n];f=r[l]=u[v]||(u[v]=new t(o,a,l)),f.__id=v}else f=r[l]||(r[l]=new t(o,a,l));var p=f.el;p.__redom_list&&(p=p.el),p.__redom_view=f,f.update&&f.update(a,l),s!==p?(s?d.insertBefore(p,s):d.appendChild(p),f.isMounted?f.remounted&&f.remounted():(f.isMounted=!0,f.mounted&&f.mounted())):s=s.nextSibling}for(;s;){var c=s.nextSibling,m=s.__redom_view;n&&m&&(v=m.__id,u[v]=null),r[l++]=null,d.removeChild(s),m.isMounted=!1,m.unmounted&&m.unmounted(),s.__redom_view=null,s=c}r.length=e.length};var _="http://www.w3.org/2000/svg",y={};v.extend=function(e){var t=y[e]||(y[e]=o(e,_));return v.bind(this,t)},e.Dispatcher=t,e.el=u,e.list=l,e.List=f,e.mount=d,e.unmount=s,e.setChildren=a,e.svg=v,e.text=r,Object.defineProperty(e,"__esModule",{value:!0})});