!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.redom=e.redom||{})}(this,function(e){"use strict";function t(e,t){for(var n,i,r,o=0,u=0,d=0,f=e.length;f>=d;d++){var l=d===f?0:e.charCodeAt(d);if(35===l||46===l||0===l){if(0===o)n=0===d?"div":0===l?e:e.substring(u,d);else{var a=e.substring(u,d);1===o?i=a:r?r+=" "+a:r=a}u=d+1,o=35===l?1:2}}if(t)var p=s.createElementNS(t,n);else var p=s.createElement(n);return i&&(p.id=i),r&&(p.className=r),p}function n(e,n){if("function"==typeof e){var i=arguments.length-1;if(i>1){for(var r=new Array(i),o=0;i>o;)r[++o]=arguments[o];return new(e.bind.apply(e,r))}return new e(n)}for(var u=(a[e]||(a[e]=t(e))).cloneNode(!1),d=!0,o=1;o<arguments.length;o++){for(var f=arguments[o];"function"==typeof f;)f=f(u);if(null!=f)if(f.nodeType)u.appendChild(f);else if("string"==typeof f||"number"==typeof f)d?u.textContent=f:u.appendChild(s.createTextNode(f));else if(f.el&&f.el.nodeType){var l=f,p=f.el;l!==p&&(l.el=p,p.__redom_view=l),l.isMounted?l.remounted&&l.remounted():l.mounted&&l.mounted(),u.appendChild(p)}else for(var v in f){var m=f[v];if("style"===v){if("string"==typeof m)u.setAttribute(v,m);else for(var h in m)u.style[h]=m[h];u[v]=m}else v in u||"function"==typeof m?(u[v]=m,"autofocus"===v&&u.focus()):u.setAttribute(v,m)}}return u}function i(e,t){for(var n=e.el||e,i=n.firstChild,r=0;r<t.length;r++){var o=t[r];if(o){var u=o.el||o;u!==i?i?n.insertBefore(u,i):n.appendChild(u):i=i.nextSibling}}for(;i;){var d=i.nextSibling;i=d}}function r(e,t,n,i){return new o(e,t,n,i)}function o(e,t,i,r){this.View=t,this.key=i,this.initData=r,this.views=[],this.el="string"==typeof e?n(e):e,i&&(this.lookup={})}function u(e){return s.createTextNode(e)}function d(e,t,n){if(null!=t){var i=e.el||e,r=t.el||t;if(r.nodeType)return t!==r&&(r.view=t),n?i.insertBefore(r,n.el||n):i.appendChild(r),t.isMounted?t.remounted&&t.remounted():(t.isMounted=!0,t.mounted&&t.mounted()),!0;if(t.length){for(var o=0;o<t.length;o++){var r=t.el||t;t.isMounted?t.remounted&&t.remounted():(t.isMounted=!0,t.mounted&&t.mounted())}return!0}return!1}}function f(e,t){var n=e.el||e,i=t.el||t;n.removeChild(i),t.isMounted=!1,t.unmounted&&t.unmounted()}function l(e){for(var n=(p[e]||(p[e]=t(e))).cloneNode(!1),i=!0,r=1;r<arguments.length;r++){for(var o=arguments[r];"function"==typeof o;)o=o(n);if(null!=o)if(o.nodeType)n.appendChild(o);else if("string"==typeof o||"number"==typeof o)i?n.textContent=o:n.appendChild(s.createTextNode(o));else if(o.el&&o.el.nodeType){var u=o,d=o.el;u!==d&&(u.el=d),u.isMounted?u.remounted&&u.remounted():u.mounted&&u.mounted(),n.appendChild(d)}else for(var f in o){var l=o[f];if("style"===f&&"string"!=typeof l)for(var a in l)n.style[a]=l[a];else"function"==typeof l?n[f]=l:n.setAttribute(f,l)}}return n}var s=document,a={};n.extend=function(e){return n.bind(this,e)},o.extend=function(e,t,n,i){return o.bind(o,e,t,n,i)},r.extend=o.extend,o.prototype.update=function(e){var t=this.View,n=this.key,i=this.initData,r=this.views,o=this.el,u=o.firstChild;if(n)var d=this.lookup;for(var f=0;f<e.length;f++){var l=e[f];if(n){var s="function"==typeof n?n(l):l[n],a=r[f]=d[s]||(d[s]=new t(i,l,f));a.__id=s}else var a=r[f]||(r[f]=new t(i,l,f));var p=a.el;a.el=p,p.__redom_view=a,a.update&&a.update(l),u!==p?(u?o.insertBefore(p,u):o.appendChild(p),a.isMounted?a.remounted&&a.remounted():(a.isMounted=!0,a.mounted&&a.mounted())):u=u.nextSibling}for(;u;){var v=u.nextSibling;if(n){var a=u.__redom_view;if(a){var s=a.__id;d[s]=null}}r[f++]=null,o.removeChild(u),u=v}r.length=e.length};var p={};l.extend=function(e){return l.bind(this,e)},e.el=n,e.list=r,e.List=o,e.mount=d,e.unmount=f,e.setChildren=i,e.svg=l,e.text=u,Object.defineProperty(e,"__esModule",{value:!0})});