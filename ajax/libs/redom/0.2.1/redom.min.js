!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.redom=e.redom||{})}(this,function(e){"use strict";function t(e){return document.createTextNode(e)}function n(e,t){for(var n=e.el||e,r=n.firstChild,o=0;o<t.length;o++){var u=t[o];if(u){var a=u.el||u;a!==r?i(e,u,r):r=r.nextSibling}}for(;r;){var l=r.nextSibling;unmount(e,r.view||r),r=l}}function r(e,t,n){n?e.insertBefore(t,n.el||n):e.appendChild(t)}function i(e,t,o){var a=e.el||e,l=t.el||t,f=l.mounted;if(l.nodeType)return t!==l&&(l.view=t),f&&t.remount&&t.remount(),r(a,l,o),f||!a.mounted&&!document.contains(l)||(l.mounted=!0,t.mount&&t.mount(),u(l)),!0;if(t.views)return t.parent=e,n(a,t.views),!0;if(t.length){for(var s=0;s<t.length;s++)i(e,t[s],o);return!0}return!1}function o(e,t){var n=e.el||e,r=t.el||t;n.removeChild(r),r.mounted=!1,t.unmount&&t.unmount(),a(r)}function u(e){for(var t=e.firstChild;t;){if(t.mounted)return;t.mounted=!0,t.view&&t.view.mount&&t.view.mount(),u(t),t=t.nextSibling}}function a(e){for(var t=e.firstChild;t;){if(!t.mounted)return;t.mounted=!1,t.view&&t.view.unmount&&t.view.unmount(),a(t),t=t.nextSibling}}function l(e,t,n,r){var o;if(e.nodeType)o=e.cloneNode(!1);else{if("string"!=typeof e){if(this.allowComponents){var u=arguments.length;switch(u){case 1:return new e;case 2:return new e(t);case 3:return new e(t,n);case 4:return new e(t,n,r)}for(var a=new Array(u);u--;)a[u]=arguments[u];return new(query.bind.apply(query,a))}throw new Error("Must pass a valid query or component!")}o=this.createElement(e).cloneNode(!1)}for(var l=!0,f=1;f<arguments.length;f++){var s=arguments[f];if("string"!=typeof s&&"number"!=typeof s){if("function"==typeof s&&(s=s(o)),null!=s)if(i(o,s))l=!1;else for(var c in s){var d=s[c];if("style"===c)if("string"==typeof d)o.setAttribute(c,d);else{var v=o.style;for(var m in d)v[m]=d[m]}else this.allowBareProps&&c in o?o[c]=s[c]:o.setAttribute(c,s[c])}}else l?(o.textContent=s,l=!1):o.appendChild(document.createTextNode(s))}return o}function f(e){var t=this.cache;if(e in t)return t[e];for(var n,r,i,o=0,u=0,a=0,l=e.length;l>=a;a++){var f=a===l?0:e.charCodeAt(a);if(35===f||46===f||0===f){if(0===o)n=0===a?"div":0===f?e:e.substring(u,a);else{var s=e.substring(u,a);1===o?r=s:i?i+=" "+s:i=s}u=a+1,o=35===f?1:2}}var c=this.createTag(n);return r&&(c.id=r),i&&(c.className=i),t[e]=c}function s(e,t,n){return new c(e,t,n)}function c(e,t,n){this.View=e,this.key=t,this.initData=n,this.views=[],t&&(this.lookup={})}function d(e){return function(t,n){return 2===arguments.length?function(r){e(r,t,n)}:function(n){for(var r in t)e(n,r,t[r])}}}function v(e){return function(t,n,r){var i=Object.create(e),o=arguments.length;switch(o){case 0:e.init.call(i);break;case 1:e.init.call(i,t);break;case 2:e.init.call(i,t,n);break;case 3:e.init.call(i,t,n,r);break;default:for(var u=new Array(o),a=0;o>a;)e.init.apply(i,u)}return i}}var m={cache:{},expand:l,createElement:f,allowBareProps:!0,allowComponents:!0,createTag:function(e){return document.createElement(e)}},h=l.bind(m);h.extend=function(e){return l.bind(m,m.createElement(e))},c.prototype.update=function(e){var t=this.View,r=this.key,i=this.initData,o=this.views,u=this.parent;if(r){for(var a=this.lookup,l=0;l<e.length;l++){var f=e[l],s="function"==typeof r?r(f):f[r],c=a[s]||(a[s]=new t(i,f,l));c.update&&c.update(f),o[l]=c,a[s]=c}for(var l=e.length;l<o.length;l++){var s="function"==typeof r?r(f):f[r];a[s]=null,o[l]=null}}else{for(var l=0;l<e.length;l++){var f=e[l],c=o[l]||(o[l]=new t(i,f,l));c.update&&c.update(f)}for(var l=e.length;l<o.length;l++)o[l]=null}o.length=e.length,u&&n(u,o)};var p=d(function(e,t,n){e.addEventListener(t,function(t){n.call(e.view,t)})}),w={cache:{},expand:l,createElement:f,allowBareProps:!1,allowComponents:!1,createTag:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}},g=l.bind(w);g.extend=function(e){return l.bind(this,w.createElement(e))},e.el=h,e.list=s,e.List=c,e.mount=i,e.unmount=o,e.on=p,e.text=t,e.setChildren=n,e.svg=g,e.view=v,Object.defineProperty(e,"__esModule",{value:!0})});