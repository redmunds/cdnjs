(function(){var t,i,e=function(t,i){return function(){return t.apply(i,arguments)}},n=function(t,i){function e(){this.constructor=t}for(var n in i)o.call(i,n)&&(t[n]=i[n]);return e.prototype=i.prototype,t.prototype=new e,t.__super__=i.prototype,t},o={}.hasOwnProperty,s=[].slice,r=[].indexOf||function(t){for(var i=0,e=this.length;e>i;i++)if(i in this&&this[i]===t)return i;return-1};i=function(t){var i;return new(i=function(t){function i(){this.t=e(this.t,this),i.__super__.constructor.call(this),this.dict={},this.defaultlocal="en",this.chosenLocal=void 0,this.availableLocales=[],this.locales=[],this.missingTranslations={},this.on("dict:change",function(t){return function(){return t.sortLocales()}}(this))}return n(i,t),i.prototype.utils={merge:function(t,i){var e,n,o;n=[];for(e in i)o=i[e],"object"==typeof o&&"object"==typeof t[e]?n.push(this.merge(t[e],o)):n.push(t[e]=o);return n},filter:function(t,i){var e,n,o,s;for(o=[],e=0,n=t.length;n>e;e++)s=t[e],i(s)&&o.push(s);return o},unique:function(t){var i,e,n,o,s,r;for(s={},i=0,n=t.length;n>i;i++)r=t[i],s[r]=r;o=[];for(e in s)r=s[e],o.push(r);return o},getByDotNotation:function(t,i){var e;for(e=i.split(".");0!==e.length&&void 0!==t;)t=t[e[0]],e.shift();return t},isPlainObject:function(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)}},i.prototype.register=function(t,i){return t in this.dict||(this.dict[t]={},this.availableLocales.push(t)),this.utils.merge(this.dict[t],i),this.trigger("dict:change",[t])},i.prototype.set=function(t){return this.chosenLocal=t,this.sortLocales()},i.prototype.setDefault=function(t){return this.defaultLocal=t,this.sortLocales()},i.prototype.detectLocal=function(){return navigator.userLanguage||navigator.language},i.prototype.similiarLocales=function(t){return t=String(t).slice(0,2).toLowerCase(),this.utils.filter(this.availableLocales,function(i){return t===i?!1:0===i.toLowerCase().indexOf(t)})},i.prototype.sortLocales=function(){var t,i,e,n,o,l;for(l=this.locales.slice(),t=[this.chosenLocal].concat(s.call(this.similiarLocales(this.chosenLocal)),[this.detectLocal()],s.call(this.similiarLocales(this.detectLocal())),[this.defaultLocal],s.call(this.similiarLocales(this.defaultlocal)),["en"],s.call(this.similiarLocales("en"))),o=[],i=0,e=t.length;e>i;i++)n=t[i],r.call(this.availableLocales,n)>=0&&o.push(n);return o.push.apply(o,this.availableLocales),this.locales=this.utils.unique(o),l.join(",")!==this.locales.join(",")?this.trigger("lang:change",[this.locales,l]):void 0},i.prototype.interpolate=function(){var t,i;return i=arguments[0],t=2<=arguments.length?s.call(arguments,1):[],i=this.utils.isPlainObject(t[0])?i.replace(/%\{([^}]+)\}/g,function(i,e){return t[0][e]}):i.replace(/%(\d+)/g,function(i,e){return t[Number(e)-1]})},i.prototype.t=function(){var t,i,e,n,o,r,l;for(e=arguments[0],i=2<=arguments.length?s.call(arguments,1):[],l=void 0,r=this.locales,t=0,n=r.length;n>t&&(o=r[t],!(l=this.utils.getByDotNotation(this.dict[o],e)));t++)o in this.missingTranslations||(this.missingTranslations[o]=[]),this.missingTranslations[o].push(e),this.missingTranslations[o]=this.utils.unique(this.missingTranslations[o]),this.trigger("missing-translation",[o,e]);return"string"==typeof l?l=this.interpolate.apply(this,[l].concat(s.call(i))):void 0!==l&&(l.plural=function(t){return t in l?l[t]:x18n.interpolate(l.n,t)}),l},i}(t))},"undefined"!=typeof module&&null!==module&&null!=module.exports?(t=require("observable_js"),module.exports=i(t)):"function"==typeof define&&define.amd?define("x18n",["observable"],function(t){return i(t)}):window.x18n=i(window.Observable)}).call(this);
//# sourceMappingURL=x18n.min.js.map