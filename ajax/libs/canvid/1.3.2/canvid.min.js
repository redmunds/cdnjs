!function(e,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define([],n):e.canvid=n()}(this,function(){function e(e){function n(e,n){function o(){r--,0===r&&n(null,t)}var t={},r=Object.keys(e).length;if(0===r)return n("You need to define at least one video object.");for(var i in e)t[i]=new Image,t[i].onload=o,t[i].onerror=n,t[i].src=e[i].src}function o(){var e=document.createElement("canvas");return e.width=d.width,e.height=d.height,e.classList.add("canvid"),h.appendChild(e),e.getContext("2d")}function t(){[].forEach.call(h.children,function(e){e.classList.contains("canvid")||(e.style.display="none")})}function r(){[].forEach.call(h.children,function(e){e.classList.contains("canvid")&&h.removeChild(e)})}function i(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)}}function a(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}function c(e){return"function"==typeof e||!!(e&&e.constructor&&e.call&&e.apply)}function s(){for(var e,n={},o=0;o<arguments.length;o++)for(e in arguments[o])arguments[o].hasOwnProperty(e)&&(n[e]=arguments[o][e]);return n}var u={width:800,height:450,selector:".canvid-wrapper"},l=!0,f={play:function(){console.log("Cannot play before images are loaded")}},d=s(u,e),h="string"==typeof d.selector?document.querySelector(d.selector):d.selector;if(!h)return console.warn("Error. No element found for selector",d.selector);if(!d.videos)return console.warn("Error. You need to define at least one video object");if(a())n(d.videos,function(e,n){if(e)return console.warn("Error while loading video sources.",e);var a=o(),s=i();f.play=function(e,o,i){function c(){y||(u(g),g=+g+(o?-1:1),g<0&&(g+=+m.frames),g>=m.frames&&(g=0),(o?g!=m.frames-1:g)||E++,m.loops&&E>=m.loops&&(C=!1)),y=(y+1)%b,C&&m.frames>1&&s(c)}function u(e){var n=Math.floor(e%m.cols)*p,o=Math.floor(e/m.cols)*v;a.clearRect(0,0,d.width,d.height),a.drawImage(h,n,o,p,v,0,0,d.width,d.height)}f.pause&&f.pause();var h=n[e],m=d.videos[e],p=h.width/m.cols,v=h.height/Math.ceil(m.frames/m.cols),w=i||m.fps||15,g=o?m.frames-1:0,y=0,C=!0,E=0,b=60/w;s(c),f.resume=function(){C=!0,s(c)},f.pause=function(){C=!1,s(c)},f.isPlaying=function(){return C},f.destroy=function(){f.pause(),r()},l&&(l=!1,t())},c(d.loaded)&&d.loaded(f)});else if(opts.srcGif){var m=new Image;m.src=opts.srcGif,h.appendChild(m)}return f}return e});
//# sourceMappingURL=canvid.min.js.map