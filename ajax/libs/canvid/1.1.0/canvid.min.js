!function(e,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define([],n):e.canvid=n()}(this,function(){function e(e){function n(e,n){function o(){r--,0===r&&n(null,t)}var t={},r=Object.keys(e).length;if(0===r)return n("You need to define at least one video object.");for(var i in e)t[i]=new Image,t[i].onload=o,t[i].onerror=n,t[i].src=e[i].src}function o(){var e=document.createElement("canvas");return e.width=l.width,e.height=l.height,e.classList.add("canvid"),f.appendChild(e),e.getContext("2d")}function t(){var e=[].slice.call(f.children);e.forEach(function(e){e.classList.contains("canvid")||(e.style.display="none")})}function r(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)}}function i(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}function a(e){return"function"==typeof e||!!(e&&e.constructor&&e.call&&e.apply)}function c(){for(var e,n={},o=0;o<arguments.length;o++)for(e in arguments[o])arguments[o].hasOwnProperty(e)&&(n[e]=arguments[o][e]);return n}var s={width:800,height:450,selector:".canvid-wrapper"},u=!0,d={play:function(){console.log("Cannot play before images are loaded")}},l=c(s,e),f=document.querySelector(l.selector);if(!f)return console.warn("Error. No element found for selector",l.selector);if(!l.videos)return console.warn("Error. You need to define at least one video object");if(i())n(l.videos,function(e,n){if(e)return console.warn("Error while loading video sources.",e);var i=o(),c=r();d.play=function(e,o){function r(){w||(a(p),p=+p+(o?-1:1),p<0&&(p+=+f.frames),p>=f.frames&&(p=0),(o?p!=f.frames-1:p)||g++,f.loops&&g>=f.loops&&(v=!1)),w=(w+1)%((o?.5:1)*y),v&&f.frames>1&&c(r)}function a(e){var n=Math.floor(e%f.cols)*m,o=Math.floor(e/f.cols)*h;i.clearRect(0,0,l.width,l.height),i.drawImage(s,n,o,m,h,0,0,l.width,l.height)}d.pause&&d.pause();var s=n[e],f=l.videos[e],m=s.width/f.cols,h=s.height/Math.ceil(f.frames/f.cols),p=o?f.frames-1:0,w=0,v=!0,g=0,y=4;c(r),d.resume=function(){v=!0,c(r)},d.pause=function(){v=!1,c(r)},u&&(u=!1,t())},a(l.loaded)&&l.loaded(d)});else if(opts.srcGif){var m=new Image;m.src=opts.srcGif,f.appendChild(m)}return d}return e});
//# sourceMappingURL=canvid.min.js.map