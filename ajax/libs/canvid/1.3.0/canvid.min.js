!function(e,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define([],n):e.canvid=n()}(this,function(){function e(e){function n(e,n){function o(){r--,0===r&&n(null,t)}var t={},r=Object.keys(e).length;if(0===r)return n("You need to define at least one video object.");for(var i in e)t[i]=new Image,t[i].onload=o,t[i].onerror=n,t[i].src=e[i].src}function o(){var e=document.createElement("canvas");return e.width=f.width,e.height=f.height,e.classList.add("canvid"),l.appendChild(e),e.getContext("2d")}function t(){var e=[].slice.call(l.children);e.forEach(function(e){e.classList.contains("canvid")||(e.style.display="none")})}function r(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)}}function i(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}function a(e){return"function"==typeof e||!!(e&&e.constructor&&e.call&&e.apply)}function c(){for(var e,n={},o=0;o<arguments.length;o++)for(e in arguments[o])arguments[o].hasOwnProperty(e)&&(n[e]=arguments[o][e]);return n}var s={width:800,height:450,selector:".canvid-wrapper"},u=!0,d={play:function(){console.log("Cannot play before images are loaded")}},f=c(s,e),l=document.querySelector(f.selector);if(!l)return console.warn("Error. No element found for selector",f.selector);if(!f.videos)return console.warn("Error. You need to define at least one video object");if(i())n(f.videos,function(e,n){if(e)return console.warn("Error while loading video sources.",e);var i=o(),c=r();d.play=function(e,o,r){function a(){g||(s(v),v=+v+(o?-1:1),v<0&&(v+=+m.frames),v>=m.frames&&(v=0),(o?v!=m.frames-1:v)||C++,m.loops&&C>=m.loops&&(y=!1)),g=(g+1)%E,y&&m.frames>1&&c(a)}function s(e){var n=Math.floor(e%m.cols)*h,o=Math.floor(e/m.cols)*p;i.clearRect(0,0,f.width,f.height),i.drawImage(l,n,o,h,p,0,0,f.width,f.height)}d.pause&&d.pause();var l=n[e],m=f.videos[e],h=l.width/m.cols,p=l.height/Math.ceil(m.frames/m.cols),w=r||m.fps||15,v=o?m.frames-1:0,g=0,y=!0,C=0,E=60/w;c(a),d.resume=function(){y=!0,c(a)},d.pause=function(){y=!1,c(a)},d.isPlaying=function(){return y},u&&(u=!1,t())},a(f.loaded)&&f.loaded(d)});else if(opts.srcGif){var m=new Image;m.src=opts.srcGif,l.appendChild(m)}return d}return e});
//# sourceMappingURL=canvid.min.js.map