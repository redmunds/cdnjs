!function(){var t;t="undefined"!=typeof module&&"undefined"!=typeof module.exports?require("./pnglib"):window.PNGlib;var r=function(t,r){this.defaults={background:[240,240,240,255],hash:this.createHashFromString((new Date).toISOString()),margin:.08,size:64},this.options="object"==typeof r?r:this.defaults,arguments[1]&&"number"==typeof arguments[1]&&(this.options.size=arguments[1]),arguments[2]&&(this.options.margin=arguments[2]),this.hash=t||this.defaults.hash,this.background=this.options.background||this.defaults.background,this.foreground=this.options.foreground,this.margin=this.options.margin||this.defaults.margin,this.size=this.options.size||this.defaults.size};r.prototype={background:null,foreground:null,hash:null,margin:null,size:null,render:function(){var r,n=this.hash,e=this.size,o=Math.floor(e*this.margin),i=Math.floor((e-2*o)/5),s=Math.floor((e-5*i)/2),h=new t(e,e,256),a=h.color(this.background[0],this.background[1],this.background[2],this.background[3]);if(this.foreground)r=h.color(this.foreground[0],this.foreground[1],this.foreground[2]);else{var u=this.hsl2rgb(parseInt(n.substr(-7),16)/268435455,.5,.7);r=h.color(255*u[0],255*u[1],255*u[2])}var d,f;for(d=0;d<15;d++)f=parseInt(n.charAt(d),16)%2?a:r,d<5?this.rectangle(2*i+s,d*i+s,i,i,f,h):d<10?(this.rectangle(1*i+s,(d-5)*i+s,i,i,f,h),this.rectangle(3*i+s,(d-5)*i+s,i,i,f,h)):d<15&&(this.rectangle(0*i+s,(d-10)*i+s,i,i,f,h),this.rectangle(4*i+s,(d-10)*i+s,i,i,f,h));return h},rectangle:function(t,r,n,e,o,i){var s,h;for(s=t;s<t+n;s++)for(h=r;h<r+e;h++)i.buffer[i.index(s,h)]=o},hsl2rgb:function(t,r,n){return t*=6,r=[n+=r*=n<.5?n:1-n,n-t%1*r*2,n-=r*=2,n,n+t%1*r,n+r],[r[~~t%6],r[(16|t)%6],r[(8|t)%6]]},toString:function(){return this.render().getBase64()},createHashFromString:function(t){var r,n,e,o="0",i="identicon";if(!t)return o;for(t+=i+t,r=0,e=t.length;r<e;r++)n=t.charCodeAt(r),o=(o<<5)-o+n,o|=0;return o.toString()}},"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=r:window.Identicon=r}();