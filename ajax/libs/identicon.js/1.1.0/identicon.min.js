!function(){Identicon=function(t,n){this.defaults={background:[240,240,240,255],hash:this.createHashFromString((new Date).toISOString()),margin:.08,size:64},this.options="object"==typeof n?n:this.defaults,arguments[1]&&"number"==typeof arguments[1]&&(this.options.size=arguments[1]),arguments[2]&&(this.options.margin=arguments[2]),this.hash=t||this.defaults.hash,this.background=this.options.background||this.defaults.background,this.margin=this.options.margin||this.defaults.margin,this.size=this.options.size||this.defaults.size},Identicon.prototype={background:null,hash:null,margin:null,size:null,render:function(){var t,n,i=this.hash,r=this.size,s=Math.floor(r*this.margin),e=Math.floor((r-2*s)/5),o=Math.floor((r-5*e)/2),h=new PNGlib(r,r,256),a=h.color(this.background[0],this.background[1],this.background[2],this.background[3]),c=this.hsl2rgb(parseInt(i.substr(-7),16)/268435455,.5,.7),u=h.color(255*c[0],255*c[1],255*c[2]);for(t=0;t<15;t++)n=parseInt(i.charAt(t),16)%2?a:u,t<5?this.rectangle(2*e+o,t*e+o,e,e,n,h):t<10?(this.rectangle(1*e+o,(t-5)*e+o,e,e,n,h),this.rectangle(3*e+o,(t-5)*e+o,e,e,n,h)):t<15&&(this.rectangle(0*e+o,(t-10)*e+o,e,e,n,h),this.rectangle(4*e+o,(t-10)*e+o,e,e,n,h));return h},rectangle:function(t,n,i,r,s,e){var o,h;for(o=t;o<t+i;o++)for(h=n;h<n+r;h++)e.buffer[e.index(o,h)]=s},hsl2rgb:function(t,n,i){return t*=6,n=[i+=n*=i<.5?i:1-i,i-t%1*n*2,i-=n*=2,i,i+t%1*n,i+n],[n[~~t%6],n[(16|t)%6],n[(8|t)%6]]},toString:function(){return this.render().getBase64()},createHashFromString:function(t){var n,i,r,s="0",e="identicon";if(!t)return s;for(t+=e+t,n=0,r=t.length;n<r;n++)i=t.charCodeAt(n),s=(s<<5)-s+i,s|=0;return s.toString()}},window.Identicon=Identicon}();