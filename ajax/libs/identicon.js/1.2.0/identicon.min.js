!function(){Identicon=function(t,n){this.defaults={background:[240,240,240,255],hash:this.createHashFromString((new Date).toISOString()),margin:.08,size:64},this.options="object"==typeof n?n:this.defaults,arguments[1]&&"number"==typeof arguments[1]&&(this.options.size=arguments[1]),arguments[2]&&(this.options.margin=arguments[2]),this.hash=t||this.defaults.hash,this.background=this.options.background||this.defaults.background,this.margin=this.options.margin||this.defaults.margin,this.size=this.options.size||this.defaults.size},Identicon.prototype={background:null,hash:null,margin:null,size:null,render:function(){var t,n,i=this.hash,e=this.size,r=Math.floor(e*this.margin),o=Math.floor((e-2*r)/5),s=Math.floor((e-5*o)/2),h=new PNGlib(e,e,256),a=h.color(this.background[0],this.background[1],this.background[2],this.background[3]),u=this.hsl2rgb(parseInt(i.substr(-7),16)/268435455,.5,.7),c=h.color(255*u[0],255*u[1],255*u[2]);for(t=0;t<15;t++)n=parseInt(i.charAt(t),16)%2?a:c,t<5?this.rectangle(2*o+s,t*o+s,o,o,n,h):t<10?(this.rectangle(1*o+s,(t-5)*o+s,o,o,n,h),this.rectangle(3*o+s,(t-5)*o+s,o,o,n,h)):t<15&&(this.rectangle(0*o+s,(t-10)*o+s,o,o,n,h),this.rectangle(4*o+s,(t-10)*o+s,o,o,n,h));return h},rectangle:function(t,n,i,e,r,o){var s,h;for(s=t;s<t+i;s++)for(h=n;h<n+e;h++)o.buffer[o.index(s,h)]=r},hsl2rgb:function(t,n,i){return t*=6,n=[i+=n*=i<.5?i:1-i,i-t%1*n*2,i-=n*=2,i,i+t%1*n,i+n],[n[~~t%6],n[(16|t)%6],n[(8|t)%6]]},toString:function(){return this.render().getBase64()},createHashFromString:function(t){var n,i,e,r="0",o="identicon";if(!t)return r;for(t+=o+t,n=0,e=t.length;n<e;n++)i=t.charCodeAt(n),r=(r<<5)-r+i,r|=0;return r.toString()}},"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=Identicon:window.Identicon=Identicon}();