var Stats=function(){function e(e,t,a){var l,n,i;for(n=0;n<30;n++)for(l=0;l<73;l++)i=4*(l+74*n),e[i]=e[i+4],e[i+1]=e[i+5],e[i+2]=e[i+6];for(n=0;n<30;n++)i=4*(73+74*n),n<t?(e[i]=A[a].bg.r,e[i+1]=A[a].bg.g,e[i+2]=A[a].bg.b):(e[i]=A[a].fg.r,e[i+1]=A[a].fg.g,e[i+2]=A[a].fg.b)}function t(){switch(x++,x==M?x=0:x,l.style.display="none",r.style.display="none",f.style.display="none",x){case 0:l.style.display="block";break;case 1:r.style.display="block";break;case 2:f.style.display="block"}}var a,l,n,i,s,g,r,o,p,d,m,f,b,h,y,c,x=0,M=2,u=0,w=(new Date).getTime(),v=w,C=w,S=0,k=1e3,E=0,H=0,L=1e3,D=0,T=0,I=1e3,z=0,A={fps:{bg:{r:16,g:16,b:48},fg:{r:0,g:255,b:255}},ms:{bg:{r:16,g:48,b:16},fg:{r:0,g:255,b:0}},mb:{bg:{r:48,g:16,b:26},fg:{r:255,g:0,b:128}}};a=document.createElement("div"),a.style.cursor="pointer",a.style.width="80px",a.style.opacity="0.9",a.style.zIndex="10001",a.addEventListener("click",t,!1),l=document.createElement("div"),l.style.backgroundColor="rgb("+Math.floor(A.fps.bg.r/2)+","+Math.floor(A.fps.bg.g/2)+","+Math.floor(A.fps.bg.b/2)+")",l.style.padding="2px 0px 3px 0px",a.appendChild(l),n=document.createElement("div"),n.style.fontFamily="Helvetica, Arial, sans-serif",n.style.textAlign="left",n.style.fontSize="9px",n.style.color="rgb("+A.fps.fg.r+","+A.fps.fg.g+","+A.fps.fg.b+")",n.style.margin="0px 0px 1px 3px",n.innerHTML='<span style="font-weight:bold">FPS</span>',l.appendChild(n),i=document.createElement("canvas"),i.width=74,i.height=30,i.style.display="block",i.style.marginLeft="3px",l.appendChild(i),s=i.getContext("2d"),s.fillStyle="rgb("+A.fps.bg.r+","+A.fps.bg.g+","+A.fps.bg.b+")",s.fillRect(0,0,i.width,i.height),g=s.getImageData(0,0,i.width,i.height),r=document.createElement("div"),r.style.backgroundColor="rgb("+Math.floor(A.ms.bg.r/2)+","+Math.floor(A.ms.bg.g/2)+","+Math.floor(A.ms.bg.b/2)+")",r.style.padding="2px 0px 3px 0px",r.style.display="none",a.appendChild(r),o=document.createElement("div"),o.style.fontFamily="Helvetica, Arial, sans-serif",o.style.textAlign="left",o.style.fontSize="9px",o.style.color="rgb("+A.ms.fg.r+","+A.ms.fg.g+","+A.ms.fg.b+")",o.style.margin="0px 0px 1px 3px",o.innerHTML='<span style="font-weight:bold">MS</span>',r.appendChild(o),p=document.createElement("canvas"),p.width=74,p.height=30,p.style.display="block",p.style.marginLeft="3px",r.appendChild(p),d=p.getContext("2d"),d.fillStyle="rgb("+A.ms.bg.r+","+A.ms.bg.g+","+A.ms.bg.b+")",d.fillRect(0,0,p.width,p.height),m=d.getImageData(0,0,p.width,p.height);try{performance&&performance.memory&&performance.memory.totalJSHeapSize&&(M=3)}catch(e){}return f=document.createElement("div"),f.style.backgroundColor="rgb("+Math.floor(A.mb.bg.r/2)+","+Math.floor(A.mb.bg.g/2)+","+Math.floor(A.mb.bg.b/2)+")",f.style.padding="2px 0px 3px 0px",f.style.display="none",a.appendChild(f),b=document.createElement("div"),b.style.fontFamily="Helvetica, Arial, sans-serif",b.style.textAlign="left",b.style.fontSize="9px",b.style.color="rgb("+A.mb.fg.r+","+A.mb.fg.g+","+A.mb.fg.b+")",b.style.margin="0px 0px 1px 3px",b.innerHTML='<span style="font-weight:bold">MB</span>',f.appendChild(b),h=document.createElement("canvas"),h.width=74,h.height=30,h.style.display="block",h.style.marginLeft="3px",f.appendChild(h),y=h.getContext("2d"),y.fillStyle="#301010",y.fillRect(0,0,h.width,h.height),c=y.getImageData(0,0,h.width,h.height),{domElement:a,update:function(){u++,w=(new Date).getTime(),H=w-v,L=Math.min(L,H),D=Math.max(D,H),e(m.data,Math.min(30,30-H/200*30),"ms"),o.innerHTML='<span style="font-weight:bold">'+H+" MS</span> ("+L+"-"+D+")",d.putImageData(m,0,0),v=w,w>C+1e3&&(S=Math.round(1e3*u/(w-C)),k=Math.min(k,S),E=Math.max(E,S),e(g.data,Math.min(30,30-S/100*30),"fps"),n.innerHTML='<span style="font-weight:bold">'+S+" FPS</span> ("+k+"-"+E+")",s.putImageData(g,0,0),3==M&&(T=9.54e-7*performance.memory.usedJSHeapSize,I=Math.min(I,T),z=Math.max(z,T),e(c.data,Math.min(30,30-T/2),"mb"),b.innerHTML='<span style="font-weight:bold">'+Math.round(T)+" MB</span> ("+Math.round(I)+"-"+Math.round(z)+")",y.putImageData(c,0,0)),C=w,u=0)}}};