var Stats=function(){function e(e,t,a){var n,g,l;for(g=0;g<30;g++)for(n=0;n<73;n++)l=4*(n+74*g),e[l]=e[l+4],e[l+1]=e[l+5],e[l+2]=e[l+6];for(g=0;g<30;g++)l=4*(73+74*g),g<t?(e[l]=z[a].bg.r,e[l+1]=z[a].bg.g,e[l+2]=z[a].bg.b):(e[l]=z[a].fg.r,e[l+1]=z[a].fg.g,e[l+2]=z[a].fg.b)}function t(){switch(x++,x==M?x=0:x,n.style.display="none",o.style.display="none",h.style.display="none",x){case 0:n.style.display="block";break;case 1:o.style.display="block";break;case 2:h.style.display="block"}}var a,n,g,l,r,i,o,s,d,m,p,h,b,f,c,y,x=0,M=2,u=0,w=(new Date).getTime(),k=w,v=w,C=0,E=1e3,S=0,L=0,H=1e3,D=0,T=0,I=1e3,P=0,z={fps:{bg:{r:16,g:16,b:48},fg:{r:0,g:255,b:255}},ms:{bg:{r:16,g:48,b:16},fg:{r:0,g:255,b:0}},mem:{bg:{r:48,g:16,b:26},fg:{r:255,g:0,b:128}}};a=document.createElement("div"),a.style.fontFamily="Helvetica, Arial, sans-serif",a.style.textAlign="left",a.style.fontSize="9px",a.style.opacity="0.9",a.style.width="80px",a.style.cursor="pointer",a.addEventListener("click",t,!1),n=document.createElement("div"),n.style.backgroundColor="rgb("+Math.floor(z.fps.bg.r/2)+","+Math.floor(z.fps.bg.g/2)+","+Math.floor(z.fps.bg.b/2)+")",n.style.padding="2px 0px 3px 0px",a.appendChild(n),g=document.createElement("div"),g.innerHTML="<strong>FPS</strong>",g.style.color="rgb("+z.fps.fg.r+","+z.fps.fg.g+","+z.fps.fg.b+")",g.style.margin="0px 0px 1px 3px",n.appendChild(g),l=document.createElement("canvas"),l.width=74,l.height=30,l.style.display="block",l.style.marginLeft="3px",n.appendChild(l),r=l.getContext("2d"),r.fillStyle="rgb("+z.fps.bg.r+","+z.fps.bg.g+","+z.fps.bg.b+")",r.fillRect(0,0,l.width,l.height),i=r.getImageData(0,0,l.width,l.height),o=document.createElement("div"),o.style.backgroundColor="rgb("+Math.floor(z.ms.bg.r/2)+","+Math.floor(z.ms.bg.g/2)+","+Math.floor(z.ms.bg.b/2)+")",o.style.padding="2px 0px 3px 0px",o.style.display="none",a.appendChild(o),s=document.createElement("div"),s.innerHTML="<strong>MS</strong>",s.style.color="rgb("+z.ms.fg.r+","+z.ms.fg.g+","+z.ms.fg.b+")",s.style.margin="0px 0px 1px 3px",o.appendChild(s),d=document.createElement("canvas"),d.width=74,d.height=30,d.style.display="block",d.style.marginLeft="3px",o.appendChild(d),m=d.getContext("2d"),m.fillStyle="rgb("+z.ms.bg.r+","+z.ms.bg.g+","+z.ms.bg.b+")",m.fillRect(0,0,d.width,d.height),p=m.getImageData(0,0,d.width,d.height);try{webkitPerformance&&webkitPerformance.memory.totalJSHeapSize&&(M=3)}catch(e){}return h=document.createElement("div"),h.style.backgroundColor="rgb("+Math.floor(z.mem.bg.r/2)+","+Math.floor(z.mem.bg.g/2)+","+Math.floor(z.mem.bg.b/2)+")",h.style.padding="2px 0px 3px 0px",h.style.display="none",a.appendChild(h),b=document.createElement("div"),b.innerHTML="<strong>MEM</strong>",b.style.color="rgb("+z.mem.fg.r+","+z.mem.fg.g+","+z.mem.fg.b+")",b.style.margin="0px 0px 1px 3px",h.appendChild(b),f=document.createElement("canvas"),f.width=74,f.height=30,f.style.display="block",f.style.marginLeft="3px",h.appendChild(f),c=f.getContext("2d"),c.fillStyle="#301010",c.fillRect(0,0,f.width,f.height),y=c.getImageData(0,0,f.width,f.height),{domElement:a,update:function(){u++,w=(new Date).getTime(),L=w-k,H=Math.min(H,L),D=Math.max(D,L),e(p.data,Math.min(30,30-L/200*30),"ms"),s.innerHTML="<strong>"+L+" MS</strong> ("+H+"-"+D+")",m.putImageData(p,0,0),k=w,w>v+1e3&&(C=Math.round(1e3*u/(w-v)),E=Math.min(E,C),S=Math.max(S,C),e(i.data,Math.min(30,30-C/100*30),"fps"),g.innerHTML="<strong>"+C+" FPS</strong> ("+E+"-"+S+")",r.putImageData(i,0,0),3==M&&(T=9.54e-7*webkitPerformance.memory.usedJSHeapSize,I=Math.min(I,T),P=Math.max(P,T),e(y.data,Math.min(30,30-T/2),"mem"),b.innerHTML="<strong>"+Math.round(T)+" MEM</strong> ("+Math.round(I)+"-"+Math.round(P)+")",c.putImageData(y,0,0)),v=w,u=0)}}};