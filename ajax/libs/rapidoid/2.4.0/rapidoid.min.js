function goAt(t){window.location.href=t}function _stop(t){"undefined"!=typeof t.stopPropagation?t.stopPropagation():"undefined"!=typeof t.preventDefault?t.preventDefault():t.cancelBubble=!0}function _popup(t,e){var r=800,o=600,n=screen.width/2-r/2,i=screen.height/2-o/2,a=window.open(t,"windowname1","width="+r+", height="+o+", top="+i+", left="+n);a.focus&&a.focus();var c=setInterval(function(){a.closed&&(clearInterval(c),e&&e(t))},100)}function range(t,e){for(var r=[],o=t;t+e>o;o++)r.push(o);return r}var theme;try{var m=/\bTHEME=(\w+?)\b/g.exec(document.cookie);theme=m[1]}catch(e){}theme&&"default"!=theme&&document.write('<link href="/bootstrap/css/theme-'+theme+'.css" rel="stylesheet">');var rapidoidApp=angular.module("rapidoid-app",["infinite-scroll","ngSanitize"]);rapidoidApp.filter("rangex",function(){return function(t,e,r){return e=parseInt(e),r=parseInt(r),range(e,r)}}),rapidoidApp.filter("rowCount",function(){return function(t,e){return range(0,Math.ceil(t.length/e))}}),rapidoidApp.filter("modn",function(){return function(t,e,r){return r=r||0,t.filter(function(t,o){return o%e==r})}}),rapidoidApp.directive("compile",["$compile",function(t){return function(e,r,o){e.$watch(function(t){return t.$eval(o.compile)},function(o){r.html(o),t(r.contents())(e)})}}]),rapidoidApp.controller("Main",["$scope","$http","$window",function(t,e,r){t._emit=function(e){for(var r=document.querySelectorAll("input,textarea"),o={},n=0;n<r.length;n++){var i=$(r[n]),a=i.attr("_h");if(a){var c;c="checkbox"==i.prop("type")||"radio"==i.prop("type")?i.prop("checked"):i.val(),o[a]=c}}r=document.querySelectorAll("option");for(var n=0;n<r.length;n++){var i=$(r[n]),a=i.attr("_h");a&&(o[a]=i.prop("selected"))}$.post(window.location.href,{event:e,inputs:JSON.stringify(o)}).done(function(e){if(e._redirect_)return void goAt(e._redirect_);for(var r in e)if("!errors"==r){$(".field-error").html(""),errors=e[r];for(var o in errors)for(var n=errors[o],i=document.querySelectorAll("input,textarea,option"),a=0;a<i.length;a++){var c=$(i[a]),p=c.attr("_h");p==o&&$(c).next(".field-error").html(n)}}else"body"==r?(t.bodyContent=e[r],t.$apply()):alert("Selector not supported: "+r)}).fail(function(t){alert("Error!"),console.log(t)})},t.moreLess=function(t){t.more=!t.more},t.upvote=function(t){t.vote=1!=t.vote?1:0},t.downvote=function(t){t.vote=-1!=t.vote?-1:0},t.changeFavLocal=function(t){var e=JSON.parse(localStorage.favorites||"{}");t.fav=!t.fav,t.fav?e[t.id]=!0:delete e[t.id],localStorage.favorites=JSON.stringify(e)}}]),rapidoidApp.controller("StreamController",["$scope","$http","$window","$attrs","StreamData",function(t,e,r,o,n){var i=o.url;t.stream=new n(i),t.items=t.stream.items,t.cols=1}]),rapidoidApp.factory("StreamData",function(t){var e=function(t){this.items=[],this.busy=!1,this.page=1,this.dataUrl=t,this.cols=3};return e.prototype.nextPage=function(){if(!this.busy){this.busy=!0;var e=this.dataUrl.replace("{{page}}",""+this.page);t.get(e).success(function(t){for(var e=t,r=0;r<e.length;r++)this.items.push(e[r]);this.page++,this.busy=!1}.bind(this))}},e.prototype.zoom=function(t){var e=this.cols+t;e>=1&&4>=e&&(this.cols=e)},e}),rapidoidApp.controller("StreamItemController",["$scope","$http","$window","$attrs",function(t,e,r,o){var n=t.rowN*t.cols+t.colN;t.it=function(){return t.items[n]}}]);