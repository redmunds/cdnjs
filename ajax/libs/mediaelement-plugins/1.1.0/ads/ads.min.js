!function e(r,a,d){function t(s,o){if(!a[s]){if(!r[s]){var n="function"==typeof require&&require;if(!o&&n)return n(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var p=a[s]={exports:{}};r[s][0].call(p.exports,function(e){var a=r[s][1][e];return t(a?a:e)},p,p.exports,e,r,a,d)}return a[s].exports}for(var i="function"==typeof require&&require,s=0;s<d.length;s++)t(d[s]);return t}({1:[function(e,r,a){"use strict";Object.assign(mejs.MepDefaults,{adsPrerollMediaUrl:[],adsPrerollAdUrl:[],adsPrerollAdEnableSkip:!1,adsPrerollAdSkipSeconds:-1,indexPreroll:0}),Object.assign(MediaElementPlayer.prototype,{adsLoaded:!1,adsDataIsLoading:!1,adsCurrentMediaUrl:"",adsCurrentMediaDuration:0,adsPlayerHasStarted:!1,buildads:function(e,r,a,d){var t=this;t.adsLoaded||(t.adsLoaded=!0,e.adsLayer=$('<div class="'+t.options.classPrefix+"layer "+t.options.classPrefix+"overlay\n\t\t\t\t"+t.options.classPrefix+'ads">\n\t\t\t\t\t<a href="#" target="_blank"></a>\n\t\t\t\t\t<div class="'+t.options.classPrefix+'ads-skip-block">\n\t\t\t\t\t\t<span class="'+t.options.classPrefix+'ads-skip-message"></span>\n\t\t\t\t\t\t<span class="'+t.options.classPrefix+'ads-skip-button">'+mejs.i18n.t("mejs.ad-skip")+"</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>").insertBefore(a.find("."+t.options.classPrefix+"overlay-play")).hide(),e.adsLayer.find("a").on("click",$.proxy(t.adsAdClick,t)),e.adsSkipBlock=e.adsLayer.find("."+t.options.classPrefix+"ads-skip-block").hide(),e.adsSkipMessage=e.adsLayer.find("."+t.options.classPrefix+"ads-skip-message").hide(),e.adsSkipButton=e.adsLayer.find("."+t.options.classPrefix+"ads-skip-button").on("click",$.proxy(t.adsSkipClick,t)),t.adsMediaTryingToStartProxy=$.proxy(t.adsMediaTryingToStart,t),t.adsPrerollStartedProxy=$.proxy(t.adsPrerollStarted,t),t.adsPrerollMetaProxy=$.proxy(t.adsPrerollMeta,t),t.adsPrerollUpdateProxy=$.proxy(t.adsPrerollUpdate,t),t.adsPrerollEndedProxy=$.proxy(t.adsPrerollEnded,t),t.media.addEventListener("play",t.adsMediaTryingToStartProxy),t.media.addEventListener("playing",t.adsMediaTryingToStartProxy),t.media.addEventListener("canplay",t.adsMediaTryingToStartProxy),t.media.addEventListener("loadedmetadata",t.adsMediaTryingToStartProxy),t.options.indexPreroll<t.options.adsPrerollMediaUrl.length&&t.adsStartPreroll())},adsMediaTryingToStart:function(){var e=this;e.adsDataIsLoading&&!e.media.paused&&e.media.pause(),e.adsPlayerHasStarted=!0},adsStartPreroll:function(){var e=this;e.media.addEventListener("loadedmetadata",e.adsPrerollMetaProxy),e.media.addEventListener("playing",e.adsPrerollStartedProxy),e.media.addEventListener("ended",e.adsPrerollEndedProxy),e.media.addEventListener("timeupdate",e.adsPrerollUpdateProxy),0===e.options.indexPreroll&&(e.adsCurrentMediaUrl=e.media.src,e.adsCurrentMediaDuration=e.media.duration),e.media.setSrc(e.options.adsPrerollMediaUrl[e.options.indexPreroll]),e.media.load(),e.adsPlayerHasStarted&&e.media.play()},adsPrerollMeta:function(){var e=this,r=0;e.options.duration>0?r=e.options.duration:isNaN(e.adsCurrentMediaDuration)||(r=e.adsCurrentMediaDuration),setTimeout(function(){e.controls.find("."+e.options.classPrefix+"duration").html(mejs.Utils.secondsToTimeCode(r,e.options.alwaysShowHours))},250)},adsPrerollStarted:function(){var e=this;e.media.removeEventListener("playing",e.adsPrerollStartedProxy),e.disableControls(),e.adsLayer.show(),""!==e.options.adsPrerollAdUrl[e.options.indexPreroll]?e.adsLayer.find("a").attr("href",e.options.adsPrerollAdUrl[e.options.indexPreroll]):(e.adsLayer.find("a").attr("href","#"),e.adsLayer.find("a").attr("target","")),e.options.adsPrerollAdEnableSkip?(e.adsSkipBlock.show(),e.options.adsPrerollAdSkipSeconds>0?(e.adsSkipMessage.html(mejs.i18n.t("mejs.ad-skip-info").replace("%1",e.options.adsPrerollAdSkipSeconds.toString())).show(),e.adsSkipButton.hide()):(e.adsSkipMessage.hide(),e.adsSkipButton.show())):e.adsSkipBlock.hide(),e.container.trigger("mejsprerollstarted")},adsPrerollUpdate:function(){var e=this;e.options.adsPrerollAdEnableSkip&&e.options.adsPrerollAdSkipSeconds>0&&(e.media.currentTime>e.options.adsPrerollAdSkipSeconds?(e.adsSkipButton.show(),e.adsSkipMessage.hide()):e.adsSkipMessage.html(mejs.i18n.t("mejs.ad-skip-info").replace("%1",Math.round(e.options.adsPrerollAdSkipSeconds-e.media.currentTime).toString()))),e.container.trigger("mejsprerolltimeupdate")},adsPrerollEnded:function(){var e=this;e.container.trigger("mejsprerollended"),e.options.indexPreroll++,e.options.indexPreroll<e.options.adsPrerollMediaUrl.length?e.adsStartPreroll():e.adRestoreMainMedia()},adRestoreMainMedia:function(){var e=this;e.media.setSrc(e.adsCurrentMediaUrl),setTimeout(function(){e.media.load(),e.media.play()},10),e.enableControls(),e.adsLayer.hide(),e.media.removeEventListener("ended",e.adsPrerollEndedProxy),e.media.removeEventListener("loadedmetadata",e.adsPrerollMetaProxy),e.media.removeEventListener("timeupdate",e.adsPrerollUpdateProxy),e.container.trigger("mejsprerollmainstarted")},adsAdClick:function(e){var r=this;r.media.paused?r.media.play():r.media.pause(),r.container.trigger("mejsprerolladsclicked")},adsSkipClick:function(){var e=this;e.container.trigger("mejsprerollskipclicked"),e.container.trigger("mejsprerollended"),e.options.indexPreroll++,e.options.indexPreroll<e.options.adsPrerollMediaUrl.length?e.adsStartPreroll():e.adRestoreMainMedia()},prerollAdsFinished:function(){var e=this;return e.options.indexPreroll===e.options.adsPrerollMediaUrl.length},adsLoadUrl:function(e){var r=new Image,a=Math.round(1e5*Math.random());r.src=e+(e.includes("?")?"&":"?")+("random"+a+"="+a),r.loaded=function(){r=null}}})},{}]},{},[1]);
