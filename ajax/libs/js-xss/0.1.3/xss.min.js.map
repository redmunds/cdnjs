{"version":3,"sources":["xss.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length","1","module","onTag","tag","html","options","onIgnoreTag","onTagAttr","name","value","onIgnoreTagAttr","escapeHtml","replace","REGEXP_LT","REGEXP_GT","safeAttrValue","friendlyAttrValue","trim","REGEXP_DEFAULT_ON_TAG_ATTR_1","test","REGEXP_DEFAULT_ON_TAG_ATTR_3","lastIndex","REGEXP_DEFAULT_ON_TAG_ATTR_4","escapeAttrValue","escapeQuote","str","REGEXP_QUOTE","unescapeQuote","REGEXP_QUOTE_2","escapeHtmlEntities","REGEXP_ATTR_VALUE_1","code","String","fromCharCode","parseInt","substr","escapeDangerHtml5Entities","REGEXP_ATTR_VALUE_COLON","REGEXP_ATTR_VALUE_NEWLINE","clearNonPrintableCharacter","str2","len","charCodeAt","charAt","onIgnoreTagStripAll","StripTagBody","tags","next","isRemoveTag","isRemoveAllTag","indexOf","Array","isArray","removeList","posStart","isClosing","ret","end","position","push","remove","rethtml","lastPos","forEach","pos","slice","whiteList","h1","h2","h3","h4","h5","h6","hr","span","strong","b","br","p","pre","img","div","table","tr","td","th","tbody","thead","ul","li","ol","dl","dt","em","cite","section","header","footer","blockquote","audio","video","2","filterXSS","xss","FilterXSS","process","DEFAULT","parser","window","prototype","item","this","fn","./default","./parser","./xss","3","getTagName","tagName","toLowerCase","parseTag","tagStart","quoteStart","currentPos","currentHtml","currentTagName","c","parseAttr","onAttr","addAttr","REGEXP_ATTR_NAME","retAttrs","tmpName","v","j","join","4","isNull","obj","undefined","getAttrs","closing","stripIgnoreTag","console","error","me","stripIgnoreTagBody","retHtml","sourcePosition","info","isWhite","attrs","whiteAttrList","attrsHtml","isWhiteAttr"],"mappings":"CAAC,QAAUA,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAkB,kBAATC,UAAqBA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,MAAM,IAAIK,OAAM,uBAAuBL,EAAE,KAAK,GAAIM,GAAET,EAAEG,IAAIO,WAAYX,GAAEI,GAAG,GAAGQ,KAAKF,EAAEC,QAAQ,SAASZ,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,EAAEA,EAAEF,IAAIW,EAAEA,EAAEC,QAAQZ,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGO,QAAkD,IAAI,GAA1CH,GAAkB,kBAATD,UAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEW,OAAOT,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKW,GAAG,SAASP,EAAQQ,EAAOJ,GAyDtb,QAASK,GAAOC,EAAKC,EAAMC,IAY3B,QAASC,GAAaH,EAAKC,EAAMC,IAYjC,QAASE,GAAWJ,EAAKK,EAAMC,IAY/B,QAASC,GAAiBP,EAAKK,EAAMC,IASrC,QAASE,GAAYP,GACnB,MAAOA,GAAKQ,QAAQC,EAAW,QAAQD,QAAQE,EAAW,QAW5D,QAASC,GAAeZ,EAAKK,EAAMC,GAIjC,GAFAA,EAAQO,EAAkBP,GAEb,SAATD,GAA4B,QAATA,EAAgB,CAIrC,GADAC,EAAQA,EAAMQ,OACA,MAAVR,EAAe,MAAO,GAC1B,IAAIA,IAAUS,EAA6BC,KAAKV,GAC9C,MAAO,OAEJ,IAAa,UAATD,EAAkB,CAI3B,GADAY,EAA6BC,UAAY,EACrCD,EAA6BD,KAAKV,GACpC,MAAO,EAIT,IADAa,EAA6BD,UAAY,EACrCC,EAA6BH,KAAKV,GACpC,MAAO,GAMX,MADAA,GAAQc,EAAgBd,GAwB1B,QAASe,GAAaC,GACpB,MAAOA,GAAIb,QAAQc,EAAc,WASnC,QAASC,GAAeF,GACtB,MAAOA,GAAIb,QAAQgB,EAAgB,KASrC,QAASC,GAAoBJ,GAC3B,MAAOA,GAAIb,QAAQkB,EAAqB,SAAyBL,EAAKM,GACpE,MAAoB,MAAZA,EAAK,IAA0B,MAAZA,EAAK,GACtBC,OAAOC,aAAaC,SAASH,EAAKI,OAAO,GAAI,KAC7CH,OAAOC,aAAaC,SAASH,EAAM,OAUjD,QAASK,GAA2BX,GAClC,MAAOA,GAAIb,QAAQyB,EAAyB,KACjCzB,QAAQ0B,EAA2B,KAShD,QAASC,GAA4Bd,GAEnC,IAAK,GADDe,GAAO,GACF9C,EAAI,EAAG+C,EAAMhB,EAAI1B,OAAQL,EAAI+C,EAAK/C,IACzC8C,GAAQf,EAAIiB,WAAWhD,GAAK,GAAK,IAAM+B,EAAIkB,OAAOjD,EAEpD,OAAO8C,GAAKvB,OASd,QAASD,GAAmBS,GAK1B,MAJAA,GAAME,EAAcF,GACpBA,EAAMI,EAAmBJ,GACzBA,EAAMW,EAA0BX,GAChCA,EAAMc,EAA2Bd,GAUnC,QAASF,GAAiBE,GAGxB,MAFAA,GAAMD,EAAYC,GAClBA,EAAMd,EAAWc,GAOnB,QAASmB,KACP,MAAO,GAST,QAASC,GAAcC,EAAMC,GAM3B,QAASC,GAAa7C,GACpB,QAAI8C,GACGH,EAAKI,QAAQ/C,MAAS,EAPV,kBAAX,KACR4C,EAAO,aAGT,IAAIE,IAAkBE,MAAMC,QAAQN,GAMhCO,KACAC,GAAW,CAEf,QACEhD,YAAa,SAAUH,EAAKC,EAAMC,GAChC,GAAI2C,EAAY7C,GAAM,CACpB,GAAIE,EAAQkD,UAAW,CACrB,GAAIC,GAAM,aACNC,EAAMpD,EAAQqD,SAAWF,EAAIzD,MAGjC,OAFAsD,GAAWM,MAAML,GAAYjD,EAAQqD,SAAUD,IAC/CH,GAAW,EACJE,EAKP,MAHKF,KACHA,EAAWjD,EAAQqD,UAEd,YAGT,MAAOX,GAAK5C,EAAKC,EAAMC,IAG3BuD,OAAQ,SAAUxD,GAChB,GAAIyD,GAAU,GACVC,EAAU,CAMd,OALAT,GAAWU,QAAQ,SAAUC,GAC3BH,GAAWzD,EAAK6D,MAAMH,EAASE,EAAI,IACnCF,EAAUE,EAAI,KAEhBH,GAAWzD,EAAK6D,MAAMH,KAhS5B,GAAII,IACFC,MACAC,MACAC,MACAC,MACAC,MACAC,MACAC,MACAC,QACAC,UACAC,KACAlF,KACAmF,MACAC,KACAC,OACAhD,QACAvC,GAAS,SAAU,OAAQ,SAC3BwF,KAAS,MAAO,MAAO,QAAS,QAAS,UACzCC,OACAC,OAAS,QAAS,UAClBC,IAAS,WACTC,IAAS,QAAS,WAClBC,IAAS,QAAS,WAClBC,SACAC,SACAC,MACAC,MACAC,MACAC,MACAC,MACAC,MACAC,QACAC,WACAC,UACAC,UACAC,cACAC,OAAS,WAAY,WAAY,OAAQ,UAAW,OACpDC,OAAS,WAAY,WAAY,OAAQ,UAAW,MAAO,SAAU,UAoGnEvF,EAAY,KACZC,EAAY,KACZY,EAAe,KACfE,EAAiB,UACjBE,EAAsB,wBACtBO,EAA0B,cAC1BC,EAA4B,gBAC5BpB,EAA+B,oBAC/BE,EAA+B,cAC/BE,EAA+B,wFAqJnCzB,GAAQqE,UAAYA,EACpBrE,EAAQK,MAAQA,EAChBL,EAAQS,YAAcA,EACtBT,EAAQU,UAAYA,EACpBV,EAAQa,gBAAkBA,EAC1Bb,EAAQkB,cAAgBA,EACxBlB,EAAQc,WAAaA,EACrBd,EAAQ2B,YAAcA,EACtB3B,EAAQ8B,cAAgBA,EACxB9B,EAAQgC,mBAAqBA,EAC7BhC,EAAQuC,0BAA4BA,EACpCvC,EAAQ0C,2BAA6BA,EACrC1C,EAAQmB,kBAAoBA,EAC5BnB,EAAQ0B,gBAAkBA,EAC1B1B,EAAQ+C,oBAAsBA,EAC9B/C,EAAQgD,aAAeA,OAEjBwD,GAAG,SAAS5G,EAAQQ,EAAOJ,GAmBjC,QAASyG,GAAWlG,EAAMC,GACxB,GAAIkG,GAAM,GAAIC,GAAUnG,EACxB,OAAOkG,GAAIE,QAAQrG,GAdrB,GAAIsG,GAAUjH,EAAQ,aAClBkH,EAASlH,EAAQ,YACjB+G,EAAY/G,EAAQ,QAiBxBI,GAAUI,EAAOJ,QAAUyG,EAC3BzG,EAAQ2G,UAAYA,CACpB,KAAK,GAAI9G,KAAKgH,GAAS7G,EAAQH,GAAKgH,EAAQhH,EAC5C,KAAK,GAAIA,KAAKiH,GAAQ9G,EAAQH,GAAKiH,EAAOjH,EAIpB,oBAAXkH,UAEJzD,MAAMD,UACTC,MAAM0D,UAAU3D,QAAU,SAAU4D,GAClC,IAAI,GAAIpH,GAAE,EAAEA,EAAEqH,KAAKhH,OAAOL,IACxB,GAAGqH,KAAKrH,IAAMoH,EAAM,MAAOpH,EAE7B,QAAO,IAGNyD,MAAMY,UACTZ,MAAM0D,UAAU9C,QAAU,SAAUiD,GAClC,IAAK,GAAItH,GAAI,EAAGA,EAAIqH,KAAKhH,OAAQL,IAAKsH,EAAGD,KAAKrH,GAAIA,EAAGqH,QAGrD/E,OAAOf,OACTe,OAAO6E,UAAU5F,KAAO,WACtB,MAAO8F,MAAKnG,QAAQ,iBAAkB,MAI1CgG,OAAON,UAAYrG,EAAOJ,WAGzBoH,YAAY,EAAEC,WAAW,EAAEC,QAAQ,IAAIC,GAAG,SAAS3H,EAAQQ,EAAOJ,GAcrE,QAASwH,GAAYjH,GACnB,GAAIV,GAAIU,EAAK8C,QAAQ,IACrB,IAAIxD,KAAM,EACR,GAAI4H,GAAUlH,EAAK6D,MAAM,GAAG,OAE5B,IAAIqD,GAAUlH,EAAK6D,MAAM,EAAGvE,EAAI,EAKlC,OAHA4H,GAAUA,EAAQrG,OAAOsG,cACN,MAAfD,EAAQ,KAAYA,EAAUA,EAAQrD,MAAM,IACZ,MAAhCqD,EAAQA,EAAQvH,OAAS,KAAYuH,EAAUA,EAAQrD,MAAM,GAAG,IAC7DqD,EAST,QAAS/D,GAAWnD,GAClB,MAA6B,OAArBA,EAAK6D,MAAM,EAAG,GAYxB,QAASuD,GAAUpH,EAAMF,EAAOS,GAC9B,aAEA,IAAIkD,GAAU,GACVC,EAAU,EACV2D,GAAW,EACXC,GAAa,EACbC,EAAa,EACblF,EAAMrC,EAAKL,OACX6H,EAAc,GACdC,EAAiB,EAGrB,KAAKF,EAAa,EAAGA,EAAalF,EAAKkF,IAAc,CACnD,GAAIG,GAAI1H,EAAKuC,OAAOgF,EACpB,IAAIF,KAAa,GACf,GAAU,MAANK,EAAW,CACbL,EAAWE,CACX,eAGF,IAAID,KAAe,EAAO,CACxB,GAAU,MAANI,EAAW,CACbjE,GAAWlD,EAAWP,EAAK6D,MAAMH,EAAS6D,IAC1CF,EAAWE,EACX7D,EAAU6D,CACV,UAEF,GAAU,MAANG,EAAW,CACbjE,GAAWlD,EAAWP,EAAK6D,MAAMH,EAAS2D,IAC1CG,EAAcxH,EAAK6D,MAAMwD,EAAUE,EAAa,GAChDE,EAAiBR,EAAWO,GAC5B/D,GAAW3D,EAAMuH,EACA5D,EAAQ9D,OACR8H,EACAD,EACArE,EAAUqE,IAC3B9D,EAAU6D,EAAa,EACvBF,GAAW,CACX,UAEF,GAAU,MAANK,GAAmB,MAANA,EAAW,CAC1BJ,EAAaI,CACb,eAGF,IAAIA,IAAMJ,EAAY,CACpBA,GAAa,CACb,WASR,MAJI5D,GAAU1D,EAAKL,SACjB8D,GAAWlD,EAAWP,EAAK+B,OAAO2B,KAG7BD,EAcT,QAASkE,GAAW3H,EAAM4H,GACxB,aAOA,SAASC,GAASzH,EAAMC,GACtBD,EAAQA,EAAKS,OACbT,EAAOA,EAAKI,QAAQsH,EAAkB,IAAIX,cACtC/G,EAAKT,OAAS,GAClBoI,EAASxE,KAAKqE,EAAOxH,EAAMC,GAAS,KAItC,IAAK,GAbDqD,GAAU,EACVqE,KACAC,GAAU,EACV3F,EAAMrC,EAAKL,OAUNL,EAAI,EAAGA,EAAI+C,EAAK/C,IAAK,CAC5B,GAAuB2I,GAAnBP,EAAI1H,EAAKuC,OAAOjD,EACpB,IAAI0I,KAAY,GAAe,MAANN,EAKzB,GAAIM,KAAY,GACV1I,IAAMoE,GAAkB,MAANgE,GAAmB,MAANA,EAc3B,MAANA,IACFO,EAAIjI,EAAK6D,MAAMH,EAASpE,GAAGuB,OACvBmH,KAAY,EACdH,EAAQI,GAERJ,EAAQG,EAASC,GAEnBD,GAAU,EACVtE,EAAUpE,EAAI,OAvBhB,CAEI,GAAI4I,GAAIlI,EAAK8C,QAAQ4E,EAAGpI,EAAI,EAC5B,IAAI4I,KAAM,EACR,KAEAD,GAAIjI,EAAK6D,MAAMH,EAAU,EAAGwE,GAAGrH,OAC/BgH,EAAQG,EAASC,GACjBD,GAAU,EACV1I,EAAI4I,EACJxE,EAAUpE,EAAI,MAdlB0I,GAAUhI,EAAK6D,MAAMH,EAASpE,GAC9BoE,EAAUpE,EAAI,EAuClB,MARIoE,GAAU1D,EAAKL,SACbqI,KAAY,EACdH,EAAQ7H,EAAK6D,MAAMH,IAEnBmE,EAAQG,EAAShI,EAAK6D,MAAMH,KAIzBqE,EAASI,KAAK,KAAKtH,OArE5B,GAAIiH,GAAmB,uBAwEvBrI,GAAQ2H,SAAWA,EACnB3H,EAAQkI,UAAYA,OAEdS,GAAG,SAAS/I,EAAQQ,EAAOJ,GAmBjC,QAAS4I,GAAQC,GACf,MAAgBC,UAARD,GAA6B,OAARA,EAW/B,QAASE,GAAUxI,GACjB,GAAIV,GAAIU,EAAK8C,QAAQ,IACrB,IAAIxD,KAAM,EACR,OACEU,KAAS,GACTyI,QAAoC,MAA1BzI,EAAKA,EAAKL,OAAS,GAGjCK,GAAOA,EAAK6D,MAAMvE,EAAI,GAAG,GAAIuB,MAC7B,IAAIsC,GAAuC,MAA1BnD,EAAKA,EAAKL,OAAS,EAEpC,OADIwD,KAAWnD,EAAOA,EAAK6D,MAAM,GAAG,GAAIhD,SAEtCb,KAASA,EACTyI,QAAStF,GAWb,QAASiD,GAAWnG,GAClBA,EAAUA,MAENA,EAAQyI,iBACNzI,EAAQC,aACVyI,QAAQC,MAAM,2FAEhB3I,EAAQC,YAAcoG,EAAQ9D,qBAGhCvC,EAAQ6D,UAAY7D,EAAQ6D,WAAawC,EAAQxC,UACjD7D,EAAQH,MAAQG,EAAQH,OAASwG,EAAQxG,MACzCG,EAAQE,UAAYF,EAAQE,WAAamG,EAAQnG,UACjDF,EAAQC,YAAcD,EAAQC,aAAeoG,EAAQpG,YACrDD,EAAQK,gBAAkBL,EAAQK,iBAAmBgG,EAAQhG,gBAC7DL,EAAQU,cAAgBV,EAAQU,eAAiB2F,EAAQ3F,cACzDV,EAAQM,WAAaN,EAAQM,YAAc+F,EAAQ/F,WACnDoG,KAAK1G,QAAUA,EAjEjB,GAAIqG,GAAUjH,EAAQ,aAClBkH,EAASlH,EAAQ,YACjB+H,EAAWb,EAAOa,SAClBO,EAAYpB,EAAOoB,SAuEvBvB,GAAUK,UAAUJ,QAAU,SAAUrG,GACtC,GAAI6I,GAAKlC,KACL1G,EAAU4I,EAAG5I,QACb6D,EAAY7D,EAAQ6D,UACpBhE,EAAQG,EAAQH,MAChBI,EAAcD,EAAQC,YACtBC,EAAYF,EAAQE,UACpBG,EAAkBL,EAAQK,gBAC1BK,EAAgBV,EAAQU,cACxBJ,EAAaN,EAAQM,UAGzB,IAAIN,EAAQ6I,mBAAoB,CAC9B,GAAIA,GAAqBxC,EAAQ7D,aAAaxC,EAAQ6I,mBAAoB5I,EAC1EA,GAAc4I,EAAmB5I,gBAEjC4I,IAAqB,CAGvB,IAAIC,GAAU3B,EAASpH,EAAM,SAAUgJ,EAAgB1F,EAAUvD,EAAKC,EAAMmD,GAC1E,GAAI8F,IACFD,eAAgBA,EAChB1F,SAAgBA,EAChBH,UAAgBA,EAChB+F,QAAiBnJ,IAAO+D,IAItBV,EAAMtD,EAAMC,EAAKC,EAAMiJ,EAC3B,KAAKZ,EAAOjF,GAAM,MAAOA,EAGzB,IAAI6F,EAAKC,QAAS,CAGhB,GAAID,EAAK9F,UACP,MAAO,KAAOpD,EAAM,GAGtB,IAAIoJ,GAAQX,EAASxI,GACjBoJ,EAAgBtF,EAAU/D,GAC1BsJ,EAAY1B,EAAUwB,EAAMnJ,KAAM,SAAUI,EAAMC,GAGpD,GAAIiJ,GAAeF,EAActG,QAAQ1C,MAAU,EAC/CgD,EAAMjD,EAAUJ,EAAKK,EAAMC,EAAOiJ,EACtC,KAAKjB,EAAOjF,GAAM,MAAOA,EAGzB,IAAIkG,EAGF,MADAjJ,GAAQM,EAAcZ,EAAKK,EAAMC,GAC7BA,EACKD,EAAO,KAAOC,EAAQ,IAEtBD,CAIT,IAAIgD,GAAM9C,EAAgBP,EAAKK,EAAMC,EAAOiJ,EAC5C,OAAKjB,GAAOjF,GAAZ,OAAyBA,IAMzBpD,EAAO,IAAMD,CAIjB,OAHIsJ,KAAWrJ,GAAQ,IAAMqJ,GACzBF,EAAMV,UAASzI,GAAQ,MAC3BA,GAAQ,IAKR,GAAIoD,GAAMlD,EAAYH,EAAKC,EAAMiJ,EACjC,OAAKZ,GAAOjF,GACL7C,EAAWP,GADOoD,GAI1B7C,EAOH,OAJIuI,KACFC,EAAUD,EAAmBtF,OAAOuF,IAG/BA,GAITlJ,EAAOJ,QAAU2G,IACdS,YAAY,EAAEC,WAAW,SAAS","file":"xss.min.js"}