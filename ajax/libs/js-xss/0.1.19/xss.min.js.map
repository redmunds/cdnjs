{"version":3,"sources":["xss.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","onTag","tag","html","options","onIgnoreTag","onTagAttr","name","value","onIgnoreTagAttr","escapeHtml","replace","REGEXP_LT","REGEXP_GT","safeAttrValue","friendlyAttrValue","trim","substr","REGEXP_DEFAULT_ON_TAG_ATTR_4","lastIndex","test","REGEXP_DEFAULT_ON_TAG_ATTR_3","REGEXP_DEFAULT_ON_TAG_ATTR_7","REGEXP_DEFAULT_ON_TAG_ATTR_8","escapeAttrValue","escapeQuote","str","REGEXP_QUOTE","unescapeQuote","REGEXP_QUOTE_2","escapeHtmlEntities","REGEXP_ATTR_VALUE_1","String","fromCharCode","parseInt","escapeDangerHtml5Entities","REGEXP_ATTR_VALUE_COLON","REGEXP_ATTR_VALUE_NEWLINE","clearNonPrintableCharacter","str2","len","charCodeAt","charAt","onIgnoreTagStripAll","StripTagBody","tags","next","isRemoveTag","isRemoveAllTag","indexOf","Array","isArray","removeList","posStart","isClosing","ret","end","position","push","remove","rethtml","lastPos","forEach","pos","slice","stripCommentTag","STRIP_COMMENT_TAG_REGEXP","stripBlankChar","whiteList","abbr","address","area","article","aside","audio","b","bdi","bdo","big","blockquote","br","caption","center","cite","col","colgroup","dd","del","details","div","dl","dt","em","font","footer","h1","h2","h3","h4","h5","h6","header","hr","img","ins","li","mark","nav","ol","p","pre","section","small","span","sub","sup","strong","table","tbody","td","tfoot","th","thead","tr","tt","ul","video","2","filterXSS","xss","FilterXSS","process","DEFAULT","parser","prototype","item","this","fn","scope","define","amd","window","./default","./parser","./xss","3","getTagName","tagName","toLowerCase","parseTag","tagStart","quoteStart","currentPos","currentHtml","currentTagName","c","parseAttr","onAttr","addAttr","REGEXP_ATTR_NAME","retAttrs","tmpName","v","j","join","4","isNull","obj","undefined","getAttrs","closing","stripIgnoreTag","console","error","toString","me","allowCommentTag","stripIgnoreTagBody","retHtml","sourcePosition","info","isWhite","attrs","whiteAttrList","attrsHtml","isWhiteAttr"],"mappings":"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","file":"xss.min.js"}