{"version":3,"sources":["xss.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length","1","module","onTag","tag","html","options","onIgnoreTag","onTagAttr","name","value","onIgnoreTagAttr","escapeHtml","replace","REGEXP_LT","REGEXP_GT","safeAttrValue","friendlyAttrValue","trim","REGEXP_DEFAULT_ON_TAG_ATTR_1","test","REGEXP_DEFAULT_ON_TAG_ATTR_4","lastIndex","REGEXP_DEFAULT_ON_TAG_ATTR_3","REGEXP_DEFAULT_ON_TAG_ATTR_7","REGEXP_DEFAULT_ON_TAG_ATTR_8","escapeAttrValue","escapeQuote","str","REGEXP_QUOTE","unescapeQuote","REGEXP_QUOTE_2","escapeHtmlEntities","REGEXP_ATTR_VALUE_1","code","String","fromCharCode","parseInt","substr","escapeDangerHtml5Entities","REGEXP_ATTR_VALUE_COLON","REGEXP_ATTR_VALUE_NEWLINE","clearNonPrintableCharacter","str2","len","charCodeAt","charAt","onIgnoreTagStripAll","StripTagBody","tags","next","isRemoveTag","isRemoveAllTag","indexOf","Array","isArray","removeList","posStart","isClosing","ret","end","position","push","remove","rethtml","lastPos","forEach","pos","slice","whiteList","h1","h2","h3","h4","h5","h6","hr","span","strong","b","br","p","pre","img","div","table","tr","td","th","tbody","thead","ul","li","ol","dl","dt","em","cite","section","header","footer","blockquote","audio","video","2","filterXSS","xss","FilterXSS","process","DEFAULT","parser","window","prototype","item","this","fn","./default","./parser","./xss","3","getTagName","tagName","toLowerCase","parseTag","tagStart","quoteStart","currentPos","currentHtml","currentTagName","c","parseAttr","onAttr","addAttr","REGEXP_ATTR_NAME","retAttrs","tmpName","v","j","join","4","isNull","obj","undefined","getAttrs","closing","stripIgnoreTag","console","error","me","stripIgnoreTagBody","retHtml","sourcePosition","info","isWhite","attrs","whiteAttrList","attrsHtml","isWhiteAttr"],"mappings":"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","file":"xss.min.js"}