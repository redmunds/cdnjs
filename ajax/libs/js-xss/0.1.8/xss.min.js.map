{"version":3,"sources":["xss.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length","1","module","onTag","tag","html","options","onIgnoreTag","onTagAttr","name","value","onIgnoreTagAttr","escapeHtml","replace","REGEXP_LT","REGEXP_GT","safeAttrValue","friendlyAttrValue","trim","REGEXP_DEFAULT_ON_TAG_ATTR_1","test","REGEXP_DEFAULT_ON_TAG_ATTR_4","lastIndex","REGEXP_DEFAULT_ON_TAG_ATTR_3","REGEXP_DEFAULT_ON_TAG_ATTR_7","REGEXP_DEFAULT_ON_TAG_ATTR_8","escapeAttrValue","escapeQuote","str","REGEXP_QUOTE","unescapeQuote","REGEXP_QUOTE_2","escapeHtmlEntities","REGEXP_ATTR_VALUE_1","code","String","fromCharCode","parseInt","substr","escapeDangerHtml5Entities","REGEXP_ATTR_VALUE_COLON","REGEXP_ATTR_VALUE_NEWLINE","clearNonPrintableCharacter","str2","len","charCodeAt","charAt","onIgnoreTagStripAll","StripTagBody","tags","next","isRemoveTag","isRemoveAllTag","indexOf","Array","isArray","removeList","posStart","isClosing","ret","end","position","push","remove","rethtml","lastPos","forEach","pos","slice","stripCommentTag","STRIP_COMMENT_TAG_REGEXP","whiteList","abbr","address","area","article","aside","audio","b","bdi","bdo","big","blockquote","br","caption","center","cite","col","colgroup","dd","del","details","div","dl","dt","em","font","footer","h1","h2","h3","h4","h5","h6","header","hr","img","ins","li","mark","nav","ol","p","pre","section","small","span","strong","table","tbody","td","tfoot","th","thead","tr","tt","ul","video","2","filterXSS","xss","FilterXSS","process","DEFAULT","parser","window","prototype","item","this","fn","./default","./parser","./xss","3","getTagName","tagName","toLowerCase","parseTag","tagStart","quoteStart","currentPos","currentHtml","currentTagName","c","parseAttr","onAttr","addAttr","REGEXP_ATTR_NAME","retAttrs","tmpName","v","j","join","4","isNull","obj","undefined","getAttrs","closing","stripIgnoreTag","console","error","me","allowCommentTag","stripIgnoreTagBody","retHtml","sourcePosition","info","isWhite","attrs","whiteAttrList","attrsHtml","isWhiteAttr"],"mappings":"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","file":"xss.min.js"}