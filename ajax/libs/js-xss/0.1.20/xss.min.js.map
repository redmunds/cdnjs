{"version":3,"sources":["xss.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","onTag","tag","html","options","onIgnoreTag","onTagAttr","name","value","onIgnoreTagAttr","escapeHtml","replace","REGEXP_LT","REGEXP_GT","safeAttrValue","friendlyAttrValue","trim","substr","REGEXP_DEFAULT_ON_TAG_ATTR_4","lastIndex","test","REGEXP_DEFAULT_ON_TAG_ATTR_3","REGEXP_DEFAULT_ON_TAG_ATTR_7","REGEXP_DEFAULT_ON_TAG_ATTR_8","escapeAttrValue","escapeQuote","str","REGEXP_QUOTE","unescapeQuote","REGEXP_QUOTE_2","escapeHtmlEntities","REGEXP_ATTR_VALUE_1","String","fromCharCode","parseInt","escapeDangerHtml5Entities","REGEXP_ATTR_VALUE_COLON","REGEXP_ATTR_VALUE_NEWLINE","clearNonPrintableCharacter","str2","len","charCodeAt","charAt","onIgnoreTagStripAll","StripTagBody","tags","next","isRemoveTag","isRemoveAllTag","indexOf","Array","isArray","removeList","posStart","isClosing","ret","end","position","push","remove","rethtml","lastPos","forEach","pos","slice","stripCommentTag","STRIP_COMMENT_TAG_REGEXP","stripBlankChar","chars","split","filter","char","c","join","whiteList","abbr","address","area","article","aside","audio","b","bdi","bdo","big","blockquote","br","caption","center","cite","col","colgroup","dd","del","details","div","dl","dt","em","font","footer","h1","h2","h3","h4","h5","h6","header","hr","img","ins","li","mark","nav","ol","p","pre","section","small","span","sub","sup","strong","table","tbody","td","tfoot","th","thead","tr","tt","ul","video","2","filterXSS","xss","FilterXSS","process","DEFAULT","parser","prototype","item","this","fn","scope","define","amd","window","./default","./parser","./xss","3","getTagName","tagName","toLowerCase","parseTag","tagStart","quoteStart","currentPos","currentHtml","currentTagName","parseAttr","onAttr","addAttr","REGEXP_ATTR_NAME","retAttrs","tmpName","v","j","4","isNull","obj","undefined","getAttrs","closing","stripIgnoreTag","console","error","toString","me","allowCommentTag","stripIgnoreTagBody","retHtml","sourcePosition","info","isWhite","attrs","whiteAttrList","attrsHtml","isWhiteAttr"],"mappings":"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","file":"xss.min.js"}