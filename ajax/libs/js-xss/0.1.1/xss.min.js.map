{"version":3,"sources":["xss.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length","1","module","onTag","tag","html","options","onIgnoreTag","onTagAttr","name","value","onIgnoreTagAttr","escapeHtml","replace","REGEXP_LT","REGEXP_GT","safeAttrValue","friendlyAttrValue","REGEXP_DEFAULT_ON_TAG_ATTR_1","lastIndex","test","REGEXP_DEFAULT_ON_TAG_ATTR_2","REGEXP_DEFAULT_ON_TAG_ATTR_5","REGEXP_DEFAULT_ON_TAG_ATTR_6","REGEXP_DEFAULT_ON_TAG_ATTR_3","REGEXP_DEFAULT_ON_TAG_ATTR_4","escapeAttrValue","escapeQuote","str","REGEXP_QUOTE","unescapeQuote","REGEXP_QUOTE_2","escapeHtmlEntities","REGEXP_ATTR_VALUE_1","code","String","fromCharCode","parseInt","substr","escapeDangerHtml5Entities","REGEXP_ATTR_VALUE_COLON","REGEXP_ATTR_VALUE_NEWLINE","clearNonPrintableCharacter","str2","len","charCodeAt","charAt","trim","onIgnoreTagStripAll","StripTagBody","tags","next","isRemoveTag","isRemoveAllTag","indexOf","Array","isArray","removeList","posStart","isClosing","ret","end","position","push","remove","rethtml","lastPos","forEach","pos","slice","whiteList","h1","h2","h3","h4","h5","h6","hr","span","strong","b","br","p","pre","img","div","table","tr","td","th","tbody","thead","ul","li","ol","dl","dt","em","cite","section","header","footer","blockquote","audio","video","2","filterXSS","xss","FilterXSS","process","DEFAULT","parser","window","prototype","item","this","fn","./default","./parser","./xss","3","getTagName","tagName","toLowerCase","parseTag","tagStart","quoteStart","currentPos","currentHtml","currentTagName","c","parseAttr","onAttr","addAttr","REGEXP_ATTR_NAME","retAttrs","tmpName","v","j","join","4","isNull","obj","undefined","getAttrs","closing","stripIgnoreTag","console","error","me","stripIgnoreTagBody","retHtml","sourcePosition","info","isWhite","attrs","whiteAttrList","attrsHtml","isWhiteAttr"],"mappings":"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","file":"xss.min.js"}