{"version":3,"sources":["xss.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","onTag","tag","html","options","onIgnoreTag","onTagAttr","name","value","onIgnoreTagAttr","escapeHtml","replace","REGEXP_LT","REGEXP_GT","safeAttrValue","friendlyAttrValue","trim","REGEXP_DEFAULT_ON_TAG_ATTR_1","test","REGEXP_DEFAULT_ON_TAG_ATTR_4","lastIndex","REGEXP_DEFAULT_ON_TAG_ATTR_3","REGEXP_DEFAULT_ON_TAG_ATTR_7","REGEXP_DEFAULT_ON_TAG_ATTR_8","escapeAttrValue","escapeQuote","str","REGEXP_QUOTE","unescapeQuote","REGEXP_QUOTE_2","escapeHtmlEntities","REGEXP_ATTR_VALUE_1","String","fromCharCode","parseInt","substr","escapeDangerHtml5Entities","REGEXP_ATTR_VALUE_COLON","REGEXP_ATTR_VALUE_NEWLINE","clearNonPrintableCharacter","str2","len","charCodeAt","charAt","onIgnoreTagStripAll","StripTagBody","tags","next","isRemoveTag","isRemoveAllTag","indexOf","Array","isArray","removeList","posStart","isClosing","ret","end","position","push","remove","rethtml","lastPos","forEach","pos","slice","stripCommentTag","STRIP_COMMENT_TAG_REGEXP","whiteList","abbr","address","area","article","aside","audio","b","bdi","bdo","big","blockquote","br","caption","center","cite","col","colgroup","dd","del","details","div","dl","dt","em","font","footer","h1","h2","h3","h4","h5","h6","header","hr","img","ins","li","mark","nav","ol","p","pre","section","small","span","sub","sup","strong","table","tbody","td","tfoot","th","thead","tr","tt","ul","video","2","filterXSS","xss","FilterXSS","process","DEFAULT","parser","window","prototype","item","this","fn","scope","./default","./parser","./xss","3","getTagName","tagName","toLowerCase","parseTag","tagStart","quoteStart","currentPos","currentHtml","currentTagName","c","parseAttr","onAttr","addAttr","REGEXP_ATTR_NAME","retAttrs","tmpName","v","j","join","4","isNull","obj","undefined","getAttrs","closing","stripIgnoreTag","console","error","me","allowCommentTag","stripIgnoreTagBody","retHtml","sourcePosition","info","isWhite","attrs","whiteAttrList","attrsHtml","isWhiteAttr"],"mappings":"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","file":"xss.min.js"}