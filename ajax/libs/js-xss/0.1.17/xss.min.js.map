{"version":3,"sources":["xss.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","onTag","tag","html","options","onIgnoreTag","onTagAttr","name","value","onIgnoreTagAttr","escapeHtml","replace","REGEXP_LT","REGEXP_GT","safeAttrValue","friendlyAttrValue","trim","substr","REGEXP_DEFAULT_ON_TAG_ATTR_4","lastIndex","test","REGEXP_DEFAULT_ON_TAG_ATTR_3","REGEXP_DEFAULT_ON_TAG_ATTR_7","REGEXP_DEFAULT_ON_TAG_ATTR_8","escapeAttrValue","escapeQuote","str","REGEXP_QUOTE","unescapeQuote","REGEXP_QUOTE_2","escapeHtmlEntities","REGEXP_ATTR_VALUE_1","String","fromCharCode","parseInt","escapeDangerHtml5Entities","REGEXP_ATTR_VALUE_COLON","REGEXP_ATTR_VALUE_NEWLINE","clearNonPrintableCharacter","str2","len","charCodeAt","charAt","onIgnoreTagStripAll","StripTagBody","tags","next","isRemoveTag","isRemoveAllTag","indexOf","Array","isArray","removeList","posStart","isClosing","ret","end","position","push","remove","rethtml","lastPos","forEach","pos","slice","stripCommentTag","STRIP_COMMENT_TAG_REGEXP","whiteList","abbr","address","area","article","aside","audio","b","bdi","bdo","big","blockquote","br","caption","center","cite","col","colgroup","dd","del","details","div","dl","dt","em","font","footer","h1","h2","h3","h4","h5","h6","header","hr","img","ins","li","mark","nav","ol","p","pre","section","small","span","sub","sup","strong","table","tbody","td","tfoot","th","thead","tr","tt","ul","video","2","filterXSS","xss","FilterXSS","process","DEFAULT","parser","prototype","item","this","fn","scope","define","amd","window","./default","./parser","./xss","3","getTagName","tagName","toLowerCase","parseTag","tagStart","quoteStart","currentPos","currentHtml","currentTagName","c","parseAttr","onAttr","addAttr","REGEXP_ATTR_NAME","retAttrs","tmpName","v","j","join","4","isNull","obj","undefined","getAttrs","closing","stripIgnoreTag","console","error","toString","me","allowCommentTag","stripIgnoreTagBody","retHtml","sourcePosition","info","isWhite","attrs","whiteAttrList","attrsHtml","isWhiteAttr"],"mappings":"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","file":"xss.min.js"}