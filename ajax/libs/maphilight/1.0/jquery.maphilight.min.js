!function(t){var e=document.namespaces,o=document.createElement("canvas"),o=o&&o.getContext;if(!o&&!e)return void(t.fn.maphilight=function(){});var a,r,s;if(o){var l=function(t,e,i){100>=e&&(t.style.opacity=e/100,window.setTimeout(l,10,t,e+10,10))},n=function(t){return Math.max(0,Math.min(parseInt(t,16),255))},h=function(t,e){return"rgba("+n(t.substr(0,2))+","+n(t.substr(2,2))+","+n(t.substr(4,2))+","+e+")"};a=function(e){var i=t('<canvas style="width:'+e.width+"px;height:"+e.height+'px;"></canvas>').get(0);return i.getContext("2d").clearRect(0,0,i.width,i.height),i},r=function(t,e,o,a){var r=t.getContext("2d");if(r.beginPath(),"rect"==e)r.rect(o[0],o[1],o[2]-o[0],o[3]-o[1]);else if("poly"==e)for(r.moveTo(o[0],o[1]),i=2;i<o.length;i+=2)r.lineTo(o[i],o[i+1]);else"circ"==e&&r.arc(o[0],o[1],o[2],0,2*Math.PI,!1);r.closePath(),a.fill&&(r.fillStyle=h(a.fillColor,a.fillOpacity),r.fill()),a.stroke&&(r.strokeStyle=h(a.strokeColor,a.strokeOpacity),r.lineWidth=a.strokeWidth,r.stroke()),a.fade&&l(t,0)};var s=function(t,e){t.getContext("2d").clearRect(0,0,t.width,t.height)}}else{var d=document.createStyleSheet();d.addRule("v\\:*","behavior: url(#default#VML); antialias: true;"),document.namespaces.add("v","urn:schemas-microsoft-com:vml"),a=function(e){return t('<var style="zoom:1;overflow:hidden;display:block;width:'+e.width+"px;height:"+e.height+'px;"></var>').get(0)},r=function(t,e,i,o){var a='<v:fill color="#'+o.fillColor+'" opacity="'+(o.fill?o.fillOpacity:0)+'" />',r=o.stroke?'strokeweight="'+o.strokeWidth+'" stroked="t" strokecolor="#'+o.strokeColor+'"':'stroked="f"',s='<v:stroke opacity="'+o.strokeOpacity+'"/>';if("rect"==e)t.innerHTML='<v:rect filled="t" '+r+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+i[0]+"px;top:"+i[1]+"px;width:"+(i[2]-i[0])+"px;height:"+(i[3]-i[1])+'px;">'+a+s+"</v:rect>";else if("poly"==e){var l=i.join(",");t.innerHTML='<v:shape filled="t" '+r+' coordorigin="0,0" coordsize="'+t.width+","+t.height+'" path="m '+i[0]+","+i[1]+" l "+l+' x e" style="zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:'+t.width+"px;height:"+t.height+'px;">'+a+s+"</v:shape>"}else"circ"==e&&(t.innerHTML='<v:oval filled="t" '+r+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+(i[0]-i[2])+"px;top:"+(i[1]-i[2])+"px;width:"+2*i[2]+"px;height:"+2*i[2]+'px;">'+a+s+"</v:oval>")},s=function(t){t.innerHTML=""}}var c=function(t){var e=t.getAttribute("coords").split(",");for(i=0;i<e.length;i++)e[i]=parseFloat(e[i]);return[t.getAttribute("shape").toLowerCase().substr(0,4),e]},p={position:"absolute",left:0,top:0,padding:0};t.fn.maphilight=function(e){return e=t.extend({},t.fn.maphilight.defaults,e),this.each(function(){var i=t(this),o=t.metadata?t.extend({},e,i.metadata()):e,l=t('map[name="'+i.attr("usemap").substr(1)+'"]');if(i.is("img")&&i.attr("usemap")&&l.size()>0&&!i.hasClass("maphilighted")){i.wrap(t('<div style="background:url('+this.src+");position: relative; padding: 0; width: "+this.width+"px; height: "+this.height+'px"></div>')),i.css("opacity",0).css("border",0);var n=a(this);t(n).css(p),n.height=this.height,n.width=this.width,t.browser.msie&&(i.css("filter","Alpha(opacity=0)"),t(n).css("z-index","-1")),t(l).find("area[coords]").mouseover(function(e){var i=c(this);r(n,i[0],i[1],t.metadata?t.extend({},o,t(this).metadata()):o)}).mouseout(function(t){s(n)}),i.before(n),i.addClass("maphilighted")}})},t.fn.maphilight.defaults={fill:!0,fillColor:"000000",fillOpacity:.2,stroke:!0,strokeColor:"ff0000",strokeOpacity:1,strokeWidth:1,fade:!0}}(jQuery);