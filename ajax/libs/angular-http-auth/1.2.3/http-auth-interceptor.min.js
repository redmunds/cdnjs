!function(){"use strict";angular.module("http-auth-interceptor",["http-auth-interceptor-buffer"]).factory("authService",["$rootScope","httpBuffer",function(e,t){return{loginConfirmed:function(r,n){var o=n||function(e){return e};e.$broadcast("event:auth-loginConfirmed",r),t.retryAll(o)},loginCancelled:function(r,n){t.rejectAll(n),e.$broadcast("event:auth-loginCancelled",r)}}}]).config(["$httpProvider",function(e){e.interceptors.push(["$rootScope","$q","httpBuffer",function(e,t,r){return{responseError:function(n){var o=n.config||{};if(!o.ignoreAuthModule)switch(n.status){case 401:var u=t.defer();return r.append(o,u),e.$broadcast("event:auth-loginRequired",n),u.promise;case 403:e.$broadcast("event:auth-forbidden",n)}return t.reject(n)}}}])}]),angular.module("http-auth-interceptor-buffer",[]).factory("httpBuffer",["$injector",function(e){function t(t,n){function o(e){n.resolve(e)}function u(e){n.reject(e)}r=r||e.get("$http"),r(t).then(o,u)}var r,n=[];return{append:function(e,t){n.push({config:e,deferred:t})},rejectAll:function(e){if(e)for(var t=0;t<n.length;++t)n[t].deferred.reject(e);n=[]},retryAll:function(e){for(var r=0;r<n.length;++r)t(e(n[r].config),n[r].deferred);n=[]}}}])}();