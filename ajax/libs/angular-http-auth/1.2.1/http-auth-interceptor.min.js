!function(){"use strict";angular.module("http-auth-interceptor",["http-auth-interceptor-buffer"]).factory("authService",["$rootScope","httpBuffer",function(t,e){return{loginConfirmed:function(r,n){var o=n||function(t){return t};t.$broadcast("event:auth-loginConfirmed",r),e.retryAll(o)},loginCancelled:function(r,n){e.rejectAll(n),t.$broadcast("event:auth-loginCancelled",r)}}}]).config(["$httpProvider",function(t){t.interceptors.push(["$rootScope","$q","httpBuffer",function(t,e,r){return{responseError:function(n){if(401===n.status&&!n.config.ignoreAuthModule){var o=e.defer();return r.append(n.config,o),t.$broadcast("event:auth-loginRequired",n),o.promise}return e.reject(n)}}}])}]),angular.module("http-auth-interceptor-buffer",[]).factory("httpBuffer",["$injector",function(t){function e(e,n){function o(t){n.resolve(t)}function u(t){n.reject(t)}r=r||t.get("$http"),r(e).then(o,u)}var r,n=[];return{append:function(t,e){n.push({config:t,deferred:e})},rejectAll:function(t){if(t)for(var e=0;e<n.length;++e)n[e].deferred.reject(t);n=[]},retryAll:function(t){for(var r=0;r<n.length;++r)e(t(n[r].config),n[r].deferred);n=[]}}}])}();