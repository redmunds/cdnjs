!function(){"use strict";angular.module("http-auth-interceptor",["http-auth-interceptor-buffer"]).factory("authService",["$rootScope","httpBuffer",function(e,t){return{loginConfirmed:function(r,n){var o=n||function(e){return e};e.$broadcast("event:auth-loginConfirmed",r),t.retryAll(o)},loginCancelled:function(r,n){t.rejectAll(n),e.$broadcast("event:auth-loginCancelled",r)}}}]).config(["$httpProvider",function(e){e.interceptors.push(["$rootScope","$q","httpBuffer",function(e,t,r){return{responseError:function(n){if(!n.config.ignoreAuthModule)switch(n.status){case 401:var o=t.defer();return r.append(n.config,o),e.$broadcast("event:auth-loginRequired",n),o.promise;case 403:e.$broadcast("event:auth-forbidden",n)}return t.reject(n)}}}])}]),angular.module("http-auth-interceptor-buffer",[]).factory("httpBuffer",["$injector",function(e){function t(t,n){function o(e){n.resolve(e)}function c(e){n.reject(e)}r=r||e.get("$http"),r(t).then(o,c)}var r,n=[];return{append:function(e,t){n.push({config:e,deferred:t})},rejectAll:function(e){if(e)for(var t=0;t<n.length;++t)n[t].deferred.reject(e);n=[]},retryAll:function(e){for(var r=0;r<n.length;++r)t(e(n[r].config),n[r].deferred);n=[]}}}])}();