!function(t,e,n,a){"use strict";var i=t.find("html"),s=function(t,e){return"en-US"===i.get("lang")?t:e},o=function(t){return t.toISOString().split("T")[0]};t.extend("input[type=date]",!("orientation"in window),{constructor:function(){var n,a=t.create("div.{0}>a[unselectable=on]*2+span.{0}-header+table.{0}-days>thead>tr>th[unselectable=on]*7+tbody>tr*6>td*7",[e+"-calendar"]),i=t.create("span.{0}-value",[e]),s=this.style("color"),o=this.offset();this.set({type:"text",value:Date.now()}).style("color",document.addEventListener?"transparent":this.style("background-color")).on("keydown",this.onCalendarKeyDown.bind(this,a),["which","shiftKey"]).on(["focus","click"],this.onCalendarFocus.bind(this,a)).on("blur",this.onCalendarBlur.bind(this,a)).before(a,i),n=a.offset(),a.on("mousedown",this.onCalendarClick.bind(this,a)).style({"margin-left":o.left-n.left+(o.width-n.width)/2,"margin-top":o.bottom-n.top,"z-index":1+(0|this.style("z-index"))}).hide(),t.find("html").get("clientHeight")<o.bottom+n.height&&a.style("margin-top",n.top-o.bottom-n.height),i.on("click",this.onCalendarFocus.bind(this,a)).style(this.style(["width","font","padding-left","padding-right","text-align","border-width","box-sizing"])).style({color:s,"line-height":o.height+"px","margin-left":o.left-n.left,"margin-top":o.top-n.top}),this.parent("form").on("reset",this.onFormReset.bind(this)),this.watch("value",this.onValueChanged.bind(this,i,a.find("."+e+"-calendar-header"),a.findAll("th"),a.findAll("td"))),this.set(this.get("defaultValue")),this.matches(":focus")&&this.fire("focus")},onValueChanged:function(i,o,r,l,h){var d,c,u,g;i.set(""),h=new Date(Date.parse(h)),h.getTime()?i.append(t.create("span").i18n(n[h.getDay()?h.getDay()-1:6])).append(",&nbsp;"+((h.getDate()>9?"":"0")+h.getDate())+"&nbsp;").append(t.create("span").i18n(a[h.getMonth()].substr(0,3))).append("&nbsp;"+h.getFullYear()):h=new Date,c=h.getMonth(),u=h.getDate(),d=h.getFullYear(),o.set("&nbsp;"+d).prepend(t.create("span").i18n(a[c])),r.each(function(t,e){t.i18n(n[s(e?e-1:6,e)])}),g=new Date(d,c,0,12),g.setDate(g.getDate()-g.getDay()-s(1,0)),l.set("class",function(t){g.setDate(g.getDate()+1);var n=c-g.getMonth(),a=u-g.getDate();return d!==g.getFullYear()&&(n*=-1),t.set("-ts",g.getTime()).set(g.getDate()),n?n>0?e+"-calendar-past":e+"-calendar-future":a?"":e+"-calendar-today"}),this.fire("change")},onCalendarClick:function(t,e){var n;return"a"==e?(n=new Date(this.get()),n.getTime()||(n=new Date),n.setMonth(n.getMonth()+(e.next("a").length?-1:1))):"td"==e&&(n=new Date(e.get("-ts")),t.hide()),null!=n&&this.set(o(n)),!1},onCalendarKeyDown:function(t,e,n){var a,i;return!(!t.matches(":hidden")||13!==e)||(32===e?t.toggle():27===e||9===e||13===e?t.hide():8===e||46===e?this.set(""):(i=new Date(this.get()),i.getTime()||(i=new Date),74===e||40===e?a=7:75===e||38===e?a=-7:76===e||39===e?a=1:72!==e&&37!==e||(a=-1),a&&(!n||40!==e&&38!==e?!n||37!==e&&39!==e?i.setDate(i.getDate()+a):i.setMonth(i.getMonth()+(a>0?1:-1)):i.setFullYear(i.getFullYear()+(a>0?1:-1)),this.set(o(i)))),9===e)},onCalendarBlur:function(t){t.hide()},onCalendarFocus:function(t){this.legacy(function(t){setTimeout(function(){if("selectionStart"in t)t.selectionStart=0,t.selectionEnd=0;else{var e=t.createTextRange();e.moveStart("character",0),e.collapse(),e.moveEnd("character",0),e.select()}},0)}),t.show()},onFormReset:function(){this.set(this.get("defaultValue"))}})}(window.DOM,"better-dateinput",["Mo","Tu","We","Th","Fr","Sa","Su"],["January","February","March","April","May","June","July","August","September","October","November","December"]);