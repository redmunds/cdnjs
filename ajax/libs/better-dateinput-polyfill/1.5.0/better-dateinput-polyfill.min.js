!function(t,e,a,r,o,n,i,s){"use strict";var l=t.__,d=function(e,a){return"en-US"===t.get("lang")?e:a},c=function(t){return t.toISOString().split("T")[0]},u="Su Mo Tu We Th Fr Sa".split(" "),h="January February March April May June July August September October November December".split(" "),p=t.create("div.{0}>p.{0}-header>a[{1}]*2+span[{2} {1}].{0}-caption^table[{2}].{0}-days>thead>(tr>th[{1}]*7)^(tbody.{0}-body*2>tr*6>td*7)",[""+e+"-calendar","unselectable=on","aria-hidden=true"]),b=t.create("span[aria-hidden=true].{0}-value",[e]),f=function(t){return["min","max"].map(function(e){return new Date(t.get(e)||"")})};t.extend("input[type=date]",!("orientation"in window),{constructor:function(){var a,r=this,o=p.clone(!0),n=b.clone(!0),i=this.css("color"),s=this.offset();this.set({type:"text",value:Date.now()}).css("color",document.addEventListener?"transparent":this.css("background-color")).on("keydown",[o,"which","shiftKey"],this.onCalendarKeyDown).on(["focus","click"],[o],this.onCalendarFocus).on("blur",[o],this.onCalendarBlur).on("change",[n],this.doFormatValue).before(o).before(n),a=o.offset(),o.on("mousedown",[o,"target"],this.onCalendarClick).css({"margin-left":s.left-a.left+(s.width-a.width)/2,"margin-top":s.bottom-a.top,"z-index":1+(0|this.css("z-index"))}).hide(),t.get("clientHeight")<s.bottom+a.height&&o.css("margin-top",a.top-s.bottom-a.height),n.on("click",function(){r.fire("focus")}).css(this.css(["width","font","padding-left","padding-right","text-align","border-width","box-sizing"])).css({color:i,"line-height":s.height+"px","margin-left":s.left-a.left,"margin-top":s.top-a.top});var l=o.findAll("."+e+"-calendar-body");l[1].hide().remove(),this.closest("form").on("reset",this.onFormReset),this.watch("value",this.onValueChanged.bind(this,o.find("."+e+"-calendar-caption"),l,o)),this.set(this.get("defaultValue")),this.matches(":focus")&&this.fire("focus")},onValueChanged:function(t,a,r,o,n){var i,s,c,u;o=new Date(o),o.getTime()||(o=new Date),s=o.getUTCMonth(),c=o.getUTCDate(),i=o.getUTCFullYear(),t.set(l(h[s]).toHTMLString()+" "+i),u=new Date(Date.UTC(i,s,0)),u.setUTCDate(u.getUTCDate()-u.getUTCDay()-d(1,0)),n=new Date(n);var p=o.getUTCMonth()-n.getUTCMonth()+100*(o.getUTCFullYear()-n.getUTCFullYear()),b=a[r.contains(a[0])?0:1],m=p?a[a[0]===b?1:0]:b,g=f(this);m.findAll("td").forEach(function(t){u.setUTCDate(u.getUTCDate()+1);var a=s-u.getUTCMonth(),r=""+e+"-calendar-";i!==u.getUTCFullYear()&&(a*=-1),u<g[0]||u>g[1]?r+="out":a>0?r+="past":a<0?r+="future":c===u.getUTCDate()?r+="today":r="",t.set({_ts:u.getTime(),className:r,textContent:u.getUTCDate()})}),p&&(b[p>0?"after":"before"](m),b.hide(function(){b.remove()}),m.show()),this.fire("change")},doFormatValue:function(e){var a=new Date(this.get()),r="";if(a.getTime()){var o="E, dd MMM yyyy".replace(/\w+/g,"{$&}");r=t.format(o,{E:l(u[a.getUTCDay()]).toHTMLString(),dd:(a.getUTCDate()>9?"":"0")+a.getUTCDate(),MMM:l(h[a.getUTCMonth()].substr(0,3)+".").toHTMLString(),yyyy:a.getUTCFullYear()})}e.set(r)},onCalendarClick:function(t,e){var a;if(e.matches("a")){a=new Date(this.get()),a.getTime()||(a=new Date),a.setUTCMonth(a.getUTCMonth()+(e.next("a")[0]?-1:1));var r=f(this);a<r[0]?a=r[0]:a>r[1]&&(a=r[1])}else e.matches("td")&&(a=e.get("_ts"),a&&(a=new Date(a),t.hide()));return null!=a&&this.set(c(a)),!1},onCalendarKeyDown:function(t,e,l){var d,u;if(t.matches(":hidden")&&e===o)return!0;if(e===a)t.toggle();else if(e===n||e===r||e===o)t.hide();else if(e===i||e===s)this.set("");else if(u=new Date(this.get()),u.getTime()||(u=new Date),74===e||40===e?d=7:75===e||38===e?d=-7:76===e||39===e?d=1:72!==e&&37!==e||(d=-1),d){!l||40!==e&&38!==e?!l||37!==e&&39!==e?u.setUTCDate(u.getUTCDate()+d):u.setUTCMonth(u.getUTCMonth()+(d>0?1:-1)):u.setUTCFullYear(u.getUTCFullYear()+(d>0?1:-1));var h=f(this);u<h[0]||u>h[1]||this.set(c(u))}return e===r},onCalendarBlur:function(t){t.hide()},onCalendarFocus:function(t){var e=this[0];setTimeout(function(){if("selectionStart"in e)e.selectionStart=0,e.selectionEnd=0;else{var t=e.createTextRange();t.moveStart("character",0),t.collapse(),t.moveEnd("character",0),t.select()}},0),t.findAll("th").forEach(function(t,e){t.l10n(u[d(e,++e%7)])}),t.show()},onFormReset:function(){this.set(this.get("defaultValue"))}})}(window.DOM,"btr-dateinput",32,9,13,27,8,46),DOM.importStyles(".btr-dateinput-value","position:absolute;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;border-style:none solid;border-color:transparent"),DOM.importStyles(".btr-dateinput-calendar","position:absolute;visibility:hidden;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#FFF;border-bottom:1px solid #CCC;overflow:hidden;border-radius:3px;-webkit-box-shadow:0 .25em .5em rgba(0,0,0,.2);box-shadow:0 .25em .5em rgba(0,0,0,.2);font-family:Helvetica Neue,Helvetica,Arial,sans-serif;text-align:center;opacity:1;-webkit-transform:scale(1,1);-ms-transform:scale(1,1);transform:scale(1,1);-webkit-transform-origin:50% 0;-ms-transform-origin:50% 0;transform-origin:50% 0;-webkit-transition:.1s ease-out;transition:.1s ease-out;width:15em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale"),DOM.importStyles(".btr-dateinput-calendar[aria-hidden=true]","opacity:0;-webkit-transform:scale(.75,.75);-ms-transform:scale(.75,.75);transform:scale(.75,.75)"),DOM.importStyles(".btr-dateinput-calendar-header","position:relative;margin:0;line-height:2.5em;font-weight:700;white-space:nowrap;background:#2da4d6;text-shadow:0 1px 0 #555;border-bottom:1px solid #207fb1"),DOM.importStyles(".btr-dateinput-calendar-header>a","width:2.5em;height:2.5em;position:absolute;left:0;top:0"),DOM.importStyles(".btr-dateinput-calendar-header>a:before","content:'\\25C4'"),DOM.importStyles(".btr-dateinput-calendar-header>a::before","font-size:.85em"),DOM.importStyles(".btr-dateinput-calendar-header>a+a","left:auto;right:0"),DOM.importStyles(".btr-dateinput-calendar-header>a+a:before","content:'\\25BA'"),DOM.importStyles(".btr-dateinput-calendar-days","table-layout:fixed;border-spacing:0;border-collapse:collapse;color:#555;background:#FFF;border-radius:3px;border:1px solid #CCC;border-bottom:0"),DOM.importStyles(".btr-dateinput-calendar-days>thead","border-top:1px solid #EEE;border-bottom:1px solid #CCC;font-size:.75em;background:#DDD;font-weight:700;text-shadow:0 1px 0 #f3f3f3"),DOM.importStyles(".btr-dateinput-calendar-body","-webkit-transform:translate(0);-ms-transform:translate(0);transform:translate(0);-webkit-transition:-webkit-transform .1s linear;transition:transform .1s linear"),DOM.importStyles(".btr-dateinput-calendar-body[aria-hidden=true]","-webkit-transform:translate(-100%);-ms-transform:translate(-100%);transform:translate(-100%)"),DOM.importStyles(".btr-dateinput-calendar-body+.btr-dateinput-calendar-body","position:absolute;bottom:0"),DOM.importStyles(".btr-dateinput-calendar-body+.btr-dateinput-calendar-body[aria-hidden=true]","-webkit-transform:translate(100%);-ms-transform:translate(100%);transform:translate(100%)"),DOM.importStyles(".btr-dateinput-calendar-days td,.btr-dateinput-calendar-days th","width:2em;height:2em;line-height:2"),DOM.importStyles(".btr-dateinput-calendar-past,.btr-dateinput-calendar-future","color:#DDD"),DOM.importStyles(".btr-dateinput-calendar-out","color:#CCC;text-shadow:0 1px 0 #FFF"),DOM.importStyles(".btr-dateinput-calendar-today","color:#FFF;background-color:#2da4d6;text-shadow:0 1px 0 #555;font-weight:700"),DOM.importStyles(".btr-dateinput-calendar-out,.btr-dateinput-calendar-days td:hover","background-color:#f3f3f3;background-color:rgba(0,0,0,.05)"),DOM.importStyles(".btr-dateinput-calendar-header>a:hover,td.btr-dateinput-calendar-today:hover","background-color:#207fb1"),DOM.importStyles(".btr-dateinput-value+input::-moz-placeholder","color:initial");