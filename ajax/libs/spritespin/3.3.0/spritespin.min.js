!function(e){"use strict";function t(e,t,a){for(e=String(e);e.length<t;)e=String(a)+e;return e}function a(e,t,a){return e>a?a:t>e?t:e}function o(e,t,a,o){for(;e>a;)e-=o;for(;t>e;)e+=o;return e}function n(e){return e.preventDefault(),!1}function r(){window.console&&window.console.log&&window.console.log.apply(window.console,arguments)}function i(e,t,a){a&&e.bind(t+"."+m,a)}function s(e){e.unbind("."+m)}function d(e){var t,a,o="string"==typeof e.source?[e.source]:e.source,n=0,r=[],i=e.preloadCount||r.length,s=!1,d=!1,u=function(){n+=1,"function"==typeof e.progress&&e.progress({index:r.indexOf(this),loaded:n,total:o.length,percent:Math.round(n/o.length*100)}),d=d||this===r[0],!s&&n>=i&&d&&"function"==typeof e.complete&&(s=!0,e.complete(r))};for(t=0;t<o.length;t+=1)a=new Image,r.push(a),a.onload=a.onabort=a.onerror=u,a.src=o[t];"function"==typeof e.initiated&&e.initiated(r)}function u(e,t){var a=(t||e).width,o=(t||e).height;if(1048576>=a*o)return!1;var n;if(n=document.createElement("canvas"),!n||!n.getContext)return!1;var i=n.getContext("2d");if(!i)return!1;n.width=n.height=1,i.fillStyle="#FF00FF",i.fillRect(0,0,1,1),i.drawImage(e,-a+1,0);try{var s=i.getImageData(0,0,1,1).data;return 255===s[0]&&0===s[1]&&255===s[2]}catch(d){return r(d.message,d.stack),!1}}function c(e){var t=new Image;return t.src=e.src,{width:t.width,height:t.height}}var m="spritespin",g=["mousedown","mousemove","mouseup","mouseenter","mouseover","mouseleave","dblclick","touchstart","touchmove","touchend","touchcancel","selectstart","gesturestart","gesturechange","gestureend"],h=["dragstart"],f={};window.SpriteSpin=f,f.namespace=m,f.mods={},f.defaults={source:void 0,width:void 0,height:void 0,frames:void 0,framesX:void 0,lanes:1,module:"360",behavior:"drag",renderer:"canvas",lane:0,frame:0,frameTime:40,animate:!0,reverse:!1,loop:!0,stopFrame:0,wrap:!0,wrapLane:!1,sense:1,senseLane:void 0,orientation:"horizontal",detectSubsampling:!0,scrollThreshold:50,preloadCount:void 0,onInit:void 0,onProgress:void 0,onLoad:void 0,onFrame:void 0,onDraw:void 0},f.clamp=a,f.wrap=o,f.sourceArray=function(e,a){var o=0,n=0,r=0,i=0,s=a.digits||2;a.frame&&(o=a.frame[0],n=a.frame[1]),a.lane&&(r=a.lane[0],i=a.lane[1]);var d,u,c,m=[];for(d=r;i>=d;d+=1)for(u=o;n>=u;u+=1)c=e.replace("{lane}",t(d,s,0)),c=c.replace("{frame}",t(u,s,0)),m.push(c);return m},f.measureSource=function(e){var t=e.images[0],a=c(t);if(1===e.images.length){if(e.sourceWidth=a.width,e.sourceHeight=a.height,e.detectSubsampling&&u(t,a)&&(e.sourceWidth/=2,e.sourceHeight/=2),e.framesX=e.framesX||e.frames,!e.frameWidth||!e.frameHeight)if(e.framesX){e.frameWidth=Math.floor(e.sourceWidth/e.framesX);var o=Math.ceil(e.frames*e.lanes/e.framesX);e.frameHeight=Math.floor(e.sourceHeight/o)}else e.frameWidth=a.width,e.frameHeight=a.height}else e.sourceWidth=e.frameWidth=a.width,e.sourceHeight=e.frameHeight=a.height,u(t,a)&&(e.sourceWidth=e.frameWidth=a.width/2,e.sourceHeight=e.frameHeight=a.height/2),e.frames=e.frames||e.images.length},f.resetInput=function(e){e.startX=e.startY=void 0,e.currentX=e.currentY=void 0,e.oldX=e.oldY=void 0,e.dX=e.dY=e.dW=0,e.ddX=e.ddY=e.ddW=0},f.updateInput=function(e,t){void 0===e.touches&&void 0!==e.originalEvent&&(e.touches=e.originalEvent.touches),t.oldX=t.currentX,t.oldY=t.currentY,void 0!==e.touches&&e.touches.length>0?(t.currentX=e.touches[0].clientX||0,t.currentY=e.touches[0].clientY||0):(t.currentX=e.clientX||0,t.currentY=e.clientY||0),(void 0===t.oldX||void 0===t.oldY)&&(t.oldX=t.currentX,t.oldY=t.currentY),(void 0===t.startX||void 0===t.startY)&&(t.startX=t.currentX,t.startY=t.currentY,t.clickframe=t.frame,t.clicklane=t.lane),t.dX=t.currentX-t.startX,t.dY=t.currentY-t.startY,t.ddX=t.currentX-t.oldX,t.ddY=t.currentY-t.oldY,t.ndX=t.dX/t.width,t.ndY=t.dY/t.height,t.nddX=t.ddX/t.width,t.nddY=t.ddY/t.height},f.updateFrame=function(e,t,n){void 0!==t?e.frame=Number(t):e.animation&&(e.frame+=e.reverse?-1:1),e.animation?(e.frame=o(e.frame,0,e.frames-1,e.frames),e.loop||e.frame!==e.stopFrame||f.stopAnimation(e)):e.frame=e.wrap?o(e.frame,0,e.frames-1,e.frames):a(e.frame,0,e.frames-1),void 0!==n&&(e.lane=n,e.lane=a(e.lane,0,e.lanes-1)),e.target.trigger("onFrame",e),e.target.trigger("onDraw",e)},f.stopAnimation=function(e){e.animate=!1,e.animation&&(window.clearInterval(e.animation),e.animation=null)},f.setAnimation=function(e){e.animate?f.requestFrame(e):f.stopAnimation(e)},f.requestFrame=function(e){e.animation||(void 0===e.frameFunction&&(e.frameFunction=function(){try{f.updateFrame(e)}catch(t){}}),e.animation=window.setInterval(e.frameFunction,e.frameTime))},f.setModules=function(t){var a,o,n;for(a=0;a<t.mods.length;a+=1)o=t.mods[a],"string"==typeof o&&(n=f.mods[o],n?t.mods[a]=n:e.error("No module found with name "+o))},f.setLayout=function(e){e.target.attr("unselectable","on").css({"-ms-user-select":"none","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none"});var t=Math.floor(e.width||e.frameWidth||e.target.innerWidth()),a=Math.floor(e.height||e.frameHeight||e.target.innerHeight());e.target.css({width:t,height:a,position:"relative",overflow:"hidden"});var o={width:"100%",height:"100%",top:0,left:0,bottom:0,right:0,position:"absolute"};e.stage.css(o).hide(),e.canvas&&(e.canvas[0].width=t,e.canvas[0].height=a,e.canvas.css(o).hide())},f.setEvents=function(e){var t,a,o,r=e.target;for(s(r),a=0;a<h.length;a+=1)i(r,h[a],n);for(t=0;t<e.mods.length;t+=1){for(o=e.mods[t],a=0;a<g.length;a+=1)i(r,g[a],o[g[a]]);i(r,"onInit",o.onInit),i(r,"onProgress",o.onProgress),i(r,"onLoad",o.onLoad),i(r,"onFrame",o.onFrame),i(r,"onDraw",o.onDraw)}i(r,"onLoad",function(e,t){f.setAnimation(t)}),i(r,"onInit",e.onInit),i(r,"onProgress",e.onProgress),i(r,"onLoad",e.onLoad),i(r,"onFrame",e.onFrame),i(r,"onDraw",e.onDraw)},f.boot=function(e){f.setModules(e),f.setLayout(e),f.setEvents(e),e.target.addClass("loading").trigger("onInit",e),e.loading=!0,d({source:e.source,preloadCount:e.preloadCount,progress:function(t){e.target.trigger("onProgress",[t,e])},complete:function(t){e.images=t,e.loading=!1,f.measureSource(e),e.stage.show(),e.target.removeClass("loading").trigger("onLoad",e).trigger("onFrame",e).trigger("onDraw",e)}})},f.create=function(t){var a=t.target,o=a.data(m);if(o)e.extend(o,t);else{if(o=e.extend({},f.defaults,t),o.source=o.source||[],a.find("img").each(function(){o.source.push(e(this).attr("src"))}),a.empty().addClass("spritespin-instance").append("<div class='spritespin-stage'></div>"),"canvas"===o.renderer){var n=e("<canvas class='spritespin-canvas'></canvas>")[0];n.getContext&&n.getContext("2d")?(o.canvas=e(n),o.context=n.getContext("2d"),a.append(o.canvas),a.addClass("with-canvas")):o.renderer="image"}o.target=a,o.stage=a.find(".spritespin-stage"),a.data(m,o)}"string"==typeof o.source&&(o.source=[o.source]),o.mods&&(delete o.behavior,delete o.module),(o.behavior||o.module)&&(o.mods=[],o.behavior&&o.mods.push(o.behavior),o.module&&o.mods.push(o.module),delete o.behavior,delete o.module),f.boot(o)},f.destroy=function(e){e&&(f.stopAnimation(e),s(e.target),e.target.removeData(m))},f.registerModule=function(t,a){return f.mods[t]&&e.error("Module name is already taken: "+t),a=a||{},f.mods[t]=a,a},f.Api=function(e){this.data=e},f.extendApi=function(t){var a,o=f.Api.prototype;for(a in t)t.hasOwnProperty(a)&&(o[a]?e.error("API method is already defined: "+a):o[a]=t[a]);return o},e.fn.spritespin=function(t,a){if("data"===t)return this.data(m);if("api"===t){var o=this.data(m);return o.api=o.api||new f.Api(o),o.api}if("destroy"===t)return e(this).each(function(){f.destroy(e(this).data(m))});if(2===arguments.length&&"string"==typeof t){var n={};n[t]=a,t=n}return"object"==typeof t?(t.target=t.target||e(this),f.create(t),t.target):e.error("Invalid call to spritespin")}}(window.jQuery||window.Zepto||window.$),function(){"use strict";var e=window.SpriteSpin;e.extendApi({isPlaying:function(){return null!==this.data.animation},isLooping:function(){return this.data.loop},toggleAnimation:function(){this.data.animate=!this.data.animate,e.setAnimation(this.data)},stopAnimation:function(){this.data.animate=!1,e.setAnimation(this.data)},startAnimation:function(){this.data.animate=!0,e.setAnimation(this.data)},loop:function(t){return this.data.loop=t,e.setAnimation(this.data),this},currentFrame:function(){return this.data.frame},updateFrame:function(t){return e.updateFrame(this.data,t),this},skipFrames:function(t){var a=this.data;return e.updateFrame(a,a.frame+(a.reverse?-t:+t)),this},nextFrame:function(){return this.skipFrames(1)},prevFrame:function(){return this.skipFrames(-1)},playTo:function(t,a){var o=this.data;if(a=a||{},a.force||o.frame!==t){if(a.nearest){var n=t-o.frame,r=t>o.frame?n-o.frames:n+o.frames,i=Math.abs(n)<Math.abs(r)?n:r;o.reverse=0>i}return o.animate=!0,o.loop=!1,o.stopFrame=t,e.setAnimation(o),this}}})}(window.jQuery||window.Zepto||window.$),function(e,t){"use strict";function a(a){var o=e(this),n=o.data("spritespin");t.updateInput(a,n);var r,i;"horizontal"===n.orientation?(r=n.target.innerWidth()/2,i=n.currentX-n.target.offset().left):(r=n.target.innerHeight()/2,i=n.currentY-n.target.offset().top),o.spritespin(i>r?"next":"prev")}t.registerModule("click",{mouseup:a,touchend:a})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";function a(a){var o=e(this).spritespin("data");o.loading||o.dragging||!o.stage.is(":visible")||(o.dragFrame=o.frame||0,o.dragLane=o.lane||0,t.updateInput(a,o),o.dragging=!0)}function o(){var a=e(this),o=a.spritespin("data");o.dragging=!1,o.stage.is(":visible")&&t.resetInput(o)}function n(a){var o,n,r=e(this),i=r.spritespin("data");if(i.dragging){if(t.updateInput(a,i),Math.abs(i.ddX)+Math.abs(i.ddY)>i.scrollThreshold)return i.dragging=!1,void t.resetInput(i);a.preventDefault();var s=0;s="number"==typeof i.orientation?(Number(i.orientation)||0)*Math.PI/180:"horizontal"===i.orientation?0:Math.PI/2;var d=Math.sin(s),u=Math.cos(s),c=(i.nddX*u-i.nddY*d)*i.sense||0,m=(i.nddX*d+i.nddY*u)*(i.senseLane||i.sense)||0;i.dragFrame+=i.frames*c,i.dragLane+=i.lanes*m,i.wrap||(i.dragFrame=Math.min(i.dragFrame,i.frames),i.dragFrame=Math.max(i.dragFrame,0)),i.wrapLane||(i.dragLane=Math.min(i.dragLane,i.lanes),i.dragLane=Math.max(i.dragLane,0)),n=Math.floor(i.dragFrame),o=Math.floor(i.dragLane),t.updateFrame(i,n,o),t.stopAnimation(i)}}t.registerModule("drag",{mousedown:a,mousemove:n,mouseup:o,mouseleave:o,touchstart:a,touchmove:n,touchend:o,touchcancel:o}),t.registerModule("move",{mousemove:function(e){a.call(this,e),n.call(this,e)},mouseleave:o,touchstart:a,touchmove:n,touchend:o,touchcancel:o})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";function a(a){var o=e(this),n=o.spritespin("data");n.loading||(t.updateInput(a,n),n.dragging=!0,o.spritespin("api").startAnimation())}function o(){var a=e(this),o=a.spritespin("data");t.resetInput(o),o.dragging=!1,a.spritespin("api").stopAnimation()}function n(a){var o=e(this),n=o.spritespin("data");if(n.dragging){t.updateInput(a,n);var r,i;"horizontal"===n.orientation?(r=n.target.innerWidth()/2,i=(n.currentX-n.target.offset().left-r)/r):(r=n.height/2,i=(n.currentY-n.target.offset().top-r)/r),n.reverse=0>i,i=0>i?-i:i,n.frameTime=80*(1-i)+20,("horizontal"===n.orientation&&n.dX<n.dY||"vertical"===n.orientation&&n.dX<n.dY)&&a.preventDefault()}}t.registerModule("hold",{mousedown:a,mousemove:n,mouseup:o,mouseleave:o,touchstart:a,touchmove:n,touchend:o,touchcancel:o,onFrame:function(){e(this).spritespin("api").startAnimation()}})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";function a(a){var o=e(this).spritespin("data");o.loading||(t.updateInput(a,o),o.dragging=!0)}function o(){var a=e(this).spritespin("data");a.dragging=!1,t.resetInput(a)}function n(a){var o=e(this),n=o.spritespin("data");if(n.dragging){t.updateInput(a,n);var r,i,s=n.frame,d=n.snap||.25;"horizontal"===n.orientation?(r=n.dX,i=n.target.innerWidth()*d):(r=n.dY,i=n.target.innerHeight()*d),r>i?(s=n.frame-1,n.dragging=!1):-i>r&&(s=n.frame+1,n.dragging=!1),o.spritespin("update",s),o.spritespin("animate",!1),("horizontal"===n.orientation&&n.dX<n.dY||"vertical"===n.orientation&&n.dX<n.dY)&&a.preventDefault()}}t.registerModule("swipe",{mousedown:a,mousemove:n,mouseup:o,mouseleave:o,touchstart:a,touchmove:n,touchend:o,touchcancel:o})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";function a(t){var a=t.lane*t.frames+t.frame,o=t.frameWidth*(a%t.framesX),r=t.frameHeight*n(a/t.framesX);return"canvas"===t.renderer?(t.context.clearRect(0,0,t.width,t.height),void t.context.drawImage(t.images[0],o,r,t.frameWidth,t.frameHeight,0,0,t.width,t.height)):(o=-n(o*t.scaleWidth),r=-n(r*t.scaleHeight),void("background"===t.renderer?t.stage.css({"background-image":["url('",t.source[0],"')"].join(""),"background-position":[o,"px ",r,"px"].join("")}):e(t.images).css({top:r,left:o})))}function o(t){var a=t.lane*t.frames+t.frame,o=t.images[a];"canvas"===t.renderer?o&&(t.context.clearRect(0,0,t.width,t.height),t.context.drawImage(t.images[a],0,0,t.width,t.height)):"background"===t.renderer?t.stage.css({"background-image":["url('",t.source[a],"')"].join(""),"background-position":[0,"px ",0,"px"].join("")}):(e(t.images).hide(),e(t.images[a]).show())}var n=Math.floor;t.registerModule("360",{onLoad:function(t,a){var o,r;if(a.scaleWidth=a.width/a.frameWidth,a.scaleHeight=a.height/a.frameHeight,a.sourceIsSprite=1===a.images.length,a.stage.empty().css({"background-image":"none"}).show(),"canvas"===a.renderer)a.context.clearRect(0,0,a.width,a.height),a.canvas.show();else if("background"===a.renderer){a.sourceIsSprite?(o=n(a.sourceWidth*a.scaleWidth),r=n(a.sourceHeight*a.scaleHeight)):(o=n(a.frameWidth*a.scaleWidth),r=n(a.frameHeight*a.scaleHeight));var i=[o,"px ",r,"px"].join("");a.stage.css({"background-repeat":"no-repeat","-webkit-background-size":i,"-moz-background-size":i,"-o-background-size":i,"background-size":i})}else"image"===a.renderer&&(a.sourceIsSprite?(o=n(a.sourceWidth*a.scaleWidth),r=n(a.sourceHeight*a.scaleHeight)):o=r="100%",e(a.images).appendTo(a.stage).css({width:o,height:r,position:"absolute"}))},onDraw:function(e,t){t.sourceIsSprite?a(t):o(t)}})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e){"use strict";var t=window.SpriteSpin.mods.gallery={};t.onLoad=function(t,a){a.images=[],a.offsets=[],a.stage.empty(),a.speed=500,a.opacity=.25,a.oldFrame=0;var o,n=0;for(o=0;o<a.source.length;o+=1){var r=e("<img src='"+a.source[o]+"'/>");a.stage.append(r),a.images.push(r),a.offsets.push(-n+(a.width-r[0].width)/2),n+=r[0].width,r.css({opacity:.25})}a.stage.css({width:n}),a.images[a.oldFrame].animate({opacity:1},a.speed)},t.onDraw=function(e,t){t.oldFrame!==t.frame&&t.offsets?(t.stage.stop(!0,!1),t.stage.animate({left:t.offsets[t.frame]},t.speed),t.images[t.oldFrame].animate({opacity:t.opacity},t.speed),t.oldFrame=t.frame,t.images[t.oldFrame].animate({opacity:1},t.speed)):t.stage.css({left:t.offsets[t.frame]+t.dX})},t.resetInput=function(e,t){t.onDrag||t.stage.animate({left:t.offsets[t.frame]})}}(window.jQuery||window.Zepto||window.$),function(e,t){"use strict";var a=Math.floor;t.registerModule("panorama",{onLoad:function(e,t){t.stage.empty().show(),t.frames=t.sourceWidth,"horizontal"===t.orientation?(t.scale=t.height/t.sourceHeight,t.frames=t.sourceWidth):(t.scale=t.width/t.sourceWidth,t.frames=t.sourceHeight);var o=a(t.sourceWidth*t.scale),n=a(t.sourceHeight*t.scale),r=[o,"px ",n,"px"].join("");t.stage.css({"background-image":["url('",t.source[0],"')"].join(""),"background-repeat":"repeat-both","-webkit-background-size":r,"-moz-background-size":r,"-o-background-size":r,"background-size":r})},onDraw:function(e,t){var o=0,n=0;"horizontal"===t.orientation?o=-a(t.frame%t.frames*t.scale):n=-a(t.frame%t.frames*t.scale),t.stage.css({"background-position":[o,"px ",n,"px"].join("")})}})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";function a(e,a){e.preventDefault(),a.dragging=!1,!e.touches&&e.originalEvent&&(e.touches=e.originalEvent.touches);var o,n;e.touches&&e.touches.length?(o=e.touches[0].clientX||0,n=e.touches[0].clientY||0):(o=e.clientX||0,n=e.clientY||0),a.zoomX=o/a.width,a.zoomY=n/a.height,a.zoomX=a.zoomX>1?1:a.zoomX<0?0:a.zoomX,a.zoomY=a.zoomY>1?1:a.zoomY<0?0:a.zoomY,t.updateFrame(a)}function o(t){t.preventDefault();var o=e(this).spritespin("data"),n=(new Date).getTime();if(!o.zoomClickTime)return void(o.zoomClickTime=n);var r=n-o.zoomClickTime;return r>500?void(o.zoomClickTime=n):(o.zoomClickTime=0,void(e(this).spritespin("api").toggleZoom()&&a(t,o)))}function n(t){var o=e(this).spritespin("data");o.zoomStage.is(":visible")&&a(t,o)}t.registerModule("zoom",{mousedown:o,touchstart:o,mousemove:n,touchmove:n,onInit:function(t,a){a.zoomStage||(a.zoomStage=e("<div class='spritezoom-stage'></div>").css({width:"100%",height:"100%",top:0,left:0,bottom:0,right:0,position:"absolute"}).appendTo(a.target).hide())},onDraw:function(e,t){var a=t.lane*t.frames+t.frame,o=t.source[a];if(t.zoomSource&&(o=t.zoomSource[a]),o){var n=t.zoomX,r=t.zoomY;(null==n||null==r)&&(n=t.zoomX=.5,r=t.zoomY=.5),t.zoomStage.css({"background-repeat":"no-repeat","background-image":["url('",o,"')"].join(""),"background-position":[100*n|0,"% ",100*r|0,"%"].join("")})}}}),t.extendApi({toggleZoom:function(){var t=this.data;return t.zoomStage?t.zoomStage.is(":visible")?(t.zoomStage.fadeOut(),t.stage.fadeIn(),!1):(t.zoomStage.fadeIn(),t.stage.fadeOut(),!0):(e.error("zoom module is not initialized or is not available."),!1)}})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin);