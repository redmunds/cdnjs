/*! Qoopido.nucleus 1.0.0 | https://github.com/dlueth/qoopido.nucleus | (c) 2015 Dirk Lueth */
!function(){"use strict";function e(e,r,t,a,n){function s(){var e,t;!g.length||c&&!v.idle.length||(e=g.shift(),c?(t=v.idle.shift(),v.busy[e.uuid]=t,t.addEventListener("message",e.onMessage),t.addEventListener("error",e.onError),t.postMessage({load:e.load.toString(),parameter:e.parameter},r(e.parameter,ArrayBuffer)?[e.parameter]:null)):setTimeout(function(){try{e.deferred.resolve(e.load.apply(null,e.parameter))}catch(r){e.deferred.reject()}s()},4))}function d(e){var r=v.busy[e.uuid];delete v.busy[e.uuid],r.removeEventListener("message",e.onMessage),r.removeEventListener("error",e.onError),v.idle.push(r),s()}function i(r,t){var a=this,d=e.defer();return a.uuid=n(),a.deferred=d,a.load=r,a.parameter=t||[],g.push(a),s(),d.pledge}var o,u=a("Worker"),l=a("URL"),p=a("Blob"),c=u&&l&&p,f='var a=this,b=/\\s+/g;a.addEventListener("message",function(b){a.postMessage({type:"result",result:a.process(b.data.load).apply(null,b.data.parameter)})},!1),a.process=function(a){var c=a.substring(a.indexOf("(")+1,a.indexOf(")")).replace(b,",").split(",");return c.push(a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))),Function.apply(null,c)};',v={idle:[],busy:{}},g=[],m=0;if(i.prototype={onMessage:function(e){var r=this;"result"===e.data.type&&(r.deferred.resolve(e.data.result),d(r))},onError:function(){var e=this;e.deferred.reject(),d(e)}},c)try{for(o=l.createObjectURL(new p([f],{type:"application/javascript"}));4>m;m++)v.idle[m]=new u(o)}catch(b){c=!1}return t.extend(i)}provide(["/demand/pledge","/demand/validator/isInstanceOf","./base","./support/method","./function/unique/uuid"],e)}();
//# sourceMappingURL=task.js.map
