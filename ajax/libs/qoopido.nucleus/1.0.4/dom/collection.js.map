{"version":3,"sources":["dom/collection.js"],"names":["document","definition","isObject","isTypeOf","isInstanceOf","base","DomElement","functionDescriptorGenerate","map","method","element","self","this","elements","parameter","arrayPrototypeSlice","call","arguments","i","apply","mapFragment","target","buildFragment","fragment","createDocumentFragment","appendChild","DomCollection","attributes","styles","selectors","selector","split","concat","querySelectorAll","exception","Array","isArray","objectDefineProperty","setAttributes","setStyles","prototype","slice","Object","defineProperty","length","get","index","each","callback","setAttribute","attribute","value","removeAttribute","removeAttributes","setStyle","property","properties","removeStyle","removeStyles","addClass","name","removeClass","toggleClass","prependTo","appendTo","insertBefore","parentNode","insertAfter","sibling","nextSibling","replace","remove","splice","pop","on","one","off","emit","extend","provide"],"mappings":"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","file":"dom/collection.js","sourcesContent":["/**\n * Qoopido dom/collection\n *\n * Provides additional methods for DOM element collections\n *\n * Copyright (c) 2015 Dirk Lueth\n *\n * Dual licensed under the MIT and GPL licenses.\n *  - http://www.opensource.org/licenses/mit-license.php\n *  - http://www.gnu.org/copyleft/gpl.html\n *\n * @author Dirk Lueth <info@qoopido.com>\n *\n * @use /demand/validator/isObject\n * @use /demand/validator/isTypeOf\n * @use /demand/validator/isInstanceOf\n *\n * @require ../base\n * @require ../element\n * @require ../function/descriptor/generate\n */\n\n(function(document) {\n\t'use strict';\n\n\tfunction definition(isObject, isTypeOf, isInstanceOf, base, DomElement, functionDescriptorGenerate) {\n\t\tvar arrayPrototypeSlice  = Array.prototype.slice,\n\t\t\tobjectDefineProperty = Object.defineProperty;\n\n\t\tfunction map(method) {\n\t\t\tvar self      = this,\n\t\t\t\telements  = self.elements,\n\t\t\t\tparameter = arrayPrototypeSlice.call(arguments, 1),\n\t\t\t\ti = 0, element;\n\n\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\telement[method].apply(element, parameter);\n\t\t\t}\n\n\t\t\treturn self;\n\t\t}\n\n\t\tfunction mapFragment(target, method) {\n\t\t\tvar self = this;\n\n\t\t\ttarget = isInstanceOf(target, DomElement) ? target : new DomElement(target);\n\n\t\t\tif(target) {\n\t\t\t\ttarget[method].call(target, buildFragment(self.elements));\n\t\t\t}\n\n\t\t\treturn self;\n\t\t}\n\n\t\tfunction buildFragment(elements) {\n\t\t\tvar fragment = document.createDocumentFragment(),\n\t\t\t\ti = 0, element;\n\n\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\tfragment.appendChild(element.element);\n\t\t\t}\n\n\t\t\treturn fragment;\n\t\t}\n\n\t\tfunction DomCollection(elements, attributes, styles) {\n\t\t\tvar self = this,\n\t\t\t\tselectors, selector, i, element;\n\n\t\t\tif(isTypeOf(elements, 'string')) {\n\t\t\t\tselectors = elements.split(',');\n\t\t\t\telements  = [];\n\n\t\t\t\tfor(i = 0; selector = selectors[i]; i++) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\telements = elements.concat(arrayPrototypeSlice.call(document.querySelectorAll(selector)));\n\t\t\t\t\t} catch(exception) {} // eslint-disable-line no-empty\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!Array.isArray(elements)) {\n\t\t\t\telements = arrayPrototypeSlice.call(elements);\n\t\t\t}\n\n\t\t\tfor(i = 0; element = elements[i]; i++) {\n\t\t\t\telements[i] = new DomElement(element);\n\t\t\t}\n\n\t\t\tobjectDefineProperty(self, 'elements', functionDescriptorGenerate(elements));\n\n\t\t\tisObject(attributes) && self.setAttributes(attributes);\n\t\t\tisObject(styles) && self.setStyles(styles);\n\t\t}\n\n\t\tDomCollection.prototype = {\n\t\t\t/* only for reference\n\t\t\telements: null,\n\t\t\t*/\n\t\t\tget length() {\n\t\t\t\treturn this.elements.length;\n\t\t\t},\n\t\t\tget: function(index) {\n\t\t\t\treturn this.elements[index];\n\t\t\t},\n\t\t\teach: function(callback) {\n\t\t\t\tvar self     = this,\n\t\t\t\t\telements = self.elements,\n\t\t\t\t\ti = 0, element;\n\n\t\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\t\tcallback.call(element, i);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tsetAttribute: function(attribute, value) {\n\t\t\t\treturn map.call(this, 'setAttribute', attribute, value);\n\t\t\t},\n\t\t\tsetAttributes: function(attributes) {\n\t\t\t\treturn map.call(this, 'setAttributes', attributes);\n\t\t\t},\n\t\t\tremoveAttribute: function(attribute) {\n\t\t\t\treturn map.call(this, 'removeAttribute', attribute);\n\t\t\t},\n\t\t\tremoveAttributes: function(attributes) {\n\t\t\t\treturn map.call(this, 'removeAttributes', attributes);\n\t\t\t},\n\t\t\tsetStyle: function(property, value) {\n\t\t\t\treturn map.call(this, 'setStyle', property, value);\n\t\t\t},\n\t\t\tsetStyles: function(properties) {\n\t\t\t\treturn map.call(this, 'setStyles', properties);\n\t\t\t},\n\t\t\tremoveStyle: function(property) {\n\t\t\t\treturn map.call(this, 'removeStyle', property);\n\t\t\t},\n\t\t\tremoveStyles: function(properties) {\n\t\t\t\treturn map.call(this, 'removeStyles', properties);\n\t\t\t},\n\t\t\taddClass: function(name) {\n\t\t\t\treturn map.call(this, 'addClass', name);\n\t\t\t},\n\t\t\tremoveClass: function(name) {\n\t\t\t\treturn map.call(this, 'removeClass', name);\n\t\t\t},\n\t\t\ttoggleClass: function(name) {\n\t\t\t\treturn map.call(this, 'toggleClass', name);\n\t\t\t},\n\t\t\tprependTo: function(target) {\n\t\t\t\treturn mapFragment.call(this, target, 'prepend');\n\t\t\t},\n\t\t\tappendTo: function(target) {\n\t\t\t\treturn mapFragment.call(this, target, 'append');\n\t\t\t},\n\t\t\tinsertBefore: function(target) {\n\t\t\t\tvar self = this;\n\n\t\t\t\ttarget = isInstanceOf(target, DomElement) ? target : new DomElement(target);\n\n\t\t\t\tif(target && (target = target.element)) {\n\t\t\t\t\ttarget.parentNode.insertBefore(buildFragment(self.elements), target);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tinsertAfter: function(target) {\n\t\t\t\tvar self = this,\n\t\t\t\t\tsibling, fragment;\n\n\t\t\t\ttarget = isInstanceOf(target, DomElement) ? target : new DomElement(target);\n\n\t\t\t\tif(target && (target = target.element)) {\n\t\t\t\t\tfragment = buildFragment(self.elements);\n\n\t\t\t\t\t(sibling = target.nextSibling) ? target.parentNode.insertBefore(fragment, sibling) : target.parentNode.appendChild(fragment);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\treplace: function(target) {\n\t\t\t\tvar self     = this,\n\t\t\t\t\telements = self.elements,\n\t\t\t\t\ti = 0, element;\n\n\t\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\t\tif(i === 0) {\n\t\t\t\t\t\telement.replace(target);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.insertAfter(elements[i - 1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tremove: function(index) {\n\t\t\t\tvar self     = this,\n\t\t\t\t\telements = self.elements,\n\t\t\t\t\ti, element;\n\n\t\t\t\tif((index || index === 0) && (element = self.elements[index])) {\n\t\t\t\t\telement.remove();\n\t\t\t\t\telements.splice(index, 1);\n\t\t\t\t} else {\n\t\t\t\t\ti = elements.length - 1;\n\n\t\t\t\t\tfor(; element = elements[i]; i--) {\n\t\t\t\t\t\telement.remove();\n\t\t\t\t\t\telements.pop();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\ton: function() {\n\t\t\t\treturn map.apply(this, [ 'on' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t},\n\t\t\tone: function() {\n\t\t\t\treturn map.apply(this, [ 'one' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t},\n\t\t\toff: function() {\n\t\t\t\treturn map.apply(this, [ 'off' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t},\n\t\t\temit: function() {\n\t\t\t\treturn map.apply(this, [ 'emit' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t}\n\t\t};\n\n\t\treturn base.extend(DomCollection);\n\t}\n\n\tprovide([ '/demand/validator/isObject', '/demand/validator/isTypeOf', '/demand/validator/isInstanceOf', '../base', './element', '../function/descriptor/generate' ], definition);\n}(document));"],"sourceRoot":"/source/"}