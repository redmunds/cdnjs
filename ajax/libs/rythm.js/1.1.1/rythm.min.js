function Rythm(){function e(){if(!i._stopped){i._analyser.getByteFrequencyData(i._frequences);for(var a=0;a<i._frequences.length;a++){i._hzHistory[a]||(i._hzHistory[a]=[]),i._hzHistory[a].length>i.maxValueHistory&&i._hzHistory[a].shift(),i._hzHistory[a].push(i._frequences[a]);i._frequences[a]}i.rythmMapping.forEach(function(e){switch(e.type){default:n(e.elementClass,t(e.startValue,e.nbValue))}}),requestAnimationFrame(e)}}function t(e,t){for(var n=0,i=e;i<t+e;i++)n+=a(i);return n/t}function a(e){for(var t=255,a=0,n=0;n<i._hzHistory[e].length;n++)i._hzHistory[e][n]<t&&(t=i._hzHistory[e][n]),i._hzHistory[e][n]>a&&(a=i._hzHistory[e][n]);var r=a-t,s=i._frequences[e]-t,o=s/r;return i.startingScale+i.pulseRatio*o}function n(e,t){for(var a=document.getElementsByClassName(e),n=0;n<a.length;n++)a[n].style.transform="scale("+t+")"}var i=this;i._audioCtx=new AudioContext,i._analyser=i._audioCtx.createAnalyser(),i._gain=i._audioCtx.createGain(),i._source={},i._audio={},i._hzHistory=[],i._analyser.fftSize=2048,i._stopped=!1,i.startingScale=.75,i.pulseRatio=.5,i.maxValueHistory=100,i.rythmMapping=[],i.addRythm=function(e,t,a,n){i.rythmMapping.push({elementClass:e,type:t,startValue:a,nbValue:n})},i.addRythm("rythm-bass","size",0,10),i.addRythm("rythm-medium","size",150,40),i.addRythm("rythm-high","size",500,100),i.setMusic=function(e){i._audio=e,i._source=i._audioCtx.createMediaElementSource(i._audio),i._source.connect(i._gain),i._gain.connect(i._analyser),i._analyser.connect(i._audioCtx.destination)},i.setGain=function(e){i._gain.gain.value=e},i.start=function(){i._hzHistory=[],i._frequences=new Uint8Array(i._analyser.frequencyBinCount),i._audio.play(),i._stopped=!1,e()},i.stop=function(){i._audio.pause(),i._stopped=!0}}
//# sourceMappingURL=rythm.min.js.map