function Rythm(){function e(){if(!r._stopped){r._analyser.getByteFrequencyData(r._frequences);for(var n=0;n<r._frequences.length;n++){r._hzHistory[n]||(r._hzHistory[n]=[]),r._hzHistory[n].length>r.maxValueHistory&&r._hzHistory[n].shift(),r._hzHistory[n].push(r._frequences[n]);r._frequences[n]}a("rythm-bass",t(0,10)),a("rythm-medium",t(150,40)),a("rythm-high",t(500,100)),requestAnimationFrame(e)}}function t(e,t){for(var a=0,r=e;r<t+e;r++)a+=n(r);return a/t}function n(e){for(var t=255,n=0,a=0;a<r._hzHistory[e].length;a++)r._hzHistory[e][a]<t&&(t=r._hzHistory[e][a]),r._hzHistory[e][a]>n&&(n=r._hzHistory[e][a]);var i=n-t,o=r._frequences[e]-t,s=o/i;return r.startingScale+r.pulseRatio*s}function a(e,t){for(var n=document.getElementsByClassName(e),a=0;a<n.length;a++)n[a].style.transform="scale("+t+")"}var r=this;r._audioCtx=new AudioContext,r._analyser=r._audioCtx.createAnalyser(),r._gain=r._audioCtx.createGain(),r._source={},r._audio={},r._hzHistory=[],r._analyser.fftSize=2048,r._stopped=!1,r.startingScale=.75,r.pulseRatio=.5,r.maxValueHistory=100,r.setMusic=function(e){r._audio=e,r._source=r._audioCtx.createMediaElementSource(r._audio),r._source.connect(r._gain),r._gain.connect(r._analyser),r._analyser.connect(r._audioCtx.destination)},r.setGain=function(e){r._gain.gain.value=e},r.start=function(){r._hzHistory=[],r._frequences=new Uint8Array(r._analyser.frequencyBinCount),r._audio.play(),r._stopped=!1,e()},r.stop=function(){r._audio.pause(),r._stopped=!0}}
//# sourceMappingURL=rythm.min.js.map