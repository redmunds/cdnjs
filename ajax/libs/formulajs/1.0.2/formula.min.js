!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.Formula=e()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var categories=[require("./lib/compatibility"),require("./lib/database"),require("./lib/engineering"),require("./lib/logical"),require("./lib/math-trig"),require("./lib/text"),require("./lib/date-time"),require("./lib/financial"),require("./lib/information"),require("./lib/lookup-reference"),require("./lib/statistical"),require("./lib/miscellaneous")];for(var c in categories){var category=categories[c];for(var f in category){exports[f]=exports[f]||category[f]}}},{"./lib/compatibility":2,"./lib/database":3,"./lib/date-time":4,"./lib/engineering":5,"./lib/financial":7,"./lib/information":8,"./lib/logical":9,"./lib/lookup-reference":10,"./lib/math-trig":11,"./lib/miscellaneous":12,"./lib/statistical":13,"./lib/text":14}],2:[function(require,module,exports){var mathTrig=require("./math-trig");var statistical=require("./statistical");var engineering=require("./engineering");var dateTime=require("./date-time");function set(fn,root){if(root){for(var i in root){fn[i]=root[i]}}return fn}exports.BETADIST=statistical.BETA.DIST;exports.BETAINV=statistical.BETA.INV;exports.BINOMDIST=statistical.BINOM.DIST;exports.CEILING=exports.ISOCEILING=set(mathTrig.CEILING.MATH,mathTrig.CEILING);exports.CEILINGMATH=mathTrig.CEILING.MATH;exports.CEILINGPRECISE=mathTrig.CEILING.PRECISE;exports.CHIDIST=statistical.CHISQ.DIST;exports.CHIINV=statistical.CHISQ.INV;exports.CHITEST=statistical.CHISQ.TEST;exports.CONFIDENCE=set(statistical.CONFIDENCE.NORM,statistical.CONFIDENCE);exports.COVAR=statistical.COVARIANCE.P;exports.COVARIANCEP=statistical.COVARIANCE.P;exports.COVARIANCES=statistical.COVARIANCE.S;exports.CRITBINOM=statistical.BINOM.INV;exports.EXPONDIST=statistical.EXPON.DIST;exports.ERFCPRECISE=engineering.ERFC.PRECISE;exports.ERFPRECISE=engineering.ERF.PRECISE;exports.FDIST=statistical.F.DIST;exports.FDISTRT=statistical.F.DIST.RT;exports.FINVRT=statistical.F.INV.RT;exports.FINV=statistical.F.INV;exports.FLOOR=set(mathTrig.FLOOR.MATH,mathTrig.FLOOR);exports.FLOORMATH=mathTrig.FLOOR.MATH;exports.FLOORPRECISE=mathTrig.FLOOR.PRECISE;exports.FTEST=statistical.F.TEST;exports.GAMMADIST=statistical.GAMMA.DIST;exports.GAMMAINV=statistical.GAMMA.INV;exports.GAMMALNPRECISE=statistical.GAMMALN.PRECISE;exports.HYPGEOMDIST=statistical.HYPGEOM.DIST;exports.LOGINV=statistical.LOGNORM.INV;exports.LOGNORMINV=statistical.LOGNORM.INV;exports.LOGNORMDIST=statistical.LOGNORM.DIST;exports.MODE=set(statistical.MODE.SNGL,statistical.MODE);exports.MODEMULT=statistical.MODE.MULT;exports.MODESNGL=statistical.MODE.SNGL;exports.NEGBINOMDIST=statistical.NEGBINOM.DIST;exports.NETWORKDAYSINTL=dateTime.NETWORKDAYS.INTL;exports.NORMDIST=statistical.NORM.DIST;exports.NORMINV=statistical.NORM.INV;exports.NORMSDIST=statistical.NORM.S.DIST;exports.NORMSINV=statistical.NORM.S.INV;exports.PERCENTILE=set(statistical.PERCENTILE.EXC,statistical.PERCENTILE);exports.PERCENTILEEXC=statistical.PERCENTILE.EXC;exports.PERCENTILEINC=statistical.PERCENTILE.INC;exports.PERCENTRANK=set(statistical.PERCENTRANK.INC,statistical.PERCENTRANK);exports.PERCENTRANKEXC=statistical.PERCENTRANK.EXC;exports.PERCENTRANKINC=statistical.PERCENTRANK.INC;exports.POISSON=set(statistical.POISSON.DIST,statistical.POISSON);exports.POISSONDIST=statistical.POISSON.DIST;exports.QUARTILE=set(statistical.QUARTILE.INC,statistical.QUARTILE);exports.QUARTILEEXC=statistical.QUARTILE.EXC;exports.QUARTILEINC=statistical.QUARTILE.INC;exports.RANK=set(statistical.RANK.EQ,statistical.RANK);exports.RANKAVG=statistical.RANK.AVG;exports.RANKEQ=statistical.RANK.EQ;exports.SKEWP=statistical.SKEW.P;exports.STDEV=set(statistical.STDEV.S,statistical.STDEV);exports.STDEVP=statistical.STDEV.P;exports.STDEVS=statistical.STDEV.S;exports.TDIST=statistical.T.DIST;exports.TDISTRT=statistical.T.DIST.RT;exports.TINV=statistical.T.INV;exports.TTEST=statistical.T.TEST;exports.VAR=set(statistical.VAR.S,statistical.VAR);exports.VARP=statistical.VAR.P;exports.VARS=statistical.VAR.S;exports.WEIBULL=set(statistical.WEIBULL.DIST,statistical.WEIBULL);exports.WEIBULLDIST=statistical.WEIBULL.DIST;exports.WORKDAYINTL=dateTime.WORKDAY.INTL;exports.ZTEST=statistical.Z.TEST},{"./date-time":4,"./engineering":5,"./math-trig":11,"./statistical":13}],3:[function(require,module,exports){var _=require("lodash");var error=require("./error");var stats=require("./statistical");var maths=require("./math-trig");exports.FINDFIELD=function(database,title){var index=null;for(var i=0;i<database.length;i++){if(database[i][0]===title){index=i;break}}if(index==null){return error.value}return index};exports.FINDRESULTINDEX=function(database,criteria){var maxCriteriaLength=criteria[0].length;for(var i=1;i<criteria.length;i++){if(criteria[i].length>maxCriteriaLength){maxCriteriaLength=criteria[i].length}}var columnResultIndexes=[];for(i=1;i<maxCriteriaLength;i++){var rowResultIndexes=[];for(var j=0;j<criteria.length;j++){if(criteria[j].length<maxCriteriaLength){continue}var criteriaTitle=criteria[j][0];var criteriaIndex=exports.FINDFIELD(database,criteriaTitle);var criteriaValues=_.rest(database[criteriaIndex]);var count=0;var singleResultIndexes=[];for(var k=0;k<criteriaValues.length;k++){if(eval(criteriaValues[k]+criteria[j][i])){singleResultIndexes[count++]=k}}rowResultIndexes[j]=singleResultIndexes}columnResultIndexes[i-1]=_.intersection.apply(_,rowResultIndexes)}var resultIndexes=_.union.apply(_,columnResultIndexes);return resultIndexes};exports.DAVERAGE=function(database,field,criteria){if(isNaN(field)&&typeof field!=="string"){return error.value}var resultIndexes=exports.FINDRESULTINDEX(database,criteria);var targetFields=[];if(typeof field==="string"){var index=exports.FINDFIELD(database,field);targetFields=_.rest(database[index])}else{targetFields=_.rest(database[field])}var sum=0;for(var i=0;i<resultIndexes.length;i++){sum+=targetFields[resultIndexes[i]]}return resultIndexes.length===0?error.div0:sum/resultIndexes.length};exports.DCOUNT=function(database,field,criteria){if(isNaN(field)&&typeof field!=="string"){return error.value}var resultIndexes=exports.FINDRESULTINDEX(database,criteria);var targetFields=[];if(typeof field==="string"){var index=exports.FINDFIELD(database,field);targetFields=_.rest(database[index])}else{targetFields=_.rest(database[field])}var targetValues=[];for(var i=0;i<resultIndexes.length;i++){targetValues[i]=targetFields[resultIndexes[i]]}return stats.COUNT(targetValues)};exports.DCOUNTA=function(database,field,criteria){if(isNaN(field)&&typeof field!=="string"){return error.value}var resultIndexes=exports.FINDRESULTINDEX(database,criteria);var targetFields=[];if(typeof field==="string"){var index=exports.FINDFIELD(database,field);targetFields=_.rest(database[index])}else{targetFields=_.rest(database[field])}var targetValues=[];for(var i=0;i<resultIndexes.length;i++){targetValues[i]=targetFields[resultIndexes[i]]}return stats.COUNTA(targetValues)};exports.DGET=function(database,field,criteria){if(isNaN(field)&&typeof field!=="string"){return error.value}var resultIndexes=exports.FINDRESULTINDEX(database,criteria);var targetFields=[];if(typeof field==="string"){var index=exports.FINDFIELD(database,field);targetFields=_.rest(database[index])}else{targetFields=_.rest(database[field])}if(resultIndexes.length===0){return error.value}if(resultIndexes.length>1){return error.num}return targetFields[resultIndexes[0]]};exports.DMAX=function(database,field,criteria){if(isNaN(field)&&typeof field!=="string"){return error.value}var resultIndexes=exports.FINDRESULTINDEX(database,criteria);var targetFields=[];if(typeof field==="string"){var index=exports.FINDFIELD(database,field);targetFields=_.rest(database[index])}else{targetFields=_.rest(database[field])}var maxValue=targetFields[resultIndexes[0]];for(var i=1;i<resultIndexes.length;i++){if(maxValue<targetFields[resultIndexes[i]]){maxValue=targetFields[resultIndexes[i]]}}return maxValue};exports.DMIN=function(database,field,criteria){if(isNaN(field)&&typeof field!=="string"){return error.value}var resultIndexes=exports.FINDRESULTINDEX(database,criteria);var targetFields=[];if(typeof field==="string"){var index=exports.FINDFIELD(database,field);targetFields=_.rest(database[index])}else{targetFields=_.rest(database[field])}var minValue=targetFields[resultIndexes[0]];for(var i=1;i<resultIndexes.length;i++){if(minValue>targetFields[resultIndexes[i]]){minValue=targetFields[resultIndexes[i]]}}return minValue};exports.DPRODUCT=function(database,field,criteria){if(isNaN(field)&&typeof field!=="string"){return error.value}var resultIndexes=exports.FINDRESULTINDEX(database,criteria);var targetFields=[];if(typeof field==="string"){var index=exports.FINDFIELD(database,field);targetFields=_.rest(database[index])}else{targetFields=_.rest(database[field])}var targetValues=[];for(var i=0;i<resultIndexes.length;i++){targetValues[i]=targetFields[resultIndexes[i]]}targetValues=_.compact(targetValues);var result=1;for(i=0;i<targetValues.length;i++){result*=targetValues[i]}return result};exports.DSTDEV=function(database,field,criteria){if(isNaN(field)&&typeof field!=="string"){return error.value}var resultIndexes=exports.FINDRESULTINDEX(database,criteria);var targetFields=[];if(typeof field==="string"){var index=exports.FINDFIELD(database,field);targetFields=_.rest(database[index])}else{targetFields=_.rest(database[field])}var targetValues=[];for(var i=0;i<resultIndexes.length;i++){targetValues[i]=targetFields[resultIndexes[i]]}targetValues=_.compact(targetValues);return stats.STDEV.S(targetValues)};exports.DSTDEVP=function(database,field,criteria){if(isNaN(field)&&typeof field!=="string"){return error.value}var resultIndexes=exports.FINDRESULTINDEX(database,criteria);var targetFields=[];if(typeof field==="string"){var index=exports.FINDFIELD(database,field);targetFields=_.rest(database[index])}else{targetFields=_.rest(database[field])}var targetValues=[];for(var i=0;i<resultIndexes.length;i++){targetValues[i]=targetFields[resultIndexes[i]]}targetValues=_.compact(targetValues);return stats.STDEV.P(targetValues)};exports.DSUM=function(database,field,criteria){if(isNaN(field)&&typeof field!=="string"){return error.value}var resultIndexes=exports.FINDRESULTINDEX(database,criteria);var targetFields=[];if(typeof field==="string"){var index=exports.FINDFIELD(database,field);targetFields=_.rest(database[index])}else{targetFields=_.rest(database[field])}var targetValues=[];for(var i=0;i<resultIndexes.length;i++){targetValues[i]=targetFields[resultIndexes[i]]}return maths.SUM(targetValues)};exports.DVAR=function(database,field,criteria){if(isNaN(field)&&typeof field!=="string"){return error.value}var resultIndexes=exports.FINDRESULTINDEX(database,criteria);var targetFields=[];if(typeof field==="string"){var index=exports.FINDFIELD(database,field);targetFields=_.rest(database[index])}else{targetFields=_.rest(database[field])}var targetValues=[];for(var i=0;i<resultIndexes.length;i++){targetValues[i]=targetFields[resultIndexes[i]]}return stats.VAR.S(targetValues)};exports.DVARP=function(database,field,criteria){if(isNaN(field)&&typeof field!=="string"){return error.value}var resultIndexes=exports.FINDRESULTINDEX(database,criteria);var targetFields=[];if(typeof field==="string"){var index=exports.FINDFIELD(database,field);targetFields=_.rest(database[index])}else{targetFields=_.rest(database[field])}var targetValues=[];for(var i=0;i<resultIndexes.length;i++){targetValues[i]=targetFields[resultIndexes[i]]}return stats.VAR.P(targetValues)}},{"./error":6,"./math-trig":11,"./statistical":13,lodash:19}],4:[function(require,module,exports){var moment=require("moment");var error=require("./error");var utils=require("./utils");var d1900=new Date(1900,0,1);var WEEK_STARTS=[undefined,0,1,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,1,2,3,4,5,6,0];var WEEK_TYPES=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]];var WEEKEND_TYPES=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],undefined,undefined,undefined,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];exports.DATE=function(year,month,day){year=utils.parseNumber(year);month=utils.parseNumber(month);day=utils.parseNumber(day);if(utils.anyIsError(year,month,day)){return error.value}if(year<0||month<0||day<0){return error.num}var date=new Date(year,month-1,day);return date};exports.DATEVALUE=function(date_text){if(typeof date_text!=="string"){return error.value}var date=Date.parse(date_text);if(isNaN(date)){return error.value}if(date<=-22038912e5){return(date-d1900)/864e5+1}return(date-d1900)/864e5+2};exports.DAY=function(serial_number){var date=utils.parseDate(serial_number);if(date instanceof Error){return date}return date.getDate()};exports.DAYS=function(end_date,start_date){end_date=utils.parseDate(end_date);start_date=utils.parseDate(start_date);if(end_date instanceof Error){return end_date}if(start_date instanceof Error){return start_date}return serial(end_date)-serial(start_date)};exports.DAYS360=function(start_date,end_date,method){method=utils.parseBool(method);start_date=utils.parseDate(start_date);end_date=utils.parseDate(end_date);if(start_date instanceof Error){return start_date}if(end_date instanceof Error){return end_date}if(method instanceof Error){return method}var sm=start_date.getMonth();var em=end_date.getMonth();var sd,ed;if(method){sd=start_date.getDate()===31?30:start_date.getDate();ed=end_date.getDate()===31?30:end_date.getDate()}else{var smd=new Date(start_date.getFullYear(),sm+1,0).getDate();var emd=new Date(end_date.getFullYear(),em+1,0).getDate();sd=start_date.getDate()===smd?30:start_date.getDate();if(end_date.getDate()==emd){if(sd<30){em++;ed=1}else{ed=30}}else{ed=end_date.getDate()}}return 360*(end_date.getFullYear()-start_date.getFullYear())+30*(em-sm)+(ed-sd)};exports.EDATE=function(start_date,months){start_date=utils.parseDate(start_date);if(start_date instanceof Error){return start_date}if(isNaN(months)){return error.value}months=parseInt(months,10);start_date.setMonth(start_date.getMonth()+months);return serial(start_date)};exports.EOMONTH=function(start_date,months){start_date=utils.parseDate(start_date);if(start_date instanceof Error){return start_date}if(isNaN(months)){return error.value}months=parseInt(months,10);return serial(new Date(start_date.getFullYear(),start_date.getMonth()+months+1,0))};exports.HOUR=function(serial_number){serial_number=utils.parseDate(serial_number);if(serial_number instanceof Error){return serial_number}return serial_number.getHours()};exports.ISOWEEKNUM=function(date){date=utils.parseDate(date);if(date instanceof Error){return date}date.setHours(0,0,0);date.setDate(date.getDate()+4-(date.getDay()||7));var yearStart=new Date(date.getFullYear(),0,1);return Math.ceil(((date-yearStart)/864e5+1)/7)};exports.MINUTE=function(serial_number){serial_number=utils.parseDate(serial_number);if(serial_number instanceof Error){return serial_number}return serial_number.getMinutes()};exports.MONTH=function(serial_number){serial_number=utils.parseDate(serial_number);if(serial_number instanceof Error){return serial_number}return serial_number.getMonth()+1};exports.NETWORKDAYS=function(start_date,end_date,holidays){return this.NETWORKDAYS.INTL(start_date,end_date,1,holidays)};exports.NETWORKDAYS.INTL=function(start_date,end_date,weekend,holidays){start_date=utils.parseDate(start_date);if(start_date instanceof Error){return start_date}end_date=utils.parseDate(end_date);if(end_date instanceof Error){return end_date}if(weekend===undefined){weekend=WEEKEND_TYPES[1]}else{weekend=WEEKEND_TYPES[weekend]}if(!(weekend instanceof Array)){return error.value}if(holidays===undefined){holidays=[]}else if(!(holidays instanceof Array)){holidays=[holidays]}for(var i=0;i<holidays.length;i++){var h=utils.parseDate(holidays[i]);if(h instanceof Error){return h}holidays[i]=h}var days=(end_date-start_date)/(1e3*60*60*24);var total=days;var day=start_date;for(i=0;i<days;i++){var d=day.getDay();var dec=false;if(d===weekend[0]||d===weekend[1]){dec=true}for(var j=0;j<holidays.length;j++){var holiday=holidays[j];if(holiday.getDate()==day.getDate()&&holiday.getMonth()==day.getMonth()&&holiday.getFullYear()==day.getFullYear()){dec=true;break}}if(dec){total--}day.setDate(day.getDate()+1)}return total};exports.NOW=function(){return new Date};exports.SECOND=function(serial_number){serial_number=utils.parseDate(serial_number);if(serial_number instanceof Error){return serial_number}return serial_number.getSeconds()};exports.TIME=function(hour,minute,second){hour=utils.parseNumber(hour);minute=utils.parseNumber(minute);second=utils.parseNumber(second);if(utils.anyIsError(hour,minute,second)){return error.value}if(hour<0||minute<0||second<0){return error.num}return(3600*hour+60*minute+second)/86400};exports.TIMEVALUE=function(time_text){time_text=utils.parseDate(time_text);if(time_text instanceof Error){return time_text}return(3600*time_text.getHours()+60*time_text.getMinutes()+time_text.getSeconds())/86400};exports.TODAY=function(){return new Date};exports.WEEKDAY=function(serial_number,return_type){serial_number=utils.parseDate(serial_number);if(serial_number instanceof Error){return serial_number}if(return_type===undefined){return_type=1}var day=serial_number.getDay();return WEEK_TYPES[return_type][day]};exports.WEEKNUM=function(serial_number,return_type){serial_number=utils.parseDate(serial_number);if(serial_number instanceof Error){return serial_number}if(return_type===undefined){return_type=1}if(return_type===21){return this.ISOWEEKNUM(serial_number)}var week_start=WEEK_STARTS[return_type];var jan=new Date(serial_number.getFullYear(),0,1);var inc=jan.getDay()<week_start?1:0;jan-=Math.abs(jan.getDay()-week_start)*24*60*60*1e3;return Math.floor((serial_number-jan)/(1e3*60*60*24)/7+1)+inc};exports.WORKDAY=function(start_date,days,holidays){return this.WORKDAY.INTL(start_date,days,1,holidays)};exports.WORKDAY.INTL=function(start_date,days,weekend,holidays){start_date=utils.parseDate(start_date);if(start_date instanceof Error){return start_date}days=utils.parseNumber(days);if(days instanceof Error){return days}if(days<0){return error.num}if(weekend===undefined){weekend=WEEKEND_TYPES[1]}else{weekend=WEEKEND_TYPES[weekend]}if(!(weekend instanceof Array)){return error.value}if(holidays===undefined){holidays=[]}else if(!(holidays instanceof Array)){holidays=[holidays]}for(var i=0;i<holidays.length;i++){var h=utils.parseDate(holidays[i]);if(h instanceof Error){return h}holidays[i]=h}var d=0;while(d<days){start_date.setDate(start_date.getDate()+1);var day=start_date.getDay();var inc=true;if(day===weekend[0]||day===weekend[1]){continue}for(var j=0;j<holidays.length;j++){var holiday=holidays[j];if(holiday.getDate()==start_date.getDate()&&holiday.getMonth()==start_date.getMonth()&&holiday.getFullYear()==start_date.getFullYear()){d--;break}}d++}return start_date};exports.YEAR=function(serial_number){serial_number=utils.parseDate(serial_number);if(serial_number instanceof Error){return serial_number}return serial_number.getFullYear()};exports.YEARFRAC=function(start_date,end_date,basis){start_date=utils.parseDate(start_date);if(start_date instanceof Error){return start_date}end_date=utils.parseDate(end_date);if(end_date instanceof Error){return end_date}if(basis===undefined){basis=0}var sd=start_date.getDate();var sm=start_date.getMonth()+1;var sy=start_date.getFullYear();var ed=end_date.getDate();var em=end_date.getMonth()+1;var ey=end_date.getFullYear();switch(basis){case 0:if(sd===31&&ed===31){sd=30;ed=30}else if(sd===31){sd=30}else if(sd===30&&ed===31){ed=30}return(ed+em*30+ey*360-(sd+sm*30+sy*360))/360;case 1:var feb29Between=function(date1,date2){var mar1year1=new Date(date1.getFullYear(),2,1);if(new Date(date1.getFullYear(),1,29).getMonth()==1&&date1-mar1year1<0&&date2-mar1year1>=0){return true}var mar1year2=new Date(date2.getFullYear(),2,1);if(new Date(date2.getFullYear(),1,29).getMonth()==1&&date2-mar1year2>=0&&date1-mar1year2<0){return true}return false};var ylength=365;if(sy===ey||sy+1===ey&&(sm>em||sm===em&&sd>=ed)){if(sy===ey&&new Date(sy,1,29).getMonth()==1){ylength=366}else if(feb29Between(start_date,end_date)||em===1&&ed===29){ylength=366}return(end_date-start_date)/1e3/60/60/24/ylength}var years=ey-sy+1;var days=(new Date(ey+1,0,1)-new Date(sy,0,1))/1e3/60/60/24;var average=days/years;return(end_date-start_date)/1e3/60/60/24/average;case 2:return(end_date-start_date)/1e3/60/60/24/360;case 3:return(end_date-start_date)/1e3/60/60/24/365;case 4:return(ed+em*30+ey*360-(sd+sm*30+sy*360))/360}};exports.FROMNOW=function(timestamp,nosuffix){return moment(new Date(timestamp)).fromNow(nosuffix)};exports.MOMENT=function(timestamp,format){return moment(timestamp).format(format)};exports.MOMENTADD=function(start_date,period,number){return moment(start_date).add(period,number)};exports.MOMENTDIFF=function(start_date,end_date,period){return moment(end_date).diff(moment.utc(start_date),period)};exports.MOMENTSUB=function(start_date,period,number){return moment(start_date).subtract(period,number)};exports.MOMENTUTC=function(timestamp,format){return moment.utc(timestamp).format(format)};exports.MOMENTUTCADD=function(start_date,period,number){return moment.utc(start_date).add(period,number)};exports.MOMENTUTCDIFF=function(start_date,end_date,period){return moment.utc(end_date).diff(moment.utc(start_date),period)};exports.MOMENTUTCSUB=function(start_date,period,number){return moment.utc(start_date).subtract(period,number)};exports.MOMENTUNIX=function(unixTime){return moment.unix(unixTime).toDate()};exports.MOMENTFORMAT=function(date,format){return moment(date).format(format)};exports.MOMENTISLEAPYEAR=function(date,format){return moment(date,format).isLeapYear()};exports.MOMENTISDST=function(date,format){return moment(date,format).isDST()};exports.MOMENTSTARTOF=function(date,units,format){return moment(date,format).startOf(units).toDate()};exports.MOMENTENDOF=function(date,units,format){return moment(date,format).endOf(units).toDate()};exports.MOMENTISAFTER=function(date1,date2,format){return moment(date1,format).isAfter(moment(date2,format))};exports.MOMENTISBEFORE=function(date1,date2,format){return moment(date1,format).isBefore(moment(date2,format))};exports.INTERVAL=function(second){var year=Math.floor(second/94608e4);second=second%94608e4;var month=Math.floor(second/2592e3);second=second%2592e3;var day=Math.floor(second/86400);second=second%86400;var hour=Math.floor(second/3600);second=second%3600;var min=Math.floor(second/60);second=second%60;var sec=second;year=year>0?year+"Y":"";month=month>0?month+"M":"";day=day>0?day+"D":"";hour=hour>0?hour+"H":"";min=min>0?min+"M":"";sec=sec>0?sec+"S":"";return"P"+year+month+day+"T"+hour+min+sec};function serial(date){if(date<=-22038912e5){return(date-d1900)/864e5+1}return(date-d1900)/864e5+2}},{"./error":6,"./utils":15,moment:20}],5:[function(require,module,exports){var error=require("./error");var jStat=require("jStat").jStat;var text=require("./text");var utils=require("./utils");var bessel=require("bessel");function isValidBinaryNumber(number){return/^[01]{1,10}$/.test(number)}exports.BESSELI=function(x,n){x=utils.parseNumber(x);n=utils.parseNumber(n);if(utils.anyIsError(x,n)){return error.value}return bessel.besseli(x,n)};exports.BESSELJ=function(x,n){x=utils.parseNumber(x);n=utils.parseNumber(n);if(utils.anyIsError(x,n)){return error.value}return bessel.besselj(x,n)};exports.BESSELK=function(x,n){x=utils.parseNumber(x);n=utils.parseNumber(n);if(utils.anyIsError(x,n)){return error.value}return bessel.besselk(x,n)};exports.BESSELY=function(x,n){x=utils.parseNumber(x);n=utils.parseNumber(n);if(utils.anyIsError(x,n)){return error.value}return bessel.bessely(x,n)};exports.BIN2DEC=function(number){if(!isValidBinaryNumber(number)){return error.num}var result=parseInt(number,2);var stringified=number.toString();if(stringified.length===10&&stringified.substring(0,1)==="1"){return parseInt(stringified.substring(1),2)-512}else{return result}};exports.BIN2HEX=function(number,places){if(!isValidBinaryNumber(number)){return error.num}var stringified=number.toString();if(stringified.length===10&&stringified.substring(0,1)==="1"){return(0xfffffffe00+parseInt(stringified.substring(1),2)).toString(16)}var result=parseInt(number,2).toString(16);if(places===undefined){return result}else{if(isNaN(places)){return error.value}if(places<0){return error.num}places=Math.floor(places);return places>=result.length?text.REPT("0",places-result.length)+result:error.num}};exports.BIN2OCT=function(number,places){if(!isValidBinaryNumber(number)){return error.num}var stringified=number.toString();if(stringified.length===10&&stringified.substring(0,1)==="1"){return(1073741312+parseInt(stringified.substring(1),2)).toString(8)}var result=parseInt(number,2).toString(8);if(places===undefined){return result}else{if(isNaN(places)){return error.value}if(places<0){return error.num}places=Math.floor(places);return places>=result.length?text.REPT("0",places-result.length)+result:error.num}};exports.BITAND=function(number1,number2){number1=utils.parseNumber(number1);number2=utils.parseNumber(number2);if(utils.anyIsError(number1,number2)){return error.value}if(number1<0||number2<0){return error.num}if(Math.floor(number1)!==number1||Math.floor(number2)!==number2){return error.num}if(number1>0xffffffffffff||number2>0xffffffffffff){return error.num}return number1&number2};exports.BITLSHIFT=function(number,shift){number=utils.parseNumber(number);shift=utils.parseNumber(shift);if(utils.anyIsError(number,shift)){return error.value}if(number<0){return error.num}if(Math.floor(number)!==number){return error.num}if(number>0xffffffffffff){return error.num}if(Math.abs(shift)>53){return error.num}return shift>=0?number<<shift:number>>-shift};exports.BITOR=function(number1,number2){number1=utils.parseNumber(number1);number2=utils.parseNumber(number2);if(utils.anyIsError(number1,number2)){return error.value}if(number1<0||number2<0){return error.num}if(Math.floor(number1)!==number1||Math.floor(number2)!==number2){return error.num}if(number1>0xffffffffffff||number2>0xffffffffffff){return error.num}return number1|number2};exports.BITRSHIFT=function(number,shift){number=utils.parseNumber(number);shift=utils.parseNumber(shift);if(utils.anyIsError(number,shift)){return error.value}if(number<0){return error.num}if(Math.floor(number)!==number){return error.num}if(number>0xffffffffffff){return error.num}if(Math.abs(shift)>53){return error.num}return shift>=0?number>>shift:number<<-shift};exports.BITXOR=function(number1,number2){number1=utils.parseNumber(number1);number2=utils.parseNumber(number2);if(utils.anyIsError(number1,number2)){return error.value}if(number1<0||number2<0){return error.num}if(Math.floor(number1)!==number1||Math.floor(number2)!==number2){return error.num}if(number1>0xffffffffffff||number2>0xffffffffffff){return error.num}return number1^number2};exports.COMPLEX=function(real,imaginary,suffix){real=utils.parseNumber(real);imaginary=utils.parseNumber(imaginary);if(utils.anyIsError(real,imaginary)){return real}suffix=suffix===undefined?"i":suffix;if(suffix!=="i"&&suffix!=="j"){return error.value}if(real===0&&imaginary===0){return 0}else if(real===0){return imaginary===1?suffix:imaginary.toString()+suffix}else if(imaginary===0){return real.toString()}else{var sign=imaginary>0?"+":"";return real.toString()+sign+(imaginary===1?suffix:imaginary.toString()+suffix)}};exports.CONVERT=function(number,from_unit,to_unit){number=utils.parseNumber(number);if(number instanceof Error){return number}var units=[["a.u. of action","?",null,"action",false,false,1.05457168181818e-34],["a.u. of charge","e",null,"electric_charge",false,false,1.60217653141414e-19],["a.u. of energy","Eh",null,"energy",false,false,4.35974417757576e-18],["a.u. of length","a?",null,"length",false,false,5.29177210818182e-11],["a.u. of mass","m?",null,"mass",false,false,9.10938261616162e-31],["a.u. of time","?/Eh",null,"time",false,false,2.41888432650516e-17],["admiralty knot","admkn",null,"speed",false,true,.514773333],["ampere","A",null,"electric_current",true,false,1],["ampere per meter","A/m",null,"magnetic_field_intensity",true,false,1],["ångström","Å",["ang"],"length",false,true,1e-10],["are","ar",null,"area",false,true,100],["astronomical unit","ua",null,"length",false,false,1.49597870691667e-11],["bar","bar",null,"pressure",false,false,1e5],["barn","b",null,"area",false,false,1e-28],["becquerel","Bq",null,"radioactivity",true,false,1],["bit","bit",["b"],"information",false,true,1],["btu","BTU",["btu"],"energy",false,true,1055.05585262],["byte","byte",null,"information",false,true,8],["candela","cd",null,"luminous_intensity",true,false,1],["candela per square metre","cd/m?",null,"luminance",true,false,1],["coulomb","C",null,"electric_charge",true,false,1],["cubic ångström","ang3",["ang^3"],"volume",false,true,1e-30],["cubic foot","ft3",["ft^3"],"volume",false,true,.028316846592],["cubic inch","in3",["in^3"],"volume",false,true,16387064e-12],["cubic light-year","ly3",["ly^3"],"volume",false,true,8.46786664623715e-47],["cubic metre","m?",null,"volume",true,true,1],["cubic mile","mi3",["mi^3"],"volume",false,true,4168181825.44058],["cubic nautical mile","Nmi3",["Nmi^3"],"volume",false,true,6352182208],["cubic Pica","Pica3",["Picapt3","Pica^3","Picapt^3"],"volume",false,true,7.58660370370369e-8],["cubic yard","yd3",["yd^3"],"volume",false,true,.764554857984],["cup","cup",null,"volume",false,true,.0002365882365],["dalton","Da",["u"],"mass",false,false,1.66053886282828e-27],["day","d",["day"],"time",false,true,86400],["degree","°",null,"angle",false,false,.0174532925199433],["degrees Rankine","Rank",null,"temperature",false,true,.555555555555556],["dyne","dyn",["dy"],"force",false,true,1e-5],["electronvolt","eV",["ev"],"energy",false,true,1.60217656514141],["ell","ell",null,"length",false,true,1.143],["erg","erg",["e"],"energy",false,true,1e-7],["farad","F",null,"electric_capacitance",true,false,1],["fluid ounce","oz",null,"volume",false,true,295735295625e-16],["foot","ft",null,"length",false,true,.3048],["foot-pound","flb",null,"energy",false,true,1.3558179483314],["gal","Gal",null,"acceleration",false,false,.01],["gallon","gal",null,"volume",false,true,.003785411784],["gauss","G",["ga"],"magnetic_flux_density",false,true,1],["grain","grain",null,"mass",false,true,647989e-10],["gram","g",null,"mass",false,true,.001],["gray","Gy",null,"absorbed_dose",true,false,1],["gross registered ton","GRT",["regton"],"volume",false,true,2.8316846592],["hectare","ha",null,"area",false,true,1e4],["henry","H",null,"inductance",true,false,1],["hertz","Hz",null,"frequency",true,false,1],["horsepower","HP",["h"],"power",false,true,745.69987158227],["horsepower-hour","HPh",["hh","hph"],"energy",false,true,2684519.538],["hour","h",["hr"],"time",false,true,3600],["imperial gallon (U.K.)","uk_gal",null,"volume",false,true,.00454609],["imperial hundredweight","lcwt",["uk_cwt","hweight"],"mass",false,true,50.802345],["imperial quart (U.K)","uk_qt",null,"volume",false,true,.0011365225],["imperial ton","brton",["uk_ton","LTON"],"mass",false,true,1016.046909],["inch","in",null,"length",false,true,.0254],["international acre","uk_acre",null,"area",false,true,4046.8564224],["IT calorie","cal",null,"energy",false,true,4.1868],["joule","J",null,"energy",true,true,1],["katal","kat",null,"catalytic_activity",true,false,1],["kelvin","K",["kel"],"temperature",true,true,1],["kilogram","kg",null,"mass",true,true,1],["knot","kn",null,"speed",false,true,.514444444444444],["light-year","ly",null,"length",false,true,9460730472580800],["litre","L",["l","lt"],"volume",false,true,.001],["lumen","lm",null,"luminous_flux",true,false,1],["lux","lx",null,"illuminance",true,false,1],["maxwell","Mx",null,"magnetic_flux",false,false,1e-18],["measurement ton","MTON",null,"volume",false,true,1.13267386368],["meter per hour","m/h",["m/hr"],"speed",false,true,.00027777777777778],["meter per second","m/s",["m/sec"],"speed",true,true,1],["meter per second squared","m?s??",null,"acceleration",true,false,1],["parsec","pc",["parsec"],"length",false,true,0x6da012f958ee1c],["meter squared per second","m?/s",null,"kinematic_viscosity",true,false,1],["metre","m",null,"length",true,true,1],["miles per hour","mph",null,"speed",false,true,.44704],["millimetre of mercury","mmHg",null,"pressure",false,false,133.322],["minute","?",null,"angle",false,false,.000290888208665722],["minute","min",["mn"],"time",false,true,60],["modern teaspoon","tspm",null,"volume",false,true,5e-6],["mole","mol",null,"amount_of_substance",true,false,1],["morgen","Morgen",null,"area",false,true,2500],["n.u. of action","?",null,"action",false,false,1.05457168181818e-34],["n.u. of mass","m?",null,"mass",false,false,9.10938261616162e-31],["n.u. of speed","c?",null,"speed",false,false,299792458],["n.u. of time","?/(me?c??)",null,"time",false,false,1.28808866778687e-21],["nautical mile","M",["Nmi"],"length",false,true,1852],["newton","N",null,"force",true,true,1],["œrsted","Oe ",null,"magnetic_field_intensity",false,false,79.5774715459477],["ohm","Ω",null,"electric_resistance",true,false,1],["ounce mass","ozm",null,"mass",false,true,.028349523125],["pascal","Pa",null,"pressure",true,false,1],["pascal second","Pa?s",null,"dynamic_viscosity",true,false,1],["pferdestärke","PS",null,"power",false,true,735.49875],["phot","ph",null,"illuminance",false,false,1e-4],["pica (1/6 inch)","pica",null,"length",false,true,.00035277777777778],["pica (1/72 inch)","Pica",["Picapt"],"length",false,true,.00423333333333333],["poise","P",null,"dynamic_viscosity",false,false,.1],["pond","pond",null,"force",false,true,.00980665],["pound force","lbf",null,"force",false,true,4.4482216152605],["pound mass","lbm",null,"mass",false,true,.45359237],["quart","qt",null,"volume",false,true,.000946352946],["radian","rad",null,"angle",true,false,1],["second","?",null,"angle",false,false,484813681109536e-20],["second","s",["sec"],"time",true,true,1],["short hundredweight","cwt",["shweight"],"mass",false,true,45.359237],["siemens","S",null,"electrical_conductance",true,false,1],["sievert","Sv",null,"equivalent_dose",true,false,1],["slug","sg",null,"mass",false,true,14.59390294],["square ångström","ang2",["ang^2"],"area",false,true,1e-20],["square foot","ft2",["ft^2"],"area",false,true,.09290304],["square inch","in2",["in^2"],"area",false,true,64516e-8],["square light-year","ly2",["ly^2"],"area",false,true,8.95054210748189e31],["square meter","m?",null,"area",true,true,1],["square mile","mi2",["mi^2"],"area",false,true,2589988.110336],["square nautical mile","Nmi2",["Nmi^2"],"area",false,true,3429904],["square Pica","Pica2",["Picapt2","Pica^2","Picapt^2"],"area",false,true,1792111111111e-17],["square yard","yd2",["yd^2"],"area",false,true,.83612736],["statute mile","mi",null,"length",false,true,1609.344],["steradian","sr",null,"solid_angle",true,false,1],["stilb","sb",null,"luminance",false,false,1e-4],["stokes","St",null,"kinematic_viscosity",false,false,1e-4],["stone","stone",null,"mass",false,true,6.35029318],["tablespoon","tbs",null,"volume",false,true,147868e-10],["teaspoon","tsp",null,"volume",false,true,492892e-11],["tesla","T",null,"magnetic_flux_density",true,true,1],["thermodynamic calorie","c",null,"energy",false,true,4.184],["ton","ton",null,"mass",false,true,907.18474],["tonne","t",null,"mass",false,false,1e3],["U.K. pint","uk_pt",null,"volume",false,true,.00056826125],["U.S. bushel","bushel",null,"volume",false,true,.03523907],["U.S. oil barrel","barrel",null,"volume",false,true,.158987295],["U.S. pint","pt",["us_pt"],"volume",false,true,.000473176473],["U.S. survey mile","survey_mi",null,"length",false,true,1609.347219],["U.S. survey/statute acre","us_acre",null,"area",false,true,4046.87261],["volt","V",null,"voltage",true,false,1],["watt","W",null,"power",true,true,1],["watt-hour","Wh",["wh"],"energy",false,true,3600],["weber","Wb",null,"magnetic_flux",true,false,1],["yard","yd",null,"length",false,true,.9144],["year","yr",null,"time",false,true,31557600]];
var binary_prefixes={Yi:["yobi",80,1.2089258196146292e24,"Yi","yotta"],Zi:["zebi",70,0x400000000000000000,"Zi","zetta"],Ei:["exbi",60,0x1000000000000000,"Ei","exa"],Pi:["pebi",50,0x4000000000000,"Pi","peta"],Ti:["tebi",40,1099511627776,"Ti","tera"],Gi:["gibi",30,1073741824,"Gi","giga"],Mi:["mebi",20,1048576,"Mi","mega"],ki:["kibi",10,1024,"ki","kilo"]};var unit_prefixes={Y:["yotta",1e24,"Y"],Z:["zetta",1e21,"Z"],E:["exa",1e18,"E"],P:["peta",1e15,"P"],T:["tera",1e12,"T"],G:["giga",1e9,"G"],M:["mega",1e6,"M"],k:["kilo",1e3,"k"],h:["hecto",100,"h"],e:["dekao",10,"e"],d:["deci",.1,"d"],c:["centi",.01,"c"],m:["milli",.001,"m"],u:["micro",1e-6,"u"],n:["nano",1e-9,"n"],p:["pico",1e-12,"p"],f:["femto",1e-15,"f"],a:["atto",1e-18,"a"],z:["zepto",1e-21,"z"],y:["yocto",1e-24,"y"]};var from=null;var to=null;var base_from_unit=from_unit;var base_to_unit=to_unit;var from_multiplier=1;var to_multiplier=1;var alt;for(var i=0;i<units.length;i++){alt=units[i][2]===null?[]:units[i][2];if(units[i][1]===base_from_unit||alt.indexOf(base_from_unit)>=0){from=units[i]}if(units[i][1]===base_to_unit||alt.indexOf(base_to_unit)>=0){to=units[i]}}if(from===null){var from_binary_prefix=binary_prefixes[from_unit.substring(0,2)];var from_unit_prefix=unit_prefixes[from_unit.substring(0,1)];if(from_unit.substring(0,2)==="da"){from_unit_prefix=["dekao",10,"da"]}if(from_binary_prefix){from_multiplier=from_binary_prefix[2];base_from_unit=from_unit.substring(2)}else if(from_unit_prefix){from_multiplier=from_unit_prefix[1];base_from_unit=from_unit.substring(from_unit_prefix[2].length)}for(var j=0;j<units.length;j++){alt=units[j][2]===null?[]:units[j][2];if(units[j][1]===base_from_unit||alt.indexOf(base_from_unit)>=0){from=units[j]}}}if(to===null){var to_binary_prefix=binary_prefixes[to_unit.substring(0,2)];var to_unit_prefix=unit_prefixes[to_unit.substring(0,1)];if(to_unit.substring(0,2)==="da"){to_unit_prefix=["dekao",10,"da"]}if(to_binary_prefix){to_multiplier=to_binary_prefix[2];base_to_unit=to_unit.substring(2)}else if(to_unit_prefix){to_multiplier=to_unit_prefix[1];base_to_unit=to_unit.substring(to_unit_prefix[2].length)}for(var k=0;k<units.length;k++){alt=units[k][2]===null?[]:units[k][2];if(units[k][1]===base_to_unit||alt.indexOf(base_to_unit)>=0){to=units[k]}}}if(from===null||to===null){return error.na}if(from[3]!==to[3]){return error.na}return number*from[6]*from_multiplier/(to[6]*to_multiplier)};exports.DEC2BIN=function(number,places){number=utils.parseNumber(number);if(number instanceof Error){return number}if(!/^-?[0-9]{1,3}$/.test(number)||number<-512||number>511){return error.num}if(number<0){return"1"+text.REPT("0",9-(512+number).toString(2).length)+(512+number).toString(2)}var result=parseInt(number,10).toString(2);if(typeof places==="undefined"){return result}else{if(isNaN(places)){return error.value}if(places<0){return error.num}places=Math.floor(places);return places>=result.length?text.REPT("0",places-result.length)+result:error.num}};exports.DEC2HEX=function(number,places){number=utils.parseNumber(number);if(number instanceof Error){return number}if(!/^-?[0-9]{1,12}$/.test(number)||number<-549755813888||number>549755813887){return error.num}if(number<0){return(1099511627776+number).toString(16)}var result=parseInt(number,10).toString(16);if(typeof places==="undefined"){return result}else{if(isNaN(places)){return error.value}if(places<0){return error.num}places=Math.floor(places);return places>=result.length?text.REPT("0",places-result.length)+result:error.num}};exports.DEC2OCT=function(number,places){number=utils.parseNumber(number);if(number instanceof Error){return number}if(!/^-?[0-9]{1,9}$/.test(number)||number<-536870912||number>536870911){return error.num}if(number<0){return(1073741824+number).toString(8)}var result=parseInt(number,10).toString(8);if(typeof places==="undefined"){return result}else{if(isNaN(places)){return error.value}if(places<0){return error.num}places=Math.floor(places);return places>=result.length?text.REPT("0",places-result.length)+result:error.num}};exports.DELTA=function(number1,number2){number2=number2===undefined?0:number2;number1=utils.parseNumber(number1);number2=utils.parseNumber(number2);if(utils.anyIsError(number1,number2)){return error.value}return number1===number2?1:0};exports.ERF=function(lower_bound,upper_bound){upper_bound=upper_bound===undefined?0:upper_bound;lower_bound=utils.parseNumber(lower_bound);upper_bound=utils.parseNumber(upper_bound);if(utils.anyIsError(lower_bound,upper_bound)){return error.value}return jStat.erf(lower_bound)};exports.ERF.PRECISE=function(){throw new Error("ERF.PRECISE is not implemented")};exports.ERFC=function(x){if(isNaN(x)){return error.value}return jStat.erfc(x)};exports.ERFC.PRECISE=function(){throw new Error("ERFC.PRECISE is not implemented")};exports.GESTEP=function(number,step){step=step||0;number=utils.parseNumber(number);if(utils.anyIsError(step,number)){return number}return number>=step?1:0};exports.HEX2BIN=function(number,places){if(!/^[0-9A-Fa-f]{1,10}$/.test(number)){return error.num}var negative=number.length===10&&number.substring(0,1).toLowerCase()==="f"?true:false;var decimal=negative?parseInt(number,16)-1099511627776:parseInt(number,16);if(decimal<-512||decimal>511){return error.num}if(negative){return"1"+text.REPT("0",9-(512+decimal).toString(2).length)+(512+decimal).toString(2)}var result=decimal.toString(2);if(places===undefined){return result}else{if(isNaN(places)){return error.value}if(places<0){return error.num}places=Math.floor(places);return places>=result.length?text.REPT("0",places-result.length)+result:error.num}};exports.HEX2DEC=function(number){if(!/^[0-9A-Fa-f]{1,10}$/.test(number)){return error.num}var decimal=parseInt(number,16);return decimal>=549755813888?decimal-1099511627776:decimal};exports.HEX2OCT=function(number,places){if(!/^[0-9A-Fa-f]{1,10}$/.test(number)){return error.num}var decimal=parseInt(number,16);if(decimal>536870911&&decimal<0xffe0000000){return error.num}if(decimal>=0xffe0000000){return(decimal-0xffc0000000).toString(8)}var result=decimal.toString(8);if(places===undefined){return result}else{if(isNaN(places)){return error.value}if(places<0){return error.num}places=Math.floor(places);return places>=result.length?text.REPT("0",places-result.length)+result:error.num}};exports.IMABS=function(inumber){var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.value}return Math.sqrt(Math.pow(x,2)+Math.pow(y,2))};exports.IMAGINARY=function(inumber){if(inumber===undefined||inumber===true||inumber===false){return error.value}if(inumber===0||inumber==="0"){return 0}if(["i","j"].indexOf(inumber)>=0){return 1}inumber=inumber.replace("+i","+1i").replace("-i","-1i").replace("+j","+1j").replace("-j","-1j");var plus=inumber.indexOf("+");var minus=inumber.indexOf("-");if(plus===0){plus=inumber.indexOf("+",1)}if(minus===0){minus=inumber.indexOf("-",1)}var last=inumber.substring(inumber.length-1,inumber.length);var unit=last==="i"||last==="j";if(plus>=0||minus>=0){if(!unit){return error.num}if(plus>=0){return isNaN(inumber.substring(0,plus))||isNaN(inumber.substring(plus+1,inumber.length-1))?error.num:Number(inumber.substring(plus+1,inumber.length-1))}else{return isNaN(inumber.substring(0,minus))||isNaN(inumber.substring(minus+1,inumber.length-1))?error.num:-Number(inumber.substring(minus+1,inumber.length-1))}}else{if(unit){return isNaN(inumber.substring(0,inumber.length-1))?error.num:inumber.substring(0,inumber.length-1)}else{return isNaN(inumber)?error.num:0}}};exports.IMARGUMENT=function(inumber){var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.value}if(x===0&&y===0){return error.div0}if(x===0&&y>0){return Math.PI/2}if(x===0&&y<0){return-Math.PI/2}if(y===0&&x>0){return 0}if(y===0&&x<0){return-Math.PI}if(x>0){return Math.atan(y/x)}else if(x<0&&y>=0){return Math.atan(y/x)+Math.PI}else{return Math.atan(y/x)-Math.PI}};exports.IMCONJUGATE=function(inumber){var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.value}var unit=inumber.substring(inumber.length-1);unit=unit==="i"||unit==="j"?unit:"i";return y!==0?exports.COMPLEX(x,-y,unit):inumber};exports.IMCOS=function(inumber){var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.value}var unit=inumber.substring(inumber.length-1);unit=unit==="i"||unit==="j"?unit:"i";return exports.COMPLEX(Math.cos(x)*(Math.exp(y)+Math.exp(-y))/2,-Math.sin(x)*(Math.exp(y)-Math.exp(-y))/2,unit)};exports.IMCOSH=function(inumber){var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.value}var unit=inumber.substring(inumber.length-1);unit=unit==="i"||unit==="j"?unit:"i";return exports.COMPLEX(Math.cos(y)*(Math.exp(x)+Math.exp(-x))/2,Math.sin(y)*(Math.exp(x)-Math.exp(-x))/2,unit)};exports.IMCOT=function(inumber){var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.value}return exports.IMDIV(exports.IMCOS(inumber),exports.IMSIN(inumber))};exports.IMDIV=function(inumber1,inumber2){var a=exports.IMREAL(inumber1);var b=exports.IMAGINARY(inumber1);var c=exports.IMREAL(inumber2);var d=exports.IMAGINARY(inumber2);if(utils.anyIsError(a,b,c,d)){return error.value}var unit1=inumber1.substring(inumber1.length-1);var unit2=inumber2.substring(inumber2.length-1);var unit="i";if(unit1==="j"){unit="j"}else if(unit2==="j"){unit="j"}if(c===0&&d===0){return error.num}var den=c*c+d*d;return exports.COMPLEX((a*c+b*d)/den,(b*c-a*d)/den,unit)};exports.IMEXP=function(inumber){var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.value}var unit=inumber.substring(inumber.length-1);unit=unit==="i"||unit==="j"?unit:"i";var e=Math.exp(x);return exports.COMPLEX(e*Math.cos(y),e*Math.sin(y),unit)};exports.IMLN=function(inumber){var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.value}var unit=inumber.substring(inumber.length-1);unit=unit==="i"||unit==="j"?unit:"i";return exports.COMPLEX(Math.log(Math.sqrt(x*x+y*y)),Math.atan(y/x),unit)};exports.IMLOG10=function(inumber){var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.value}var unit=inumber.substring(inumber.length-1);unit=unit==="i"||unit==="j"?unit:"i";return exports.COMPLEX(Math.log(Math.sqrt(x*x+y*y))/Math.log(10),Math.atan(y/x)/Math.log(10),unit)};exports.IMLOG2=function(inumber){var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.value}var unit=inumber.substring(inumber.length-1);unit=unit==="i"||unit==="j"?unit:"i";return exports.COMPLEX(Math.log(Math.sqrt(x*x+y*y))/Math.log(2),Math.atan(y/x)/Math.log(2),unit)};exports.IMPOWER=function(inumber,number){number=utils.parseNumber(number);var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(number,x,y)){return error.value}var unit=inumber.substring(inumber.length-1);unit=unit==="i"||unit==="j"?unit:"i";var p=Math.pow(exports.IMABS(inumber),number);var t=exports.IMARGUMENT(inumber);return exports.COMPLEX(p*Math.cos(number*t),p*Math.sin(number*t),unit)};exports.IMPRODUCT=function(){var result=arguments[0];for(var i=1;i<arguments.length;i++){var a=exports.IMREAL(result);var b=exports.IMAGINARY(result);var c=exports.IMREAL(arguments[i]);var d=exports.IMAGINARY(arguments[i]);if(utils.anyIsError(a,b,c,d)){return error.value}result=exports.COMPLEX(a*c-b*d,a*d+b*c)}return result};exports.IMREAL=function(inumber){if(inumber===undefined||inumber===true||inumber===false){return error.value}if(inumber===0||inumber==="0"){return 0}if(["i","+i","1i","+1i","-i","-1i","j","+j","1j","+1j","-j","-1j"].indexOf(inumber)>=0){return 0}var plus=inumber.indexOf("+");var minus=inumber.indexOf("-");if(plus===0){plus=inumber.indexOf("+",1)}if(minus===0){minus=inumber.indexOf("-",1)}var last=inumber.substring(inumber.length-1,inumber.length);var unit=last==="i"||last==="j";if(plus>=0||minus>=0){if(!unit){return error.num}if(plus>=0){return isNaN(inumber.substring(0,plus))||isNaN(inumber.substring(plus+1,inumber.length-1))?error.num:Number(inumber.substring(0,plus))}else{return isNaN(inumber.substring(0,minus))||isNaN(inumber.substring(minus+1,inumber.length-1))?error.num:Number(inumber.substring(0,minus))}}else{if(unit){return isNaN(inumber.substring(0,inumber.length-1))?error.num:0}else{return isNaN(inumber)?error.num:inumber}}};exports.IMSEC=function(inumber){if(inumber===true||inumber===false){return error.value}var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.value}return exports.IMDIV("1",exports.IMCOS(inumber))};exports.IMSECH=function(inumber){var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.value}return exports.IMDIV("1",exports.IMCOSH(inumber))};exports.IMSIN=function(inumber){var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.value}var unit=inumber.substring(inumber.length-1);unit=unit==="i"||unit==="j"?unit:"i";return exports.COMPLEX(Math.sin(x)*(Math.exp(y)+Math.exp(-y))/2,Math.cos(x)*(Math.exp(y)-Math.exp(-y))/2,unit)};exports.IMSINH=function(inumber){var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.value}var unit=inumber.substring(inumber.length-1);unit=unit==="i"||unit==="j"?unit:"i";return exports.COMPLEX(Math.cos(y)*(Math.exp(x)-Math.exp(-x))/2,Math.sin(y)*(Math.exp(x)+Math.exp(-x))/2,unit)};exports.IMSQRT=function(inumber){var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.value}var unit=inumber.substring(inumber.length-1);unit=unit==="i"||unit==="j"?unit:"i";var s=Math.sqrt(exports.IMABS(inumber));var t=exports.IMARGUMENT(inumber);return exports.COMPLEX(s*Math.cos(t/2),s*Math.sin(t/2),unit)};exports.IMCSC=function(inumber){if(inumber===true||inumber===false){return error.value}var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.num}return exports.IMDIV("1",exports.IMSIN(inumber))};exports.IMCSCH=function(inumber){if(inumber===true||inumber===false){return error.value}var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.num}return exports.IMDIV("1",exports.IMSINH(inumber))};exports.IMSUB=function(inumber1,inumber2){var a=this.IMREAL(inumber1);var b=this.IMAGINARY(inumber1);var c=this.IMREAL(inumber2);var d=this.IMAGINARY(inumber2);if(utils.anyIsError(a,b,c,d)){return error.value}var unit1=inumber1.substring(inumber1.length-1);var unit2=inumber2.substring(inumber2.length-1);var unit="i";if(unit1==="j"){unit="j"}else if(unit2==="j"){unit="j"}return this.COMPLEX(a-c,b-d,unit)};exports.IMSUM=function(){var args=utils.flatten(arguments);var result=args[0];for(var i=1;i<args.length;i++){var a=this.IMREAL(result);var b=this.IMAGINARY(result);var c=this.IMREAL(args[i]);var d=this.IMAGINARY(args[i]);if(utils.anyIsError(a,b,c,d)){return error.value}result=this.COMPLEX(a+c,b+d)}return result};exports.IMTAN=function(inumber){if(inumber===true||inumber===false){return error.value}var x=exports.IMREAL(inumber);var y=exports.IMAGINARY(inumber);if(utils.anyIsError(x,y)){return error.value}return this.IMDIV(this.IMSIN(inumber),this.IMCOS(inumber))};exports.OCT2BIN=function(number,places){if(!/^[0-7]{1,10}$/.test(number)){return error.num}var negative=number.length===10&&number.substring(0,1)==="7"?true:false;var decimal=negative?parseInt(number,8)-1073741824:parseInt(number,8);if(decimal<-512||decimal>511){return error.num}if(negative){return"1"+text.REPT("0",9-(512+decimal).toString(2).length)+(512+decimal).toString(2)}var result=decimal.toString(2);if(typeof places==="undefined"){return result}else{if(isNaN(places)){return error.value}if(places<0){return error.num}places=Math.floor(places);return places>=result.length?text.REPT("0",places-result.length)+result:error.num}};exports.OCT2DEC=function(number){if(!/^[0-7]{1,10}$/.test(number)){return error.num}var decimal=parseInt(number,8);return decimal>=536870912?decimal-1073741824:decimal};exports.OCT2HEX=function(number,places){if(!/^[0-7]{1,10}$/.test(number)){return error.num}var decimal=parseInt(number,8);if(decimal>=536870912){return"ff"+(decimal+3221225472).toString(16)}var result=decimal.toString(16);if(places===undefined){return result}else{if(isNaN(places)){return error.value}if(places<0){return error.num}places=Math.floor(places);return places>=result.length?text.REPT("0",places-result.length)+result:error.num}}},{"./error":6,"./text":14,"./utils":15,bessel:16,jStat:18}],6:[function(require,module,exports){exports.nil=new Error("#NULL!");exports.div0=new Error("#DIV/0!");exports.value=new Error("#VALUE?");exports.ref=new Error("#REF!");exports.name=new Error("#NAME?");exports.num=new Error("#NUM!");exports.na=new Error("#N/A");exports.error=new Error("#ERROR!");exports.data=new Error("#GETTING_DATA")},{}],7:[function(require,module,exports){var moment=require("moment");var error=require("./error");var dateTime=require("./date-time");var utils=require("./utils");exports.ACCRINT=function(issue,first,settlement,rate,par,frequency,basis,method){if(!moment(issue).isValid()||!moment(first).isValid()||!moment(settlement).isValid()){return"#VALUE!"}if(rate<=0||par<=0){return"#NUM!"}if([1,2,4].indexOf(frequency)===-1){return"#NUM!"}if([0,1,2,3,4].indexOf(basis)===-1){return"#NUM!"}if(moment(issue).diff(moment(settlement))>=0){return"#NUM!"}par=typeof par==="undefined"?0:par;basis=typeof basis==="undefined"?0:basis;method=typeof method==="undefined"?true:method;var factor=0;switch(basis){case 0:factor=dateTime.YEARFRAC(issue,settlement,basis);break;case 1:factor=dateTime.YEARFRAC(issue,settlement,basis);break;case 2:factor=dateTime.YEARFRAC(issue,settlement,basis);break;case 3:factor=dateTime.YEARFRAC(issue,settlement,basis);break;case 4:factor=dateTime.YEARFRAC(issue,settlement,basis);break}return par*rate*factor};exports.ACCRINTM=function(){throw new Error("ACCRINTM is not implemented")};exports.AMORDEGRC=function(){throw new Error("AMORDEGRC is not implemented")};exports.AMORLINC=function(){throw new Error("AMORLINC is not implemented")};exports.COUPDAYBS=function(){throw new Error("COUPDAYBS is not implemented")};exports.COUPDAYS=function(){throw new Error("COUPDAYS is not implemented")};exports.COUPDAYSNC=function(){throw new Error("COUPDAYSNC is not implemented")};exports.COUPNCD=function(){throw new Error("COUPNCD is not implemented")};exports.COUPNUM=function(){throw new Error("COUPNUM is not implemented")};exports.COUPPCD=function(){throw new Error("COUPPCD is not implemented")};exports.CUMIPMT=function(rate,periods,value,start,end,type){rate=utils.parseNumber(rate);periods=utils.parseNumber(periods);value=utils.parseNumber(value);if(utils.anyIsError(rate,periods,value)){return error.value}if(rate<=0||periods<=0||value<=0){return error.num}if(start<1||end<1||start>end){return error.num}if(type!==0&&type!==1){return error.num}var payment=exports.PMT(rate,periods,value,0,type);var interest=0;if(start===1){if(type===0){interest=-value;start++}}for(var i=start;i<=end;i++){if(type===1){interest+=exports.FV(rate,i-2,payment,value,1)-payment}else{interest+=exports.FV(rate,i-1,payment,value,0)}}interest*=rate;return interest};exports.CUMPRINC=function(rate,periods,value,start,end,type){rate=utils.parseNumber(rate);periods=utils.parseNumber(periods);value=utils.parseNumber(value);if(utils.anyIsError(rate,periods,value)){return error.value}if(rate<=0||periods<=0||value<=0){return error.num}if(start<1||end<1||start>end){return error.num}if(type!==0&&type!==1){return error.num}var payment=exports.PMT(rate,periods,value,0,type);var principal=0;if(start===1){if(type===0){principal=payment+value*rate}else{principal=payment}start++}for(var i=start;i<=end;i++){if(type>0){principal+=payment-(exports.FV(rate,i-2,payment,value,1)-payment)*rate}else{principal+=payment-exports.FV(rate,i-1,payment,value,0)*rate}}return principal};exports.DB=function(cost,salvage,life,period,month){month=month===undefined?12:month;cost=utils.parseNumber(cost);salvage=utils.parseNumber(salvage);life=utils.parseNumber(life);period=utils.parseNumber(period);month=utils.parseNumber(month);if(utils.anyIsError(cost,salvage,life,period,month)){return error.value}if(cost<0||salvage<0||life<0||period<0){return error.num}if([1,2,3,4,5,6,7,8,9,10,11,12].indexOf(month)===-1){return error.num}if(period>life){return error.num}if(salvage>=cost){return 0}var rate=(1-Math.pow(salvage/cost,1/life)).toFixed(3);var initial=cost*rate*month/12;var total=initial;var current=0;var ceiling=period===life?life-1:period;for(var i=2;i<=ceiling;i++){current=(cost-total)*rate;total+=current}if(period===1){return initial}else if(period===life){return(cost-total)*rate}else{return current}};exports.DDB=function(cost,salvage,life,period,factor){factor=factor===undefined?2:factor;cost=utils.parseNumber(cost);salvage=utils.parseNumber(salvage);life=utils.parseNumber(life);period=utils.parseNumber(period);factor=utils.parseNumber(factor);if(utils.anyIsError(cost,salvage,life,period,factor)){return error.value}if(cost<0||salvage<0||life<0||period<0||factor<=0){return error.num}if(period>life){return error.num}if(salvage>=cost){return 0}var total=0;var current=0;for(var i=1;i<=period;i++){current=Math.min((cost-total)*(factor/life),cost-salvage-total);total+=current}return current};exports.DISC=function(){throw new Error("DISC is not implemented")};exports.DOLLARDE=function(dollar,fraction){dollar=utils.parseNumber(dollar);fraction=utils.parseNumber(fraction);if(utils.anyIsError(dollar,fraction)){return error.value}if(fraction<0){return error.num}if(fraction>=0&&fraction<1){return error.div0}fraction=parseInt(fraction,10);var result=parseInt(dollar,10);result+=dollar%1*Math.pow(10,Math.ceil(Math.log(fraction)/Math.LN10))/fraction;var power=Math.pow(10,Math.ceil(Math.log(fraction)/Math.LN2)+1);result=Math.round(result*power)/power;return result};exports.DOLLARFR=function(dollar,fraction){dollar=utils.parseNumber(dollar);fraction=utils.parseNumber(fraction);if(utils.anyIsError(dollar,fraction)){return error.value}if(fraction<0){return error.num}if(fraction>=0&&fraction<1){return error.div0}fraction=parseInt(fraction,10);var result=parseInt(dollar,10);result+=dollar%1*Math.pow(10,-Math.ceil(Math.log(fraction)/Math.LN10))*fraction;return result};exports.DURATION=function(){throw new Error("DURATION is not implemented")};exports.EFFECT=function(rate,periods){rate=utils.parseNumber(rate);periods=utils.parseNumber(periods);if(utils.anyIsError(rate,periods)){return error.value}if(rate<=0||periods<1){return error.num}periods=parseInt(periods,10);return Math.pow(1+rate/periods,periods)-1};exports.FV=function(rate,periods,payment,value,type){value=value||0;type=type||0;rate=utils.parseNumber(rate);periods=utils.parseNumber(periods);payment=utils.parseNumber(payment);value=utils.parseNumber(value);type=utils.parseNumber(type);if(utils.anyIsError(rate,periods,payment,value,type)){return error.value}var result;if(rate===0){result=value+payment*periods}else{var term=Math.pow(1+rate,periods);if(type===1){result=value*term+payment*(1+rate)*(term-1)/rate}else{result=value*term+payment*(term-1)/rate}}return-result};exports.FVSCHEDULE=function(principal,schedule){principal=utils.parseNumber(principal);schedule=utils.parseNumberArray(utils.flatten(schedule));if(utils.anyIsError(principal,schedule)){return error.value}var n=schedule.length;var future=principal;for(var i=0;i<n;i++){future*=1+schedule[i]}return future};exports.INTRATE=function(){throw new Error("INTRATE is not implemented")};exports.IPMT=function(rate,period,periods,present,future,type){future=future||0;type=type||0;rate=utils.parseNumber(rate);period=utils.parseNumber(period);periods=utils.parseNumber(periods);present=utils.parseNumber(present);future=utils.parseNumber(future);type=utils.parseNumber(type);if(utils.anyIsError(rate,period,periods,present,future,type)){return error.value}var payment=exports.PMT(rate,periods,present,future,type);var interest;if(period===1){if(type===1){interest=0}else{interest=-present}}else{if(type===1){interest=exports.FV(rate,period-2,payment,present,1)-payment}else{interest=exports.FV(rate,period-1,payment,present,0)}}return interest*rate};exports.IRR=function(values,guess){guess=guess||0;values=utils.parseNumberArray(utils.flatten(values));guess=utils.parseNumber(guess);if(utils.anyIsError(values,guess)){return error.value}var irrResult=function(values,dates,rate){var r=rate+1;var result=values[0];for(var i=1;i<values.length;i++){result+=values[i]/Math.pow(r,(dates[i]-dates[0])/365)}return result};var irrResultDeriv=function(values,dates,rate){var r=rate+1;var result=0;for(var i=1;i<values.length;i++){var frac=(dates[i]-dates[0])/365;result-=frac*values[i]/Math.pow(r,frac+1)}return result};var dates=[];var positive=false;var negative=false;for(var i=0;i<values.length;i++){dates[i]=i===0?0:dates[i-1]+365;if(values[i]>0){positive=true}if(values[i]<0){negative=true}}if(!positive||!negative){return error.num}guess=guess===undefined?.1:guess;var resultRate=guess;var epsMax=1e-10;var newRate,epsRate,resultValue;var iteration=0;var contLoop=true;do{resultValue=irrResult(values,dates,resultRate);newRate=resultRate-resultValue/irrResultDeriv(values,dates,resultRate);epsRate=Math.abs(newRate-resultRate);resultRate=newRate;contLoop=epsRate>epsMax&&Math.abs(resultValue)>epsMax}while(contLoop);return resultRate};exports.ISPMT=function(rate,period,periods,value){rate=utils.parseNumber(rate);period=utils.parseNumber(period);periods=utils.parseNumber(periods);value=utils.parseNumber(value);if(utils.anyIsError(rate,period,periods,value)){return error.value}return value*rate*(period/periods-1)};exports.MDURATION=function(){throw new Error("MDURATION is not implemented")};exports.MIRR=function(values,finance_rate,reinvest_rate){values=utils.parseNumberArray(utils.flatten(values));finance_rate=utils.parseNumber(finance_rate);reinvest_rate=utils.parseNumber(reinvest_rate);if(utils.anyIsError(values,finance_rate,reinvest_rate)){return error.value}var n=values.length;var payments=[];var incomes=[];for(var i=0;i<n;i++){if(values[i]<0){payments.push(values[i])}else{incomes.push(values[i])}}var num=-exports.NPV(reinvest_rate,incomes)*Math.pow(1+reinvest_rate,n-1);var den=exports.NPV(finance_rate,payments)*(1+finance_rate);return Math.pow(num/den,1/(n-1))-1};exports.NOMINAL=function(rate,periods){rate=utils.parseNumber(rate);periods=utils.parseNumber(periods);if(utils.anyIsError(rate,periods)){return error.value}if(rate<=0||periods<1){return error.num}periods=parseInt(periods,10);return(Math.pow(rate+1,1/periods)-1)*periods};exports.NPER=function(rate,payment,present,future,type){type=type===undefined?0:type;future=future===undefined?0:future;rate=utils.parseNumber(rate);payment=utils.parseNumber(payment);present=utils.parseNumber(present);future=utils.parseNumber(future);type=utils.parseNumber(type);if(utils.anyIsError(rate,payment,present,future,type)){return error.value}var num=payment*(1+rate*type)-future*rate;var den=present*rate+payment*(1+rate*type);return Math.log(num/den)/Math.log(1+rate)};exports.NPV=function(){var args=utils.parseNumberArray(utils.flatten(arguments));if(args instanceof Error){return args}var rate=args[0];var value=0;for(var j=1;j<args.length;j++){value+=args[j]/Math.pow(1+rate,j)}return value};exports.ODDFPRICE=function(){throw new Error("ODDFPRICE is not implemented")};exports.ODDFYIELD=function(){throw new Error("ODDFYIELD is not implemented")};exports.ODDLPRICE=function(){throw new Error("ODDLPRICE is not implemented")};exports.ODDLYIELD=function(){throw new Error("ODDLYIELD is not implemented")};exports.PDURATION=function(rate,present,future){rate=utils.parseNumber(rate);present=utils.parseNumber(present);future=utils.parseNumber(future);if(utils.anyIsError(rate,present,future)){return error.value}if(rate<=0){return error.num}return(Math.log(future)-Math.log(present))/Math.log(1+rate)};exports.PMT=function(rate,periods,present,future,type){future=future||0;type=type||0;rate=utils.parseNumber(rate);periods=utils.parseNumber(periods);present=utils.parseNumber(present);future=utils.parseNumber(future);type=utils.parseNumber(type);if(utils.anyIsError(rate,periods,present,future,type)){return error.value}var result;if(rate===0){result=(present+future)/periods}else{var term=Math.pow(1+rate,periods);if(type===1){result=(future*rate/(term-1)+present*rate/(1-1/term))/(1+rate)}else{result=future*rate/(term-1)+present*rate/(1-1/term)}}return-result};exports.PPMT=function(rate,period,periods,present,future,type){future=future||0;type=type||0;rate=utils.parseNumber(rate);periods=utils.parseNumber(periods);present=utils.parseNumber(present);future=utils.parseNumber(future);type=utils.parseNumber(type);if(utils.anyIsError(rate,periods,present,future,type)){return error.value}return exports.PMT(rate,periods,present,future,type)-exports.IPMT(rate,period,periods,present,future,type)};exports.PRICE=function(){throw new Error("PRICE is not implemented")};exports.PRICEDISC=function(){throw new Error("PRICEDISC is not implemented")};exports.PRICEMAT=function(){throw new Error("PRICEMAT is not implemented")};exports.PV=function(rate,periods,payment,future,type){future=future||0;type=type||0;rate=utils.parseNumber(rate);periods=utils.parseNumber(periods);payment=utils.parseNumber(payment);future=utils.parseNumber(future);type=utils.parseNumber(type);if(utils.anyIsError(rate,periods,payment,future,type)){return error.value}if(rate===0){return-payment*periods-future}else{return((1-Math.pow(1+rate,periods))/rate*payment*(1+rate*type)-future)/Math.pow(1+rate,periods)}};exports.RATE=function(periods,payment,present,future,type,guess){guess=guess===undefined?.01:guess;future=future===undefined?0:future;type=type===undefined?0:type;periods=utils.parseNumber(periods);payment=utils.parseNumber(payment);present=utils.parseNumber(present);future=utils.parseNumber(future);type=utils.parseNumber(type);guess=utils.parseNumber(guess);if(utils.anyIsError(periods,payment,present,future,type,guess)){return error.value}var epsMax=1e-10;var iterMax=50;var y,y0,y1,x0,x1=0,f=0,i=0;var rate=guess;if(Math.abs(rate)<epsMax){y=present*(1+periods*rate)+payment*(1+rate*type)*periods+future}else{f=Math.exp(periods*Math.log(1+rate));y=present*f+payment*(1/rate+type)*(f-1)+future}y0=present+payment*periods+future;y1=present*f+payment*(1/rate+type)*(f-1)+future;i=x0=0;x1=rate;while(Math.abs(y0-y1)>epsMax&&i<iterMax){rate=(y1*x0-y0*x1)/(y1-y0);x0=x1;x1=rate;if(Math.abs(rate)<epsMax){y=present*(1+periods*rate)+payment*(1+rate*type)*periods+future}else{f=Math.exp(periods*Math.log(1+rate));y=present*f+payment*(1/rate+type)*(f-1)+future}y0=y1;y1=y;++i}return rate};exports.RECEIVED=function(){throw new Error("RECEIVED is not implemented")};exports.RRI=function(periods,present,future){periods=utils.parseNumber(periods);present=utils.parseNumber(present);future=utils.parseNumber(future);if(utils.anyIsError(periods,present,future)){return error.value}if(periods===0||present===0){return error.num}return Math.pow(future/present,1/periods)-1};exports.SLN=function(cost,salvage,life){cost=utils.parseNumber(cost);salvage=utils.parseNumber(salvage);life=utils.parseNumber(life);if(utils.anyIsError(cost,salvage,life)){return error.value}if(life===0){return error.num}return(cost-salvage)/life};exports.SYD=function(cost,salvage,life,period){cost=utils.parseNumber(cost);salvage=utils.parseNumber(salvage);life=utils.parseNumber(life);period=utils.parseNumber(period);if(utils.anyIsError(cost,salvage,life,period)){return error.value}if(life===0){return error.num}if(period<1||period>life){return error.num}period=parseInt(period,10);return(cost-salvage)*(life-period+1)*2/(life*(life+1))
};exports.TBILLEQ=function(settlement,maturity,discount){settlement=utils.parseDate(settlement);maturity=utils.parseDate(maturity);discount=utils.parseNumber(discount);if(utils.anyIsError(settlement,maturity,discount)){return error.value}if(discount<=0){return error.num}if(settlement>maturity){return error.num}if(maturity-settlement>365*24*60*60*1e3){return error.num}return 365*discount/(360-discount*dateTime.DAYS360(settlement,maturity,false))};exports.TBILLPRICE=function(settlement,maturity,discount){settlement=utils.parseDate(settlement);maturity=utils.parseDate(maturity);discount=utils.parseNumber(discount);if(utils.anyIsError(settlement,maturity,discount)){return error.value}if(discount<=0){return error.num}if(settlement>maturity){return error.num}if(maturity-settlement>365*24*60*60*1e3){return error.num}return 100*(1-discount*dateTime.DAYS360(settlement,maturity,false)/360)};exports.TBILLYIELD=function(settlement,maturity,price){settlement=utils.parseDate(settlement);maturity=utils.parseDate(maturity);price=utils.parseNumber(price);if(utils.anyIsError(settlement,maturity,price)){return error.value}if(price<=0){return error.num}if(settlement>maturity){return error.num}if(maturity-settlement>365*24*60*60*1e3){return error.num}return(100-price)*360/(price*dateTime.DAYS360(settlement,maturity,false))};exports.VDB=function(){throw new Error("VDB is not implemented")};exports.XIRR=function(values,dates,guess){values=utils.parseNumberArray(utils.flatten(values));dates=utils.parseDateArray(utils.flatten(dates));guess=utils.parseNumber(guess);if(utils.anyIsError(values,dates,guess)){return error.value}var irrResult=function(values,dates,rate){var r=rate+1;var result=values[0];for(var i=1;i<values.length;i++){result+=values[i]/Math.pow(r,dateTime.DAYS(dates[i],dates[0])/365)}return result};var irrResultDeriv=function(values,dates,rate){var r=rate+1;var result=0;for(var i=1;i<values.length;i++){var frac=dateTime.DAYS(dates[i],dates[0])/365;result-=frac*values[i]/Math.pow(r,frac+1)}return result};var positive=false;var negative=false;for(var i=0;i<values.length;i++){if(values[i]>0){positive=true}if(values[i]<0){negative=true}}if(!positive||!negative){return error.num}guess=guess||.1;var resultRate=guess;var epsMax=1e-10;var newRate,epsRate,resultValue;var iteration=0;var contLoop=true;do{resultValue=irrResult(values,dates,resultRate);newRate=resultRate-resultValue/irrResultDeriv(values,dates,resultRate);epsRate=Math.abs(newRate-resultRate);resultRate=newRate;contLoop=epsRate>epsMax&&Math.abs(resultValue)>epsMax}while(contLoop);return resultRate};exports.XNPV=function(rate,values,dates){rate=utils.parseNumber(rate);values=utils.parseNumberArray(utils.flatten(values));dates=utils.parseDateArray(utils.flatten(dates));if(utils.anyIsError(rate,values,dates)){return error.value}var result=0;for(var i=0;i<values.length;i++){result+=values[i]/Math.pow(1+rate,dateTime.DAYS(dates[i],dates[0])/365)}return result};exports.YIELD=function(){throw new Error("YIELD is not implemented")};exports.YIELDDISC=function(){throw new Error("YIELDDISC is not implemented")};exports.YIELDMAT=function(){throw new Error("YIELDMAT is not implemented")}},{"./date-time":4,"./error":6,"./utils":15,moment:20}],8:[function(require,module,exports){var error=require("./error");exports.CELL=function(){throw new Error("CELL is not implemented")};exports.ERROR={};exports.ERROR.TYPE=function(error_val){switch(error_val){case error.nil:return 1;case error.div0:return 2;case error.value:return 3;case error.ref:return 4;case error.name:return 5;case error.num:return 6;case error.na:return 7;case error.data:return 8}return error.na};exports.INFO=function(){throw new Error("INFO is not implemented")};exports.ISBLANK=function(value){return value===null};exports.ISBINARY=function(number){return/^[01]{1,10}$/.test(number)};exports.ISERR=function(value){return[error.value,error.ref,error.div0,error.num,error.name,error.nil].indexOf(value)>=0||typeof value==="number"&&(isNaN(value)||!isFinite(value))};exports.ISERROR=function(value){return exports.ISERR(value)||value===error.na};exports.ISEVEN=function(number){return Math.floor(Math.abs(number))&1?false:true};exports.ISFORMULA=function(){throw new Error("ISFORMULA is not implemented")};exports.ISLOGICAL=function(value){return value===true||value===false};exports.ISNA=function(value){return value===error.na};exports.ISNONTEXT=function(value){return typeof value!=="string"};exports.ISNUMBER=function(value){return typeof value==="number"&&!isNaN(value)&&isFinite(value)};exports.ISODD=function(number){return Math.floor(Math.abs(number))&1?true:false};exports.ISREF=function(){throw new Error("ISREF is not implemented")};exports.ISTEXT=function(value){return typeof value==="string"};exports.N=function(value){if(this.ISNUMBER(value)){return value}if(value instanceof Date){return value.getTime()}if(value===true){return 1}if(value===false){return 0}if(this.ISERROR(value)){return value}return 0};exports.NA=function(){return error.na};exports.SHEET=function(){throw new Error("SHEET is not implemented")};exports.SHEETS=function(){throw new Error("SHEETS is not implemented")};exports.TYPE=function(value){if(this.ISNUMBER(value)){return 1}if(this.ISTEXT(value)){return 2}if(this.ISLOGICAL(value)){return 4}if(this.ISERROR(value)){return 16}if(Array.isArray(value)){return 64}}},{"./error":6}],9:[function(require,module,exports){var error=require("./error");var utils=require("./utils");var information=require("./information");exports.AND=function(){var args=utils.flatten(arguments);var result=true;for(var i=0;i<args.length;i++){if(!args[i]){result=false}}return result};exports.FALSE=function(){return false};exports.IF=function(test,then_value,otherwise_value){return test?then_value:otherwise_value};exports.IFERROR=function(value,valueIfError){if(information.ISERROR(value)){return valueIfError}return value};exports.IFNA=function(value,value_if_na){return value===error.na?value_if_na:value};exports.NOT=function(logical){return!logical};exports.OR=function(){var args=utils.flatten(arguments);var result=false;for(var i=0;i<args.length;i++){if(args[i]){result=true}}return result};exports.TRUE=function(){return true};exports.XOR=function(){var args=utils.flatten(arguments);var result=0;for(var i=0;i<args.length;i++){if(args[i]){result++}}return Math.floor(Math.abs(result))&1?true:false};exports.SWITCH=function(){var result;if(arguments.length>0){var targetValue=arguments[0];var argc=arguments.length-1;var switchCount=Math.floor(argc/2);var switchSatisfied=false;var defaultClause=argc%2===0?null:arguments[arguments.length-1];if(switchCount){for(var index=0;index<switchCount;index++){if(targetValue===arguments[index*2+1]){result=arguments[index*2+2];switchSatisfied=true;break}}}if(!switchSatisfied&&defaultClause){result=defaultClause}}return result}},{"./error":6,"./information":8,"./utils":15}],10:[function(require,module,exports){},{}],11:[function(require,module,exports){var numeric=require("numeric");var utils=require("./utils");var error=require("./error");var statistical=require("./statistical");var information=require("./information");exports.ABS=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return Math.abs(utils.parseNumber(number))};exports.ACOS=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return Math.acos(number)};exports.ACOSH=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return Math.log(number+Math.sqrt(number*number-1))};exports.ACOT=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return Math.atan(1/number)};exports.ACOTH=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return.5*Math.log((number+1)/(number-1))};exports.AGGREGATE=function(function_num,options,ref1,ref2){function_num=utils.parseNumber(function_num);options=utils.parseNumber(function_num);if(utils.anyIsError(function_num,options)){return error.value}switch(function_num){case 1:return statistical.AVERAGE(ref1);case 2:return statistical.COUNT(ref1);case 3:return statistical.COUNTA(ref1);case 4:return statistical.MAX(ref1);case 5:return statistical.MIN(ref1);case 6:return exports.PRODUCT(ref1);case 7:return statistical.STDEV.S(ref1);case 8:return statistical.STDEV.P(ref1);case 9:return exports.SUM(ref1);case 10:return statistical.VAR.S(ref1);case 11:return statistical.VAR.P(ref1);case 12:return statistical.MEDIAN(ref1);case 13:return statistical.MODE.SNGL(ref1);case 14:return statistical.LARGE(ref1,ref2);case 15:return statistical.SMALL(ref1,ref2);case 16:return statistical.PERCENTILE.INC(ref1,ref2);case 17:return statistical.QUARTILE.INC(ref1,ref2);case 18:return statistical.PERCENTILE.EXC(ref1,ref2);case 19:return statistical.QUARTILE.EXC(ref1,ref2)}};exports.ARABIC=function(text){if(!/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(text)){return error.value}var r=0;text.replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,function(i){r+={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1}[i]});return r};exports.ASIN=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return Math.asin(number)};exports.ASINH=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return Math.log(number+Math.sqrt(number*number+1))};exports.ATAN=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return Math.atan(number)};exports.ATAN2=function(number_x,number_y){number_x=utils.parseNumber(number_x);number_y=utils.parseNumber(number_y);if(utils.anyIsError(number_x,number_y)){return error.value}return Math.atan2(number_x,number_y)};exports.ATANH=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return Math.log((1+number)/(1-number))/2};exports.BASE=function(number,radix,min_length){min_length=min_length||0;number=utils.parseNumber(number);radix=utils.parseNumber(radix);min_length=utils.parseNumber(min_length);if(utils.anyIsError(number,radix,min_length)){return error.value}min_length=min_length===undefined?0:min_length;var result=number.toString(radix);return new Array(Math.max(min_length+1-result.length,0)).join("0")+result};exports.CEILING=function(number,significance,mode){significance=significance===undefined?1:Math.abs(significance);mode=mode||0;number=utils.parseNumber(number);significance=utils.parseNumber(significance);mode=utils.parseNumber(mode);if(utils.anyIsError(number,significance,mode)){return error.value}if(significance===0){return 0}var precision=-Math.floor(Math.log(significance)/Math.log(10));if(number>=0){return exports.ROUND(Math.ceil(number/significance)*significance,precision)}else{if(mode===0){return-exports.ROUND(Math.floor(Math.abs(number)/significance)*significance,precision)}else{return-exports.ROUND(Math.ceil(Math.abs(number)/significance)*significance,precision)}}};exports.CEILING.MATH=exports.CEILING;exports.CEILING.PRECISE=exports.CEILING;exports.COMBIN=function(number,number_chosen){number=utils.parseNumber(number);number_chosen=utils.parseNumber(number_chosen);if(utils.anyIsError(number,number_chosen)){return error.value}return exports.FACT(number)/(exports.FACT(number_chosen)*exports.FACT(number-number_chosen))};exports.COMBINA=function(number,number_chosen){number=utils.parseNumber(number);number_chosen=utils.parseNumber(number_chosen);if(utils.anyIsError(number,number_chosen)){return error.value}return number===0&&number_chosen===0?1:exports.COMBIN(number+number_chosen-1,number-1)};exports.COS=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return Math.cos(number)};exports.COSH=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return(Math.exp(number)+Math.exp(-number))/2};exports.COT=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return 1/Math.tan(number)};exports.COTH=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}var e2=Math.exp(2*number);return(e2+1)/(e2-1)};exports.CSC=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return 1/Math.sin(number)};exports.CSCH=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return 2/(Math.exp(number)-Math.exp(-number))};exports.DECIMAL=function(number,radix){if(arguments.length<1){return error.value}return parseInt(number,radix)};exports.DEGREES=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return number*180/Math.PI};exports.EVEN=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return exports.CEILING(number,-2,-1)};exports.EXP=Math.exp;var MEMOIZED_FACT=[];exports.FACT=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}var n=Math.floor(number);if(n===0||n===1){return 1}else if(MEMOIZED_FACT[n]>0){return MEMOIZED_FACT[n]}else{MEMOIZED_FACT[n]=exports.FACT(n-1)*n;return MEMOIZED_FACT[n]}};exports.FACTDOUBLE=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}var n=Math.floor(number);if(n<=0){return 1}else{return n*exports.FACTDOUBLE(n-2)}};exports.FLOOR=function(number,significance){number=utils.parseNumber(number);significance=utils.parseNumber(significance);if(utils.anyIsError(number,significance)){return error.value}if(significance===0){return 0}if(!(number>0&&significance>0)&&!(number<0&&significance<0)){return error.num}significance=Math.abs(significance);var precision=-Math.floor(Math.log(significance)/Math.log(10));if(number>=0){return exports.ROUND(Math.floor(number/significance)*significance,precision)}else{return-exports.ROUND(Math.ceil(Math.abs(number)/significance),precision)}};exports.FLOOR.MATH=function(number,significance,mode){significance=significance===undefined?1:significance;mode=mode===undefined?0:mode;number=utils.parseNumber(number);significance=utils.parseNumber(significance);mode=utils.parseNumber(mode);if(utils.anyIsError(number,significance,mode)){return error.value}if(significance===0){return 0}significance=significance?Math.abs(significance):1;var precision=-Math.floor(Math.log(significance)/Math.log(10));if(number>=0){return exports.ROUND(Math.floor(number/significance)*significance,precision)}else if(mode===0||mode===undefined){return-exports.ROUND(Math.ceil(Math.abs(number)/significance)*significance,precision)}return-exports.ROUND(Math.floor(Math.abs(number)/significance)*significance,precision)};exports.FLOOR.PRECISE=exports.FLOOR.MATH;exports.GCD=function(){var range=utils.parseNumberArray(utils.flatten(arguments));if(range instanceof Error){return range}var n=range.length;var r0=range[0];var x=r0<0?-r0:r0;for(var i=1;i<n;i++){var ri=range[i];var y=ri<0?-ri:ri;while(x&&y){if(x>y){x%=y}else{y%=x}}x+=y}return x};exports.INT=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return Math.floor(number)};exports.ISO={CEILING:exports.CEILING};exports.LCM=function(){var o=utils.parseNumberArray(utils.flatten(arguments));if(o instanceof Error){return o}for(var i,j,n,d,r=1;(n=o.pop())!==undefined;){while(n>1){if(n%2){for(i=3,j=Math.floor(Math.sqrt(n));i<=j&&n%i;i+=2){}d=i<=j?i:n}else{d=2}for(n/=d,r*=d,i=o.length;i;o[--i]%d===0&&(o[i]/=d)===1&&o.splice(i,1)){}}}return r};exports.LN=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return Math.log(number)};exports.LOG=function(number,base){number=utils.parseNumber(number);base=utils.parseNumber(base);if(utils.anyIsError(number,base)){return error.value}base=base===undefined?10:base;return Math.log(number)/Math.log(base)};exports.LOG10=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return Math.log(number)/Math.log(10)};exports.MDETERM=function(matrix){matrix=utils.parseMatrix(matrix);if(matrix instanceof Error){return matrix}return numeric.det(matrix)};exports.MINVERSE=function(matrix){matrix=utils.parseMatrix(matrix);if(matrix instanceof Error){return matrix}return numeric.inv(matrix)};exports.MMULT=function(matrix1,matrix2){matrix1=utils.parseMatrix(matrix1);matrix2=utils.parseMatrix(matrix2);if(utils.anyIsError(matrix1,matrix2)){return error.value}return numeric.dot(matrix1,matrix2)};exports.MOD=function(dividend,divisor){dividend=utils.parseNumber(dividend);divisor=utils.parseNumber(divisor);if(utils.anyIsError(dividend,divisor)){return error.value}if(divisor===0){return error.div0}var modulus=Math.abs(dividend%divisor);return divisor>0?modulus:-modulus};exports.MROUND=function(number,multiple){number=utils.parseNumber(number);multiple=utils.parseNumber(multiple);if(utils.anyIsError(number,multiple)){return error.value}if(number*multiple<0){return error.num}return Math.round(number/multiple)*multiple};exports.MULTINOMIAL=function(){var args=utils.parseNumberArray(utils.flatten(arguments));if(args instanceof Error){return args}var sum=0;var divisor=1;for(var i=0;i<args.length;i++){sum+=args[i];divisor*=exports.FACT(args[i])}return exports.FACT(sum)/divisor};exports.MUNIT=function(dimension){dimension=utils.parseNumber(dimension);if(dimension instanceof Error){return dimension}return numeric.identity(dimension)};exports.ODD=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}var temp=Math.ceil(Math.abs(number));temp=temp&1?temp:temp+1;return number>0?temp:-temp};exports.PI=function(){return Math.PI};exports.POWER=function(number,power){number=utils.parseNumber(number);power=utils.parseNumber(power);if(utils.anyIsError(number,power)){return error.value}var result=Math.pow(number,power);if(isNaN(result)){return error.num}return result};exports.PRODUCT=function(){var args=utils.parseNumberArray(utils.flatten(arguments));if(args instanceof Error){return args}var result=1;for(var i=0;i<args.length;i++){result*=args[i]}return result};exports.QUOTIENT=function(numerator,denominator){numerator=utils.parseNumber(numerator);denominator=utils.parseNumber(denominator);if(utils.anyIsError(numerator,denominator)){return error.value}return parseInt(numerator/denominator,10)};exports.RADIANS=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return number*Math.PI/180};exports.RAND=function(){return Math.random()};exports.RANDBETWEEN=function(bottom,top){bottom=utils.parseNumber(bottom);top=utils.parseNumber(top);if(utils.anyIsError(bottom,top)){return error.value}return bottom+Math.ceil((top-bottom+1)*Math.random())-1};exports.ROMAN=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}var digits=String(number).split("");var key=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];var roman="";var i=3;while(i--){roman=(key[+digits.pop()+i*10]||"")+roman}return new Array(+digits.join("")+1).join("M")+roman};exports.ROUND=function(number,digits){number=utils.parseNumber(number);digits=utils.parseNumber(digits);if(utils.anyIsError(number,digits)){return error.value}return Math.round(number*Math.pow(10,digits))/Math.pow(10,digits)};exports.ROUNDDOWN=function(number,digits){number=utils.parseNumber(number);digits=utils.parseNumber(digits);if(utils.anyIsError(number,digits)){return error.value}var sign=number>0?1:-1;return sign*Math.floor(Math.abs(number)*Math.pow(10,digits))/Math.pow(10,digits)};exports.ROUNDUP=function(number,digits){number=utils.parseNumber(number);digits=utils.parseNumber(digits);if(utils.anyIsError(number,digits)){return error.value}var sign=number>0?1:-1;return sign*Math.ceil(Math.abs(number)*Math.pow(10,digits))/Math.pow(10,digits)};exports.SEC=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return 1/Math.cos(number)};exports.SECH=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return 2/(Math.exp(number)+Math.exp(-number))};exports.SERIESSUM=function(x,n,m,coefficients){x=utils.parseNumber(x);n=utils.parseNumber(n);m=utils.parseNumber(m);var coefficients=utils.parseNumberArray(coefficients);if(utils.anyIsError(x,n,m,coefficients)){return error.value}var result=coefficients[0]*Math.pow(x,n);for(var i=1;i<coefficients.length;i++){result+=coefficients[i]*Math.pow(x,n+i*m)}return result};exports.SIGN=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}if(number<0){return-1}else if(number===0){return 0}else{return 1}};exports.SIN=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return Math.sin(number)};exports.SINH=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return(Math.exp(number)-Math.exp(-number))/2};exports.SQRT=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}if(number<0){return error.num}return Math.sqrt(number)};exports.SQRTPI=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return Math.sqrt(number*Math.PI)};exports.SUBTOTAL=function(function_code,ref1){function_code=utils.parseNumber(function_code);if(function_code instanceof Error){return function_code}switch(function_code){case 1:return statistical.AVERAGE(ref1);case 2:return statistical.COUNT(ref1);case 3:return statistical.COUNTA(ref1);case 4:return statistical.MAX(ref1);case 5:return statistical.MIN(ref1);case 6:return exports.PRODUCT(ref1);case 7:return statistical.STDEV.S(ref1);case 8:return statistical.STDEV.P(ref1);case 9:return exports.SUM(ref1);case 10:return statistical.VAR.S(ref1);case 11:return statistical.VAR.P(ref1);case 101:return statistical.AVERAGE(ref1);case 102:return statistical.COUNT(ref1);case 103:return statistical.COUNTA(ref1);case 104:return statistical.MAX(ref1);case 105:return statistical.MIN(ref1);case 106:return exports.PRODUCT(ref1);case 107:return statistical.STDEV.S(ref1);case 108:return statistical.STDEV.P(ref1);case 109:return exports.SUM(ref1);case 110:return statistical.VAR.S(ref1);case 111:return statistical.VAR.P(ref1)}};exports.ADD=function(num1,num2){if(arguments.length!==2){return error.na}num1=utils.parseNumber(num1);num2=utils.parseNumber(num2);if(utils.anyIsError(num1,num2)){return error.value}return num1+num2};exports.MINUS=function(num1,num2){if(arguments.length!==2){return error.na}num1=utils.parseNumber(num1);num2=utils.parseNumber(num2);if(utils.anyIsError(num1,num2)){return error.value}return num1-num2};exports.DIVIDE=function(dividend,divisor){if(arguments.length!==2){return error.na}dividend=utils.parseNumber(dividend);divisor=utils.parseNumber(divisor);if(utils.anyIsError(dividend,divisor)){return error.value}if(divisor===0){return error.div0}return dividend/divisor};exports.MULTIPLY=function(factor1,factor2){if(arguments.length!==2){return error.na}factor1=utils.parseNumber(factor1);factor2=utils.parseNumber(factor2);if(utils.anyIsError(factor1,factor2)){return error.value}return factor1*factor2};exports.GTE=function(num1,num2){if(arguments.length!==2){return error.na}num1=utils.parseNumber(num1);num2=utils.parseNumber(num2);if(utils.anyIsError(num1,num2)){return error.error}return num1>=num2};exports.LT=function(num1,num2){if(arguments.length!==2){return error.na}num1=utils.parseNumber(num1);num2=utils.parseNumber(num2);if(utils.anyIsError(num1,num2)){return error.error}return num1<num2};exports.LTE=function(num1,num2){if(arguments.length!==2){return error.na}num1=utils.parseNumber(num1);num2=utils.parseNumber(num2);if(utils.anyIsError(num1,num2)){return error.error}return num1<=num2};exports.EQ=function(value1,value2){if(arguments.length!==2){return error.na}return value1===value2};exports.NE=function(value1,value2){if(arguments.length!==2){return error.na}return value1!==value2};exports.POW=function(base,exponent){if(arguments.length!==2){error.na}base=utils.parseNumber(base);exponent=utils.parseNumber(exponent);if(utils.anyIsError(base,exponent)){return error.error}return exports.POWER(base,exponent)};exports.SUM=function(){var numbers=utils.numbers(utils.flatten(arguments));var result=0;var i=numbers.length;while(i--){result+=numbers[i]}return result};exports.SUMIF=function(range,criteria){var range=utils.parseNumberArray(utils.flatten(range));if(range instanceof Error){return range}var result=0;for(var i=0;i<range.length;i++){result+=eval(range[i]+criteria)?range[i]:0}return result};exports.SUMIFS=function(){var args=utils.argsToArray(arguments);var range=utils.parseNumberArray(utils.flatten(args.shift()));if(range instanceof Error){return range}var criteria=args;var n_range_elements=range.length;var n_criterias=criteria.length;var result=0;for(var i=0;i<n_range_elements;i++){var el=range[i];var condition="";for(var c=0;c<n_criterias;c++){condition+=el+criteria[c];if(c!==n_criterias-1){condition+="&&"}}if(eval(condition)){result+=el}}return result};exports.SUMPRODUCT=function(){if(!arguments||arguments.length===0){return error.value}var arrays=arguments.length+1;var result=0;var product;var k;var _i;var _ij;for(var i=0;i<arguments[0].length;i++){if(!(arguments[0][i]instanceof Array)){product=1;for(k=1;k<arrays;k++){_i=utils.parseNumber(arguments[k-1][i]);if(_i instanceof Error){return _i}product*=_i}result+=product}else{for(var j=0;j<arguments[0][i].length;j++){product=1;for(k=1;k<arrays;k++){_ij=utils.parseNumber(arguments[k-1][i][j]);if(_ij instanceof Error){return _ij}product*=_ij}result+=product}}}return result};exports.SUMSQ=function(){var numbers=utils.parseNumberArray(utils.flatten(arguments));if(numbers instanceof Error){return numbers}var result=0;var length=numbers.length;for(var i=0;i<length;i++){result+=information.ISNUMBER(numbers[i])?numbers[i]*numbers[i]:0}return result};exports.SUMX2MY2=function(array_x,array_y){array_x=utils.parseNumberArray(utils.flatten(array_x));array_y=utils.parseNumberArray(utils.flatten(array_y));if(utils.anyIsError(array_x,array_y)){return error.value}var result=0;for(var i=0;i<array_x.length;i++){result+=array_x[i]*array_x[i]-array_y[i]*array_y[i]}return result};exports.SUMX2PY2=function(array_x,array_y){array_x=utils.parseNumberArray(utils.flatten(array_x));array_y=utils.parseNumberArray(utils.flatten(array_y));if(utils.anyIsError(array_x,array_y)){return error.value}var result=0;array_x=utils.parseNumberArray(utils.flatten(array_x));array_y=utils.parseNumberArray(utils.flatten(array_y));for(var i=0;i<array_x.length;i++){result+=array_x[i]*array_x[i]+array_y[i]*array_y[i]}return result};exports.SUMXMY2=function(array_x,array_y){array_x=utils.parseNumberArray(utils.flatten(array_x));array_y=utils.parseNumberArray(utils.flatten(array_y));if(utils.anyIsError(array_x,array_y)){return error.value}var result=0;array_x=utils.flatten(array_x);array_y=utils.flatten(array_y);for(var i=0;i<array_x.length;i++){result+=Math.pow(array_x[i]-array_y[i],2)}return result};exports.TAN=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return Math.tan(number)};exports.TANH=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}var e2=Math.exp(2*number);return(e2-1)/(e2+1)};exports.TRUNC=function(number,digits){digits=digits===undefined?0:digits;number=utils.parseNumber(number);digits=utils.parseNumber(digits);if(utils.anyIsError(number,digits)){return error.value}var sign=number>0?1:-1;return sign*Math.floor(Math.abs(number)*Math.pow(10,digits))/Math.pow(10,digits)};exports.BINOMDISTRANGE=function(trials,probability,successes,successes2){successes2=typeof successes2==="undefined"?successes:successes2;var result=0;for(var i=successes;i<=successes2;i++){result+=exports.COMBIN(trials,i)*Math.pow(probability,i)*Math.pow(1-probability,trials-i)}return result};exports.BINOMINV=function(trials,probability,alpha){var x=0;while(x<=trials){if(jStat.binomial.cdf(x,trials,probability)>=alpha){return x}x++}};exports.CHISQDIST=function(x,k,cumulative){return cumulative?jStat.chisquare.cdf(x,k):jStat.chisquare.pdf(x,k)};exports.CHISQDISTRT=function(){return};exports.CHISQINV=function(probability,k){return jStat.chisquare.inv(probability,k)};exports.CHISQINVRT=function(){return};exports.CHISQTEST=function(){return};exports.CONFIDENCENORM=function(alpha,sd,n){return jStat.normalci(1,alpha,sd,n)[1]-1};exports.CONFIDENCET=function(alpha,sd,n){return jStat.tci(1,alpha,sd,n)[1]-1};exports.CORREL=function(){return jStat.corrcoeff.apply(this,arguments)}},{"./error":6,"./information":8,"./statistical":13,"./utils":15,numeric:22}],12:[function(require,module,exports){var _=require("lodash");var utils=require("./utils");var md5=require("blueimp-md5").md5;var numeral=require("numeral");exports.UNIQUE=function(){return _.unique(arguments)};exports.FLATTEN=function(){return utils.flatten(arguments)};exports.ARGS2ARRAY=function(){return Array.prototype.slice.call(arguments,0)};exports.GETJSON=function(file){var request=new XMLHttpRequest;request.open("GET",file,false);request.send(null);if(request.status===200){return JSON.parse(request.responseText)}};exports.MD5=function(data,key,raw){return md5(data,key,raw)};exports.REFERENCE=function(context,reference){try{var path=reference.split(".");var result=context;_(path).forEach(function(step){if(step[step.length-1]==="]"){var opening=step.indexOf("[");var index=step.substring(opening+1,step.length-1);result=result[step.substring(0,opening)][index]}else{result=result[step]}});return result}catch(error){return}};exports.JOIN=function(array,separator){return array.join(separator)};exports.NUMBERS=function(){var possibleNumbers=utils.flatten(arguments);return possibleNumbers.filter(function(el){return typeof el==="number"})};exports.NUMERAL=function(number,format){return numeral(number).format(format)}},{"./utils":15,"blueimp-md5":17,lodash:19,numeral:21}],13:[function(require,module,exports){var mathTrig=require("./math-trig");var text=require("./text");var jStat=require("jStat").jStat;var _=require("lodash");var utils=require("./utils");var error=require("./error");var SQRT2PI=2.5066282746310002;exports.AVEDEV=function(){var range=utils.parseNumberArray(utils.flatten(arguments));if(range instanceof Error){return range}return jStat.sum(jStat(range).subtract(jStat.mean(range)).abs()[0])/range.length};exports.AVERAGE=function(){var range=utils.numbers(utils.flatten(arguments));var n=range.length;var sum=0;var count=0;for(var i=0;i<n;i++){sum+=range[i];count+=1}return sum/count};exports.AVERAGEA=function(){var range=utils.flatten(arguments);var n=range.length;var sum=0;var count=0;for(var i=0;i<n;i++){var el=range[i];if(typeof el==="number"){sum+=el}if(el===true){sum++}if(el!==null){count++}}return sum/count};exports.AVERAGEIF=function(range,criteria,average_range){average_range=average_range||range;range=utils.flatten(range);average_range=utils.parseNumberArray(utils.flatten(average_range));if(average_range instanceof Error){return average_range}var average_count=0;var result=0;for(var i=0;i<range.length;i++){if(eval(range[i]+criteria)){result+=average_range[i];average_count++}}return result/average_count};exports.AVERAGEIFS=function(){var args=utils.argsToArray(arguments);var criteria=(args.length-1)/2;var range=utils.flatten(args[0]);var count=0;var result=0;for(var i=0;i<range.length;i++){var condition="";for(var j=0;j<criteria;j++){condition+=args[2*j+1][i]+args[2*j+2];if(j!==criteria-1){condition+="&&"}}if(eval(condition)){result+=range[i];count++}}var average=result/count;if(isNaN(average)){return 0}else{return average}};exports.BETA={};exports.BETA.DIST=function(x,alpha,beta,cumulative,A,B){A=A===undefined?0:A;B=B===undefined?1:B;x=utils.parseNumber(x);alpha=utils.parseNumber(alpha);beta=utils.parseNumber(beta);A=utils.parseNumber(A);
B=utils.parseNumber(B);if(utils.anyIsError(x,alpha,beta,A,B)){return error.value}x=(x-A)/(B-A);return cumulative?jStat.beta.cdf(x,alpha,beta):jStat.beta.pdf(x,alpha,beta)};exports.BETA.INV=function(probability,alpha,beta,A,B){A=A===undefined?0:A;B=B===undefined?1:B;probability=utils.parseNumber(probability);alpha=utils.parseNumber(alpha);beta=utils.parseNumber(beta);A=utils.parseNumber(A);B=utils.parseNumber(B);if(utils.anyIsError(probability,alpha,beta,A,B)){return error.value}return jStat.beta.inv(probability,alpha,beta)*(B-A)+A};exports.BINOM={};exports.BINOM.DIST=function(successes,trials,probability,cumulative){successes=utils.parseNumber(successes);trials=utils.parseNumber(trials);probability=utils.parseNumber(probability);cumulative=utils.parseNumber(cumulative);if(utils.anyIsError(successes,trials,probability,cumulative)){return error.value}return cumulative?jStat.binomial.cdf(successes,trials,probability):jStat.binomial.pdf(successes,trials,probability)};exports.BINOM.DIST.RANGE=function(trials,probability,successes,successes2){successes2=successes2===undefined?successes:successes2;trials=utils.parseNumber(trials);probability=utils.parseNumber(probability);successes=utils.parseNumber(successes);successes2=utils.parseNumber(successes2);if(utils.anyIsError(trials,probability,successes,successes2)){return error.value}var result=0;for(var i=successes;i<=successes2;i++){result+=mathTrig.COMBIN(trials,i)*Math.pow(probability,i)*Math.pow(1-probability,trials-i)}return result};exports.BINOM.INV=function(trials,probability,alpha){trials=utils.parseNumber(trials);probability=utils.parseNumber(probability);alpha=utils.parseNumber(alpha);if(utils.anyIsError(trials,probability,alpha)){return error.value}var x=0;while(x<=trials){if(jStat.binomial.cdf(x,trials,probability)>=alpha){return x}x++}};exports.CHISQ={};exports.CHISQ.DIST=function(x,k,cumulative){x=utils.parseNumber(x);k=utils.parseNumber(k);if(utils.anyIsError(x,k)){return error.value}return cumulative?jStat.chisquare.cdf(x,k):jStat.chisquare.pdf(x,k)};exports.CHISQ.DIST.RT=function(){throw new Error("CHISQ.DIST.RT is not implemented")};exports.CHISQ.INV=function(probability,k){probability=utils.parseNumber(probability);k=utils.parseNumber(k);if(utils.anyIsError(probability,k)){return error.value}return jStat.chisquare.inv(probability,k)};exports.CHISQ.INV.RT=function(){throw new Error("CHISQ.INV.RT is not implemented")};exports.CHISQ.TEST=function(){throw new Error("CHISQ.TEST is not implemented")};exports.CONFIDENCE={};exports.CONFIDENCE.NORM=function(alpha,sd,n){alpha=utils.parseNumber(alpha);sd=utils.parseNumber(sd);n=utils.parseNumber(n);if(utils.anyIsError(alpha,sd,n)){return error.value}return jStat.normalci(1,alpha,sd,n)[1]-1};exports.CONFIDENCE.T=function(alpha,sd,n){alpha=utils.parseNumber(alpha);sd=utils.parseNumber(sd);n=utils.parseNumber(n);if(utils.anyIsError(alpha,sd,n)){return error.value}return jStat.tci(1,alpha,sd,n)[1]-1};exports.CORREL=function(array1,array2){array1=utils.parseNumberArray(utils.flatten(array1));array2=utils.parseNumberArray(utils.flatten(array2));if(utils.anyIsError(array1,array2)){return error.value}return jStat.corrcoeff(array1,array2)};exports.COUNT=function(){var numbers=utils.numbers(utils.flatten(arguments));return numbers.length};exports.COUNTA=function(){var range=utils.flatten(arguments);return range.length-exports.COUNTBLANK(range)};exports.COUNTIN=function(range,value){var result=0;for(var i=0;i<range.length;i++){if(range[i]===value){result++}}return result};exports.COUNTBLANK=function(){var range=utils.flatten(arguments);var blanks=0;var element;for(var i=0;i<range.length;i++){element=range[i];if(element===null||element===""){blanks++}}return blanks};exports.COUNTIF=function(range,criteria){range=utils.flatten(range);if(!/[<>=!]/.test(criteria)){criteria='=="'+criteria+'"'}var matches=0;for(var i=0;i<range.length;i++){if(typeof range[i]!=="string"){if(eval(range[i]+criteria)){matches++}}else{if(eval('"'+range[i]+'"'+criteria)){matches++}}}return matches};exports.COUNTIFS=function(){var args=utils.argsToArray(arguments);var results=new Array(utils.flatten(args[0]).length);for(var i=0;i<results.length;i++){results[i]=true}for(i=0;i<args.length;i+=2){var range=utils.flatten(args[i]);var criteria=args[i+1];if(!/[<>=!]/.test(criteria)){criteria='=="'+criteria+'"'}for(var j=0;j<range.length;j++){if(typeof range[j]!=="string"){results[j]=results[j]&&eval(range[j]+criteria)}else{results[j]=results[j]&&eval('"'+range[j]+'"'+criteria)}}}var result=0;for(i=0;i<results.length;i++){if(results[i]){result++}}return result};exports.COUNTUNIQUE=function(){return _.uniq(utils.flatten(arguments)).length};exports.COVARIANCE={};exports.COVARIANCE.P=function(array1,array2){array1=utils.parseNumberArray(utils.flatten(array1));array2=utils.parseNumberArray(utils.flatten(array2));if(utils.anyIsError(array1,array2)){return error.value}var mean1=jStat.mean(array1);var mean2=jStat.mean(array2);var result=0;var n=array1.length;for(var i=0;i<n;i++){result+=(array1[i]-mean1)*(array2[i]-mean2)}return result/n};exports.COVARIANCE.S=function(array1,array2){array1=utils.parseNumberArray(utils.flatten(array1));array2=utils.parseNumberArray(utils.flatten(array2));if(utils.anyIsError(array1,array2)){return error.value}return jStat.covariance(array1,array2)};exports.DEVSQ=function(){var range=utils.parseNumberArray(utils.flatten(arguments));if(range instanceof Error){return range}var mean=jStat.mean(range);var result=0;for(var i=0;i<range.length;i++){result+=Math.pow(range[i]-mean,2)}return result};exports.EXPON={};exports.EXPON.DIST=function(x,lambda,cumulative){x=utils.parseNumber(x);lambda=utils.parseNumber(lambda);if(utils.anyIsError(x,lambda)){return error.value}return cumulative?jStat.exponential.cdf(x,lambda):jStat.exponential.pdf(x,lambda)};exports.F={};exports.F.DIST=function(x,d1,d2,cumulative){x=utils.parseNumber(x);d1=utils.parseNumber(d1);d2=utils.parseNumber(d2);if(utils.anyIsError(x,d1,d2)){return error.value}return cumulative?jStat.centralF.pdf(x,d1,d2):jStat.centralF.cdf(x,d1,d2)};exports.F.DIST.RT=function(){throw new Error("F.DIST.RT is not implemented")};exports.F.INV=function(probability,d1,d2){probability=utils.parseNumber(probability);d1=utils.parseNumber(d1);d2=utils.parseNumber(d2);if(utils.anyIsError(probability,d1,d2)){return error.value}if(probability<=0||probability>1){return error.num}return jStat.centralF.inv(probability,d1,d2)};exports.F.INV.RT=function(){throw new Error("F.INV.RT is not implemented")};exports.F.TEST=function(){throw new Error("F.TEST is not implemented")};exports.FISHER=function(x){x=utils.parseNumber(x);if(x instanceof Error){return x}return Math.log((1+x)/(1-x))/2};exports.FISHERINV=function(y){y=utils.parseNumber(y);if(y instanceof Error){return y}var e2y=Math.exp(2*y);return(e2y-1)/(e2y+1)};exports.FORECAST=function(x,data_y,data_x){x=utils.parseNumber(x);data_y=utils.parseNumberArray(utils.flatten(data_y));data_x=utils.parseNumberArray(utils.flatten(data_x));if(utils.anyIsError(x,data_y,data_x)){return error.value}var xmean=jStat.mean(data_x);var ymean=jStat.mean(data_y);var n=data_x.length;var num=0;var den=0;for(var i=0;i<n;i++){num+=(data_x[i]-xmean)*(data_y[i]-ymean);den+=Math.pow(data_x[i]-xmean,2)}var b=num/den;var a=ymean-b*xmean;return a+b*x};exports.FREQUENCY=function(data,bins){data=utils.parseNumberArray(utils.flatten(data));bins=utils.parseNumberArray(utils.flatten(bins));if(utils.anyIsError(data,bins)){return error.value}var n=data.length;var b=bins.length;var r=[];for(var i=0;i<=b;i++){r[i]=0;for(var j=0;j<n;j++){if(i===0){if(data[j]<=bins[0]){r[0]+=1}}else if(i<b){if(data[j]>bins[i-1]&&data[j]<=bins[i]){r[i]+=1}}else if(i===b){if(data[j]>bins[b-1]){r[b]+=1}}}}return r};exports.GAMMA=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}if(number===0){return error.num}if(parseInt(number,10)===number&&number<0){return error.num}return jStat.gammafn(number)};exports.GAMMA.DIST=function(){throw new Error("GAMMA.DIST is not implemented")};exports.GAMMA.INV=function(){throw new Error("GAMMA.INV is not implemented")};exports.GAMMALN=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return jStat.gammaln(number)};exports.GAMMALN.PRECISE=function(){throw new Error("GAMMALN.PRECISE is not implemented")};exports.GAUSS=function(z){z=utils.parseNumber(z);if(z instanceof Error){return z}return jStat.normal.cdf(z,0,1)-.5};exports.GEOMEAN=function(){var args=utils.parseNumberArray(utils.flatten(arguments));if(args instanceof Error){return args}return jStat.geomean(args)};exports.GROWTH=function(known_y,known_x,new_x,use_const){known_y=utils.parseNumberArray(known_y);if(known_y instanceof Error){return known_y}var i;if(known_x===undefined){known_x=[];for(i=1;i<=known_y.length;i++){known_x.push(i)}}if(new_x===undefined){new_x=[];for(i=1;i<=known_y.length;i++){new_x.push(i)}}known_x=utils.parseNumberArray(known_x);new_x=utils.parseNumberArray(new_x);if(utils.anyIsError(known_x,new_x)){return error.value}if(use_const===undefined){use_const=true}var n=known_y.length;var avg_x=0;var avg_y=0;var avg_xy=0;var avg_xx=0;for(i=0;i<n;i++){var x=known_x[i];var y=Math.log(known_y[i]);avg_x+=x;avg_y+=y;avg_xy+=x*y;avg_xx+=x*x}avg_x/=n;avg_y/=n;avg_xy/=n;avg_xx/=n;var beta;var alpha;if(use_const){beta=(avg_xy-avg_x*avg_y)/(avg_xx-avg_x*avg_x);alpha=avg_y-beta*avg_x}else{beta=avg_xy/avg_xx;alpha=0}var new_y=[];for(i=0;i<new_x.length;i++){new_y.push(Math.exp(alpha+beta*new_x[i]))}return new_y};exports.HARMEAN=function(){var range=utils.parseNumberArray(utils.flatten(arguments));if(range instanceof Error){return range}var n=range.length;var den=0;for(var i=0;i<n;i++){den+=1/range[i]}return n/den};exports.HYPGEOM={};exports.HYPGEOM.DIST=function(x,n,M,N,cumulative){x=utils.parseNumber(x);n=utils.parseNumber(n);M=utils.parseNumber(M);N=utils.parseNumber(N);if(utils.anyIsError(x,n,M,N)){return error.value}function pdf(x,n,M,N){return mathTrig.COMBIN(M,x)*mathTrig.COMBIN(N-M,n-x)/mathTrig.COMBIN(N,n)}function cdf(x,n,M,N){var result=0;for(var i=0;i<=x;i++){result+=pdf(i,n,M,N)}return result}return cumulative?cdf(x,n,M,N):pdf(x,n,M,N)};exports.INTERCEPT=function(known_y,known_x){known_y=utils.parseNumberArray(known_y);known_x=utils.parseNumberArray(known_x);if(utils.anyIsError(known_y,known_x)){return error.value}if(known_y.length!==known_x.length){return error.na}return exports.FORECAST(0,known_y,known_x)};exports.KURT=function(){var range=utils.parseNumberArray(utils.flatten(arguments));if(range instanceof Error){return range}var mean=jStat.mean(range);var n=range.length;var sigma=0;for(var i=0;i<n;i++){sigma+=Math.pow(range[i]-mean,4)}sigma=sigma/Math.pow(jStat.stdev(range,true),4);return n*(n+1)/((n-1)*(n-2)*(n-3))*sigma-3*(n-1)*(n-1)/((n-2)*(n-3))};exports.LARGE=function(range,k){range=utils.parseNumberArray(utils.flatten(range));k=utils.parseNumber(k);if(utils.anyIsError(range,k)){return range}return range.sort(function(a,b){return b-a})[k-1]};exports.LINEST=function(data_y,data_x){data_y=utils.parseNumberArray(utils.flatten(data_y));data_x=utils.parseNumberArray(utils.flatten(data_x));if(utils.anyIsError(data_y,data_x)){return error.value}var ymean=jStat.mean(data_y);var xmean=jStat.mean(data_x);var n=data_x.length;var num=0;var den=0;for(var i=0;i<n;i++){num+=(data_x[i]-xmean)*(data_y[i]-ymean);den+=Math.pow(data_x[i]-xmean,2)}var m=num/den;var b=ymean-m*xmean;return[m,b]};exports.LOGEST=function(){throw new Error("LOGEST is not implemented")};exports.LOGNORM={};exports.LOGNORM.DIST=function(x,mean,sd,cumulative){x=utils.parseNumber(x);mean=utils.parseNumber(mean);sd=utils.parseNumber(sd);if(utils.anyIsError(x,mean,sd)){return error.value}return cumulative?jStat.lognormal.cdf(x,mean,sd):jStat.lognormal.pdf(x,mean,sd)};exports.LOGNORM.INV=function(probability,mean,sd){probability=utils.parseNumber(probability);mean=utils.parseNumber(mean);sd=utils.parseNumber(sd);if(utils.anyIsError(probability,mean,sd)){return error.value}return jStat.lognormal.inv(probability,mean,sd)};exports.MAX=function(){var range=utils.numbers(utils.flatten(arguments));return range.length===0?0:Math.max.apply(Math,range)};exports.MAXA=function(){var range=utils.arrayValuesToNumbers(utils.flatten(arguments));return range.length===0?0:Math.max.apply(Math,range)};exports.MEDIAN=function(){var range=utils.arrayValuesToNumbers(utils.flatten(arguments));return jStat.median(range)};exports.MIN=function(){var range=utils.numbers(utils.flatten(arguments));return range.length===0?0:Math.min.apply(Math,range)};exports.MINA=function(){var range=utils.arrayValuesToNumbers(utils.flatten(arguments));return range.length===0?0:Math.min.apply(Math,range)};exports.MODE={};exports.MODE.MULT=function(){var range=utils.parseNumberArray(utils.flatten(arguments));if(range instanceof Error){return range}var n=range.length;var count={};var maxItems=[];var max=0;var currentItem;for(var i=0;i<n;i++){currentItem=range[i];count[currentItem]=count[currentItem]?count[currentItem]+1:1;if(count[currentItem]>max){max=count[currentItem];maxItems=[]}if(count[currentItem]===max){maxItems[maxItems.length]=currentItem}}return maxItems};exports.MODE.SNGL=function(){var range=utils.parseNumberArray(utils.flatten(arguments));if(range instanceof Error){return range}return exports.MODE.MULT(range).sort(function(a,b){return a-b})[0]};exports.NEGBINOM={};exports.NEGBINOM.DIST=function(k,r,p,cumulative){k=utils.parseNumber(k);r=utils.parseNumber(r);p=utils.parseNumber(p);if(utils.anyIsError(k,r,p)){return error.value}return cumulative?jStat.negbin.cdf(k,r,p):jStat.negbin.pdf(k,r,p)};exports.NORM={};exports.NORM.DIST=function(x,mean,sd,cumulative){x=utils.parseNumber(x);mean=utils.parseNumber(mean);sd=utils.parseNumber(sd);if(utils.anyIsError(x,mean,sd)){return error.value}if(sd<=0){return error.num}return cumulative?jStat.normal.cdf(x,mean,sd):jStat.normal.pdf(x,mean,sd)};exports.NORM.INV=function(probability,mean,sd){probability=utils.parseNumber(probability);mean=utils.parseNumber(mean);sd=utils.parseNumber(sd);if(utils.anyIsError(probability,mean,sd)){return error.value}return jStat.normal.inv(probability,mean,sd)};exports.NORM.S={};exports.NORM.S.DIST=function(z,cumulative){z=utils.parseNumber(z);if(z instanceof Error){return error.value}return cumulative?jStat.normal.cdf(z,0,1):jStat.normal.pdf(z,0,1)};exports.NORM.S.INV=function(probability){probability=utils.parseNumber(probability);if(probability instanceof Error){return error.value}return jStat.normal.inv(probability,0,1)};exports.PEARSON=function(data_x,data_y){data_y=utils.parseNumberArray(utils.flatten(data_y));data_x=utils.parseNumberArray(utils.flatten(data_x));if(utils.anyIsError(data_y,data_x)){return error.value}var xmean=jStat.mean(data_x);var ymean=jStat.mean(data_y);var n=data_x.length;var num=0;var den1=0;var den2=0;for(var i=0;i<n;i++){num+=(data_x[i]-xmean)*(data_y[i]-ymean);den1+=Math.pow(data_x[i]-xmean,2);den2+=Math.pow(data_y[i]-ymean,2)}return num/Math.sqrt(den1*den2)};exports.PERCENTILE={};exports.PERCENTILE.EXC=function(array,k){array=utils.parseNumberArray(utils.flatten(array));k=utils.parseNumber(k);if(utils.anyIsError(array,k)){return error.value}array=array.sort(function(a,b){{return a-b}});var n=array.length;if(k<1/(n+1)||k>1-1/(n+1)){return error.num}var l=k*(n+1)-1;var fl=Math.floor(l);return utils.cleanFloat(l===fl?array[l]:array[fl]+(l-fl)*(array[fl+1]-array[fl]))};exports.PERCENTILE.INC=function(array,k){array=utils.parseNumberArray(utils.flatten(array));k=utils.parseNumber(k);if(utils.anyIsError(array,k)){return error.value}array=array.sort(function(a,b){return a-b});var n=array.length;var l=k*(n-1);var fl=Math.floor(l);return utils.cleanFloat(l===fl?array[l]:array[fl]+(l-fl)*(array[fl+1]-array[fl]))};exports.PERCENTRANK={};exports.PERCENTRANK.EXC=function(array,x,significance){significance=significance===undefined?3:significance;array=utils.parseNumberArray(utils.flatten(array));x=utils.parseNumber(x);significance=utils.parseNumber(significance);if(utils.anyIsError(array,x,significance)){return error.value}array=array.sort(function(a,b){return a-b});var uniques=_.uniq(array);var n=array.length;var m=uniques.length;var power=Math.pow(10,significance);var result=0;var match=false;var i=0;while(!match&&i<m){if(x===uniques[i]){result=(array.indexOf(uniques[i])+1)/(n+1);match=true}else if(x>=uniques[i]&&(x<uniques[i+1]||i===m-1)){result=(array.indexOf(uniques[i])+1+(x-uniques[i])/(uniques[i+1]-uniques[i]))/(n+1);match=true}i++}return Math.floor(result*power)/power};exports.PERCENTRANK.INC=function(array,x,significance){significance=significance===undefined?3:significance;array=utils.parseNumberArray(utils.flatten(array));x=utils.parseNumber(x);significance=utils.parseNumber(significance);if(utils.anyIsError(array,x,significance)){return error.value}array=array.sort(function(a,b){return a-b});var uniques=_.uniq(array);var n=array.length;var m=uniques.length;var power=Math.pow(10,significance);var result=0;var match=false;var i=0;while(!match&&i<m){if(x===uniques[i]){result=array.indexOf(uniques[i])/(n-1);match=true}else if(x>=uniques[i]&&(x<uniques[i+1]||i===m-1)){result=(array.indexOf(uniques[i])+(x-uniques[i])/(uniques[i+1]-uniques[i]))/(n-1);match=true}i++}return Math.floor(result*power)/power};exports.PERMUT=function(number,number_chosen){number=utils.parseNumber(number);number_chosen=utils.parseNumber(number_chosen);if(utils.anyIsError(number,number_chosen)){return error.value}return mathTrig.FACT(number)/mathTrig.FACT(number-number_chosen)};exports.PERMUTATIONA=function(number,number_chosen){number=utils.parseNumber(number);number_chosen=utils.parseNumber(number_chosen);if(utils.anyIsError(number,number_chosen)){return error.value}return Math.pow(number,number_chosen)};exports.PHI=function(x){x=utils.parseNumber(x);if(x instanceof Error){return error.value}return Math.exp(-.5*x*x)/SQRT2PI};exports.POISSON={};exports.POISSON.DIST=function(x,mean,cumulative){x=utils.parseNumber(x);mean=utils.parseNumber(mean);if(utils.anyIsError(x,mean)){return error.value}return cumulative?jStat.poisson.cdf(x,mean):jStat.poisson.pdf(x,mean)};exports.PROB=function(range,probability,lower,upper){if(lower===undefined){return 0}upper=upper===undefined?lower:upper;range=utils.parseNumberArray(utils.flatten(range));probability=utils.parseNumberArray(utils.flatten(probability));lower=utils.parseNumber(lower);upper=utils.parseNumber(upper);if(utils.anyIsError(range,probability,lower,upper)){return error.value}if(lower===upper){return range.indexOf(lower)>=0?probability[range.indexOf(lower)]:0}var sorted=range.sort(function(a,b){return a-b});var n=sorted.length;var result=0;for(var i=0;i<n;i++){if(sorted[i]>=lower&&sorted[i]<=upper){result+=probability[range.indexOf(sorted[i])]}}return result};exports.QUARTILE={};exports.QUARTILE.EXC=function(range,quart){range=utils.parseNumberArray(utils.flatten(range));quart=utils.parseNumber(quart);if(utils.anyIsError(range,quart)){return error.value}switch(quart){case 1:return exports.PERCENTILE.EXC(range,.25);case 2:return exports.PERCENTILE.EXC(range,.5);case 3:return exports.PERCENTILE.EXC(range,.75);default:return error.num}};exports.QUARTILE.INC=function(range,quart){range=utils.parseNumberArray(utils.flatten(range));quart=utils.parseNumber(quart);if(utils.anyIsError(range,quart)){return error.value}switch(quart){case 1:return exports.PERCENTILE.INC(range,.25);case 2:return exports.PERCENTILE.INC(range,.5);case 3:return exports.PERCENTILE.INC(range,.75);default:return error.num}};exports.RANK={};exports.RANK.AVG=function(number,range,order){number=utils.parseNumber(number);range=utils.parseNumberArray(utils.flatten(range));if(utils.anyIsError(number,range)){return error.value}range=utils.flatten(range);order=order||false;var sort=order?function(a,b){return a-b}:function(a,b){return b-a};range=range.sort(sort);var length=range.length;var count=0;for(var i=0;i<length;i++){if(range[i]===number){count++}}return count>1?(2*range.indexOf(number)+count+1)/2:range.indexOf(number)+1};exports.RANK.EQ=function(number,range,order){number=utils.parseNumber(number);range=utils.parseNumberArray(utils.flatten(range));if(utils.anyIsError(number,range)){return error.value}order=order||false;var sort=order?function(a,b){return a-b}:function(a,b){return b-a};range=range.sort(sort);return range.indexOf(number)+1};exports.RSQ=function(data_x,data_y){data_x=utils.parseNumberArray(utils.flatten(data_x));data_y=utils.parseNumberArray(utils.flatten(data_y));if(utils.anyIsError(data_x,data_y)){return error.value}return Math.pow(exports.PEARSON(data_x,data_y),2)};exports.SKEW=function(){var range=utils.parseNumberArray(utils.flatten(arguments));if(range instanceof Error){return range}var mean=jStat.mean(range);var n=range.length;var sigma=0;for(var i=0;i<n;i++){sigma+=Math.pow(range[i]-mean,3)}return n*sigma/((n-1)*(n-2)*Math.pow(jStat.stdev(range,true),3))};exports.SKEW.P=function(){var range=utils.parseNumberArray(utils.flatten(arguments));if(range instanceof Error){return range}var mean=jStat.mean(range);var n=range.length;var m2=0;var m3=0;for(var i=0;i<n;i++){m3+=Math.pow(range[i]-mean,3);m2+=Math.pow(range[i]-mean,2)}m3=m3/n;m2=m2/n;return m3/Math.pow(m2,3/2)};exports.SLOPE=function(data_y,data_x){data_y=utils.parseNumberArray(utils.flatten(data_y));data_x=utils.parseNumberArray(utils.flatten(data_x));if(utils.anyIsError(data_y,data_x)){return error.value}var xmean=jStat.mean(data_x);var ymean=jStat.mean(data_y);var n=data_x.length;var num=0;var den=0;for(var i=0;i<n;i++){num+=(data_x[i]-xmean)*(data_y[i]-ymean);den+=Math.pow(data_x[i]-xmean,2)}return num/den};exports.SMALL=function(range,k){range=utils.parseNumberArray(utils.flatten(range));k=utils.parseNumber(k);if(utils.anyIsError(range,k)){return range}return range.sort(function(a,b){return a-b})[k-1]};exports.STANDARDIZE=function(x,mean,sd){x=utils.parseNumber(x);mean=utils.parseNumber(mean);sd=utils.parseNumber(sd);if(utils.anyIsError(x,mean,sd)){return error.value}return(x-mean)/sd};exports.STDEV={};exports.STDEV.P=function(){var v=exports.VAR.P.apply(this,arguments);return Math.sqrt(v)};exports.STDEV.S=function(){var v=exports.VAR.S.apply(this,arguments);return Math.sqrt(v)};exports.STDEVA=function(){var v=exports.VARA.apply(this,arguments);return Math.sqrt(v)};exports.STDEVPA=function(){var v=exports.VARPA.apply(this,arguments);return Math.sqrt(v)};exports.STEYX=function(data_y,data_x){data_y=utils.parseNumberArray(utils.flatten(data_y));data_x=utils.parseNumberArray(utils.flatten(data_x));if(utils.anyIsError(data_y,data_x)){return error.value}var xmean=jStat.mean(data_x);var ymean=jStat.mean(data_y);var n=data_x.length;var lft=0;var num=0;var den=0;for(var i=0;i<n;i++){lft+=Math.pow(data_y[i]-ymean,2);num+=(data_x[i]-xmean)*(data_y[i]-ymean);den+=Math.pow(data_x[i]-xmean,2)}return Math.sqrt((lft-num*num/den)/(n-2))};exports.T=text.T;exports.T.DIST=function(x,df,cumulative){x=utils.parseNumber(x);df=utils.parseNumber(df);if(utils.anyIsError(x,df)){return error.value}return cumulative?jStat.studentt.cdf(x,df):jStat.studentt.pdf(x,df)};exports.T.DIST["2T"]=function(){throw new Error("T.DIST.2T is not implemented")};exports.T.DIST.RT=function(){throw new Error("T.DIST.RT is not implemented")};exports.T.INV=function(probability,df){probability=utils.parseNumber(probability);df=utils.parseNumber(df);if(utils.anyIsError(probability,df)){return error.value}return jStat.studentt.inv(probability,df)};exports.T.INV["2T"]=function(){throw new Error("T.INV.2T is not implemented")};exports.T.TEST=function(){throw new Error("T.TEST is not implemented")};exports.TREND=function(){throw new Error("TREND is not implemented")};exports.TRIMMEAN=function(range,percent){range=utils.parseNumberArray(utils.flatten(range));percent=utils.parseNumber(percent);if(utils.anyIsError(range,percent)){return error.value}var trim=mathTrig.FLOOR(range.length*percent,2)/2;return jStat.mean(_.initial(_.rest(range.sort(function(a,b){return a-b}),trim),trim))};exports.VAR={};exports.VAR.P=function(){var range=utils.numbers(utils.flatten(arguments));var n=range.length;var sigma=0;var mean=exports.AVERAGE(range);for(var i=0;i<n;i++){sigma+=Math.pow(range[i]-mean,2)}return sigma/n};exports.VAR.S=function(){var range=utils.numbers(utils.flatten(arguments));var n=range.length;var sigma=0;var mean=exports.AVERAGE(range);for(var i=0;i<n;i++){sigma+=Math.pow(range[i]-mean,2)}return sigma/(n-1)};exports.VARA=function(){var range=utils.flatten(arguments);var n=range.length;var sigma=0;var count=0;var mean=exports.AVERAGEA(range);for(var i=0;i<n;i++){var el=range[i];if(typeof el==="number"){sigma+=Math.pow(el-mean,2)}else if(el===true){sigma+=Math.pow(1-mean,2)}else{sigma+=Math.pow(0-mean,2)}if(el!==null){count++}}return sigma/(count-1)};exports.VARPA=function(){var range=utils.flatten(arguments);var n=range.length;var sigma=0;var count=0;var mean=exports.AVERAGEA(range);for(var i=0;i<n;i++){var el=range[i];if(typeof el==="number"){sigma+=Math.pow(el-mean,2)}else if(el===true){sigma+=Math.pow(1-mean,2)}else{sigma+=Math.pow(0-mean,2)}if(el!==null){count++}}return sigma/count};exports.WEIBULL={};exports.WEIBULL.DIST=function(x,alpha,beta,cumulative){x=utils.parseNumber(x);alpha=utils.parseNumber(alpha);beta=utils.parseNumber(beta);if(utils.anyIsError(x,alpha,beta)){return error.value}return cumulative?1-Math.exp(-Math.pow(x/beta,alpha)):Math.pow(x,alpha-1)*Math.exp(-Math.pow(x/beta,alpha))*alpha/Math.pow(beta,alpha)};exports.Z={};exports.Z.TEST=function(range,x,sd){range=utils.parseNumberArray(utils.flatten(range));x=utils.parseNumber(x);if(utils.anyIsError(range,x)){return error.value}sd=sd||exports.STDEV.S(range);var n=range.length;return 1-exports.NORM.S.DIST((exports.AVERAGE(range)-x)/(sd/Math.sqrt(n)),true)}},{"./error":6,"./math-trig":11,"./text":14,"./utils":15,jStat:18,lodash:19}],14:[function(require,module,exports){var utils=require("./utils");var information=require("./information");var error=require("./error");var numeral=require("numeral");var moment=require("moment");exports.ASC=function(){throw new Error("ASC is not implemented")};exports.BAHTTEXT=function(){throw new Error("BAHTTEXT is not implemented")};exports.CHAR=function(number){number=utils.parseNumber(number);if(number instanceof Error){return number}return String.fromCharCode(number)};exports.CLEAN=function(text){text=text||"";var re=/[\0-\x1F]/g;return text.replace(re,"")};exports.CODE=function(text){text=text||"";return text.charCodeAt(0)};exports.CONCATENATE=function(){var args=utils.flatten(arguments);var trueFound=0;while((trueFound=args.indexOf(true))>-1){args[trueFound]="TRUE"}var falseFound=0;while((falseFound=args.indexOf(false))>-1){args[falseFound]="FALSE"}return args.join("")};exports.DBCS=function(){throw new Error("DBCS is not implemented")};exports.DOLLAR=function(number,decimals){decimals=decimals===undefined?2:decimals;number=utils.parseNumber(number);decimals=utils.parseNumber(decimals);if(utils.anyIsError(number,decimals)){return error.value}var format="";if(decimals<=0){number=Math.round(number*Math.pow(10,decimals))/Math.pow(10,decimals);format="($0,0)"}else if(decimals>0){format="($0,0."+new Array(decimals+1).join("0")+")"}return numeral(number).format(format)};exports.EXACT=function(text1,text2){return text1===text2};exports.FIND=function(find_text,within_text,position){position=position===undefined?0:position;return within_text?within_text.indexOf(find_text,position-1)+1:null};exports.FIXED=function(number,decimals,no_commas){decimals=decimals===undefined?2:decimals;no_commas=no_commas===undefined?false:no_commas;number=utils.parseNumber(number);decimals=utils.parseNumber(decimals);if(utils.anyIsError(number,decimals)){return error.value}var format=no_commas?"0":"0,0";if(decimals<=0){number=Math.round(number*Math.pow(10,decimals))/Math.pow(10,decimals)}else if(decimals>0){format+="."+new Array(decimals+1).join("0")}return numeral(number).format(format)};exports.HTML2TEXT=function(value){var result="";if(value){if(value instanceof Array){value.forEach(function(line){if(result!==""){result+="\n"}result+=line.replace(/<(?:.|\n)*?>/gm,"")})}else{result=value.replace(/<(?:.|\n)*?>/gm,"")}}return result};exports.HUMANIZE=function(value){if(value instanceof Date){var dvalue=moment(value);if(dvalue.hours()||dvalue.minutes()||dvalue.seconds()){return dvalue.format("dddd, MMMM Do YYYY, h:mm:ss")}else{return dvalue.format("dddd, MMMM Do YYYY")}}return value};exports.LEFT=function(text,number){number=number===undefined?1:number;number=utils.parseNumber(number);if(number instanceof Error||typeof text!=="string"){return error.value}return text?text.substring(0,number):null};exports.LEN=function(text){if(arguments.length===0){return error.error}if(typeof text==="string"){return text?text.length:0}if(text.length){return text.length}return error.value};exports.LOWER=function(text){if(typeof text!=="string"){return error.value}return text?text.toLowerCase():text};exports.MID=function(text,start,number){start=utils.parseNumber(start);number=utils.parseNumber(number);if(utils.anyIsError(start,number)||typeof text!=="string"){return number}return text.substring(start-1,number)};exports.NUMBERVALUE=function(text,decimal_separator,group_separator){decimal_separator=typeof decimal_separator==="undefined"?".":decimal_separator;group_separator=typeof group_separator==="undefined"?",":group_separator;return Number(text.replace(decimal_separator,".").replace(group_separator,""))};exports.PRONETIC=function(){throw new Error("PRONETIC is not implemented")};exports.PROPER=function(text){if(text===undefined||text.length===0){return error.value}if(text===true){text="TRUE"}if(text===false){text="FALSE"}if(isNaN(text)&&typeof text==="number"){return error.value}if(typeof text==="number"){text=""+text}return text.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})};exports.REGEXEXTRACT=function(text,regular_expression){var match=text.match(new RegExp(regular_expression));return match?match[match.length>1?match.length-1:0]:null};exports.REGEXMATCH=function(text,regular_expression,full){var match=text.match(new RegExp(regular_expression));return full?match:!!match};exports.REGEXREPLACE=function(text,regular_expression,replacement){return text.replace(new RegExp(regular_expression),replacement)};exports.REPLACE=function(text,position,length,new_text){position=utils.parseNumber(position);length=utils.parseNumber(length);if(utils.anyIsError(position,length)||typeof text!=="string"||typeof new_text!=="string"){return error.value}return text.substr(0,position-1)+new_text+text.substr(position-1+length)};exports.REPT=function(text,number){number=utils.parseNumber(number);if(number instanceof Error){return number}return new Array(number+1).join(text)};exports.RIGHT=function(text,number){number=number===undefined?1:number;number=utils.parseNumber(number);if(number instanceof Error){return number}return text?text.substring(text.length-number):null};exports.SEARCH=function(find_text,within_text,position){if(typeof find_text!=="string"||typeof within_text!=="string"){return error.value}position=position===undefined?0:position;return within_text.toLowerCase().indexOf(find_text.toLowerCase(),position-1)+1};exports.SPLIT=function(text,separator){return text.split(separator)};exports.SUBSTITUTE=function(text,old_text,new_text,occurrence){if(!text||!old_text||!new_text){return text}else if(occurrence===undefined){return text.replace(new RegExp(old_text,"g"),new_text)}else{var index=0;var i=0;while(text.indexOf(old_text,index)>0){index=text.indexOf(old_text,index+1);i++;if(i===occurrence){return text.substring(0,index)+new_text+text.substring(index+old_text.length)}}}};exports.T=function(value){return typeof value==="string"?value:""};exports.TEXT=function(value,format){value=utils.parseNumber(value);if(utils.anyIsError(value)){return error.na}return numeral(value).format(format)};exports.TRIM=function(text){if(typeof text!=="string"){return error.value
}return text.replace(/ +/g," ").trim()};exports.UNICHAR=this.CHAR;exports.UNICODE=this.CODE;exports.UPPER=function(text){if(typeof text!=="string"){return error.value}return text.toUpperCase()};exports.VALUE=function(text){if(typeof text!=="string"){return error.value}return numeral().unformat(text)}},{"./error":6,"./information":8,"./utils":15,moment:20,numeral:21}],15:[function(require,module,exports){var _=require("lodash");var error=require("./error");exports.flatten=function(){return _.flatten(arguments)};exports.argsToArray=function(args){return Array.prototype.slice.call(args,0)};exports.numbers=function(){var possibleNumbers=this.flatten(arguments);return possibleNumbers.filter(function(el){return typeof el==="number"})};exports.cleanFloat=function(number){var power=1e14;return Math.round(number*power)/power};exports.parseBool=function(bool){if(typeof bool==="boolean"){return bool}if(bool instanceof Error){return bool}if(typeof bool==="number"){if(bool===0){return false}else{return true}}if(typeof bool==="string"){var up=bool.toUpperCase();if(up==="TRUE"){return true}if(up==="FALSE"){return false}}if(bool instanceof Date&&!isNaN(bool)){return true}return error.value};exports.parseNumber=function(string){if(string===undefined||string===""){return error.value}if(!isNaN(string)){return parseFloat(string)}return error.value};exports.parseNumberArray=function(arr){var len;if(!arr||(len=arr.length)===0){return error.value}var parsed;while(len--){parsed=exports.parseNumber(arr[len]);if(parsed===error.value){return parsed}arr[len]=parsed}return arr};exports.parseMatrix=function(matrix){var n;if(!matrix||(n=matrix.length)===0){return error.value}var pnarr;for(var i=0;i<matrix.length;i++){pnarr=exports.parseNumberArray(matrix[i]);matrix[i]=pnarr;if(pnarr instanceof Error){return pnarr}}return matrix};var d1900=new Date(1900,0,1);exports.parseDate=function(date){if(!isNaN(date)){if(date instanceof Date){return new Date(date)}var d=parseInt(date,10);if(d<0){return error.num}if(d<=60){return new Date(d1900.getTime()+(d-1)*864e5)}return new Date(d1900.getTime()+(d-2)*864e5)}if(typeof date==="string"){date=new Date(date);if(!isNaN(date)){return date}}return error.value};exports.parseDateArray=function(arr){var len=arr.length;var parsed;while(len--){parsed=this.parseDate(arr[len]);if(parsed===error.value){return parsed}arr[len]=parsed}return arr};exports.anyIsError=function(){var n=arguments.length;while(n--){if(arguments[n]instanceof Error){return true}}return false};exports.arrayValuesToNumbers=function(arr){var n=arr.length;var el;while(n--){el=arr[n];if(typeof el==="number"){continue}if(el===true){arr[n]=1;continue}if(el===false){arr[n]=0;continue}if(typeof el==="string"){var number=this.parseNumber(el);if(number instanceof Error){arr[n]=0}else{arr[n]=number}}}return arr}},{"./error":6,lodash:19}],16:[function(require,module,exports){var M=Math;function _horner(arr,v){return arr.reduce(function(z,w){return v*z+w},0)}function _bessel_iter(x,n,f0,f1,sign){if(!sign)sign=-1;var tdx=2/x,f2;if(n===0)return f0;if(n===1)return f1;for(var o=1;o!=n;++o){f2=f1*o*tdx+sign*f0;f0=f1;f1=f2}return f1}function _bessel_wrap(bessel0,bessel1,name,nonzero,sign){return function bessel(x,n){if(n===0)return bessel0(x);if(n===1)return bessel1(x);if(n<0)throw name+": Order ("+n+") must be nonnegative";if(nonzero==1&&x===0)throw name+": Undefined when x == 0";if(nonzero==2&&x<=0)throw name+": Undefined when x <= 0";var b0=bessel0(x),b1=bessel1(x);return _bessel_iter(x,n,b0,b1,sign)}}var besselj=function(){var b0_a1a=[57568490574,-13362590354,651619640.7,-11214424.18,77392.33017,-184.9052456].reverse();var b0_a2a=[57568490411,1029532985,9494680.718,59272.64853,267.8532712,1].reverse();var b0_a1b=[1,-.001098628627,2734510407e-14,-2073370639e-15,2.093887211e-7].reverse();var b0_a2b=[-.01562499995,.0001430488765,-6911147651e-15,7.621095161e-7,-9.34935152e-8].reverse();var W=.636619772;function bessel0(x){var a,a1,a2,y=x*x,xx=M.abs(x)-.785398164;if(M.abs(x)<8){a1=_horner(b0_a1a,y);a2=_horner(b0_a2a,y);a=a1/a2}else{y=64/y;a1=_horner(b0_a1b,y);a2=_horner(b0_a2b,y);a=M.sqrt(W/M.abs(x))*(M.cos(xx)*a1-M.sin(xx)*a2*8/M.abs(x))}return a}var b1_a1a=[72362614232,-7895059235,242396853.1,-2972611.439,15704.4826,-30.16036606].reverse();var b1_a2a=[144725228442,2300535178,18583304.74,99447.43394,376.9991397,1].reverse();var b1_a1b=[1,.00183105,-3516396496e-14,2457520174e-15,-2.40337019e-7].reverse();var b1_a2b=[.04687499995,-.0002002690873,8449199096e-15,-8.8228987e-7,1.05787412e-7].reverse();function bessel1(x){var a,a1,a2,y=x*x,xx=M.abs(x)-2.356194491;if(Math.abs(x)<8){a1=x*_horner(b1_a1a,y);a2=_horner(b1_a2a,y);a=a1/a2}else{y=64/y;a1=_horner(b1_a1b,y);a2=_horner(b1_a2b,y);a=M.sqrt(W/M.abs(x))*(M.cos(xx)*a1-M.sin(xx)*a2*8/M.abs(x));if(x<0)a=-a}return a}return function besselj(x,n){n=Math.round(n);if(n===0)return bessel0(M.abs(x));if(n===1)return bessel1(M.abs(x));if(n<0)throw"BESSELJ: Order ("+n+") must be nonnegative";if(M.abs(x)===0)return 0;var ret,j,tox=2/M.abs(x),m,jsum,sum,bjp,bj,bjm;if(M.abs(x)>n){ret=_bessel_iter(x,n,bessel0(M.abs(x)),bessel1(M.abs(x)),-1)}else{m=2*M.floor((n+M.floor(M.sqrt(40*n)))/2);jsum=0;bjp=ret=sum=0;bj=1;for(j=m;j>0;j--){bjm=j*tox*bj-bjp;bjp=bj;bj=bjm;if(M.abs(bj)>1e10){bj*=1e-10;bjp*=1e-10;ret*=1e-10;sum*=1e-10}if(jsum)sum+=bj;jsum=!jsum;if(j==n)ret=bjp}sum=2*sum-bj;ret/=sum}return x<0&&n%2?-ret:ret}}();var bessely=function(){var b0_a1a=[-2957821389,7062834065,-512359803.6,10879881.29,-86327.92757,228.4622733].reverse();var b0_a2a=[40076544269,745249964.8,7189466.438,47447.2647,226.1030244,1].reverse();var b0_a1b=[1,-.001098628627,2734510407e-14,-2073370639e-15,2.093887211e-7].reverse();var b0_a2b=[-.01562499995,.0001430488765,-6911147651e-15,7.621095161e-7,-9.34945152e-8].reverse();var W=.636619772;function bessel0(x){var a,a1,a2,y=x*x,xx=x-.785398164;if(x<8){a1=_horner(b0_a1a,y);a2=_horner(b0_a2a,y);a=a1/a2+W*besselj(x,0)*M.log(x)}else{y=64/y;a1=_horner(b0_a1b,y);a2=_horner(b0_a2b,y);a=M.sqrt(W/x)*(M.sin(xx)*a1+M.cos(xx)*a2*8/x)}return a}var b1_a1a=[-4900604943e3,127527439e4,-51534381390,734926455.1,-4237922.726,8511.937935].reverse();var b1_a2a=[249958057e5,424441966400,3733650367,22459040.02,102042.605,354.9632885,1].reverse();var b1_a1b=[1,.00183105,-3516396496e-14,2457520174e-15,-2.40337019e-7].reverse();var b1_a2b=[.04687499995,-.0002002690873,8449199096e-15,-8.8228987e-7,1.05787412e-7].reverse();function bessel1(x){var a,a1,a2,y=x*x,xx=x-2.356194491;if(x<8){a1=x*_horner(b1_a1a,y);a2=_horner(b1_a2a,y);a=a1/a2+W*(besselj(x,1)*M.log(x)-1/x)}else{y=64/y;a1=_horner(b1_a1b,y);a2=_horner(b1_a2b,y);a=M.sqrt(W/x)*(M.sin(xx)*a1+M.cos(xx)*a2*8/x)}return a}return _bessel_wrap(bessel0,bessel1,"BESSELY",1,-1)}();var besseli=function(){var b0_a=[1,3.5156229,3.0899424,1.2067492,.2659732,.0360768,.0045813].reverse();var b0_b=[.39894228,.01328592,.00225319,-.00157565,.00916281,-.02057706,.02635537,-.01647633,.00392377].reverse();function bessel0(x){if(x<=3.75)return _horner(b0_a,x*x/(3.75*3.75));return M.exp(M.abs(x))/M.sqrt(M.abs(x))*_horner(b0_b,3.75/M.abs(x))}var b1_a=[.5,.87890594,.51498869,.15084934,.02658733,.00301532,32411e-8].reverse();var b1_b=[.39894228,-.03988024,-.00362018,.00163801,-.01031555,.02282967,-.02895312,.01787654,-.00420059].reverse();function bessel1(x){if(x<3.75)return x*_horner(b1_a,x*x/(3.75*3.75));return(x<0?-1:1)*M.exp(M.abs(x))/M.sqrt(M.abs(x))*_horner(b1_b,3.75/M.abs(x))}return function besseli(x,n){n=Math.round(n);if(n===0)return bessel0(x);if(n==1)return bessel1(x);if(n<0)throw"BESSELI Order ("+n+") must be nonnegative";if(M.abs(x)===0)return 0;var ret,j,tox=2/M.abs(x),m,bip,bi,bim;m=2*M.round((n+M.round(M.sqrt(40*n)))/2);bip=ret=0;bi=1;for(j=m;j>0;j--){bim=j*tox*bi+bip;bip=bi;bi=bim;if(M.abs(bi)>1e10){bi*=1e-10;bip*=1e-10;ret*=1e-10}if(j==n)ret=bip}ret*=besseli(x,0)/bi;return x<0&&n%2?-ret:ret}}();var besselk=function(){var b0_a=[-.57721566,.4227842,.23069756,.0348859,.00262698,1075e-7,74e-7].reverse();var b0_b=[1.25331414,-.07832358,.02189568,-.01062446,.00587872,-.0025154,53208e-8].reverse();function bessel0(x){if(x<=2)return-M.log(x/2)*besseli(x,0)+_horner(b0_a,x*x/4);return M.exp(-x)/M.sqrt(x)*_horner(b0_b,2/x)}var b1_a=[1,.15443144,-.67278579,-.18156897,-.01919402,-.00110404,-4686e-8].reverse();var b1_b=[1.25331414,.23498619,-.0365562,.01504268,-.00780353,.00325614,-68245e-8].reverse();function bessel1(x){if(x<=2)return M.log(x/2)*besseli(x,1)+1/x*_horner(b1_a,x*x/4);return M.exp(-x)/M.sqrt(x)*_horner(b1_b,2/x)}return _bessel_wrap(bessel0,bessel1,"BESSELK",2,1)}();if(typeof exports!=="undefined"){exports.besselj=besselj;exports.bessely=bessely;exports.besseli=besseli;exports.besselk=besselk}},{}],17:[function(require,module,exports){(function($){"use strict";function safe_add(x,y){var lsw=(x&65535)+(y&65535),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}function bit_rol(num,cnt){return num<<cnt|num>>>32-cnt}function md5_cmn(q,a,b,x,s,t){return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b)}function md5_ff(a,b,c,d,x,s,t){return md5_cmn(b&c|~b&d,a,b,x,s,t)}function md5_gg(a,b,c,d,x,s,t){return md5_cmn(b&d|c&~d,a,b,x,s,t)}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t)}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|~d),a,b,x,s,t)}function binl_md5(x,len){x[len>>5]|=128<<len%32;x[(len+64>>>9<<4)+14]=len;var i,olda,oldb,oldc,oldd,a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(i=0;i<x.length;i+=16){olda=a;oldb=b;oldc=c;oldd=d;a=md5_ff(a,b,c,d,x[i],7,-680876936);d=md5_ff(d,a,b,c,x[i+1],12,-389564586);c=md5_ff(c,d,a,b,x[i+2],17,606105819);b=md5_ff(b,c,d,a,x[i+3],22,-1044525330);a=md5_ff(a,b,c,d,x[i+4],7,-176418897);d=md5_ff(d,a,b,c,x[i+5],12,1200080426);c=md5_ff(c,d,a,b,x[i+6],17,-1473231341);b=md5_ff(b,c,d,a,x[i+7],22,-45705983);a=md5_ff(a,b,c,d,x[i+8],7,1770035416);d=md5_ff(d,a,b,c,x[i+9],12,-1958414417);c=md5_ff(c,d,a,b,x[i+10],17,-42063);b=md5_ff(b,c,d,a,x[i+11],22,-1990404162);a=md5_ff(a,b,c,d,x[i+12],7,1804603682);d=md5_ff(d,a,b,c,x[i+13],12,-40341101);c=md5_ff(c,d,a,b,x[i+14],17,-1502002290);b=md5_ff(b,c,d,a,x[i+15],22,1236535329);a=md5_gg(a,b,c,d,x[i+1],5,-165796510);d=md5_gg(d,a,b,c,x[i+6],9,-1069501632);c=md5_gg(c,d,a,b,x[i+11],14,643717713);b=md5_gg(b,c,d,a,x[i],20,-373897302);a=md5_gg(a,b,c,d,x[i+5],5,-701558691);d=md5_gg(d,a,b,c,x[i+10],9,38016083);c=md5_gg(c,d,a,b,x[i+15],14,-660478335);b=md5_gg(b,c,d,a,x[i+4],20,-405537848);a=md5_gg(a,b,c,d,x[i+9],5,568446438);d=md5_gg(d,a,b,c,x[i+14],9,-1019803690);c=md5_gg(c,d,a,b,x[i+3],14,-187363961);b=md5_gg(b,c,d,a,x[i+8],20,1163531501);a=md5_gg(a,b,c,d,x[i+13],5,-1444681467);d=md5_gg(d,a,b,c,x[i+2],9,-51403784);c=md5_gg(c,d,a,b,x[i+7],14,1735328473);b=md5_gg(b,c,d,a,x[i+12],20,-1926607734);a=md5_hh(a,b,c,d,x[i+5],4,-378558);d=md5_hh(d,a,b,c,x[i+8],11,-2022574463);c=md5_hh(c,d,a,b,x[i+11],16,1839030562);b=md5_hh(b,c,d,a,x[i+14],23,-35309556);a=md5_hh(a,b,c,d,x[i+1],4,-1530992060);d=md5_hh(d,a,b,c,x[i+4],11,1272893353);c=md5_hh(c,d,a,b,x[i+7],16,-155497632);b=md5_hh(b,c,d,a,x[i+10],23,-1094730640);a=md5_hh(a,b,c,d,x[i+13],4,681279174);d=md5_hh(d,a,b,c,x[i],11,-358537222);c=md5_hh(c,d,a,b,x[i+3],16,-722521979);b=md5_hh(b,c,d,a,x[i+6],23,76029189);a=md5_hh(a,b,c,d,x[i+9],4,-640364487);d=md5_hh(d,a,b,c,x[i+12],11,-421815835);c=md5_hh(c,d,a,b,x[i+15],16,530742520);b=md5_hh(b,c,d,a,x[i+2],23,-995338651);a=md5_ii(a,b,c,d,x[i],6,-198630844);d=md5_ii(d,a,b,c,x[i+7],10,1126891415);c=md5_ii(c,d,a,b,x[i+14],15,-1416354905);b=md5_ii(b,c,d,a,x[i+5],21,-57434055);a=md5_ii(a,b,c,d,x[i+12],6,1700485571);d=md5_ii(d,a,b,c,x[i+3],10,-1894986606);c=md5_ii(c,d,a,b,x[i+10],15,-1051523);b=md5_ii(b,c,d,a,x[i+1],21,-2054922799);a=md5_ii(a,b,c,d,x[i+8],6,1873313359);d=md5_ii(d,a,b,c,x[i+15],10,-30611744);c=md5_ii(c,d,a,b,x[i+6],15,-1560198380);b=md5_ii(b,c,d,a,x[i+13],21,1309151649);a=md5_ii(a,b,c,d,x[i+4],6,-145523070);d=md5_ii(d,a,b,c,x[i+11],10,-1120210379);c=md5_ii(c,d,a,b,x[i+2],15,718787259);b=md5_ii(b,c,d,a,x[i+9],21,-343485551);a=safe_add(a,olda);b=safe_add(b,oldb);c=safe_add(c,oldc);d=safe_add(d,oldd)}return[a,b,c,d]}function binl2rstr(input){var i,output="";for(i=0;i<input.length*32;i+=8){output+=String.fromCharCode(input[i>>5]>>>i%32&255)}return output}function rstr2binl(input){var i,output=[];output[(input.length>>2)-1]=undefined;for(i=0;i<output.length;i+=1){output[i]=0}for(i=0;i<input.length*8;i+=8){output[i>>5]|=(input.charCodeAt(i/8)&255)<<i%32}return output}function rstr_md5(s){return binl2rstr(binl_md5(rstr2binl(s),s.length*8))}function rstr_hmac_md5(key,data){var i,bkey=rstr2binl(key),ipad=[],opad=[],hash;ipad[15]=opad[15]=undefined;if(bkey.length>16){bkey=binl_md5(bkey,key.length*8)}for(i=0;i<16;i+=1){ipad[i]=bkey[i]^909522486;opad[i]=bkey[i]^1549556828}hash=binl_md5(ipad.concat(rstr2binl(data)),512+data.length*8);return binl2rstr(binl_md5(opad.concat(hash),512+128))}function rstr2hex(input){var hex_tab="0123456789abcdef",output="",x,i;for(i=0;i<input.length;i+=1){x=input.charCodeAt(i);output+=hex_tab.charAt(x>>>4&15)+hex_tab.charAt(x&15)}return output}function str2rstr_utf8(input){return unescape(encodeURIComponent(input))}function raw_md5(s){return rstr_md5(str2rstr_utf8(s))}function hex_md5(s){return rstr2hex(raw_md5(s))}function raw_hmac_md5(k,d){return rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d))}function hex_hmac_md5(k,d){return rstr2hex(raw_hmac_md5(k,d))}function md5(string,key,raw){if(!key){if(!raw){return hex_md5(string)}return raw_md5(string)}if(!raw){return hex_hmac_md5(key,string)}return raw_hmac_md5(key,string)}if(typeof define==="function"&&define.amd){define(function(){return md5})}else{$.md5=md5}})(this)},{}],18:[function(require,module,exports){this.j$=this.jStat=function(Math,undefined){var concat=Array.prototype.concat;var slice=Array.prototype.slice;var toString=Object.prototype.toString;function calcRdx(n,m){var val=n>m?n:m;return Math.pow(10,17-~~(Math.log(val>0?val:-val)*Math.LOG10E))}var isArray=Array.isArray||function isArray(arg){return toString.call(arg)==="[object Array]"};function isFunction(arg){return toString.call(arg)==="[object Function]"}function isNumber(arg){return typeof arg==="number"&&arg===arg}function toVector(arr){return concat.apply([],arr)}function jStat(){return new jStat._init(arguments)}jStat.fn=jStat.prototype;jStat._init=function _init(args){var i;if(isArray(args[0])){if(isArray(args[0][0])){if(isFunction(args[1]))args[0]=jStat.map(args[0],args[1]);for(i=0;i<args[0].length;i++)this[i]=args[0][i];this.length=args[0].length}else{this[0]=isFunction(args[1])?jStat.map(args[0],args[1]):args[0];this.length=1}}else if(isNumber(args[0])){this[0]=jStat.seq.apply(null,args);this.length=1}else if(args[0]instanceof jStat){return jStat(args[0].toArray())}else{this[0]=[];this.length=1}return this};jStat._init.prototype=jStat.prototype;jStat._init.constructor=jStat;jStat.utils={calcRdx:calcRdx,isArray:isArray,isFunction:isFunction,isNumber:isNumber,toVector:toVector};jStat.extend=function extend(obj){var i,j;if(arguments.length===1){for(j in obj)jStat[j]=obj[j];return this}for(i=1;i<arguments.length;i++){for(j in arguments[i])obj[j]=arguments[i][j]}return obj};jStat.rows=function rows(arr){return arr.length||1};jStat.cols=function cols(arr){return arr[0].length||1};jStat.dimensions=function dimensions(arr){return{rows:jStat.rows(arr),cols:jStat.cols(arr)}};jStat.row=function row(arr,index){return arr[index]};jStat.col=function cols(arr,index){var column=new Array(arr.length);for(var i=0;i<arr.length;i++)column[i]=[arr[i][index]];return column};jStat.diag=function diag(arr){var nrow=jStat.rows(arr);var res=new Array(nrow);for(var row=0;row<nrow;row++)res[row]=[arr[row][row]];return res};jStat.antidiag=function antidiag(arr){var nrow=jStat.rows(arr)-1;var res=new Array(nrow);for(var i=0;nrow>=0;nrow--,i++)res[i]=[arr[i][nrow]];return res};jStat.transpose=function transpose(arr){var obj=[];var objArr,rows,cols,j,i;if(!isArray(arr[0]))arr=[arr];rows=arr.length;cols=arr[0].length;for(i=0;i<cols;i++){objArr=new Array(rows);for(j=0;j<rows;j++)objArr[j]=arr[j][i];obj.push(objArr)}return obj.length===1?obj[0]:obj};jStat.map=function map(arr,func,toAlter){var row,nrow,ncol,res,col;if(!isArray(arr[0]))arr=[arr];nrow=arr.length;ncol=arr[0].length;res=toAlter?arr:new Array(nrow);for(row=0;row<nrow;row++){if(!res[row])res[row]=new Array(ncol);for(col=0;col<ncol;col++)res[row][col]=func(arr[row][col],row,col)}return res.length===1?res[0]:res};jStat.alter=function alter(arr,func){return jStat.map(arr,func,true)};jStat.create=function create(rows,cols,func){var res=new Array(rows);var i,j;if(isFunction(cols)){func=cols;cols=rows}for(i=0;i<rows;i++){res[i]=new Array(cols);for(j=0;j<cols;j++)res[i][j]=func(i,j)}return res};function retZero(){return 0}jStat.zeros=function zeros(rows,cols){if(!isNumber(cols))cols=rows;return jStat.create(rows,cols,retZero)};function retOne(){return 1}jStat.ones=function ones(rows,cols){if(!isNumber(cols))cols=rows;return jStat.create(rows,cols,retOne)};jStat.rand=function rand(rows,cols){if(!isNumber(cols))cols=rows;return jStat.create(rows,cols,Math.random)};function retIdent(i,j){return i===j?1:0}jStat.identity=function identity(rows,cols){if(!isNumber(cols))cols=rows;return jStat.create(rows,cols,retIdent)};jStat.symmetric=function symmetric(arr){var issymmetric=true;var size=arr.length;var row,col;if(arr.length!==arr[0].length)return false;for(row=0;row<size;row++){for(col=0;col<size;col++)if(arr[col][row]!==arr[row][col])return false}return true};jStat.clear=function clear(arr){return jStat.alter(arr,retZero)};jStat.seq=function seq(min,max,length,func){if(!isFunction(func))func=false;var arr=[];var hival=calcRdx(min,max);var step=(max*hival-min*hival)/((length-1)*hival);var current=min;var cnt;for(cnt=0;current<=max;cnt++,current=(min*hival+step*hival*cnt)/hival){arr.push(func?func(current,cnt):current)}return arr};var jProto=jStat.prototype;jProto.length=0;jProto.push=Array.prototype.push;jProto.sort=Array.prototype.sort;jProto.splice=Array.prototype.splice;jProto.slice=Array.prototype.slice;jProto.toArray=function toArray(){return this.length>1?slice.call(this):slice.call(this)[0]};jProto.map=function map(func,toAlter){return jStat(jStat.map(this,func,toAlter))};jProto.alter=function alter(func){jStat.alter(this,func);return this};(function(funcs){for(var i=0;i<funcs.length;i++)(function(passfunc){jProto[passfunc]=function(func){var self=this,results;if(func){setTimeout(function(){func.call(self,jProto[passfunc].call(self))});return this}results=jStat[passfunc](this);return isArray(results)?jStat(results):results}})(funcs[i])})("transpose clear symmetric rows cols dimensions diag antidiag".split(" "));(function(funcs){for(var i=0;i<funcs.length;i++)(function(passfunc){jProto[passfunc]=function(index,func){var self=this;if(func){setTimeout(function(){func.call(self,jProto[passfunc].call(self,index))});return this}return jStat(jStat[passfunc](this,index))}})(funcs[i])})("row col".split(" "));(function(funcs){for(var i=0;i<funcs.length;i++)(function(passfunc){jProto[passfunc]=new Function("return jStat(jStat."+passfunc+".apply(null, arguments));")})(funcs[i])})("create zeros ones rand identity".split(" "));return jStat}(Math);(function(jStat,Math){var isFunction=jStat.utils.isFunction;function ascNum(a,b){return a-b}function clip(arg,min,max){return Math.max(min,Math.min(arg,max))}jStat.sum=function sum(arr){var sum=0;var i=arr.length;var tmp;while(--i>=0)sum+=arr[i];return sum};jStat.sumsqrd=function sumsqrd(arr){var sum=0;var i=arr.length;while(--i>=0)sum+=arr[i]*arr[i];return sum};jStat.sumsqerr=function sumsqerr(arr){var mean=jStat.mean(arr);var sum=0;var i=arr.length;var tmp;while(--i>=0){tmp=arr[i]-mean;sum+=tmp*tmp}return sum};jStat.product=function product(arr){var prod=1;var i=arr.length;while(--i>=0)prod*=arr[i];return prod};jStat.min=function min(arr){var low=arr[0];var i=0;while(++i<arr.length)if(arr[i]<low)low=arr[i];return low};jStat.max=function max(arr){var high=arr[0];var i=0;while(++i<arr.length)if(arr[i]>high)high=arr[i];return high};jStat.mean=function mean(arr){return jStat.sum(arr)/arr.length};jStat.meansqerr=function meansqerr(arr){return jStat.sumsqerr(arr)/arr.length};jStat.geomean=function geomean(arr){return Math.pow(jStat.product(arr),1/arr.length)};jStat.median=function median(arr){var arrlen=arr.length;var _arr=arr.slice().sort(ascNum);return!(arrlen&1)?(_arr[arrlen/2-1]+_arr[arrlen/2])/2:_arr[arrlen/2|0]};jStat.cumsum=function cumsum(arr){var len=arr.length;var sums=new Array(len);var i;sums[0]=arr[0];for(i=1;i<len;i++)sums[i]=sums[i-1]+arr[i];return sums};jStat.diff=function diff(arr){var diffs=[];var arrLen=arr.length;var i;for(i=1;i<arrLen;i++)diffs.push(arr[i]-arr[i-1]);return diffs};jStat.mode=function mode(arr){var arrLen=arr.length;var _arr=arr.slice().sort(ascNum);var count=1;var maxCount=0;var numMaxCount=0;var mode_arr=[];var i;for(i=0;i<arrLen;i++){if(_arr[i]===_arr[i+1]){count++}else{if(count>maxCount){mode_arr=[_arr[i]];maxCount=count;numMaxCount=0}else if(count===maxCount){mode_arr.push(_arr[i]);numMaxCount++}count=1}}return numMaxCount===0?mode_arr[0]:mode_arr};jStat.range=function range(arr){return jStat.max(arr)-jStat.min(arr)};jStat.variance=function variance(arr,flag){return jStat.sumsqerr(arr)/(arr.length-(flag?1:0))};jStat.stdev=function stdev(arr,flag){return Math.sqrt(jStat.variance(arr,flag))};jStat.meandev=function meandev(arr){var devSum=0;var mean=jStat.mean(arr);var i;for(i=arr.length-1;i>=0;i--)devSum+=Math.abs(arr[i]-mean);return devSum/arr.length};jStat.meddev=function meddev(arr){var devSum=0;var median=jStat.median(arr);var i;for(i=arr.length-1;i>=0;i--)devSum+=Math.abs(arr[i]-median);return devSum/arr.length};jStat.coeffvar=function coeffvar(arr){return jStat.stdev(arr)/jStat.mean(arr)};jStat.quartiles=function quartiles(arr){var arrlen=arr.length;var _arr=arr.slice().sort(ascNum);return[_arr[Math.round(arrlen/4)-1],_arr[Math.round(arrlen/2)-1],_arr[Math.round(arrlen*3/4)-1]]};jStat.quantiles=function quantiles(arr,quantilesArray,alphap,betap){var sortedArray=arr.slice().sort(ascNum);var quantileVals=[quantilesArray.length];var n=arr.length;var i,p,m,aleph,k,gamma;if(typeof alphap==="undefined")alphap=3/8;if(typeof betap==="undefined")betap=3/8;for(i=0;i<quantilesArray.length;i++){p=quantilesArray[i];m=alphap+p*(1-alphap-betap);aleph=n*p+m;k=Math.floor(clip(aleph,1,n-1));gamma=clip(aleph-k,0,1);quantileVals[i]=(1-gamma)*sortedArray[k-1]+gamma*sortedArray[k]}return quantileVals};jStat.percentileOfScore=function percentileOfScore(arr,score,kind){var counter=0;var len=arr.length;var strict=false;var value,i;if(kind==="strict")strict=true;for(i=0;i<len;i++){value=arr[i];if(strict&&value<score||!strict&&value<=score){counter++}}return counter/len};jStat.covariance=function covariance(arr1,arr2){var u=jStat.mean(arr1);var v=jStat.mean(arr2);var arr1Len=arr1.length;var sq_dev=new Array(arr1Len);var i;for(i=0;i<arr1Len;i++)sq_dev[i]=(arr1[i]-u)*(arr2[i]-v);return jStat.sum(sq_dev)/(arr1Len-1)};jStat.corrcoeff=function corrcoeff(arr1,arr2){return jStat.covariance(arr1,arr2)/jStat.stdev(arr1,1)/jStat.stdev(arr2,1)};var jProto=jStat.prototype;jProto.cumsum=function(fullbool,func){var arr=[];var i=0;var tmpthis=this;if(isFunction(fullbool)){func=fullbool;fullbool=false}if(func){setTimeout(function(){func.call(tmpthis,jProto.cumsum.call(tmpthis,fullbool))});return this}if(this.length>1){tmpthis=fullbool===true?this:this.transpose();for(;i<tmpthis.length;i++)arr[i]=jStat.cumsum(tmpthis[i]);return arr}return jStat.cumsum(this[0],fullbool)};(function(funcs){for(var i=0;i<funcs.length;i++)(function(passfunc){jProto[passfunc]=function(fullbool,func){var arr=[];var i=0;var tmpthis=this;if(isFunction(fullbool)){func=fullbool;fullbool=false}if(func){setTimeout(function(){func.call(tmpthis,jProto[passfunc].call(tmpthis,fullbool))});return this}if(this.length>1){tmpthis=fullbool===true?this:this.transpose();for(;i<tmpthis.length;i++)arr[i]=jStat[passfunc](tmpthis[i]);return fullbool===true?jStat[passfunc](jStat.utils.toVector(arr)):arr}return jStat[passfunc](this[0],fullbool)}})(funcs[i])})(("sum sumsqrd sumsqerr product min max mean meansqerr geomean median diff "+"mode range variance stdev meandev meddev coeffvar quartiles").split(" "));(function(funcs){for(var i=0;i<funcs.length;i++)(function(passfunc){jProto[passfunc]=function(){var arr=[];var i=0;var tmpthis=this;var args=Array.prototype.slice.call(arguments);if(isFunction(args[args.length-1])){var callbackFunction=args[args.length-1];var argsToPass=args.slice(0,args.length-1);setTimeout(function(){callbackFunction.call(tmpthis,jProto[passfunc].apply(tmpthis,argsToPass))});return this}else{var callbackFunction=undefined;var curriedFunction=function curriedFunction(vector){return jStat[passfunc].apply(tmpthis,[vector].concat(args))}}if(this.length>1){tmpthis=tmpthis.transpose();for(;i<tmpthis.length;i++)arr[i]=curriedFunction(tmpthis[i]);return arr}return curriedFunction(this[0])}})(funcs[i])})("quantiles percentileOfScore".split(" "))})(this.jStat,Math);(function(jStat,Math){jStat.gammaln=function gammaln(x){var j=0;var cof=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];var ser=1.000000000190015;var xx,y,tmp;tmp=(y=xx=x)+5.5;tmp-=(xx+.5)*Math.log(tmp);for(;j<6;j++)ser+=cof[j]/++y;return Math.log(2.5066282746310007*ser/xx)-tmp};jStat.gammafn=function gammafn(x){var p=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054];var q=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535];var fact=false;var n=0;var xden=0;var xnum=0;var y=x;var i,z,yi,res,sum,ysq;if(y<=0){res=y%1+3.6e-16;if(res){fact=(!(y&1)?1:-1)*Math.PI/Math.sin(Math.PI*res);y=1-y}else{return Infinity}}yi=y;if(y<1){z=y++}else{z=(y-=n=(y|0)-1)-1}for(i=0;i<8;++i){xnum=(xnum+p[i])*z;xden=xden*z+q[i]}res=xnum/xden+1;if(yi<y){res/=yi}else if(yi>y){for(i=0;i<n;++i){res*=y;y++}}if(fact){res=fact/res}return res};jStat.gammap=function gammap(a,x){var aln=jStat.gammaln(a);var ap=a;var sum=1/a;var del=sum;var b=x+1-a;var c=1/1e-30;var d=1/b;var h=d;var i=1;var ITMAX=-~(Math.log(a>=1?a:1/a)*8.5+a*.4+17);var an,endval;if(x<0||a<=0){return NaN}else if(x<a+1){for(;i<=ITMAX;i++){sum+=del*=x/++ap}return sum*Math.exp(-x+a*Math.log(x)-aln)}for(;i<=ITMAX;i++){an=-i*(i-a);b+=2;d=an*d+b;c=b+an/c;d=1/d;h*=d*c}return 1-h*Math.exp(-x+a*Math.log(x)-aln)};jStat.factorialln=function factorialln(n){return n<0?NaN:jStat.gammaln(n+1)};jStat.factorial=function factorial(n){return n<0?NaN:jStat.gammafn(n+1)};jStat.combination=function combination(n,m){return n>170||m>170?Math.exp(jStat.combinationln(n,m)):jStat.factorial(n)/jStat.factorial(m)/jStat.factorial(n-m)};jStat.combinationln=function combinationln(n,m){return jStat.factorialln(n)-jStat.factorialln(m)-jStat.factorialln(n-m)};jStat.permutation=function permutation(n,m){return jStat.factorial(n)/jStat.factorial(n-m)};jStat.betafn=function betafn(x,y){if(x<=0||y<=0)return undefined;return x+y>170?Math.exp(jStat.betaln(x,y)):jStat.gammafn(x)*jStat.gammafn(y)/jStat.gammafn(x+y)};jStat.betaln=function betaln(x,y){return jStat.gammaln(x)+jStat.gammaln(y)-jStat.gammaln(x+y)};jStat.betacf=function betacf(x,a,b){var fpmin=1e-30;var m=1;var qab=a+b;var qap=a+1;var qam=a-1;var c=1;var d=1-qab*x/qap;var m2,aa,del,h;if(Math.abs(d)<fpmin)d=fpmin;d=1/d;h=d;for(;m<=100;m++){m2=2*m;aa=m*(b-m)*x/((qam+m2)*(a+m2));d=1+aa*d;if(Math.abs(d)<fpmin)d=fpmin;c=1+aa/c;if(Math.abs(c)<fpmin)c=fpmin;d=1/d;h*=d*c;aa=-(a+m)*(qab+m)*x/((a+m2)*(qap+m2));d=1+aa*d;if(Math.abs(d)<fpmin)d=fpmin;c=1+aa/c;if(Math.abs(c)<fpmin)c=fpmin;d=1/d;del=d*c;h*=del;if(Math.abs(del-1)<3e-7)break}return h};jStat.gammapinv=function gammapinv(p,a){var j=0;var a1=a-1;var EPS=1e-8;var gln=jStat.gammaln(a);var x,err,t,u,pp,lna1,afac;if(p>=1)return Math.max(100,a+100*Math.sqrt(a));if(p<=0)return 0;if(a>1){lna1=Math.log(a1);afac=Math.exp(a1*(lna1-1)-gln);pp=p<.5?p:1-p;t=Math.sqrt(-2*Math.log(pp));x=(2.30753+t*.27061)/(1+t*(.99229+t*.04481))-t;if(p<.5)x=-x;x=Math.max(.001,a*Math.pow(1-1/(9*a)-x/(3*Math.sqrt(a)),3))}else{t=1-a*(.253+a*.12);if(p<t)x=Math.pow(p/t,1/a);else x=1-Math.log(1-(p-t)/(1-t))}for(;j<12;j++){if(x<=0)return 0;err=jStat.gammap(a,x)-p;if(a>1)t=afac*Math.exp(-(x-a1)+a1*(Math.log(x)-lna1));else t=Math.exp(-x+a1*Math.log(x)-gln);u=err/t;x-=t=u/(1-.5*Math.min(1,u*((a-1)/x-1)));if(x<=0)x=.5*(x+t);if(Math.abs(t)<EPS*x)break}return x};jStat.erf=function erf(x){var cof=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,1.5626441722e-8,-8.5238095915e-8,6.529054439e-9,5.059343495e-9,-9.91364156e-10,-2.27365122e-10,9.6467911e-11,2.394038e-12,-6.886027e-12,8.94487e-13,3.13092e-13,-1.12708e-13,3.81e-16,7.106e-15,-1.523e-15,-9.4e-17,1.21e-16,-2.8e-17];var j=cof.length-1;var isneg=false;var d=0;var dd=0;var t,ty,tmp,res;if(x<0){x=-x;isneg=true}t=2/(2+x);ty=4*t-2;for(;j>0;j--){tmp=d;d=ty*d-dd+cof[j];dd=tmp}res=t*Math.exp(-x*x+.5*(cof[0]+ty*d)-dd);return isneg?res-1:1-res};jStat.erfc=function erfc(x){return 1-jStat.erf(x)};jStat.erfcinv=function erfcinv(p){var j=0;var x,err,t,pp;if(p>=2)return-100;if(p<=0)return 100;pp=p<1?p:2-p;t=Math.sqrt(-2*Math.log(pp/2));x=-.70711*((2.30753+t*.27061)/(1+t*(.99229+t*.04481))-t);for(;j<2;j++){err=jStat.erfc(x)-pp;x+=err/(1.1283791670955126*Math.exp(-x*x)-x*err)}return p<1?x:-x};jStat.ibetainv=function ibetainv(p,a,b){var EPS=1e-8;var a1=a-1;var b1=b-1;var j=0;var lna,lnb,pp,t,u,err,x,al,h,w,afac;if(p<=0)return 0;if(p>=1)return 1;if(a>=1&&b>=1){pp=p<.5?p:1-p;t=Math.sqrt(-2*Math.log(pp));x=(2.30753+t*.27061)/(1+t*(.99229+t*.04481))-t;if(p<.5)x=-x;al=(x*x-3)/6;h=2/(1/(2*a-1)+1/(2*b-1));w=x*Math.sqrt(al+h)/h-(1/(2*b-1)-1/(2*a-1))*(al+5/6-2/(3*h));x=a/(a+b*Math.exp(2*w))}else{lna=Math.log(a/(a+b));lnb=Math.log(b/(a+b));t=Math.exp(a*lna)/a;u=Math.exp(b*lnb)/b;w=t+u;if(p<t/w)x=Math.pow(a*w*p,1/a);else x=1-Math.pow(b*w*(1-p),1/b)}afac=-jStat.gammaln(a)-jStat.gammaln(b)+jStat.gammaln(a+b);for(;j<10;j++){if(x===0||x===1)return x;err=jStat.ibeta(x,a,b)-p;t=Math.exp(a1*Math.log(x)+b1*Math.log(1-x)+afac);u=err/t;x-=t=u/(1-.5*Math.min(1,u*(a1/x-b1/(1-x))));if(x<=0)x=.5*(x+t);if(x>=1)x=.5*(x+t+1);if(Math.abs(t)<EPS*x&&j>0)break}return x};jStat.ibeta=function ibeta(x,a,b){var bt=x===0||x===1?0:Math.exp(jStat.gammaln(a+b)-jStat.gammaln(a)-jStat.gammaln(b)+a*Math.log(x)+b*Math.log(1-x));if(x<0||x>1)return false;if(x<(a+1)/(a+b+2))return bt*jStat.betacf(x,a,b)/a;return 1-bt*jStat.betacf(1-x,b,a)/b};jStat.randn=function randn(n,m){var u,v,x,y,q,mat;if(!m)m=n;if(n)return jStat.create(n,m,function(){return jStat.randn()});do{u=Math.random();v=1.7156*(Math.random()-.5);x=u-.449871;y=Math.abs(v)+.386595;q=x*x+y*(.196*y-.25472*x)}while(q>.27597&&(q>.27846||v*v>-4*Math.log(u)*u*u));return v/u};jStat.randg=function randg(shape,n,m){var oalph=shape;var a1,a2,u,v,x,mat;if(!m)m=n;if(!shape)shape=1;if(n){mat=jStat.zeros(n,m);mat.alter(function(){return jStat.randg(shape)});return mat}if(shape<1)shape+=1;a1=shape-1/3;a2=1/Math.sqrt(9*a1);do{do{x=jStat.randn();v=1+a2*x}while(v<=0);v=v*v*v;u=Math.random()}while(u>1-.331*Math.pow(x,4)&&Math.log(u)>.5*x*x+a1*(1-v+Math.log(v)));if(shape==oalph)return a1*v;do{u=Math.random()}while(u===0);return Math.pow(u,1/oalph)*a1*v};(function(funcs){for(var i=0;i<funcs.length;i++)(function(passfunc){jStat.fn[passfunc]=function(){return jStat(jStat.map(this,function(value){return jStat[passfunc](value)}))}})(funcs[i])})("gammaln gammafn factorial factorialln".split(" "));(function(funcs){for(var i=0;i<funcs.length;i++)(function(passfunc){jStat.fn[passfunc]=function(){return jStat(jStat[passfunc].apply(null,arguments))}})(funcs[i])})("randn".split(" "))})(this.jStat,Math);(function(jStat,Math){(function(list){for(var i=0;i<list.length;i++)(function(func){jStat[func]=function(a,b,c){if(!(this instanceof arguments.callee))return new arguments.callee(a,b,c);
this._a=a;this._b=b;this._c=c;return this};jStat.fn[func]=function(a,b,c){var newthis=jStat[func](a,b,c);newthis.data=this;return newthis};jStat[func].prototype.sample=function(arr){var a=this._a;var b=this._b;var c=this._c;if(arr)return jStat.alter(arr,function(){return jStat[func].sample(a,b,c)});else return jStat[func].sample(a,b,c)};(function(vals){for(var i=0;i<vals.length;i++)(function(fnfunc){jStat[func].prototype[fnfunc]=function(x){var a=this._a;var b=this._b;var c=this._c;if(!x&&x!==0)x=this.data;if(typeof x!=="number"){return jStat.fn.map.call(x,function(x){return jStat[func][fnfunc](x,a,b,c)})}return jStat[func][fnfunc](x,a,b,c)}})(vals[i])})("pdf cdf inv".split(" "));(function(vals){for(var i=0;i<vals.length;i++)(function(fnfunc){jStat[func].prototype[fnfunc]=function(){return jStat[func][fnfunc](this._a,this._b,this._c)}})(vals[i])})("mean median mode variance".split(" "))})(list[i])})(("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy "+"lognormal normal pareto studentt weibull uniform  binomial negbin hypgeom "+"poisson triangular").split(" "));jStat.extend(jStat.beta,{pdf:function pdf(x,alpha,beta){if(x>1||x<0)return 0;if(alpha==1&&beta==1)return 1;if(alpha<512||beta<512){return Math.pow(x,alpha-1)*Math.pow(1-x,beta-1)/jStat.betafn(alpha,beta)}else{return Math.exp((alpha-1)*Math.log(x)+(beta-1)*Math.log(1-x)-jStat.betaln(alpha,beta))}},cdf:function cdf(x,alpha,beta){return x>1||x<0?(x>1)*1:jStat.ibeta(x,alpha,beta)},inv:function inv(x,alpha,beta){return jStat.ibetainv(x,alpha,beta)},mean:function mean(alpha,beta){return alpha/(alpha+beta)},median:function median(alpha,beta){throw new Error("median not yet implemented")},mode:function mode(alpha,beta){return alpha*beta/(Math.pow(alpha+beta,2)*(alpha+beta+1))},sample:function sample(alpha,beta){var u=jStat.randg(alpha);return u/(u+jStat.randg(beta))},variance:function variance(alpha,beta){return alpha*beta/(Math.pow(alpha+beta,2)*(alpha+beta+1))}});jStat.extend(jStat.centralF,{pdf:function pdf(x,df1,df2){if(x<0)return undefined;return Math.sqrt(Math.pow(df1*x,df1)*Math.pow(df2,df2)/Math.pow(df1*x+df2,df1+df2))/(x*jStat.betafn(df1/2,df2/2))},cdf:function cdf(x,df1,df2){return jStat.ibeta(df1*x/(df1*x+df2),df1/2,df2/2)},inv:function inv(x,df1,df2){return df2/(df1*(1/jStat.ibetainv(x,df1/2,df2/2)-1))},mean:function mean(df1,df2){return df2>2?df2/(df2-2):undefined},mode:function mode(df1,df2){return df1>2?df2*(df1-2)/(df1*(df2+2)):undefined},sample:function sample(df1,df2){var x1=jStat.randg(df1/2)*2;var x2=jStat.randg(df2/2)*2;return x1/df1/(x2/df2)},variance:function variance(df1,df2){if(df2<=4)return undefined;return 2*df2*df2*(df1+df2-2)/(df1*(df2-2)*(df2-2)*(df2-4))}});jStat.extend(jStat.cauchy,{pdf:function pdf(x,local,scale){return scale/(Math.pow(x-local,2)+Math.pow(scale,2))/Math.PI},cdf:function cdf(x,local,scale){return Math.atan((x-local)/scale)/Math.PI+.5},inv:function(p,local,scale){return local+scale*Math.tan(Math.PI*(p-.5))},median:function median(local,scale){return local},mode:function mode(local,scale){return local},sample:function sample(local,scale){return jStat.randn()*Math.sqrt(1/(2*jStat.randg(.5)))*scale+local}});jStat.extend(jStat.chisquare,{pdf:function pdf(x,dof){return Math.exp((dof/2-1)*Math.log(x)-x/2-dof/2*Math.log(2)-jStat.gammaln(dof/2))},cdf:function cdf(x,dof){return jStat.gammap(dof/2,x/2)},inv:function(p,dof){return 2*jStat.gammapinv(p,.5*dof)},mean:function(dof){return dof},median:function median(dof){return dof*Math.pow(1-2/(9*dof),3)},mode:function mode(dof){return dof-2>0?dof-2:0},sample:function sample(dof){return jStat.randg(dof/2)*2},variance:function variance(dof){return 2*dof}});jStat.extend(jStat.exponential,{pdf:function pdf(x,rate){return x<0?0:rate*Math.exp(-rate*x)},cdf:function cdf(x,rate){return x<0?0:1-Math.exp(-rate*x)},inv:function(p,rate){return-Math.log(1-p)/rate},mean:function(rate){return 1/rate},median:function(rate){return 1/rate*Math.log(2)},mode:function mode(rate){return 0},sample:function sample(rate){return-1/rate*Math.log(Math.random())},variance:function(rate){return Math.pow(rate,-2)}});jStat.extend(jStat.gamma,{pdf:function pdf(x,shape,scale){return Math.exp((shape-1)*Math.log(x)-x/scale-jStat.gammaln(shape)-shape*Math.log(scale))},cdf:function cdf(x,shape,scale){return jStat.gammap(shape,x/scale)},inv:function(p,shape,scale){return jStat.gammapinv(p,shape)*scale},mean:function(shape,scale){return shape*scale},mode:function mode(shape,scale){if(shape>1)return(shape-1)*scale;return undefined},sample:function sample(shape,scale){return jStat.randg(shape)*scale},variance:function variance(shape,scale){return shape*scale*scale}});jStat.extend(jStat.invgamma,{pdf:function pdf(x,shape,scale){return Math.exp(-(shape+1)*Math.log(x)-scale/x-jStat.gammaln(shape)+shape*Math.log(scale))},cdf:function cdf(x,shape,scale){return 1-jStat.gammap(shape,scale/x)},inv:function(p,shape,scale){return scale/jStat.gammapinv(1-p,shape)},mean:function(shape,scale){return shape>1?scale/(shape-1):undefined},mode:function mode(shape,scale){return scale/(shape+1)},sample:function sample(shape,scale){return scale/jStat.randg(shape)},variance:function variance(shape,scale){if(shape<=2)return undefined;return scale*scale/((shape-1)*(shape-1)*(shape-2))}});jStat.extend(jStat.kumaraswamy,{pdf:function pdf(x,alpha,beta){return Math.exp(Math.log(alpha)+Math.log(beta)+(alpha-1)*Math.log(x)+(beta-1)*Math.log(1-Math.pow(x,alpha)))},cdf:function cdf(x,alpha,beta){return 1-Math.pow(1-Math.pow(x,alpha),beta)},mean:function(alpha,beta){return beta*jStat.gammafn(1+1/alpha)*jStat.gammafn(beta)/jStat.gammafn(1+1/alpha+beta)},median:function median(alpha,beta){return Math.pow(1-Math.pow(2,-1/beta),1/alpha)},mode:function mode(alpha,beta){if(!(alpha>=1&&beta>=1&&(alpha!==1&&beta!==1)))return undefined;return Math.pow((alpha-1)/(alpha*beta-1),1/alpha)},variance:function variance(alpha,beta){throw new Error("variance not yet implemented")}});jStat.extend(jStat.lognormal,{pdf:function pdf(x,mu,sigma){return Math.exp(-Math.log(x)-.5*Math.log(2*Math.PI)-Math.log(sigma)-Math.pow(Math.log(x)-mu,2)/(2*sigma*sigma))},cdf:function cdf(x,mu,sigma){return.5+.5*jStat.erf((Math.log(x)-mu)/Math.sqrt(2*sigma*sigma))},inv:function(p,mu,sigma){return Math.exp(-1.4142135623730951*sigma*jStat.erfcinv(2*p)+mu)},mean:function mean(mu,sigma){return Math.exp(mu+sigma*sigma/2)},median:function median(mu,sigma){return Math.exp(mu)},mode:function mode(mu,sigma){return Math.exp(mu-sigma*sigma)},sample:function sample(mu,sigma){return Math.exp(jStat.randn()*sigma+mu)},variance:function variance(mu,sigma){return(Math.exp(sigma*sigma)-1)*Math.exp(2*mu+sigma*sigma)}});jStat.extend(jStat.normal,{pdf:function pdf(x,mean,std){return Math.exp(-.5*Math.log(2*Math.PI)-Math.log(std)-Math.pow(x-mean,2)/(2*std*std))},cdf:function cdf(x,mean,std){return.5*(1+jStat.erf((x-mean)/Math.sqrt(2*std*std)))},inv:function(p,mean,std){return-1.4142135623730951*std*jStat.erfcinv(2*p)+mean},mean:function(mean,std){return mean},median:function median(mean,std){return mean},mode:function(mean,std){return mean},sample:function sample(mean,std){return jStat.randn()*std+mean},variance:function(mean,std){return std*std}});jStat.extend(jStat.pareto,{pdf:function pdf(x,scale,shape){if(x<=scale)return undefined;return shape*Math.pow(scale,shape)/Math.pow(x,shape+1)},cdf:function cdf(x,scale,shape){return 1-Math.pow(scale/x,shape)},mean:function mean(scale,shape){if(shape<=1)return undefined;return shape*Math.pow(scale,shape)/(shape-1)},median:function median(scale,shape){return scale*(shape*Math.SQRT2)},mode:function mode(scale,shape){return scale},variance:function(scale,shape){if(shape<=2)return undefined;return scale*scale*shape/(Math.pow(shape-1,2)*(shape-2))}});jStat.extend(jStat.studentt,{pdf:function pdf(x,dof){return jStat.gammafn((dof+1)/2)/(Math.sqrt(dof*Math.PI)*jStat.gammafn(dof/2))*Math.pow(1+x*x/dof,-((dof+1)/2))},cdf:function cdf(x,dof){var dof2=dof/2;return jStat.ibeta((x+Math.sqrt(x*x+dof))/(2*Math.sqrt(x*x+dof)),dof2,dof2)},inv:function(p,dof){var x=jStat.ibetainv(2*Math.min(p,1-p),.5*dof,.5);x=Math.sqrt(dof*(1-x)/x);return p>.5?x:-x},mean:function mean(dof){return dof>1?0:undefined},median:function median(dof){return 0},mode:function mode(dof){return 0},sample:function sample(dof){return jStat.randn()*Math.sqrt(dof/(2*jStat.randg(dof/2)))},variance:function variance(dof){return dof>2?dof/(dof-2):dof>1?Infinity:undefined}});jStat.extend(jStat.weibull,{pdf:function pdf(x,scale,shape){if(x<0)return 0;return shape/scale*Math.pow(x/scale,shape-1)*Math.exp(-Math.pow(x/scale,shape))},cdf:function cdf(x,scale,shape){return x<0?0:1-Math.exp(-Math.pow(x/scale,shape))},inv:function(p,scale,shape){return scale*Math.pow(-Math.log(1-p),1/shape)},mean:function(scale,shape){return scale*jStat.gammafn(1+1/shape)},median:function median(scale,shape){return scale*Math.pow(Math.log(2),1/shape)},mode:function mode(scale,shape){if(shape<=1)return undefined;return scale*Math.pow((shape-1)/shape,1/shape)},sample:function sample(scale,shape){return scale*Math.pow(-Math.log(Math.random()),1/shape)},variance:function variance(scale,shape){return scale*scale*jStat.gammafn(1+2/shape)-Math.pow(this.mean(scale,shape),2)}});jStat.extend(jStat.uniform,{pdf:function pdf(x,a,b){return x<a||x>b?0:1/(b-a)},cdf:function cdf(x,a,b){if(x<a)return 0;else if(x<b)return(x-a)/(b-a);return 1},mean:function mean(a,b){return.5*(a+b)},median:function median(a,b){return jStat.mean(a,b)},mode:function mode(a,b){throw new Error("mode is not yet implemented")},sample:function sample(a,b){return a/2+b/2+(b/2-a/2)*(2*Math.random()-1)},variance:function variance(a,b){return Math.pow(b-a,2)/12}});jStat.extend(jStat.binomial,{pdf:function pdf(k,n,p){return p===0||p===1?n*p===k?1:0:jStat.combination(n,k)*Math.pow(p,k)*Math.pow(1-p,n-k)},cdf:function cdf(x,n,p){var binomarr=[],k=0;if(x<0){return 0}if(x<n){for(;k<=x;k++){binomarr[k]=jStat.binomial.pdf(k,n,p)}return jStat.sum(binomarr)}return 1}});jStat.extend(jStat.negbin,{pdf:function pdf(k,r,p){return k!==k|0?false:k<0?0:jStat.combination(k+r-1,r-1)*Math.pow(1-p,k)*Math.pow(p,r)},cdf:function cdf(x,r,p){var sum=0,k=0;if(x<0)return 0;for(;k<=x;k++){sum+=jStat.negbin.pdf(k,r,p)}return sum}});jStat.extend(jStat.hypgeom,{pdf:function pdf(k,N,m,n){if(k!==k|0){return false}else if(k<0||k<m-(N-n)){return 0}else if(k>n||k>m){return 0}else if(m*2>N){if(n*2>N){return jStat.hypgeom.pdf(N-m-n+k,N,N-m,N-n)}else{return jStat.hypgeom.pdf(n-k,N,N-m,n)}}else if(n*2>N){return jStat.hypgeom.pdf(m-k,N,m,N-n)}else if(m<n){return jStat.hypgeom.pdf(k,N,n,m)}else{var scaledPDF=1;var samplesDone=0;for(var i=0;i<k;i++){while(scaledPDF>1&&samplesDone<n){scaledPDF*=1-m/(N-samplesDone);samplesDone++}scaledPDF*=(n-i)*(m-i)/((i+1)*(N-m-n+i+1))}for(;samplesDone<n;samplesDone++){scaledPDF*=1-m/(N-samplesDone)}return Math.min(1,Math.max(0,scaledPDF))}},cdf:function cdf(x,N,m,n){if(x<0||x<m-(N-n)){return 0}else if(x>=n||x>=m){return 1}else if(m*2>N){if(n*2>N){return jStat.hypgeom.cdf(N-m-n+x,N,N-m,N-n)}else{return 1-jStat.hypgeom.cdf(n-x-1,N,N-m,n)}}else if(n*2>N){return 1-jStat.hypgeom.cdf(m-x-1,N,m,N-n)}else if(m<n){return jStat.hypgeom.cdf(x,N,n,m)}else{var scaledCDF=1;var scaledPDF=1;var samplesDone=0;for(var i=0;i<x;i++){while(scaledCDF>1&&samplesDone<n){var factor=1-m/(N-samplesDone);scaledPDF*=factor;scaledCDF*=factor;samplesDone++}scaledPDF*=(n-i)*(m-i)/((i+1)*(N-m-n+i+1));scaledCDF+=scaledPDF}for(;samplesDone<n;samplesDone++){scaledCDF*=1-m/(N-samplesDone)}return Math.min(1,Math.max(0,scaledCDF))}}});jStat.extend(jStat.poisson,{pdf:function pdf(k,l){return Math.pow(l,k)*Math.exp(-l)/jStat.factorial(k)},cdf:function cdf(x,l){var sumarr=[],k=0;if(x<0)return 0;for(;k<=x;k++){sumarr.push(jStat.poisson.pdf(k,l))}return jStat.sum(sumarr)},mean:function(l){return l},variance:function(l){return l},sample:function sample(l){var p=1,k=0,L=Math.exp(-l);do{k++;p*=Math.random()}while(p>L);return k-1}});jStat.extend(jStat.triangular,{pdf:function pdf(x,a,b,c){return b<=a||c<a||c>b?undefined:x<a||x>b?0:x<=c?2*(x-a)/((b-a)*(c-a)):2*(b-x)/((b-a)*(b-c))},cdf:function cdf(x,a,b,c){if(b<=a||c<a||c>b)return undefined;if(x<a){return 0}else{if(x<=c)return Math.pow(x-a,2)/((b-a)*(c-a));return 1-Math.pow(b-x,2)/((b-a)*(b-c))}return 1},mean:function mean(a,b,c){return(a+b+c)/3},median:function median(a,b,c){if(c<=(a+b)/2){return b-Math.sqrt((b-a)*(b-c))/Math.sqrt(2)}else if(c>(a+b)/2){return a+Math.sqrt((b-a)*(c-a))/Math.sqrt(2)}},mode:function mode(a,b,c){return c},sample:function sample(a,b,c){var u=Math.random();if(u<(c-a)/(b-a))return a+Math.sqrt(u*(b-a)*(c-a));return b-Math.sqrt((1-u)*(b-a)*(b-c))},variance:function variance(a,b,c){return(a*a+b*b+c*c-a*b-a*c-b*c)/18}})})(this.jStat,Math);(function(jStat,Math){var push=Array.prototype.push;var isArray=jStat.utils.isArray;jStat.extend({add:function add(arr,arg){if(isArray(arg)){if(!isArray(arg[0]))arg=[arg];return jStat.map(arr,function(value,row,col){return value+arg[row][col]})}return jStat.map(arr,function(value){return value+arg})},subtract:function subtract(arr,arg){if(isArray(arg)){if(!isArray(arg[0]))arg=[arg];return jStat.map(arr,function(value,row,col){return value-arg[row][col]||0})}return jStat.map(arr,function(value){return value-arg})},divide:function divide(arr,arg){if(isArray(arg)){if(!isArray(arg[0]))arg=[arg];return jStat.multiply(arr,jStat.inv(arg))}return jStat.map(arr,function(value){return value/arg})},multiply:function multiply(arr,arg){var row,col,nrescols,sum,nrow=arr.length,ncol=arr[0].length,res=jStat.zeros(nrow,nrescols=isArray(arg)?arg[0].length:ncol),rescols=0;if(isArray(arg)){for(;rescols<nrescols;rescols++){for(row=0;row<nrow;row++){sum=0;for(col=0;col<ncol;col++)sum+=arr[row][col]*arg[col][rescols];res[row][rescols]=sum}}return nrow===1&&rescols===1?res[0][0]:res}return jStat.map(arr,function(value){return value*arg})},dot:function dot(arr,arg){if(!isArray(arr[0]))arr=[arr];if(!isArray(arg[0]))arg=[arg];var left=arr[0].length===1&&arr.length!==1?jStat.transpose(arr):arr,right=arg[0].length===1&&arg.length!==1?jStat.transpose(arg):arg,res=[],row=0,nrow=left.length,ncol=left[0].length,sum,col;for(;row<nrow;row++){res[row]=[];sum=0;for(col=0;col<ncol;col++)sum+=left[row][col]*right[row][col];res[row]=sum}return res.length===1?res[0]:res},pow:function pow(arr,arg){return jStat.map(arr,function(value){return Math.pow(value,arg)})},abs:function abs(arr){return jStat.map(arr,function(value){return Math.abs(value)})},norm:function norm(arr,p){var nnorm=0,i=0;if(isNaN(p))p=2;if(isArray(arr[0]))arr=arr[0];for(;i<arr.length;i++){nnorm+=Math.pow(Math.abs(arr[i]),p)}return Math.pow(nnorm,1/p)},angle:function angle(arr,arg){return Math.acos(jStat.dot(arr,arg)/(jStat.norm(arr)*jStat.norm(arg)))},aug:function aug(a,b){var newarr=a.slice(),i=0;for(;i<newarr.length;i++){push.apply(newarr[i],b[i])}return newarr},inv:function inv(a){var rows=a.length,cols=a[0].length,b=jStat.identity(rows,cols),c=jStat.gauss_jordan(a,b),obj=[],i=0,j;for(;i<rows;i++){obj[i]=[];for(j=cols-1;j<c[0].length;j++)obj[i][j-cols]=c[i][j]}return obj},det:function det(a){var alen=a.length,alend=alen*2,vals=new Array(alend),rowshift=alen-1,colshift=alend-1,mrow=rowshift-alen+1,mcol=colshift,i=0,result=0,j;if(alen===2){return a[0][0]*a[1][1]-a[0][1]*a[1][0]}for(;i<alend;i++){vals[i]=1}for(i=0;i<alen;i++){for(j=0;j<alen;j++){vals[mrow<0?mrow+alen:mrow]*=a[i][j];vals[mcol<alen?mcol+alen:mcol]*=a[i][j];mrow++;mcol--}mrow=--rowshift-alen+1;mcol=--colshift}for(i=0;i<alen;i++){result+=vals[i]}for(;i<alend;i++){result-=vals[i]}return result},gauss_elimination:function gauss_elimination(a,b){var i=0,j=0,n=a.length,m=a[0].length,factor=1,sum=0,x=[],maug,pivot,temp,k;a=jStat.aug(a,b);maug=a[0].length;for(;i<n;i++){pivot=a[i][i];j=i;for(k=i+1;k<m;k++){if(pivot<Math.abs(a[k][i])){pivot=a[k][i];j=k}}if(j!=i){for(k=0;k<maug;k++){temp=a[i][k];a[i][k]=a[j][k];a[j][k]=temp}}for(j=i+1;j<n;j++){factor=a[j][i]/a[i][i];for(k=i;k<maug;k++){a[j][k]=a[j][k]-factor*a[i][k]}}}for(i=n-1;i>=0;i--){sum=0;for(j=i+1;j<=n-1;j++){sum=x[j]*a[i][j]}x[i]=(a[i][maug-1]-sum)/a[i][i]}return x},gauss_jordan:function gauss_jordan(a,b){var m=jStat.aug(a,b),h=m.length,w=m[0].length;for(var y=0;y<h;y++){var maxrow=y;for(var y2=y+1;y2<h;y2++){if(Math.abs(m[y2][y])>Math.abs(m[maxrow][y]))maxrow=y2}var tmp=m[y];m[y]=m[maxrow];m[maxrow]=tmp;for(var y2=y+1;y2<h;y2++){c=m[y2][y]/m[y][y];for(var x=y;x<w;x++){m[y2][x]-=m[y][x]*c}}}for(var y=h-1;y>=0;y--){c=m[y][y];for(var y2=0;y2<y;y2++){for(var x=w-1;x>y-1;x--){m[y2][x]-=m[y][x]*m[y2][y]/c}}m[y][y]/=c;for(var x=h;x<w;x++){m[y][x]/=c}}return m},lu:function lu(a,b){throw new Error("lu not yet implemented")},cholesky:function cholesky(a,b){throw new Error("cholesky not yet implemented")},gauss_jacobi:function gauss_jacobi(a,b,x,r){var i=0;var j=0;var n=a.length;var l=[];var u=[];var d=[];var xv,c,h,xk;for(;i<n;i++){l[i]=[];u[i]=[];d[i]=[];for(j=0;j<n;j++){if(i>j){l[i][j]=a[i][j];u[i][j]=d[i][j]=0}else if(i<j){u[i][j]=a[i][j];l[i][j]=d[i][j]=0}else{d[i][j]=a[i][j];l[i][j]=u[i][j]=0}}}h=jStat.multiply(jStat.multiply(jStat.inv(d),jStat.add(l,u)),-1);c=jStat.multiply(jStat.inv(d),b);xv=x;xk=jStat.add(jStat.multiply(h,x),c);i=2;while(Math.abs(jStat.norm(jStat.subtract(xk,xv)))>r){xv=xk;xk=jStat.add(jStat.multiply(h,xv),c);i++}return xk},gauss_seidel:function gauss_seidel(a,b,x,r){var i=0;var n=a.length;var l=[];var u=[];var d=[];var j,xv,c,h,xk;for(;i<n;i++){l[i]=[];u[i]=[];d[i]=[];for(j=0;j<n;j++){if(i>j){l[i][j]=a[i][j];u[i][j]=d[i][j]=0}else if(i<j){u[i][j]=a[i][j];l[i][j]=d[i][j]=0}else{d[i][j]=a[i][j];l[i][j]=u[i][j]=0}}}h=jStat.multiply(jStat.multiply(jStat.inv(jStat.add(d,l)),u),-1);c=jStat.multiply(jStat.inv(jStat.add(d,l)),b);xv=x;xk=jStat.add(jStat.multiply(h,x),c);i=2;while(Math.abs(jStat.norm(jStat.subtract(xk,xv)))>r){xv=xk;xk=jStat.add(jStat.multiply(h,xv),c);i=i+1}return xk},SOR:function SOR(a,b,x,r,w){var i=0;var n=a.length;var l=[];var u=[];var d=[];var j,xv,c,h,xk;for(;i<n;i++){l[i]=[];u[i]=[];d[i]=[];for(j=0;j<n;j++){if(i>j){l[i][j]=a[i][j];u[i][j]=d[i][j]=0}else if(i<j){u[i][j]=a[i][j];l[i][j]=d[i][j]=0}else{d[i][j]=a[i][j];l[i][j]=u[i][j]=0}}}h=jStat.multiply(jStat.inv(jStat.add(d,jStat.multiply(l,w))),jStat.subtract(jStat.multiply(d,1-w),jStat.multiply(u,w)));c=jStat.multiply(jStat.multiply(jStat.inv(jStat.add(d,jStat.multiply(l,w))),b),w);xv=x;xk=jStat.add(jStat.multiply(h,x),c);i=2;while(Math.abs(jStat.norm(jStat.subtract(xk,xv)))>r){xv=xk;xk=jStat.add(jStat.multiply(h,xv),c);i++}return xk},householder:function householder(a){var m=a.length;var n=a[0].length;var i=0;var w=[];var p=[];var alpha,r,k,j,factor;for(;i<m-1;i++){alpha=0;for(j=i+1;j<n;j++)alpha+=a[j][i]*a[j][i];factor=a[i+1][i]>0?-1:1;alpha=factor*Math.sqrt(alpha);r=Math.sqrt((alpha*alpha-a[i+1][i]*alpha)/2);w=jStat.zeros(m,1);w[i+1][0]=(a[i+1][i]-alpha)/(2*r);for(k=i+2;k<m;k++)w[k][0]=a[k][i]/(2*r);p=jStat.subtract(jStat.identity(m,n),jStat.multiply(jStat.multiply(w,jStat.transpose(w)),2));a=jStat.multiply(p,jStat.multiply(a,p))}return a},QR:function QR(a,b){var m=a.length;var n=a[0].length;var i=0;var w=[];var p=[];var x=[];var j,alpha,r,k,factor,sum;for(;i<m-1;i++){alpha=0;for(j=i+1;j<n;j++)alpha+=a[j][i]*a[j][i];factor=a[i+1][i]>0?-1:1;alpha=factor*Math.sqrt(alpha);r=Math.sqrt((alpha*alpha-a[i+1][i]*alpha)/2);w=jStat.zeros(m,1);w[i+1][0]=(a[i+1][i]-alpha)/(2*r);for(k=i+2;k<m;k++)w[k][0]=a[k][i]/(2*r);p=jStat.subtract(jStat.identity(m,n),jStat.multiply(jStat.multiply(w,jStat.transpose(w)),2));a=jStat.multiply(p,a);b=jStat.multiply(p,b)}for(i=m-1;i>=0;i--){sum=0;for(j=i+1;j<=n-1;j++)sum=x[j]*a[i][j];x[i]=b[i][0]/a[i][i]}return x},jacobi:function jacobi(a){var condition=1;var count=0;var n=a.length;var e=jStat.identity(n,n);var ev=[];var b,i,j,p,q,maxim,theta,s;while(condition===1){count++;maxim=a[0][1];p=0;q=1;for(i=0;i<n;i++){for(j=0;j<n;j++){if(i!=j){if(maxim<Math.abs(a[i][j])){maxim=Math.abs(a[i][j]);p=i;q=j}}}}if(a[p][p]===a[q][q])theta=a[p][q]>0?Math.PI/4:-Math.PI/4;else theta=Math.atan(2*a[p][q]/(a[p][p]-a[q][q]))/2;s=jStat.identity(n,n);s[p][p]=Math.cos(theta);s[p][q]=-Math.sin(theta);s[q][p]=Math.sin(theta);s[q][q]=Math.cos(theta);e=jStat.multiply(e,s);b=jStat.multiply(jStat.multiply(jStat.inv(s),a),s);a=b;condition=0;for(i=1;i<n;i++){for(j=1;j<n;j++){if(i!=j&&Math.abs(a[i][j])>.001){condition=1}}}}for(i=0;i<n;i++)ev.push(a[i][i]);return[e,ev]},rungekutta:function rungekutta(f,h,p,t_j,u_j,order){var k1,k2,u_j1,k3,k4;if(order===2){while(t_j<=p){k1=h*f(t_j,u_j);k2=h*f(t_j+h,u_j+k1);u_j1=u_j+(k1+k2)/2;u_j=u_j1;t_j=t_j+h}}if(order===4){while(t_j<=p){k1=h*f(t_j,u_j);k2=h*f(t_j+h/2,u_j+k1/2);k3=h*f(t_j+h/2,u_j+k2/2);k4=h*f(t_j+h,u_j+k3);u_j1=u_j+(k1+2*k2+2*k3+k4)/6;u_j=u_j1;t_j=t_j+h}}return u_j},romberg:function romberg(f,a,b,order){var i=0;var h=(b-a)/2;var x=[];var h1=[];var g=[];var m,a1,j,k,I,d;while(i<order/2){I=f(a);for(j=a,k=0;j<=b;j=j+h,k++)x[k]=j;m=x.length;for(j=1;j<m-1;j++){I+=(j%2!==0?4:2)*f(x[j])}I=h/3*(I+f(b));g[i]=I;h/=2;i++}a1=g.length;m=1;while(a1!==1){for(j=0;j<a1-1;j++)h1[j]=(Math.pow(4,m)*g[j+1]-g[j])/(Math.pow(4,m)-1);a1=h1.length;g=h1;h1=[];m++}return g},richardson:function richardson(X,f,x,h){function pos(X,x){var i=0;var n=X.length;var p;for(;i<n;i++)if(X[i]===x)p=i;return p}var n=X.length,h_min=Math.abs(x-X[pos(X,x)+1]),i=0,g=[],h1=[],y1,y2,m,a,j;while(h>=h_min){y1=pos(X,x+h);y2=pos(X,x);g[i]=(f[y1]-2*f[y2]+f[2*y2-y1])/(h*h);h/=2;i++}a=g.length;m=1;while(a!=1){for(j=0;j<a-1;j++)h1[j]=(Math.pow(4,m)*g[j+1]-g[j])/(Math.pow(4,m)-1);a=h1.length;g=h1;h1=[];m++}return g},simpson:function simpson(f,a,b,n){var h=(b-a)/n;var I=f(a);var x=[];var j=a;var k=0;var i=1;var m;for(;j<=b;j=j+h,k++)x[k]=j;m=x.length;for(;i<m-1;i++){I+=(i%2!==0?4:2)*f(x[i])}return h/3*(I+f(b))},hermite:function hermite(X,F,dF,value){var n=X.length;var p=0;var i=0;var l=[];var dl=[];var A=[];var B=[];var j;for(;i<n;i++){l[i]=1;for(j=0;j<n;j++){if(i!=j)l[i]*=(value-X[j])/(X[i]-X[j])}dl[i]=0;for(j=0;j<n;j++){if(i!=j)dl[i]+=1/(X[i]-X[j])}A[i]=(1-2*(value-X[i])*dl[i])*(l[i]*l[i]);B[i]=(value-X[i])*(l[i]*l[i]);p+=A[i]*F[i]+B[i]*dF[i]}return p},lagrange:function lagrange(X,F,value){var p=0;var i=0;var j,l;var n=X.length;for(;i<n;i++){l=F[i];for(j=0;j<n;j++){if(i!=j)l*=(value-X[j])/(X[i]-X[j])}p+=l}return p},cubic_spline:function cubic_spline(X,F,value){var n=X.length;var i=0,j;var A=[];var B=[];var alpha=[];var c=[];var h=[];var b=[];var d=[];for(;i<n-1;i++)h[i]=X[i+1]-X[i];alpha[0]=0;for(i=1;i<n-1;i++){alpha[i]=3/h[i]*(F[i+1]-F[i])-3/h[i-1]*(F[i]-F[i-1])}for(i=1;i<n-1;i++){A[i]=[];B[i]=[];A[i][i-1]=h[i-1];A[i][i]=2*(h[i-1]+h[i]);A[i][i+1]=h[i];B[i][0]=alpha[i]}c=jStat.multiply(jStat.inv(A),B);for(j=0;j<n-1;j++){b[j]=(F[j+1]-F[j])/h[j]-h[j]*(c[j+1][0]+2*c[j][0])/3;d[j]=(c[j+1][0]-c[j][0])/(3*h[j])}for(j=0;j<n;j++){if(X[j]>value)break}j-=1;return F[j]+(value-X[j])*b[j]+jStat.sq(value-X[j])*c[j]+(value-X[j])*jStat.sq(value-X[j])*d[j]},gauss_quadrature:function gauss_quadrature(){throw new Error("gauss_quadrature not yet implemented")},PCA:function PCA(X){var m=X.length;var n=X[0].length;var flag=false;var i=0;var j,temp1;var u=[];var D=[];var result=[];var temp2=[];var Y=[];var Bt=[];var B=[];var C=[];var V=[];var Vt=[];for(i=0;i<m;i++){u[i]=jStat.sum(X[i])/n}for(i=0;i<n;i++){B[i]=[];for(j=0;j<m;j++){B[i][j]=X[j][i]-u[j]}}B=jStat.transpose(B);for(i=0;i<m;i++){C[i]=[];for(j=0;j<m;j++){C[i][j]=jStat.dot([B[i]],[B[j]])/(n-1)}}result=jStat.jacobi(C);V=result[0];D=result[1];Vt=jStat.transpose(V);for(i=0;i<D.length;i++){for(j=i;j<D.length;j++){if(D[i]<D[j]){temp1=D[i];D[i]=D[j];D[j]=temp1;temp2=Vt[i];Vt[i]=Vt[j];Vt[j]=temp2}}}Bt=jStat.transpose(B);for(i=0;i<m;i++){Y[i]=[];for(j=0;j<Bt.length;j++){Y[i][j]=jStat.dot([Vt[i]],[Bt[j]])}}return[X,D,Vt,Y]}});(function(funcs){for(var i=0;i<funcs.length;i++)(function(passfunc){jStat.fn[passfunc]=function(arg,func){var tmpthis=this;if(func){setTimeout(function(){func.call(tmpthis,jStat.fn[passfunc].call(tmpthis,arg))},15);return this}if(typeof jStat[passfunc](this,arg)==="number")return jStat[passfunc](this,arg);else return jStat(jStat[passfunc](this,arg))}})(funcs[i])})("add divide multiply subtract dot pow abs norm angle".split(" "))})(this.jStat,Math);(function(jStat,Math){var slice=[].slice;var isNumber=jStat.utils.isNumber;jStat.extend({zscore:function zscore(){var args=slice.call(arguments);if(isNumber(args[1])){return(args[0]-args[1])/args[2]}return(args[0]-jStat.mean(args[1]))/jStat.stdev(args[1],args[2])},ztest:function ztest(){var args=slice.call(arguments);if(args.length===4){if(isNumber(args[1])){var z=jStat.zscore(args[0],args[1],args[2]);return args[3]===1?jStat.normal.cdf(-Math.abs(z),0,1):jStat.normal.cdf(-Math.abs(z),0,1)*2}var z=args[0];return args[2]===1?jStat.normal.cdf(-Math.abs(z),0,1):jStat.normal.cdf(-Math.abs(z),0,1)*2}var z=jStat.zscore(args[0],args[1],args[3]);return args[1]===1?jStat.normal.cdf(-Math.abs(z),0,1):jStat.normal.cdf(-Math.abs(z),0,1)*2}});jStat.extend(jStat.fn,{zscore:function zscore(value,flag){return(value-this.mean())/this.stdev(flag)},ztest:function ztest(value,sides,flag){var zscore=Math.abs(this.zscore(value,flag));return sides===1?jStat.normal.cdf(-zscore,0,1):jStat.normal.cdf(-zscore,0,1)*2}});jStat.extend({tscore:function tscore(){var args=slice.call(arguments);return args.length===4?(args[0]-args[1])/(args[2]/Math.sqrt(args[3])):(args[0]-jStat.mean(args[1]))/(jStat.stdev(args[1],true)/Math.sqrt(args[1].length))},ttest:function ttest(){var args=slice.call(arguments);var tscore;if(args.length===5){tscore=Math.abs(jStat.tscore(args[0],args[1],args[2],args[3]));return args[4]===1?jStat.studentt.cdf(-tscore,args[3]-1):jStat.studentt.cdf(-tscore,args[3]-1)*2}if(isNumber(args[1])){tscore=Math.abs(args[0]);return args[2]==1?jStat.studentt.cdf(-tscore,args[1]-1):jStat.studentt.cdf(-tscore,args[1]-1)*2}tscore=Math.abs(jStat.tscore(args[0],args[1]));return args[2]==1?jStat.studentt.cdf(-tscore,args[1].length-1):jStat.studentt.cdf(-tscore,args[1].length-1)*2}});jStat.extend(jStat.fn,{tscore:function tscore(value){return(value-this.mean())/(this.stdev(true)/Math.sqrt(this.cols()))},ttest:function ttest(value,sides){return sides===1?1-jStat.studentt.cdf(Math.abs(this.tscore(value)),this.cols()-1):jStat.studentt.cdf(-Math.abs(this.tscore(value)),this.cols()-1)*2}});jStat.extend({anovafscore:function anovafscore(){var args=slice.call(arguments),expVar,sample,sampMean,sampSampMean,tmpargs,unexpVar,i,j;if(args.length===1){tmpargs=new Array(args[0].length);for(i=0;i<args[0].length;i++){tmpargs[i]=args[0][i]}args=tmpargs}if(args.length===2){return jStat.variance(args[0])/jStat.variance(args[1])}sample=new Array;for(i=0;i<args.length;i++){sample=sample.concat(args[i])}sampMean=jStat.mean(sample);expVar=0;for(i=0;i<args.length;i++){expVar=expVar+args[i].length*Math.pow(jStat.mean(args[i])-sampMean,2)}expVar/=args.length-1;unexpVar=0;for(i=0;i<args.length;i++){sampSampMean=jStat.mean(args[i]);for(j=0;j<args[i].length;j++){unexpVar+=Math.pow(args[i][j]-sampSampMean,2)}}unexpVar/=sample.length-args.length;return expVar/unexpVar},anovaftest:function anovaftest(){var args=slice.call(arguments),df1,df2,n,i;if(isNumber(args[0])){return 1-jStat.centralF.cdf(args[0],args[1],args[2])}anovafscore=jStat.anovafscore(args);df1=args.length-1;n=0;for(i=0;i<args.length;i++){n=n+args[i].length}df2=n-df1-1;return 1-jStat.centralF.cdf(anovafscore,df1,df2)},ftest:function ftest(fscore,df1,df2){return 1-jStat.centralF.cdf(fscore,df1,df2)}});jStat.extend(jStat.fn,{anovafscore:function anovafscore(){return jStat.anovafscore(this.toArray())},anovaftes:function anovaftes(){var n=0;var i;for(i=0;i<this.length;i++){n=n+this[i].length}return jStat.ftest(this.anovafscore(),this.length-1,n-this.length)}});jStat.extend({normalci:function normalci(){var args=slice.call(arguments),ans=new Array(2),change;if(args.length===4){change=Math.abs(jStat.normal.inv(args[1]/2,0,1)*args[2]/Math.sqrt(args[3]))}else{change=Math.abs(jStat.normal.inv(args[1]/2,0,1)*jStat.stdev(args[2])/Math.sqrt(args[2].length))}ans[0]=args[0]-change;ans[1]=args[0]+change;return ans},tci:function tci(){var args=slice.call(arguments),ans=new Array(2),change;if(args.length===4){change=Math.abs(jStat.studentt.inv(args[1]/2,args[3]-1)*args[2]/Math.sqrt(args[3]))}else{change=Math.abs(jStat.studentt.inv(args[1]/2,args[2].length-1)*jStat.stdev(args[2],true)/Math.sqrt(args[2].length))}ans[0]=args[0]-change;ans[1]=args[0]+change;return ans},significant:function significant(pvalue,alpha){return pvalue<alpha}});jStat.extend(jStat.fn,{normalci:function normalci(value,alpha){return jStat.normalci(value,alpha,this.toArray())},tci:function tci(value,alpha){return jStat.tci(value,alpha,this.toArray())}})})(this.jStat,Math)},{}],19:[function(require,module,exports){(function(global){(function(){var undefined;var arrayPool=[],objectPool=[];var idCounter=0;var keyPrefix=+new Date+"";var largeArraySize=75;var maxPoolSize=40;var whitespace=" 	\f ﻿"+"\n\r\u2028\u2029"+" ᠎             　";var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reFuncName=/^\s*function[ \n\r\t]+\w/;var reInterpolate=/<%=([\s\S]+?)%>/g;var reLeadingSpacesAndZeros=RegExp("^["+whitespace+"]*0+(?=.$)");var reNoMatch=/($^)/;var reThis=/\bthis\b/;var reUnescapedString=/['\n\r\t\u2028\u2029\\]/g;var contextProps=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"];var templateCounter=0;var argsClass="[object Arguments]",arrayClass="[object Array]",boolClass="[object Boolean]",dateClass="[object Date]",funcClass="[object Function]",numberClass="[object Number]",objectClass="[object Object]",regexpClass="[object RegExp]",stringClass="[object String]";var cloneableClasses={};cloneableClasses[funcClass]=false;cloneableClasses[argsClass]=cloneableClasses[arrayClass]=cloneableClasses[boolClass]=cloneableClasses[dateClass]=cloneableClasses[numberClass]=cloneableClasses[objectClass]=cloneableClasses[regexpClass]=cloneableClasses[stringClass]=true;var debounceOptions={leading:false,maxWait:0,trailing:false};var descriptor={configurable:false,enumerable:false,value:null,writable:false};var objectTypes={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};var root=objectTypes[typeof window]&&window||this;var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports;var freeGlobal=objectTypes[typeof global]&&global;if(freeGlobal&&(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal)){root=freeGlobal}function baseIndexOf(array,value,fromIndex){var index=(fromIndex||0)-1,length=array?array.length:0;while(++index<length){if(array[index]===value){return index}}return-1}function cacheIndexOf(cache,value){var type=typeof value;cache=cache.cache;if(type=="boolean"||value==null){return cache[value]?0:-1}if(type!="number"&&type!="string"){type="object"}var key=type=="number"?value:keyPrefix+value;cache=(cache=cache[type])&&cache[key];return type=="object"?cache&&baseIndexOf(cache,value)>-1?0:-1:cache?0:-1}function cachePush(value){var cache=this.cache,type=typeof value;if(type=="boolean"||value==null){cache[value]=true}else{if(type!="number"&&type!="string"){type="object"}var key=type=="number"?value:keyPrefix+value,typeCache=cache[type]||(cache[type]={});if(type=="object"){(typeCache[key]||(typeCache[key]=[])).push(value)}else{typeCache[key]=true}}}function charAtCallback(value){return value.charCodeAt(0)}function compareAscending(a,b){var ac=a.criteria,bc=b.criteria,index=-1,length=ac.length;while(++index<length){var value=ac[index],other=bc[index];if(value!==other){if(value>other||typeof value=="undefined"){return 1
}if(value<other||typeof other=="undefined"){return-1}}}return a.index-b.index}function createCache(array){var index=-1,length=array.length,first=array[0],mid=array[length/2|0],last=array[length-1];if(first&&typeof first=="object"&&mid&&typeof mid=="object"&&last&&typeof last=="object"){return false}var cache=getObject();cache["false"]=cache["null"]=cache["true"]=cache["undefined"]=false;var result=getObject();result.array=array;result.cache=cache;result.push=cachePush;while(++index<length){result.push(array[index])}return result}function escapeStringChar(match){return"\\"+stringEscapes[match]}function getArray(){return arrayPool.pop()||[]}function getObject(){return objectPool.pop()||{array:null,cache:null,criteria:null,"false":false,index:0,"null":false,number:null,object:null,push:null,string:null,"true":false,undefined:false,value:null}}function releaseArray(array){array.length=0;if(arrayPool.length<maxPoolSize){arrayPool.push(array)}}function releaseObject(object){var cache=object.cache;if(cache){releaseObject(cache)}object.array=object.cache=object.criteria=object.object=object.number=object.string=object.value=null;if(objectPool.length<maxPoolSize){objectPool.push(object)}}function slice(array,start,end){start||(start=0);if(typeof end=="undefined"){end=array?array.length:0}var index=-1,length=end-start||0,result=Array(length<0?0:length);while(++index<length){result[index]=array[start+index]}return result}function runInContext(context){context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Boolean=context.Boolean,Date=context.Date,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayRef=[];var objectProto=Object.prototype;var oldDash=context._;var toString=objectProto.toString;var reNative=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");var ceil=Math.ceil,clearTimeout=context.clearTimeout,floor=Math.floor,fnToString=Function.prototype.toString,getPrototypeOf=isNative(getPrototypeOf=Object.getPrototypeOf)&&getPrototypeOf,hasOwnProperty=objectProto.hasOwnProperty,push=arrayRef.push,setTimeout=context.setTimeout,splice=arrayRef.splice,unshift=arrayRef.unshift;var defineProperty=function(){try{var o={},func=isNative(func=Object.defineProperty)&&func,result=func(o,o,o)&&func}catch(e){}return result}();var nativeCreate=isNative(nativeCreate=Object.create)&&nativeCreate,nativeIsArray=isNative(nativeIsArray=Array.isArray)&&nativeIsArray,nativeIsFinite=context.isFinite,nativeIsNaN=context.isNaN,nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys,nativeMax=Math.max,nativeMin=Math.min,nativeParseInt=context.parseInt,nativeRandom=Math.random;var ctorByClass={};ctorByClass[arrayClass]=Array;ctorByClass[boolClass]=Boolean;ctorByClass[dateClass]=Date;ctorByClass[funcClass]=Function;ctorByClass[objectClass]=Object;ctorByClass[numberClass]=Number;ctorByClass[regexpClass]=RegExp;ctorByClass[stringClass]=String;function lodash(value){return value&&typeof value=="object"&&!isArray(value)&&hasOwnProperty.call(value,"__wrapped__")?value:new lodashWrapper(value)}function lodashWrapper(value,chainAll){this.__chain__=!!chainAll;this.__wrapped__=value}lodashWrapper.prototype=lodash.prototype;var support=lodash.support={};support.funcDecomp=!isNative(context.WinRTError)&&reThis.test(runInContext);support.funcNames=typeof Function.name=="string";lodash.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:reInterpolate,variable:"",imports:{_:lodash}};function baseBind(bindData){var func=bindData[0],partialArgs=bindData[2],thisArg=bindData[4];function bound(){if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if(this instanceof bound){var thisBinding=baseCreate(func.prototype),result=func.apply(thisBinding,args||arguments);return isObject(result)?result:thisBinding}return func.apply(thisArg,args||arguments)}setBindData(bound,bindData);return bound}function baseClone(value,isDeep,callback,stackA,stackB){if(callback){var result=callback(value);if(typeof result!="undefined"){return result}}var isObj=isObject(value);if(isObj){var className=toString.call(value);if(!cloneableClasses[className]){return value}var ctor=ctorByClass[className];switch(className){case boolClass:case dateClass:return new ctor(+value);case numberClass:case stringClass:return new ctor(value);case regexpClass:result=ctor(value.source,reFlags.exec(value));result.lastIndex=value.lastIndex;return result}}else{return value}var isArr=isArray(value);if(isDeep){var initedStack=!stackA;stackA||(stackA=getArray());stackB||(stackB=getArray());var length=stackA.length;while(length--){if(stackA[length]==value){return stackB[length]}}result=isArr?ctor(value.length):{}}else{result=isArr?slice(value):assign({},value)}if(isArr){if(hasOwnProperty.call(value,"index")){result.index=value.index}if(hasOwnProperty.call(value,"input")){result.input=value.input}}if(!isDeep){return result}stackA.push(value);stackB.push(result);(isArr?forEach:forOwn)(value,function(objValue,key){result[key]=baseClone(objValue,isDeep,callback,stackA,stackB)});if(initedStack){releaseArray(stackA);releaseArray(stackB)}return result}function baseCreate(prototype,properties){return isObject(prototype)?nativeCreate(prototype):{}}if(!nativeCreate){baseCreate=function(){function Object(){}return function(prototype){if(isObject(prototype)){Object.prototype=prototype;var result=new Object;Object.prototype=null}return result||context.Object()}}()}function baseCreateCallback(func,thisArg,argCount){if(typeof func!="function"){return identity}if(typeof thisArg=="undefined"||!("prototype"in func)){return func}var bindData=func.__bindData__;if(typeof bindData=="undefined"){if(support.funcNames){bindData=!func.name}bindData=bindData||!support.funcDecomp;if(!bindData){var source=fnToString.call(func);if(!support.funcNames){bindData=!reFuncName.test(source)}if(!bindData){bindData=reThis.test(source);setBindData(func,bindData)}}}if(bindData===false||bindData!==true&&bindData[1]&1){return func}switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 2:return function(a,b){return func.call(thisArg,a,b)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)}}return bind(func,thisArg)}function baseCreateWrapper(bindData){var func=bindData[0],bitmask=bindData[1],partialArgs=bindData[2],partialRightArgs=bindData[3],thisArg=bindData[4],arity=bindData[5];var isBind=bitmask&1,isBindKey=bitmask&2,isCurry=bitmask&4,isCurryBound=bitmask&8,key=func;function bound(){var thisBinding=isBind?thisArg:this;if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if(partialRightArgs||isCurry){args||(args=slice(arguments));if(partialRightArgs){push.apply(args,partialRightArgs)}if(isCurry&&args.length<arity){bitmask|=16&~32;return baseCreateWrapper([func,isCurryBound?bitmask:bitmask&~3,args,null,thisArg,arity])}}args||(args=arguments);if(isBindKey){func=thisBinding[key]}if(this instanceof bound){thisBinding=baseCreate(func.prototype);var result=func.apply(thisBinding,args);return isObject(result)?result:thisBinding}return func.apply(thisBinding,args)}setBindData(bound,bindData);return bound}function baseDifference(array,values){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,isLarge=length>=largeArraySize&&indexOf===baseIndexOf,result=[];if(isLarge){var cache=createCache(values);if(cache){indexOf=cacheIndexOf;values=cache}else{isLarge=false}}while(++index<length){var value=array[index];if(indexOf(values,value)<0){result.push(value)}}if(isLarge){releaseObject(values)}return result}function baseFlatten(array,isShallow,isStrict,fromIndex){var index=(fromIndex||0)-1,length=array?array.length:0,result=[];while(++index<length){var value=array[index];if(value&&typeof value=="object"&&typeof value.length=="number"&&(isArray(value)||isArguments(value))){if(!isShallow){value=baseFlatten(value,isShallow,isStrict)}var valIndex=-1,valLength=value.length,resIndex=result.length;result.length+=valLength;while(++valIndex<valLength){result[resIndex++]=value[valIndex]}}else if(!isStrict){result.push(value)}}return result}function baseIsEqual(a,b,callback,isWhere,stackA,stackB){if(callback){var result=callback(a,b);if(typeof result!="undefined"){return!!result}}if(a===b){return a!==0||1/a==1/b}var type=typeof a,otherType=typeof b;if(a===a&&!(a&&objectTypes[type])&&!(b&&objectTypes[otherType])){return false}if(a==null||b==null){return a===b}var className=toString.call(a),otherClass=toString.call(b);if(className==argsClass){className=objectClass}if(otherClass==argsClass){otherClass=objectClass}if(className!=otherClass){return false}switch(className){case boolClass:case dateClass:return+a==+b;case numberClass:return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case regexpClass:case stringClass:return a==String(b)}var isArr=className==arrayClass;if(!isArr){var aWrapped=hasOwnProperty.call(a,"__wrapped__"),bWrapped=hasOwnProperty.call(b,"__wrapped__");if(aWrapped||bWrapped){return baseIsEqual(aWrapped?a.__wrapped__:a,bWrapped?b.__wrapped__:b,callback,isWhere,stackA,stackB)}if(className!=objectClass){return false}var ctorA=a.constructor,ctorB=b.constructor;if(ctorA!=ctorB&&!(isFunction(ctorA)&&ctorA instanceof ctorA&&isFunction(ctorB)&&ctorB instanceof ctorB)&&("constructor"in a&&"constructor"in b)){return false}}var initedStack=!stackA;stackA||(stackA=getArray());stackB||(stackB=getArray());var length=stackA.length;while(length--){if(stackA[length]==a){return stackB[length]==b}}var size=0;result=true;stackA.push(a);stackB.push(b);if(isArr){length=a.length;size=b.length;result=size==length;if(result||isWhere){while(size--){var index=length,value=b[size];if(isWhere){while(index--){if(result=baseIsEqual(a[index],value,callback,isWhere,stackA,stackB)){break}}}else if(!(result=baseIsEqual(a[size],value,callback,isWhere,stackA,stackB))){break}}}}else{forIn(b,function(value,key,b){if(hasOwnProperty.call(b,key)){size++;return result=hasOwnProperty.call(a,key)&&baseIsEqual(a[key],value,callback,isWhere,stackA,stackB)}});if(result&&!isWhere){forIn(a,function(value,key,a){if(hasOwnProperty.call(a,key)){return result=--size>-1}})}}stackA.pop();stackB.pop();if(initedStack){releaseArray(stackA);releaseArray(stackB)}return result}function baseMerge(object,source,callback,stackA,stackB){(isArray(source)?forEach:forOwn)(source,function(source,key){var found,isArr,result=source,value=object[key];if(source&&((isArr=isArray(source))||isPlainObject(source))){var stackLength=stackA.length;while(stackLength--){if(found=stackA[stackLength]==source){value=stackB[stackLength];break}}if(!found){var isShallow;if(callback){result=callback(value,source);if(isShallow=typeof result!="undefined"){value=result}}if(!isShallow){value=isArr?isArray(value)?value:[]:isPlainObject(value)?value:{}}stackA.push(source);stackB.push(value);if(!isShallow){baseMerge(value,source,callback,stackA,stackB)}}}else{if(callback){result=callback(value,source);if(typeof result=="undefined"){result=source}}if(typeof result!="undefined"){value=result}}object[key]=value})}function baseRandom(min,max){return min+floor(nativeRandom()*(max-min+1))}function baseUniq(array,isSorted,callback){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,result=[];var isLarge=!isSorted&&length>=largeArraySize&&indexOf===baseIndexOf,seen=callback||isLarge?getArray():result;if(isLarge){var cache=createCache(seen);indexOf=cacheIndexOf;seen=cache}while(++index<length){var value=array[index],computed=callback?callback(value,index,array):value;if(isSorted?!index||seen[seen.length-1]!==computed:indexOf(seen,computed)<0){if(callback||isLarge){seen.push(computed)}result.push(value)}}if(isLarge){releaseArray(seen.array);releaseObject(seen)}else if(callback){releaseArray(seen)}return result}function createAggregator(setter){return function(collection,callback,thisArg){var result={};callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){var value=collection[index];setter(result,value,callback(value,index,collection),collection)}}else{forOwn(collection,function(value,key,collection){setter(result,value,callback(value,key,collection),collection)})}return result}}function createWrapper(func,bitmask,partialArgs,partialRightArgs,thisArg,arity){var isBind=bitmask&1,isBindKey=bitmask&2,isCurry=bitmask&4,isCurryBound=bitmask&8,isPartial=bitmask&16,isPartialRight=bitmask&32;if(!isBindKey&&!isFunction(func)){throw new TypeError}if(isPartial&&!partialArgs.length){bitmask&=~16;isPartial=partialArgs=false}if(isPartialRight&&!partialRightArgs.length){bitmask&=~32;isPartialRight=partialRightArgs=false}var bindData=func&&func.__bindData__;if(bindData&&bindData!==true){bindData=slice(bindData);if(bindData[2]){bindData[2]=slice(bindData[2])}if(bindData[3]){bindData[3]=slice(bindData[3])}if(isBind&&!(bindData[1]&1)){bindData[4]=thisArg}if(!isBind&&bindData[1]&1){bitmask|=8}if(isCurry&&!(bindData[1]&4)){bindData[5]=arity}if(isPartial){push.apply(bindData[2]||(bindData[2]=[]),partialArgs)}if(isPartialRight){unshift.apply(bindData[3]||(bindData[3]=[]),partialRightArgs)}bindData[1]|=bitmask;return createWrapper.apply(null,bindData)}var creater=bitmask==1||bitmask===17?baseBind:baseCreateWrapper;return creater([func,bitmask,partialArgs,partialRightArgs,thisArg,arity])}function escapeHtmlChar(match){return htmlEscapes[match]}function getIndexOf(){var result=(result=lodash.indexOf)===indexOf?baseIndexOf:result;return result}function isNative(value){return typeof value=="function"&&reNative.test(value)}var setBindData=!defineProperty?noop:function(func,value){descriptor.value=value;defineProperty(func,"__bindData__",descriptor)};function shimIsPlainObject(value){var ctor,result;if(!(value&&toString.call(value)==objectClass)||(ctor=value.constructor,isFunction(ctor)&&!(ctor instanceof ctor))){return false}forIn(value,function(value,key){result=key});return typeof result=="undefined"||hasOwnProperty.call(value,result)}function unescapeHtmlChar(match){return htmlUnescapes[match]}function isArguments(value){return value&&typeof value=="object"&&typeof value.length=="number"&&toString.call(value)==argsClass||false}var isArray=nativeIsArray||function(value){return value&&typeof value=="object"&&typeof value.length=="number"&&toString.call(value)==arrayClass||false};var shimKeys=function(object){var index,iterable=object,result=[];if(!iterable)return result;if(!objectTypes[typeof object])return result;for(index in iterable){if(hasOwnProperty.call(iterable,index)){result.push(index)}}return result};var keys=!nativeKeys?shimKeys:function(object){if(!isObject(object)){return[]}return nativeKeys(object)};var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var htmlUnescapes=invert(htmlEscapes);var reEscapedHtml=RegExp("("+keys(htmlUnescapes).join("|")+")","g"),reUnescapedHtml=RegExp("["+keys(htmlEscapes).join("")+"]","g");var assign=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength=typeof guard=="number"?2:args.length;if(argsLength>3&&typeof args[argsLength-2]=="function"){var callback=baseCreateCallback(args[--argsLength-1],args[argsLength--],2)}else if(argsLength>2&&typeof args[argsLength-1]=="function"){callback=args[--argsLength]}while(++argsIndex<argsLength){iterable=args[argsIndex];if(iterable&&objectTypes[typeof iterable]){var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];result[index]=callback?callback(result[index],iterable[index]):iterable[index]}}}return result};function clone(value,isDeep,callback,thisArg){if(typeof isDeep!="boolean"&&isDeep!=null){thisArg=callback;callback=isDeep;isDeep=false}return baseClone(value,isDeep,typeof callback=="function"&&baseCreateCallback(callback,thisArg,1))}function cloneDeep(value,callback,thisArg){return baseClone(value,true,typeof callback=="function"&&baseCreateCallback(callback,thisArg,1))}function create(prototype,properties){var result=baseCreate(prototype);return properties?assign(result,properties):result}var defaults=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength=typeof guard=="number"?2:args.length;while(++argsIndex<argsLength){iterable=args[argsIndex];if(iterable&&objectTypes[typeof iterable]){var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];if(typeof result[index]=="undefined")result[index]=iterable[index]}}}return result};function findKey(object,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);forOwn(object,function(value,key,object){if(callback(value,key,object)){result=key;return false}});return result}function findLastKey(object,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);forOwnRight(object,function(value,key,object){if(callback(value,key,object)){result=key;return false}});return result}var forIn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&typeof thisArg=="undefined"?callback:baseCreateCallback(callback,thisArg,3);for(index in iterable){if(callback(iterable[index],index,collection)===false)return result}return result};function forInRight(object,callback,thisArg){var pairs=[];forIn(object,function(value,key){pairs.push(key,value)});var length=pairs.length;callback=baseCreateCallback(callback,thisArg,3);while(length--){if(callback(pairs[length--],pairs[length],object)===false){break}}return object}var forOwn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&typeof thisArg=="undefined"?callback:baseCreateCallback(callback,thisArg,3);var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];if(callback(iterable[index],index,collection)===false)return result}return result};function forOwnRight(object,callback,thisArg){var props=keys(object),length=props.length;callback=baseCreateCallback(callback,thisArg,3);while(length--){var key=props[length];if(callback(object[key],key,object)===false){break}}return object}function functions(object){var result=[];forIn(object,function(value,key){if(isFunction(value)){result.push(key)}});return result.sort()}function has(object,key){return object?hasOwnProperty.call(object,key):false}function invert(object){var index=-1,props=keys(object),length=props.length,result={};while(++index<length){var key=props[index];result[object[key]]=key}return result}function isBoolean(value){return value===true||value===false||value&&typeof value=="object"&&toString.call(value)==boolClass||false}function isDate(value){return value&&typeof value=="object"&&toString.call(value)==dateClass||false}function isElement(value){return value&&value.nodeType===1||false}function isEmpty(value){var result=true;if(!value){return result}var className=toString.call(value),length=value.length;if(className==arrayClass||className==stringClass||className==argsClass||className==objectClass&&typeof length=="number"&&isFunction(value.splice)){return!length}forOwn(value,function(){return result=false});return result}function isEqual(a,b,callback,thisArg){return baseIsEqual(a,b,typeof callback=="function"&&baseCreateCallback(callback,thisArg,2))}function isFinite(value){return nativeIsFinite(value)&&!nativeIsNaN(parseFloat(value))}function isFunction(value){return typeof value=="function"}function isObject(value){return!!(value&&objectTypes[typeof value])}function isNaN(value){return isNumber(value)&&value!=+value}function isNull(value){return value===null}function isNumber(value){return typeof value=="number"||value&&typeof value=="object"&&toString.call(value)==numberClass||false}var isPlainObject=!getPrototypeOf?shimIsPlainObject:function(value){if(!(value&&toString.call(value)==objectClass)){return false}var valueOf=value.valueOf,objProto=isNative(valueOf)&&(objProto=getPrototypeOf(valueOf))&&getPrototypeOf(objProto);return objProto?value==objProto||getPrototypeOf(value)==objProto:shimIsPlainObject(value)};function isRegExp(value){return value&&typeof value=="object"&&toString.call(value)==regexpClass||false}function isString(value){return typeof value=="string"||value&&typeof value=="object"&&toString.call(value)==stringClass||false}function isUndefined(value){return typeof value=="undefined"}function mapValues(object,callback,thisArg){var result={};callback=lodash.createCallback(callback,thisArg,3);forOwn(object,function(value,key,object){result[key]=callback(value,key,object)});return result}function merge(object){var args=arguments,length=2;if(!isObject(object)){return object}if(typeof args[2]!="number"){length=args.length}if(length>3&&typeof args[length-2]=="function"){var callback=baseCreateCallback(args[--length-1],args[length--],2)}else if(length>2&&typeof args[length-1]=="function"){callback=args[--length]}var sources=slice(arguments,1,length),index=-1,stackA=getArray(),stackB=getArray();while(++index<length){baseMerge(object,sources[index],callback,stackA,stackB)}releaseArray(stackA);releaseArray(stackB);return object}function omit(object,callback,thisArg){var result={};if(typeof callback!="function"){var props=[];forIn(object,function(value,key){props.push(key)});props=baseDifference(props,baseFlatten(arguments,true,false,1));var index=-1,length=props.length;while(++index<length){var key=props[index];result[key]=object[key]}}else{callback=lodash.createCallback(callback,thisArg,3);forIn(object,function(value,key,object){if(!callback(value,key,object)){result[key]=value}})}return result}function pairs(object){var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){var key=props[index];result[index]=[key,object[key]]}return result}function pick(object,callback,thisArg){var result={};if(typeof callback!="function"){var index=-1,props=baseFlatten(arguments,true,false,1),length=isObject(object)?props.length:0;while(++index<length){var key=props[index];if(key in object){result[key]=object[key]}}}else{callback=lodash.createCallback(callback,thisArg,3);forIn(object,function(value,key,object){if(callback(value,key,object)){result[key]=value}})}return result}function transform(object,callback,accumulator,thisArg){var isArr=isArray(object);if(accumulator==null){if(isArr){accumulator=[]}else{var ctor=object&&object.constructor,proto=ctor&&ctor.prototype;accumulator=baseCreate(proto)}}if(callback){callback=lodash.createCallback(callback,thisArg,4);(isArr?forEach:forOwn)(object,function(value,index,object){return callback(accumulator,value,index,object)})}return accumulator}function values(object){var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){result[index]=object[props[index]]}return result}function at(collection){var args=arguments,index=-1,props=baseFlatten(args,true,false,1),length=args[2]&&args[2][args[1]]===collection?1:props.length,result=Array(length);while(++index<length){result[index]=collection[props[index]]}return result}function contains(collection,target,fromIndex){var index=-1,indexOf=getIndexOf(),length=collection?collection.length:0,result=false;fromIndex=(fromIndex<0?nativeMax(0,length+fromIndex):fromIndex)||0;if(isArray(collection)){result=indexOf(collection,target,fromIndex)>-1}else if(typeof length=="number"){result=(isString(collection)?collection.indexOf(target,fromIndex):indexOf(collection,target,fromIndex))>-1}else{forOwn(collection,function(value){if(++index>=fromIndex){return!(result=value===target)}})}return result}var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key]++:result[key]=1});function every(collection,callback,thisArg){var result=true;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){if(!(result=!!callback(collection[index],index,collection))){break}}}else{forOwn(collection,function(value,index,collection){return result=!!callback(value,index,collection)})}return result}function filter(collection,callback,thisArg){var result=[];callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){var value=collection[index];if(callback(value,index,collection)){result.push(value)}}}else{forOwn(collection,function(value,index,collection){if(callback(value,index,collection)){result.push(value)}})}return result}function find(collection,callback,thisArg){callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){var value=collection[index];if(callback(value,index,collection)){return value}}}else{var result;forOwn(collection,function(value,index,collection){if(callback(value,index,collection)){result=value;return false}});return result}}function findLast(collection,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);forEachRight(collection,function(value,index,collection){if(callback(value,index,collection)){result=value;return false}});return result}function forEach(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;callback=callback&&typeof thisArg=="undefined"?callback:baseCreateCallback(callback,thisArg,3);if(typeof length=="number"){while(++index<length){if(callback(collection[index],index,collection)===false){break}}}else{forOwn(collection,callback)}return collection}function forEachRight(collection,callback,thisArg){var length=collection?collection.length:0;callback=callback&&typeof thisArg=="undefined"?callback:baseCreateCallback(callback,thisArg,3);if(typeof length=="number"){while(length--){if(callback(collection[length],length,collection)===false){break}}}else{var props=keys(collection);length=props.length;forOwn(collection,function(value,key,collection){key=props?props[--length]:--length;return callback(collection[key],key,collection)})}return collection}var groupBy=createAggregator(function(result,value,key){(hasOwnProperty.call(result,key)?result[key]:result[key]=[]).push(value)});var indexBy=createAggregator(function(result,value,key){result[key]=value});function invoke(collection,methodName){var args=slice(arguments,2),index=-1,isFunc=typeof methodName=="function",length=collection?collection.length:0,result=Array(typeof length=="number"?length:0);forEach(collection,function(value){result[++index]=(isFunc?methodName:value[methodName]).apply(value,args)});return result}function map(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;callback=lodash.createCallback(callback,thisArg,3);if(typeof length=="number"){var result=Array(length);while(++index<length){result[index]=callback(collection[index],index,collection)}}else{result=[];forOwn(collection,function(value,key,collection){result[++index]=callback(value,key,collection)})}return result}function max(collection,callback,thisArg){var computed=-Infinity,result=computed;if(typeof callback!="function"&&thisArg&&thisArg[callback]===collection){callback=null}if(callback==null&&isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];if(value>result){result=value}}}else{callback=callback==null&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg,3);forEach(collection,function(value,index,collection){var current=callback(value,index,collection);if(current>computed){computed=current;result=value}})}return result}function min(collection,callback,thisArg){var computed=Infinity,result=computed;if(typeof callback!="function"&&thisArg&&thisArg[callback]===collection){callback=null}if(callback==null&&isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];if(value<result){result=value}}}else{callback=callback==null&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg,3);forEach(collection,function(value,index,collection){var current=callback(value,index,collection);if(current<computed){computed=current;result=value}})}return result}var pluck=map;function reduce(collection,callback,accumulator,thisArg){if(!collection)return accumulator;var noaccum=arguments.length<3;callback=lodash.createCallback(callback,thisArg,4);var index=-1,length=collection.length;if(typeof length=="number"){if(noaccum){accumulator=collection[++index]}while(++index<length){accumulator=callback(accumulator,collection[index],index,collection)}}else{forOwn(collection,function(value,index,collection){accumulator=noaccum?(noaccum=false,value):callback(accumulator,value,index,collection)})}return accumulator}function reduceRight(collection,callback,accumulator,thisArg){var noaccum=arguments.length<3;callback=lodash.createCallback(callback,thisArg,4);forEachRight(collection,function(value,index,collection){accumulator=noaccum?(noaccum=false,value):callback(accumulator,value,index,collection)});return accumulator}function reject(collection,callback,thisArg){callback=lodash.createCallback(callback,thisArg,3);return filter(collection,function(value,index,collection){return!callback(value,index,collection)})}function sample(collection,n,guard){if(collection&&typeof collection.length!="number"){collection=values(collection)}if(n==null||guard){return collection?collection[baseRandom(0,collection.length-1)]:undefined}var result=shuffle(collection);result.length=nativeMin(nativeMax(0,n),result.length);return result}function shuffle(collection){var index=-1,length=collection?collection.length:0,result=Array(typeof length=="number"?length:0);forEach(collection,function(value){var rand=baseRandom(0,++index);result[index]=result[rand];result[rand]=value});return result}function size(collection){var length=collection?collection.length:0;return typeof length=="number"?length:keys(collection).length}function some(collection,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){if(result=callback(collection[index],index,collection)){break}}}else{forOwn(collection,function(value,index,collection){return!(result=callback(value,index,collection))})}return!!result}function sortBy(collection,callback,thisArg){var index=-1,isArr=isArray(callback),length=collection?collection.length:0,result=Array(typeof length=="number"?length:0);if(!isArr){callback=lodash.createCallback(callback,thisArg,3)}forEach(collection,function(value,key,collection){var object=result[++index]=getObject();if(isArr){object.criteria=map(callback,function(key){return value[key]})}else{(object.criteria=getArray())[0]=callback(value,key,collection)}object.index=index;object.value=value});length=result.length;result.sort(compareAscending);while(length--){var object=result[length];result[length]=object.value;if(!isArr){releaseArray(object.criteria)}releaseObject(object)}return result}function toArray(collection){if(collection&&typeof collection.length=="number"){return slice(collection)}return values(collection)}var where=filter;function compact(array){var index=-1,length=array?array.length:0,result=[];while(++index<length){var value=array[index];if(value){result.push(value)
}}return result}function difference(array){return baseDifference(array,baseFlatten(arguments,true,true,1))}function findIndex(array,callback,thisArg){var index=-1,length=array?array.length:0;callback=lodash.createCallback(callback,thisArg,3);while(++index<length){if(callback(array[index],index,array)){return index}}return-1}function findLastIndex(array,callback,thisArg){var length=array?array.length:0;callback=lodash.createCallback(callback,thisArg,3);while(length--){if(callback(array[length],length,array)){return length}}return-1}function first(array,callback,thisArg){var n=0,length=array?array.length:0;if(typeof callback!="number"&&callback!=null){var index=-1;callback=lodash.createCallback(callback,thisArg,3);while(++index<length&&callback(array[index],index,array)){n++}}else{n=callback;if(n==null||thisArg){return array?array[0]:undefined}}return slice(array,0,nativeMin(nativeMax(0,n),length))}function flatten(array,isShallow,callback,thisArg){if(typeof isShallow!="boolean"&&isShallow!=null){thisArg=callback;callback=typeof isShallow!="function"&&thisArg&&thisArg[isShallow]===array?null:isShallow;isShallow=false}if(callback!=null){array=map(array,callback,thisArg)}return baseFlatten(array,isShallow)}function indexOf(array,value,fromIndex){if(typeof fromIndex=="number"){var length=array?array.length:0;fromIndex=fromIndex<0?nativeMax(0,length+fromIndex):fromIndex||0}else if(fromIndex){var index=sortedIndex(array,value);return array[index]===value?index:-1}return baseIndexOf(array,value,fromIndex)}function initial(array,callback,thisArg){var n=0,length=array?array.length:0;if(typeof callback!="number"&&callback!=null){var index=length;callback=lodash.createCallback(callback,thisArg,3);while(index--&&callback(array[index],index,array)){n++}}else{n=callback==null||thisArg?1:callback||n}return slice(array,0,nativeMin(nativeMax(0,length-n),length))}function intersection(){var args=[],argsIndex=-1,argsLength=arguments.length,caches=getArray(),indexOf=getIndexOf(),trustIndexOf=indexOf===baseIndexOf,seen=getArray();while(++argsIndex<argsLength){var value=arguments[argsIndex];if(isArray(value)||isArguments(value)){args.push(value);caches.push(trustIndexOf&&value.length>=largeArraySize&&createCache(argsIndex?args[argsIndex]:seen))}}var array=args[0],index=-1,length=array?array.length:0,result=[];outer:while(++index<length){var cache=caches[0];value=array[index];if((cache?cacheIndexOf(cache,value):indexOf(seen,value))<0){argsIndex=argsLength;(cache||seen).push(value);while(--argsIndex){cache=caches[argsIndex];if((cache?cacheIndexOf(cache,value):indexOf(args[argsIndex],value))<0){continue outer}}result.push(value)}}while(argsLength--){cache=caches[argsLength];if(cache){releaseObject(cache)}}releaseArray(caches);releaseArray(seen);return result}function last(array,callback,thisArg){var n=0,length=array?array.length:0;if(typeof callback!="number"&&callback!=null){var index=length;callback=lodash.createCallback(callback,thisArg,3);while(index--&&callback(array[index],index,array)){n++}}else{n=callback;if(n==null||thisArg){return array?array[length-1]:undefined}}return slice(array,nativeMax(0,length-n))}function lastIndexOf(array,value,fromIndex){var index=array?array.length:0;if(typeof fromIndex=="number"){index=(fromIndex<0?nativeMax(0,index+fromIndex):nativeMin(fromIndex,index-1))+1}while(index--){if(array[index]===value){return index}}return-1}function pull(array){var args=arguments,argsIndex=0,argsLength=args.length,length=array?array.length:0;while(++argsIndex<argsLength){var index=-1,value=args[argsIndex];while(++index<length){if(array[index]===value){splice.call(array,index--,1);length--}}}return array}function range(start,end,step){start=+start||0;step=typeof step=="number"?step:+step||1;if(end==null){end=start;start=0}var index=-1,length=nativeMax(0,ceil((end-start)/(step||1))),result=Array(length);while(++index<length){result[index]=start;start+=step}return result}function remove(array,callback,thisArg){var index=-1,length=array?array.length:0,result=[];callback=lodash.createCallback(callback,thisArg,3);while(++index<length){var value=array[index];if(callback(value,index,array)){result.push(value);splice.call(array,index--,1);length--}}return result}function rest(array,callback,thisArg){if(typeof callback!="number"&&callback!=null){var n=0,index=-1,length=array?array.length:0;callback=lodash.createCallback(callback,thisArg,3);while(++index<length&&callback(array[index],index,array)){n++}}else{n=callback==null||thisArg?1:nativeMax(0,callback)}return slice(array,n)}function sortedIndex(array,value,callback,thisArg){var low=0,high=array?array.length:low;callback=callback?lodash.createCallback(callback,thisArg,1):identity;value=callback(value);while(low<high){var mid=low+high>>>1;callback(array[mid])<value?low=mid+1:high=mid}return low}function union(){return baseUniq(baseFlatten(arguments,true,true))}function uniq(array,isSorted,callback,thisArg){if(typeof isSorted!="boolean"&&isSorted!=null){thisArg=callback;callback=typeof isSorted!="function"&&thisArg&&thisArg[isSorted]===array?null:isSorted;isSorted=false}if(callback!=null){callback=lodash.createCallback(callback,thisArg,3)}return baseUniq(array,isSorted,callback)}function without(array){return baseDifference(array,slice(arguments,1))}function xor(){var index=-1,length=arguments.length;while(++index<length){var array=arguments[index];if(isArray(array)||isArguments(array)){var result=result?baseUniq(baseDifference(result,array).concat(baseDifference(array,result))):array}}return result||[]}function zip(){var array=arguments.length>1?arguments:arguments[0],index=-1,length=array?max(pluck(array,"length")):0,result=Array(length<0?0:length);while(++index<length){result[index]=pluck(array,index)}return result}function zipObject(keys,values){var index=-1,length=keys?keys.length:0,result={};if(!values&&length&&!isArray(keys[0])){values=[]}while(++index<length){var key=keys[index];if(values){result[key]=values[index]}else if(key){result[key[0]]=key[1]}}return result}function after(n,func){if(!isFunction(func)){throw new TypeError}return function(){if(--n<1){return func.apply(this,arguments)}}}function bind(func,thisArg){return arguments.length>2?createWrapper(func,17,slice(arguments,2),null,thisArg):createWrapper(func,1,null,null,thisArg)}function bindAll(object){var funcs=arguments.length>1?baseFlatten(arguments,true,false,1):functions(object),index=-1,length=funcs.length;while(++index<length){var key=funcs[index];object[key]=createWrapper(object[key],1,null,null,object)}return object}function bindKey(object,key){return arguments.length>2?createWrapper(key,19,slice(arguments,2),null,object):createWrapper(key,3,null,null,object)}function compose(){var funcs=arguments,length=funcs.length;while(length--){if(!isFunction(funcs[length])){throw new TypeError}}return function(){var args=arguments,length=funcs.length;while(length--){args=[funcs[length].apply(this,args)]}return args[0]}}function curry(func,arity){arity=typeof arity=="number"?arity:+arity||func.length;return createWrapper(func,4,null,null,null,arity)}function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=false,trailing=true;if(!isFunction(func)){throw new TypeError}wait=nativeMax(0,wait)||0;if(options===true){var leading=true;trailing=false}else if(isObject(options)){leading=options.leading;maxWait="maxWait"in options&&(nativeMax(wait,options.maxWait)||0);trailing="trailing"in options?options.trailing:trailing}var delayed=function(){var remaining=wait-(now()-stamp);if(remaining<=0){if(maxTimeoutId){clearTimeout(maxTimeoutId)}var isCalled=trailingCall;maxTimeoutId=timeoutId=trailingCall=undefined;if(isCalled){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null}}}else{timeoutId=setTimeout(delayed,remaining)}};var maxDelayed=function(){if(timeoutId){clearTimeout(timeoutId)}maxTimeoutId=timeoutId=trailingCall=undefined;if(trailing||maxWait!==wait){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null}}};return function(){args=arguments;stamp=now();thisArg=this;trailingCall=trailing&&(timeoutId||!leading);if(maxWait===false){var leadingCall=leading&&!timeoutId}else{if(!maxTimeoutId&&!leading){lastCalled=stamp}var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0;if(isCalled){if(maxTimeoutId){maxTimeoutId=clearTimeout(maxTimeoutId)}lastCalled=stamp;result=func.apply(thisArg,args)}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining)}}if(isCalled&&timeoutId){timeoutId=clearTimeout(timeoutId)}else if(!timeoutId&&wait!==maxWait){timeoutId=setTimeout(delayed,wait)}if(leadingCall){isCalled=true;result=func.apply(thisArg,args)}if(isCalled&&!timeoutId&&!maxTimeoutId){args=thisArg=null}return result}}function defer(func){if(!isFunction(func)){throw new TypeError}var args=slice(arguments,1);return setTimeout(function(){func.apply(undefined,args)},1)}function delay(func,wait){if(!isFunction(func)){throw new TypeError}var args=slice(arguments,2);return setTimeout(function(){func.apply(undefined,args)},wait)}function memoize(func,resolver){if(!isFunction(func)){throw new TypeError}var memoized=function(){var cache=memoized.cache,key=resolver?resolver.apply(this,arguments):keyPrefix+arguments[0];return hasOwnProperty.call(cache,key)?cache[key]:cache[key]=func.apply(this,arguments)};memoized.cache={};return memoized}function once(func){var ran,result;if(!isFunction(func)){throw new TypeError}return function(){if(ran){return result}ran=true;result=func.apply(this,arguments);func=null;return result}}function partial(func){return createWrapper(func,16,slice(arguments,1))}function partialRight(func){return createWrapper(func,32,null,slice(arguments,1))}function throttle(func,wait,options){var leading=true,trailing=true;if(!isFunction(func)){throw new TypeError}if(options===false){leading=false}else if(isObject(options)){leading="leading"in options?options.leading:leading;trailing="trailing"in options?options.trailing:trailing}debounceOptions.leading=leading;debounceOptions.maxWait=wait;debounceOptions.trailing=trailing;return debounce(func,wait,debounceOptions)}function wrap(value,wrapper){return createWrapper(wrapper,16,[value])}function constant(value){return function(){return value}}function createCallback(func,thisArg,argCount){var type=typeof func;if(func==null||type=="function"){return baseCreateCallback(func,thisArg,argCount)}if(type!="object"){return property(func)}var props=keys(func),key=props[0],a=func[key];if(props.length==1&&a===a&&!isObject(a)){return function(object){var b=object[key];return a===b&&(a!==0||1/a==1/b)}}return function(object){var length=props.length,result=false;while(length--){if(!(result=baseIsEqual(object[props[length]],func[props[length]],null,true))){break}}return result}}function escape(string){return string==null?"":String(string).replace(reUnescapedHtml,escapeHtmlChar)}function identity(value){return value}function mixin(object,source,options){var chain=true,methodNames=source&&functions(source);if(!source||!options&&!methodNames.length){if(options==null){options=source}ctor=lodashWrapper;source=object;object=lodash;methodNames=functions(source)}if(options===false){chain=false}else if(isObject(options)&&"chain"in options){chain=options.chain}var ctor=object,isFunc=isFunction(ctor);forEach(methodNames,function(methodName){var func=object[methodName]=source[methodName];if(isFunc){ctor.prototype[methodName]=function(){var chainAll=this.__chain__,value=this.__wrapped__,args=[value];push.apply(args,arguments);var result=func.apply(object,args);if(chain||chainAll){if(value===result&&isObject(result)){return this}result=new ctor(result);result.__chain__=chainAll}return result}}})}function noConflict(){context._=oldDash;return this}function noop(){}var now=isNative(now=Date.now)&&now||function(){return(new Date).getTime()};var parseInt=nativeParseInt(whitespace+"08")==8?nativeParseInt:function(value,radix){return nativeParseInt(isString(value)?value.replace(reLeadingSpacesAndZeros,""):value,radix||0)};function property(key){return function(object){return object[key]}}function random(min,max,floating){var noMin=min==null,noMax=max==null;if(floating==null){if(typeof min=="boolean"&&noMax){floating=min;min=1}else if(!noMax&&typeof max=="boolean"){floating=max;noMax=true}}if(noMin&&noMax){max=1}min=+min||0;if(noMax){max=min;min=0}else{max=+max||0}if(floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+rand*(max-min+parseFloat("1e-"+((rand+"").length-1))),max)}return baseRandom(min,max)}function result(object,key){if(object){var value=object[key];return isFunction(value)?object[key]():value}}function template(text,data,options){var settings=lodash.templateSettings;text=String(text||"");options=defaults({},options,settings);var imports=defaults({},options.imports,settings.imports),importsKeys=keys(imports),importsValues=values(imports);var isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");text.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=text.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '"}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"}index=offset+match.length;return match});source+="';\n";var variable=options.variable,hasVariable=variable;if(!hasVariable){variable="obj";source="with ("+variable+") {\n"+source+"\n}\n"}source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source="function("+variable+") {\n"+(hasVariable?"":variable+" || ("+variable+" = {});\n")+"var __t, __p = '', __e = _.escape"+(isEvaluating?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var sourceURL="\n/*\n//# sourceURL="+(options.sourceURL||"/lodash/template/source["+templateCounter++ +"]")+"\n*/";try{var result=Function(importsKeys,"return "+source+sourceURL).apply(undefined,importsValues)}catch(e){e.source=source;throw e}if(data){return result(data)}result.source=source;return result}function times(n,callback,thisArg){n=(n=+n)>-1?n:0;var index=-1,result=Array(n);callback=baseCreateCallback(callback,thisArg,1);while(++index<n){result[index]=callback(index)}return result}function unescape(string){return string==null?"":String(string).replace(reEscapedHtml,unescapeHtmlChar)}function uniqueId(prefix){var id=++idCounter;return String(prefix==null?"":prefix)+id}function chain(value){value=new lodashWrapper(value);value.__chain__=true;return value}function tap(value,interceptor){interceptor(value);return value}function wrapperChain(){this.__chain__=true;return this}function wrapperToString(){return String(this.__wrapped__)}function wrapperValueOf(){return this.__wrapped__}lodash.after=after;lodash.assign=assign;lodash.at=at;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.chain=chain;lodash.compact=compact;lodash.compose=compose;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.createCallback=createCallback;lodash.curry=curry;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.filter=filter;lodash.flatten=flatten;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.functions=functions;lodash.groupBy=groupBy;lodash.indexBy=indexBy;lodash.initial=initial;lodash.intersection=intersection;lodash.invert=invert;lodash.invoke=invoke;lodash.keys=keys;lodash.map=map;lodash.mapValues=mapValues;lodash.max=max;lodash.memoize=memoize;lodash.merge=merge;lodash.min=min;lodash.omit=omit;lodash.once=once;lodash.pairs=pairs;lodash.partial=partial;lodash.partialRight=partialRight;lodash.pick=pick;lodash.pluck=pluck;lodash.property=property;lodash.pull=pull;lodash.range=range;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.shuffle=shuffle;lodash.sortBy=sortBy;lodash.tap=tap;lodash.throttle=throttle;lodash.times=times;lodash.toArray=toArray;lodash.transform=transform;lodash.union=union;lodash.uniq=uniq;lodash.values=values;lodash.where=where;lodash.without=without;lodash.wrap=wrap;lodash.xor=xor;lodash.zip=zip;lodash.zipObject=zipObject;lodash.collect=map;lodash.drop=rest;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.extend=assign;lodash.methods=functions;lodash.object=zipObject;lodash.select=filter;lodash.tail=rest;lodash.unique=uniq;lodash.unzip=zip;mixin(lodash);lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.contains=contains;lodash.escape=escape;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.has=has;lodash.identity=identity;lodash.indexOf=indexOf;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isBoolean=isBoolean;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isNaN=isNaN;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isString=isString;lodash.isUndefined=isUndefined;lodash.lastIndexOf=lastIndexOf;lodash.mixin=mixin;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.result=result;lodash.runInContext=runInContext;lodash.size=size;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.template=template;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.all=every;lodash.any=some;lodash.detect=find;lodash.findWhere=find;lodash.foldl=reduce;lodash.foldr=reduceRight;lodash.include=contains;lodash.inject=reduce;mixin(function(){var source={};forOwn(lodash,function(func,methodName){if(!lodash.prototype[methodName]){source[methodName]=func}});return source}(),false);lodash.first=first;lodash.last=last;lodash.sample=sample;lodash.take=first;lodash.head=first;forOwn(lodash,function(func,methodName){var callbackable=methodName!=="sample";if(!lodash.prototype[methodName]){lodash.prototype[methodName]=function(n,guard){var chainAll=this.__chain__,result=func(this.__wrapped__,n,guard);return!chainAll&&(n==null||guard&&!(callbackable&&typeof n=="function"))?result:new lodashWrapper(result,chainAll)}}});lodash.VERSION="2.4.1";lodash.prototype.chain=wrapperChain;lodash.prototype.toString=wrapperToString;lodash.prototype.value=wrapperValueOf;lodash.prototype.valueOf=wrapperValueOf;forEach(["join","pop","shift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){var chainAll=this.__chain__,result=func.apply(this.__wrapped__,arguments);return chainAll?new lodashWrapper(result,chainAll):result}});forEach(["push","reverse","sort","unshift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){func.apply(this.__wrapped__,arguments);return this}});forEach(["concat","slice","splice"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return new lodashWrapper(func.apply(this.__wrapped__,arguments),this.__chain__)}});return lodash}var _=runInContext();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){root._=_;define(function(){return _})}else if(freeExports&&freeModule){if(moduleExports){(freeModule.exports=_)._=_}else{freeExports._=_}}else{root._=_}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],20:[function(require,module,exports){(function(global){(function(undefined){var moment,VERSION="2.8.3",globalScope=typeof global!=="undefined"?global:this,oldGlobalMoment,round=Math.round,hasOwnProperty=Object.prototype.hasOwnProperty,i,YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,locales={},momentProperties=[],hasModule=typeof module!=="undefined"&&module.exports,aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,aspNetTimeSpanJsonRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,isoDurationRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenOneToFourDigits=/\d{1,4}/,parseTokenOneToSixDigits=/[+\-]?\d{1,6}/,parseTokenDigits=/\d+/,parseTokenWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/gi,parseTokenT=/T/i,parseTokenTimestampMs=/[\+\-]?\d+(\.\d{1,3})?/,parseTokenOrdinal=/\d{1,2}/,parseTokenOneDigit=/\d/,parseTokenTwoDigits=/\d\d/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{4}/,parseTokenSixDigits=/[+-]?\d{6}/,parseTokenSignedNumber=/[+-]?\d+/,isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,isoFormat="YYYY-MM-DDTHH:mm:ssZ",isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],isoTimes=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,proxyGettersAndSetters="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),unitMillisecondFactors={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},unitAliases={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},camelFunctions={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},formatFunctions={},relativeTimeThresholds={s:45,m:45,h:22,d:26,M:11},ordinalizeTokens="DDD w W M D d".split(" "),paddedTokens="M D H h m s w W".split(" "),formatTokenFunctions={M:function(){return this.month()+1},MMM:function(format){return this.localeData().monthsShort(this,format)},MMMM:function(format){return this.localeData().months(this,format)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(format){return this.localeData().weekdaysMin(this,format)},ddd:function(format){return this.localeData().weekdaysShort(this,format)},dddd:function(format){return this.localeData().weekdays(this,format)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},YYYYY:function(){return leftZeroFill(this.year(),5)},YYYYYY:function(){var y=this.year(),sign=y>=0?"+":"-";return sign+leftZeroFill(Math.abs(y),6)},gg:function(){return leftZeroFill(this.weekYear()%100,2)},gggg:function(){return leftZeroFill(this.weekYear(),4)},ggggg:function(){return leftZeroFill(this.weekYear(),5)},GG:function(){return leftZeroFill(this.isoWeekYear()%100,2)},GGGG:function(){return leftZeroFill(this.isoWeekYear(),4)},GGGGG:function(){return leftZeroFill(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return toInt(this.milliseconds()/100)},SS:function(){return leftZeroFill(toInt(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},SSSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";if(a<0){a=-a;b="-"}return b+leftZeroFill(toInt(a/60),2)+":"+leftZeroFill(toInt(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";if(a<0){a=-a;b="-"}return b+leftZeroFill(toInt(a/60),2)+leftZeroFill(toInt(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},deprecations={},lists=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];function dfl(a,b,c){switch(arguments.length){case 2:return a!=null?a:b;case 3:return a!=null?a:b!=null?b:c;default:throw new Error("Implement me")}}function hasOwnProp(a,b){return hasOwnProperty.call(a,b)}function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function printMsg(msg){if(moment.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+msg)}}function deprecate(msg,fn){var firstTime=true;return extend(function(){if(firstTime){printMsg(msg);firstTime=false}return fn.apply(this,arguments)},fn)}function deprecateSimple(name,msg){if(!deprecations[name]){printMsg(msg);deprecations[name]=true}}function padToken(func,count){return function(a){return leftZeroFill(func.call(this,a),count)}}function ordinalizeToken(func,period){return function(a){return this.localeData().ordinal(func.call(this,a),period)}}while(ordinalizeTokens.length){i=ordinalizeTokens.pop();formatTokenFunctions[i+"o"]=ordinalizeToken(formatTokenFunctions[i],i)}while(paddedTokens.length){i=paddedTokens.pop();formatTokenFunctions[i+i]=padToken(formatTokenFunctions[i],2)}formatTokenFunctions.DDDD=padToken(formatTokenFunctions.DDD,3);function Locale(){}function Moment(config,skipOverflow){if(skipOverflow!==false){checkOverflow(config)}copyConfig(this,config);this._d=new Date(+config._d)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+seconds*1e3+minutes*6e4+hours*36e5;this._days=+days+weeks*7;this._months=+months+quarters*3+years*12;this._data={};this._locale=moment.localeData();this._bubble()}function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i]}}if(hasOwnProp(b,"toString")){a.toString=b.toString}if(hasOwnProp(b,"valueOf")){a.valueOf=b.valueOf}return a}function copyConfig(to,from){var i,prop,val;if(typeof from._isAMomentObject!=="undefined"){to._isAMomentObject=from._isAMomentObject}if(typeof from._i!=="undefined"){to._i=from._i}if(typeof from._f!=="undefined"){to._f=from._f}if(typeof from._l!=="undefined"){to._l=from._l}if(typeof from._strict!=="undefined"){to._strict=from._strict}if(typeof from._tzm!=="undefined"){to._tzm=from._tzm}if(typeof from._isUTC!=="undefined"){to._isUTC=from._isUTC}if(typeof from._offset!=="undefined"){to._offset=from._offset}if(typeof from._pf!=="undefined"){to._pf=from._pf}if(typeof from._locale!=="undefined"){to._locale=from._locale}if(momentProperties.length>0){for(i in momentProperties){prop=momentProperties[i];val=from[prop];if(typeof val!=="undefined"){to[prop]=val}}}return to}function absRound(number){if(number<0){return Math.ceil(number)}else{return Math.floor(number)}}function leftZeroFill(number,targetLength,forceSign){var output=""+Math.abs(number),sign=number>=0;while(output.length<targetLength){output="0"+output}return(sign?forceSign?"+":"":"-")+output}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+(other.year()-base.year())*12;if(base.clone().add(res.months,"M").isAfter(other)){--res.months}res.milliseconds=+other-+base.clone().add(res.months,"M");return res}function momentsDifference(base,other){var res;other=makeAs(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other)}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months}return res}function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period).");tmp=val;val=period;period=tmp}val=typeof val==="string"?+val:val;dur=moment.duration(val,period);addOrSubtractDurationFromMoment(this,dur,direction);return this}}function addOrSubtractDurationFromMoment(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=updateOffset==null?true:updateOffset;if(milliseconds){mom._d.setTime(+mom._d+milliseconds*isAdding)}if(days){rawSetter(mom,"Date",rawGetter(mom,"Date")+days*isAdding)}if(months){rawMonthSetter(mom,rawGetter(mom,"Month")+months*isAdding)}if(updateOffset){moment.updateOffset(mom,days||months)}}function isArray(input){return Object.prototype.toString.call(input)==="[object Array]"}function isDate(input){return Object.prototype.toString.call(input)==="[object Date]"||input instanceof Date}function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i])){diffs++}}return diffs+lengthDiff}function normalizeUnits(units){if(units){var lowered=units.toLowerCase().replace(/(.)s$/,"$1");units=unitAliases[units]||camelFunctions[lowered]||lowered}return units}function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop]}}}return normalizedInput}function makeList(field){var count,setter;if(field.indexOf("week")===0){count=7;setter="day"}else if(field.indexOf("month")===0){count=12;setter="month"}else{return}moment[field]=function(format,index){var i,getter,method=moment._locale[field],results=[];if(typeof format==="number"){index=format;format=undefined}getter=function(i){var m=moment().utc().set(setter,i);return method.call(moment._locale,m,format||"")};if(index!=null){return getter(index)}else{for(i=0;i<count;i++){results.push(getter(i))}return results}}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){if(coercedNumber>=0){value=Math.floor(coercedNumber)}else{value=Math.ceil(coercedNumber)}}return value}function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}function weeksInYear(year,dow,doy){return weekOfYear(moment([year,11,31+dow-doy]),dow,doy).week}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}function checkOverflow(m){var overflow;if(m._a&&m._pf.overflow===-2){overflow=m._a[MONTH]<0||m._a[MONTH]>11?MONTH:m._a[DATE]<1||m._a[DATE]>daysInMonth(m._a[YEAR],m._a[MONTH])?DATE:m._a[HOUR]<0||m._a[HOUR]>23?HOUR:m._a[MINUTE]<0||m._a[MINUTE]>59?MINUTE:m._a[SECOND]<0||m._a[SECOND]>59?SECOND:m._a[MILLISECOND]<0||m._a[MILLISECOND]>999?MILLISECOND:-1;
if(m._pf._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE}m._pf.overflow=overflow}}function isValid(m){if(m._isValid==null){m._isValid=!isNaN(m._d.getTime())&&m._pf.overflow<0&&!m._pf.empty&&!m._pf.invalidMonth&&!m._pf.nullInput&&!m._pf.invalidFormat&&!m._pf.userInvalidated;if(m._strict){m._isValid=m._isValid&&m._pf.charsLeftOver===0&&m._pf.unusedTokens.length===0}}return m._isValid}function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split("-");j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split("-"):null;while(j>0){locale=loadLocale(split.slice(0,j).join("-"));if(locale){return locale}if(next&&next.length>=j&&compareArrays(split,next,true)>=j-1){break}j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&hasModule){try{oldLocale=moment.locale();require("./locale/"+name);moment.locale(oldLocale)}catch(e){}}return locales[name]}function makeAs(input,model){return model._isUTC?moment(input).zone(model._offset||0):moment(input).local()}extend(Locale.prototype,{set:function(config){var prop,i;for(i in config){prop=config[i];if(typeof prop==="function"){this[i]=prop}else{this["_"+i]=prop}}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(m){return this._months[m.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(m){return this._monthsShort[m.month()]},monthsParse:function(monthName){var i,mom,regex;if(!this._monthsParse){this._monthsParse=[]}for(i=0;i<12;i++){if(!this._monthsParse[i]){mom=moment.utc([2e3,i]);regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,"");this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")}if(this._monthsParse[i].test(monthName)){return i}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(m){return this._weekdays[m.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(m){return this._weekdaysShort[m.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(m){return this._weekdaysMin[m.day()]},weekdaysParse:function(weekdayName){var i,mom,regex;if(!this._weekdaysParse){this._weekdaysParse=[]}for(i=0;i<7;i++){if(!this._weekdaysParse[i]){mom=moment([2e3,1]).day(i);regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,"");this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")}if(this._weekdaysParse[i].test(weekdayName)){return i}}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(key){var output=this._longDateFormat[key];if(!output&&this._longDateFormat[key.toUpperCase()]){output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)});this._longDateFormat[key]=output}return output},isPM:function(input){return(input+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(hours,minutes,isLower){if(hours>11){return isLower?"pm":"PM"}else{return isLower?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(key,mom){var output=this._calendar[key];return typeof output==="function"?output.apply(mom):output},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return typeof output==="function"?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)},pastFuture:function(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return typeof format==="function"?format(output):format.replace(/%s/i,output)},ordinal:function(number){return this._ordinal.replace("%d",number)},_ordinal:"%d",preparse:function(string){return string},postformat:function(string){return string},week:function(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,"")}return input.replace(/\\/g,"")}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]]}else{array[i]=removeFormattingTokens(array[i])}}return function(mom){var output="";for(i=0;i<length;i++){output+=array[i]instanceof Function?array[i].call(mom,format):array[i]}return output}}function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate()}format=expandFormat(format,m.localeData());if(!formatFunctions[format]){formatFunctions[format]=makeFormatFunction(format)}return formatFunctions[format](m)}function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1}return format}function getParseRegexForToken(token,config){var a,strict=config._strict;switch(token){case"Q":return parseTokenOneDigit;case"DDDD":return parseTokenThreeDigits;case"YYYY":case"GGGG":case"gggg":return strict?parseTokenFourDigits:parseTokenOneToFourDigits;case"Y":case"G":case"g":return parseTokenSignedNumber;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return strict?parseTokenSixDigits:parseTokenOneToSixDigits;case"S":if(strict){return parseTokenOneDigit}case"SS":if(strict){return parseTokenTwoDigits}case"SSS":if(strict){return parseTokenThreeDigits}case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return parseTokenWord;case"a":case"A":return config._locale._meridiemParse;case"X":return parseTokenTimestampMs;case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"SSSS":return parseTokenDigits;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return strict?parseTokenTwoDigits:parseTokenOneOrTwoDigits;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return parseTokenOneOrTwoDigits;case"Do":return parseTokenOrdinal;default:a=new RegExp(regexpEscape(unescapeFormat(token.replace("\\","")),"i"));return a}}function timezoneMinutesFromString(string){string=string||"";var possibleTzMatches=string.match(parseTokenTimezone)||[],tzChunk=possibleTzMatches[possibleTzMatches.length-1]||[],parts=(tzChunk+"").match(parseTimezoneChunker)||["-",0,0],minutes=+(parts[1]*60)+toInt(parts[2]);return parts[0]==="+"?-minutes:minutes}function addTimeToArrayFromToken(token,input,config){var a,datePartArray=config._a;switch(token){case"Q":if(input!=null){datePartArray[MONTH]=(toInt(input)-1)*3}break;case"M":case"MM":if(input!=null){datePartArray[MONTH]=toInt(input)-1}break;case"MMM":case"MMMM":a=config._locale.monthsParse(input);if(a!=null){datePartArray[MONTH]=a}else{config._pf.invalidMonth=input}break;case"D":case"DD":if(input!=null){datePartArray[DATE]=toInt(input)}break;case"Do":if(input!=null){datePartArray[DATE]=toInt(parseInt(input,10))}break;case"DDD":case"DDDD":if(input!=null){config._dayOfYear=toInt(input)}break;case"YY":datePartArray[YEAR]=moment.parseTwoDigitYear(input);break;case"YYYY":case"YYYYY":case"YYYYYY":datePartArray[YEAR]=toInt(input);break;case"a":case"A":config._isPm=config._locale.isPM(input);break;case"H":case"HH":case"h":case"hh":datePartArray[HOUR]=toInt(input);break;case"m":case"mm":datePartArray[MINUTE]=toInt(input);break;case"s":case"ss":datePartArray[SECOND]=toInt(input);break;case"S":case"SS":case"SSS":case"SSSS":datePartArray[MILLISECOND]=toInt(("0."+input)*1e3);break;case"X":config._d=new Date(parseFloat(input)*1e3);break;case"Z":case"ZZ":config._useUTC=true;config._tzm=timezoneMinutesFromString(input);break;case"dd":case"ddd":case"dddd":a=config._locale.weekdaysParse(input);if(a!=null){config._w=config._w||{};config._w["d"]=a}else{config._pf.invalidWeekday=input}break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":token=token.substr(0,1);case"gggg":case"GGGG":case"GGGGG":token=token.substr(0,2);if(input){config._w=config._w||{};config._w[token]=toInt(input)}break;case"gg":case"GG":config._w=config._w||{};config._w[token]=moment.parseTwoDigitYear(input)}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=dfl(w.GG,config._a[YEAR],weekOfYear(moment(),1,4).year);week=dfl(w.W,1);weekday=dfl(w.E,1)}else{dow=config._locale._week.dow;doy=config._locale._week.doy;weekYear=dfl(w.gg,config._a[YEAR],weekOfYear(moment(),dow,doy).year);week=dfl(w.w,1);if(w.d!=null){weekday=w.d;if(weekday<dow){++week}}else if(w.e!=null){weekday=w.e+dow}else{weekday=dow}}temp=dayOfYearFromWeeks(weekYear,week,weekday,doy,dow);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear}function dateFromConfig(config){var i,date,input=[],currentDate,yearToUse;if(config._d){return}currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config)}if(config._dayOfYear){yearToUse=dfl(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)){config._pf._overflowDayOfYear=true}date=makeUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate()}for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i]}for(;i<7;i++){config._a[i]=input[i]=config._a[i]==null?i===2?1:0:config._a[i]}config._d=(config._useUTC?makeUTCDate:makeDate).apply(null,input);if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()+config._tzm)}}function dateFromObject(config){var normalizedInput;if(config._d){return}normalizedInput=normalizeObjectUnits(config._i);config._a=[normalizedInput.year,normalizedInput.month,normalizedInput.day,normalizedInput.hour,normalizedInput.minute,normalizedInput.second,normalizedInput.millisecond];dateFromConfig(config)}function currentDateArray(config){var now=new Date;if(config._useUTC){return[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()]}else{return[now.getFullYear(),now.getMonth(),now.getDate()]}}function makeDateFromStringAndFormat(config){if(config._f===moment.ISO_8601){parseISO(config);return}config._a=[];config._pf.empty=true;var string=""+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){config._pf.unusedInput.push(skipped)}string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length}if(formatTokenFunctions[token]){if(parsedInput){config._pf.empty=false}else{config._pf.unusedTokens.push(token)}addTimeToArrayFromToken(token,parsedInput,config)}else if(config._strict&&!parsedInput){config._pf.unusedTokens.push(token)}}config._pf.charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){config._pf.unusedInput.push(string)}if(config._isPm&&config._a[HOUR]<12){config._a[HOUR]+=12}if(config._isPm===false&&config._a[HOUR]===12){config._a[HOUR]=0}dateFromConfig(config);checkOverflow(config)}function unescapeFormat(s){return s.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4})}function regexpEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function makeDateFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){config._pf.invalidFormat=true;config._d=new Date(NaN);return}for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC}tempConfig._pf=defaultParsingFlags();tempConfig._f=config._f[i];makeDateFromStringAndFormat(tempConfig);if(!isValid(tempConfig)){continue}currentScore+=tempConfig._pf.charsLeftOver;currentScore+=tempConfig._pf.unusedTokens.length*10;tempConfig._pf.score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig}}extend(config,bestMoment||tempConfig)}function parseISO(config){var i,l,string=config._i,match=isoRegex.exec(string);if(match){config._pf.iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(string)){config._f=isoDates[i][0]+(match[6]||" ");break}}for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break}}if(string.match(parseTokenTimezone)){config._f+="Z"}makeDateFromStringAndFormat(config)}else{config._isValid=false}}function makeDateFromString(config){parseISO(config);if(config._isValid===false){delete config._isValid;moment.createFromInputFallback(config)}}function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i))}return res}function makeDateFromInput(config){var input=config._i,matched;if(input===undefined){config._d=new Date}else if(isDate(input)){config._d=new Date(+input)}else if((matched=aspNetJsonRegex.exec(input))!==null){config._d=new Date(+matched[1])}else if(typeof input==="string"){makeDateFromString(config)}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10)});dateFromConfig(config)}else if(typeof input==="object"){dateFromObject(config)}else if(typeof input==="number"){config._d=new Date(input)}else{moment.createFromInputFallback(config)}}function makeDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<1970){date.setFullYear(y)}return date}function makeUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<1970){date.setUTCFullYear(y)}return date}function parseWeekday(input,locale){if(typeof input==="string"){if(!isNaN(input)){input=parseInt(input,10)}else{input=locale.weekdaysParse(input);if(typeof input!=="number"){return null}}}return input}function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime(posNegDuration,withoutSuffix,locale){var duration=moment.duration(posNegDuration).abs(),seconds=round(duration.as("s")),minutes=round(duration.as("m")),hours=round(duration.as("h")),days=round(duration.as("d")),months=round(duration.as("M")),years=round(duration.as("y")),args=seconds<relativeTimeThresholds.s&&["s",seconds]||minutes===1&&["m"]||minutes<relativeTimeThresholds.m&&["mm",minutes]||hours===1&&["h"]||hours<relativeTimeThresholds.h&&["hh",hours]||days===1&&["d"]||days<relativeTimeThresholds.d&&["dd",days]||months===1&&["M"]||months<relativeTimeThresholds.M&&["MM",months]||years===1&&["y"]||["yy",years];args[2]=withoutSuffix;args[3]=+posNegDuration>0;args[4]=locale;return substituteTimeAgo.apply({},args)}function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day(),adjustedMoment;if(daysToDayOfWeek>end){daysToDayOfWeek-=7}if(daysToDayOfWeek<end-7){daysToDayOfWeek+=7}adjustedMoment=moment(mom).add(daysToDayOfWeek,"d");return{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}function dayOfYearFromWeeks(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var d=makeUTCDate(year,0,1).getUTCDay(),daysToAdd,dayOfYear;d=d===0?7:d;weekday=weekday!=null?weekday:firstDayOfWeek;daysToAdd=firstDayOfWeek-d+(d>firstDayOfWeekOfYear?7:0)-(d<firstDayOfWeek?7:0);dayOfYear=7*(week-1)+(weekday-firstDayOfWeek)+daysToAdd+1;return{year:dayOfYear>0?year:year-1,dayOfYear:dayOfYear>0?dayOfYear:daysInYear(year-1)+dayOfYear}}function makeMoment(config){var input=config._i,format=config._f;config._locale=config._locale||moment.localeData(config._l);if(input===null||format===undefined&&input===""){return moment.invalid({nullInput:true})}if(typeof input==="string"){config._i=input=config._locale.preparse(input)}if(moment.isMoment(input)){return new Moment(input,true)}else if(format){if(isArray(format)){makeDateFromStringAndArray(config)}else{makeDateFromStringAndFormat(config)}}else{makeDateFromInput(config)}return new Moment(config)}moment=function(input,format,locale,strict){var c;if(typeof locale==="boolean"){strict=locale;locale=undefined}c={};c._isAMomentObject=true;c._i=input;c._f=format;c._l=locale;c._strict=strict;c._isUTC=false;c._pf=defaultParsingFlags();return makeMoment(c)};moment.suppressDeprecationWarnings=false;moment.createFromInputFallback=deprecate("moment construction falls back to js Date. This is "+"discouraged and will be removed in upcoming major "+"release. Please refer to "+"https://github.com/moment/moment/issues/1407 for more info.",function(config){config._d=new Date(config._i)});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0]}if(!moments.length){return moment()}res=moments[0];for(i=1;i<moments.length;++i){if(moments[i][fn](res)){res=moments[i]}}return res}moment.min=function(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)};moment.max=function(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)};moment.utc=function(input,format,locale,strict){var c;if(typeof locale==="boolean"){strict=locale;locale=undefined}c={};c._isAMomentObject=true;c._useUTC=true;c._isUTC=true;c._l=locale;c._i=input;c._f=format;c._strict=strict;c._pf=defaultParsingFlags();return makeMoment(c).utc()};moment.unix=function(input){return moment(input*1e3)};moment.duration=function(input,key){var duration=input,match=null,sign,ret,parseIso,diffRes;if(moment.isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months}}else if(typeof input==="number"){duration={};if(key){duration[key]=input}else{duration.milliseconds=input}}else if(!!(match=aspNetTimeSpanJsonRegex.exec(input))){sign=match[1]==="-"?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}}else if(!!(match=isoDurationRegex.exec(input))){sign=match[1]==="-"?-1:1;parseIso=function(inp){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign};duration={y:parseIso(match[2]),M:parseIso(match[3]),d:parseIso(match[4]),h:parseIso(match[5]),m:parseIso(match[6]),s:parseIso(match[7]),w:parseIso(match[8])}}else if(typeof duration==="object"&&("from"in duration||"to"in duration)){diffRes=momentsDifference(moment(duration.from),moment(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months}ret=new Duration(duration);if(moment.isDuration(input)&&hasOwnProp(input,"_locale")){ret._locale=input._locale}return ret};moment.version=VERSION;moment.defaultFormat=isoFormat;moment.ISO_8601=function(){};moment.momentProperties=momentProperties;moment.updateOffset=function(){};moment.relativeTimeThreshold=function(threshold,limit){if(relativeTimeThresholds[threshold]===undefined){return false}if(limit===undefined){return relativeTimeThresholds[threshold]}relativeTimeThresholds[threshold]=limit;return true};moment.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",function(key,value){return moment.locale(key,value)});moment.locale=function(key,values){var data;if(key){if(typeof values!=="undefined"){data=moment.defineLocale(key,values)}else{data=moment.localeData(key)}if(data){moment.duration._locale=moment._locale=data}}return moment._locale._abbr};moment.defineLocale=function(name,values){if(values!==null){values.abbr=name;if(!locales[name]){locales[name]=new Locale}locales[name].set(values);moment.locale(name);return locales[name]}else{delete locales[name];return null}};moment.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",function(key){return moment.localeData(key)});moment.localeData=function(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr}if(!key){return moment._locale}if(!isArray(key)){locale=loadLocale(key);if(locale){return locale}key=[key]}return chooseLocale(key)};moment.isMoment=function(obj){return obj instanceof Moment||obj!=null&&hasOwnProp(obj,"_isAMomentObject")};moment.isDuration=function(obj){return obj instanceof Duration};for(i=lists.length-1;i>=0;--i){makeList(lists[i])}moment.normalizeUnits=function(units){return normalizeUnits(units)};moment.invalid=function(flags){var m=moment.utc(NaN);if(flags!=null){extend(m._pf,flags)}else{m._pf.userInvalidated=true}return m};moment.parseZone=function(){return moment.apply(null,arguments).parseZone()};moment.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};extend(moment.fn=Moment.prototype,{clone:function(){return moment(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var m=moment(this).utc();if(0<m.year()&&m.year()<=9999){return formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}else{return formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}},toArray:function(){var m=this;return[m.year(),m.month(),m.date(),m.hours(),m.minutes(),m.seconds(),m.milliseconds()]},isValid:function(){return isValid(this)},isDSTShifted:function(){if(this._a){return this.isValid()&&compareArrays(this._a,(this._isUTC?moment.utc(this._a):moment(this._a)).toArray())>0}return false},parsingFlags:function(){return extend({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(keepLocalTime){return this.zone(0,keepLocalTime)},local:function(keepLocalTime){if(this._isUTC){this.zone(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.add(this._dateTzOffset(),"m")}}return this},format:function(inputString){var output=formatMoment(this,inputString||moment.defaultFormat);return this.localeData().postformat(output)},add:createAdder(1,"add"),subtract:createAdder(-1,"subtract"),diff:function(input,units,asFloat){var that=makeAs(input,this),zoneDiff=(this.zone()-that.zone())*6e4,diff,output,daysAdjust;units=normalizeUnits(units);if(units==="year"||units==="month"){diff=(this.daysInMonth()+that.daysInMonth())*432e5;output=(this.year()-that.year())*12+(this.month()-that.month());daysAdjust=this-moment(this).startOf("month")-(that-moment(that).startOf("month"));daysAdjust-=(this.zone()-moment(this).startOf("month").zone()-(that.zone()-moment(that).startOf("month").zone()))*6e4;output+=daysAdjust/diff;if(units==="year"){output=output/12}}else{diff=this-that;output=units==="second"?diff/1e3:units==="minute"?diff/6e4:units==="hour"?diff/36e5:units==="day"?(diff-zoneDiff)/864e5:units==="week"?(diff-zoneDiff)/6048e5:diff}return asFloat?output:absRound(output)},from:function(time,withoutSuffix){return moment.duration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(time){var now=time||moment(),sod=makeAs(now,this).startOf("day"),diff=this.diff(sod,"days",true),format=diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(format,this))},isLeapYear:function(){return isLeapYear(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,"d")}else{return day}},month:makeAccessor("Month",true),startOf:function(units){units=normalizeUnits(units);switch(units){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(units==="week"){this.weekday(0)}else if(units==="isoWeek"){this.isoWeekday(1)}if(units==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this},endOf:function(units){units=normalizeUnits(units);return this.startOf(units).add(1,units==="isoWeek"?"week":units).subtract(1,"ms")},isAfter:function(input,units){units=normalizeUnits(typeof units!=="undefined"?units:"millisecond");if(units==="millisecond"){input=moment.isMoment(input)?input:moment(input);return+this>+input}else{return+this.clone().startOf(units)>+moment(input).startOf(units)}},isBefore:function(input,units){units=normalizeUnits(typeof units!=="undefined"?units:"millisecond");if(units==="millisecond"){input=moment.isMoment(input)?input:moment(input);return+this<+input}else{return+this.clone().startOf(units)<+moment(input).startOf(units)}},isSame:function(input,units){units=normalizeUnits(units||"millisecond");if(units==="millisecond"){input=moment.isMoment(input)?input:moment(input);return+this===+input}else{return+this.clone().startOf(units)===+makeAs(input,this).startOf(units)}},min:deprecate("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(other){other=moment.apply(null,arguments);return other<this?this:other}),max:deprecate("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(other){other=moment.apply(null,arguments);return other>this?this:other}),zone:function(input,keepLocalTime){var offset=this._offset||0,localAdjust;if(input!=null){if(typeof input==="string"){input=timezoneMinutesFromString(input)}if(Math.abs(input)<16){input=input*60}if(!this._isUTC&&keepLocalTime){localAdjust=this._dateTzOffset()}this._offset=input;this._isUTC=true;if(localAdjust!=null){this.subtract(localAdjust,"m")}if(offset!==input){if(!keepLocalTime||this._changeInProgress){addOrSubtractDurationFromMoment(this,moment.duration(offset-input,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;moment.updateOffset(this,true);this._changeInProgress=null}}}else{return this._isUTC?offset:this._dateTzOffset()}return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){if(this._tzm){this.zone(this._tzm)}else if(typeof this._i==="string"){this.zone(this._i)}return this},hasAlignedHourOffset:function(input){if(!input){input=0}else{input=moment(input).zone()}return(this.zone()-input)%60===0},daysInMonth:function(){return daysInMonth(this.year(),this.month())},dayOfYear:function(input){var dayOfYear=round((moment(this).startOf("day")-moment(this).startOf("year"))/864e5)+1;return input==null?dayOfYear:this.add(input-dayOfYear,"d")},quarter:function(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3)},weekYear:function(input){var year=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return input==null?year:this.add(input-year,"y")},isoWeekYear:function(input){var year=weekOfYear(this,1,4).year;return input==null?year:this.add(input-year,"y")},week:function(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,"d")},isoWeek:function(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,"d")},weekday:function(input){var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,"d")},isoWeekday:function(input){return input==null?this.day()||7:this.day(this.day()%7?input:input-7)},isoWeeksInYear:function(){return weeksInYear(this.year(),1,4)},weeksInYear:function(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)},get:function(units){units=normalizeUnits(units);return this[units]()},set:function(units,value){units=normalizeUnits(units);if(typeof this[units]==="function"){this[units](value)}return this},locale:function(key){var newLocaleData;if(key===undefined){return this._locale._abbr}else{newLocaleData=moment.localeData(key);if(newLocaleData!=null){this._locale=newLocaleData}return this}},lang:deprecate("moment().lang() is deprecated. Use moment().localeData() instead.",function(key){if(key===undefined){return this.localeData()}else{return this.locale(key)}}),localeData:function(){return this._locale},_dateTzOffset:function(){return Math.round(this._d.getTimezoneOffset()/15)*15}});function rawMonthSetter(mom,value){var dayOfMonth;if(typeof value==="string"){value=mom.localeData().monthsParse(value);if(typeof value!=="number"){return mom}}dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth);return mom}function rawGetter(mom,unit){return mom._d["get"+(mom._isUTC?"UTC":"")+unit]()}function rawSetter(mom,unit,value){if(unit==="Month"){return rawMonthSetter(mom,value)}else{return mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}}function makeAccessor(unit,keepTime){return function(value){if(value!=null){rawSetter(this,unit,value);moment.updateOffset(this,keepTime);return this}else{return rawGetter(this,unit)}}}moment.fn.millisecond=moment.fn.milliseconds=makeAccessor("Milliseconds",false);moment.fn.second=moment.fn.seconds=makeAccessor("Seconds",false);moment.fn.minute=moment.fn.minutes=makeAccessor("Minutes",false);moment.fn.hour=moment.fn.hours=makeAccessor("Hours",true);moment.fn.date=makeAccessor("Date",true);moment.fn.dates=deprecate("dates accessor is deprecated. Use date instead.",makeAccessor("Date",true));moment.fn.year=makeAccessor("FullYear",true);moment.fn.years=deprecate("years accessor is deprecated. Use year instead.",makeAccessor("FullYear",true));moment.fn.days=moment.fn.day;moment.fn.months=moment.fn.month;moment.fn.weeks=moment.fn.week;moment.fn.isoWeeks=moment.fn.isoWeek;moment.fn.quarters=moment.fn.quarter;moment.fn.toJSON=moment.fn.toISOString;function daysToYears(days){return days*400/146097}function yearsToDays(years){return years*146097/400}extend(moment.duration.fn=Duration.prototype,{_bubble:function(){var milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data,seconds,minutes,hours,years=0;data.milliseconds=milliseconds%1e3;seconds=absRound(milliseconds/1e3);data.seconds=seconds%60;minutes=absRound(seconds/60);data.minutes=minutes%60;hours=absRound(minutes/60);data.hours=hours%24;days+=absRound(hours/24);years=absRound(daysToYears(days));days-=absRound(yearsToDays(years));months+=absRound(days/30);days%=30;years+=absRound(months/12);months%=12;data.days=days;data.months=months;data.years=years},abs:function(){this._milliseconds=Math.abs(this._milliseconds);this._days=Math.abs(this._days);this._months=Math.abs(this._months);this._data.milliseconds=Math.abs(this._data.milliseconds);this._data.seconds=Math.abs(this._data.seconds);this._data.minutes=Math.abs(this._data.minutes);this._data.hours=Math.abs(this._data.hours);this._data.months=Math.abs(this._data.months);this._data.years=Math.abs(this._data.years);return this},weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+toInt(this._months/12)*31536e6},humanize:function(withSuffix){var output=relativeTime(this,!withSuffix,this.localeData());if(withSuffix){output=this.localeData().pastFuture(+this,output)}return this.localeData().postformat(output)
},add:function(input,val){var dur=moment.duration(input,val);this._milliseconds+=dur._milliseconds;this._days+=dur._days;this._months+=dur._months;this._bubble();return this},subtract:function(input,val){var dur=moment.duration(input,val);this._milliseconds-=dur._milliseconds;this._days-=dur._days;this._months-=dur._months;this._bubble();return this},get:function(units){units=normalizeUnits(units);return this[units.toLowerCase()+"s"]()},as:function(units){var days,months;units=normalizeUnits(units);if(units==="month"||units==="year"){days=this._days+this._milliseconds/864e5;months=this._months+daysToYears(days)*12;return units==="month"?months:months/12}else{days=this._days+yearsToDays(this._months/12);switch(units){case"week":return days/7+this._milliseconds/6048e5;case"day":return days+this._milliseconds/864e5;case"hour":return days*24+this._milliseconds/36e5;case"minute":return days*24*60+this._milliseconds/6e4;case"second":return days*24*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(days*24*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+units)}}},lang:moment.fn.lang,locale:moment.fn.locale,toIsoString:deprecate("toIsoString() is deprecated. Please use toISOString() instead "+"(notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var years=Math.abs(this.years()),months=Math.abs(this.months()),days=Math.abs(this.days()),hours=Math.abs(this.hours()),minutes=Math.abs(this.minutes()),seconds=Math.abs(this.seconds()+this.milliseconds()/1e3);if(!this.asSeconds()){return"P0D"}return(this.asSeconds()<0?"-":"")+"P"+(years?years+"Y":"")+(months?months+"M":"")+(days?days+"D":"")+(hours||minutes||seconds?"T":"")+(hours?hours+"H":"")+(minutes?minutes+"M":"")+(seconds?seconds+"S":"")},localeData:function(){return this._locale}});moment.duration.fn.toString=moment.duration.fn.toISOString;function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}for(i in unitMillisecondFactors){if(hasOwnProp(unitMillisecondFactors,i)){makeDurationGetter(i.toLowerCase())}}moment.duration.fn.asMilliseconds=function(){return this.as("ms")};moment.duration.fn.asSeconds=function(){return this.as("s")};moment.duration.fn.asMinutes=function(){return this.as("m")};moment.duration.fn.asHours=function(){return this.as("h")};moment.duration.fn.asDays=function(){return this.as("d")};moment.duration.fn.asWeeks=function(){return this.as("weeks")};moment.duration.fn.asMonths=function(){return this.as("M")};moment.duration.fn.asYears=function(){return this.as("y")};moment.locale("en",{ordinal:function(number){var b=number%10,output=toInt(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output}});function makeGlobal(shouldDeprecate){if(typeof ender!=="undefined"){return}oldGlobalMoment=globalScope.moment;if(shouldDeprecate){globalScope.moment=deprecate("Accessing Moment through the global scope is "+"deprecated, and will be removed in an upcoming "+"release.",moment)}else{globalScope.moment=moment}}if(hasModule){module.exports=moment}else if(typeof define==="function"&&define.amd){define("moment",function(require,exports,module){if(module.config&&module.config()&&module.config().noGlobal===true){globalScope.moment=oldGlobalMoment}return moment});makeGlobal(true)}else{makeGlobal()}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],21:[function(require,module,exports){(function(){var numeral,VERSION="1.5.3",languages={},currentLanguage="en",zeroFormat=null,defaultFormat="0,0",hasModule=typeof module!=="undefined"&&module.exports;function Numeral(number){this._value=number}function toFixed(value,precision,roundingFunction,optionals){var power=Math.pow(10,precision),optionalsRegExp,output;output=(roundingFunction(value*power)/power).toFixed(precision);if(optionals){optionalsRegExp=new RegExp("0{1,"+optionals+"}$");output=output.replace(optionalsRegExp,"")}return output}function formatNumeral(n,format,roundingFunction){var output;if(format.indexOf("$")>-1){output=formatCurrency(n,format,roundingFunction)}else if(format.indexOf("%")>-1){output=formatPercentage(n,format,roundingFunction)}else if(format.indexOf(":")>-1){output=formatTime(n,format)}else{output=formatNumber(n._value,format,roundingFunction)}return output}function unformatNumeral(n,string){var stringOriginal=string,thousandRegExp,millionRegExp,billionRegExp,trillionRegExp,suffixes=["KB","MB","GB","TB","PB","EB","ZB","YB"],bytesMultiplier=false,power;if(string.indexOf(":")>-1){n._value=unformatTime(string)}else{if(string===zeroFormat){n._value=0}else{if(languages[currentLanguage].delimiters.decimal!=="."){string=string.replace(/\./g,"").replace(languages[currentLanguage].delimiters.decimal,".")}thousandRegExp=new RegExp("[^a-zA-Z]"+languages[currentLanguage].abbreviations.thousand+"(?:\\)|(\\"+languages[currentLanguage].currency.symbol+")?(?:\\))?)?$");millionRegExp=new RegExp("[^a-zA-Z]"+languages[currentLanguage].abbreviations.million+"(?:\\)|(\\"+languages[currentLanguage].currency.symbol+")?(?:\\))?)?$");billionRegExp=new RegExp("[^a-zA-Z]"+languages[currentLanguage].abbreviations.billion+"(?:\\)|(\\"+languages[currentLanguage].currency.symbol+")?(?:\\))?)?$");trillionRegExp=new RegExp("[^a-zA-Z]"+languages[currentLanguage].abbreviations.trillion+"(?:\\)|(\\"+languages[currentLanguage].currency.symbol+")?(?:\\))?)?$");for(power=0;power<=suffixes.length;power++){bytesMultiplier=string.indexOf(suffixes[power])>-1?Math.pow(1024,power+1):false;if(bytesMultiplier){break}}n._value=(bytesMultiplier?bytesMultiplier:1)*(stringOriginal.match(thousandRegExp)?Math.pow(10,3):1)*(stringOriginal.match(millionRegExp)?Math.pow(10,6):1)*(stringOriginal.match(billionRegExp)?Math.pow(10,9):1)*(stringOriginal.match(trillionRegExp)?Math.pow(10,12):1)*(string.indexOf("%")>-1?.01:1)*((string.split("-").length+Math.min(string.split("(").length-1,string.split(")").length-1))%2?1:-1)*Number(string.replace(/[^0-9\.]+/g,""));n._value=bytesMultiplier?Math.ceil(n._value):n._value}}return n._value}function formatCurrency(n,format,roundingFunction){var symbolIndex=format.indexOf("$"),openParenIndex=format.indexOf("("),minusSignIndex=format.indexOf("-"),space="",spliceIndex,output;if(format.indexOf(" $")>-1){space=" ";format=format.replace(" $","")}else if(format.indexOf("$ ")>-1){space=" ";format=format.replace("$ ","")}else{format=format.replace("$","")}output=formatNumber(n._value,format,roundingFunction);if(symbolIndex<=1){if(output.indexOf("(")>-1||output.indexOf("-")>-1){output=output.split("");spliceIndex=1;if(symbolIndex<openParenIndex||symbolIndex<minusSignIndex){spliceIndex=0}output.splice(spliceIndex,0,languages[currentLanguage].currency.symbol+space);output=output.join("")}else{output=languages[currentLanguage].currency.symbol+space+output}}else{if(output.indexOf(")")>-1){output=output.split("");output.splice(-1,0,space+languages[currentLanguage].currency.symbol);output=output.join("")}else{output=output+space+languages[currentLanguage].currency.symbol}}return output}function formatPercentage(n,format,roundingFunction){var space="",output,value=n._value*100;if(format.indexOf(" %")>-1){space=" ";format=format.replace(" %","")}else{format=format.replace("%","")}output=formatNumber(value,format,roundingFunction);if(output.indexOf(")")>-1){output=output.split("");output.splice(-1,0,space+"%");output=output.join("")}else{output=output+space+"%"}return output}function formatTime(n){var hours=Math.floor(n._value/60/60),minutes=Math.floor((n._value-hours*60*60)/60),seconds=Math.round(n._value-hours*60*60-minutes*60);return hours+":"+(minutes<10?"0"+minutes:minutes)+":"+(seconds<10?"0"+seconds:seconds)}function unformatTime(string){var timeArray=string.split(":"),seconds=0;if(timeArray.length===3){seconds=seconds+Number(timeArray[0])*60*60;seconds=seconds+Number(timeArray[1])*60;seconds=seconds+Number(timeArray[2])}else if(timeArray.length===2){seconds=seconds+Number(timeArray[0])*60;seconds=seconds+Number(timeArray[1])}return Number(seconds)}function formatNumber(value,format,roundingFunction){var negP=false,signed=false,optDec=false,abbr="",abbrK=false,abbrM=false,abbrB=false,abbrT=false,abbrForce=false,bytes="",ord="",abs=Math.abs(value),suffixes=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],min,max,power,w,precision,thousands,d="",neg=false;if(value===0&&zeroFormat!==null){return zeroFormat}else{if(format.indexOf("(")>-1){negP=true;format=format.slice(1,-1)}else if(format.indexOf("+")>-1){signed=true;format=format.replace(/\+/g,"")}if(format.indexOf("a")>-1){abbrK=format.indexOf("aK")>=0;abbrM=format.indexOf("aM")>=0;abbrB=format.indexOf("aB")>=0;abbrT=format.indexOf("aT")>=0;abbrForce=abbrK||abbrM||abbrB||abbrT;if(format.indexOf(" a")>-1){abbr=" ";format=format.replace(" a","")}else{format=format.replace("a","")}if(abs>=Math.pow(10,12)&&!abbrForce||abbrT){abbr=abbr+languages[currentLanguage].abbreviations.trillion;value=value/Math.pow(10,12)}else if(abs<Math.pow(10,12)&&abs>=Math.pow(10,9)&&!abbrForce||abbrB){abbr=abbr+languages[currentLanguage].abbreviations.billion;value=value/Math.pow(10,9)}else if(abs<Math.pow(10,9)&&abs>=Math.pow(10,6)&&!abbrForce||abbrM){abbr=abbr+languages[currentLanguage].abbreviations.million;value=value/Math.pow(10,6)}else if(abs<Math.pow(10,6)&&abs>=Math.pow(10,3)&&!abbrForce||abbrK){abbr=abbr+languages[currentLanguage].abbreviations.thousand;value=value/Math.pow(10,3)}}if(format.indexOf("b")>-1){if(format.indexOf(" b")>-1){bytes=" ";format=format.replace(" b","")}else{format=format.replace("b","")}for(power=0;power<=suffixes.length;power++){min=Math.pow(1024,power);max=Math.pow(1024,power+1);if(value>=min&&value<max){bytes=bytes+suffixes[power];if(min>0){value=value/min}break}}}if(format.indexOf("o")>-1){if(format.indexOf(" o")>-1){ord=" ";format=format.replace(" o","")}else{format=format.replace("o","")}ord=ord+languages[currentLanguage].ordinal(value)}if(format.indexOf("[.]")>-1){optDec=true;format=format.replace("[.]",".")}w=value.toString().split(".")[0];precision=format.split(".")[1];thousands=format.indexOf(",");if(precision){if(precision.indexOf("[")>-1){precision=precision.replace("]","");precision=precision.split("[");d=toFixed(value,precision[0].length+precision[1].length,roundingFunction,precision[1].length)}else{d=toFixed(value,precision.length,roundingFunction)}w=d.split(".")[0];if(d.split(".")[1].length){d=languages[currentLanguage].delimiters.decimal+d.split(".")[1]}else{d=""}if(optDec&&Number(d.slice(1))===0){d=""}}else{w=toFixed(value,null,roundingFunction)}if(w.indexOf("-")>-1){w=w.slice(1);neg=true}if(thousands>-1){w=w.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+languages[currentLanguage].delimiters.thousands)}if(format.indexOf(".")===0){w=""}return(negP&&neg?"(":"")+(!negP&&neg?"-":"")+(!neg&&signed?"+":"")+w+d+(ord?ord:"")+(abbr?abbr:"")+(bytes?bytes:"")+(negP&&neg?")":"")}}numeral=function(input){if(numeral.isNumeral(input)){input=input.value()}else if(input===0||typeof input==="undefined"){input=0}else if(!Number(input)){input=numeral.fn.unformat(input)}return new Numeral(Number(input))};numeral.version=VERSION;numeral.isNumeral=function(obj){return obj instanceof Numeral};numeral.language=function(key,values){if(!key){return currentLanguage}if(key&&!values){if(!languages[key]){throw new Error("Unknown language : "+key)}currentLanguage=key}if(values||!languages[key]){loadLanguage(key,values)}return numeral};numeral.languageData=function(key){if(!key){return languages[currentLanguage]}if(!languages[key]){throw new Error("Unknown language : "+key)}return languages[key]};numeral.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(number){var b=number%10;return~~(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th"},currency:{symbol:"$"}});numeral.zeroFormat=function(format){zeroFormat=typeof format==="string"?format:null};numeral.defaultFormat=function(format){defaultFormat=typeof format==="string"?format:"0.0"};function loadLanguage(key,values){languages[key]=values}if("function"!==typeof Array.prototype.reduce){Array.prototype.reduce=function(callback,opt_initialValue){"use strict";if(null===this||"undefined"===typeof this){throw new TypeError("Array.prototype.reduce called on null or undefined")}if("function"!==typeof callback){throw new TypeError(callback+" is not a function")}var index,value,length=this.length>>>0,isValueSet=false;if(1<arguments.length){value=opt_initialValue;isValueSet=true}for(index=0;length>index;++index){if(this.hasOwnProperty(index)){if(isValueSet){value=callback(value,this[index],index,this)}else{value=this[index];isValueSet=true}}}if(!isValueSet){throw new TypeError("Reduce of empty array with no initial value")}return value}}function multiplier(x){var parts=x.toString().split(".");if(parts.length<2){return 1}return Math.pow(10,parts[1].length)}function correctionFactor(){var args=Array.prototype.slice.call(arguments);return args.reduce(function(prev,next){var mp=multiplier(prev),mn=multiplier(next);return mp>mn?mp:mn},-Infinity)}numeral.fn=Numeral.prototype={clone:function(){return numeral(this)},format:function(inputString,roundingFunction){return formatNumeral(this,inputString?inputString:defaultFormat,roundingFunction!==undefined?roundingFunction:Math.round)},unformat:function(inputString){if(Object.prototype.toString.call(inputString)==="[object Number]"){return inputString}return unformatNumeral(this,inputString?inputString:defaultFormat)},value:function(){return this._value},valueOf:function(){return this._value},set:function(value){this._value=Number(value);return this},add:function(value){var corrFactor=correctionFactor.call(null,this._value,value);function cback(accum,curr,currI,O){return accum+corrFactor*curr}this._value=[this._value,value].reduce(cback,0)/corrFactor;return this},subtract:function(value){var corrFactor=correctionFactor.call(null,this._value,value);function cback(accum,curr,currI,O){return accum-corrFactor*curr}this._value=[value].reduce(cback,this._value*corrFactor)/corrFactor;return this},multiply:function(value){function cback(accum,curr,currI,O){var corrFactor=correctionFactor(accum,curr);return accum*corrFactor*(curr*corrFactor)/(corrFactor*corrFactor)}this._value=[this._value,value].reduce(cback,1);return this},divide:function(value){function cback(accum,curr,currI,O){var corrFactor=correctionFactor(accum,curr);return accum*corrFactor/(curr*corrFactor)}this._value=[this._value,value].reduce(cback);return this},difference:function(value){return Math.abs(numeral(this._value).subtract(value).value())}};if(hasModule){module.exports=numeral}if(typeof ender==="undefined"){this["numeral"]=numeral}if(typeof define==="function"&&define.amd){define([],function(){return numeral})}}).call(this)},{}],22:[function(require,module,exports){(function(global){"use strict";var numeric=typeof exports==="undefined"?function numeric(){}:exports;if(typeof global!=="undefined"){global.numeric=numeric}numeric.version="1.2.6";numeric.bench=function bench(f,interval){var t1,t2,n,i;if(typeof interval==="undefined"){interval=15}n=.5;t1=new Date;while(1){n*=2;for(i=n;i>3;i-=4){f();f();f();f()}while(i>0){f();i--}t2=new Date;if(t2-t1>interval)break}for(i=n;i>3;i-=4){f();f();f();f()}while(i>0){f();i--}t2=new Date;return 1e3*(3*n-1)/(t2-t1)};numeric._myIndexOf=function _myIndexOf(w){var n=this.length,k;for(k=0;k<n;++k)if(this[k]===w)return k;return-1};numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf;numeric.Function=Function;numeric.precision=4;numeric.largeArray=50;numeric.prettyPrint=function prettyPrint(x){function fmtnum(x){if(x===0){return"0"}if(isNaN(x)){return"NaN"}if(x<0){return"-"+fmtnum(-x)}if(isFinite(x)){var scale=Math.floor(Math.log(x)/Math.log(10));var normalized=x/Math.pow(10,scale);var basic=normalized.toPrecision(numeric.precision);if(parseFloat(basic)===10){scale++;normalized=1;basic=normalized.toPrecision(numeric.precision)}return parseFloat(basic).toString()+"e"+scale.toString()}return"Infinity"}var ret=[];function foo(x){var k;if(typeof x==="undefined"){ret.push(Array(numeric.precision+8).join(" "));return false}if(typeof x==="string"){ret.push('"'+x+'"');return false}if(typeof x==="boolean"){ret.push(x.toString());return false}if(typeof x==="number"){var a=fmtnum(x);var b=x.toPrecision(numeric.precision);var c=parseFloat(x.toString()).toString();var d=[a,b,c,parseFloat(b).toString(),parseFloat(c).toString()];for(k=1;k<d.length;k++){if(d[k].length<a.length)a=d[k]}ret.push(Array(numeric.precision+8-a.length).join(" ")+a);return false}if(x===null){ret.push("null");return false}if(typeof x==="function"){ret.push(x.toString());var flag=false;for(k in x){if(x.hasOwnProperty(k)){if(flag)ret.push(",\n");else ret.push("\n{");flag=true;ret.push(k);ret.push(": \n");foo(x[k])}}if(flag)ret.push("}\n");return true}if(x instanceof Array){if(x.length>numeric.largeArray){ret.push("...Large Array...");return true}var flag=false;ret.push("[");for(k=0;k<x.length;k++){if(k>0){ret.push(",");if(flag)ret.push("\n ")}flag=foo(x[k])}ret.push("]");return true}ret.push("{");var flag=false;for(k in x){if(x.hasOwnProperty(k)){if(flag)ret.push(",\n");flag=true;ret.push(k);ret.push(": \n");foo(x[k])}}ret.push("}");return true}foo(x);return ret.join("")};numeric.parseDate=function parseDate(d){function foo(d){if(typeof d==="string"){return Date.parse(d.replace(/-/g,"/"))}if(!(d instanceof Array)){throw new Error("parseDate: parameter must be arrays of strings")}var ret=[],k;for(k=0;k<d.length;k++){ret[k]=foo(d[k])}return ret}return foo(d)};numeric.parseFloat=function parseFloat_(d){function foo(d){if(typeof d==="string"){return parseFloat(d)}if(!(d instanceof Array)){throw new Error("parseFloat: parameter must be arrays of strings")}var ret=[],k;for(k=0;k<d.length;k++){ret[k]=foo(d[k])}return ret}return foo(d)};numeric.parseCSV=function parseCSV(t){var foo=t.split("\n");var j,k;var ret=[];var pat=/(([^'",]*)|('[^']*')|("[^"]*")),/g;var patnum=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/;var stripper=function(n){return n.substr(0,n.length-1)};var count=0;for(k=0;k<foo.length;k++){var bar=(foo[k]+",").match(pat),baz;if(bar.length>0){ret[count]=[];for(j=0;j<bar.length;j++){baz=stripper(bar[j]);if(patnum.test(baz)){ret[count][j]=parseFloat(baz)}else ret[count][j]=baz}count++}}return ret};numeric.toCSV=function toCSV(A){var s=numeric.dim(A);var i,j,m,n,row,ret;m=s[0];n=s[1];ret=[];for(i=0;i<m;i++){row=[];for(j=0;j<m;j++){row[j]=A[i][j].toString()}ret[i]=row.join(", ")}return ret.join("\n")+"\n"};numeric.getURL=function getURL(url){var client=new XMLHttpRequest;client.open("GET",url,false);client.send();return client};numeric.imageURL=function imageURL(img){function base64(A){var n=A.length,i,x,y,z,p,q,r,s;var key="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var ret="";for(i=0;i<n;i+=3){x=A[i];y=A[i+1];z=A[i+2];p=x>>2;q=((x&3)<<4)+(y>>4);r=((y&15)<<2)+(z>>6);s=z&63;if(i+1>=n){r=s=64}else if(i+2>=n){s=64}ret+=key.charAt(p)+key.charAt(q)+key.charAt(r)+key.charAt(s)}return ret}function crc32Array(a,from,to){if(typeof from==="undefined"){from=0}if(typeof to==="undefined"){to=a.length}var table=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];var crc=-1,y=0,n=a.length,i;for(i=from;i<to;i++){y=(crc^a[i])&255;crc=crc>>>8^table[y]}return crc^-1}var h=img[0].length,w=img[0][0].length,s1,s2,next,k,length,a,b,i,j,adler32,crc32;var stream=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,w>>24&255,w>>16&255,w>>8&255,w&255,h>>24&255,h>>16&255,h>>8&255,h&255,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];crc32=crc32Array(stream,12,29);stream[29]=crc32>>24&255;stream[30]=crc32>>16&255;stream[31]=crc32>>8&255;stream[32]=crc32&255;s1=1;s2=0;for(i=0;i<h;i++){if(i<h-1){stream.push(0)}else{stream.push(1)}a=3*w+1+(i===0)&255;b=3*w+1+(i===0)>>8&255;stream.push(a);stream.push(b);stream.push(~a&255);stream.push(~b&255);if(i===0)stream.push(0);for(j=0;j<w;j++){for(k=0;k<3;k++){a=img[k][i][j];if(a>255)a=255;else if(a<0)a=0;else a=Math.round(a);s1=(s1+a)%65521;s2=(s2+s1)%65521;stream.push(a)}}stream.push(0)}adler32=(s2<<16)+s1;stream.push(adler32>>24&255);stream.push(adler32>>16&255);stream.push(adler32>>8&255);stream.push(adler32&255);length=stream.length-41;stream[33]=length>>24&255;stream[34]=length>>16&255;stream[35]=length>>8&255;stream[36]=length&255;crc32=crc32Array(stream,37);stream.push(crc32>>24&255);stream.push(crc32>>16&255);stream.push(crc32>>8&255);stream.push(crc32&255);stream.push(0);stream.push(0);stream.push(0);stream.push(0);stream.push(73);stream.push(69);stream.push(78);stream.push(68);stream.push(174);stream.push(66);stream.push(96);stream.push(130);return"data:image/png;base64,"+base64(stream)};numeric._dim=function _dim(x){var ret=[];while(typeof x==="object"){ret.push(x.length);x=x[0]}return ret};numeric.dim=function dim(x){var y,z;if(typeof x==="object"){y=x[0];if(typeof y==="object"){z=y[0];if(typeof z==="object"){return numeric._dim(x)}return[x.length,y.length]}return[x.length]}return[]};numeric.mapreduce=function mapreduce(body,init){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+init+";\n"+'if(typeof x === "number") { var xi = x; '+body+"; return accum; }\n"+'if(typeof _s === "undefined") _s = numeric.dim(x);\n'+'if(typeof _k === "undefined") _k = 0;\n'+"var _n = _s[_k];\n"+"var i,xi;\n"+"if(_k < _s.length-1) {\n"+"    for(i=_n-1;i>=0;i--) {\n"+"        accum = arguments.callee(x[i],accum,_s,_k+1);\n"+"    }"+"    return accum;\n"+"}\n"+"for(i=_n-1;i>=1;i-=2) { \n"+"    xi = x[i];\n"+"    "+body+";\n"+"    xi = x[i-1];\n"+"    "+body+";\n"+"}\n"+"if(i === 0) {\n"+"    xi = x[i];\n"+"    "+body+"\n"+"}\n"+"return accum;")};numeric.mapreduce2=function mapreduce2(body,setup){return Function("x","var n = x.length;\n"+"var i,xi;\n"+setup+";\n"+"for(i=n-1;i!==-1;--i) { \n"+"    xi = x[i];\n"+"    "+body+";\n"+"}\n"+"return accum;")};numeric.same=function same(x,y){var i,n;if(!(x instanceof Array)||!(y instanceof Array)){return false}n=x.length;if(n!==y.length){return false}for(i=0;i<n;i++){if(x[i]===y[i]){continue}if(typeof x[i]==="object"){if(!same(x[i],y[i]))return false}else{return false}}return true};numeric.rep=function rep(s,v,k){if(typeof k==="undefined"){k=0}var n=s[k],ret=Array(n),i;if(k===s.length-1){for(i=n-2;i>=0;i-=2){ret[i+1]=v;ret[i]=v}if(i===-1){ret[0]=v}return ret}for(i=n-1;i>=0;i--){ret[i]=numeric.rep(s,v,k+1)}return ret};numeric.dotMMsmall=function dotMMsmall(x,y){var i,j,k,p,q,r,ret,foo,bar,woo,i0,k0,p0,r0;p=x.length;q=y.length;r=y[0].length;ret=Array(p);for(i=p-1;i>=0;i--){foo=Array(r);bar=x[i];for(k=r-1;k>=0;k--){woo=bar[q-1]*y[q-1][k];for(j=q-2;j>=1;j-=2){i0=j-1;woo+=bar[j]*y[j][k]+bar[i0]*y[i0][k]}if(j===0){woo+=bar[0]*y[0][k]}foo[k]=woo}ret[i]=foo}return ret};numeric._getCol=function _getCol(A,j,x){var n=A.length,i;for(i=n-1;i>0;--i){x[i]=A[i][j];--i;x[i]=A[i][j]}if(i===0)x[0]=A[0][j]};numeric.dotMMbig=function dotMMbig(x,y){var gc=numeric._getCol,p=y.length,v=Array(p);var m=x.length,n=y[0].length,A=new Array(m),xj;var VV=numeric.dotVV;var i,j,k,z;--p;--m;for(i=m;i!==-1;--i)A[i]=Array(n);--n;for(i=n;i!==-1;--i){gc(y,i,v);for(j=m;j!==-1;--j){z=0;xj=x[j];A[j][i]=VV(xj,v)}}return A};numeric.dotMV=function dotMV(x,y){var p=x.length,q=y.length,i;var ret=Array(p),dotVV=numeric.dotVV;for(i=p-1;i>=0;i--){ret[i]=dotVV(x[i],y)}return ret};numeric.dotVM=function dotVM(x,y){var i,j,k,p,q,r,ret,foo,bar,woo,i0,k0,p0,r0,s1,s2,s3,baz,accum;p=x.length;q=y[0].length;ret=Array(q);for(k=q-1;k>=0;k--){woo=x[p-1]*y[p-1][k];for(j=p-2;j>=1;j-=2){i0=j-1;woo+=x[j]*y[j][k]+x[i0]*y[i0][k]}if(j===0){woo+=x[0]*y[0][k]}ret[k]=woo}return ret};numeric.dotVV=function dotVV(x,y){var i,n=x.length,i1,ret=x[n-1]*y[n-1];for(i=n-2;i>=1;i-=2){i1=i-1;ret+=x[i]*y[i]+x[i1]*y[i1]}if(i===0){ret+=x[0]*y[0]}return ret};numeric.dot=function dot(x,y){var d=numeric.dim;switch(d(x).length*1e3+d(y).length){case 2002:if(y.length<10)return numeric.dotMMsmall(x,y);else return numeric.dotMMbig(x,y);case 2001:return numeric.dotMV(x,y);case 1002:return numeric.dotVM(x,y);case 1001:return numeric.dotVV(x,y);case 1e3:return numeric.mulVS(x,y);case 1:return numeric.mulSV(x,y);case 0:return x*y;default:throw new Error("numeric.dot only works on vectors and matrices")}};numeric.diag=function diag(d){var i,i1,j,n=d.length,A=Array(n),Ai;for(i=n-1;i>=0;i--){Ai=Array(n);i1=i+2;for(j=n-1;j>=i1;j-=2){Ai[j]=0;Ai[j-1]=0}if(j>i){Ai[j]=0}Ai[i]=d[i];for(j=i-1;j>=1;j-=2){Ai[j]=0;Ai[j-1]=0}if(j===0){Ai[0]=0}A[i]=Ai}return A};numeric.getDiag=function(A){var n=Math.min(A.length,A[0].length),i,ret=Array(n);for(i=n-1;i>=1;--i){ret[i]=A[i][i];--i;ret[i]=A[i][i]}if(i===0){ret[0]=A[0][0]}return ret};numeric.identity=function identity(n){return numeric.diag(numeric.rep([n],1))};numeric.pointwise=function pointwise(params,body,setup){if(typeof setup==="undefined"){setup=""}var fun=[];var k;var avec=/\[i\]$/,p,thevec="";var haveret=false;for(k=0;k<params.length;k++){if(avec.test(params[k])){p=params[k].substring(0,params[k].length-3);thevec=p}else{p=params[k]}if(p==="ret")haveret=true;fun.push(p)}fun[params.length]="_s";fun[params.length+1]="_k";fun[params.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+thevec+");\n"+'if(typeof _k === "undefined") _k = 0;\n'+"var _n = _s[_k];\n"+"var i"+(haveret?"":", ret = Array(_n)")+";\n"+"if(_k < _s.length-1) {\n"+"    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+params.join(",")+",_s,_k+1);\n"+"    return ret;\n"+"}\n"+setup+"\n"+"for(i=_n-1;i!==-1;--i) {\n"+"    "+body+"\n"+"}\n"+"return ret;";return Function.apply(null,fun)};numeric.pointwise2=function pointwise2(params,body,setup){if(typeof setup==="undefined"){setup=""}var fun=[];var k;var avec=/\[i\]$/,p,thevec="";var haveret=false;for(k=0;k<params.length;k++){if(avec.test(params[k])){p=params[k].substring(0,params[k].length-3);thevec=p}else{p=params[k]}if(p==="ret")haveret=true;fun.push(p)}fun[params.length]="var _n = "+thevec+".length;\n"+"var i"+(haveret?"":", ret = Array(_n)")+";\n"+setup+"\n"+"for(i=_n-1;i!==-1;--i) {\n"+body+"\n"+"}\n"+"return ret;";return Function.apply(null,fun)};numeric._biforeach=function _biforeach(x,y,s,k,f){if(k===s.length-1){f(x,y);return}var i,n=s[k];for(i=n-1;i>=0;i--){_biforeach(typeof x==="object"?x[i]:x,typeof y==="object"?y[i]:y,s,k+1,f)}};numeric._biforeach2=function _biforeach2(x,y,s,k,f){if(k===s.length-1){return f(x,y)}var i,n=s[k],ret=Array(n);for(i=n-1;i>=0;--i){ret[i]=_biforeach2(typeof x==="object"?x[i]:x,typeof y==="object"?y[i]:y,s,k+1,f)}return ret};numeric._foreach=function _foreach(x,s,k,f){if(k===s.length-1){f(x);return}var i,n=s[k];for(i=n-1;i>=0;i--){_foreach(x[i],s,k+1,f)}};numeric._foreach2=function _foreach2(x,s,k,f){if(k===s.length-1){return f(x)}var i,n=s[k],ret=Array(n);for(i=n-1;i>=0;i--){ret[i]=_foreach2(x[i],s,k+1,f)}return ret};numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="};numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"];numeric.mathfuns2=["atan2","pow","max","min"];numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""};numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]};(function(){var i,o;for(i=0;i<numeric.mathfuns2.length;++i){o=numeric.mathfuns2[i];numeric.ops2[o]=o}for(i in numeric.ops2){if(numeric.ops2.hasOwnProperty(i)){o=numeric.ops2[i];var code,codeeq,setup="";if(numeric.myIndexOf.call(numeric.mathfuns2,i)!==-1){setup="var "+o+" = Math."+o+";\n";code=function(r,x,y){return r+" = "+o+"("+x+","+y+")"};codeeq=function(x,y){return x+" = "+o+"("+x+","+y+")"}}else{code=function(r,x,y){return r+" = "+x+" "+o+" "+y};if(numeric.opseq.hasOwnProperty(i+"eq")){codeeq=function(x,y){return x+" "+o+"= "+y}}else{codeeq=function(x,y){return x+" = "+x+" "+o+" "+y}}}numeric[i+"VV"]=numeric.pointwise2(["x[i]","y[i]"],code("ret[i]","x[i]","y[i]"),setup);numeric[i+"SV"]=numeric.pointwise2(["x","y[i]"],code("ret[i]","x","y[i]"),setup);numeric[i+"VS"]=numeric.pointwise2(["x[i]","y"],code("ret[i]","x[i]","y"),setup);numeric[i]=Function("var n = arguments.length, i, x = arguments[0], y;\n"+"var VV = numeric."+i+"VV, VS = numeric."+i+"VS, SV = numeric."+i+"SV;\n"+"var dim = numeric.dim;\n"+"for(i=1;i!==n;++i) { \n"+"  y = arguments[i];\n"+'  if(typeof x === "object") {\n'+'      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n'+"      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n"+'  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n'+"  else "+codeeq("x","y")+"\n"+"}\nreturn x;\n");
numeric[o]=numeric[i];numeric[i+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],codeeq("ret[i]","x[i]"),setup);numeric[i+"eqS"]=numeric.pointwise2(["ret[i]","x"],codeeq("ret[i]","x"),setup);numeric[i+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\n"+"var V = numeric."+i+"eqV, S = numeric."+i+"eqS\n"+"var s = numeric.dim(x);\n"+"for(i=1;i!==n;++i) { \n"+"  y = arguments[i];\n"+'  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n'+"  else numeric._biforeach(x,y,s,0,S);\n"+"}\nreturn x;\n")}}for(i=0;i<numeric.mathfuns2.length;++i){o=numeric.mathfuns2[i];delete numeric.ops2[o]}for(i=0;i<numeric.mathfuns.length;++i){o=numeric.mathfuns[i];numeric.ops1[o]=o}for(i in numeric.ops1){if(numeric.ops1.hasOwnProperty(i)){setup="";o=numeric.ops1[i];if(numeric.myIndexOf.call(numeric.mathfuns,i)!==-1){if(Math.hasOwnProperty(o))setup="var "+o+" = Math."+o+";\n"}numeric[i+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+o+"(ret[i]);",setup);numeric[i+"eq"]=Function("x",'if(typeof x !== "object") return '+o+"x\n"+"var i;\n"+"var V = numeric."+i+"eqV;\n"+"var s = numeric.dim(x);\n"+"numeric._foreach(x,s,0,V);\n"+"return x;\n");numeric[i+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+o+"(x[i]);",setup);numeric[i]=Function("x",'if(typeof x !== "object") return '+o+"(x)\n"+"var i;\n"+"var V = numeric."+i+"V;\n"+"var s = numeric.dim(x);\n"+"return numeric._foreach2(x,s,0,V);\n")}}for(i=0;i<numeric.mathfuns.length;++i){o=numeric.mathfuns[i];delete numeric.ops1[o]}for(i in numeric.mapreducers){if(numeric.mapreducers.hasOwnProperty(i)){o=numeric.mapreducers[i];numeric[i+"V"]=numeric.mapreduce2(o[0],o[1]);numeric[i]=Function("x","s","k",o[1]+'if(typeof x !== "object") {'+"    xi = x;\n"+o[0]+";\n"+"    return accum;\n"+"}"+'if(typeof s === "undefined") s = numeric.dim(x);\n'+'if(typeof k === "undefined") k = 0;\n'+"if(k === s.length-1) return numeric."+i+"V(x);\n"+"var xi;\n"+"var n = x.length, i;\n"+"for(i=n-1;i!==-1;--i) {\n"+"   xi = arguments.callee(x[i]);\n"+o[0]+";\n"+"}\n"+"return accum;\n")}}})();numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;");numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;");numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;");numeric.trunc=function trunc(x,y){if(typeof x==="object"){if(typeof y==="object")return numeric.truncVV(x,y);return numeric.truncVS(x,y)}if(typeof y==="object")return numeric.truncSV(x,y);return Math.round(x/y)*y};numeric.inv=function inv(x){var s=numeric.dim(x),abs=Math.abs,m=s[0],n=s[1];var A=numeric.clone(x),Ai,Aj;var I=numeric.identity(m),Ii,Ij;var i,j,k,x;for(j=0;j<n;++j){var i0=-1;var v0=-1;for(i=j;i!==m;++i){k=abs(A[i][j]);if(k>v0){i0=i;v0=k}}Aj=A[i0];A[i0]=A[j];A[j]=Aj;Ij=I[i0];I[i0]=I[j];I[j]=Ij;x=Aj[j];for(k=j;k!==n;++k)Aj[k]/=x;for(k=n-1;k!==-1;--k)Ij[k]/=x;for(i=m-1;i!==-1;--i){if(i!==j){Ai=A[i];Ii=I[i];x=Ai[j];for(k=j+1;k!==n;++k)Ai[k]-=Aj[k]*x;for(k=n-1;k>0;--k){Ii[k]-=Ij[k]*x;--k;Ii[k]-=Ij[k]*x}if(k===0)Ii[0]-=Ij[0]*x}}}return I};numeric.det=function det(x){var s=numeric.dim(x);if(s.length!==2||s[0]!==s[1]){throw new Error("numeric: det() only works on square matrices")}var n=s[0],ret=1,i,j,k,A=numeric.clone(x),Aj,Ai,alpha,temp,k1,k2,k3;for(j=0;j<n-1;j++){k=j;for(i=j+1;i<n;i++){if(Math.abs(A[i][j])>Math.abs(A[k][j])){k=i}}if(k!==j){temp=A[k];A[k]=A[j];A[j]=temp;ret*=-1}Aj=A[j];for(i=j+1;i<n;i++){Ai=A[i];alpha=Ai[j]/Aj[j];for(k=j+1;k<n-1;k+=2){k1=k+1;Ai[k]-=Aj[k]*alpha;Ai[k1]-=Aj[k1]*alpha}if(k!==n){Ai[k]-=Aj[k]*alpha}}if(Aj[j]===0){return 0}ret*=Aj[j]}return ret*A[j][j]};numeric.transpose=function transpose(x){var i,j,m=x.length,n=x[0].length,ret=Array(n),A0,A1,Bj;for(j=0;j<n;j++)ret[j]=Array(m);for(i=m-1;i>=1;i-=2){A1=x[i];A0=x[i-1];for(j=n-1;j>=1;--j){Bj=ret[j];Bj[i]=A1[j];Bj[i-1]=A0[j];--j;Bj=ret[j];Bj[i]=A1[j];Bj[i-1]=A0[j]}if(j===0){Bj=ret[0];Bj[i]=A1[0];Bj[i-1]=A0[0]}}if(i===0){A0=x[0];for(j=n-1;j>=1;--j){ret[j][0]=A0[j];--j;ret[j][0]=A0[j]}if(j===0){ret[0][0]=A0[0]}}return ret};numeric.negtranspose=function negtranspose(x){var i,j,m=x.length,n=x[0].length,ret=Array(n),A0,A1,Bj;for(j=0;j<n;j++)ret[j]=Array(m);for(i=m-1;i>=1;i-=2){A1=x[i];A0=x[i-1];for(j=n-1;j>=1;--j){Bj=ret[j];Bj[i]=-A1[j];Bj[i-1]=-A0[j];--j;Bj=ret[j];Bj[i]=-A1[j];Bj[i-1]=-A0[j]}if(j===0){Bj=ret[0];Bj[i]=-A1[0];Bj[i-1]=-A0[0]}}if(i===0){A0=x[0];for(j=n-1;j>=1;--j){ret[j][0]=-A0[j];--j;ret[j][0]=-A0[j]}if(j===0){ret[0][0]=-A0[0]}}return ret};numeric._random=function _random(s,k){var i,n=s[k],ret=Array(n),rnd;if(k===s.length-1){rnd=Math.random;for(i=n-1;i>=1;i-=2){ret[i]=rnd();ret[i-1]=rnd()}if(i===0){ret[0]=rnd()}return ret}for(i=n-1;i>=0;i--)ret[i]=_random(s,k+1);return ret};numeric.random=function random(s){return numeric._random(s,0)};numeric.norm2=function norm2(x){return Math.sqrt(numeric.norm2Squared(x))};numeric.linspace=function linspace(a,b,n){if(typeof n==="undefined")n=Math.max(Math.round(b-a)+1,1);if(n<2){return n===1?[a]:[]}var i,ret=Array(n);n--;for(i=n;i>=0;i--){ret[i]=(i*b+(n-i)*a)/n}return ret};numeric.getBlock=function getBlock(x,from,to){var s=numeric.dim(x);function foo(x,k){var i,a=from[k],n=to[k]-a,ret=Array(n);if(k===s.length-1){for(i=n;i>=0;i--){ret[i]=x[i+a]}return ret}for(i=n;i>=0;i--){ret[i]=foo(x[i+a],k+1)}return ret}return foo(x,0)};numeric.setBlock=function setBlock(x,from,to,B){var s=numeric.dim(x);function foo(x,y,k){var i,a=from[k],n=to[k]-a;if(k===s.length-1){for(i=n;i>=0;i--){x[i+a]=y[i]}}for(i=n;i>=0;i--){foo(x[i+a],y[i],k+1)}}foo(x,B,0);return x};numeric.getRange=function getRange(A,I,J){var m=I.length,n=J.length;var i,j;var B=Array(m),Bi,AI;for(i=m-1;i!==-1;--i){B[i]=Array(n);Bi=B[i];AI=A[I[i]];for(j=n-1;j!==-1;--j)Bi[j]=AI[J[j]]}return B};numeric.blockMatrix=function blockMatrix(X){var s=numeric.dim(X);if(s.length<4)return numeric.blockMatrix([X]);var m=s[0],n=s[1],M,N,i,j,Xij;M=0;N=0;for(i=0;i<m;++i)M+=X[i][0].length;for(j=0;j<n;++j)N+=X[0][j][0].length;var Z=Array(M);for(i=0;i<M;++i)Z[i]=Array(N);var I=0,J,ZI,k,l,Xijk;for(i=0;i<m;++i){J=N;for(j=n-1;j!==-1;--j){Xij=X[i][j];J-=Xij[0].length;for(k=Xij.length-1;k!==-1;--k){Xijk=Xij[k];ZI=Z[I+k];for(l=Xijk.length-1;l!==-1;--l)ZI[J+l]=Xijk[l]}}I+=X[i][0].length}return Z};numeric.tensor=function tensor(x,y){if(typeof x==="number"||typeof y==="number")return numeric.mul(x,y);var s1=numeric.dim(x),s2=numeric.dim(y);if(s1.length!==1||s2.length!==1){throw new Error("numeric: tensor product is only defined for vectors")}var m=s1[0],n=s2[0],A=Array(m),Ai,i,j,xi;for(i=m-1;i>=0;i--){Ai=Array(n);xi=x[i];for(j=n-1;j>=3;--j){Ai[j]=xi*y[j];--j;Ai[j]=xi*y[j];--j;Ai[j]=xi*y[j];--j;Ai[j]=xi*y[j]}while(j>=0){Ai[j]=xi*y[j];--j}A[i]=Ai}return A};numeric.T=function T(x,y){this.x=x;this.y=y};numeric.t=function t(x,y){return new numeric.T(x,y)};numeric.Tbinop=function Tbinop(rr,rc,cr,cc,setup){var io=numeric.indexOf;if(typeof setup!=="string"){var k;setup="";for(k in numeric){if(numeric.hasOwnProperty(k)&&(rr.indexOf(k)>=0||rc.indexOf(k)>=0||cr.indexOf(k)>=0||cc.indexOf(k)>=0)&&k.length>1){setup+="var "+k+" = numeric."+k+";\n"}}}return Function(["y"],"var x = this;\n"+"if(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+setup+"\n"+"if(x.y) {"+"  if(y.y) {"+"    return new numeric.T("+cc+");\n"+"  }\n"+"  return new numeric.T("+cr+");\n"+"}\n"+"if(y.y) {\n"+"  return new numeric.T("+rc+");\n"+"}\n"+"return new numeric.T("+rr+");\n")};numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)");numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)");numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))");numeric.T.prototype.reciprocal=function reciprocal(){var mul=numeric.mul,div=numeric.div;if(this.y){var d=numeric.add(mul(this.x,this.x),mul(this.y,this.y));return new numeric.T(div(this.x,d),div(numeric.neg(this.y),d))}return new T(div(1,this.x))};numeric.T.prototype.div=function div(y){if(!(y instanceof numeric.T))y=new numeric.T(y);if(y.y){return this.mul(y.reciprocal())}var div=numeric.div;if(this.y){return new numeric.T(div(this.x,y.x),div(this.y,y.x))}return new numeric.T(div(this.x,y.x))};numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))");numeric.T.prototype.transpose=function transpose(){var t=numeric.transpose,x=this.x,y=this.y;if(y){return new numeric.T(t(x),t(y))}return new numeric.T(t(x))};numeric.T.prototype.transjugate=function transjugate(){var t=numeric.transpose,x=this.x,y=this.y;if(y){return new numeric.T(t(x),numeric.negtranspose(y))}return new numeric.T(t(x))};numeric.Tunop=function Tunop(r,c,s){if(typeof s!=="string"){s=""}return Function("var x = this;\n"+s+"\n"+"if(x.y) {"+"  "+c+";\n"+"}\n"+r+";\n")};numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;");numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));");numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;");numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));");numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);");numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;");numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\n"+"return new numeric.T(numeric.log(r.x),theta.x);");numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\n"+"return Math.sqrt(f(x.x)+f(x.y));");numeric.T.prototype.inv=function inv(){var A=this;if(typeof A.y==="undefined"){return new numeric.T(numeric.inv(A.x))}var n=A.x.length,i,j,k;var Rx=numeric.identity(n),Ry=numeric.rep([n,n],0);var Ax=numeric.clone(A.x),Ay=numeric.clone(A.y);var Aix,Aiy,Ajx,Ajy,Rix,Riy,Rjx,Rjy;var i,j,k,d,d1,ax,ay,bx,by,temp;for(i=0;i<n;i++){ax=Ax[i][i];ay=Ay[i][i];d=ax*ax+ay*ay;k=i;for(j=i+1;j<n;j++){ax=Ax[j][i];ay=Ay[j][i];d1=ax*ax+ay*ay;if(d1>d){k=j;d=d1}}if(k!==i){temp=Ax[i];Ax[i]=Ax[k];Ax[k]=temp;temp=Ay[i];Ay[i]=Ay[k];Ay[k]=temp;temp=Rx[i];Rx[i]=Rx[k];Rx[k]=temp;temp=Ry[i];Ry[i]=Ry[k];Ry[k]=temp}Aix=Ax[i];Aiy=Ay[i];Rix=Rx[i];Riy=Ry[i];ax=Aix[i];ay=Aiy[i];for(j=i+1;j<n;j++){bx=Aix[j];by=Aiy[j];Aix[j]=(bx*ax+by*ay)/d;Aiy[j]=(by*ax-bx*ay)/d}for(j=0;j<n;j++){bx=Rix[j];by=Riy[j];Rix[j]=(bx*ax+by*ay)/d;Riy[j]=(by*ax-bx*ay)/d}for(j=i+1;j<n;j++){Ajx=Ax[j];Ajy=Ay[j];Rjx=Rx[j];Rjy=Ry[j];ax=Ajx[i];ay=Ajy[i];for(k=i+1;k<n;k++){bx=Aix[k];by=Aiy[k];Ajx[k]-=bx*ax-by*ay;Ajy[k]-=by*ax+bx*ay}for(k=0;k<n;k++){bx=Rix[k];by=Riy[k];Rjx[k]-=bx*ax-by*ay;Rjy[k]-=by*ax+bx*ay}}}for(i=n-1;i>0;i--){Rix=Rx[i];Riy=Ry[i];for(j=i-1;j>=0;j--){Rjx=Rx[j];Rjy=Ry[j];ax=Ax[j][i];ay=Ay[j][i];for(k=n-1;k>=0;k--){bx=Rix[k];by=Riy[k];Rjx[k]-=ax*bx-ay*by;Rjy[k]-=ax*by+ay*bx}}}return new numeric.T(Rx,Ry)};numeric.T.prototype.get=function get(i){var x=this.x,y=this.y,k=0,ik,n=i.length;if(y){while(k<n){ik=i[k];x=x[ik];y=y[ik];k++}return new numeric.T(x,y)}while(k<n){ik=i[k];x=x[ik];k++}return new numeric.T(x)};numeric.T.prototype.set=function set(i,v){var x=this.x,y=this.y,k=0,ik,n=i.length,vx=v.x,vy=v.y;if(n===0){if(vy){this.y=vy}else if(y){this.y=undefined}this.x=x;return this}if(vy){if(y){}else{y=numeric.rep(numeric.dim(x),0);this.y=y}while(k<n-1){ik=i[k];x=x[ik];y=y[ik];k++}ik=i[k];x[ik]=vx;y[ik]=vy;return this}if(y){while(k<n-1){ik=i[k];x=x[ik];y=y[ik];k++}ik=i[k];x[ik]=vx;if(vx instanceof Array)y[ik]=numeric.rep(numeric.dim(vx),0);else y[ik]=0;return this}while(k<n-1){ik=i[k];x=x[ik];k++}ik=i[k];x[ik]=vx;return this};numeric.T.prototype.getRows=function getRows(i0,i1){var n=i1-i0+1,j;var rx=Array(n),ry,x=this.x,y=this.y;for(j=i0;j<=i1;j++){rx[j-i0]=x[j]}if(y){ry=Array(n);for(j=i0;j<=i1;j++){ry[j-i0]=y[j]}return new numeric.T(rx,ry)}return new numeric.T(rx)};numeric.T.prototype.setRows=function setRows(i0,i1,A){var j;var rx=this.x,ry=this.y,x=A.x,y=A.y;for(j=i0;j<=i1;j++){rx[j]=x[j-i0]}if(y){if(!ry){ry=numeric.rep(numeric.dim(rx),0);this.y=ry}for(j=i0;j<=i1;j++){ry[j]=y[j-i0]}}else if(ry){for(j=i0;j<=i1;j++){ry[j]=numeric.rep([x[j-i0].length],0)}}return this};numeric.T.prototype.getRow=function getRow(k){var x=this.x,y=this.y;if(y){return new numeric.T(x[k],y[k])}return new numeric.T(x[k])};numeric.T.prototype.setRow=function setRow(i,v){var rx=this.x,ry=this.y,x=v.x,y=v.y;rx[i]=x;if(y){if(!ry){ry=numeric.rep(numeric.dim(rx),0);this.y=ry}ry[i]=y}else if(ry){ry=numeric.rep([x.length],0)}return this};numeric.T.prototype.getBlock=function getBlock(from,to){var x=this.x,y=this.y,b=numeric.getBlock;if(y){return new numeric.T(b(x,from,to),b(y,from,to))}return new numeric.T(b(x,from,to))};numeric.T.prototype.setBlock=function setBlock(from,to,A){if(!(A instanceof numeric.T))A=new numeric.T(A);var x=this.x,y=this.y,b=numeric.setBlock,Ax=A.x,Ay=A.y;if(Ay){if(!y){this.y=numeric.rep(numeric.dim(this),0);y=this.y}b(x,from,to,Ax);b(y,from,to,Ay);return this}b(x,from,to,Ax);if(y)b(y,from,to,numeric.rep(numeric.dim(Ax),0))};numeric.T.rep=function rep(s,v){var T=numeric.T;if(!(v instanceof T))v=new T(v);var x=v.x,y=v.y,r=numeric.rep;if(y)return new T(r(s,x),r(s,y));return new T(r(s,x))};numeric.T.diag=function diag(d){if(!(d instanceof numeric.T))d=new numeric.T(d);var x=d.x,y=d.y,diag=numeric.diag;if(y)return new numeric.T(diag(x),diag(y));return new numeric.T(diag(x))};numeric.T.eig=function eig(){if(this.y){throw new Error("eig: not implemented for complex matrices.")}return numeric.eig(this.x)};numeric.T.identity=function identity(n){return new numeric.T(numeric.identity(n))};numeric.T.prototype.getDiag=function getDiag(){var n=numeric;var x=this.x,y=this.y;if(y){return new n.T(n.getDiag(x),n.getDiag(y))}return new n.T(n.getDiag(x))};numeric.house=function house(x){var v=numeric.clone(x);var s=x[0]>=0?1:-1;var alpha=s*numeric.norm2(x);v[0]+=alpha;var foo=numeric.norm2(v);if(foo===0){throw new Error("eig: internal error")}return numeric.div(v,foo)};numeric.toUpperHessenberg=function toUpperHessenberg(me){var s=numeric.dim(me);if(s.length!==2||s[0]!==s[1]){throw new Error("numeric: toUpperHessenberg() only works on square matrices")}var m=s[0],i,j,k,x,v,A=numeric.clone(me),B,C,Ai,Ci,Q=numeric.identity(m),Qi;for(j=0;j<m-2;j++){x=Array(m-j-1);for(i=j+1;i<m;i++){x[i-j-1]=A[i][j]}if(numeric.norm2(x)>0){v=numeric.house(x);B=numeric.getBlock(A,[j+1,j],[m-1,m-1]);C=numeric.tensor(v,numeric.dot(v,B));for(i=j+1;i<m;i++){Ai=A[i];Ci=C[i-j-1];for(k=j;k<m;k++)Ai[k]-=2*Ci[k-j]}B=numeric.getBlock(A,[0,j+1],[m-1,m-1]);C=numeric.tensor(numeric.dot(B,v),v);for(i=0;i<m;i++){Ai=A[i];Ci=C[i];for(k=j+1;k<m;k++)Ai[k]-=2*Ci[k-j-1]}B=Array(m-j-1);for(i=j+1;i<m;i++)B[i-j-1]=Q[i];C=numeric.tensor(v,numeric.dot(v,B));for(i=j+1;i<m;i++){Qi=Q[i];Ci=C[i-j-1];for(k=0;k<m;k++)Qi[k]-=2*Ci[k]}}}return{H:A,Q:Q}};numeric.epsilon=2.220446049250313e-16;numeric.QRFrancis=function(H,maxiter){if(typeof maxiter==="undefined"){maxiter=1e4}H=numeric.clone(H);var H0=numeric.clone(H);var s=numeric.dim(H),m=s[0],x,v,a,b,c,d,det,tr,Hloc,Q=numeric.identity(m),Qi,Hi,B,C,Ci,i,j,k,iter;if(m<3){return{Q:Q,B:[[0,m-1]]}}var epsilon=numeric.epsilon;for(iter=0;iter<maxiter;iter++){for(j=0;j<m-1;j++){if(Math.abs(H[j+1][j])<epsilon*(Math.abs(H[j][j])+Math.abs(H[j+1][j+1]))){var QH1=numeric.QRFrancis(numeric.getBlock(H,[0,0],[j,j]),maxiter);var QH2=numeric.QRFrancis(numeric.getBlock(H,[j+1,j+1],[m-1,m-1]),maxiter);B=Array(j+1);for(i=0;i<=j;i++){B[i]=Q[i]}C=numeric.dot(QH1.Q,B);for(i=0;i<=j;i++){Q[i]=C[i]}B=Array(m-j-1);for(i=j+1;i<m;i++){B[i-j-1]=Q[i]}C=numeric.dot(QH2.Q,B);for(i=j+1;i<m;i++){Q[i]=C[i-j-1]}return{Q:Q,B:QH1.B.concat(numeric.add(QH2.B,j+1))}}}a=H[m-2][m-2];b=H[m-2][m-1];c=H[m-1][m-2];d=H[m-1][m-1];tr=a+d;det=a*d-b*c;Hloc=numeric.getBlock(H,[0,0],[2,2]);if(tr*tr>=4*det){var s1,s2;s1=.5*(tr+Math.sqrt(tr*tr-4*det));s2=.5*(tr-Math.sqrt(tr*tr-4*det));Hloc=numeric.add(numeric.sub(numeric.dot(Hloc,Hloc),numeric.mul(Hloc,s1+s2)),numeric.diag(numeric.rep([3],s1*s2)))}else{Hloc=numeric.add(numeric.sub(numeric.dot(Hloc,Hloc),numeric.mul(Hloc,tr)),numeric.diag(numeric.rep([3],det)))}x=[Hloc[0][0],Hloc[1][0],Hloc[2][0]];v=numeric.house(x);B=[H[0],H[1],H[2]];C=numeric.tensor(v,numeric.dot(v,B));for(i=0;i<3;i++){Hi=H[i];Ci=C[i];for(k=0;k<m;k++)Hi[k]-=2*Ci[k]}B=numeric.getBlock(H,[0,0],[m-1,2]);C=numeric.tensor(numeric.dot(B,v),v);for(i=0;i<m;i++){Hi=H[i];Ci=C[i];for(k=0;k<3;k++)Hi[k]-=2*Ci[k]}B=[Q[0],Q[1],Q[2]];C=numeric.tensor(v,numeric.dot(v,B));for(i=0;i<3;i++){Qi=Q[i];Ci=C[i];for(k=0;k<m;k++)Qi[k]-=2*Ci[k]}var J;for(j=0;j<m-2;j++){for(k=j;k<=j+1;k++){if(Math.abs(H[k+1][k])<epsilon*(Math.abs(H[k][k])+Math.abs(H[k+1][k+1]))){var QH1=numeric.QRFrancis(numeric.getBlock(H,[0,0],[k,k]),maxiter);var QH2=numeric.QRFrancis(numeric.getBlock(H,[k+1,k+1],[m-1,m-1]),maxiter);B=Array(k+1);for(i=0;i<=k;i++){B[i]=Q[i]}C=numeric.dot(QH1.Q,B);for(i=0;i<=k;i++){Q[i]=C[i]}B=Array(m-k-1);for(i=k+1;i<m;i++){B[i-k-1]=Q[i]}C=numeric.dot(QH2.Q,B);for(i=k+1;i<m;i++){Q[i]=C[i-k-1]}return{Q:Q,B:QH1.B.concat(numeric.add(QH2.B,k+1))}}}J=Math.min(m-1,j+3);x=Array(J-j);for(i=j+1;i<=J;i++){x[i-j-1]=H[i][j]}v=numeric.house(x);B=numeric.getBlock(H,[j+1,j],[J,m-1]);C=numeric.tensor(v,numeric.dot(v,B));for(i=j+1;i<=J;i++){Hi=H[i];Ci=C[i-j-1];for(k=j;k<m;k++)Hi[k]-=2*Ci[k-j]}B=numeric.getBlock(H,[0,j+1],[m-1,J]);C=numeric.tensor(numeric.dot(B,v),v);for(i=0;i<m;i++){Hi=H[i];Ci=C[i];for(k=j+1;k<=J;k++)Hi[k]-=2*Ci[k-j-1]}B=Array(J-j);for(i=j+1;i<=J;i++)B[i-j-1]=Q[i];C=numeric.tensor(v,numeric.dot(v,B));for(i=j+1;i<=J;i++){Qi=Q[i];Ci=C[i-j-1];for(k=0;k<m;k++)Qi[k]-=2*Ci[k]}}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")};numeric.eig=function eig(A,maxiter){var QH=numeric.toUpperHessenberg(A);var QB=numeric.QRFrancis(QH.H,maxiter);var T=numeric.T;var n=A.length,i,k,flag=false,B=QB.B,H=numeric.dot(QB.Q,numeric.dot(QH.H,numeric.transpose(QB.Q)));var Q=new T(numeric.dot(QB.Q,QH.Q)),Q0;var m=B.length,j;var a,b,c,d,p1,p2,disc,x,y,p,q,n1,n2;var sqrt=Math.sqrt;for(k=0;k<m;k++){i=B[k][0];if(i===B[k][1]){}else{j=i+1;a=H[i][i];b=H[i][j];c=H[j][i];d=H[j][j];if(b===0&&c===0)continue;p1=-a-d;p2=a*d-b*c;disc=p1*p1-4*p2;if(disc>=0){if(p1<0)x=-.5*(p1-sqrt(disc));else x=-.5*(p1+sqrt(disc));n1=(a-x)*(a-x)+b*b;n2=c*c+(d-x)*(d-x);if(n1>n2){n1=sqrt(n1);p=(a-x)/n1;q=b/n1}else{n2=sqrt(n2);p=c/n2;q=(d-x)/n2}Q0=new T([[q,-p],[p,q]]);Q.setRows(i,j,Q0.dot(Q.getRows(i,j)))}else{x=-.5*p1;y=.5*sqrt(-disc);n1=(a-x)*(a-x)+b*b;n2=c*c+(d-x)*(d-x);if(n1>n2){n1=sqrt(n1+y*y);p=(a-x)/n1;q=b/n1;x=0;y/=n1}else{n2=sqrt(n2+y*y);p=c/n2;q=(d-x)/n2;x=y/n2;y=0}Q0=new T([[q,-p],[p,q]],[[x,y],[y,-x]]);Q.setRows(i,j,Q0.dot(Q.getRows(i,j)))}}}var R=Q.dot(A).dot(Q.transjugate()),n=A.length,E=numeric.T.identity(n);for(j=0;j<n;j++){if(j>0){for(k=j-1;k>=0;k--){var Rk=R.get([k,k]),Rj=R.get([j,j]);if(numeric.neq(Rk.x,Rj.x)||numeric.neq(Rk.y,Rj.y)){x=R.getRow(k).getBlock([k],[j-1]);y=E.getRow(j).getBlock([k],[j-1]);E.set([j,k],R.get([k,j]).neg().sub(x.dot(y)).div(Rk.sub(Rj)))}else{E.setRow(j,E.getRow(k));continue}}}}for(j=0;j<n;j++){x=E.getRow(j);E.setRow(j,x.div(x.norm2()))}E=E.transpose();E=Q.transjugate().dot(E);return{lambda:R.getDiag(),E:E}};numeric.ccsSparse=function ccsSparse(A){var m=A.length,n,foo,i,j,counts=[];for(i=m-1;i!==-1;--i){foo=A[i];for(j in foo){j=parseInt(j);while(j>=counts.length)counts[counts.length]=0;if(foo[j]!==0)counts[j]++}}var n=counts.length;var Ai=Array(n+1);Ai[0]=0;for(i=0;i<n;++i)Ai[i+1]=Ai[i]+counts[i];var Aj=Array(Ai[n]),Av=Array(Ai[n]);for(i=m-1;i!==-1;--i){foo=A[i];for(j in foo){if(foo[j]!==0){counts[j]--;Aj[Ai[j]+counts[j]]=i;Av[Ai[j]+counts[j]]=foo[j]}}}return[Ai,Aj,Av]};numeric.ccsFull=function ccsFull(A){var Ai=A[0],Aj=A[1],Av=A[2],s=numeric.ccsDim(A),m=s[0],n=s[1],i,j,j0,j1,k;var B=numeric.rep([m,n],0);for(i=0;i<n;i++){j0=Ai[i];j1=Ai[i+1];for(j=j0;j<j1;++j){B[Aj[j]][i]=Av[j]}}return B};numeric.ccsTSolve=function ccsTSolve(A,b,x,bj,xj){var Ai=A[0],Aj=A[1],Av=A[2],m=Ai.length-1,max=Math.max,n=0;if(typeof bj==="undefined")x=numeric.rep([m],0);if(typeof bj==="undefined")bj=numeric.linspace(0,x.length-1);if(typeof xj==="undefined")xj=[];function dfs(j){var k;if(x[j]!==0)return;x[j]=1;for(k=Ai[j];k<Ai[j+1];++k)dfs(Aj[k]);xj[n]=j;++n}var i,j,j0,j1,k,l,l0,l1,a;for(i=bj.length-1;i!==-1;--i){dfs(bj[i])}xj.length=n;for(i=xj.length-1;i!==-1;--i){x[xj[i]]=0}for(i=bj.length-1;i!==-1;--i){j=bj[i];x[j]=b[j]}for(i=xj.length-1;i!==-1;--i){j=xj[i];j0=Ai[j];j1=max(Ai[j+1],j0);for(k=j0;k!==j1;++k){if(Aj[k]===j){x[j]/=Av[k];break}}a=x[j];for(k=j0;k!==j1;++k){l=Aj[k];if(l!==j)x[l]-=a*Av[k]}}return x};numeric.ccsDFS=function ccsDFS(n){this.k=Array(n);this.k1=Array(n);this.j=Array(n)};numeric.ccsDFS.prototype.dfs=function dfs(J,Ai,Aj,x,xj,Pinv){var m=0,foo,n=xj.length;var k=this.k,k1=this.k1,j=this.j,km,k11;if(x[J]!==0)return;x[J]=1;j[0]=J;k[0]=km=Ai[J];k1[0]=k11=Ai[J+1];while(1){if(km>=k11){xj[n]=j[m];if(m===0)return;++n;--m;km=k[m];k11=k1[m]}else{foo=Pinv[Aj[km]];if(x[foo]===0){x[foo]=1;k[m]=km;++m;j[m]=foo;km=Ai[foo];k1[m]=k11=Ai[foo+1]}else++km}}};numeric.ccsLPSolve=function ccsLPSolve(A,B,x,xj,I,Pinv,dfs){var Ai=A[0],Aj=A[1],Av=A[2],m=Ai.length-1,n=0;var Bi=B[0],Bj=B[1],Bv=B[2];var i,i0,i1,j,J,j0,j1,k,l,l0,l1,a;i0=Bi[I];i1=Bi[I+1];xj.length=0;for(i=i0;i<i1;++i){dfs.dfs(Pinv[Bj[i]],Ai,Aj,x,xj,Pinv)}for(i=xj.length-1;i!==-1;--i){x[xj[i]]=0}for(i=i0;i!==i1;++i){j=Pinv[Bj[i]];x[j]=Bv[i]}for(i=xj.length-1;i!==-1;--i){j=xj[i];j0=Ai[j];j1=Ai[j+1];for(k=j0;k<j1;++k){if(Pinv[Aj[k]]===j){x[j]/=Av[k];break}}a=x[j];for(k=j0;k<j1;++k){l=Pinv[Aj[k]];if(l!==j)x[l]-=a*Av[k]}}return x};numeric.ccsLUP1=function ccsLUP1(A,threshold){var m=A[0].length-1;var L=[numeric.rep([m+1],0),[],[]],U=[numeric.rep([m+1],0),[],[]];var Li=L[0],Lj=L[1],Lv=L[2],Ui=U[0],Uj=U[1],Uv=U[2];var x=numeric.rep([m],0),xj=numeric.rep([m],0);var i,j,k,j0,j1,a,e,c,d,K;var sol=numeric.ccsLPSolve,max=Math.max,abs=Math.abs;var P=numeric.linspace(0,m-1),Pinv=numeric.linspace(0,m-1);var dfs=new numeric.ccsDFS(m);if(typeof threshold==="undefined"){threshold=1}for(i=0;i<m;++i){sol(L,A,x,xj,i,Pinv,dfs);a=-1;e=-1;for(j=xj.length-1;j!==-1;--j){k=xj[j];if(k<=i)continue;c=abs(x[k]);if(c>a){e=k;a=c}}if(abs(x[i])<threshold*a){j=P[i];a=P[e];P[i]=a;Pinv[a]=i;P[e]=j;Pinv[j]=e;a=x[i];x[i]=x[e];x[e]=a}a=Li[i];e=Ui[i];d=x[i];Lj[a]=P[i];Lv[a]=1;++a;for(j=xj.length-1;j!==-1;--j){k=xj[j];c=x[k];xj[j]=0;x[k]=0;if(k<=i){Uj[e]=k;Uv[e]=c;++e}else{Lj[a]=P[k];Lv[a]=c/d;++a}}Li[i+1]=a;Ui[i+1]=e}for(j=Lj.length-1;j!==-1;--j){Lj[j]=Pinv[Lj[j]]}return{L:L,U:U,P:P,Pinv:Pinv}};numeric.ccsDFS0=function ccsDFS0(n){this.k=Array(n);this.k1=Array(n);this.j=Array(n)};numeric.ccsDFS0.prototype.dfs=function dfs(J,Ai,Aj,x,xj,Pinv,P){var m=0,foo,n=xj.length;var k=this.k,k1=this.k1,j=this.j,km,k11;if(x[J]!==0)return;x[J]=1;j[0]=J;k[0]=km=Ai[Pinv[J]];k1[0]=k11=Ai[Pinv[J]+1];while(1){if(isNaN(km))throw new Error("Ow!");if(km>=k11){xj[n]=Pinv[j[m]];if(m===0)return;++n;--m;km=k[m];k11=k1[m]}else{foo=Aj[km];if(x[foo]===0){x[foo]=1;k[m]=km;++m;j[m]=foo;foo=Pinv[foo];km=Ai[foo];k1[m]=k11=Ai[foo+1]}else++km}}};numeric.ccsLPSolve0=function ccsLPSolve0(A,B,y,xj,I,Pinv,P,dfs){var Ai=A[0],Aj=A[1],Av=A[2],m=Ai.length-1,n=0;var Bi=B[0],Bj=B[1],Bv=B[2];var i,i0,i1,j,J,j0,j1,k,l,l0,l1,a;i0=Bi[I];i1=Bi[I+1];xj.length=0;for(i=i0;i<i1;++i){dfs.dfs(Bj[i],Ai,Aj,y,xj,Pinv,P)}for(i=xj.length-1;i!==-1;--i){j=xj[i];y[P[j]]=0}for(i=i0;i!==i1;++i){j=Bj[i];y[j]=Bv[i]}for(i=xj.length-1;i!==-1;--i){j=xj[i];l=P[j];j0=Ai[j];j1=Ai[j+1];for(k=j0;k<j1;++k){if(Aj[k]===l){y[l]/=Av[k];break}}a=y[l];for(k=j0;k<j1;++k)y[Aj[k]]-=a*Av[k];y[l]=a}};numeric.ccsLUP0=function ccsLUP0(A,threshold){var m=A[0].length-1;var L=[numeric.rep([m+1],0),[],[]],U=[numeric.rep([m+1],0),[],[]];var Li=L[0],Lj=L[1],Lv=L[2],Ui=U[0],Uj=U[1],Uv=U[2];var y=numeric.rep([m],0),xj=numeric.rep([m],0);var i,j,k,j0,j1,a,e,c,d,K;var sol=numeric.ccsLPSolve0,max=Math.max,abs=Math.abs;var P=numeric.linspace(0,m-1),Pinv=numeric.linspace(0,m-1);var dfs=new numeric.ccsDFS0(m);if(typeof threshold==="undefined"){threshold=1}for(i=0;i<m;++i){sol(L,A,y,xj,i,Pinv,P,dfs);a=-1;e=-1;for(j=xj.length-1;j!==-1;--j){k=xj[j];if(k<=i)continue;c=abs(y[P[k]]);if(c>a){e=k;a=c}}if(abs(y[P[i]])<threshold*a){j=P[i];a=P[e];P[i]=a;Pinv[a]=i;P[e]=j;Pinv[j]=e}a=Li[i];e=Ui[i];d=y[P[i]];Lj[a]=P[i];Lv[a]=1;++a;for(j=xj.length-1;j!==-1;--j){k=xj[j];c=y[P[k]];xj[j]=0;y[P[k]]=0;if(k<=i){Uj[e]=k;Uv[e]=c;++e}else{Lj[a]=P[k];Lv[a]=c/d;++a}}Li[i+1]=a;Ui[i+1]=e}for(j=Lj.length-1;j!==-1;--j){Lj[j]=Pinv[Lj[j]]}return{L:L,U:U,P:P,Pinv:Pinv}};numeric.ccsLUP=numeric.ccsLUP0;numeric.ccsDim=function ccsDim(A){return[numeric.sup(A[1])+1,A[0].length-1]};numeric.ccsGetBlock=function ccsGetBlock(A,i,j){var s=numeric.ccsDim(A),m=s[0],n=s[1];if(typeof i==="undefined"){i=numeric.linspace(0,m-1)}else if(typeof i==="number"){i=[i]}if(typeof j==="undefined"){j=numeric.linspace(0,n-1)}else if(typeof j==="number"){j=[j]}var p,p0,p1,P=i.length,q,Q=j.length,r,jq,ip;var Bi=numeric.rep([n],0),Bj=[],Bv=[],B=[Bi,Bj,Bv];var Ai=A[0],Aj=A[1],Av=A[2];var x=numeric.rep([m],0),count=0,flags=numeric.rep([m],0);for(q=0;q<Q;++q){jq=j[q];var q0=Ai[jq];var q1=Ai[jq+1];for(p=q0;p<q1;++p){r=Aj[p];flags[r]=1;x[r]=Av[p]}for(p=0;p<P;++p){ip=i[p];if(flags[ip]){Bj[count]=p;Bv[count]=x[i[p]];++count}}for(p=q0;p<q1;++p){r=Aj[p];flags[r]=0}Bi[q+1]=count}return B};numeric.ccsDot=function ccsDot(A,B){var Ai=A[0],Aj=A[1],Av=A[2];var Bi=B[0],Bj=B[1],Bv=B[2];var sA=numeric.ccsDim(A),sB=numeric.ccsDim(B);var m=sA[0],n=sA[1],o=sB[1];var x=numeric.rep([m],0),flags=numeric.rep([m],0),xj=Array(m);var Ci=numeric.rep([o],0),Cj=[],Cv=[],C=[Ci,Cj,Cv];var i,j,k,j0,j1,i0,i1,l,p,a,b;for(k=0;k!==o;++k){j0=Bi[k];j1=Bi[k+1];p=0;for(j=j0;j<j1;++j){a=Bj[j];b=Bv[j];i0=Ai[a];i1=Ai[a+1];for(i=i0;i<i1;++i){l=Aj[i];if(flags[l]===0){xj[p]=l;flags[l]=1;p=p+1}x[l]=x[l]+Av[i]*b}}j0=Ci[k];j1=j0+p;Ci[k+1]=j1;for(j=p-1;j!==-1;--j){b=j0+j;i=xj[j];Cj[b]=i;Cv[b]=x[i];flags[i]=0;x[i]=0}Ci[k+1]=Ci[k]+p}return C};numeric.ccsLUPSolve=function ccsLUPSolve(LUP,B){var L=LUP.L,U=LUP.U,P=LUP.P;var Bi=B[0];var flag=false;if(typeof Bi!=="object"){B=[[0,B.length],numeric.linspace(0,B.length-1),B];Bi=B[0];flag=true}var Bj=B[1],Bv=B[2];var n=L[0].length-1,m=Bi.length-1;var x=numeric.rep([n],0),xj=Array(n);var b=numeric.rep([n],0),bj=Array(n);var Xi=numeric.rep([m+1],0),Xj=[],Xv=[];var sol=numeric.ccsTSolve;var i,j,j0,j1,k,J,N=0;for(i=0;i<m;++i){k=0;j0=Bi[i];j1=Bi[i+1];for(j=j0;j<j1;++j){J=LUP.Pinv[Bj[j]];bj[k]=J;b[J]=Bv[j];++k}bj.length=k;sol(L,b,x,bj,xj);for(j=bj.length-1;j!==-1;--j)b[bj[j]]=0;sol(U,x,b,xj,bj);if(flag)return b;for(j=xj.length-1;j!==-1;--j)x[xj[j]]=0;for(j=bj.length-1;j!==-1;--j){J=bj[j];Xj[N]=J;Xv[N]=b[J];b[J]=0;++N}Xi[i+1]=N}return[Xi,Xj,Xv]};numeric.ccsbinop=function ccsbinop(body,setup){if(typeof setup==="undefined")setup="";return Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\n"+"var Yi = Y[0], Yj = Y[1], Yv = Y[2];\n"+"var n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\n"+"var Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\n"+"var x = numeric.rep([m],0),y = numeric.rep([m],0);\n"+"var xk,yk,zk;\n"+"var i,j,j0,j1,k,p=0;\n"+setup+"for(i=0;i<n;++i) {\n"+"  j0 = Xi[i]; j1 = Xi[i+1];\n"+"  for(j=j0;j!==j1;++j) {\n"+"    k = Xj[j];\n"+"    x[k] = 1;\n"+"    Zj[p] = k;\n"+"    ++p;\n"+"  }\n"+"  j0 = Yi[i]; j1 = Yi[i+1];\n"+"  for(j=j0;j!==j1;++j) {\n"+"    k = Yj[j];\n"+"    y[k] = Yv[j];\n"+"    if(x[k] === 0) {\n"+"      Zj[p] = k;\n"+"      ++p;\n"+"    }\n"+"  }\n"+"  Zi[i+1] = p;\n"+"  j0 = Xi[i]; j1 = Xi[i+1];\n"+"  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n"+"  j0 = Zi[i]; j1 = Zi[i+1];\n"+"  for(j=j0;j!==j1;++j) {\n"+"    k = Zj[j];\n"+"    xk = x[k];\n"+"    yk = y[k];\n"+body+"\n"+"    Zv[j] = zk;\n"+"  }\n"+"  j0 = Xi[i]; j1 = Xi[i+1];\n"+"  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n"+"  j0 = Yi[i]; j1 = Yi[i+1];\n"+"  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n"+"}\n"+"return [Zi,Zj,Zv];")};(function(){var k,A,B,C;for(k in numeric.ops2){if(isFinite(eval("1"+numeric.ops2[k]+"0")))A="[Y[0],Y[1],numeric."+k+"(X,Y[2])]";else A="NaN";if(isFinite(eval("0"+numeric.ops2[k]+"1")))B="[X[0],X[1],numeric."+k+"(X[2],Y)]";else B="NaN";if(isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1")))C="numeric.ccs"+k+"MM(X,Y)";else C="NaN";numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;");numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+";\n"+'if(typeof Y === "number") return '+B+";\n"+"return "+C+";\n")}})();numeric.ccsScatter=function ccsScatter(A){var Ai=A[0],Aj=A[1],Av=A[2];var n=numeric.sup(Aj)+1,m=Ai.length;var Ri=numeric.rep([n],0),Rj=Array(m),Rv=Array(m);var counts=numeric.rep([n],0),i;for(i=0;i<m;++i)counts[Aj[i]]++;for(i=0;i<n;++i)Ri[i+1]=Ri[i]+counts[i];var ptr=Ri.slice(0),k,Aii;for(i=0;i<m;++i){Aii=Aj[i];k=ptr[Aii];Rj[k]=Ai[i];Rv[k]=Av[i];ptr[Aii]=ptr[Aii]+1}return[Ri,Rj,Rv]};numeric.ccsGather=function ccsGather(A){var Ai=A[0],Aj=A[1],Av=A[2];var n=Ai.length-1,m=Aj.length;var Ri=Array(m),Rj=Array(m),Rv=Array(m);var i,j,j0,j1,p;p=0;for(i=0;i<n;++i){j0=Ai[i];j1=Ai[i+1];for(j=j0;j!==j1;++j){Rj[p]=i;Ri[p]=Aj[j];Rv[p]=Av[j];++p}}return[Ri,Rj,Rv]};numeric.sdim=function dim(A,ret,k){if(typeof ret==="undefined"){ret=[]}if(typeof A!=="object")return ret;if(typeof k==="undefined"){k=0}if(!(k in ret)){ret[k]=0}if(A.length>ret[k])ret[k]=A.length;var i;for(i in A){if(A.hasOwnProperty(i))dim(A[i],ret,k+1)}return ret};numeric.sclone=function clone(A,k,n){if(typeof k==="undefined"){k=0}if(typeof n==="undefined"){n=numeric.sdim(A).length}var i,ret=Array(A.length);if(k===n-1){for(i in A){if(A.hasOwnProperty(i))ret[i]=A[i]}return ret}for(i in A){if(A.hasOwnProperty(i))ret[i]=clone(A[i],k+1,n)}return ret};numeric.sdiag=function diag(d){var n=d.length,i,ret=Array(n),i1,i2,i3;for(i=n-1;i>=1;i-=2){i1=i-1;ret[i]=[];ret[i][i]=d[i];ret[i1]=[];ret[i1][i1]=d[i1]}if(i===0){ret[0]=[];ret[0][0]=d[i]}return ret};numeric.sidentity=function identity(n){return numeric.sdiag(numeric.rep([n],1))};numeric.stranspose=function transpose(A){var ret=[],n=A.length,i,j,Ai;for(i in A){if(!A.hasOwnProperty(i))continue;Ai=A[i];for(j in Ai){if(!Ai.hasOwnProperty(j))continue;if(typeof ret[j]!=="object"){ret[j]=[]}ret[j][i]=Ai[j]}}return ret};numeric.sLUP=function LUP(A,tol){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")};numeric.sdotMM=function dotMM(A,B){var p=A.length,q=B.length,BT=numeric.stranspose(B),r=BT.length,Ai,BTk;var i,j,k,accum;var ret=Array(p),reti;for(i=p-1;i>=0;i--){reti=[];Ai=A[i];for(k=r-1;k>=0;k--){accum=0;BTk=BT[k];for(j in Ai){if(!Ai.hasOwnProperty(j))continue;if(j in BTk){accum+=Ai[j]*BTk[j]}}if(accum)reti[k]=accum}ret[i]=reti}return ret};numeric.sdotMV=function dotMV(A,x){var p=A.length,Ai,i,j;var ret=Array(p),accum;for(i=p-1;i>=0;i--){Ai=A[i];accum=0;for(j in Ai){if(!Ai.hasOwnProperty(j))continue;if(x[j])accum+=Ai[j]*x[j]}if(accum)ret[i]=accum}return ret};numeric.sdotVM=function dotMV(x,A){var i,j,Ai,alpha;var ret=[],accum;for(i in x){if(!x.hasOwnProperty(i))continue;Ai=A[i];alpha=x[i];for(j in Ai){if(!Ai.hasOwnProperty(j))continue;if(!ret[j]){ret[j]=0}ret[j]+=alpha*Ai[j]}}return ret};numeric.sdotVV=function dotVV(x,y){var i,ret=0;for(i in x){if(x[i]&&y[i])ret+=x[i]*y[i]}return ret};numeric.sdot=function dot(A,B){var m=numeric.sdim(A).length,n=numeric.sdim(B).length;var k=m*1e3+n;switch(k){case 0:return A*B;
case 1001:return numeric.sdotVV(A,B);case 2001:return numeric.sdotMV(A,B);case 1002:return numeric.sdotVM(A,B);case 2002:return numeric.sdotMM(A,B);default:throw new Error("numeric.sdot not implemented for tensors of order "+m+" and "+n)}};numeric.sscatter=function scatter(V){var n=V[0].length,Vij,i,j,m=V.length,A=[],Aj;for(i=n-1;i>=0;--i){if(!V[m-1][i])continue;Aj=A;for(j=0;j<m-2;j++){Vij=V[j][i];if(!Aj[Vij])Aj[Vij]=[];Aj=Aj[Vij]}Aj[V[j][i]]=V[j+1][i]}return A};numeric.sgather=function gather(A,ret,k){if(typeof ret==="undefined")ret=[];if(typeof k==="undefined")k=[];var n,i,Ai;n=k.length;for(i in A){if(A.hasOwnProperty(i)){k[n]=parseInt(i);Ai=A[i];if(typeof Ai==="number"){if(Ai){if(ret.length===0){for(i=n+1;i>=0;--i)ret[i]=[]}for(i=n;i>=0;--i)ret[i].push(k[i]);ret[n+1].push(Ai)}}else gather(Ai,ret,k)}}if(k.length>n)k.pop();return ret};numeric.cLU=function LU(A){var I=A[0],J=A[1],V=A[2];var p=I.length,m=0,i,j,k,a,b,c;for(i=0;i<p;i++)if(I[i]>m)m=I[i];m++;var L=Array(m),U=Array(m),left=numeric.rep([m],Infinity),right=numeric.rep([m],-Infinity);var Ui,Uj,alpha;for(k=0;k<p;k++){i=I[k];j=J[k];if(j<left[i])left[i]=j;if(j>right[i])right[i]=j}for(i=0;i<m-1;i++){if(right[i]>right[i+1])right[i+1]=right[i]}for(i=m-1;i>=1;i--){if(left[i]<left[i-1])left[i-1]=left[i]}var countL=0,countU=0;for(i=0;i<m;i++){U[i]=numeric.rep([right[i]-left[i]+1],0);L[i]=numeric.rep([i-left[i]],0);countL+=i-left[i]+1;countU+=right[i]-i+1}for(k=0;k<p;k++){i=I[k];U[i][J[k]-left[i]]=V[k]}for(i=0;i<m-1;i++){a=i-left[i];Ui=U[i];for(j=i+1;left[j]<=i&&j<m;j++){b=i-left[j];c=right[i]-i;Uj=U[j];alpha=Uj[b]/Ui[a];if(alpha){for(k=1;k<=c;k++){Uj[k+b]-=alpha*Ui[k+a]}L[j][i-left[j]]=alpha}}}var Ui=[],Uj=[],Uv=[],Li=[],Lj=[],Lv=[];var p,q,foo;p=0;q=0;for(i=0;i<m;i++){a=left[i];b=right[i];foo=U[i];for(j=i;j<=b;j++){if(foo[j-a]){Ui[p]=i;Uj[p]=j;Uv[p]=foo[j-a];p++}}foo=L[i];for(j=a;j<i;j++){if(foo[j-a]){Li[q]=i;Lj[q]=j;Lv[q]=foo[j-a];q++}}Li[q]=i;Lj[q]=i;Lv[q]=1;q++}return{U:[Ui,Uj,Uv],L:[Li,Lj,Lv]}};numeric.cLUsolve=function LUsolve(lu,b){var L=lu.L,U=lu.U,ret=numeric.clone(b);var Li=L[0],Lj=L[1],Lv=L[2];var Ui=U[0],Uj=U[1],Uv=U[2];var p=Ui.length,q=Li.length;var m=ret.length,i,j,k;k=0;for(i=0;i<m;i++){while(Lj[k]<i){ret[i]-=Lv[k]*ret[Lj[k]];k++}k++}k=p-1;for(i=m-1;i>=0;i--){while(Uj[k]>i){ret[i]-=Uv[k]*ret[Uj[k]];k--}ret[i]/=Uv[k];k--}return ret};numeric.cgrid=function grid(n,shape){if(typeof n==="number")n=[n,n];var ret=numeric.rep(n,-1);var i,j,count;if(typeof shape!=="function"){switch(shape){case"L":shape=function(i,j){return i>=n[0]/2||j<n[1]/2};break;default:shape=function(i,j){return true};break}}count=0;for(i=1;i<n[0]-1;i++)for(j=1;j<n[1]-1;j++)if(shape(i,j)){ret[i][j]=count;count++}return ret};numeric.cdelsq=function delsq(g){var dir=[[-1,0],[0,-1],[0,1],[1,0]];var s=numeric.dim(g),m=s[0],n=s[1],i,j,k,p,q;var Li=[],Lj=[],Lv=[];for(i=1;i<m-1;i++)for(j=1;j<n-1;j++){if(g[i][j]<0)continue;for(k=0;k<4;k++){p=i+dir[k][0];q=j+dir[k][1];if(g[p][q]<0)continue;Li.push(g[i][j]);Lj.push(g[p][q]);Lv.push(-1)}Li.push(g[i][j]);Lj.push(g[i][j]);Lv.push(4)}return[Li,Lj,Lv]};numeric.cdotMV=function dotMV(A,x){var ret,Ai=A[0],Aj=A[1],Av=A[2],k,p=Ai.length,N;N=0;for(k=0;k<p;k++){if(Ai[k]>N)N=Ai[k]}N++;ret=numeric.rep([N],0);for(k=0;k<p;k++){ret[Ai[k]]+=Av[k]*x[Aj[k]]}return ret};numeric.Spline=function Spline(x,yl,yr,kl,kr){this.x=x;this.yl=yl;this.yr=yr;this.kl=kl;this.kr=kr};numeric.Spline.prototype._at=function _at(x1,p){var x=this.x;var yl=this.yl;var yr=this.yr;var kl=this.kl;var kr=this.kr;var x1,a,b,t;var add=numeric.add,sub=numeric.sub,mul=numeric.mul;a=sub(mul(kl[p],x[p+1]-x[p]),sub(yr[p+1],yl[p]));b=add(mul(kr[p+1],x[p]-x[p+1]),sub(yr[p+1],yl[p]));t=(x1-x[p])/(x[p+1]-x[p]);var s=t*(1-t);return add(add(add(mul(1-t,yl[p]),mul(t,yr[p+1])),mul(a,s*(1-t))),mul(b,s*t))};numeric.Spline.prototype.at=function at(x0){if(typeof x0==="number"){var x=this.x;var n=x.length;var p,q,mid,floor=Math.floor,a,b,t;p=0;q=n-1;while(q-p>1){mid=floor((p+q)/2);if(x[mid]<=x0)p=mid;else q=mid}return this._at(x0,p)}var n=x0.length,i,ret=Array(n);for(i=n-1;i!==-1;--i)ret[i]=this.at(x0[i]);return ret};numeric.Spline.prototype.diff=function diff(){var x=this.x;var yl=this.yl;var yr=this.yr;var kl=this.kl;var kr=this.kr;var n=yl.length;var i,dx,dy;var zl=kl,zr=kr,pl=Array(n),pr=Array(n);var add=numeric.add,mul=numeric.mul,div=numeric.div,sub=numeric.sub;for(i=n-1;i!==-1;--i){dx=x[i+1]-x[i];dy=sub(yr[i+1],yl[i]);pl[i]=div(add(mul(dy,6),mul(kl[i],-4*dx),mul(kr[i+1],-2*dx)),dx*dx);pr[i+1]=div(add(mul(dy,-6),mul(kl[i],2*dx),mul(kr[i+1],4*dx)),dx*dx)}return new numeric.Spline(x,zl,zr,pl,pr)};numeric.Spline.prototype.roots=function roots(){function sqr(x){return x*x}function heval(y0,y1,k0,k1,x){var A=k0*2-(y1-y0);var B=-k1*2+(y1-y0);var t=(x+1)*.5;var s=t*(1-t);return(1-t)*y0+t*y1+A*s*(1-t)+B*s*t}var ret=[];var x=this.x,yl=this.yl,yr=this.yr,kl=this.kl,kr=this.kr;if(typeof yl[0]==="number"){yl=[yl];yr=[yr];kl=[kl];kr=[kr]}var m=yl.length,n=x.length-1,i,j,k,y,s,t;var ai,bi,ci,di,ret=Array(m),ri,k0,k1,y0,y1,A,B,D,dx,cx,stops,z0,z1,zm,t0,t1,tm;var sqrt=Math.sqrt;for(i=0;i!==m;++i){ai=yl[i];bi=yr[i];ci=kl[i];di=kr[i];ri=[];for(j=0;j!==n;j++){if(j>0&&bi[j]*ai[j]<0)ri.push(x[j]);dx=x[j+1]-x[j];cx=x[j];y0=ai[j];y1=bi[j+1];k0=ci[j]/dx;k1=di[j+1]/dx;D=sqr(k0-k1+3*(y0-y1))+12*k1*y0;A=k1+3*y0+2*k0-3*y1;B=3*(k1+k0+2*(y0-y1));if(D<=0){z0=A/B;if(z0>x[j]&&z0<x[j+1])stops=[x[j],z0,x[j+1]];else stops=[x[j],x[j+1]]}else{z0=(A-sqrt(D))/B;z1=(A+sqrt(D))/B;stops=[x[j]];if(z0>x[j]&&z0<x[j+1])stops.push(z0);if(z1>x[j]&&z1<x[j+1])stops.push(z1);stops.push(x[j+1])}t0=stops[0];z0=this._at(t0,j);for(k=0;k<stops.length-1;k++){t1=stops[k+1];z1=this._at(t1,j);if(z0===0){ri.push(t0);t0=t1;z0=z1;continue}if(z1===0||z0*z1>0){t0=t1;z0=z1;continue}var side=0;while(1){tm=(z0*t1-z1*t0)/(z0-z1);if(tm<=t0||tm>=t1){break}zm=this._at(tm,j);if(zm*z1>0){t1=tm;z1=zm;if(side===-1)z0*=.5;side=-1}else if(zm*z0>0){t0=tm;z0=zm;if(side===1)z1*=.5;side=1}else break}ri.push(tm);t0=stops[k+1];z0=this._at(t0,j)}if(z1===0)ri.push(t1)}ret[i]=ri}if(typeof this.yl[0]==="number")return ret[0];return ret};numeric.spline=function spline(x,y,k1,kn){var n=x.length,b=[],dx=[],dy=[];var i;var sub=numeric.sub,mul=numeric.mul,add=numeric.add;for(i=n-2;i>=0;i--){dx[i]=x[i+1]-x[i];dy[i]=sub(y[i+1],y[i])}if(typeof k1==="string"||typeof kn==="string"){k1=kn="periodic"}var T=[[],[],[]];switch(typeof k1){case"undefined":b[0]=mul(3/(dx[0]*dx[0]),dy[0]);T[0].push(0,0);T[1].push(0,1);T[2].push(2/dx[0],1/dx[0]);break;case"string":b[0]=add(mul(3/(dx[n-2]*dx[n-2]),dy[n-2]),mul(3/(dx[0]*dx[0]),dy[0]));T[0].push(0,0,0);T[1].push(n-2,0,1);T[2].push(1/dx[n-2],2/dx[n-2]+2/dx[0],1/dx[0]);break;default:b[0]=k1;T[0].push(0);T[1].push(0);T[2].push(1);break}for(i=1;i<n-1;i++){b[i]=add(mul(3/(dx[i-1]*dx[i-1]),dy[i-1]),mul(3/(dx[i]*dx[i]),dy[i]));T[0].push(i,i,i);T[1].push(i-1,i,i+1);T[2].push(1/dx[i-1],2/dx[i-1]+2/dx[i],1/dx[i])}switch(typeof kn){case"undefined":b[n-1]=mul(3/(dx[n-2]*dx[n-2]),dy[n-2]);T[0].push(n-1,n-1);T[1].push(n-2,n-1);T[2].push(1/dx[n-2],2/dx[n-2]);break;case"string":T[1][T[1].length-1]=0;break;default:b[n-1]=kn;T[0].push(n-1);T[1].push(n-1);T[2].push(1);break}if(typeof b[0]!=="number")b=numeric.transpose(b);else b=[b];var k=Array(b.length);if(typeof k1==="string"){for(i=k.length-1;i!==-1;--i){k[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(T)),b[i]);k[i][n-1]=k[i][0]}}else{for(i=k.length-1;i!==-1;--i){k[i]=numeric.cLUsolve(numeric.cLU(T),b[i])}}if(typeof y[0]==="number")k=k[0];else k=numeric.transpose(k);return new numeric.Spline(x,y,y,k,k)};numeric.fftpow2=function fftpow2(x,y){var n=x.length;if(n===1)return;var cos=Math.cos,sin=Math.sin,i,j;var xe=Array(n/2),ye=Array(n/2),xo=Array(n/2),yo=Array(n/2);j=n/2;for(i=n-1;i!==-1;--i){--j;xo[j]=x[i];yo[j]=y[i];--i;xe[j]=x[i];ye[j]=y[i]}fftpow2(xe,ye);fftpow2(xo,yo);j=n/2;var t,k=-6.283185307179586/n,ci,si;for(i=n-1;i!==-1;--i){--j;if(j===-1)j=n/2-1;t=k*i;ci=cos(t);si=sin(t);x[i]=xe[j]+ci*xo[j]-si*yo[j];y[i]=ye[j]+ci*yo[j]+si*xo[j]}};numeric._ifftpow2=function _ifftpow2(x,y){var n=x.length;if(n===1)return;var cos=Math.cos,sin=Math.sin,i,j;var xe=Array(n/2),ye=Array(n/2),xo=Array(n/2),yo=Array(n/2);j=n/2;for(i=n-1;i!==-1;--i){--j;xo[j]=x[i];yo[j]=y[i];--i;xe[j]=x[i];ye[j]=y[i]}_ifftpow2(xe,ye);_ifftpow2(xo,yo);j=n/2;var t,k=6.283185307179586/n,ci,si;for(i=n-1;i!==-1;--i){--j;if(j===-1)j=n/2-1;t=k*i;ci=cos(t);si=sin(t);x[i]=xe[j]+ci*xo[j]-si*yo[j];y[i]=ye[j]+ci*yo[j]+si*xo[j]}};numeric.ifftpow2=function ifftpow2(x,y){numeric._ifftpow2(x,y);numeric.diveq(x,x.length);numeric.diveq(y,y.length)};numeric.convpow2=function convpow2(ax,ay,bx,by){numeric.fftpow2(ax,ay);numeric.fftpow2(bx,by);var i,n=ax.length,axi,bxi,ayi,byi;for(i=n-1;i!==-1;--i){axi=ax[i];ayi=ay[i];bxi=bx[i];byi=by[i];ax[i]=axi*bxi-ayi*byi;ay[i]=axi*byi+ayi*bxi}numeric.ifftpow2(ax,ay)};numeric.T.prototype.fft=function fft(){var x=this.x,y=this.y;var n=x.length,log=Math.log,log2=log(2),p=Math.ceil(log(2*n-1)/log2),m=Math.pow(2,p);var cx=numeric.rep([m],0),cy=numeric.rep([m],0),cos=Math.cos,sin=Math.sin;var k,c=-3.141592653589793/n,t;var a=numeric.rep([m],0),b=numeric.rep([m],0),nhalf=Math.floor(n/2);for(k=0;k<n;k++)a[k]=x[k];if(typeof y!=="undefined")for(k=0;k<n;k++)b[k]=y[k];cx[0]=1;for(k=1;k<=m/2;k++){t=c*k*k;cx[k]=cos(t);cy[k]=sin(t);cx[m-k]=cos(t);cy[m-k]=sin(t)}var X=new numeric.T(a,b),Y=new numeric.T(cx,cy);X=X.mul(Y);numeric.convpow2(X.x,X.y,numeric.clone(Y.x),numeric.neg(Y.y));X=X.mul(Y);X.x.length=n;X.y.length=n;return X};numeric.T.prototype.ifft=function ifft(){var x=this.x,y=this.y;var n=x.length,log=Math.log,log2=log(2),p=Math.ceil(log(2*n-1)/log2),m=Math.pow(2,p);var cx=numeric.rep([m],0),cy=numeric.rep([m],0),cos=Math.cos,sin=Math.sin;var k,c=3.141592653589793/n,t;var a=numeric.rep([m],0),b=numeric.rep([m],0),nhalf=Math.floor(n/2);for(k=0;k<n;k++)a[k]=x[k];if(typeof y!=="undefined")for(k=0;k<n;k++)b[k]=y[k];cx[0]=1;for(k=1;k<=m/2;k++){t=c*k*k;cx[k]=cos(t);cy[k]=sin(t);cx[m-k]=cos(t);cy[m-k]=sin(t)}var X=new numeric.T(a,b),Y=new numeric.T(cx,cy);X=X.mul(Y);numeric.convpow2(X.x,X.y,numeric.clone(Y.x),numeric.neg(Y.y));X=X.mul(Y);X.x.length=n;X.y.length=n;return X.div(n)};numeric.gradient=function gradient(f,x){var n=x.length;var f0=f(x);if(isNaN(f0))throw new Error("gradient: f(x) is a NaN!");var max=Math.max;var i,x0=numeric.clone(x),f1,f2,J=Array(n);var div=numeric.div,sub=numeric.sub,errest,roundoff,max=Math.max,eps=.001,abs=Math.abs,min=Math.min;var t0,t1,t2,it=0,d1,d2,N;for(i=0;i<n;i++){var h=max(1e-6*f0,1e-8);while(1){++it;if(it>20){throw new Error("Numerical gradient fails")}x0[i]=x[i]+h;f1=f(x0);x0[i]=x[i]-h;f2=f(x0);x0[i]=x[i];if(isNaN(f1)||isNaN(f2)){h/=16;continue}J[i]=(f1-f2)/(2*h);t0=x[i]-h;t1=x[i];t2=x[i]+h;d1=(f1-f0)/h;d2=(f0-f2)/h;N=max(abs(J[i]),abs(f0),abs(f1),abs(f2),abs(t0),abs(t1),abs(t2),1e-8);errest=min(max(abs(d1-J[i]),abs(d2-J[i]),abs(d1-d2))/N,h/N);if(errest>eps){h/=16}else break}}return J};numeric.uncmin=function uncmin(f,x0,tol,gradient,maxit,callback,options){var grad=numeric.gradient;if(typeof options==="undefined"){options={}}if(typeof tol==="undefined"){tol=1e-8}if(typeof gradient==="undefined"){gradient=function(x){return grad(f,x)}}if(typeof maxit==="undefined")maxit=1e3;x0=numeric.clone(x0);var n=x0.length;var f0=f(x0),f1,df0;if(isNaN(f0))throw new Error("uncmin: f(x0) is a NaN!");var max=Math.max,norm2=numeric.norm2;tol=max(tol,numeric.epsilon);var step,g0,g1,H1=options.Hinv||numeric.identity(n);var dot=numeric.dot,inv=numeric.inv,sub=numeric.sub,add=numeric.add,ten=numeric.tensor,div=numeric.div,mul=numeric.mul;var all=numeric.all,isfinite=numeric.isFinite,neg=numeric.neg;var it=0,i,s,x1,y,Hy,Hs,ys,i0,t,nstep,t1,t2;var msg="";g0=gradient(x0);while(it<maxit){if(typeof callback==="function"){if(callback(it,x0,f0,g0,H1)){msg="Callback returned true";break}}if(!all(isfinite(g0))){msg="Gradient has Infinity or NaN";break}step=neg(dot(H1,g0));if(!all(isfinite(step))){msg="Search direction has Infinity or NaN";break}nstep=norm2(step);if(nstep<tol){msg="Newton step smaller than tol";break}t=1;df0=dot(g0,step);x1=x0;while(it<maxit){if(t*nstep<tol){break}s=mul(step,t);x1=add(x0,s);f1=f(x1);if(f1-f0>=.1*t*df0||isNaN(f1)){t*=.5;++it;continue}break}if(t*nstep<tol){msg="Line search step size smaller than tol";break}if(it===maxit){msg="maxit reached during line search";break}g1=gradient(x1);y=sub(g1,g0);ys=dot(y,s);Hy=dot(H1,y);H1=sub(add(H1,mul((ys+dot(y,Hy))/(ys*ys),ten(s,s))),div(add(ten(Hy,s),ten(s,Hy)),ys));x0=x1;f0=f1;g0=g1;++it}return{solution:x0,f:f0,gradient:g0,invHessian:H1,iterations:it,message:msg}};numeric.Dopri=function Dopri(x,y,f,ymid,iterations,msg,events){this.x=x;this.y=y;this.f=f;this.ymid=ymid;this.iterations=iterations;this.events=events;this.message=msg};numeric.Dopri.prototype._at=function _at(xi,j){function sqr(x){return x*x}var sol=this;var xs=sol.x;var ys=sol.y;var k1=sol.f;var ymid=sol.ymid;var n=xs.length;var x0,x1,xh,y0,y1,yh,xi;var floor=Math.floor,h;var c=.5;var add=numeric.add,mul=numeric.mul,sub=numeric.sub,p,q,w;x0=xs[j];x1=xs[j+1];y0=ys[j];y1=ys[j+1];h=x1-x0;xh=x0+c*h;yh=ymid[j];p=sub(k1[j],mul(y0,1/(x0-xh)+2/(x0-x1)));q=sub(k1[j+1],mul(y1,1/(x1-xh)+2/(x1-x0)));w=[sqr(xi-x1)*(xi-xh)/sqr(x0-x1)/(x0-xh),sqr(xi-x0)*sqr(xi-x1)/sqr(x0-xh)/sqr(x1-xh),sqr(xi-x0)*(xi-xh)/sqr(x1-x0)/(x1-xh),(xi-x0)*sqr(xi-x1)*(xi-xh)/sqr(x0-x1)/(x0-xh),(xi-x1)*sqr(xi-x0)*(xi-xh)/sqr(x0-x1)/(x1-xh)];return add(add(add(add(mul(y0,w[0]),mul(yh,w[1])),mul(y1,w[2])),mul(p,w[3])),mul(q,w[4]))};numeric.Dopri.prototype.at=function at(x){var i,j,k,floor=Math.floor;if(typeof x!=="number"){var n=x.length,ret=Array(n);for(i=n-1;i!==-1;--i){ret[i]=this.at(x[i])}return ret}var x0=this.x;i=0;j=x0.length-1;while(j-i>1){k=floor(.5*(i+j));if(x0[k]<=x)i=k;else j=k}return this._at(x,i)};numeric.dopri=function dopri(x0,x1,y0,f,tol,maxit,event){if(typeof tol==="undefined"){tol=1e-6}if(typeof maxit==="undefined"){maxit=1e3}var xs=[x0],ys=[y0],k1=[f(x0,y0)],k2,k3,k4,k5,k6,k7,ymid=[];var A2=1/5;var A3=[3/40,9/40];var A4=[44/45,-56/15,32/9];var A5=[19372/6561,-25360/2187,64448/6561,-212/729];var A6=[9017/3168,-355/33,46732/5247,49/176,-5103/18656];var b=[35/384,0,500/1113,125/192,-2187/6784,11/84];var bm=[.5*6025192743/30085553152,0,.5*51252292925/65400821598,.5*-2691868925/45128329728,.5*187940372067/1594534317056,.5*-1776094331/19743644256,.5*11237099/235043384];var c=[1/5,3/10,4/5,8/9,1,1];var e=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,1/40];var i=0,er,j;var h=(x1-x0)/10;var it=0;var add=numeric.add,mul=numeric.mul,y1,erinf;var max=Math.max,min=Math.min,abs=Math.abs,norminf=numeric.norminf,pow=Math.pow;var any=numeric.any,lt=numeric.lt,and=numeric.and,sub=numeric.sub;var e0,e1,ev;var ret=new numeric.Dopri(xs,ys,k1,ymid,-1,"");if(typeof event==="function")e0=event(x0,y0);while(x0<x1&&it<maxit){++it;if(x0+h>x1)h=x1-x0;k2=f(x0+c[0]*h,add(y0,mul(A2*h,k1[i])));k3=f(x0+c[1]*h,add(add(y0,mul(A3[0]*h,k1[i])),mul(A3[1]*h,k2)));k4=f(x0+c[2]*h,add(add(add(y0,mul(A4[0]*h,k1[i])),mul(A4[1]*h,k2)),mul(A4[2]*h,k3)));k5=f(x0+c[3]*h,add(add(add(add(y0,mul(A5[0]*h,k1[i])),mul(A5[1]*h,k2)),mul(A5[2]*h,k3)),mul(A5[3]*h,k4)));k6=f(x0+c[4]*h,add(add(add(add(add(y0,mul(A6[0]*h,k1[i])),mul(A6[1]*h,k2)),mul(A6[2]*h,k3)),mul(A6[3]*h,k4)),mul(A6[4]*h,k5)));y1=add(add(add(add(add(y0,mul(k1[i],h*b[0])),mul(k3,h*b[2])),mul(k4,h*b[3])),mul(k5,h*b[4])),mul(k6,h*b[5]));k7=f(x0+h,y1);er=add(add(add(add(add(mul(k1[i],h*e[0]),mul(k3,h*e[2])),mul(k4,h*e[3])),mul(k5,h*e[4])),mul(k6,h*e[5])),mul(k7,h*e[6]));if(typeof er==="number")erinf=abs(er);else erinf=norminf(er);if(erinf>tol){h=.2*h*pow(tol/erinf,.25);if(x0+h===x0){ret.msg="Step size became too small";break}continue}ymid[i]=add(add(add(add(add(add(y0,mul(k1[i],h*bm[0])),mul(k3,h*bm[2])),mul(k4,h*bm[3])),mul(k5,h*bm[4])),mul(k6,h*bm[5])),mul(k7,h*bm[6]));++i;xs[i]=x0+h;ys[i]=y1;k1[i]=k7;if(typeof event==="function"){var yi,xl=x0,xr=x0+.5*h,xi;e1=event(xr,ymid[i-1]);ev=and(lt(e0,0),lt(0,e1));if(!any(ev)){xl=xr;xr=x0+h;e0=e1;e1=event(xr,y1);ev=and(lt(e0,0),lt(0,e1))}if(any(ev)){var xc,yc,en,ei;var side=0,sl=1,sr=1;while(1){if(typeof e0==="number")xi=(sr*e1*xl-sl*e0*xr)/(sr*e1-sl*e0);else{xi=xr;for(j=e0.length-1;j!==-1;--j){if(e0[j]<0&&e1[j]>0)xi=min(xi,(sr*e1[j]*xl-sl*e0[j]*xr)/(sr*e1[j]-sl*e0[j]))}}if(xi<=xl||xi>=xr)break;yi=ret._at(xi,i-1);ei=event(xi,yi);en=and(lt(e0,0),lt(0,ei));if(any(en)){xr=xi;e1=ei;ev=en;sr=1;if(side===-1)sl*=.5;else sl=1;side=-1}else{xl=xi;e0=ei;sl=1;if(side===1)sr*=.5;else sr=1;side=1}}y1=ret._at(.5*(x0+xi),i-1);ret.f[i]=f(xi,yi);ret.x[i]=xi;ret.y[i]=yi;ret.ymid[i-1]=y1;ret.events=ev;ret.iterations=it;return ret}}x0+=h;y0=y1;e0=e1;h=min(.8*h*pow(tol/erinf,.25),4*h)}ret.iterations=it;return ret};numeric.LU=function(A,fast){fast=fast||false;var abs=Math.abs;var i,j,k,absAjk,Akk,Ak,Pk,Ai;var max;var n=A.length,n1=n-1;var P=new Array(n);if(!fast)A=numeric.clone(A);for(k=0;k<n;++k){Pk=k;Ak=A[k];max=abs(Ak[k]);for(j=k+1;j<n;++j){absAjk=abs(A[j][k]);if(max<absAjk){max=absAjk;Pk=j}}P[k]=Pk;if(Pk!=k){A[k]=A[Pk];A[Pk]=Ak;Ak=A[k]}Akk=Ak[k];for(i=k+1;i<n;++i){A[i][k]/=Akk}for(i=k+1;i<n;++i){Ai=A[i];for(j=k+1;j<n1;++j){Ai[j]-=Ai[k]*Ak[j];++j;Ai[j]-=Ai[k]*Ak[j]}if(j===n1)Ai[j]-=Ai[k]*Ak[j]}}return{LU:A,P:P}};numeric.LUsolve=function LUsolve(LUP,b){var i,j;var LU=LUP.LU;var n=LU.length;var x=numeric.clone(b);var P=LUP.P;var Pi,LUi,LUii,tmp;for(i=n-1;i!==-1;--i)x[i]=b[i];for(i=0;i<n;++i){Pi=P[i];if(P[i]!==i){tmp=x[i];x[i]=x[Pi];x[Pi]=tmp}LUi=LU[i];for(j=0;j<i;++j){x[i]-=x[j]*LUi[j]}}for(i=n-1;i>=0;--i){LUi=LU[i];for(j=i+1;j<n;++j){x[i]-=x[j]*LUi[j]}x[i]/=LUi[i]}return x};numeric.solve=function solve(A,b,fast){return numeric.LUsolve(numeric.LU(A,fast),b)};numeric.echelonize=function echelonize(A){var s=numeric.dim(A),m=s[0],n=s[1];var I=numeric.identity(m);var P=Array(m);var i,j,k,l,Ai,Ii,Z,a;var abs=Math.abs;var diveq=numeric.diveq;A=numeric.clone(A);for(i=0;i<m;++i){k=0;Ai=A[i];Ii=I[i];for(j=1;j<n;++j)if(abs(Ai[k])<abs(Ai[j]))k=j;P[i]=k;diveq(Ii,Ai[k]);diveq(Ai,Ai[k]);for(j=0;j<m;++j)if(j!==i){Z=A[j];a=Z[k];for(l=n-1;l!==-1;--l)Z[l]-=Ai[l]*a;Z=I[j];for(l=m-1;l!==-1;--l)Z[l]-=Ii[l]*a}}return{I:I,A:A,P:P}};numeric.__solveLP=function __solveLP(c,A,b,tol,maxit,x,flag){var sum=numeric.sum,log=numeric.log,mul=numeric.mul,sub=numeric.sub,dot=numeric.dot,div=numeric.div,add=numeric.add;var m=c.length,n=b.length,y;var unbounded=false,cb,i0=0;var alpha=1;var f0,df0,AT=numeric.transpose(A),svd=numeric.svd,transpose=numeric.transpose,leq=numeric.leq,sqrt=Math.sqrt,abs=Math.abs;var muleq=numeric.muleq;var norm=numeric.norminf,any=numeric.any,min=Math.min;var all=numeric.all,gt=numeric.gt;var p=Array(m),A0=Array(n),e=numeric.rep([n],1),H;var solve=numeric.solve,z=sub(b,dot(A,x)),count;var dotcc=dot(c,c);var g;for(count=i0;count<maxit;++count){var i,j,d;for(i=n-1;i!==-1;--i)A0[i]=div(A[i],z[i]);var A1=transpose(A0);for(i=m-1;i!==-1;--i)p[i]=sum(A1[i]);alpha=.25*abs(dotcc/dot(c,p));var a1=100*sqrt(dotcc/dot(p,p));if(!isFinite(alpha)||alpha>a1)alpha=a1;g=add(c,mul(alpha,p));H=dot(A1,A0);for(i=m-1;i!==-1;--i)H[i][i]+=1;d=solve(H,div(g,alpha),true);var t0=div(z,dot(A,d));var t=1;for(i=n-1;i!==-1;--i)if(t0[i]<0)t=min(t,-.999*t0[i]);y=sub(x,mul(d,t));z=sub(b,dot(A,y));if(!all(gt(z,0)))return{solution:x,message:"",iterations:count};x=y;if(alpha<tol)return{solution:y,message:"",iterations:count};if(flag){var s=dot(c,g),Ag=dot(A,g);unbounded=true;for(i=n-1;i!==-1;--i)if(s*Ag[i]<0){unbounded=false;break}}else{if(x[m-1]>=0)unbounded=false;else unbounded=true}if(unbounded)return{solution:y,message:"Unbounded",iterations:count}}return{solution:x,message:"maximum iteration count exceeded",iterations:count}};numeric._solveLP=function _solveLP(c,A,b,tol,maxit){var m=c.length,n=b.length,y;var sum=numeric.sum,log=numeric.log,mul=numeric.mul,sub=numeric.sub,dot=numeric.dot,div=numeric.div,add=numeric.add;var c0=numeric.rep([m],0).concat([1]);var J=numeric.rep([n,1],-1);var A0=numeric.blockMatrix([[A,J]]);var b0=b;var y=numeric.rep([m],0).concat(Math.max(0,numeric.sup(numeric.neg(b)))+1);var x0=numeric.__solveLP(c0,A0,b0,tol,maxit,y,false);var x=numeric.clone(x0.solution);x.length=m;var foo=numeric.inf(sub(b,dot(A,x)));if(foo<0){return{solution:NaN,message:"Infeasible",iterations:x0.iterations}}var ret=numeric.__solveLP(c,A,b,tol,maxit-x0.iterations,x,true);ret.iterations+=x0.iterations;return ret};numeric.solveLP=function solveLP(c,A,b,Aeq,beq,tol,maxit){if(typeof maxit==="undefined")maxit=1e3;if(typeof tol==="undefined")tol=numeric.epsilon;if(typeof Aeq==="undefined")return numeric._solveLP(c,A,b,tol,maxit);var m=Aeq.length,n=Aeq[0].length,o=A.length;var B=numeric.echelonize(Aeq);var flags=numeric.rep([n],0);var P=B.P;var Q=[];var i;for(i=P.length-1;i!==-1;--i)flags[P[i]]=1;for(i=n-1;i!==-1;--i)if(flags[i]===0)Q.push(i);var g=numeric.getRange;var I=numeric.linspace(0,m-1),J=numeric.linspace(0,o-1);var Aeq2=g(Aeq,I,Q),A1=g(A,J,P),A2=g(A,J,Q),dot=numeric.dot,sub=numeric.sub;var A3=dot(A1,B.I);var A4=sub(A2,dot(A3,Aeq2)),b4=sub(b,dot(A3,beq));var c1=Array(P.length),c2=Array(Q.length);for(i=P.length-1;i!==-1;--i)c1[i]=c[P[i]];for(i=Q.length-1;i!==-1;--i)c2[i]=c[Q[i]];var c4=sub(c2,dot(c1,dot(B.I,Aeq2)));var S=numeric._solveLP(c4,A4,b4,tol,maxit);var x2=S.solution;if(x2!==x2)return S;var x1=dot(B.I,sub(beq,dot(Aeq2,x2)));var x=Array(c.length);for(i=P.length-1;i!==-1;--i)x[P[i]]=x1[i];for(i=Q.length-1;i!==-1;--i)x[Q[i]]=x2[i];return{solution:x,message:S.message,iterations:S.iterations}};numeric.MPStoLP=function MPStoLP(MPS){if(MPS instanceof String){MPS.split("\n")}var state=0;var states=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"];var n=MPS.length;var i,j,z,N=0,rows={},sign=[],rl=0,vars={},nv=0;var name;var c=[],A=[],b=[];function err(e){throw new Error("MPStoLP: "+e+"\nLine "+i+": "+MPS[i]+"\nCurrent state: "+states[state]+"\n")}for(i=0;i<n;++i){z=MPS[i];var w0=z.match(/\S*/g);var w=[];for(j=0;j<w0.length;++j)if(w0[j]!=="")w.push(w0[j]);if(w.length===0)continue;for(j=0;j<states.length;++j)if(z.substr(0,states[j].length)===states[j])break;if(j<states.length){state=j;if(j===1){name=w[1]}if(j===6)return{name:name,c:c,A:numeric.transpose(A),b:b,rows:rows,vars:vars};continue}switch(state){case 0:case 1:err("Unexpected line");case 2:switch(w[0]){case"N":if(N===0)N=w[1];else err("Two or more N rows");break;case"L":rows[w[1]]=rl;sign[rl]=1;b[rl]=0;++rl;break;case"G":rows[w[1]]=rl;sign[rl]=-1;b[rl]=0;++rl;break;case"E":rows[w[1]]=rl;sign[rl]=0;b[rl]=0;++rl;break;default:err("Parse error "+numeric.prettyPrint(w))}break;case 3:if(!vars.hasOwnProperty(w[0])){vars[w[0]]=nv;c[nv]=0;A[nv]=numeric.rep([rl],0);++nv}var p=vars[w[0]];for(j=1;j<w.length;j+=2){if(w[j]===N){c[p]=parseFloat(w[j+1]);continue}var q=rows[w[j]];A[p][q]=(sign[q]<0?-1:1)*parseFloat(w[j+1])}break;case 4:for(j=1;j<w.length;j+=2)b[rows[w[j]]]=(sign[rows[w[j]]]<0?-1:1)*parseFloat(w[j+1]);break;case 5:break;case 6:err("Internal error")}}err("Reached end of file without ENDATA")};numeric.seedrandom={pow:Math.pow,random:Math.random};(function(pool,math,width,chunks,significance,overflow,startdenom){math["seedrandom"]=function seedrandom(seed,use_entropy){var key=[];var arc4;seed=mixkey(flatten(use_entropy?[seed,pool]:arguments.length?seed:[(new Date).getTime(),pool,window],3),key);arc4=new ARC4(key);mixkey(arc4.S,pool);math["random"]=function random(){var n=arc4.g(chunks);var d=startdenom;var x=0;while(n<significance){n=(n+x)*width;d*=width;x=arc4.g(1)}while(n>=overflow){n/=2;d/=2;x>>>=1}return(n+x)/d};return seed};function ARC4(key){var t,u,me=this,keylen=key.length;var i=0,j=me.i=me.j=me.m=0;me.S=[];me.c=[];if(!keylen){key=[keylen++]}while(i<width){me.S[i]=i++}for(i=0;i<width;i++){t=me.S[i];j=lowbits(j+t+key[i%keylen]);u=me.S[j];me.S[i]=u;me.S[j]=t}me.g=function getnext(count){var s=me.S;var i=lowbits(me.i+1);var t=s[i];var j=lowbits(me.j+t);var u=s[j];s[i]=u;s[j]=t;var r=s[lowbits(t+u)];while(--count){i=lowbits(i+1);t=s[i];j=lowbits(j+t);u=s[j];s[i]=u;s[j]=t;r=r*width+s[lowbits(t+u)]}me.i=i;me.j=j;return r};me.g(width)}function flatten(obj,depth,result,prop,typ){result=[];typ=typeof obj;if(depth&&typ=="object"){for(prop in obj){if(prop.indexOf("S")<5){try{result.push(flatten(obj[prop],depth-1))}catch(e){}}}}return result.length?result:obj+(typ!="string"?"\x00":"")}function mixkey(seed,key,smear,j){seed+="";smear=0;for(j=0;j<seed.length;j++){key[lowbits(j)]=lowbits((smear^=key[lowbits(j)]*19)+seed.charCodeAt(j))}seed="";for(j in key){seed+=String.fromCharCode(key[j])}return seed}function lowbits(n){return n&width-1}startdenom=math.pow(width,chunks);significance=math.pow(2,significance);overflow=significance*2;mixkey(math.random(),pool)})([],numeric.seedrandom,256,6,52);(function(exports){function base0to1(A){if(typeof A!=="object"){return A}var ret=[],i,n=A.length;for(i=0;i<n;i++)ret[i+1]=base0to1(A[i]);return ret}function base1to0(A){if(typeof A!=="object"){return A}var ret=[],i,n=A.length;for(i=1;i<n;i++)ret[i-1]=base1to0(A[i]);return ret}function dpori(a,lda,n){var i,j,k,kp1,t;for(k=1;k<=n;k=k+1){a[k][k]=1/a[k][k];t=-a[k][k];for(i=1;i<k;i=i+1){a[i][k]=t*a[i][k]}kp1=k+1;if(n<kp1){break}for(j=kp1;j<=n;j=j+1){t=a[k][j];a[k][j]=0;for(i=1;i<=k;i=i+1){a[i][j]=a[i][j]+t*a[i][k]}}}}function dposl(a,lda,n,b){var i,k,kb,t;for(k=1;k<=n;k=k+1){t=0;for(i=1;i<k;i=i+1){t=t+a[i][k]*b[i]}b[k]=(b[k]-t)/a[k][k]}for(kb=1;kb<=n;kb=kb+1){k=n+1-kb;b[k]=b[k]/a[k][k];t=-b[k];for(i=1;i<k;i=i+1){b[i]=b[i]+t*a[i][k]}}}function dpofa(a,lda,n,info){var i,j,jm1,k,t,s;for(j=1;j<=n;j=j+1){info[1]=j;s=0;jm1=j-1;if(jm1<1){s=a[j][j]-s;if(s<=0){break}a[j][j]=Math.sqrt(s)}else{for(k=1;k<=jm1;k=k+1){t=a[k][j];for(i=1;i<k;i=i+1){t=t-a[i][j]*a[i][k]}t=t/a[k][k];a[k][j]=t;s=s+t*t}s=a[j][j]-s;if(s<=0){break}a[j][j]=Math.sqrt(s)}info[1]=0}}function qpgen2(dmat,dvec,fddmat,n,sol,crval,amat,bvec,fdamat,q,meq,iact,nact,iter,work,ierr){var i,j,l,l1,info,it1,iwzv,iwrv,iwrm,iwsv,iwuv,nvl,r,iwnbv,temp,sum,t1,tt,gc,gs,nu,t1inf,t2min,vsmall,tmpa,tmpb,go;r=Math.min(n,q);l=2*n+r*(r+5)/2+2*q+1;vsmall=1e-60;do{vsmall=vsmall+vsmall;tmpa=1+.1*vsmall;tmpb=1+.2*vsmall}while(tmpa<=1||tmpb<=1);for(i=1;i<=n;i=i+1){work[i]=dvec[i]}for(i=n+1;i<=l;i=i+1){work[i]=0}for(i=1;i<=q;i=i+1){iact[i]=0}info=[];if(ierr[1]===0){dpofa(dmat,fddmat,n,info);if(info[1]!==0){ierr[1]=2;return}dposl(dmat,fddmat,n,dvec);dpori(dmat,fddmat,n)}else{for(j=1;j<=n;j=j+1){sol[j]=0;for(i=1;i<=j;i=i+1){sol[j]=sol[j]+dmat[i][j]*dvec[i]}}for(j=1;j<=n;j=j+1){dvec[j]=0;for(i=j;i<=n;i=i+1){dvec[j]=dvec[j]+dmat[j][i]*sol[i]}}}crval[1]=0;for(j=1;j<=n;j=j+1){sol[j]=dvec[j];crval[1]=crval[1]+work[j]*sol[j];work[j]=0;for(i=j+1;i<=n;i=i+1){dmat[i][j]=0}}crval[1]=-crval[1]/2;ierr[1]=0;iwzv=n;iwrv=iwzv+n;iwuv=iwrv+r;iwrm=iwuv+r+1;iwsv=iwrm+r*(r+1)/2;iwnbv=iwsv+q;for(i=1;i<=q;i=i+1){sum=0;for(j=1;j<=n;j=j+1){sum=sum+amat[j][i]*amat[j][i]}work[iwnbv+i]=Math.sqrt(sum)}nact=0;iter[1]=0;iter[2]=0;function fn_goto_50(){iter[1]=iter[1]+1;l=iwsv;for(i=1;i<=q;i=i+1){l=l+1;sum=-bvec[i];for(j=1;j<=n;j=j+1){sum=sum+amat[j][i]*sol[j]}if(Math.abs(sum)<vsmall){sum=0}if(i>meq){work[l]=sum}else{work[l]=-Math.abs(sum);if(sum>0){for(j=1;j<=n;j=j+1){amat[j][i]=-amat[j][i]}bvec[i]=-bvec[i]}}}for(i=1;i<=nact;i=i+1){work[iwsv+iact[i]]=0}nvl=0;temp=0;for(i=1;i<=q;i=i+1){if(work[iwsv+i]<temp*work[iwnbv+i]){nvl=i;temp=work[iwsv+i]/work[iwnbv+i]}}if(nvl===0){return 999}return 0}function fn_goto_55(){for(i=1;i<=n;i=i+1){sum=0;for(j=1;j<=n;j=j+1){sum=sum+dmat[j][i]*amat[j][nvl]}work[i]=sum}l1=iwzv;for(i=1;i<=n;i=i+1){work[l1+i]=0}for(j=nact+1;j<=n;j=j+1){for(i=1;i<=n;i=i+1){work[l1+i]=work[l1+i]+dmat[i][j]*work[j]}}t1inf=true;for(i=nact;i>=1;i=i-1){sum=work[i];l=iwrm+i*(i+3)/2;l1=l-i;for(j=i+1;j<=nact;j=j+1){sum=sum-work[l]*work[iwrv+j];l=l+j}sum=sum/work[l1];work[iwrv+i]=sum;if(iact[i]<meq){break}if(sum<0){break}t1inf=false;it1=i}if(!t1inf){t1=work[iwuv+it1]/work[iwrv+it1];for(i=1;i<=nact;i=i+1){if(iact[i]<meq){break}if(work[iwrv+i]<0){break}temp=work[iwuv+i]/work[iwrv+i];if(temp<t1){t1=temp;it1=i}}}sum=0;for(i=iwzv+1;i<=iwzv+n;i=i+1){sum=sum+work[i]*work[i]}if(Math.abs(sum)<=vsmall){if(t1inf){ierr[1]=1;return 999}else{for(i=1;i<=nact;i=i+1){work[iwuv+i]=work[iwuv+i]-t1*work[iwrv+i]}work[iwuv+nact+1]=work[iwuv+nact+1]+t1;return 700}}else{sum=0;for(i=1;i<=n;i=i+1){sum=sum+work[iwzv+i]*amat[i][nvl]}tt=-work[iwsv+nvl]/sum;t2min=true;if(!t1inf){if(t1<tt){tt=t1;t2min=false}}for(i=1;i<=n;i=i+1){sol[i]=sol[i]+tt*work[iwzv+i];if(Math.abs(sol[i])<vsmall){sol[i]=0}}crval[1]=crval[1]+tt*sum*(tt/2+work[iwuv+nact+1]);for(i=1;i<=nact;i=i+1){work[iwuv+i]=work[iwuv+i]-tt*work[iwrv+i]}work[iwuv+nact+1]=work[iwuv+nact+1]+tt;if(t2min){nact=nact+1;iact[nact]=nvl;l=iwrm+(nact-1)*nact/2+1;for(i=1;i<=nact-1;i=i+1){work[l]=work[i];l=l+1}if(nact===n){work[l]=work[n]}else{for(i=n;i>=nact+1;i=i-1){if(work[i]===0){break}gc=Math.max(Math.abs(work[i-1]),Math.abs(work[i]));gs=Math.min(Math.abs(work[i-1]),Math.abs(work[i]));if(work[i-1]>=0){temp=Math.abs(gc*Math.sqrt(1+gs*gs/(gc*gc)))}else{temp=-Math.abs(gc*Math.sqrt(1+gs*gs/(gc*gc)))}gc=work[i-1]/temp;gs=work[i]/temp;if(gc===1){break}if(gc===0){work[i-1]=gs*temp;for(j=1;j<=n;j=j+1){temp=dmat[j][i-1];dmat[j][i-1]=dmat[j][i];dmat[j][i]=temp}}else{work[i-1]=temp;nu=gs/(1+gc);for(j=1;j<=n;j=j+1){temp=gc*dmat[j][i-1]+gs*dmat[j][i];dmat[j][i]=nu*(dmat[j][i-1]+temp)-dmat[j][i];dmat[j][i-1]=temp}}}work[l]=work[nact]}}else{sum=-bvec[nvl];for(j=1;j<=n;j=j+1){sum=sum+sol[j]*amat[j][nvl]}if(nvl>meq){work[iwsv+nvl]=sum}else{work[iwsv+nvl]=-Math.abs(sum);if(sum>0){for(j=1;j<=n;j=j+1){amat[j][nvl]=-amat[j][nvl]}bvec[nvl]=-bvec[nvl]}}return 700}}return 0}function fn_goto_797(){l=iwrm+it1*(it1+1)/2+1;l1=l+it1;if(work[l1]===0){return 798}gc=Math.max(Math.abs(work[l1-1]),Math.abs(work[l1]));gs=Math.min(Math.abs(work[l1-1]),Math.abs(work[l1]));if(work[l1-1]>=0){temp=Math.abs(gc*Math.sqrt(1+gs*gs/(gc*gc)))}else{temp=-Math.abs(gc*Math.sqrt(1+gs*gs/(gc*gc)))}gc=work[l1-1]/temp;gs=work[l1]/temp;if(gc===1){return 798}if(gc===0){for(i=it1+1;i<=nact;i=i+1){temp=work[l1-1];work[l1-1]=work[l1];work[l1]=temp;l1=l1+i}for(i=1;i<=n;i=i+1){temp=dmat[i][it1];dmat[i][it1]=dmat[i][it1+1];dmat[i][it1+1]=temp}}else{nu=gs/(1+gc);for(i=it1+1;i<=nact;i=i+1){temp=gc*work[l1-1]+gs*work[l1];work[l1]=nu*(work[l1-1]+temp)-work[l1];work[l1-1]=temp;l1=l1+i}for(i=1;i<=n;i=i+1){temp=gc*dmat[i][it1]+gs*dmat[i][it1+1];dmat[i][it1+1]=nu*(dmat[i][it1]+temp)-dmat[i][it1+1];dmat[i][it1]=temp}}return 0}function fn_goto_798(){l1=l-it1;for(i=1;i<=it1;i=i+1){work[l1]=work[l];l=l+1;l1=l1+1}work[iwuv+it1]=work[iwuv+it1+1];iact[it1]=iact[it1+1];it1=it1+1;if(it1<nact){return 797}return 0}function fn_goto_799(){work[iwuv+nact]=work[iwuv+nact+1];work[iwuv+nact+1]=0;iact[nact]=0;nact=nact-1;iter[2]=iter[2]+1;return 0}go=0;while(true){go=fn_goto_50();if(go===999){return}while(true){go=fn_goto_55();if(go===0){break}if(go===999){return}if(go===700){if(it1===nact){fn_goto_799()}else{while(true){fn_goto_797();go=fn_goto_798();if(go!==797){break}}fn_goto_799()}}}}}function solveQP(Dmat,dvec,Amat,bvec,meq,factorized){Dmat=base0to1(Dmat);dvec=base0to1(dvec);Amat=base0to1(Amat);var i,n,q,nact,r,crval=[],iact=[],sol=[],work=[],iter=[],message;meq=meq||0;factorized=factorized?base0to1(factorized):[undefined,0];bvec=bvec?base0to1(bvec):[];n=Dmat.length-1;q=Amat[1].length-1;if(!bvec){for(i=1;i<=q;i=i+1){bvec[i]=0}}for(i=1;i<=q;i=i+1){iact[i]=0}nact=0;r=Math.min(n,q);for(i=1;i<=n;i=i+1){sol[i]=0}crval[1]=0;for(i=1;i<=2*n+r*(r+5)/2+2*q+1;i=i+1){work[i]=0}for(i=1;i<=2;i=i+1){iter[i]=0}qpgen2(Dmat,dvec,n,n,sol,crval,Amat,bvec,n,q,meq,iact,nact,iter,work,factorized);message="";if(factorized[1]===1){message="constraints are inconsistent, no solution!"}if(factorized[1]===2){message="matrix D in quadratic function is not positive definite!"}return{solution:base1to0(sol),value:base1to0(crval),unconstrained_solution:base1to0(dvec),iterations:base1to0(iter),iact:base1to0(iact),message:message}}exports.solveQP=solveQP})(numeric);numeric.svd=function svd(A){var temp;var prec=numeric.epsilon;var tolerance=1e-64/prec;var itmax=50;var c=0;var i=0;var j=0;var k=0;var l=0;var u=numeric.clone(A);var m=u.length;var n=u[0].length;if(m<n)throw"Need more rows than columns";
var e=new Array(n);var q=new Array(n);for(i=0;i<n;i++)e[i]=q[i]=0;var v=numeric.rep([n,n],0);function pythag(a,b){a=Math.abs(a);b=Math.abs(b);if(a>b)return a*Math.sqrt(1+b*b/a/a);else if(b==0)return a;return b*Math.sqrt(1+a*a/b/b)}var f=0;var g=0;var h=0;var x=0;var y=0;var z=0;var s=0;for(i=0;i<n;i++){e[i]=g;s=0;l=i+1;for(j=i;j<m;j++)s+=u[j][i]*u[j][i];if(s<=tolerance)g=0;else{f=u[i][i];g=Math.sqrt(s);if(f>=0)g=-g;h=f*g-s;u[i][i]=f-g;for(j=l;j<n;j++){s=0;for(k=i;k<m;k++)s+=u[k][i]*u[k][j];f=s/h;for(k=i;k<m;k++)u[k][j]+=f*u[k][i]}}q[i]=g;s=0;for(j=l;j<n;j++)s=s+u[i][j]*u[i][j];if(s<=tolerance)g=0;else{f=u[i][i+1];g=Math.sqrt(s);if(f>=0)g=-g;h=f*g-s;u[i][i+1]=f-g;for(j=l;j<n;j++)e[j]=u[i][j]/h;for(j=l;j<m;j++){s=0;for(k=l;k<n;k++)s+=u[j][k]*u[i][k];for(k=l;k<n;k++)u[j][k]+=s*e[k]}}y=Math.abs(q[i])+Math.abs(e[i]);if(y>x)x=y}for(i=n-1;i!=-1;i+=-1){if(g!=0){h=g*u[i][i+1];for(j=l;j<n;j++)v[j][i]=u[i][j]/h;for(j=l;j<n;j++){s=0;for(k=l;k<n;k++)s+=u[i][k]*v[k][j];for(k=l;k<n;k++)v[k][j]+=s*v[k][i]}}for(j=l;j<n;j++){v[i][j]=0;v[j][i]=0}v[i][i]=1;g=e[i];l=i}for(i=n-1;i!=-1;i+=-1){l=i+1;g=q[i];for(j=l;j<n;j++)u[i][j]=0;if(g!=0){h=u[i][i]*g;for(j=l;j<n;j++){s=0;for(k=l;k<m;k++)s+=u[k][i]*u[k][j];f=s/h;for(k=i;k<m;k++)u[k][j]+=f*u[k][i]}for(j=i;j<m;j++)u[j][i]=u[j][i]/g}else for(j=i;j<m;j++)u[j][i]=0;u[i][i]+=1}prec=prec*x;for(k=n-1;k!=-1;k+=-1){for(var iteration=0;iteration<itmax;iteration++){var test_convergence=false;for(l=k;l!=-1;l+=-1){if(Math.abs(e[l])<=prec){test_convergence=true;break}if(Math.abs(q[l-1])<=prec)break}if(!test_convergence){c=0;s=1;var l1=l-1;for(i=l;i<k+1;i++){f=s*e[i];e[i]=c*e[i];if(Math.abs(f)<=prec)break;g=q[i];h=pythag(f,g);q[i]=h;c=g/h;s=-f/h;for(j=0;j<m;j++){y=u[j][l1];z=u[j][i];u[j][l1]=y*c+z*s;u[j][i]=-y*s+z*c}}}z=q[k];if(l==k){if(z<0){q[k]=-z;for(j=0;j<n;j++)v[j][k]=-v[j][k]}break}if(iteration>=itmax-1)throw"Error: no convergence.";x=q[l];y=q[k-1];g=e[k-1];h=e[k];f=((y-z)*(y+z)+(g-h)*(g+h))/(2*h*y);g=pythag(f,1);if(f<0)f=((x-z)*(x+z)+h*(y/(f-g)-h))/x;else f=((x-z)*(x+z)+h*(y/(f+g)-h))/x;c=1;s=1;for(i=l+1;i<k+1;i++){g=e[i];y=q[i];h=s*g;g=c*g;z=pythag(f,h);e[i-1]=z;c=f/z;s=h/z;f=x*c+g*s;g=-x*s+g*c;h=y*s;y=y*c;for(j=0;j<n;j++){x=v[j][i-1];z=v[j][i];v[j][i-1]=x*c+z*s;v[j][i]=-x*s+z*c}z=pythag(f,h);q[i-1]=z;c=f/z;s=h/z;f=c*g+s*y;x=-s*g+c*y;for(j=0;j<m;j++){y=u[j][i-1];z=u[j][i];u[j][i-1]=y*c+z*s;u[j][i]=-y*s+z*c}}e[l]=0;e[k]=f;q[k]=x}}for(i=0;i<q.length;i++)if(q[i]<prec)q[i]=0;for(i=0;i<n;i++){for(j=i-1;j>=0;j--){if(q[j]<q[i]){c=q[j];q[j]=q[i];q[i]=c;for(k=0;k<u.length;k++){temp=u[k][i];u[k][i]=u[k][j];u[k][j]=temp}for(k=0;k<v.length;k++){temp=v[k][i];v[k][i]=v[k][j];v[k][j]=temp}i=j}}}return{U:u,S:q,V:v}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[1])(1)});