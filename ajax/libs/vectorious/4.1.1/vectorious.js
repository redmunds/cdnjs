!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.vectorious=t()}}(function(){return function t(r,e,n){function a(i,s){if(!e[i]){if(!r[i]){var h="function"==typeof require&&require;if(!s&&h)return h(i,!0);if(o)return o(i,!0);var p=new Error("Cannot find module '"+i+"'");throw p.code="MODULE_NOT_FOUND",p}var u=e[i]={exports:{}};r[i][0].call(u.exports,function(t){var e=r[i][1][t];return a(e?e:t)},u,u.exports,t,r,e,n)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(t,r,e){!function(){"use strict";function e(t,r){if(this.type=Float64Array,this.shape=[],t&&t.buffer&&!(t instanceof n)&&"[object ArrayBuffer]"===Object.prototype.toString.call(t.buffer)&&r.shape){if(t.length!==r.shape[0]*r.shape[1])throw new Error("Shape does not match typed array dimensions.");this.shape=r.shape,this.data=t,this.type=t.constructor}else{if("[object Array]"===Object.prototype.toString.call(t))return e.fromArray(t);t instanceof n?(this.shape=r&&r.shape?r.shape:[t.length,1],this.data=new t.type(t.data),this.type=t.type):t instanceof e&&(this.shape=[t.shape[0],t.shape[1]],this.data=new t.type(t.data),this.type=t.type)}}var n=t("./vector");e.fromTypedArray=function(t,r){var n=Object.create(e.prototype);return n.shape=r,n.data=t,n.type=t.constructor,n},e.fromArray=function(t){var r,n,a=[];a[0]=t.length,a[1]=t[0].length,n=a[1],r=new Float64Array(a[0]*a[1]);for(var o=0;o<a[0];++o)for(var i=0;i<a[1];++i)r[o*n+i]=t[o][i];return e.fromTypedArray(r,a)},e.add=function(t,r){return new e(t).add(r)},e.prototype.add=function(t){var r=this.shape[0],e=this.shape[1],n=this.data,a=t.data;if(r!==t.shape[0]||e!==t.shape[1])throw new Error("sizes do not match!");var o;for(o=0;r*e>o;o++)n[o]+=a[o];return this},e.subtract=function(t,r){return new e(t).subtract(r)},e.prototype.subtract=function(t){var r=this.shape[0],e=this.shape[1],n=this.data,a=t.data;if(r!==t.shape[0]||e!==t.shape[1])throw new Error("sizes do not match");var o;for(o=0;r*e>o;o++)n[o]-=a[o];return this},e.scale=function(t,r){return new e(t).scale(r)},e.prototype.scale=function(t){var r,e=this.shape[0],n=this.shape[1],a=this.data;for(r=0;e*n>r;r++)a[r]*=t;return this},e.zeros=function(t,r,n){if(0>=t||0>=r)throw new Error("invalid size");n=n?n:Float64Array;for(var a=new n(t*r),o=0;t*r>o;o++)a[o]=0;return e.fromTypedArray(a,[t,r])},e.ones=function(t,r,n){if(0>=t||0>=r)throw new Error("invalid size");n=n?n:Float64Array;for(var a=new n(t*r),o=0;t*r>o;o++)a[o]=1;return e.fromTypedArray(a,[t,r])},e.random=function(t,r,n){n=n?n:Float64Array;var a,o=new n(t*r);for(a=0;t*r>a;a++)o[a]=Math.random();return e.fromTypedArray(o,[t,r])},e.multiply=function(t,r){return t.multiply(r)},e.prototype.multiply=function(t){var r=this.shape[0],n=this.shape[1],a=t.shape[0],o=t.shape[1],i=this.data,s=t.data;if(n!==a)throw new Error("sizes do not match");for(var h=new this.type(r*o),p=0;r>p;p++)for(var u=0;o>u;u++){for(var f=0,d=0;n>d;d++)f+=i[p*n+d]*s[u+d*o];h[p*o+u]=f}return e.fromTypedArray(h,[r,o])},e.transpose=function(t){return new e(t).transpose()},e.prototype.transpose=function(){var t,r,n=this.shape[0],a=this.shape[1];if(n===a){for(t=0;n-1>t;t++)for(r=t+1;n>r;r++){var o=this.data[r*n+t];this.data[r*n+t]=this.data[t*n+r],this.data[t*n+r]=o}return this}var i=new this.type(a*n);for(t=0;n>t;t++)for(r=0;a>r;r++)i[r*n+t]=this.data[t*a+r];return e.fromTypedArray(i,[a,n])},e.prototype.inverse=function(){var t=this.shape[0],r=this.shape[1];if(t!==r)throw new Error("invalid dimensions");var n,a,o=e.identity(t),i=e.augment(this,o),s=i.gauss(),h=e.zeros(t,r),p=e.zeros(t,r),u=s.shape[1];for(n=0;t>n;n++)for(a=0;u>a;a++)r>a?h.set(n,a,s.get(n,a)):p.set(n,a-t,s.get(n,a));if(!h.equals(e.identity(t)))throw new Error("matrix is not invertible");return p},e.prototype.gauss=function(){var t,r,n,a,o,i=this.shape[0],s=this.shape[1],h=new e(this),p=0;for(r=0;i>r;r++){if(p>=s)return new Error("matrix is singular");for(n=r;0===h.data[n*s+p];)if(n++,i===n&&(n=r,p++,s===p))return new Error("matrix is singular");if(h.swap(r,n),t=h.data[r*s+p],0!==t)for(a=0;s>a;a++)h.data[r*s+a]=h.data[r*s+a]/t;for(n=0;i>n;n++)if(o=h.data[n*s+p],n!==r)for(a=0;s>a;a++)h.data[n*s+a]=h.data[n*s+a]-h.data[r*s+a]*o;p++}for(r=0;i>r;r++){for(t=0,n=0;s>n;n++)t||(t=h.data[r*s+n]);if(t)for(a=0;s>a;a++)h.data[r*s+a]=h.data[r*s+a]/t}return h},e.prototype.pivotize=function(){var t,r,n,a,o,i=this.shape[0],s=e.identity(i),h=1;for(a=0;i>a;a++){for(t=0,n=a,o=a;i>o;o++)r=Math.abs(this.get(o,a)),r>t&&(t=r,n=o);a!==n&&(s.swap(a,n),h*=-1)}return[s,h]},e.prototype.lu=function(){var t,r,n,a=this.shape[0],o=e.identity(a),i=e.zeros(a,a),s=this.pivotize(),h=e.multiply(s[0],this),p=[0,0];for(t=0;a>t;t++){for(r=0;t+1>r;r++){for(p[0]=0,n=0;r>n;n++)p[0]+=i.get(n,t)*o.get(r,n);i.set(r,t,h.get(r,t)-p[0])}for(r=t;a>r;r++){for(p[1]=0,n=0;r>n;n++)p[1]+=i.get(n,t)*o.get(r,n);o.set(r,t,(h.get(r,t)-p[1])/i.get(t,t))}}return[o,i,s]},e.augment=function(t,r){return new e(t).augment(r)},e.prototype.augment=function(t){if(0===t.shape.length)return this;var r,e,n=this.shape[0],a=this.shape[1],o=t.shape[0],i=t.shape[1],s=this.data,h=t.data;if(n!==o)throw new Error("Rows do not match.");var p=a+i,u=new this.type(p*n);for(r=0;n>r;r++)for(e=0;a>e;e++)u[r*p+e]=s[r*a+e];for(r=0;o>r;r++)for(e=0;i>e;e++)u[r*p+e+a]=h[r*i+e];return this.shape=[n,p],this.data=u,this},e.identity=function(t,r){if(0>t)throw new Error("invalid size");r=r?r:Float64Array;var n,a=e.zeros(t,t,r);for(n=0;t>n;n++)a.data[n*t+n]=1;return a},e.magic=function(t,r){function n(t,r,e){return(r+2*e+1)%t}if(0>t)throw new Error("invalid size");r=r?r:Float64Array;var a,o,i=new r(t*t);for(a=0;t>a;a++)for(o=0;t>o;o++)i[(t-a-1)*t+(t-o-1)]=n(t,t-o-1,a)*t+n(t,o,a)+1;return e.fromTypedArray(i,[t,t])},e.prototype.diag=function(){for(var t=this.shape[0],r=this.shape[1],e=new this.type(Math.min(t,r)),a=0;t>a&&r>a;a++)e[a]=this.data[a*r+a];return new n(e)},e.prototype.determinant=function(){if(this.shape[0]!==this.shape[1])throw new Error("matrix is not square");for(var t=this.lu(),r=t.pop(),e=t.pop(),n=t.pop(),a=1,o=this.shape[0],i=0;o>i;i++)a*=n.get(i,i)*e.get(i,i);return r.pop()*a},e.prototype.trace=function(){var t,r,e=this.diag(),n=0;for(t=0,r=e.length;r>t;t++)n+=e.get(t);return n},e.equals=function(t,r){return t.equals(r)},e.prototype.equals=function(t){var r=this.shape[0],e=this.shape[1],n=this.data,a=t.data;if(r!==t.shape[0]||e!==t.shape[1]||this.type!==t.type)return!1;for(var o=0;r*e>o;o++)if(n[o]!==a[o])return!1;return!0},e.prototype.get=function(t,r){if(0>t||0>r||t>this.shape[0]-1||r>this.shape[1]-1)throw new Error("index out of bounds");return this.data[t*this.shape[1]+r]},e.prototype.set=function(t,r,e){if(0>t||0>r||t>this.shape[0]-1||r>this.shape[1]-1)throw new Error("index out of bounds");return this.data[t*this.shape[1]+r]=e,this},e.prototype.swap=function(t,r){if(0>t||0>r||t>this.shape[0]-1||r>this.shape[0]-1)throw new Error("index out of bounds");var e=this.shape[1],n=this.data.slice(t*e,(t+1)*e);return this.data.copyWithin(t*e,r*e,(r+1)*e),this.data.set(n,r*e),this},e.prototype.map=function(t){var r,n=this.shape[0],a=this.shape[1],o=new this.type(this.data);for(r=0;n*a>r;r++)o[r]=t(o[r],r/a|0,r%a,o);return e.fromTypedArray(o,[n,a])},e.prototype.each=function(t){var r,e=this.shape[0],n=this.shape[1];for(r=0;e*n>r;r++)t(this.data[r],r/n|0,r%n,this.data);return this},e.prototype.toString=function(){for(var t=[],r=this.shape[0],e=this.shape[1],n=0;r>n;n++)t.push("["+this.data.subarray(n*e,(n+1)*e).toString()+"]");return"["+t.join(", \n")+"]"},e.prototype.toArray=function(){for(var t=[],r=this.shape[0],e=this.shape[1],n=0;r>n;n++)t.push(Array.prototype.slice.call(this.data.subarray(n*e,(n+1)*e)));return t},e.prototype.toVector=function(){var t=this.shape[0],r=this.shape[1];if(1!==t&&1!==r)throw new Error("invalid matrix shape");return new n(this.data)},r.exports=e}()},{"./vector":3}],2:[function(t,r,e){},{}],3:[function(t,r,e){!function(){"use strict";function t(r){this.type=Float64Array,this.length=0,r instanceof t?this.combine(r):r instanceof Array?(this.data=new this.type(r),this.length=r.length):r&&r.buffer&&"[object ArrayBuffer]"===Object.prototype.toString.call(r.buffer)&&(this.data=r,this.length=r.length,this.type=r.constructor)}t.add=function(r,e){return new t(r).add(e)},t.prototype.add=function(t){var r=this.length,e=t.length;if(r!==e)throw new Error("sizes do not match!");if(!r&&!e)return this;var n;for(n=0;r>n;n++)this.data[n]+=t.data[n];return this},t.subtract=function(r,e){return new t(r).subtract(e)},t.prototype.subtract=function(t){var r=this.length,e=t.length;if(r!==e)throw new Error("sizes do not match");if(!r&&!e)return this;var n;for(n=0;r>n;n++)this.data[n]+=t.data[n];return this},t.scale=function(r,e){return new t(r).scale(e)},t.prototype.scale=function(t){var r;for(r=this.length-1;r>=0;r--)this.data[r]*=t;return this},t.normalize=function(r){return new t(r).normalize()},t.prototype.normalize=function(){return this.scale(1/this.magnitude())},t.project=function(r,e){return r.project(new t(e))},t.prototype.project=function(t){return t.scale(this.dot(t)/t.dot(t))},t.zeros=function(r,e){if(0>r)throw new Error("invalid size");if(0===r)return new t;e=e?e:Float64Array;var n,a=new e(r);for(n=0;r>n;n++)a[n]=0;return new t(a)},t.ones=function(r,e){if(0>r)throw new Error("invalid size");if(0===r)return new t;e=e?e:Float64Array;var n,a=new e(r);for(n=0;r>n;n++)a[n]=1;return new t(a)},t.range=function(){var r,e,n,a=[].slice.call(arguments,0),o=!1,i=Float64Array;switch("function"==typeof a[a.length-1]&&(i=a.pop()),a.length){case 2:n=a.pop(),e=1,r=a.pop();break;case 3:n=a.pop(),e=a.pop(),r=a.pop();break;default:throw new Error("invalid range")}if(0>n-r){var s=n;n=r,r=s,o=!0}if(e>n-r)throw new Error("invalid range");var h,p,u=new i(Math.ceil((n-r)/e));for(h=r,p=0;n>h;h+=e,p++)u[p]=o?n-h+r:h;return new t(u)},t.random=function(r,e){e=e?e:Float64Array;var n,a=new e(r);for(n=0;r>n;n++)a[n]=Math.random();return new t(a)},t.dot=function(t,r){return t.dot(r)},t.prototype.dot=function(t){if(this.length!==t.length)throw new Error("sizes do not match");var r,e,n=this.data,a=t.data,o=0;for(r=0,e=this.length;e>r;r++)o+=n[r]*a[r];return o},t.prototype.magnitude=function(){if(!this.length)return 0;var t,r,e=0,n=this.data;for(t=0,r=this.length;r>t;t++)e+=n[t]*n[t];return Math.sqrt(e)},t.angle=function(t,r){return t.angle(r)},t.prototype.angle=function(t){return Math.acos(this.dot(t)/this.magnitude()*t.magnitude())},t.equals=function(t,r){return t.equals(r)},t.prototype.equals=function(t){if(this.length!==t.length)return!1;for(var r=this.data,e=t.data,n=0,a=this.length;a>n&&r[n]===e[n];)n++;return n===a},t.prototype.get=function(t){if(0>t||t>this.length-1)throw new Error("index out of bounds");return this.data[t]},t.prototype.min=function(){var t,r,e,n=Number.POSITIVE_INFINITY,a=this.data;for(r=0,e=a.length;e>r;r++)t=a[r],n>t&&(n=t);return n},t.prototype.max=function(){var t,r,e,n=Number.NEGATIVE_INFINITY,a=this.data;for(r=0,e=this.length;e>r;r++)t=a[r],t>n&&(n=t);return n},t.prototype.set=function(t,r){if(0>t||t>this.length-1)throw new Error("index out of bounds");return this.data[t]=r,this},t.combine=function(r,e){return new t(r).combine(e)},t.prototype.combine=function(t){if(!t.length)return this;if(!this.length)return this.data=new t.type(t.data),this.length=t.length,this.type=t.type,this;var r=this.length,e=t.length,n=this.data,a=t.data,o=new this.type(r+e);return o.set(n),o.set(a,r),this.data=o,this.length=r+e,this},t.prototype.push=function(r){return this.combine(new t([r]))},t.prototype.map=function(t){var r;for(r=0;r<this.length;r++)this.data[r]=t(this.data[r]);return this},t.prototype.each=function(t){var r;for(r=0;r<this.length;r++)t(this.data[r],r);return this},t.prototype.toString=function(){var t,r="";for(t=0;t<this.length;t++)r+=t>0?", "+this.data[t]:this.data[t];return"["+r+"]"},t.prototype.toArray=function(){return this.data?Array.prototype.slice.call(this.data):[]},r.exports=t}()},{}],4:[function(t,r,e){!function(){"use strict";var e=t("./vector"),n=t("./matrix");try{var a=t("nblas")}catch(o){return r.exports.Vector=e,void(r.exports.Matrix=n)}e.prototype.add=n.prototype.add=function(t){var r=this instanceof e?this.length:this.shape[0]*this.shape[1],n=t instanceof e?t.length:t.shape[0]*t.shape[1];if(r!==n)throw new Error("sizes do not match!");return r||n?(a.axpy(t.data,this.data),this):this},e.prototype.subtract=n.prototype.subtract=function(t){var r=this instanceof e?this.length:this.shape[0]*this.shape[1],n=t instanceof e?t.length:t.shape[0]*t.shape[1];if(r!==n)throw new Error("sizes do not match!");return r||n?(a.axpy(t.data,this.data,-1),this):this},e.prototype.scale=n.prototype.scale=function(t){return a.scal(this.data,t),this},e.prototype.dot=function(t){if(this.length!==t.length)throw new Error("sizes do not match!");return a.dot(this.data,t.data)},e.prototype.magnitude=function(){return this.length?a.nrm2(this.data):0},e.prototype.max=function(){return this.data[a.idamax(this.length,this.data,1)]},r.exports.Vector=e,r.exports.Matrix=n}()},{"./matrix":1,"./vector":3,nblas:2}]},{},[4])(4)});
//# sourceMappingURL=vectorious.js.map
