{"version":3,"sources":["cplayer.js"],"names":["cPlayer","options","EVENTS","emitter","cEmitter","on","eventName","func","DEFAULTS","document","getElementById","Object","assign","undefined","SVG","i","keys","length","svg","createElementNS","setAttribute","CBASE","cBase","now","dragging","contain","target","createElement","lyric","classList","add","lyricBody","appendChild","controls","cLeft","musicDescription","image","metaBak","musicMeta","div","musicName","musicArtist","playIcon","replaceInner","playArrow","cCenter","time","timeBody","timeLine","timePoint","cRight","volume","volumeButton","volumePower","volumeOff","volumeBody","volumeLine","volumePoint","listButton","listPower","playlistPlay","lyricButton","lyricPower","note","list","listBody","element","root","getElementsByTagName","__LIST__","getByClass","getByTagName","toggleIcon","toggle","volumeIcon","music","autoplay","isPaused","play","pause","hasLyric","contains","showLyric","hideLyric","hasList","showList","hideList","isMuted","muted","slideLyric","currentTime","style","loop","updateTime","next","addEventListener","emit","ev","a","dragPercentage","onplay","defineProperty","set","check","refreshList","type","parentNode","width","clientX","offsetLeft","offsetWidth","vol","duration","vl","checkLevel","volumeDown","volumeUp","console","log","interval","setInterval","seeking","clearInterval","dom","name","artist","url","img","src","innerHTML","refreshLyric","paused","id","remove","lb","to","u","ln","push","content","lr","split","lrcs","onelrc","match","splice","lyricsarray","parseInt","parseFloat","Error","count","sort","b","__LYRIC__","lyricToTop","halfBody","translateY","lrc","childNodes","offsetTop","clientHeight","SyntaxError","TypeError","index","arguments","source","key","prototype","hasOwnProperty","call","typeList","events","args","rootNode","documentElement","styleList","indexOf","browser","oldElement","newElement","cloneNode","removeChild","innerContent","className","parentElement","getElementsByClassName","tagName","start","end","Math","random","RangeError","property","slice","toUpperCase"],"mappings":"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","file":"cplayer.js","sourcesContent":["/*!\r\n cPlayer REWRITE - 2.0\r\n\r\n     Author && user(:cry:)  Corps\r\n     天若有情天亦老,我为长者续一秒~\r\n */\r\nclass cPlayer {\r\n    constructor(options) {\r\n        const EVENTS = {\r\n            \"play\"              :[], //When Music be played, Emit.\r\n            \"pause\"             :[], //When Music be paused, Emit.\r\n            \"volumechange\"      :[],\r\n            \"timeupdate\"        :[],\r\n            \"canplaythrough\"    :[],\r\n            \"ended\"             :[],\r\n            //All the above are binded on AUDIO Elements,\r\n            //The following items are Function's callback function.\r\n            \"toggle\"            :[],\r\n            \"previous\"          :[],\r\n            \"next\"              :[],\r\n            \"changeList\"        :[],\r\n            \"changeLyric\"       :[],\r\n            \"slideList\"         :[],\r\n            \"slideLyric\"        :[],\r\n            \"clickLyricPower\"   :[],\r\n            \"clickListPower\"    :[],\r\n            \"clickVolumePower\"  :[],\r\n        };\r\n        this.emitter = new cEmitter(EVENTS);\r\n        this.on = (eventName,func)=>this.emitter.on(eventName,func);\r\n        /*\r\n         *  參數处理,合并默认参数与定义參數\r\n         */\r\n        const DEFAULTS = {\r\n            \"element\": document.getElementById(\"cplayer\"),\r\n            \"list\"   : []\r\n        };\r\n        if(Object.assign !== undefined){\r\n            this.options = Object.assign({}, DEFAULTS, options);\r\n        }\r\n\r\n        //SVG建立\r\n        this.SVG = {\r\n            \"playArrow\"     :'M16 10v28l22-14z',\r\n            \"pause\"         :'M12 38h8V10h-8v28zm16-28v28h8V10h-8z',\r\n            \"playlistPlay\"  :'M26 6H-8v4h34V6zm0-8H-8v4h34v-4zM-8 18h26v-4H-8v4zm30-4v12l10-6-10-6z',\r\n            \"note\"          :'M44 20L32 8H8c-2.2 0-4 1.8-4 4v24.02C4 38.22 5.8 40 8 40l32-.02c2.2 0 4-1.78 4-3.98V20zm-14-9l11 11H30V11z',\r\n            \"volumeUp\"      :'M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z',\r\n            \"volumeMute\"    :'M14 18v12h8l10 10V8L22 18h-8z',\r\n            \"volumeOff\"     :'M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13c2.75-.63 5.26-1.89 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z',\r\n            \"volumeDown\"    :'M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z',\r\n        };\r\n        (()=>{\r\n            for(let i = 0,keys = Object.keys(this.SVG),length = keys.length;i<length;i++){\r\n                let svg = document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");\r\n                    if(keys[i]===\"playlistPlay\"){\r\n                        svg.setAttribute(\"viewBox\",\"-12 -12 48 48\");\r\n                        svg.setAttribute(\"enable-background\",\"new -12 -12 48 48\")\r\n                    }else{\r\n                        svg.setAttribute(\"viewBox\",\"0 0 48 48\");\r\n                    }\r\n                    svg = keys[i]===\"playlistPlay\" ?\r\n                     '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\" viewBox=\"-12 -12 48 48\" enable-background=\"new -12 -12 48 48\"><path d=\"' + this.SVG[keys[i]] + '\"/></svg>' :\r\n                     '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\" viewBox=\"0 0 48 48\"><path d=\"' + this.SVG[keys[i]] + '\"/></svg>';\r\n                this.SVG[keys[i]] = svg;\r\n            }\r\n        })();\r\n\r\n        this.CBASE = new cBase;\r\n        this.now = 0;\r\n        this.dragging = {contain: false, target: undefined};\r\n        //现在开始填DOM\r\n        (()=>{\r\n            let cPlayer = document.createElement(\"c-player\");\r\n                let lyric = document.createElement(\"div\");\r\n                    lyric.classList.add(\"lyric\");\r\n                    lyric.classList.add(\"invisible\");\r\n                        let lyricBody = document.createElement(\"lyric-body\");\r\n                    lyric.appendChild(lyricBody);\r\n                let controls = document.createElement(\"div\");\r\n                    controls.classList.add(\"controls\");\r\n                        let cLeft = document.createElement(\"div\");\r\n                            cLeft.classList.add(\"c-left\");\r\n                                let musicDescription = document.createElement(\"div\");\r\n                                    musicDescription.classList.add(\"music-description\");\r\n                                        let image = document.createElement(\"div\");\r\n                                            image.classList.add(\"image\");\r\n                                                let metaBak = document.createElement(\"img\");\r\n                                                    metaBak.classList.add(\"meta-bak\");\r\n                                            image.appendChild(metaBak);\r\n                                        let musicMeta = document.createElement(\"div\");\r\n                                            musicMeta.classList.add(\"music-meta\");\r\n                                                let div = document.createElement(\"div\");\r\n                                                    let musicName = document.createElement(\"span\");\r\n                                                        musicName.classList.add(\"music-name\");\r\n                                                    let musicArtist = document.createElement(\"span\");\r\n                                                        musicArtist.classList.add(\"music-artist\");\r\n                                                    div.appendChild(musicName);\r\n                                                    div.appendChild(musicArtist);\r\n                                            musicMeta.appendChild(div);\r\n                                    musicDescription.appendChild(image);\r\n                                    musicDescription.appendChild(musicMeta);\r\n                                let playIcon = document.createElement(\"a\");\r\n                                    playIcon.classList.add(\"play-icon\");\r\n                                    this.CBASE.replaceInner(playIcon,this.SVG.playArrow);\r\n                            cLeft.appendChild(musicDescription);\r\n                            cLeft.appendChild(playIcon);\r\n                        let cCenter = document.createElement(\"div\");\r\n                            cCenter.classList.add(\"c-center\");\r\n                                let time = document.createElement(\"div\");\r\n                                    time.classList.add(\"time\");\r\n                                        let timeBody = document.createElement(\"div\");\r\n                                            timeBody.classList.add(\"time-body\");\r\n                                                let timeLine = document.createElement(\"div\");\r\n                                                    timeLine.classList.add(\"time-line\");\r\n                                                let timePoint = document.createElement(\"div\");\r\n                                                    timePoint.classList.add(\"time-point\");\r\n                                            timeBody.appendChild(timeLine);\r\n                                            timeBody.appendChild(timePoint);\r\n                                    time.appendChild(timeBody);\r\n                            cCenter.appendChild(time);\r\n                        let cRight = document.createElement(\"div\");\r\n                            cRight.classList.add(\"c-right\");\r\n                                let volume = document.createElement(\"div\");\r\n                                    volume.classList.add(\"volume\");\r\n                                        let volumeButton = document.createElement(\"div\");\r\n                                            volumeButton.classList.add(\"volume-button\");\r\n                                                let volumePower = document.createElement(\"a\");\r\n                                                    volumePower.classList.add(\"volume-power\");\r\n                                                    this.CBASE.replaceInner(volumePower,this.SVG.volumeOff);\r\n                                            volumeButton.appendChild(volumePower);\r\n                                        let volumeBody = document.createElement(\"div\");\r\n                                            volumeBody.classList.add(\"volume-body\");\r\n                                                let volumeLine = document.createElement(\"div\");\r\n                                                    volumeLine.classList.add(\"volume-line\");\r\n                                                let volumePoint = document.createElement(\"div\");\r\n                                                    volumePoint.classList.add(\"volume-point\");\r\n                                            volumeBody.appendChild(volumeLine);\r\n                                            volumeBody.appendChild(volumePoint);\r\n                                    volume.appendChild(volumeButton);\r\n                                    volume.appendChild(volumeBody);\r\n                                let listButton = document.createElement(\"div\");\r\n                                    listButton.classList.add(\"list-button\");\r\n                                        let listPower = document.createElement(\"a\");\r\n                                            listPower.classList.add(\"list-power\");\r\n                                            this.CBASE.replaceInner(listPower,this.SVG.playlistPlay);\r\n                                    listButton.appendChild(listPower);\r\n                                let lyricButton = document.createElement(\"div\");\r\n                                    lyricButton.classList.add(\"lyric-button\");\r\n                                        let lyricPower = document.createElement(\"a\");\r\n                                            lyricPower.classList.add(\"lyric-power\");\r\n                                            this.CBASE.replaceInner(lyricPower,this.SVG.note);\r\n                                    lyricButton.appendChild(lyricPower);\r\n                            cRight.appendChild(volume);\r\n                            cRight.appendChild(listButton);\r\n                            cRight.appendChild(lyricButton);\r\n                    controls.appendChild(cLeft);\r\n                    controls.appendChild(cCenter);\r\n                    controls.appendChild(cRight);\r\n                let list = document.createElement(\"div\");\r\n                    list.classList.add(\"list\");\r\n                    list.classList.add(\"invisible\");\r\n                        let listBody = document.createElement(\"list-body\");\r\n                    list.appendChild(listBody);\r\n            cPlayer.appendChild(lyric);\r\n            cPlayer.appendChild(controls);\r\n            cPlayer.appendChild(list);\r\n            this.options.element.appendChild(cPlayer);\r\n        })();\r\n        this.CBASE.root = this.options.element.getElementsByTagName(\"c-player\");\r\n        this.CBASE.root = this.CBASE.root[this.CBASE.root.length-1];\r\n        //然后为DOMList填充一下吧\r\n        this.__LIST__ = {\r\n            \"lyric\"      : this.CBASE.getByClass(\"lyric\"),\r\n            \"lyricBody\"  : this.CBASE.getByTagName(\"lyric-body\"),\r\n            \"toggle\"     : this.CBASE.getByClass(\"play-icon\"),\r\n            \"img\"        : this.CBASE.getByClass(\"meta-bak\"),\r\n            \"name\"       : this.CBASE.getByClass(\"music-name\"),\r\n            \"artist\"     : this.CBASE.getByClass(\"music-artist\"),\r\n            \"time\"       : this.CBASE.getByClass(\"time\"),\r\n            \"timeLine\"   : this.CBASE.getByClass(\"time-line\"),\r\n            \"timePoint\"  : this.CBASE.getByClass(\"time-point\"),\r\n            \"lyricPower\" : this.CBASE.getByClass(\"lyric-power\"),\r\n            \"volumePower\": this.CBASE.getByClass(\"volume-power\"),\r\n            \"volumeLine\" : this.CBASE.getByClass(\"volume-line\"),\r\n            \"volumePoint\": this.CBASE.getByClass(\"volume-point\"),\r\n            \"listPower\"  : this.CBASE.getByClass(\"list-power\"),\r\n            \"list\"       : this.CBASE.getByClass(\"list\"),\r\n            \"listBody\"   : this.CBASE.getByTagName(\"list-body\")\r\n        };\r\n        this.__LIST__.toggleIcon = this.CBASE.getByTagName(\"svg\",this.__LIST__.toggle);\r\n        this.__LIST__.volumeIcon = this.CBASE.getByTagName(\"svg\",this.__LIST__.volumePower);\r\n\r\n\r\n        this.music = document.createElement(\"audio\");\r\n        this.music.autoplay = !!this.options.autoplay;\r\n        //绑定事件开始:\r\n\r\n        this.emitter.on(\"toggle\",()=>{\r\n            if (this.isPaused()) {\r\n                this.play();\r\n            } else {\r\n                this.pause();\r\n            }\r\n        }).on(\"clickLyricPower\",()=>{\r\n            if (this.hasLyric(this.now) && this.__LIST__.lyric.classList.contains(\"invisible\")) {\r\n                this.showLyric();\r\n            } else if (this.hasLyric(this.now) && !this.__LIST__.lyric.classList.contains(\"invisible\")) {\r\n                this.hideLyric();\r\n            }\r\n        }).on(\"clickListPower\",()=>{\r\n            if (this.hasList() && this.__LIST__.list.classList.contains(\"invisible\")) {\r\n                this.showList();\r\n            } else if (this.hasLyric() && !this.__LIST__.list.classList.contains(\"invisible\")) {\r\n                this.hideList();\r\n            }\r\n        }).on(\"clickVolumePower\",()=>{\r\n            if (this.isMuted()) {\r\n                this.music.muted = false;\r\n            } else {\r\n                this.volume(0);\r\n            }\r\n        }).on(\"timeupdate\",()=>{\r\n            //this.updateTime();\r\n            if (this.hasLyric(this.now)) {\r\n                this.slideLyric(this.music.currentTime);\r\n            }\r\n        }).on(\"volumechange\",()=>{\r\n            this.volume(); //做更新界面用.\r\n        }).on(\"pause\",()=>{\r\n            this.CBASE.replaceInner(this.__LIST__.toggle,this.SVG.playArrow);\r\n            //再赋值,更新内容.\r\n            //this.__LIST__.toggleIcon = this.CBASE.getByTagName(\"svg\",this.__LIST__.toggle);\r\n        }).on(\"play\",()=>{\r\n            this.CBASE.replaceInner(this.__LIST__.toggle,this.SVG.pause);\r\n            //再赋值,更新内容.\r\n            this.__LIST__.toggleIcon = this.CBASE.getByTagName(\"svg\",this.__LIST__.toggle);\r\n        }).on(\"ended\",()=>{\r\n            //this.__LIST__.lyricBody.style.transform = \"\"; 为了兼容性封装一遍\r\n            this.CBASE.style(this.__LIST__.lyricBody,\"transform\",\"\");\r\n            if (this.options.list[this.now].loop === true) {\r\n                    this.updateTime(0);\r\n                    this.play();\r\n            }else if (this.hasList()&&this.now !== this.options.list.length-1) {\r\n                this.next();\r\n            }\r\n        });\r\n\r\n        //结束\r\n\r\n\r\n        if(this.options.list[0]) this.toggle();\r\n        this.__LIST__.toggle.addEventListener(\"click\", ()=>this.emitter.emit(\"toggle\"));\r\n        this.__LIST__.lyricPower.addEventListener(\"click\", ()=>this.emitter.emit(\"clickLyricPower\"));\r\n        this.__LIST__.listPower.addEventListener(\"click\", ()=>this.emitter.emit(\"clickListPower\"));\r\n        this.__LIST__.volumePower.addEventListener(\"click\", ()=>this.emitter.emit(\"clickVolumePower\"));\r\n        this.music.addEventListener(\"volumechange\", (ev)=>this.emitter.emit(\"volumechange\",ev));\r\n        this.music.addEventListener(\"timeupdate\", (ev)=>this.emitter.emit(\"timeupdate\",ev));\r\n        this.music.addEventListener(\"canplaythrough\", ()=>this.emitter.emit(\"canplaythrough\"));\r\n        this.music.addEventListener(\"pause\", ()=>this.emitter.emit(\"pause\"));\r\n        this.music.addEventListener(\"play\", ()=>this.emitter.emit(\"play\"));\r\n        this.music.addEventListener(\"ended\", ()=>this.emitter.emit(\"ended\"));\r\n        //以下内容不适合使用cEmitter,所以就不使用了.\r\n        this.options.element.addEventListener(\"mousedown\", (a)=>this.dragPercentage(a));\r\n        this.options.element.addEventListener(\"mousemove\", (a)=>this.dragPercentage(a));\r\n        this.options.element.addEventListener(\"mouseup\", (a)=>this.dragPercentage(a));\r\n        //以上内容不适合使用cEmitter,所以就不使用了.\r\n\r\n        //以下内容是为了兼容UC\r\n        if(this.music.onplay = undefined) Object.defineProperty(music,\"paused\",{set:function(check){\r\n            if(check = true){\r\n                this.emitter.emit(\"pause\");\r\n            }else{\r\n                this.emitter.emit(\"play\");\r\n            }\r\n        }});\r\n        //以上内容是为了兼容UC\r\n\r\n        this.volume();\r\n        this.refreshList();\r\n    };\r\n\r\n    dragPercentage(options) {\r\n        switch (options.type) {\r\n            case \"mousedown\":\r\n                if (!(options.target !== this.__LIST__.timePoint || options.target !== this.__LIST__.volumePoint)) return;\r\n                this.dragging.contain = true;\r\n                this.dragging.target = options.target;\r\n                break;\r\n            case \"mousemove\":\r\n                if (this.dragging.contain === false) return;\r\n                if (this.dragging.target.parentNode.classList.contains(\"volume-body\")) {\r\n                    this.__LIST__.volumeLine.style.width = (options.clientX - this.dragging.target.parentNode.offsetLeft) / this.dragging.target.parentNode.offsetWidth * 100 + \"%\";\r\n                } else if (this.dragging.target.parentNode.classList.contains(\"time-body\")) {\r\n                    this.__LIST__.timeLine.style.width = (options.clientX - this.dragging.target.parentNode.offsetLeft) / this.dragging.target.parentNode.offsetWidth * 100 + \"%\";\r\n                }\r\n                //实时修正VOLUME(某人强烈要求)\r\n                if (this.dragging.target.parentNode.classList.contains(\"volume-body\")) {\r\n                    let vol = (options.clientX - this.dragging.target.parentNode.offsetLeft) / this.dragging.target.parentNode.offsetWidth;\r\n                    vol = vol > 1 ? 1 : vol;\r\n                    vol = vol < 0 ? 0 : vol;\r\n                    this.music.volume = vol;\r\n                }\r\n                break;\r\n            case \"mouseup\":\r\n                if (this.dragging.contain === false) return;\r\n                if (this.dragging.target.parentNode.classList.contains(\"volume-body\")) {\r\n                    let vol = (options.clientX - this.dragging.target.parentNode.offsetLeft) / this.dragging.target.parentNode.offsetWidth;\r\n                    vol = vol > 1 ? 1 : vol;\r\n                    vol = vol < 0 ? 0 : vol;\r\n                    this.music.volume = vol;\r\n                } else if (this.dragging.target.parentNode.classList.contains(\"time-body\")) {\r\n                    let time = (options.clientX - this.dragging.target.parentNode.offsetLeft) / this.dragging.target.parentNode.offsetWidth;\r\n                    time = time > 1 ? 1 : time;\r\n                    time = time < 0 ? 0 : time;\r\n                    this.updateTime(time * this.music.duration);\r\n                }\r\n                this.dragging.contain = false;\r\n                this.dragging.target = undefined;\r\n                break;\r\n        }\r\n    }\r\n\r\n    volume(vl = undefined) {\r\n        let checkLevel = ()=>{\r\n            if(this.music.volume===0||this.isMuted()){\r\n                this.CBASE.replaceInner(this.__LIST__.volumePower,this.SVG.volumeOff);\r\n                this.__LIST__.volumeIcon = this.CBASE.getByTagName(\"svg\",this.__LIST__.volumePower);\r\n            } else if(this.music.volume>0&&this.music.volume<=0.5){\r\n                this.CBASE.replaceInner(this.__LIST__.volumePower,this.SVG.volumeDown);\r\n                this.__LIST__.volumeIcon = this.CBASE.getByTagName(\"svg\",this.__LIST__.volumePower);\r\n            } else if(this.music.volume>0.5&&this.music.volume<=1){\r\n                this.CBASE.replaceInner(this.__LIST__.volumePower,this.SVG.volumeUp);\r\n                this.__LIST__.volumeIcon = this.CBASE.getByTagName(\"svg\",this.__LIST__.volumePower);\r\n            } else {\r\n                console.log(\"Unexcepted Volume:\"+this.music.volume);\r\n            }\r\n        }\r\n        if (vl === undefined) {\r\n            this.__LIST__.volumeLine.style.width = (this.music.volume * 100) + \"%\";\r\n            checkLevel();\r\n            return this.isMuted() ? 0 : this.music.volume;\r\n        } else {\r\n            if (vl === 0) {\r\n                this.music.muted = true;\r\n                checkLevel();\r\n            } else {\r\n                this.music.volume = vl;\r\n                checkLevel();\r\n            }\r\n        }\r\n    }\r\n\r\n    isMuted() {\r\n        return this.music.muted;\r\n    }\r\n\r\n    play() {\r\n        this.interval = setInterval(()=>{\r\n            if (this.dragging.contain === false) this.__LIST__.timeLine.style.width = (this.music.currentTime / this.music.duration) * 100 + \"%\";\r\n        },500);\r\n        if(this.music.seeking === true) return this;\r\n        this.music.play();\r\n        return this;\r\n    }\r\n\r\n    pause() {\r\n        if(this.music.seeking === true) return;\r\n        clearInterval(this.interval);\r\n        this.music.pause();\r\n        return this;\r\n    }\r\n\r\n    previous() {\r\n        this.emitter.emit(\"previous\");\r\n        if(this.now === 0) return;\r\n        this.now--;\r\n        this.toggle().play();\r\n        return this;\r\n    }\r\n\r\n    next() {\r\n        this.emitter.emit(\"next\");\r\n        if(this.now === this.options.list.length-1) return;\r\n        this.now++;\r\n        this.toggle().play();\r\n        return this;\r\n    }\r\n\r\n    to(now) {\r\n        this.now = now;\r\n        this.toggle();\r\n        this.play();\r\n        return this;\r\n    }\r\n\r\n    toggle(now = this.now) {\r\n        this.emitter.emit(\"toggle\");\r\n        let list = this.options.list[now], dom = this.__LIST__;\r\n        this.music.pause();\r\n        //if(this.music.ended)this.music.load();\r\n        [dom.img.src, dom.name.innerHTML, dom.artist.innerHTML, this.music.src] = [list.image, list.name, list.artist, list.url];\r\n        this.refreshLyric();\r\n        if (!this.hasLyric(this.now))this.hideLyric();\r\n        //this.__LIST__.lyricBody.style.transform = \"\";\r\n        this.CBASE.style(this.__LIST__.lyricBody,\"transform\",\"\");\r\n        //this.play();\r\n        return this;\r\n    }\r\n\r\n    isPaused(func) {\r\n        if(func !== undefined) func();\r\n        return this.music.paused;\r\n    }\r\n\r\n    hasLyric(id = 0,func) {\r\n        if(func !== undefined) func();\r\n        return (this.options.list[id].lyric != undefined);\r\n    }\r\n\r\n    showLyric() {\r\n        this.emitter.emit(\"slideLyric\",true);\r\n        if (this.hasLyric(this.now))this.__LIST__.lyric.classList.remove(\"invisible\");\r\n        if (!this.__LIST__.list.classList.contains(\"invisible\")) this.hideList();\r\n        return this;\r\n    }\r\n\r\n    hideLyric() {\r\n        this.emitter.emit(\"slideLyric\",false);\r\n        this.__LIST__.lyric.classList.add(\"invisible\");\r\n        return this;\r\n    }\r\n\r\n    hasList(func) {\r\n        if(func !== undefined) func();\r\n        return (this.options.list.length > 1);\r\n    }\r\n\r\n    showList(func) {\r\n        this.emitter.emit(\"slideList\",true);\r\n        this.__LIST__.list.classList.remove(\"invisible\");\r\n        if (!this.__LIST__.lyric.classList.contains(\"invisible\")) this.hideLyric();\r\n        if(func !== undefined) func();\r\n        return this;\r\n    }\r\n\r\n    hideList(func) {\r\n        this.emitter.emit(\"slideList\",false);\r\n        this.__LIST__.list.classList.add(\"invisible\");\r\n        if(func !== undefined) func();\r\n        return this;\r\n    }\r\n\r\n    refreshList(func) {\r\n        this.emitter.emit(\"changeList\");\r\n        //let __SELF__ = this;\r\n        let list = this.options.list, lb = this.__LIST__.listBody;\r\n        lb.innerHTML = ``;\r\n        for (let i = 0; i <= list.length - 1; i++) {\r\n            let div = document.createElement(\"div\");\r\n            div.innerHTML = '<span class=\"music-name\">' + list[i].name + '</span><span class=\"music-artist\">' + list[i].artist + '</span>';\r\n            div = lb.appendChild(div);\r\n            div.addEventListener(\"click\", ()=> {\r\n                this.to(i);\r\n            });\r\n        }\r\n        if(func !== undefined) func();\r\n    }\r\n\r\n    add(u,func) {\r\n        //let __SELF__ = this;\r\n        let ln = this.options.list.push(u);\r\n        let div = document.createElement(\"div\");\r\n        div.innerHTML = '<span class=\"music-name\">' + u.name + '</span><span class=\"music-artist\">' + u.artist + '</span>';\r\n        div = this.__LIST__.listBody.appendChild(div);\r\n        div.addEventListener(\"click\", ()=> {\r\n            this.to(ln - 1);\r\n        });\r\n        if(ln===1) this.toggle(); //刷新元素.\r\n        if(func !== undefined) func();\r\n    }\r\n\r\n    lyric(content = undefined) {\r\n        if (content === undefined) {\r\n            if (this.hasLyric(this.now)) return this.options.list[this.now].lyric;\r\n        } else {\r\n            this.options.list[this.now].lyric = content;\r\n            this.refreshLyric();\r\n        }\r\n        return this;\r\n    }\r\n\r\n    refreshLyric() {\r\n        //REQUIRE LYRIC...\r\n        this.__LIST__.lyricBody.innerHTML = ``;\r\n        if (!this.hasLyric(this.now)) return;\r\n        let lr = this.options.list[this.now].lyric;\r\n        //START LRC BASEING...\r\n        lr = lr.split(\"\\n\");\r\n        let lrcs = [];\r\n        for (/* let content of lr */ let i = 0,content=lr[i];i<lr.length;i++,content=lr[i]) {\r\n            if (typeof content !== \"string\") break;\r\n            let onelrc = content.split(/\\[|\\]\\[|\\]/gi);\r\n            for (let i = 0; i < onelrc.length - 1; i++) {\r\n                if (onelrc[i] === \"\" && i !== onelrc.length - 1 || onelrc[i].match(/\\d{1,}\\:\\d{1,}/gi)===null) {\r\n                    onelrc.splice(i, 1);\r\n                    i--;\r\n                    continue;\r\n                }\r\n\r\n                if (onelrc[i].match(/\\d{1,}\\:\\d{1,}/gi)) {\r\n                    let lyricsarray = onelrc[i].split(/\\:|\\./gi);\r\n                    switch (lyricsarray.length) {\r\n                        case 2:\r\n                            onelrc[i] = parseInt(lyricsarray[0]) * 60 + parseInt(lyricsarray[1]);\r\n                            break;\r\n                        case 3:\r\n                            onelrc[i] = parseInt(lyricsarray[0]) * 60 + parseInt(lyricsarray[1]) + parseFloat(\"0.\" + lyricsarray[2]);\r\n                            break;\r\n                        default:\r\n                            throw new Error(\"Time not be Found!\")\r\n                    }\r\n                }\r\n            }\r\n\r\n            lrcs.push(onelrc);\r\n        }\r\n        //LRC BASED\r\n        let lyric = [];\r\n        for (let i = lrcs.length - 1; i >= 0; i--) {\r\n            if (lrcs[i].length > 2) {\r\n                for (let count = lrcs[i].length - 1; count >= 0; count--) {\r\n                    if (count !== lrcs[i].length - 1 && lrcs[i][lrcs[i].length - 1]!==undefined) {\r\n                        lyric.push({time: lrcs[i][count], content: lrcs[i][lrcs[i].length - 1]});\r\n                    }\r\n                }\r\n\r\n            } else if(lrcs[i][1]!==undefined) {\r\n                lyric.push({time: lrcs[i][0], content: lrcs[i][1]});\r\n            }\r\n        }\r\n\r\n        lyric.sort((a, b)=> {\r\n            return a.time - b.time;\r\n        });\r\n        lyric[\"now\"] = 0;\r\n        this.__LYRIC__ = lyric;\r\n        for (let i = 0; i <= lyric.length - 1; i++) {\r\n            let div = document.createElement(\"lrc\");\r\n            div.innerHTML = lyric[i].content;\r\n            this.__LIST__.lyricBody.appendChild(div);\r\n        }\r\n        this.emitter.emit(\"changeLyric\");\r\n\r\n    }\r\n\r\n    updateTime(time = undefined,func) {\r\n        if (time !== undefined)this.music.currentTime = time;\r\n        //if (this.dragging.contain === false) this.__LIST__.timeLine.style.width = (this.music.currentTime / this.music.duration) * 100 + \"%\";\r\n        //if(this.isPaused()) this.play();\r\n        if(func !== undefined) func(this.music.currentTime);\r\n        //return this.music.currentTime;\r\n    }\r\n\r\n    /*\r\n     Function:slideLyric\r\n     use <numberic>time\r\n     如果LYRIC到最初(没有前一个DIV时),确定NOW.\r\n     如果LYRIC为中间,确定时间,NOW.\r\n     [i]:当前歌词\r\n     [i-1]:上一个歌词\r\n     [i+1]:下一个歌词\r\n     * 此时应操纵下一个歌词!!!!(重要) *\r\n     */\r\n    /* 重写!\r\n    slideLyric(time) {\r\n        if(this.__LIST__.lyric.classList.contains(\"invisible\"))return;\r\n        let lyricToTop,halfBody,translateY;\r\n        for (var i = this.__LYRIC__.length - 1; i >= 0; i--) {\r\n            if (this.__LYRIC__[i + 1] !== undefined && this.__LYRIC__[i].time < time && this.__LYRIC__[i + 1].time > time //如果有下一个歌词,这个歌词的时间小于当前时间,下一个歌词时间大于当前时间\r\n                || this.__LYRIC__[i + 1] === undefined && this.__LYRIC__[i].time < time) {\r\n                /* 辣鸡写法,删删删\r\n                if (this.__LIST__.lyricBody.querySelector(\".now\") !== null && this.__LIST__.lyricBody.querySelector(\".now\") !== this.__LIST__.lyricBody.childNodes[i + 1])\r\n                    this.__LIST__.lyricBody.querySelector(\".now\").classList.toggle(\"now\");\r\n                this.__LIST__.lyricBody.childNodes[i].classList.toggle(\"now\");\r\n                * /\r\n\r\n                //以下四句借鉴了KK的写法,感谢Kookxiang.\r\n                let lyricToTop = this.__LIST__.lyricBody.childNodes[i].offsetTop - this.__LIST__.lyricBody.childNodes[0].offsetTop - 0.5 * this.__LIST__.lyricBody.childNodes[i].clientHeight;\r\n                let halfBody = 0.5 * this.__LIST__.lyric.clientHeight - this.__LIST__.lyricBody.childNodes[i].clientHeight;\r\n                let translateY = -(lyricToTop - halfBody);\r\n                //this.__LIST__.lyricBody.style.transform = \"translateY(\" + translateY + \"px)\";\r\n                this.CBASE.style(this.__LIST__.lyricBody,\"transform\",\"translateY(\" + translateY + \"px)\")\r\n            }\r\n        }\r\n    }\r\n    */\r\n    slideLyric(time){\r\n        //如果没开歌词,就不干事了\r\n        if(this.__LIST__.lyric.classList.contains(\"invisible\")) return;\r\n        //声明三个变量\r\n        let lyricToTop,halfBody,translateY,lyricBody=this.__LIST__.lyricBody,lrc = this.__LIST__.lyricBody.getElementsByTagName(\"lrc\");\r\n        //遍历一次Lyric,寻找当前的歌词(for时,i最大为length-1)\r\n        for (let lyric = this.__LYRIC__,length = lyric.length,i=0; i < length; i++) \r\n        //若当前的歌词时间小于time,但是之后的歌词时间又大于,就不管.若当前的歌词时间小于time,之后的歌词时间也小于,就跳\r\n    \t// lyric[x]==a,lyric[x+1]==b,if (a<time && b<time) then turn(lyric[x+2]);\r\n    \t// lyric[0]==a,lyric[1]==b,if (a<time && b>time) then turn(lyric[0])\r\n            if(lyric[i+1]===undefined||lyric[i].time<time&&lyric[i+1].time<time||(lyric[\"now\"]===0&&lyric[i].time<time&&lyric[i+1].time>time)){\r\n                //使之后的歌词为当前歌词(此时lyric[i+1]为当前歌词)\r\n                if(lyric[i+1]===undefined){\r\n                \tbreak;\r\n                }else if(lyric.now===i){\r\n                    //切换当前歌词\r\n                    if(!(lyric[\"now\"]===0&&lyric[i].time<time&&lyric[i+1].time>time))lyric.now++;\r\n                    if(lrc[i].classList.contains(\"now\")) lrc[i].classList.remove(\"now\");\r\n                    lrc[lyric[\"now\"]].classList.add(\"now\");\r\n                    //滚滚滚动~\r\n                    lyricToTop  = lyricBody.childNodes[lyric[\"now\"]].offsetTop - lyricBody.childNodes[0].offsetTop - 0.5 * lyricBody.childNodes[lyric[\"now\"]].clientHeight;\r\n                    halfBody    = 0.5 * this.__LIST__.lyric.clientHeight - lyricBody.childNodes[i].clientHeight;\r\n                    translateY  = -(lyricToTop - halfBody);\r\n                    this.CBASE.style(lyricBody,\"transform\",\"translateY(\" + translateY + \"px)\");\r\n                    break;\r\n                }else{\r\n                    //已经OK就返回吧\r\n                    continue;\r\n                }\r\n            };\r\n    }\r\n    get length(){\r\n        return this.options.list.length;\r\n    }\r\n    set length(length){\r\n        throw new SyntaxError(\"Read-only Property.\");\r\n    }\r\n}\r\n\r\n\r\n//Object.assign 解决方案\r\nif (typeof Object.assign != 'function') {\r\n  Object.assign = function(target) {\r\n    'use strict';\r\n    if (target == null) {\r\n      throw new TypeError('Cannot convert undefined or null to object');\r\n    }\r\n\r\n    target = Object(target);\r\n    for (var index = 1; index < arguments.length; index++) {\r\n      var source = arguments[index];\r\n      if (source != null) {\r\n        for (var key in source) {\r\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\r\n            target[key] = source[key];\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return target;\r\n  };\r\n}\r\n\r\nclass cEmitter{\r\n    constructor(typeList){\r\n        if(typeList){\r\n            this.events = typeList;\r\n        }else{\r\n            this.events = [];\r\n        }\r\n    }\r\n    on(eventName,func){\r\n        //func的参数这样写:function([参数A,参数B]){}或者箭头函数([参数A,参数B])=>{}\r\n        if(this.events[eventName]&&this.events[eventName].push !== undefined&&typeof func === \"function\"){\r\n            this.events[eventName].push(func);\r\n        }else if(this.events[eventName]===undefined||this.events[eventName].push===undefined){\r\n            this.events[eventName] = [];\r\n        }else{\r\n            throw new TypeError(\"Uncaught Unexcepted TypeError.\")\r\n        }\r\n        return this;\r\n    }\r\n    emit(eventName,...args){\r\n        for(let i = 0;i<this.events[eventName].length;i++){\r\n            this.events[eventName][i](args);\r\n        }\r\n        return this;\r\n        //也许会有emitter.emit(..).emit(..)的写法?一次执行俩事件,实在不知道哪里有用...\r\n    }\r\n}\r\nclass cBase{\r\n    constructor(rootNode=document.documentElement){\r\n        this.root = rootNode;\r\n        for(let styleList = document.documentElement.style,i = styleList.length;i>0;i--){\r\n            if(styleList[i].indexOf(\"-webkit-\")!==-1){\r\n                this.browser = \"webkit\";\r\n                break;\r\n            }\r\n            if(styleList[i].indexOf(\"-moz-\")!==-1){\r\n                this.browser = \"moz\";\r\n                break;\r\n            }\r\n            if(styleList[i].indexOf(\"-o-\")!==-1){\r\n                this.browser = \"o\";\r\n                break;\r\n            }\r\n            if(styleList[i].indexOf(\"-ms-\")!==-1){\r\n                this.browser = \"ms\";\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    replace(oldElement,newElement){\r\n        //newElement 不存在于oldElement 的父元素中,首先载入.\r\n        newElement = newElement.cloneNode(true);\r\n        oldElement.parentNode.appendChild(newElement);\r\n        oldElement.parentNode.removeChild(oldElement);\r\n        //顺便如果有值为oldElement的变量,请重新赋值.\r\n    }\r\n    replaceInner(element,innerContent){\r\n        //进行一次简单的封装\r\n        element.innerHTML = innerContent;\r\n    }\r\n    getByClass(className,parentElement){\r\n        return parentElement!=undefined?parentElement.getElementsByClassName(className)[0]:this.root.getElementsByClassName(className)[0];\r\n    }\r\n    getByTagName(tagName,parentElement){\r\n        return parentElement!=undefined?parentElement.getElementsByTagName(tagName)[0]:this.root.getElementsByTagName(tagName)[0];\r\n    }\r\n    rand(start,end){\r\n        if(start===undefined||end===undefined) return Math.random();\r\n        if(start>end) throw new RangeError(\"the EndNumber must be bigger than the StartNumber\");\r\n        return (end-start)*Math.random()+start;\r\n    }\r\n    style(dom,property,content){\r\n        dom.style[this.browser+property.slice(0,1).toUpperCase()+property.slice(1)] = content;\r\n        dom.style[property] = content;\r\n    }\r\n}"],"sourceRoot":"/source/"}