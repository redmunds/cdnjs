{"version":3,"sources":["ckan.js"],"names":["CKAN","isNodeModule","module","require","_","request","exports","my","Client","endpoint","apiKey","this","_getEndpoint","prototype","action","name","data","cb","indexOf","replace","options","url","type","_ajax","headers","meth","_nodeRequest","_browserRequest","datastoreQuery","queryObj","actualQuery","_normalizeQuery","err","results","fields","map","result","field","ckan2JsonTableSchemaTypes","out","total","hits","records","datastoreSqlQuery","sql","parsed","JSON","parse","message","errOut","original","code","error","info","orig","length","text","int","int4","int8","float8","timestamp","bool","jsonTableSchema2CkanTypes","string","number","integer","datetime","boolean","binary","object","array","any","datastoreResources","resource_id","_client","match","conf","method","json","get","res","body","statusCode","stringify","encodeURIComponent","success","obj","obj2","obj3","status","responseText","beforeSend","req","key","setRequestHeader","jQuery","ajax","q","filters","limit","size","offset","from","sort","_tmp","sortObj","order","join","each","filter","term","parseCkanResourceUrl","parts","split","len","slice","recline","Backend","Ckan","__type__","Deferred","isUndefined","fetch","dataset","dfd","query","done","resolve","fail","reject","promise","wrapper","id"],"mappings":"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","file":"ckan.min.js"}