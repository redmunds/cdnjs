(function(e,x){"object"===typeof module&&module.exports?module.exports=x(require("jquery")):e.ssi_modal=x(e.jQuery)})(this,function(e){function x(a,b){function c(){var b=e('a[data-ssi_imgGroup="'+m.attr("data-ssi_imgGroup")+'"]');p=b.index(m);v=b.length;r=e('<div class="ssi-modalNavigation"></div>');$next=e('<div class="ssi-modalNext '+(p+1>=v?"ssi-hidden":"")+'"><span></span></div>').on("click.ssi_modal",function(b){b.preventDefault();e(this).off("click.ssi_modal");a.navigate("next")});$prev=e('<div class="ssi-modalPrev '+
(1>p?"ssi-hidden":"")+'"><span></span></div>').on("click.ssi_modal",function(b){b.preventDefault();e(this).off("click.ssi_modal");a.navigate("prev")});r.append($next,$prev);return r}function d(b){t.find(".ssi-loader").remove();var c=[];if(!b&&""!==a.options.imgButtons&&!e.isEmptyObject(a.options.imgButtons)){var d=a.setButtons(a.options.imgButtons,a.get$content()).addClass("ssi-imgButtons");!0===a.options.hideImgButtons&&(d.addClass("ssi-navFade ssi-navFadeOut"),a.get$wrapper().mouseover(function(){d.addClass("ssi-navFadeIn")}).mouseleave(function(){d.removeClass("ssi-navFadeIn")}));
c.push(d)}c.push(n);t.append(c)}function k(b,c){clearInterval(f);var e=b||(y?n[0].naturalWidth:n.width()),k=c||(y?n[0].naturalHeight:n.height()),g=a.setModalHeight(120,!0);(k>H-g||e>l)&&!0===a.options.fixedHeight&&(g=Math.min((l-100)/e,(H-g)/k),e*=g,k*=g,2<q&&h.addClass("ssi-overHeight"));t.css("height",k);a.options.center&&t.parent().css({width:e,height:k});h.css("width",e);d();h.addClass("ssi-imgBorder")}function g(){if(y){if(0<n[0].naturalWidth){k();return}}else if(clearInterval(f),50<n.width()){k();
return}w=!0}var f,w,y="naturalWidth"in new Image,H=e(window).height(),l=e(window).width(),n=[""],h=a.get$wrapper(),t=h.find("#ssi-modalContent"),q=0;if(a.options.navigation){var r=c(a);t.mouseover(function(){r.addClass("ssi-navFadeIn")}).mouseleave(function(){r.removeClass("ssi-navFadeIn")});t.append(r)}-1!==e.inArray(b.split(".").pop().toLowerCase(),["jpg","jpeg","png","gif","bmp"])?(n=e('<img src="'+b+'" class="ssi-modalImg"/>').on("load",function(){if(!y){var a=new Image;a.src=n.attr("src");k(a.width,
a.height)}}).error(function(){var a=m.attr("data-alt");n="<h3>Image not found</h3><br>"+("undefined"!==typeof a?"<h4>"+a+"</h4>":"");d(!0)}),g(),w&&(f=setInterval(function(){h.addClass("ssi-imgBorder");g();q++},50))):("boolean"!==typeof a.options.iframe.allowFullScreen&&(a.options.iframe.allowFullScreen=!0),a.options.iframe.className=a.options.iframe.className||"",n=e('<iframe src="'+b+'" frameborder="0" '+(a.options.iframe.allowFullScreen?"allowfullscreen":"")+"></iframe>"),a.options.center?h.addClass("ssi-iframe ").find("#ssi-modalWindow"+
a.numberId).addClass(a.options.iframe.className):h.addClass("ssi-iframe "+a.options.iframe.className),d())}function z(a){a instanceof Array||(a=[a]);return a}var I=function(){var a=!1,b=["Webkit","Moz","O","ms","Khtml"],c="",c=document.createElement("div");void 0!==c.style.animationName&&(a=!0);if(!1===a)for(var d=0;d<b.length;d++)if(void 0!==c.style[b[d]+"AnimationName"]){c=b[d];c.toLowerCase();a=!0;break}return a}(),A=0,B=0,q={stackModal:0,normalModal:0},E=0,h=!1,f=function(a){this.numberId=E;this.pluginName=
a.stack?"stackModal":"normalModal";this.backdropId="";this.showbd=!0;this.setOptions(a)};f.prototype.setOptions=function(a,b){if("object"===typeof a){var c=this;this.options=e.extend(!0,{content:"",bodyScroll:!1,keepContent:!1,position:"",backdrop:!0,stack:!1,onClickClose:!1,bodyElement:!1,className:"",backdropClassName:"",preview:{icon:!1,hideIcons:!1,state:"normal"},closeAfter:!1,outSideClose:!0,onClose:"",onShow:"",beforeClose:"",beforeShow:"",iframe:{allowFullScreen:!0,className:""},center:!1,
closeIcon:!0,navigation:!1,sizeClass:"medium",animation:!1,modalAnimation:void 0,backdropAnimation:void 0,animationSpeed:300,buttons:[],iconButtons:[],title:"",fixedHeight:!1,fitScreen:!1},a);this.options.iconButtons=z(this.options.iconButtons);this.options.preview.icon&&this.options.iconButtons.push({className:"ssi-displayIcon",method:function(){c.changePreviewState()}});this.options.closeIcon&&this.options.iconButtons.push({className:"ssi-closeIcon",method:function(){c.close()}})}else this.options[a]=
b;J(this);return this};f.prototype.init=function(){this.options.backdrop&&this.backdropInit();this.modalInit();E++;return this};f.prototype.get$content=function(){return this.get$modal().find("#ssi-modalContent")};f.prototype.get$modal=function(a){a=a||this.modalId;return this.$modal||e("#"+a)};f.prototype.get$title=function(){return this.get$modal().find("#ssi-modalTitle")};f.prototype.destroyTitle=function(){this.get$title().remove();this.options.title="";return this};f.prototype.destroyContent=
function(){this.get$content().remove();this.options.content="";return this};f.prototype.destroyButtons=function(a){this.get$buttons(a).remove();this.options.buttons=[];return this};f.prototype.destroyIcons=function(){this.get$icons().remove();this.options.icons=[];return this};f.prototype.get$icons=function(){return this.get$modal().find(".ssi-topIcons")};f.prototype.get$buttons=function(a){a=a||"buttons";return this.get$modal().find("#ssi-"+a)};f.prototype.get$window=function(){return this.get$modal().find("#ssi-modalWindow")};
f.prototype.get$wrapper=function(){return this.get$modal().find("#ssi-modalWrapper")};f.prototype.get$backdrop=function(){return this.$backdrop||e("#"+this.backdropId)};var F=null;f.prototype.changePreviewState=function(){var a=this.get$modal();if("fullScreen"===this.options.preview.state)a.removeClass("ssi-fullScreen"),this.options.preview.state="normal",a.find("#ssi-modalContent").css("height",""),(this.options.fixedHeight||this.options.fitScreen)&&this.setModalHeight(),clearTimeout(F),a.off("mousemove.ssi-modal");
else{if(this.options.preview.hideIcons){var b=a.find(".ssi-topIcons");if(this.options.buttons)var c=a.find("#ssi-buttons");a.on("mousemove.ssi-modal",function(){clearTimeout(F);b.fadeIn();c.slideDown();F=setTimeout(function(){c.slideUp();b.fadeOut()},2E3)})}this.setModalHeight(40,"height");a.addClass("ssi-fullScreen");this.options.preview.state="fullScreen"}return this};f.prototype.setPluginName=function(a){this.pluginName=a;q[a]=0;return this};f.prototype.setContent=function(a,b){b=b||"html";var c;
!0!==this.options.content?(c=e('<div id="ssi-modalContent" class="ssi-modalContent '+(this.options.fixedHeight?"ssi-overflow ":"")+'"></div>'),""===this.options.content&&(!0===this.options.title?this.get$title().after(c):this.get$window().prepend(c),this.setModalHeight()),this.options.content=!0):c=this.get$content();var d=a;a instanceof e&&!0===this.options.bodyElement&&(!0===this.options.extendOriginalContent&&(this.options.beforeClose=function(b){var c;"function"===typeof beforeClose&&(c=beforeClose(b));
if(!1!==c)a.eq(0).after(b.get$content().contents().unwrap().css("display","")).remove();else return c}),d=a.eq(0).clone(),d.is(":visible")||d.show());c[b](d);return c};f.prototype.setButtons=function(a,b){var c,d=!1;a=z(a);!1!==b&&(b="undefined"!==typeof b?e(b):this.get$window(),c=b.find("#ssi-buttons"),c=c[0]);c||(c=e('<div id="ssi-buttons" class="ssi-buttons"><div  id="ssi-leftButtons" class="ssi-leftButtons"></div><div id="ssi-rightButtons" class="ssi-rightButtons"></div></div>'),b&&(d=!0,b.append(c)),
this.options.buttons=!0);for(var k=a.length,g=c.find("#ssi-leftButtons"),f=c.find("#ssi-rightButtons"),w=[],h=[],l=0,m;l<k;l++)m=this.generateButton(a[l]),"left"===a[l].side?w.push(m):h.push(m);g.append(w);f.append(h);d&&this.setModalHeight();return c};var C=function(a,b){switch(typeof a){case "boolean":a="show"===b?a?"anim ssi-fadeIn":"ssi-show":a?"anim ssi-fadeOut":"ssi-hidden";break;case "undefined":a="show"===b?"ssi-show":"ssi-hidden"}return a},J=function(a){var b=a.options.modalAnimation||a.options.animation||
!1,c=a.options.backdropAnimation||a.options.animation||!1,d;d=C("undefined"!==typeof b.show?b.show:b,"show");b=C("undefined"!==typeof b.hide?b.hide:b,"hide");a.options.modalAnimation={show:d,hide:b};d=C("undefined"!==typeof c.show?c.show:c,"show");b=C("undefined"!==typeof c.hide?c.hide:c,"hide");a.options.backdropAnimation={show:d,hide:b};!1===I&&(a.options.modalAnimation={show:"ssi-show"!==a.options.modalAnimation.show?"anim ssi-fadeIn":"ssi-show",hide:"ssi-hidden"!==a.options.modalAnimation.hide?
"anim ssi-fadeOut":"ssi-hidden"},a.options.backdropAnimation={show:"ssi-show"!==a.options.backdropAnimation.show?"anim ssi-fadeIn":"ssi-show",hide:"ssi-hidden"!==a.options.backdropAnimation.hide?"anim ssi-fadeOut":"ssi-hidden"})},K=function(a){var b=a.get$modal();a.time=setTimeout(function(){a.close()},1E3*a.options.closeAfter.time);if(a.options.closeAfter.displayTime&&a.options.title){var c=b.find("span.ssi-displayTime").html(a.options.closeAfter.time);G(a,c,function(){a.$displayTime.remove()})}a.options.closeAfter.resetOnHover&&
(b.on("mouseenter.ssi-modal",function(){clearTimeout(a.time);c&&(c.html(a.options.closeAfter.time),clearInterval(a.countDown))}),b.on("mouseleave.ssi-modal",function(){a.time=setTimeout(function(){a.close()},1E3*a.options.closeAfter.time);a.options.closeAfter.displayTime&&a.options.title&&G(a,c,function(){c.parent().remove()})}))};f.prototype.backdropInit=function(){var a;if("string"===typeof h)a=e("#"+h),this.backdropId=h,a=a.attr("class","ssi-backdrop "+this.pluginName+" "+this.options.backdropClassName),
this.showbd=!1,h=!0;else{a=e('<div id="ssi-backdrop'+this.numberId+'" class="ssi-backdrop ssi-hidden '+this.options.backdropClassName+" "+this.pluginName+'"></div>');if("shared"===this.options.backdrop||"byKindShared"===this.options.backdrop){var b;b="byKindShared"===this.options.backdrop?e(".ssi-backdrop.ssi-openedDialog."+this.pluginName):e(".ssi-backdrop.ssi-openedDialog");b[0]?(this.backdropId=b.attr("id"),this.showbd=!1,a=b):(e("body").append(a),this.backdropId="ssi-backdrop"+this.numberId,this.showbd=
!0)}else!0===this.options.backdrop&&(e("body").append(a),this.backdropId="ssi-backdrop"+this.numberId,this.showbd=!0);this.$backdrop=a}if(this.options.outSideClose&&this.options.position){var c=this;a.on("click.ssi-modal"+this.numberId,function(a){a.preventDefault();c.close()})}return a};f.prototype.setIcons=function(a){var b,c=[];!0!==this.options.iconButtons?(b=e('<div class="ssi-topIcons"></div>'),this.options.iconButtons=!0):b=this.get$icons();for(var d=this,k=a.length,f=0,u;f<k;f++)u=a[f],function(a){c.push(e('<a class="'+
a.className+'"></a>').click(function(b){b.preventDefault();"function"===typeof a.method&&e.proxy(a.method,this)(b,d)}))}(u);b.append(c);return b};var L=function(a){var b=e('<div id="ssi-modalWindow" class="ssi-modalWindow '+(a.options.center?a.options.sizeClass:"")+(a.options.stack?" "+a.options.sizeClass+" "+a.options.className+" ":"")+'"></div>'),c="",d=[];a.options.content&&(c=a.setContent(a.options.content,"html"));a.options.title&&d.push(a.setTitle(a.options.title));a.options.onClickClose&&b.addClass("ssi-hover").click(function(b){b=
e(b.target);b.is("a")||b.is("button")||a.close()});0<a.options.iconButtons.length&&d.push(a.setIcons(a.options.iconButtons,!0));d.push(c);"undefined"===typeof a.options.buttons||e.isEmptyObject(a.options.buttons)||d.push(a.setButtons(a.options.buttons,!1));b.append(d);return b};f.prototype.generateButton=function(a){var b=this;a=e.extend({},{className:"",enableAfter:!1,method:function(){},type:"button",id:"",label:"",modalAnimation:"",backdropAnimation:""},a);var c="button",d="";"link"===a.type&&
(c="a",d=' href="#"');var k=e("<"+c+d+(a.id?' id="'+a.id+'"':" ")+(a.enableAfter?"disabled ":"")+' class="ssi-modalBtn '+(a.className||"")+'">'+a.label+"</"+c+">"),f;if("number"===typeof a.enableAfter){var u=e('<span class="ssi-countDown">'+a.enableAfter+"</span>");G(b,u,function(){k.removeClass("disabled");k.removeAttr("disabled");u.remove()});k.append(u);f=a.enableAfter}else f=0;if(a.keyPress)if(c=function(){setTimeout(function(){e("body").on("keydown.ssi_modal",function(b){b.keyCode==a.keyPress&&
k.trigger("click")})},1E3*f)},1==a.enableAfter)e("body").on("keyPressEnable.ssi_modal",c);else c();return k.click(function(c){c.preventDefault();a.clearTimeOut&&(clearTimeout(b.time),b.time=null,clearInterval(b.countDown));"function"===typeof a.method&&(resume=e.proxy(a.method,this)(c,b));!1!==resume&&("boolean"===typeof a.keepContent&&a.keepContent!==b.options.keepContent&&(b.options.keepContent=a.keepContent),a.closeAfter&&b.close())})};f.prototype.modalInit=function(){var a=L(this),b=this;if(this.options.position&&
this.options.stack){var c="append";-1<this.options.position.indexOf("bottom")&&(c="prepend");var d=this.options.position.replace(" ","."),d=e("div.ssi-modalOuter.ssi-stack."+d);if(d[0])d.find("#ssi-modalWrapper")[c](a);this.$modal=a}if(!this.options.stack||!d[0]){var f=e('<div id="ssi-modalWrapper" class=" ssi-modalWrapper '+this.options.sizeClass+'"></div>'),g=e('<div class="ssi-modalOuter '+(this.options.stack?" ssi-stack":""+this.options.className)+(this.options.center?" ssi-center ":" ")+" "+
(this.options.position?" ssi-modalPositioned "+this.options.position:"")+'"></div>').append(f.append(a)).appendTo(e("body"));this.options.stack||(this.$modal=g,g.one("onShow.ssi-modal",function(){!0===b.options.outSideClose&&(g.click(function(a){a.target===this&&(a.preventDefault(),b.close())}),f.click(function(a){a.target===this&&(a.preventDefault(),b.close())}))}))}this.modalId="ssi-"+this.pluginName+this.numberId;this.$modal.attr("id","ssi-"+this.pluginName+this.numberId);this.$modal.addClass(this.pluginName+
" ssi-modal");this.$modal.data("ssi-modal",this).addClass("ssi-hidden");"string"===typeof h&&this.backdropInit();return this.$modal};f.prototype.setTitle=function(a){var b,c=!1;!0!==this.options.title?(b=e('<div id="ssi-modalTitle" class="ssi-modalTitle '+(this.options.content?"":"ssi-borderOut ")+'">'+this.options.title+"</div>"),""===this.options.title&&(this.get$window().prepend(b),c=!0),this.options.title=!0):b=this.get$title();b.html(a);c&&this.setModalHeight();return b};f.prototype.showModal=
function(){var a=this.get$modal(),b=this;a.trigger({type:"beforeShow.ssi-modal",modal:b});!1===this.options.bodyScroll&&(e("body").addClass("ssi-modalOpen"),A++);"shared"===this.options.backdrop?B++:"byKindShared"===this.options.backdrop&&q[this.pluginName]++;a.addClass("ssi-openedDialog");var c=function(){e(this).removeClass("ssi-hidden");if("function"===typeof b.options.onShow)b.options.onShow(b);a.trigger("onShow.ssi-modal")};a.addAnimation(this.options.modalAnimation.show,function(){c()}).removeClass("ssi-hidden");
this.options.center&&a.css("display","");"fullScreen"===b.options.preview.state&&(b.options.preview.state="normal",b.changePreviewState());this.setModalHeight();"number"===typeof this.options.closeAfter.time&&K(this);delete this.$modal};f.prototype.showBackdrop=function(){this.get$backdrop().addClass("ssi-openedDialog").addAnimation(this.options.backdropAnimation.show).removeClass("ssi-hidden");delete this.$backdrop};f.prototype.show=function(){if("function"===typeof this.options.beforeShow&&!1===
this.options.beforeShow(this))return this;this.showModal();!1===h&&this.options.backdrop&&!0===this.showbd&&this.showBackdrop();return this};f.prototype.destroyBackdrop=function(){var a=this.get$backdrop(),b=this;!0!==this.options.keepContent&&a.off("click.ssi-modal"+this.numberId);var c=this,d=function(){!0!==c.options.backdrop&&(!("shared"===c.options.backdrop&&1>B||"byKindShared"===c.options.backdrop&&1>q[c.pluginName])||c.get$modal(c.modalId.replace(c.numberId.toString(),c.backdropId.replace("ssi-backdrop",
"")))[0]&&c.backdropId.replace("ssi-backdrop","")!=c.numberId)||a.addAnimation(c.options.backdropAnimation.hide,function(){a.addClass("ssi-hidden").removeClass("ssi-openedDialog");!0!==b.options.keepContent&&a.remove()});h===c.backdropId&&(h=!1)};this.options.stack&&this.options.outSideClose?setTimeout(d,10):d();return this};f.prototype.destroyModal=function(){var a=this.get$modal(),b=this;a.trigger({type:"beforeClose.ssi-modal",modal:b});a.off(".ssi_modal");!0!==this.options.keepContent&&a.off(".ssi-modal").find("#ssi-modalWrapper").off(".ssi-modal");
"shared"===this.options.backdrop?B--:"byKindShared"===this.options.backdrop&&q[this.pluginName]--;a.hasClass("ssi-openedDialog")&&(a.removeClass("ssi-openedDialog"),!1===this.options.bodyScroll&&A--);a.addAnimation(this.options.modalAnimation.hide,function(){a.addClass("ssi-hidden");b.options.stack?a.addClass("ssi-smoothSlide").slideUp("500",function(){a.removeClass("ssi-smoothSlide");!0!==b.options.keepContent&&a.remove()}):!0!==b.options.keepContent&&a.remove();if("function"===typeof b.options.onClose)b.options.onClose(b);
a.trigger({type:"onClose.ssi-modal",modal:b})});this.options.icons=[];this.options.buttons=[];this.options.content="";this.options.title="";h=this.backdropId;return this};f.prototype.close=function(){if("function"===typeof this.options.beforeClose&&!1===this.options.beforeClose(this))return this;var a=e("body");a.off(".ssi_modal");this.destroyModal();this.destroyBackdrop();1>A&&a.removeClass("ssi-modalOpen");clearTimeout(this.time);this.time=null;clearInterval(this.countDown);return this};f.prototype.setModalHeight=
function(a,b){if(!this.options.fitScreen&&!this.options.fixedHeight&&!b)return this;"number"!==typeof a&&(a=115);var c=this.get$content(),d=e(window).height(),f=0,g=0;this.options.buttons&&(f=c.next().innerHeight());this.options.title&&(g=this.get$title().innerHeight());f=f+g+a;g=0;b?"string"===typeof b&&c.css(b,d-f):(this.options.fitScreen&&("number"===typeof this.options.fitScreen&&(g=Math.abs(this.options.fitScreen-a)),c.css("min-height",d-f-g)),this.options.fixedHeight&&(g=0,"number"===typeof this.options.fixedHeight&&
(g=Math.abs(this.options.fixedHeight-a)),c.css("max-height",d-f-g)));return f};var G=function(a,b,c){a.countDown=setInterval(function(){var d=parseInt(b.html());0!==d-1?b.html(d-1):(c&&c(),clearInterval(a.countDown))},1E3)};e.fn.extend({hasClasses:function(a){for(var b in a)if(e(this).hasClass(a[b]))return!0;return!1}});var l={checkElement:function(a){a=e(a);if(a[0]){var b=a.data("ssi-modal");if(b&&!e("#"+b.modalId)[0])return a.data("ssi-modal",""),!1}return b?b:!1},createObject:function(a,b){var c,
d;"undefined"!==typeof b?(c=e(b),d=c.data("ssi-modal")):a.keepContent=!1;d||(d=new f(a),"undefined"!==typeof b&&c.data("ssi-modal",d));return d},show:function(a,b){var c=!1;b&&(c=this.checkElement(b));if(!1===c)return this.createObject(a,b).init().show();if("object"===typeof c)return c.show()},close:function(a){a=e(target)||e(".ssi-modalWindow").eq(0);return a.data("ssi-modal").close()},proto:f.prototype,closeAll:function(a,b){function c(a){for(var c=a.length-1;0<=c;c--){var d=a.eq(c);d.hasClasses(b)||
d.data("ssi-modal").close()}}b=z(b);var d;d=typeof a;if("string"===d&&""!==a||"array"===d){a=z(a);for(var f=a.length,g=0;g<f;g++)d=e(".ssi-modal.ssi-openedDialog."+a[g]),c(d)}else d=e(".ssi-modal.ssi-openedDialog"),c(d)},removeAll:function(){e(".ssi-modalOuter").addClass("ssi-hidden").remove();e(".ssi-backdrop").addClass("ssi-hidden").remove();e("body").removeClass("ssi-modalOpen");B=A=0;q={stackModal:0,normalModal:0};E=0},dialog:function(a,b){var c={sizeClass:"dialog",okBtn:{className:"",label:"Ok"},
title:"",closeIcon:!1,outSideClose:!1};a.okBtn=e.extend({},c.okBtn,a.okBtn);a=e.extend({},c,a);a.buttons=[{className:a.okBtn.className,label:a.okBtn.label,closeAfter:!0,method:b}];return(new f(a)).init().show()},confirm:function(a,b){var c={okBtn:{className:"",label:"Ok"},cancelBtn:{className:"",label:"Cancel"},closeIcon:!1,sizeClass:"dialog",title:"",outSideClose:!1};a.okBtn=e.extend({},c.okBtn,a.okBtn);a.cancelBtn=e.extend({},c.cancelBtn,a.cancelBtn);a=e.extend({},c,a);a.buttons=[{className:a.okBtn.className,
label:a.okBtn.label,closeAfter:!0,method:function(a,c){"function"===typeof b&&b(!0,a,c)}},{className:a.cancelBtn.className,label:a.cancelBtn.label,closeAfter:!0,method:function(a,c){"function"===typeof b&&b(!1,a,c)}}];return(new f(a)).init().show()}},D={"ssi-mainOption":{}};l.imgBox=function(a,b){D[b||"ssi-mainOption"]=e.extend({},D["ssi-mainOption"],a)};var p,v,m;l.proto.navigate=function(a){var b=e('a[data-ssi_imgGroup="'+m.attr("data-ssi_imgGroup")+'"]');p||(p=b.index(m));v||(v=b.length);if("next"===
a&&p+1>=v||"prev"===a&&0>p)return this;this.destroyModal();"next"===a?p++:"prev"===a&&p--;b.eq(p).trigger("click.ssi-imgBox");return this};e("body").on("click.ssi-imgBox","a.ssi-imgBox",function(a){a.preventDefault();m=e(a.currentTarget);a=m.attr("data-ssi_imgGroup")||"ssi-mainOption";a=e.extend(!0,{backdrop:"byKindShared",fixedHeight:!0,navigation:!0,closeIcon:!0,title:!1,hideImgButtons:!0},D[a]||D["ssi-mainOption"]);if(""!==a.imgButtons&&!e.isEmptyObject(a.imgButtons))for(var b=0;b<a.imgButtons.length;b++)if(a.imgButtons[b].exclude)for(var c=
a.imgButtons[b].exclude.split(","),d=0;d<c.length;d++)if(m.hasClass(c[d])){a.imgButtons.splice(b,1);break}b="";"undefined"!==typeof a.title&&(b=!0===a.title?m.attr("title"):a.title);a=e.extend(a,{img:!0,content:'<div class="ssi-loader"></div>',title:b,sizeClass:""});c=m.attr("href");d=l.createObject(a).setPluginName("imgBox");d.imgUrl=c;d.imgTitle=a.title;d.init();b&&d.get$icons().addClass("inTitle");d.show();x(d,c);return!1});l.notify=function(a,b,c){var d={closeIcon:!1,sizeClass:"dialog",onClickClose:!0,
bodyScroll:!0,animation:!0,className:"",backdrop:!1,outSideClose:!1,position:"right top",topZIndex:!0,okBtn:{className:"",label:"Ok"},cancelBtn:{className:"",label:"Cancel"},stack:!0,closeAfter:{time:4,resetOnHover:!0}};b.okBtn=e.extend({},d.okBtn,b.okBtn);b.cancelBtn=e.extend({},d.cancelBtn,b.cancelBtn);var f="",g="";switch(a){case "success":d.className=" ssi-success";break;case "error":d.className=" ssi-error";break;case "info":d.className=" ssi-info";break;case "warning":d.className=" ssi-warning";
break;case "confirm":d.closeAfter=!1;d.onClickClose=!1;d.outSideClose=!1;d.icon=!1;d.title=!1;d.buttons=[{className:b.okBtn.className,label:b.okBtn.label,closeAfter:!0,method:function(){"function"===typeof c&&c(!0)}},{className:b.cancelBtn.className,label:b.cancelBtn.label,closeAfter:!0,method:function(){"function"===typeof c&&c(!1)}}];break;case "dialog":d.onClickClose=!1;d.closeAfter=!1;d.outSideClose=!1;d.title=!1;d.icon=!1;d.buttons=[{className:b.okBtn.className,label:b.okBtn.label,closeAfter:!0,
method:c}];break;default:d.className=a}b.className&&(b.className+=d.className||"");b=e.extend(!0,d,b);0!=b.icon&&(f=b.icon||a||"");0!=b.title&&(g=b.title||a);0!=b.icon&&0!=b.title&&""!=f&&(b.title=(""===f?"":'<span class="ssi-icon '+f+'"></span>')+" "+g);!0===b.backdrop&&(b.backdrop="byKndShared");b.keepContent=!1;return l.createObject(b).setPluginName("notify").init().show()};e.fn.ssi_modal=function(a,b,c){var d;if("object"===typeof b){var f=a;d=b||{};var g=c}else d=a||{};return this.each(function(){var a=
e(this),b;if(d.content)a.click(function(){switch(f){case "show":l.show(d,a);break;default:l[f](d,g)}});else{var c,h,m=a.attr("data-ssi_modal");m?a.click(function(){c=e(m);h={content:c};b=e.extend({},d,h);l.createObject(b).init().show()}):(h={content:a},b=e.extend({},d,h),l.createObject(b).init().show())}})};e.fn.addAnimation=function(a,b){if(-1!==a.indexOf("ssi-fade")&&!1===I)return e(this)[a.replace("anim ssi-","")](300,function(){"function"===typeof b&&b()});e(this).addClass(a).one("mozAnimationEnd webkitAnimationEnd  MSAnimationEnd oanimationend animationend",
function(){e(this).removeClass(a);"function"===typeof b&&b()});"ssi-show"!==a&&"ssi-hidden"!==a&&""!==a||e(this).trigger("animationend");return this.each(function(){e(this)})};return l});
