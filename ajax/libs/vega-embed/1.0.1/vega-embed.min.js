!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(n.vg||(n.vg={})).embed=e()}}(function(){return function e(n,t,a){function o(r,u){if(!t[r]){if(!n[r]){var d="function"==typeof require&&require;if(!u&&d)return d(r,!0);if(i)return i(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var s=t[r]={exports:{}};n[r][0].call(s.exports,function(e){var t=n[r][1][e];return o(t?t:e)},s,s.exports,e,n,t,a)}return t[r].exports}for(var i="function"==typeof require&&require,r=0;r<a.length;r++)o(a[r]);return o}({1:[function(e,n,t){(function(t){function a(e,n,t){var l,s,f=[];if(n.source)l=n.source,s=JSON.parse(l);else if(n.spec)s=n.spec,l=JSON.stringify(s,null,2);else if(n.url)return void r.util.load({url:n.url},function(o,i){o?console.error(o):i?a(e,r.util.extend({source:i},n),t):console.error("No data found at "+n.url)});var p=i.select(e).attr("class","vega-embed");if(n.params){var c=p.append("div").attr("class","vega-params");n.params.forEach(function(e){f=f.concat(u(c,e,s))})}r.parse.spec(s,function(n){var r=n({el:e}),u=p.append("div").attr("class","vega-actions");u.append("a").text("View Source").attr("href","#").on("click",function(){o(l),i.event.preventDefault()}),u.append("a").text("Open in Vega Editor").attr("href","#").on("click",function(){d(window,a.config.editor_url,{spec:l}),i.event.preventDefault()}),f.forEach(function(e){e.__vega__=r}),r.update(),t&&t(r)})}function o(e){var n="<html><head>"+l.source_header+'</head><body><pre><code class="json">',t="</code></pre>"+l.source_footer+"</body></html>",a=window.open("");a.document.write(n+e+t),a.document.title="Vega JSON Source"}var i="undefined"!=typeof window?window.d3:"undefined"!=typeof t?t.d3:null,r="undefined"!=typeof window?window.vg:"undefined"!=typeof t?t.vg:null,u=e("./param"),d=e("./post"),l={editor_url:"http://vega.github.io/vega-editor/",source_header:"",source_footer:""};a.config=l,n.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./param":2,"./post":3}],2:[function(e,n,t){(function(e){function t(e,n){for(var t=n.signals||(n.signals=[]),a=0;a<t.length&&t[a].name!==e.signal;++a);a===t.length&&t.push({name:e.signal,init:e.value}),(e.rewrite||[]).forEach(function(t){f(t)(n,{signal:e.signal})})}function a(e,n){var t=e.append("div").attr("class","vega-param");t.append("span").attr("class","vega-param-name").text(n.name||n.signal);var a=o;switch(n.type){case"checkbox":a=i;break;case"select":a=r;break;case"radio":a=u;break;case"range":a=d}return a(t,n)}function o(e,n){var t=e.append("input").on("input",l);for(var a in n)"signal"!==a&&"rewrite"!==a&&t.attr(a,n[a]);return t.attr("name",n.signal),t.node()}function i(e,n){return e.append("input").on("change",function(){l.call(this,this.checked)}).attr("type","checkbox").attr("name",n.signal).attr("checked",n.value||null).node()}function r(e,n){var t=e.append("select").attr("name",n.signal).on("change",function(){l.call(this,this.options[this.selectedIndex].__data__)});return t.selectAll("option").data(n.options).enter().append("option").attr("value",vg.util.identity).attr("selected",function(e){return e===n.value||null}).text(vg.util.identity),t.node()}function u(e,n){var t=e.append("span").attr("class","vega-param-radio");return n.options.map(function(e){var a="vega-option-"+n.signal+"-"+e,o=t.append("input").datum(e).on("change",l).attr("id",a).attr("type","radio").attr("name",n.signal).attr("value",e).attr("checked",e===n.value||null);return t.append("label").attr("for",a).text(e),o.node()})}function d(e,n){var t=e.append("input").on("input",function(){a.text(this.value),l.call(this,+this.value)}).attr("type","range").attr("name",n.signal).attr("value",n.value).attr("min",n.min).attr("max",n.max).attr("step",n.step||vg.util.bins({min:n.min,max:n.max,maxbins:100}).step),a=e.append("label").text(n.value);return t.node()}function l(e){void 0===e&&(e=this.__data__||s.event.target.value),this.__vega__.signal(this.name,e).update()}var s="undefined"!=typeof window?window.d3:"undefined"!=typeof e?e.d3:null,f=("undefined"!=typeof window?window.vg:"undefined"!=typeof e?e.vg:null).util.mutator;n.exports=function(e,n,o){return t(n,o),a(e,n)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,n,t){n.exports=function(e,n,t){function a(n){n.source===i&&(d=0,e.removeEventListener("message",a,!1))}function o(){0>=d||(i.postMessage(t,"*"),setTimeout(o,u),d-=1)}var i=e.open(n),r=1e4,u=250,d=~~(r/u);e.addEventListener("message",a,!1),setTimeout(o,u)}},{}]},{},[1])(1)});
