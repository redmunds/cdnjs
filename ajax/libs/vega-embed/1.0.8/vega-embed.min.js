!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(n.vg||(n.vg={})).embed=e()}}(function(){return function e(n,t,a){function r(i,u){if(!t[i]){if(!n[i]){var d="function"==typeof require&&require;if(!u&&d)return d(i,!0);if(o)return o(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var l=t[i]={exports:{}};n[i][0].call(l.exports,function(e){var t=n[i][1][e];return r(t?t:e)},l,l.exports,e,n,t,a)}return t[i].exports}for(var o="function"==typeof require&&require,i=0;i<a.length;i++)r(a[i]);return r}({1:[function(e,n,t){(function(t){function a(e,n,t,a){d.util.load({url:e},function(o,i){if(o||!i)console.error(o||"No data found at "+e);else{var u=n?d.util.extend({source:i},n):JSON.parse(i);r(t,u,a)}})}function r(e,n,t){var f,c,p=[];if(d.util.isString(n))return a(n,null,e,t);if(n.source)f=n.source,c=JSON.parse(f);else if(n.spec)c=n.spec,f=JSON.stringify(c,null,2);else{if(n.url)return a(n.url,n,e,t);c=n,f=JSON.stringify(c,null,2),n={spec:c,actions:!1}}var v=u.select(e).classed("vega-embed",!0).html("");if(n.parameters){var g=n.parameter_el?u.select(n.parameter_el):v,m=g.append("div").attr("class","vega-params");p=n.parameters.map(function(e){return s.init(m,e,c)})}d.parse.spec(c,function(a){var d=n.renderer||"canvas",g=n.actions||{},m=a({el:e,data:n.data||void 0,renderer:d});if(n.actions!==!1){var h=v.append("div").attr("class","vega-actions");g["export"]!==!1&&h.append("a").text("Export as "+("canvas"===d?"PNG":"SVG")).attr("href","#").attr("download",c.name||"vega").on("mousedown",function(){this.href=o(m),u.event.preventDefault()}),g.source!==!1&&h.append("a").text("View Source").attr("href","#").on("click",function(){i(f),u.event.preventDefault()}),g.editor!==!1&&h.append("a").text("Open in Vega Editor").attr("href","#").on("click",function(){l(window,r.config.editor_url,{spec:f}),u.event.preventDefault()})}p.forEach(function(e){s.bind(e,m)}),m.update(),t&&t(m,c)})}function o(e){var n=e.renderer(),t=n.scene();if(n.svg){var a=new Blob([n.svg()],{type:"image/svg+xml"});return window.URL.createObjectURL(a)}if(t.toDataURL)return t.toDataURL("image/png");throw Error("Renderer does not support image export.")}function i(e){var n="<html><head>"+f.source_header+'</head><body><pre><code class="json">',t="</code></pre>"+f.source_footer+"</body></html>",a=window.open("");a.document.write(n+e+t),a.document.title="Vega JSON Source"}var u="undefined"!=typeof window?window.d3:"undefined"!=typeof t?t.d3:null,d="undefined"!=typeof window?window.vg:"undefined"!=typeof t?t.vg:null,s=e("./parameter"),l=e("./post"),f={editor_url:"http://vega.github.io/vega-editor/",source_header:"",source_footer:""};r.config=f,r.imageURL=o,n.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./parameter":2,"./post":3}],2:[function(e,n,t){(function(e){function t(e,n){for(var t=n.signals||(n.signals=[]),a=0;a<t.length&&t[a].name!==e.signal;++a);a===t.length&&t.push({name:e.signal,init:e.value}),(e.rewrite||[]).forEach(function(t){f(t)(n,{signal:e.signal})})}function a(e,n){var t=e.append("div").attr("class","vega-param");t.append("span").attr("class","vega-param-name").text(n.name||n.signal);var a=r;switch(n.type){case"checkbox":a=o;break;case"select":a=i;break;case"radio":a=u;break;case"range":a=d}return a(t,n)}function r(e,n){var t=e.append("input").on("input",s);for(var a in n)"signal"!==a&&"rewrite"!==a&&t.attr(a,n[a]);t.attr("name",n.signal);var r=t.node();return{dom:[r],set:function(e){r.value=e}}}function o(e,n){var t=e.append("input").on("change",function(){s.call(this,this.checked)}).attr("type","checkbox").attr("name",n.signal).attr("checked",n.value||null).node();return{dom:[t],set:function(e){t.checked=!!e||null}}}function i(e,n){var t=e.append("select").attr("name",n.signal).on("change",function(){s.call(this,this.options[this.selectedIndex].__data__)});t.selectAll("option").data(n.options).enter().append("option").attr("value",vg.util.identity).attr("selected",function(e){return e===n.value||null}).text(vg.util.identity);var a=t.node();return{dom:[a],set:function(e){var t=n.options.indexOf(e);a.selectedIndex=t}}}function u(e,n){var t=e.append("span").attr("class","vega-param-radio"),a=n.options.map(function(e){var a="vega-option-"+n.signal+"-"+e,r=t.append("input").datum(e).on("change",s).attr("id",a).attr("type","radio").attr("name",n.signal).attr("value",e).attr("checked",e===n.value||null);return t.append("label").attr("for",a).text(e),r.node()});return{dom:a,set:function(e){for(var n=0;n<a.length;++n)a[n].value===e&&(a[n].checked=!0)}}}function d(e,n){var t=void 0!==n.value?n.value:(+n.max+ +n.min)/2,a=e.append("input").on("input",function(){r.text(this.value),s.call(this,+this.value)}).attr("type","range").attr("name",n.signal).attr("value",t).attr("min",n.min).attr("max",n.max).attr("step",n.step||vg.util.bins({min:n.min,max:n.max,maxbins:100}).step),r=e.append("label").attr("class","vega-range").text(t),o=a.node();return{dom:[o],set:function(e){o.value=e,r.text(e)}}}function s(e){void 0===e&&(e=this.__data__||l.event.target.value),this.__vega__.signal(this.name,e).update()}var l="undefined"!=typeof window?window.d3:"undefined"!=typeof e?e.d3:null,f=("undefined"!=typeof window?window.vg:"undefined"!=typeof e?e.vg:null).util.mutator;n.exports={init:function(e,n,r){return t(n,r),a(e,n)},bind:function(e,n){e.dom.forEach(function(e){e.__vega__=n}),n.onSignal(e.dom[0].name,function(n,t){e.set(t)})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,n,t){n.exports=function(e,n,t){function a(n){n.source===o&&(d=0,e.removeEventListener("message",a,!1))}function r(){0>=d||(o.postMessage(t,"*"),setTimeout(r,u),d-=1)}var o=e.open(n),i=1e4,u=250,d=~~(i/u);e.addEventListener("message",a,!1),setTimeout(r,u)}},{}]},{},[1])(1)});
