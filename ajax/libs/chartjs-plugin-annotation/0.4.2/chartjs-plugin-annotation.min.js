/*!
 * chartjs-plugin-annotation.js
 * http://chartjs.org/
 * Version: 0.4.2
 *
 * Copyright 2016 Evert Timberg
 * Released under the MIT license
 * https://github.com/chartjs/Chart.Annotation.js/blob/master/LICENSE.md
 */
!function e(t,a,n){function l(o,r){if(!a[o]){if(!t[o]){var s="function"==typeof require&&require;if(!r&&s)return s(o,!0);if(i)return i(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var c=a[o]={exports:{}};t[o][0].call(c.exports,function(e){var a=t[o][1][e];return l(a?a:e)},c,c.exports,e,t,a,n)}return a[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)l(n[o]);return l}({1:[function(e,t,a){},{}],2:[function(e,t,a){function n(e){return!isNaN(e)&&isFinite(e)}function l(e,t,a){var n="$";e[n+t]||(e[n+t]=e[t].bind(e),e[t]=function(){return a(e[n+t])})}t.exports={isValid:n,decorate:l}},{}],3:[function(e,t,a){function n(e,t){s.isArray(e.annotations)&&e.annotations.forEach(function(a){a.transition(t).draw(e.chart.ctx)})}function l(e){return e=s.configMerge(x,e),s.isArray(e.annotations)&&e.annotations.forEach(function(e){e.label=s.configMerge(m,e.label)}),e}function i(e,t){return e.filter(function(e){return!!b[e.type]}).map(function(e,a){var n=b[e.type],l=new n({_index:a,config:e});return l.setRanges(e,t),l})}function o(e,t,a,n){var l=t.filter(function(t){return!!t._model.ranges[e]}).map(function(t){return t._model.ranges[e]}),i=l.map(function(e){return Number(e.min)}).reduce(function(e,t){return isFinite(t)&&!isNaN(t)&&t<e?t:e},a),o=l.map(function(e){return Number(e.max)}).reduce(function(e,t){return isFinite(t)&&!isNaN(t)&&t>e?t:e},n);return{min:i,max:o}}var r=e("chart.js");r="function"==typeof r?r:window.Chart;var s=r.helpers,d=e("./helpers.js");r.Annotation=r.Annotation||{};var c="afterDraw",u="afterDatasetsDraw",f="beforeDatasetsDraw";r.Annotation.drawTimeOptions={afterDraw:c,afterDatasetsDraw:u,beforeDatasetsDraw:f};var b=r.Annotation.types={line:e("./types/line.js")(r),box:e("./types/box.js")(r)},x=r.Annotation.defaults={drawTime:c,annotations:[]},m=r.Annotation.labelDefaults={backgroundColor:"rgba(0,0,0,0.8)",fontFamily:r.defaults.global.defaultFontFamily,fontSize:r.defaults.global.defaultFontSize,fontStyle:"bold",fontColor:"#fff",xPadding:6,yPadding:6,cornerRadius:6,position:"center",xAdjust:0,yAdjust:0,enabled:!1,content:null},h={beforeInit:function(e){d.decorate(e,"buildScales",function(t){t(),Object.keys(e.scales).forEach(function(t){var a=e.scales[t];d.decorate(a,"determineDataLimits",function(n){if(n(),e.annotations){var l=o(t,e.annotations,a.min,a.max);a.min=l.min,a.max=l.max}})})})},beforeUpdate:function(e){var t=e.options.annotation;t=l(t||{}),s.isArray(t.annotations)&&(e.annotations=i(t.annotations,e),e.annotations._config=t)},afterScaleUpdate:function(e){s.isArray(e.annotations)&&e.annotations.forEach(function(t){t.configure(t.config,e)})},afterDraw:function(e,t){var a=e.annotations._config;a.drawTime==c&&n(e,t)},afterDatasetsDraw:function(e,t){var a=e.annotations._config;a.drawTime==u&&n(e,t)},beforeDatasetsDraw:function(e,t){var a=e.annotations._config;a.drawTime==f&&n(e,t)}};t.exports=h,r.pluginService.register(h)},{"./helpers.js":2,"./types/box.js":4,"./types/line.js":5,"chart.js":1}],4:[function(e,t,a){var n=e("../helpers.js");t.exports=function(e){var t=e.Element.extend({setRanges:function(e,t){var a=this._model=this._model||{},l=t.scales[e.xScaleID],i=t.scales[e.yScaleID],o=t.chartArea;a.ranges={},l&&(min=n.isValid(e.xMin)?e.xMin:l.getPixelForValue(o.left),max=n.isValid(e.xMax)?e.xMax:l.getPixelForValue(o.right),a.ranges[e.xScaleID]={min:Math.min(min,max),max:Math.max(min,max)}),i&&(min=n.isValid(e.yMin)?e.yMin:i.getPixelForValue(o.bottom),max=n.isValid(e.yMax)?e.yMax:i.getPixelForValue(o.top),a.ranges[e.yScaleID]={min:Math.min(min,max),max:Math.max(min,max)})},configure:function(e,t){var a=this._model=this._model||{},l=t.scales[e.xScaleID],i=t.scales[e.yScaleID],o=t.chartArea;a.clip={x1:o.left,x2:o.right,y1:o.top,y2:o.bottom};var r,s,d=o.left,c=o.top,u=o.right,f=o.bottom;l&&(r=n.isValid(e.xMin)?l.getPixelForValue(e.xMin):o.left,s=n.isValid(e.xMax)?l.getPixelForValue(e.xMax):o.right,d=Math.min(r,s),u=Math.max(r,s)),i&&(r=n.isValid(e.yMin)?i.getPixelForValue(e.yMin):o.bottom,s=n.isValid(e.yMax)?i.getPixelForValue(e.yMax):o.top,c=Math.min(r,s),f=Math.max(r,s)),a.left=d,a.top=c,a.right=u,a.bottom=f,a.borderColor=e.borderColor,a.borderWidth=e.borderWidth,a.backgroundColor=e.backgroundColor},draw:function(e){var t=this._view;e.save(),e.beginPath(),e.rect(t.clip.x1,t.clip.y1,t.clip.x2-t.clip.x1,t.clip.y2-t.clip.y1),e.clip(),e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,e.fillStyle=t.backgroundColor;var a=t.right-t.left,n=t.bottom-t.top;e.fillRect(t.left,t.top,a,n),e.strokeRect(t.left,t.top,a,n)}});return t}},{"../helpers.js":2}],5:[function(e,t,a){var n=e("chart.js");n="function"==typeof n?n:window.Chart;var l=n.helpers,i=e("../helpers.js");t.exports=function(e){function t(e,t,l,i,o){var r=(e.x2-e.x1)/(e.y2-e.y1),s=e.x1||0,d=function(t){return r*(t-e.y1)+s},c=function(t){return(t-s)/r+e.y1},u={},f=0,b=0;switch(!0){case e.mode==n&&"top"==e.labelPosition:b=o+e.labelYAdjust,f=t/2+e.labelXAdjust,u.y=e.y1+b,u.x=(isFinite(r)?d(u.y):e.x1)-f;break;case e.mode==n&&"bottom"==e.labelPosition:b=l+o+e.labelYAdjust,f=t/2+e.labelXAdjust,u.y=e.y2-b,u.x=(isFinite(r)?d(u.y):e.x1)-f;break;case e.mode==a&&"left"==e.labelPosition:f=i+e.labelXAdjust,b=-(l/2)+e.labelYAdjust,u.x=e.x1+f,u.y=c(u.x)+b;break;case e.mode==a&&"right"==e.labelPosition:f=t+i+e.labelXAdjust,b=-(l/2)+e.labelYAdjust,u.x=e.x2-f,u.y=c(u.x)+b;break;default:u.x=(e.x1+e.x2-t)/2+e.labelXAdjust,u.y=(e.y1+e.y2-l)/2+e.labelYAdjust}return u}var a="horizontal",n="vertical",o=e.Element.extend({setRanges:function(e){var t=this._model=l.clone(this._model)||{};t.ranges={},t.ranges[e.scaleID]={min:e.value,max:e.endValue||e.value}},configure:function(e,n){var o,r,s=this._model=l.clone(this._model)||{},d=n.scales[e.scaleID];d&&(o=i.isValid(e.value)?d.getPixelForValue(e.value):NaN,r=i.isValid(e.endValue)?d.getPixelForValue(e.endValue):o);var c=n.chartArea,u=n.chart.ctx;s.clip={x1:c.left,x2:c.right,y1:c.top,y2:c.bottom},isNaN(o)||(e.mode==a?(s.x1=c.left,s.x2=c.right,s.y1=o,s.y2=r):(s.y1=c.top,s.y2=c.bottom,s.x1=o,s.x2=r)),s.mode=e.mode,s.labelBackgroundColor=e.label.backgroundColor,s.labelFontFamily=e.label.fontFamily,s.labelFontSize=e.label.fontSize,s.labelFontStyle=e.label.fontStyle,s.labelFontColor=e.label.fontColor,s.labelXPadding=e.label.xPadding,s.labelYPadding=e.label.yPadding,s.labelCornerRadius=e.label.cornerRadius,s.labelPosition=e.label.position,s.labelXAdjust=e.label.xAdjust,s.labelYAdjust=e.label.yAdjust,s.labelEnabled=e.label.enabled,s.labelContent=e.label.content,u.font=l.fontString(s.labelFontSize,s.labelFontStyle,s.labelFontFamily);var f=u.measureText(s.labelContent).width,b=u.measureText("M").width,x=t(s,f,b,s.labelXPadding,s.labelYPadding);s.labelX=x.x-s.labelXPadding,s.labelY=x.y-s.labelYPadding,s.labelWidth=f+2*s.labelXPadding,s.labelHeight=b+2*s.labelYPadding,s.borderColor=e.borderColor,s.borderWidth=e.borderWidth,s.borderDash=e.borderDash||[],s.borderDashOffset=e.borderDashOffset||0},draw:function(e){var t=this._view;e.save(),e.beginPath(),e.rect(t.clip.x1,t.clip.y1,t.clip.x2-t.clip.x1,t.clip.y2-t.clip.y1),e.clip(),e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,e.setLineDash&&e.setLineDash(t.borderDash),e.lineDashOffset=t.borderDashOffset,e.beginPath(),e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.stroke(),e.restore(),t.labelEnabled&&t.labelContent&&(e.beginPath(),e.rect(t.clip.x1,t.clip.y1,t.clip.x2-t.clip.x1,t.clip.y2-t.clip.y1),e.clip(),e.fillStyle=t.labelBackgroundColor,l.drawRoundedRectangle(e,t.labelX,t.labelY,t.labelWidth,t.labelHeight,t.labelCornerRadius),e.fill(),e.font=l.fontString(t.labelFontSize,t.labelFontStyle,t.labelFontFamily),e.fillStyle=t.labelFontColor,e.textAlign="center",e.textBaseline="middle",e.fillText(t.labelContent,t.labelX+t.labelWidth/2,t.labelY+t.labelHeight/2))}});return o}},{"../helpers.js":2,"chart.js":1}]},{},[3]);