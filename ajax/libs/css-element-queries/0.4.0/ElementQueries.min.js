!function(e,t){"function"==typeof define&&define.amd?define(["./ResizeSensor.js"],t):"object"==typeof exports?module.exports=t(require("./ResizeSensor.js")):e.ElementQueries=t(e.ResizeSensor)}(this,function(e){var t=function(){function n(e){e||(e=document.documentElement);var t=window.getComputedStyle(e,null).fontSize;return parseFloat(t)||16}function i(e,t){var i=t.split(/\d/),r=i[i.length-1];switch(t=parseFloat(t),r){case"px":return t;case"em":return t*n(e);case"rem":return t*n();case"vw":return t*document.documentElement.clientWidth/100;case"vh":return t*document.documentElement.clientHeight/100;case"vmin":case"vmax":var o=document.documentElement.clientWidth/100,s=document.documentElement.clientHeight/100,a=Math["vmin"===r?"min":"max"];return t*a(o,s);default:return t}}function r(e){this.element=e,this.options={};var t,n,r,o,s,a,d,u=0,l=0;this.addOption=function(e){var t=[e.mode,e.property,e.value].join(",");this.options[t]=e};var c=["min-width","min-height","max-width","max-height"];this.call=function(){u=this.element.offsetWidth,l=this.element.offsetHeight,s={};for(t in this.options)this.options.hasOwnProperty(t)&&(n=this.options[t],r=i(this.element,n.value),o="width"==n.property?u:l,d=n.mode+"-"+n.property,a="","min"==n.mode&&o>=r&&(a+=n.value),"max"==n.mode&&r>=o&&(a+=n.value),s[d]||(s[d]=""),a&&-1===(" "+s[d]+" ").indexOf(" "+a+" ")&&(s[d]+=" "+a));for(var e in c)c.hasOwnProperty(e)&&(s[c[e]]?this.element.setAttribute(c[e],s[c[e]].substr(1)):this.element.removeAttribute(c[e]))}}function o(t,n){t.elementQueriesSetupInformation?t.elementQueriesSetupInformation.addOption(n):(t.elementQueriesSetupInformation=new r(t),t.elementQueriesSetupInformation.addOption(n),t.elementQueriesSensor=new e(t,function(){t.elementQueriesSetupInformation.call()})),t.elementQueriesSetupInformation.call(),h&&f.indexOf(t)<0&&f.push(t)}function s(e,t,n,i){"undefined"==typeof p[t]&&(p[t]={}),"undefined"==typeof p[t][n]&&(p[t][n]={}),"undefined"==typeof p[t][n][i]?p[t][n][i]=e:p[t][n][i]+=","+e}function a(){var e;if(document.querySelectorAll&&(e=document.querySelectorAll.bind(document)),e||"undefined"==typeof $$||(e=$$),e||"undefined"==typeof jQuery||(e=jQuery),!e)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return e}function d(){var e=a();for(var t in p)if(p.hasOwnProperty(t))for(var n in p[t])if(p[t].hasOwnProperty(n))for(var i in p[t][n])if(p[t][n].hasOwnProperty(i))for(var r=e(p[t][n][i]),s=0,d=r.length;d>s;s++)o(r[s],{mode:t,property:n,value:i})}function u(t){function n(){var e,n=!1;for(e in i)i.hasOwnProperty(e)&&r[e].minWidth&&t.offsetWidth>r[e].minWidth&&(n=e);if(n||(n=s),a!=n)if(d[n])i[a].style.display="none",i[n].style.display="block",a=n;else{var u=new Image;u.onload=function(){i[n].src=o[n],i[a].style.display="none",i[n].style.display="block",d[n]=!0,a=n},u.src=o[n]}else i[n].src=o[n]}var i=[],r=[],o=[],s=0,a=-1,d=[];for(var u in t.children)if(t.children.hasOwnProperty(u)&&t.children[u].tagName&&"img"===t.children[u].tagName.toLowerCase()){i.push(t.children[u]);var l=t.children[u].getAttribute("min-width")||t.children[u].getAttribute("data-min-width"),c=t.children[u].getAttribute("data-src")||t.children[u].getAttribute("url");o.push(c);var m={minWidth:l};r.push(m),l?t.children[u].style.display="none":(s=i.length-1,t.children[u].style.display="block")}a=s,t.resizeSensor=new e(t,n),n(),h&&f.push(t)}function l(){for(var e=a(),t=e("[data-responsive-image],[responsive-image]"),n=0,i=t.length;i>n;n++)u(t[n])}function c(e){var t,n;for(e=e.replace(/'/g,'"');null!==(t=y.exec(e));)for(n=t[1]+t[3],attrs=t[2];null!==(attrMatch=v.exec(attrs));)s(n,attrMatch[1],attrMatch[2],attrMatch[3])}function m(e){var t="";if(e)if("string"==typeof e)e=e.toLowerCase(),-1===e.indexOf("min-width")&&-1===e.indexOf("max-width")||c(e);else for(var n=0,i=e.length;i>n;n++)1===e[n].type?(t=e[n].selectorText||e[n].cssText,-1!==t.indexOf("min-height")||-1!==t.indexOf("max-height")?c(t):-1===t.indexOf("min-width")&&-1===t.indexOf("max-width")||c(t)):4===e[n].type&&m(e[n].cssRules||e[n].rules)}var h=!1,f=[],p={},y=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,v=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim,g=!1;this.init=function(e){h="undefined"==typeof e?!1:e;for(var t=0,n=document.styleSheets.length;n>t;t++)try{m(document.styleSheets[t].cssRules||document.styleSheets[t].rules||document.styleSheets[t].cssText)}catch(i){if("SecurityError"!==i.name)throw i}if(!g){var r=document.createElement("style");r.type="text/css",r.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img { width: 100%;}",document.getElementsByTagName("head")[0].appendChild(r),g=!0}d(),l()},this.update=function(e){this.init(e)},this.detach=function(){if(!this.withTracking)throw"withTracking is not enabled. We can not detach elements since we don not store it.Use ElementQueries.withTracking = true; before domready or call ElementQueryes.update(true).";for(var e;e=f.pop();)t.detach(e);f=[]}};t.update=function(e){t.instance.update(e)},t.detach=function(e){e.elementQueriesSetupInformation?(e.elementQueriesSensor.detach(),delete e.elementQueriesSetupInformation,delete e.elementQueriesSensor):e.resizeSensor&&(e.resizeSensor.detach(),delete e.resizeSensor)},t.withTracking=!1,t.init=function(){t.instance||(t.instance=new t),t.instance.init(t.withTracking)};var n=function(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var t=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(e(),clearInterval(t))},10);else window.onload=e};return t.listen=function(){n(t.init)},"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t:(window.ElementQueries=t,t.listen()),t});
//# sourceMappingURL=ElementQueries.min.js.map