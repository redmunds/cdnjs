!function(e){e.extend(e.fn,{livequery:function(i,u){var t,n=this;return e.each(e.livequery.queries,function(e,r){return n.selector!=r.selector||n.context!=r.context||i&&i.$lqguid!=r.fn.$lqguid||u&&u.$lqguid!=r.fn2.$lqguid?void 0:(t=r)&&!1}),t=t||new e.livequery(this.selector,this.context,i,u),t.stopped=!1,t.run(),this},expire:function(i,u){var t=this;return e.each(e.livequery.queries,function(n,r){t.selector!=r.selector||t.context!=r.context||i&&i.$lqguid!=r.fn.$lqguid||u&&u.$lqguid!=r.fn2.$lqguid||this.stopped||e.livequery.stop(r.id)}),this}}),e.livequery=function(i,u,t,n){return this.selector=i,this.context=u,this.fn=t,this.fn2=n,this.elements=[],this.stopped=!1,this.id=e.livequery.queries.push(this)-1,t.$lqguid=t.$lqguid||e.livequery.guid++,n&&(n.$lqguid=n.$lqguid||e.livequery.guid++),this},e.livequery.prototype={stop:function(){var e=this;this.fn2&&this.elements.each(function(i,u){e.fn2.apply(u)}),this.elements=[],this.stopped=!0},run:function(){if(!this.stopped){var i=this,u=this.elements,t=e(this.selector,this.context),n=t.not(u);this.elements=t,n.each(function(){i.fn.apply(this)}),this.fn2&&u.length>0&&e.each(u,function(u,n){e.inArray(n,t)<0&&i.fn2.apply(n)})}}},e.extend(e.livequery,{guid:0,queries:[],queue:[],running:!1,timeout:null,checkQueue:function(){if(e.livequery.running&&e.livequery.queue.length)for(var i=e.livequery.queue.length;i--;)e.livequery.queries[e.livequery.queue.shift()].run()},pause:function(){e.livequery.running=!1},play:function(){e.livequery.running=!0,e.livequery.run()},registerPlugin:function(){e.each(arguments,function(i,u){if(e.fn[u]){var t=e.fn[u];e.fn[u]=function(){var i=t.apply(this,arguments);return e.livequery.run(),i}}})},run:function(i){void 0!=i?e.inArray(i,e.livequery.queue)<0&&e.livequery.queue.push(i):e.each(e.livequery.queries,function(i){e.inArray(i,e.livequery.queue)<0&&e.livequery.queue.push(i)}),e.livequery.timeout&&clearTimeout(e.livequery.timeout),e.livequery.timeout=setTimeout(e.livequery.checkQueue,20)},stop:function(i){void 0!=i?e.livequery.queries[i].stop():e.each(e.livequery.queries,function(i){e.livequery.queries[i].stop()})}}),e.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html","prop","removeProp"),e(function(){e.livequery.play()})}(jQuery);