function js_beautify(e,n){function r(e){for(e="undefined"==typeof e?!1:e;A.length&&(" "===A[A.length-1]||A[A.length-1]===b||A[A.length-1]===j||e&&("\n"===A[A.length-1]||"\r"===A[A.length-1]));)A.pop()}function t(e){return e.replace(/^\s\s*|\s\s*$/,"")}function _(e){e=e.replace(/\x0d/g,"");for(var n=[],r=e.indexOf("\n");-1!==r;)n.push(e.substring(0,r)),e=e.substring(r+1),r=e.indexOf("\n");return e.length&&n.push(e),n}function a(){var e=V;V=!1,i(),V=e}function i(e,n){if(L.eat_next_space=!1,(!V||!s(L.mode))&&(e="undefined"==typeof e?!0:e,n="undefined"==typeof n?!0:n,n&&(L.if_line=!1,L.chain_extra_indentation=0),r(),A.length)){"\n"===A[A.length-1]&&e||(F=!0,A.push("\n")),j&&A.push(j);for(var t=0;t<L.indentation_level+L.chain_extra_indentation;t+=1)A.push(b);L.var_line&&L.var_line_reindented&&A.push(b)}}function T(){var e=" ";L.eat_next_space?L.eat_next_space=!1:"TK_COMMENT"===v?i():(A.length&&(e=A[A.length-1])," "!==e&&"\n"!==e&&e!==b&&A.push(" "))}function E(){F=!1,L.eat_next_space=!1,A.push(S)}function o(){L.indentation_level+=1}function f(){A.length&&A[A.length-1]===b&&A.pop()}function c(e){L&&I.push(L),L={previous_mode:L?L.mode:"BLOCK",mode:e,var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,if_line:!1,chain_extra_indentation:0,in_case_statement:!1,in_case:!1,case_body:!1,eat_next_space:!1,indentation_level:L?L.indentation_level+(L.var_line&&L.var_line_reindented?1:0):0,ternary_depth:0}}function s(e){return"[EXPRESSION]"===e||"[INDENTED-EXPRESSION]"===e}function O(e){return l(e,["[EXPRESSION]","(EXPRESSION)","(FOR-EXPRESSION)","(COND-EXPRESSION)"])}function d(){if(W="DO_BLOCK"===L.mode,I.length>0){var e=L.mode;L=I.pop(),L.previous_mode=e}}function K(e,n){for(var r=0;r<e.length;r++){var _=t(e[r]);if(_.charAt(0)!==n)return!1}return!0}function h(e){return l(e,["case","return","do","if","throw","else"])}function l(e,n){for(var r=0;r<n.length;r+=1)if(n[r]===e)return!0;return!1}function u(e){for(var n,r=!1,t="",_=0,a="",i=0;r||_<e.length;)if(n=e.charAt(_),_++,r){if(r=!1,"x"===n)a=e.substr(_,2),_+=2;else{if("u"!==n){t+="\\"+n;continue}a=e.substr(_,4),_+=4}if(!a.match(/^[0123456789abcdefABCDEF]+$/))return e;if(i=parseInt(a,16),i>=0&&32>i){t+="x"===n?"\\x"+a:"\\u"+a;continue}if(34==i||39===i||92==i)t+="\\"+String.fromCharCode(i);else{if("x"===n&&i>126&&255>=i)return e;t+=String.fromCharCode(i)}}else"\\"==n?r=!0:t+=n;return t}function N(e){for(var n=B,r=p.charAt(n);l(r,D)&&r!==e;){if(n++,n>=ee)return 0;r=p.charAt(n)}return r}function R(){var e,n;if(U=0,B>=ee)return["","TK_EOF"];w=!1;var _=p.charAt(B);B+=1;var a=V&&s(L.mode);if(a){for(var T=0;l(_,D);){if("\n"===_?(r(),A.push("\n"),F=!0,T=0):"	"===_?T+=4:"\r"===_||(T+=1),B>=ee)return["","TK_EOF"];_=p.charAt(B),B+=1}if(F)for(e=0;T>e;e++)A.push(" ")}else{for(;l(_,D);){if("\n"===_&&(U+=q?q>=U?1:0:1),B>=ee)return["","TK_EOF"];_=p.charAt(B),B+=1}if(G&&U>1)for(e=0;U>e;e+=1)i(0===e),F=!0;w=U>0}if(l(_,X)){if(ee>B)for(;l(p.charAt(B),X)&&(_+=p.charAt(B),B+=1,B!==ee););if(B!==ee&&_.match(/^[0-9]+[Ee]$/)&&("-"===p.charAt(B)||"+"===p.charAt(B))){var E=p.charAt(B);B+=1;var o=R();return _+=E+o[0],[_,"TK_WORD"]}return"in"===_?[_,"TK_OPERATOR"]:(!w||"TK_OPERATOR"===v||"TK_EQUALS"===v||L.if_line||!G&&"var"===C||i(),[_,"TK_WORD"])}if("("===_||"["===_)return[_,"TK_START_EXPR"];if(")"===_||"]"===_)return[_,"TK_END_EXPR"];if("{"===_)return[_,"TK_START_BLOCK"];if("}"===_)return[_,"TK_END_BLOCK"];if(";"===_)return[_,"TK_SEMICOLON"];if("/"===_){var f="",c=!0;if("*"===p.charAt(B)){if(B+=1,ee>B)for(;ee>B&&("*"!==p.charAt(B)||!p.charAt(B+1)||"/"!==p.charAt(B+1))&&(_=p.charAt(B),f+=_,"\n"!==_&&"\r"!==_||(c=!1),B+=1,!(B>=ee)););return B+=2,c&&0===U?["/*"+f+"*/","TK_INLINE_COMMENT"]:["/*"+f+"*/","TK_BLOCK_COMMENT"]}if("/"===p.charAt(B)){for(f=_;"\r"!==p.charAt(B)&&"\n"!==p.charAt(B)&&(f+=p.charAt(B),B+=1,!(B>=ee)););return w&&i(),[f,"TK_COMMENT"]}}if("'"===_||'"'===_||"/"===_&&("TK_WORD"===v&&h(C)||")"===C&&l(L.previous_mode,["(COND-EXPRESSION)","(FOR-EXPRESSION)"])||"TK_COMMA"===v||"TK_COMMENT"===v||"TK_START_EXPR"===v||"TK_START_BLOCK"===v||"TK_END_BLOCK"===v||"TK_OPERATOR"===v||"TK_EQUALS"===v||"TK_EOF"===v||"TK_SEMICOLON"===v)){var O=_,d=!1,K=!1;if(n=_,ee>B)if("/"===O){for(var N=!1;d||N||p.charAt(B)!==O;)if(n+=p.charAt(B),d?d=!1:(d="\\"===p.charAt(B),"["===p.charAt(B)?N=!0:"]"===p.charAt(B)&&(N=!1)),B+=1,B>=ee)return[n,"TK_STRING"]}else for(;d||p.charAt(B)!==O;)n+=p.charAt(B),d?("x"!==p.charAt(B)&&"u"!==p.charAt(B)||(K=!0),d=!1):d="\\"===p.charAt(B),B+=1;if(B+=1,n+=O,K&&Z&&(n=u(n)),"/"===O)for(;ee>B&&l(p.charAt(B),X);)n+=p.charAt(B),B+=1;return[n,"TK_STRING"]}if("#"===_){if(0===A.length&&"!"===p.charAt(B)){for(n=_;ee>B&&"\n"!==_;)_=p.charAt(B),n+=_,B+=1;return A.push(t(n)+"\n"),i(),R()}var S="#";if(ee>B&&l(p.charAt(B),x)){do _=p.charAt(B),S+=_,B+=1;while(ee>B&&"#"!==_&&"="!==_);return"#"===_||("["===p.charAt(B)&&"]"===p.charAt(B+1)?(S+="[]",B+=2):"{"===p.charAt(B)&&"}"===p.charAt(B+1)&&(S+="{}",B+=2)),[S,"TK_WORD"]}}if("<"===_&&"<!--"===p.substring(B-1,B+3)){for(B+=3,_="<!--";"\n"!==p.charAt(B)&&ee>B;)_+=p.charAt(B),B++;return L.in_html_comment=!0,[_,"TK_COMMENT"]}if("-"===_&&L.in_html_comment&&"-->"===p.substring(B-1,B+2))return L.in_html_comment=!1,B+=2,w&&i(),["-->","TK_COMMENT"];if("."===_)return[_,"TK_DOT"];if(l(_,M)){for(;ee>B&&l(_+p.charAt(B),M)&&(_+=p.charAt(B),B+=1,!(B>=ee)););return","===_?[_,"TK_COMMA"]:"="===_?[_,"TK_EQUALS"]:[_,"TK_OPERATOR"]}return[_,"TK_UNKNOWN"]}var p,A,S,v,C,m,P,L,I,b,D,X,M,B,g,x,y,k,W,w,F,U,j="";n=n?n:{};var Q;void 0!==n.space_after_anon_function&&void 0===n.jslint_happy&&(n.jslint_happy=n.space_after_anon_function),void 0!==n.braces_on_own_line&&(Q=n.braces_on_own_line?"expand":"collapse"),Q=n.brace_style?n.brace_style:Q?Q:"collapse";var J=n.indent_size?n.indent_size:4,$=n.indent_char?n.indent_char:" ",G="undefined"==typeof n.preserve_newlines?!0:n.preserve_newlines,z="undefined"==typeof n.break_chained_methods?!1:n.break_chained_methods,q="undefined"==typeof n.max_preserve_newlines?!1:n.max_preserve_newlines,H="undefined"===n.jslint_happy?!1:n.jslint_happy,V="undefined"==typeof n.keep_array_indentation?!1:n.keep_array_indentation,Y="undefined"==typeof n.space_before_conditional?!0:n.space_before_conditional,Z="undefined"==typeof n.unescape_strings?!1:n.unescape_strings;F=!1;var ee=e.length;for(b="";J>0;)b+=$,J-=1;for(;e&&(" "===e.charAt(0)||"	"===e.charAt(0));)j+=e.charAt(0),e=e.substring(1);for(p=e,P="",v="TK_START_EXPR",C="",m="",A=[],W=!1,D="\n\r	 ".split(""),X="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),x="0123456789".split(""),M="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",M+=" <%= <% %> <?= <? ?>",M=M.split(" "),g="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),I=[],c("BLOCK"),B=0;;){var ne=R();if(S=ne[0],k=ne[1],"TK_EOF"===k)break;switch(k){case"TK_START_EXPR":if("["===S){if("TK_WORD"===v||")"===C){l(C,g)&&T(),c("(EXPRESSION)"),E();break}"[EXPRESSION]"===L.mode||"[INDENTED-EXPRESSION]"===L.mode?"]"===m&&","===C?("[EXPRESSION]"===L.mode&&(L.mode="[INDENTED-EXPRESSION]",V||o()),c("[EXPRESSION]"),V||i()):"["===C?("[EXPRESSION]"===L.mode&&(L.mode="[INDENTED-EXPRESSION]",V||o()),c("[EXPRESSION]"),V||i()):c("[EXPRESSION]"):c("[EXPRESSION]")}else c("for"===P?"(FOR-EXPRESSION)":l(P,["if","while"])?"(COND-EXPRESSION)":"(EXPRESSION)");";"===C||"TK_START_BLOCK"===v?i():"TK_END_EXPR"===v||"TK_START_EXPR"===v||"TK_END_BLOCK"===v||"."===C?w&&i():"TK_WORD"!==v&&"TK_OPERATOR"!==v?T():"function"===P||"typeof"===P?H&&T():(l(C,g)||"catch"===C)&&Y&&T(),E();break;case"TK_DOT":h(C)?T():")"===C&&(z||w)&&(L.chain_extra_indentation=1,i(!0,!1)),E();break;case"TK_END_EXPR":if("]"===S)if(V){if("}"===C){f(),E(),d();break}}else if("[INDENTED-EXPRESSION]"===L.mode&&"]"===C){d(),i(),E();break}d(),E();break;case"TK_START_BLOCK":if(c("do"===P?"DO_BLOCK":"BLOCK"),"expand"===Q||"expand-strict"===Q){var re=!1;"expand-strict"===Q?(re="}"===N(),re||i(!0)):"TK_OPERATOR"!==v&&("="===C||h(C)&&"else"!==C?T():i(!0)),E(),re||o()}else"TK_OPERATOR"!==v&&"TK_START_EXPR"!==v?"TK_START_BLOCK"===v?i():T():s(L.previous_mode)&&","===C&&("}"===m?T():i()),o(),E();break;case"TK_END_BLOCK":d(),"expand"===Q||"expand-strict"===Q?("{"!==C&&i(),E()):("TK_START_BLOCK"===v?F?f():r():s(L.mode)&&V?(V=!1,i(),V=!0):i(),E());break;case"TK_WORD":if(W){T(),E(),T(),W=!1;break}if(y="NONE","function"===S){if(L.var_line&&"TK_EQUALS"!==v&&(L.var_line_reindented=!0),(F||";"===C)&&"{"!==C&&"TK_BLOCK_COMMENT"!==v&&"TK_COMMENT"!==v){U=F?U:0,G||(U=1);for(var te=0;2-U>te;te++)i(!1)}"TK_WORD"===v?"get"===C||"set"===C||"new"===C||"return"===C?T():i():"TK_OPERATOR"===v||"="===C?T():O(L.mode)||i(),E(),P=S;break}if("case"===S||"default"===S&&L.in_case_statement){i(),L.case_body&&(L.indentation_level--,L.case_body=!1,f()),E(),L.in_case=!0,L.in_case_statement=!0;break}"TK_END_BLOCK"===v?l(S.toLowerCase(),["else","catch","finally"])?"expand"===Q||"end-expand"===Q||"expand-strict"===Q?y="NEWLINE":(y="SPACE",T()):y="NEWLINE":"TK_SEMICOLON"!==v||"BLOCK"!==L.mode&&"DO_BLOCK"!==L.mode?"TK_SEMICOLON"===v&&O(L.mode)?y="SPACE":"TK_STRING"===v?y="NEWLINE":"TK_WORD"===v?("else"===C&&r(!0),y="SPACE"):"TK_START_BLOCK"===v?y="NEWLINE":"TK_END_EXPR"===v&&(T(),y="NEWLINE"):y="NEWLINE",l(S,g)&&")"!==C&&(y="else"===C?"SPACE":"NEWLINE"),L.if_line&&"TK_END_EXPR"===v&&(L.if_line=!1),l(S.toLowerCase(),["else","catch","finally"])?"TK_END_BLOCK"!==v||"expand"===Q||"end-expand"===Q||"expand-strict"===Q?i():(r(!0),T()):"NEWLINE"===y?h(C)?T():"TK_END_EXPR"!==v?"TK_START_EXPR"===v&&"var"===S||":"===C||("if"===S&&"else"===P&&"{"!==C?T():(L.var_line=!1,L.var_line_reindented=!1,i())):l(S,g)&&")"!==C&&(L.var_line=!1,L.var_line_reindented=!1,i()):s(L.mode)&&","===C&&"}"===m?i():"SPACE"===y&&T(),E(),P=S,"var"===S&&(L.var_line=!0,L.var_line_reindented=!1,L.var_line_tainted=!1),"if"===S&&(L.if_line=!0),"else"===S&&(L.if_line=!1);break;case"TK_SEMICOLON":E(),L.var_line=!1,L.var_line_reindented=!1,"OBJECT"===L.mode&&(L.mode="BLOCK");break;case"TK_STRING":"TK_END_EXPR"===v&&l(L.previous_mode,["(COND-EXPRESSION)","(FOR-EXPRESSION)"])?T():"TK_WORD"===v?T():"TK_COMMA"===v||"TK_START_EXPR"===v||"TK_EQUALS"===v||"TK_OPERATOR"===v?G&&w&&"OBJECT"!==L.mode&&(i(),A.push(b)):i(),E();break;case"TK_EQUALS":L.var_line&&(L.var_line_tainted=!0),T(),E(),T();break;case"TK_COMMA":if(L.var_line){if((O(L.mode)||"TK_END_BLOCK"===v)&&(L.var_line_tainted=!1),L.var_line_tainted){E(),L.var_line_reindented=!0,L.var_line_tainted=!1,i();break}L.var_line_tainted=!1,E(),T();break}"TK_COMMENT"===v&&i(),"TK_END_BLOCK"===v&&"(EXPRESSION)"!==L.mode?(E(),"OBJECT"===L.mode&&"}"===C?i():T()):"OBJECT"===L.mode?(E(),i()):(E(),T());break;case"TK_OPERATOR":var _e=!0,ae=!0;if(h(C)){T(),E();break}if("*"===S&&"TK_DOT"===v&&!m.match(/^\d+$/)){E();break}if(":"===S&&L.in_case){L.case_body=!0,o(),E(),i(),L.in_case=!1;break}if("::"===S){E();break}l(S,["--","++","!"])||l(S,["-","+"])&&(l(v,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||l(C,g)||","==C)?(_e=!1,ae=!1,";"===C&&O(L.mode)&&(_e=!0),"TK_WORD"===v&&l(C,g)&&(_e=!0),"BLOCK"!==L.mode||"{"!==C&&";"!==C||i()):":"===S?0===L.ternary_depth?("BLOCK"===L.mode&&(L.mode="OBJECT"),_e=!1):L.ternary_depth-=1:"?"===S&&(L.ternary_depth+=1),_e&&T(),E(),ae&&T();break;case"TK_BLOCK_COMMENT":var ie,Te=_(S);if(K(Te.slice(1),"*"))for(i(),A.push(Te[0]),ie=1;ie<Te.length;ie++)i(),A.push(" "),A.push(t(Te[ie]));else for(Te.length>1?i():"TK_END_BLOCK"===v?i():T(),ie=0;ie<Te.length;ie++)A.push(Te[ie]),A.push("\n");"\n"!==N("\n")&&i();break;case"TK_INLINE_COMMENT":T(),E(),O(L.mode)?T():a();break;case"TK_COMMENT":","!==C||w||r(!0),"TK_COMMENT"!==v&&(w?i():T()),E(),i();break;case"TK_UNKNOWN":E()}m=C,v=k,C=S}var Ee=j+A.join("").replace(/[\r\n ]+$/,"");return Ee}"undefined"!=typeof exports&&(exports.js_beautify=js_beautify);
//# sourceMappingURL=beautify.min.js.map