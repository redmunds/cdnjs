function js_beautify(e,n){function r(e){for(e="undefined"==typeof e?!1:e;b.length&&(" "===b[b.length-1]||b[b.length-1]===g||b[b.length-1]===$||e&&("\n"===b[b.length-1]||"\r"===b[b.length-1]));)b.pop()}function t(e){return e.replace(/^\s\s*|\s\s*$/,"")}function _(e){e=e.replace(/\x0d/g,"");for(var n=[],r=e.indexOf("\n");-1!==r;)n.push(e.substring(0,r)),e=e.substring(r+1),r=e.indexOf("\n");return e.length&&n.push(e),n}function i(){return"\n"===b[b.length-1]}function a(e,n){var r=e.length-1;for(0>r&&(r+=e.length),r>e.length-1&&(r=e.length-1),r++;r-- >0;)if(r in e&&e[r]===n)return r;return-1}function o(e){if(e="undefined"==typeof e?!1:e,_e&&!e){var n="",r=0,t=a(b,"\n")+1;t<b.length&&(n=b.slice(t).join(""),r=n.length+m.length+(G?1:0),r>=_e&&(e=!0))}(V&&Q||e)&&!i()&&(T(!1,!0),J=!0,Q=!1)}function T(e,n){if(J=!1,G=!1,!n&&";"!==I)for(;"STATEMENT"===D.mode&&!D.if_block;)K();b.length&&(!e&&i()||b.push("\n"))}function E(){i()&&(ne&&l(D.mode)&&D.whitespace_before.length?b.push(D.whitespace_before.join("")+""):($&&b.push($),f(D.indentation_level),f(D.var_line&&D.var_line_reindented),f(J)))}function f(e){if(void 0===e?e=1:"number"!=typeof e&&(e=e?1:0),""!=I)for(var n=0;e>n;n+=1)b.push(g)}function c(){var e=" ";b.length&&(e=b[b.length-1]),i()||" "===e||e===g||b.push(" ")}function d(e){e=e||m,E(),J=!1,G&&(c(),G=!1),b.push(e)}function s(){D.indentation_level+=1}function O(e){D&&X.push(D),D={previous_mode:D?D.mode:"BLOCK",mode:e,var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,if_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:D?D.indentation_level+(D.var_line&&D.var_line_reindented?1:0):0,ternary_depth:0}}function l(e){return"[EXPRESSION]"===e||"[INDENTED-EXPRESSION]"===e}function h(e){return S(e,["[EXPRESSION]","(EXPRESSION)","(FOR-EXPRESSION)","(COND-EXPRESSION)"])}function K(){if(X.length>0){var e=D.mode;D=X.pop(),D.previous_mode=e}}function u(){return"do"===I||"else"===I&&"if"!==m||"TK_END_EXPR"===P&&("(FOR-EXPRESSION)"===D.previous_mode||"(COND-EXPRESSION)"===D.previous_mode)?(o(),O("STATEMENT"),s(),J=!1,!0):!1}function N(e,n){for(var r=0;r<e.length;r++){var _=t(e[r]);if(_.charAt(0)!==n)return!1}return!0}function R(e){return S(e,["case","return","do","if","throw","else"])}function S(e,n){for(var r=0;r<n.length;r+=1)if(n[r]===e)return!0;return!1}function A(e){for(var n,r=!1,t="",_=0,i="",a=0;r||_<e.length;)if(n=e.charAt(_),_++,r){if(r=!1,"x"===n)i=e.substr(_,2),_+=2;else{if("u"!==n){t+="\\"+n;continue}i=e.substr(_,4),_+=4}if(!i.match(/^[0123456789abcdefABCDEF]+$/))return e;if(a=parseInt(i,16),a>=0&&32>a){t+="x"===n?"\\x"+i:"\\u"+i;continue}if(34==a||39===a||92==a)t+="\\"+String.fromCharCode(a);else{if("x"===n&&a>126&&255>=a)return e;t+=String.fromCharCode(a)}}else"\\"==n?r=!0:t+=n;return t}function p(e){for(var n=w,r=C.charAt(n);S(r,k)&&r!==e;){if(n++,n>=ie)return 0;r=C.charAt(n)}return r}function v(){if(F=0,w>=ie)return["","TK_EOF"];Q=!1,D.whitespace_before=[];var e=C.charAt(w);for(w+=1;S(e,k);){if("\n"===e?(F+=1,D.whitespace_before=[]):F&&(e===g?D.whitespace_before.push(g):"\r"!==e&&D.whitespace_before.push(" ")),w>=ie)return["","TK_EOF"];e=C.charAt(w),w+=1}if(S(e,B)){if(ie>w)for(;S(C.charAt(w),B)&&(e+=C.charAt(w),w+=1,w!==ie););if(w!==ie&&e.match(/^[0-9]+[Ee]$/)&&("-"===C.charAt(w)||"+"===C.charAt(w))){var n=C.charAt(w);w+=1;var r=v();return e+=n+r[0],[e,"TK_WORD"]}return"in"===e?[e,"TK_OPERATOR"]:[e,"TK_WORD"]}if("("===e||"["===e)return[e,"TK_START_EXPR"];if(")"===e||"]"===e)return[e,"TK_END_EXPR"];if("{"===e)return[e,"TK_START_BLOCK"];if("}"===e)return[e,"TK_END_BLOCK"];if(";"===e)return[e,"TK_SEMICOLON"];if("/"===e){var _="",i=!0;if("*"===C.charAt(w)){if(w+=1,ie>w)for(;ie>w&&("*"!==C.charAt(w)||!C.charAt(w+1)||"/"!==C.charAt(w+1))&&(e=C.charAt(w),_+=e,"\n"!==e&&"\r"!==e||(i=!1),w+=1,!(w>=ie)););return w+=2,i&&0===F?["/*"+_+"*/","TK_INLINE_COMMENT"]:["/*"+_+"*/","TK_BLOCK_COMMENT"]}if("/"===C.charAt(w)){for(_=e;"\r"!==C.charAt(w)&&"\n"!==C.charAt(w)&&(_+=C.charAt(w),w+=1,!(w>=ie)););return[_,"TK_COMMENT"]}}if("'"===e||'"'===e||"/"===e&&("TK_WORD"===P&&R(I)||")"===I&&S(D.previous_mode,["(COND-EXPRESSION)","(FOR-EXPRESSION)"])||"TK_COMMA"===P||"TK_COMMENT"===P||"TK_START_EXPR"===P||"TK_START_BLOCK"===P||"TK_END_BLOCK"===P||"TK_OPERATOR"===P||"TK_EQUALS"===P||"TK_EOF"===P||"TK_SEMICOLON"===P)){var a=e,o=!1,T=!1,E=e;if(ie>w)if("/"===a){for(var f=!1;o||f||C.charAt(w)!==a;)if(E+=C.charAt(w),o?o=!1:(o="\\"===C.charAt(w),"["===C.charAt(w)?f=!0:"]"===C.charAt(w)&&(f=!1)),w+=1,w>=ie)return[E,"TK_STRING"]}else for(;o||C.charAt(w)!==a;)if(E+=C.charAt(w),o?("x"!==C.charAt(w)&&"u"!==C.charAt(w)||(T=!0),o=!1):o="\\"===C.charAt(w),w+=1,w>=ie)return[E,"TK_STRING"];if(w+=1,E+=a,T&&te&&(E=A(E)),"/"===a)for(;ie>w&&S(C.charAt(w),B);)E+=C.charAt(w),w+=1;return[E,"TK_STRING"]}if("#"===e){if(0===b.length&&"!"===C.charAt(w)){for(E=e;ie>w&&"\n"!==e;)e=C.charAt(w),E+=e,w+=1;return[t(E)+"\n","TK_UNKNOWN"]}var c="#";if(ie>w&&S(C.charAt(w),W)){do e=C.charAt(w),c+=e,w+=1;while(ie>w&&"#"!==e&&"="!==e);return"#"===e||("["===C.charAt(w)&&"]"===C.charAt(w+1)?(c+="[]",w+=2):"{"===C.charAt(w)&&"}"===C.charAt(w+1)&&(c+="{}",w+=2)),[c,"TK_WORD"]}}if("<"===e&&"<!--"===C.substring(w-1,w+3)){for(w+=3,e="<!--";"\n"!==C.charAt(w)&&ie>w;)e+=C.charAt(w),w++;return D.in_html_comment=!0,[e,"TK_COMMENT"]}if("-"===e&&D.in_html_comment&&"-->"===C.substring(w-1,w+2))return D.in_html_comment=!1,w+=2,["-->","TK_COMMENT"];if("."===e)return[e,"TK_DOT"];if(S(e,y)){for(;ie>w&&S(e+C.charAt(w),y)&&(e+=C.charAt(w),w+=1,!(w>=ie)););return","===e?[e,"TK_COMMA"]:"="===e?[e,"TK_EQUALS"]:[e,"TK_OPERATOR"]}return[e,"TK_UNKNOWN"]}var C,b,m,P,I,L,M,D,X,g,k,B,y,w,x,W,U,j,Q,F,J,G,$="";n=n?n:{};var z;void 0!==n.space_after_anon_function&&void 0===n.jslint_happy&&(n.jslint_happy=n.space_after_anon_function),void 0!==n.braces_on_own_line&&(z=n.braces_on_own_line?"expand":"collapse"),z=n.brace_style?n.brace_style:z?z:"collapse";var q=n.indent_size?parseInt(n.indent_size):4,H=n.indent_char?n.indent_char:" ",V="undefined"==typeof n.preserve_newlines?!0:n.preserve_newlines,Y="undefined"==typeof n.break_chained_methods?!1:n.break_chained_methods,Z="undefined"==typeof n.max_preserve_newlines?0:parseInt(n.max_preserve_newlines),ee="undefined"===n.jslint_happy?!1:n.jslint_happy,ne="undefined"==typeof n.keep_array_indentation?!1:n.keep_array_indentation,re="undefined"==typeof n.space_before_conditional?!0:n.space_before_conditional,te="undefined"==typeof n.unescape_strings?!1:n.unescape_strings,_e="undefined"==typeof n.wrap_line_length?0:parseInt(n.wrap_line_length),ie=e.length;for(g="";q>0;)g+=H,q-=1;for(;e&&(" "===e.charAt(0)||"	"===e.charAt(0));)$+=e.charAt(0),e=e.substring(1);for(C=e,M="",P="TK_START_EXPR",I="",L="",b=[],J=!1,G=!1,k="\n\r	 ".split(""),B="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),W="0123456789".split(""),y="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",y+=" <%= <% %> <?= <? ?>",y=y.split(" "),x="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),X=[],O("BLOCK"),w=0;;){var ae=v();if(m=ae[0],j=ae[1],"TK_EOF"===j)break;var oe=ne&&l(D.mode);if(oe)for(Ee=0;F>Ee;Ee+=1)T(!0);else if(Q=F>0,Z&&F>Z&&(F=Z),V&&F>1)for(T(),Ee=1;F>Ee;Ee+=1)T(!0);switch(j){case"TK_START_EXPR":if(u(),"["===m){if("TK_WORD"===P||")"===I){S(I,x)&&(G=!0),O("(EXPRESSION)"),d();break}"[EXPRESSION]"===D.mode||"[INDENTED-EXPRESSION]"===D.mode?"]"===L&&","===I?("[EXPRESSION]"===D.mode&&(D.mode="[INDENTED-EXPRESSION]",ne||s()),O("[EXPRESSION]"),ne||T()):"["===I?("[EXPRESSION]"===D.mode&&(D.mode="[INDENTED-EXPRESSION]",ne||s()),O("[EXPRESSION]"),ne||T()):O("[EXPRESSION]"):O("[EXPRESSION]")}else O("for"===I?"(FOR-EXPRESSION)":S(I,["if","while"])?"(COND-EXPRESSION)":"(EXPRESSION)");";"===I||"TK_START_BLOCK"===P?T():"TK_END_EXPR"===P||"TK_START_EXPR"===P||"TK_END_BLOCK"===P||"."===I?Q&&T():"TK_WORD"!==P&&"TK_OPERATOR"!==P?G=!0:"function"===M||"typeof"===M?ee&&(G=!0):(S(I,x)||"catch"===I)&&re&&(G=!0),"("===m&&("TK_EQUALS"!==P&&"TK_OPERATOR"!==P||"OBJECT"!==D.mode&&o()),d();break;case"TK_DOT":R(I)?G=!0:o(")"===I&&Y),d();break;case"TK_END_EXPR":if("]"===m&&!ne&&"[INDENTED-EXPRESSION]"===D.mode&&"]"===I){K(),T(),d();break}K(),d(),D.do_while&&"(COND-EXPRESSION)"===D.previous_mode&&(D.previous_mode="(EXPRESSION)",D.do_block=!1,D.do_while=!1);break;case"TK_START_BLOCK":if(O("BLOCK"),"expand"===z||"expand-strict"===z){var Te=!1;"expand-strict"===z?(Te="}"===p(),Te||T()):"TK_OPERATOR"!==P&&("TK_EQUALS"===P||R(I)&&"else"!==I?G=!0:T()),d(),Te||s()}else"TK_OPERATOR"!==P&&"TK_START_EXPR"!==P?"TK_START_BLOCK"===P?T():G=!0:l(D.previous_mode)&&","===I&&("}"===L?G=!0:T()),d(),s();break;case"TK_END_BLOCK":K(),"expand"===z||"expand-strict"===z?("{"!==I&&T(),d()):("TK_START_BLOCK"===P||(l(D.mode)&&ne?(ne=!1,T(),ne=!0):T()),d());break;case"TK_WORD":if(u()||Q&&"TK_OPERATOR"!==P&&"TK_EQUALS"!==P&&(V||"var"!==I)&&T(),D.do_block&&!D.do_while){if("while"===m){G=!0,d(),G=!0,D.do_while=!0;break}T(),D.do_block=!1}if(D.if_block&&"else"!==m){for(;"STATEMENT"===D.mode;)K();D.if_block=!1}if(U="NONE","function"===m){if(D.var_line&&"TK_EQUALS"!==P&&(D.var_line_reindented=!0),(i()||";"===I)&&"{"!==I&&"TK_BLOCK_COMMENT"!==P&&"TK_COMMENT"!==P){F=i()?F:0,V||(F=1);for(var Ee=0;2-F>Ee;Ee++)T(!0)}"TK_WORD"===P?"get"===I||"set"===I||"new"===I||"return"===I?G=!0:T():"TK_OPERATOR"===P||"="===I?G=!0:h(D.mode)||T(),d(),M=m;break}if("case"===m||"default"===m&&D.in_case_statement){T(),D.case_body&&(D.indentation_level--,D.case_body=!1),d(),D.in_case=!0,D.in_case_statement=!0;break}"TK_END_BLOCK"===P?S(m.toLowerCase(),["else","catch","finally"])?"expand"===z||"end-expand"===z||"expand-strict"===z?U="NEWLINE":(U="SPACE",G=!0):U="NEWLINE":"TK_SEMICOLON"===P&&"BLOCK"===D.mode?U="NEWLINE":"TK_SEMICOLON"===P&&h(D.mode)?U="SPACE":"TK_STRING"===P?U="NEWLINE":"TK_WORD"===P?U="SPACE":"TK_START_BLOCK"===P?U="NEWLINE":"TK_END_EXPR"===P&&(G=!0,U="NEWLINE"),S(m,x)&&")"!==I&&(U="else"===I?"SPACE":"NEWLINE"),"TK_COMMA"!==P&&"TK_START_EXPR"!==P&&"TK_EQUALS"!==P&&"TK_OPERATOR"!==P||"OBJECT"!==D.mode&&o(),S(m.toLowerCase(),["else","catch","finally"])?"TK_END_BLOCK"!==P||"expand"===z||"end-expand"===z||"expand-strict"===z?T():(r(!0),G=!0):"NEWLINE"===U?R(I)?G=!0:"TK_END_EXPR"!==P?"TK_START_EXPR"===P&&"var"===m||":"===I||("if"===m&&"else"===M&&"{"!==I?G=!0:(D.var_line=!1,D.var_line_reindented=!1,T())):S(m,x)&&")"!==I&&(D.var_line=!1,D.var_line_reindented=!1,T()):l(D.mode)&&","===I&&"}"===L?T():"SPACE"===U&&(G=!0),d(),M=m,"var"===m&&(D.var_line=!0,D.var_line_reindented=!1,D.var_line_tainted=!1),"do"===m&&(D.do_block=!0),"if"===m&&(D.if_block=!0);break;case"TK_SEMICOLON":for(;"STATEMENT"===D.mode&&!D.if_block;)K();d(),D.var_line=!1,D.var_line_reindented=!1,"OBJECT"===D.mode&&(D.mode="BLOCK");break;case"TK_STRING":u()?G=!0:"TK_WORD"===P?G=!0:"TK_COMMA"===P||"TK_START_EXPR"===P||"TK_EQUALS"===P||"TK_OPERATOR"===P?"OBJECT"!==D.mode&&o():T(),d();break;case"TK_EQUALS":D.var_line&&(D.var_line_tainted=!0),G=!0,d(),G=!0;break;case"TK_COMMA":if(D.var_line){if((h(D.mode)||"TK_END_BLOCK"===P)&&(D.var_line_tainted=!1),D.var_line_tainted){d(),D.var_line_reindented=!0,D.var_line_tainted=!1,T();break}D.var_line_tainted=!1,d(),G=!0;break}"TK_END_BLOCK"===P&&"(EXPRESSION)"!==D.mode?(d(),"OBJECT"===D.mode&&"}"===I?T():G=!0):"OBJECT"===D.mode?(d(),T()):(d(),G=!0);break;case"TK_OPERATOR":var fe=!0,ce=!0;if(R(I)){G=!0,d();break}if("*"===m&&"TK_DOT"===P&&!L.match(/^\d+$/)){d();break}if(":"===m&&D.in_case){D.case_body=!0,s(),d(),T(),D.in_case=!1;break}if("::"===m){d();break}S(m,["--","++","!"])||S(m,["-","+"])&&(S(P,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||S(I,x)||","==I)?(fe=!1,ce=!1,";"===I&&h(D.mode)&&(fe=!0),"TK_WORD"===P&&S(I,x)&&(fe=!0),"BLOCK"!==D.mode&&"STATEMENT"!==D.mode||"{"!==I&&";"!==I||T()):":"===m?0===D.ternary_depth?("BLOCK"===D.mode&&(D.mode="OBJECT"),fe=!1):D.ternary_depth-=1:"?"===m&&(D.ternary_depth+=1),G=G||fe,d(),G=ce;break;case"TK_BLOCK_COMMENT":var de,se=_(m);if(N(se.slice(1),"*"))for(T(!1,!0),d(se[0]),de=1;de<se.length;de++)T(!1,!0),d(" "+t(se[de]));else for(se.length>1?T(!1,!0):"TK_END_BLOCK"===P?T(!1,!0):G=!0,d(se[0]),b.push("\n"),de=1;de<se.length;de++)b.push(se[de]),b.push("\n");"\n"!==p("\n")&&T(!1,!0);break;case"TK_INLINE_COMMENT":G=!0,d(),G=!0;break;case"TK_COMMENT":Q&&T(!1,!0),","!==I||Q||r(!0),G=!0,d(),T(!1,!0);break;case"TK_UNKNOWN":d(),"\n"===m[m.length-1]&&T()}"TK_INLINE_COMMENT"!==j&&"TK_COMMENT"!==j&&"TK_UNKNOWN"!==j&&(L=I,P=j,I=m)}var Oe=$+b.join("").replace(/[\r\n ]+$/,"");return Oe}"undefined"!=typeof exports&&(exports.js_beautify=js_beautify);
//# sourceMappingURL=beautify.min.js.map