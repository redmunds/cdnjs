function js_beautify(e,n){function r(e){for(e="undefined"==typeof e?!1:e;p.length&&(" "===p[p.length-1]||p[p.length-1]===m||p[p.length-1]===U||e&&("\n"===p[p.length-1]||"\r"===p[p.length-1]));)p.pop()}function t(e){return e.replace(/^\s\s*|\s\s*$/,"")}function _(e){e=e.replace(/\x0d/g,"");for(var n=[],r=e.indexOf("\n");-1!==r;)n.push(e.substring(0,r)),e=e.substring(r+1),r=e.indexOf("\n");return e.length&&n.push(e),n}function a(){var e=q;q=!1,i(),q=e}function i(e){if(L.eat_next_space=!1,(!q||!c(L.mode))&&(e="undefined"==typeof e?!0:e,L.if_line=!1,r(),p.length)){"\n"===p[p.length-1]&&e||(w=!0,p.push("\n")),U&&p.push(U);for(var n=0;n<L.indentation_level;n+=1)p.push(m);L.var_line&&L.var_line_reindented&&p.push(m),L.case_body&&p.push(m)}}function T(){if("TK_COMMENT"===A)return i();if(L.eat_next_space)return void(L.eat_next_space=!1);var e=" ";p.length&&(e=p[p.length-1])," "!==e&&"\n"!==e&&e!==m&&p.push(" ")}function E(){w=!1,L.eat_next_space=!1,p.push(S)}function o(){L.indentation_level+=1}function f(){p.length&&p[p.length-1]===m&&p.pop()}function s(e){L&&P.push(L),L={previous_mode:L?L.mode:"BLOCK",mode:e,var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,if_line:!1,in_case_statement:!1,in_case:!1,case_body:!1,eat_next_space:!1,indentation_baseline:-1,indentation_level:L?L.indentation_level+(L.case_body?1:0)+(L.var_line&&L.var_line_reindented?1:0):0,ternary_depth:0}}function c(e){return"[EXPRESSION]"===e||"[INDENTED-EXPRESSION]"===e}function O(e){return h(e,["[EXPRESSION]","(EXPRESSION)","(FOR-EXPRESSION)","(COND-EXPRESSION)"])}function d(){if(x="DO_BLOCK"===L.mode,P.length>0){var e=L.mode;L=P.pop(),L.previous_mode=e}}function K(e,n){for(var r=0;r<e.length;r++){var _=t(e[r]);if(_.charAt(0)!==n)return!1}return!0}function l(e){return h(e,["case","return","do","if","throw","else"])}function h(e,n){for(var r=0;r<n.length;r+=1)if(n[r]===e)return!0;return!1}function N(e){for(var n=X,r=R.charAt(n);h(r,b)&&r!==e;){if(n++,n>=Z)return 0;r=R.charAt(n)}return r}function u(){var e,n;if(F=0,X>=Z)return["","TK_EOF"];W=!1;var _=R.charAt(X);X+=1;var a=q&&c(L.mode);if(a){for(var T=0;h(_,b);){if("\n"===_?(r(),p.push("\n"),w=!0,T=0):"	"===_?T+=4:"\r"===_||(T+=1),X>=Z)return["","TK_EOF"];_=R.charAt(X),X+=1}if(-1===L.indentation_baseline&&(L.indentation_baseline=T),w){for(e=0;e<L.indentation_level+1;e+=1)p.push(m);if(-1!==L.indentation_baseline)for(e=0;e<T-L.indentation_baseline;e++)p.push(" ")}}else{for(;h(_,b);){if("\n"===_&&(F+=$?$>=F?1:0:1),X>=Z)return["","TK_EOF"];_=R.charAt(X),X+=1}if(J&&F>1)for(e=0;F>e;e+=1)i(0===e),w=!0;W=F>0}if(h(_,D)){if(Z>X)for(;h(R.charAt(X),D)&&(_+=R.charAt(X),X+=1,X!==Z););if(X!==Z&&_.match(/^[0-9]+[Ee]$/)&&("-"===R.charAt(X)||"+"===R.charAt(X))){var E=R.charAt(X);X+=1;var o=u(X);return _+=E+o[0],[_,"TK_WORD"]}return"in"===_?[_,"TK_OPERATOR"]:(!W||"TK_OPERATOR"===A||"TK_EQUALS"===A||L.if_line||!J&&"var"===v||i(),[_,"TK_WORD"])}if("("===_||"["===_)return[_,"TK_START_EXPR"];if(")"===_||"]"===_)return[_,"TK_END_EXPR"];if("{"===_)return[_,"TK_START_BLOCK"];if("}"===_)return[_,"TK_END_BLOCK"];if(";"===_)return[_,"TK_SEMICOLON"];if("/"===_){var f="",s=!0;if("*"===R.charAt(X)){if(X+=1,Z>X)for(;Z>X&&("*"!==R.charAt(X)||!R.charAt(X+1)||"/"!==R.charAt(X+1))&&(_=R.charAt(X),f+=_,"\n"!==_&&"\r"!==_||(s=!1),X+=1,!(X>=Z)););return X+=2,s&&0===F?["/*"+f+"*/","TK_INLINE_COMMENT"]:["/*"+f+"*/","TK_BLOCK_COMMENT"]}if("/"===R.charAt(X)){for(f=_;"\r"!==R.charAt(X)&&"\n"!==R.charAt(X)&&(f+=R.charAt(X),X+=1,!(X>=Z)););return W&&i(),[f,"TK_COMMENT"]}}if("'"===_||'"'===_||"/"===_&&("TK_WORD"===A&&l(v)||")"===v&&h(L.previous_mode,["(COND-EXPRESSION)","(FOR-EXPRESSION)"])||"TK_COMMA"===A||"TK_COMMENT"===A||"TK_START_EXPR"===A||"TK_START_BLOCK"===A||"TK_END_BLOCK"===A||"TK_OPERATOR"===A||"TK_EQUALS"===A||"TK_EOF"===A||"TK_SEMICOLON"===A)){var O=_,d=!1,K=0,N=0;if(n=_,Z>X)if("/"===O){for(var S=!1;d||S||R.charAt(X)!==O;)if(n+=R.charAt(X),d?d=!1:(d="\\"===R.charAt(X),"["===R.charAt(X)?S=!0:"]"===R.charAt(X)&&(S=!1)),X+=1,X>=Z)return[n,"TK_STRING"]}else for(;d||R.charAt(X)!==O;)if(n+=R.charAt(X),K&&K>=N&&(K=parseInt(n.substr(-N),16),K&&K>=32&&126>=K&&(K=String.fromCharCode(K),n=n.substr(0,n.length-N-2)+(K===O||"\\"===K?"\\":"")+K),K=0),K?K++:d?(d=!1,Y&&("x"===R.charAt(X)?(K++,N=2):"u"===R.charAt(X)&&(K++,N=4))):d="\\"===R.charAt(X),X+=1,X>=Z)return[n,"TK_STRING"];if(X+=1,n+=O,"/"===O)for(;Z>X&&h(R.charAt(X),D);)n+=R.charAt(X),X+=1;return[n,"TK_STRING"]}if("#"===_){if(0===p.length&&"!"===R.charAt(X)){for(n=_;Z>X&&"\n"!==_;)_=R.charAt(X),n+=_,X+=1;return p.push(t(n)+"\n"),i(),u()}var C="#";if(Z>X&&h(R.charAt(X),y)){do _=R.charAt(X),C+=_,X+=1;while(Z>X&&"#"!==_&&"="!==_);return"#"===_||("["===R.charAt(X)&&"]"===R.charAt(X+1)?(C+="[]",X+=2):"{"===R.charAt(X)&&"}"===R.charAt(X+1)&&(C+="{}",X+=2)),[C,"TK_WORD"]}}if("<"===_&&"<!--"===R.substring(X-1,X+3)){for(X+=3,_="<!--";"\n"!==R.charAt(X)&&Z>X;)_+=R.charAt(X),X++;return L.in_html_comment=!0,[_,"TK_COMMENT"]}if("-"===_&&L.in_html_comment&&"-->"===R.substring(X-1,X+2))return L.in_html_comment=!1,X+=2,W&&i(),["-->","TK_COMMENT"];if(h(_,M)){for(;Z>X&&h(_+R.charAt(X),M)&&(_+=R.charAt(X),X+=1,!(X>=Z)););return","===_?[_,"TK_COMMA"]:"="===_?[_,"TK_EQUALS"]:[_,"TK_OPERATOR"]}return[_,"TK_UNKNOWN"]}var R,p,S,A,v,C,I,L,P,m,b,D,M,X,B,y,g,k,x,W,w,F,U="";n=n?n:{};var j;void 0!==n.space_after_anon_function&&void 0===n.jslint_happy&&(n.jslint_happy=n.space_after_anon_function),void 0!==n.braces_on_own_line&&(j=n.braces_on_own_line?"expand":"collapse"),j=n.brace_style?n.brace_style:j?j:"collapse";var G=n.indent_size?n.indent_size:4,Q=n.indent_char?n.indent_char:" ",J="undefined"==typeof n.preserve_newlines?!0:n.preserve_newlines,$="undefined"==typeof n.max_preserve_newlines?!1:n.max_preserve_newlines,z="undefined"===n.jslint_happy?!1:n.jslint_happy,q="undefined"==typeof n.keep_array_indentation?!1:n.keep_array_indentation,H="undefined"==typeof n.space_before_conditional?!0:n.space_before_conditional,V="undefined"==typeof n.indent_case?!1:n.indent_case,Y="undefined"==typeof n.unescape_strings?!1:n.unescape_strings;w=!1;var Z=e.length;for(m="";G>0;)m+=Q,G-=1;for(;e&&(" "===e.charAt(0)||"	"===e.charAt(0));)U+=e.charAt(0),e=e.substring(1);for(R=e,I="",A="TK_START_EXPR",v="",C="",p=[],x=!1,b="\n\r	 ".split(""),D="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),y="0123456789".split(""),M="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",M+=" <%= <% %> <?= <? ?>",M=M.split(" "),B="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),P=[],s("BLOCK"),X=0;;){var ee=u(X);if(S=ee[0],k=ee[1],"TK_EOF"===k)break;switch(k){case"TK_START_EXPR":if("["===S){if("TK_WORD"===A||")"===v){h(v,B)&&T(),s("(EXPRESSION)"),E();break}"[EXPRESSION]"===L.mode||"[INDENTED-EXPRESSION]"===L.mode?"]"===C&&","===v?("[EXPRESSION]"===L.mode&&(L.mode="[INDENTED-EXPRESSION]",q||o()),s("[EXPRESSION]"),q||i()):"["===v?("[EXPRESSION]"===L.mode&&(L.mode="[INDENTED-EXPRESSION]",q||o()),s("[EXPRESSION]"),q||i()):s("[EXPRESSION]"):s("[EXPRESSION]")}else s("for"===I?"(FOR-EXPRESSION)":h(I,["if","while"])?"(COND-EXPRESSION)":"(EXPRESSION)");";"===v||"TK_START_BLOCK"===A?i():"TK_END_EXPR"===A||"TK_START_EXPR"===A||"TK_END_BLOCK"===A||"."===v?W&&i():"TK_WORD"!==A&&"TK_OPERATOR"!==A?T():"function"===I||"typeof"===I?z&&T():(h(v,B)||"catch"===v)&&H&&T(),E();break;case"TK_END_EXPR":if("]"===S)if(q){if("}"===v){f(),E(),d();break}}else if("[INDENTED-EXPRESSION]"===L.mode&&"]"===v){d(),i(),E();break}d(),E();break;case"TK_START_BLOCK":if(s("do"===I?"DO_BLOCK":"BLOCK"),"expand"===j||"expand-strict"===j){var ne=!1;"expand-strict"===j?(ne="}"===N(),ne||i(!0)):"TK_OPERATOR"!==A&&("="===v||l(v)&&"else"!==v?T():i(!0)),E(),ne||o()}else"TK_OPERATOR"!==A&&"TK_START_EXPR"!==A?"TK_START_BLOCK"===A?i():T():c(L.previous_mode)&&","===v&&("}"===C?T():i()),o(),E();break;case"TK_END_BLOCK":d(),"expand"===j||"expand-strict"===j?("{"!==v&&i(),E()):("TK_START_BLOCK"===A?w?f():r():c(L.mode)&&q?(q=!1,i(),q=!0):i(),E());break;case"TK_WORD":if(x){T(),E(),T(),x=!1;break}if(g="NONE","function"===S){if(L.var_line&&"TK_EQUALS"!==A&&(L.var_line_reindented=!0),(w||";"===v)&&"{"!==v&&"TK_BLOCK_COMMENT"!==A&&"TK_COMMENT"!==A){F=w?F:0,J||(F=1);for(var re=0;2-F>re;re++)i(!1)}"TK_WORD"===A?"get"===v||"set"===v||"new"===v||"return"===v?T():i():"TK_OPERATOR"===A||"="===v?T():O(L.mode)||i(),E(),I=S;break}if("case"===S||"default"===S&&L.in_case_statement){":"===v||L.case_body?f():(V||L.indentation_level--,i(),V||L.indentation_level++),E(),L.in_case=!0,L.in_case_statement=!0,L.case_body=!1;break}"TK_END_BLOCK"===A?h(S.toLowerCase(),["else","catch","finally"])?"expand"===j||"end-expand"===j||"expand-strict"===j?g="NEWLINE":(g="SPACE",T()):g="NEWLINE":"TK_SEMICOLON"!==A||"BLOCK"!==L.mode&&"DO_BLOCK"!==L.mode?"TK_SEMICOLON"===A&&O(L.mode)?g="SPACE":"TK_STRING"===A?g="NEWLINE":"TK_WORD"===A?("else"===v&&r(!0),g="SPACE"):"TK_START_BLOCK"===A?g="NEWLINE":"TK_END_EXPR"===A&&(T(),g="NEWLINE"):g="NEWLINE",h(S,B)&&")"!==v&&(g="else"===v?"SPACE":"NEWLINE"),L.if_line&&"TK_END_EXPR"===A&&(L.if_line=!1),h(S.toLowerCase(),["else","catch","finally"])?"TK_END_BLOCK"!==A||"expand"===j||"end-expand"===j||"expand-strict"===j?i():(r(!0),T()):"NEWLINE"===g?l(v)?T():"TK_END_EXPR"!==A?"TK_START_EXPR"===A&&"var"===S||":"===v||("if"===S&&"else"===I&&"{"!==v?T():(L.var_line=!1,L.var_line_reindented=!1,i())):h(S,B)&&")"!==v&&(L.var_line=!1,L.var_line_reindented=!1,i()):c(L.mode)&&","===v&&"}"===C?i():"SPACE"===g&&T(),E(),I=S,"var"===S&&(L.var_line=!0,L.var_line_reindented=!1,L.var_line_tainted=!1),"if"===S&&(L.if_line=!0),"else"===S&&(L.if_line=!1);break;case"TK_SEMICOLON":E(),L.var_line=!1,L.var_line_reindented=!1,"OBJECT"===L.mode&&(L.mode="BLOCK");break;case"TK_STRING":"TK_END_EXPR"===A&&h(L.previous_mode,["(COND-EXPRESSION)","(FOR-EXPRESSION)"])?T():"TK_COMMENT"===A||"TK_STRING"===A||"TK_START_BLOCK"===A||"TK_END_BLOCK"===A||"TK_SEMICOLON"===A?i():"TK_WORD"===A&&T(),E();break;case"TK_EQUALS":L.var_line&&(L.var_line_tainted=!0),T(),E(),T();break;case"TK_COMMA":if(L.var_line){if((O(L.mode)||"TK_END_BLOCK"===A)&&(L.var_line_tainted=!1),L.var_line_tainted){E(),L.var_line_reindented=!0,L.var_line_tainted=!1,i();break}L.var_line_tainted=!1,E(),T();break}"TK_COMMENT"===A&&i(),"TK_END_BLOCK"===A&&"(EXPRESSION)"!==L.mode?(E(),"OBJECT"===L.mode&&"}"===v?i():T()):"OBJECT"===L.mode?(E(),i()):(E(),T());break;case"TK_OPERATOR":var te=!0,_e=!0;if(l(v)){T(),E();break}if("*"===S&&"TK_UNKNOWN"===A&&!C.match(/^\d+$/)){E();break}if(":"===S&&L.in_case){V&&(L.case_body=!0),E(),i(),L.in_case=!1;break}if("::"===S){E();break}h(S,["--","++","!"])||h(S,["-","+"])&&(h(A,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||h(v,B))?(te=!1,_e=!1,";"===v&&O(L.mode)&&(te=!0),"TK_WORD"===A&&h(v,B)&&(te=!0),"BLOCK"!==L.mode||"{"!==v&&";"!==v||i()):"."===S?te=!1:":"===S?0===L.ternary_depth?("BLOCK"===L.mode&&(L.mode="OBJECT"),te=!1):L.ternary_depth-=1:"?"===S&&(L.ternary_depth+=1),te&&T(),E(),_e&&T();break;case"TK_BLOCK_COMMENT":var ae,ie=_(S);if(K(ie.slice(1),"*"))for(i(),p.push(ie[0]),ae=1;ae<ie.length;ae++)i(),p.push(" "),p.push(t(ie[ae]));else for(ie.length>1?i():"TK_END_BLOCK"===A?i():T(),ae=0;ae<ie.length;ae++)p.push(ie[ae]),p.push("\n");"\n"!==N("\n")&&i();break;case"TK_INLINE_COMMENT":T(),E(),O(L.mode)?T():a();break;case"TK_COMMENT":","!==v||W||r(!0),"TK_COMMENT"!==A&&(W?i():T()),E(),i();break;case"TK_UNKNOWN":l(v)&&T(),E()}C=v,A=k,v=S}var Te=U+p.join("").replace(/[\r\n ]+$/,"");return Te}"undefined"!=typeof exports&&(exports.js_beautify=js_beautify);
//# sourceMappingURL=beautify.min.js.map