function js_beautify(e,n){"use strict";var t=new Beautifier(e,n);return t.beautify()}function Beautifier(e,n){"use strict";function t(e){for(e=void 0===e?!1:e;X.length&&(" "===X[X.length-1]||X[X.length-1]===H||X[X.length-1]===fe||e&&("\n"===X[X.length-1]||"\r"===X[X.length-1]));)X.pop()}function r(e){return e.replace(/^\s\s*|\s\s*$/,"")}function i(e){e=e.replace(/\x0d/g,"");for(var n=[],t=e.indexOf("\n");-1!==t;)n.push(e.substring(0,t)),e=e.substring(t+1),t=e.indexOf("\n");return e.length&&n.push(e),n}function _(){return X.length&&"\n"===X[X.length-1]}function a(e,n){var t=e.length-1;for(0>t&&(t+=e.length),t>e.length-1&&(t=e.length-1),t++;t-- >0;)if(t in e&&e[t]===n)return t;return-1}function o(e){if(e=void 0===e?!1:e,Te.wrap_line_length&&!e){var n="",t=0,r=a(X,"\n")+1;r<X.length&&(n=X.slice(r).join(""),t=n.length+U.length+(oe?1:0),t>=Te.wrap_line_length&&(e=!0))}(Te.preserve_newlines&&ie||e)&&!_()&&(l(!1,!0),ae=!0,ie=!1)}function l(e,n){if(ae=!1,oe=!1,!n&&";"!==F)for(;$.mode===de.Statement&&!$.if_block;)p();$.mode===de.ArrayLiteral&&($.multiline_array=!0),X.length&&(!e&&_()||X.push("\n"))}function c(){_()&&(Te.keep_array_indentation&&h($.mode)&&le.length?X.push(le.join("")+""):(fe&&X.push(fe),s($.indentation_level),s($.var_line&&$.var_line_reindented),s(ae)))}function s(e){if(void 0===e?e=1:"number"!=typeof e&&(e=e?1:0),""!==F)for(var n=0;e>n;n+=1)X.push(H)}function d(){if(oe&&X.length){var e=X[X.length-1];_()||" "===e||e===H||X.push(" ")}}function T(e){e=e||U,c(),ae=!1,d(),oe=!1,X.push(e)}function f(){$.indentation_level+=1}function u(e){$&&q.push($),$={previous_mode:$?$.mode:de.BlockStatement,mode:e,var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,multiline_array:!1,if_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:$?$.indentation_level+($.var_line&&$.var_line_reindented?1:0):0,ternary_depth:0}}function h(e){return e===de.ArrayLiteral}function K(e){return A(e,[de.ArrayLiteral,de.Expression,de.ForInitializer,de.Conditional])}function p(){if(q.length>0){var e=$.mode;$=q.pop(),$.previous_mode=e}}function E(){return"do"===F||"else"===F&&"if"!==U||"TK_END_EXPR"===z&&($.previous_mode===de.ForInitializer||$.previous_mode===de.Conditional)?(o(),u(de.Statement),f(),ae=!1,!0):!1}function O(e,n){for(var t=0;t<e.length;t++){var i=r(e[t]);if(i.charAt(0)!==n)return!1}return!0}function v(e){return A(e,["case","return","do","if","throw","else"])}function A(e,n){for(var t=0;t<n.length;t+=1)if(n[t]===e)return!0;return!1}function m(e){for(var n,t=!1,r="",i=0,_="",a=0;t||i<e.length;)if(n=e.charAt(i),i++,t){if(t=!1,"x"===n)_=e.substr(i,2),i+=2;else{if("u"!==n){r+="\\"+n;continue}_=e.substr(i,4),i+=4}if(!_.match(/^[0123456789abcdefABCDEF]+$/))return e;if(a=parseInt(_,16),a>=0&&32>a){r+="x"===n?"\\x"+_:"\\u"+_;continue}if(34===a||39===a||92===a)r+="\\"+String.fromCharCode(a);else{if("x"===n&&a>126&&255>=a)return e;r+=String.fromCharCode(a)}}else"\\"===n?t=!0:r+=n;return r}function R(e){for(var n=Z,t=j.charAt(n);A(t,J)&&t!==e;){if(n++,n>=ce)return!1;t=j.charAt(n)}return t===e}function N(){var e;if(_e=0,Z>=ce)return["","TK_EOF"];ie=!1,le=[];var n=j.charAt(Z);for(Z+=1;A(n,J);){if("\n"===n?(_e+=1,le=[]):_e&&(n===H?le.push(H):"\r"!==n&&le.push(" ")),Z>=ce)return["","TK_EOF"];n=j.charAt(Z),Z+=1}if(A(n,V)){if(ce>Z)for(;A(j.charAt(Z),V)&&(n+=j.charAt(Z),Z+=1,Z!==ce););if(Z!==ce&&n.match(/^[0-9]+[Ee]$/)&&("-"===j.charAt(Z)||"+"===j.charAt(Z))){var t=j.charAt(Z);Z+=1;var i=N();return n+=t+i[0],[n,"TK_WORD"]}return"in"===n?[n,"TK_OPERATOR"]:[n,"TK_WORD"]}if("("===n||"["===n)return[n,"TK_START_EXPR"];if(")"===n||"]"===n)return[n,"TK_END_EXPR"];if("{"===n)return[n,"TK_START_BLOCK"];if("}"===n)return[n,"TK_END_BLOCK"];if(";"===n)return[n,"TK_SEMICOLON"];if("/"===n){var _="",a=!0;if("*"===j.charAt(Z)){if(Z+=1,ce>Z)for(;ce>Z&&("*"!==j.charAt(Z)||!j.charAt(Z+1)||"/"!==j.charAt(Z+1))&&(n=j.charAt(Z),_+=n,"\n"!==n&&"\r"!==n||(a=!1),Z+=1,!(Z>=ce)););return Z+=2,a&&0===_e?["/*"+_+"*/","TK_INLINE_COMMENT"]:["/*"+_+"*/","TK_BLOCK_COMMENT"]}if("/"===j.charAt(Z)){for(_=n;"\r"!==j.charAt(Z)&&"\n"!==j.charAt(Z)&&(_+=j.charAt(Z),Z+=1,!(Z>=ce)););return[_,"TK_COMMENT"]}}if("'"===n||'"'===n||"/"===n&&("TK_WORD"===z&&v(F)||"TK_END_EXPR"===z&&A($.previous_mode,[de.Conditional,de.ForInitializer])||A(z,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var o=n,l=!1,c=!1;if(e=n,ce>Z)if("/"===o){for(var s=!1;l||s||j.charAt(Z)!==o;)if(e+=j.charAt(Z),l?l=!1:(l="\\"===j.charAt(Z),"["===j.charAt(Z)?s=!0:"]"===j.charAt(Z)&&(s=!1)),Z+=1,Z>=ce)return[e,"TK_STRING"]}else for(;l||j.charAt(Z)!==o;)if(e+=j.charAt(Z),l?("x"!==j.charAt(Z)&&"u"!==j.charAt(Z)||(c=!0),l=!1):l="\\"===j.charAt(Z),Z+=1,Z>=ce)return[e,"TK_STRING"];if(Z+=1,e+=o,c&&Te.unescape_strings&&(e=m(e)),"/"===o)for(;ce>Z&&A(j.charAt(Z),V);)e+=j.charAt(Z),Z+=1;return[e,"TK_STRING"]}if("#"===n){if(0===X.length&&"!"===j.charAt(Z)){for(e=n;ce>Z&&"\n"!==n;)n=j.charAt(Z),e+=n,Z+=1;return[r(e)+"\n","TK_UNKNOWN"]}var d="#";if(ce>Z&&A(j.charAt(Z),ne)){do n=j.charAt(Z),d+=n,Z+=1;while(ce>Z&&"#"!==n&&"="!==n);return"#"===n||("["===j.charAt(Z)&&"]"===j.charAt(Z+1)?(d+="[]",Z+=2):"{"===j.charAt(Z)&&"}"===j.charAt(Z+1)&&(d+="{}",Z+=2)),[d,"TK_WORD"]}}if("<"===n&&"<!--"===j.substring(Z-1,Z+3)){for(Z+=3,n="<!--";"\n"!==j.charAt(Z)&&ce>Z;)n+=j.charAt(Z),Z++;return $.in_html_comment=!0,[n,"TK_COMMENT"]}if("-"===n&&$.in_html_comment&&"-->"===j.substring(Z-1,Z+2))return $.in_html_comment=!1,Z+=2,["-->","TK_COMMENT"];if("."===n)return[n,"TK_DOT"];if(A(n,Y)){for(;ce>Z&&A(n+j.charAt(Z),Y)&&(n+=j.charAt(Z),Z+=1,!(Z>=ce)););return","===n?[n,"TK_COMMA"]:"="===n?[n,"TK_EQUALS"]:[n,"TK_OPERATOR"]}return[n,"TK_UNKNOWN"]}function b(){if(E(),"["===U){if("TK_WORD"===z||")"===F)return A(F,ee)&&(oe=!0),u(de.Expression),void T();h($.mode)&&("["===F||"]"===Q&&","===F)&&(Te.keep_array_indentation||l())}else u("for"===F?de.ForInitializer:A(F,["if","while"])?de.Conditional:de.Expression);";"===F||"TK_START_BLOCK"===z?l():"TK_END_EXPR"===z||"TK_START_EXPR"===z||"TK_END_BLOCK"===z||"."===F?ie&&l():"TK_WORD"!==z&&"TK_OPERATOR"!==z?oe=!0:"function"===G||"typeof"===G?Te.jslint_happy&&(oe=!0):(A(F,ee)||"catch"===F)&&Te.space_before_conditional&&(oe=!0),"("===U&&("TK_EQUALS"!==z&&"TK_OPERATOR"!==z||$.mode!==de.ObjectLiteral&&o()),T(),"["===U&&(u(de.ArrayLiteral),f())}function S(){for(;$.mode===de.Statement;)p();"]"===U&&h($.mode)&&$.multiline_array&&!Te.keep_array_indentation&&l(),p(),T(),$.do_while&&$.previous_mode===de.Conditional&&($.previous_mode=de.Expression,$.do_block=!1,$.do_while=!1)}function L(){u(de.BlockStatement);var e=R("}");"expand-strict"===Te.brace_style?e||l():"expand"===Te.brace_style?"TK_OPERATOR"!==z&&("TK_EQUALS"===z||v(F)&&"else"!==F?oe=!0:l()):"TK_OPERATOR"!==z&&"TK_START_EXPR"!==z?"TK_START_BLOCK"===z?l():oe=!0:h($.previous_mode)&&","===F&&("}"===Q?oe=!0:l()),T(),f()}function y(){for(;$.mode===de.Statement;)p();p(),"expand"===Te.brace_style||"expand-strict"===Te.brace_style?"{"!==F&&l():"TK_START_BLOCK"!==z&&(h($.mode)&&Te.keep_array_indentation?(Te.keep_array_indentation=!1,l(),Te.keep_array_indentation=!0):l()),T()}function C(){if(E()||ie&&"TK_OPERATOR"!==z&&"TK_EQUALS"!==z&&(Te.preserve_newlines||"var"!==F)&&l(),$.do_block&&!$.do_while){if("while"===U)return oe=!0,T(),oe=!0,void($.do_while=!0);l(),$.do_block=!1}if($.if_block&&"else"!==U){for(;$.mode===de.Statement;)p();$.if_block=!1}if("function"===U){if($.var_line&&"TK_EQUALS"!==z&&($.var_line_reindented=!0),(_()||";"===F)&&"{"!==F&&"TK_BLOCK_COMMENT"!==z&&"TK_COMMENT"!==z){_e=_()?_e:0,Te.preserve_newlines||(_e=1);for(var e=0;2-_e>e;e++)l(!0)}return"TK_WORD"===z?"get"===F||"set"===F||"new"===F||"return"===F?oe=!0:l():"TK_OPERATOR"===z||"="===F?oe=!0:K($.mode)||l(),T(),void(G=U)}return"case"===U||"default"===U&&$.in_case_statement?(l(),$.case_body&&($.indentation_level--,$.case_body=!1),T(),$.in_case=!0,void($.in_case_statement=!0)):(te="NONE","TK_END_BLOCK"===z?A(U,["else","catch","finally"])?"expand"===Te.brace_style||"end-expand"===Te.brace_style||"expand-strict"===Te.brace_style?te="NEWLINE":(te="SPACE",oe=!0):te="NEWLINE":"TK_SEMICOLON"===z&&$.mode===de.BlockStatement?te="NEWLINE":"TK_SEMICOLON"===z&&K($.mode)?te="SPACE":"TK_STRING"===z?te="NEWLINE":"TK_WORD"===z?te="SPACE":"TK_START_BLOCK"===z?te="NEWLINE":"TK_END_EXPR"===z&&(oe=!0,te="NEWLINE"),A(U,ee)&&")"!==F&&(te="else"===F?"SPACE":"NEWLINE"),"TK_COMMA"!==z&&"TK_START_EXPR"!==z&&"TK_EQUALS"!==z&&"TK_OPERATOR"!==z||$.mode!==de.ObjectLiteral&&o(),A(U,["else","catch","finally"])?"TK_END_BLOCK"!==z||"expand"===Te.brace_style||"end-expand"===Te.brace_style||"expand-strict"===Te.brace_style?l():(t(!0),oe=!0):"NEWLINE"===te?v(F)?oe=!0:"TK_END_EXPR"!==z?"TK_START_EXPR"===z&&"var"===U||":"===F||("if"===U&&"else"===G&&"{"!==F?oe=!0:($.var_line=!1,$.var_line_reindented=!1,l())):A(U,ee)&&")"!==F&&($.var_line=!1,$.var_line_reindented=!1,l()):h($.mode)&&","===F&&"}"===Q?l():"SPACE"===te&&(oe=!0),T(),G=U,"var"===U&&($.var_line=!0,$.var_line_reindented=!1,$.var_line_tainted=!1),"do"===U&&($.do_block=!0),void("if"===U&&($.if_block=!0)))}function g(){for(;$.mode===de.Statement&&!$.if_block;)p();T(),$.var_line=!1,$.var_line_reindented=!1,$.mode===de.ObjectLiteral&&($.mode=de.BlockStatement)}function M(){E()?oe=!0:"TK_WORD"===z?oe=!0:"TK_COMMA"===z||"TK_START_EXPR"===z||"TK_EQUALS"===z||"TK_OPERATOR"===z?$.mode!==de.ObjectLiteral&&o():l(),T()}function k(){$.var_line&&($.var_line_tainted=!0),oe=!0,T(),oe=!0}function P(){return $.var_line?((K($.mode)||"TK_END_BLOCK"===z)&&($.var_line_tainted=!1),$.var_line&&($.var_line_reindented=!0),T(),void($.var_line_tainted?($.var_line_tainted=!1,l()):oe=!0)):void("TK_END_BLOCK"===z&&"(EXPRESSION)"!==$.mode?(T(),$.mode===de.ObjectLiteral&&"}"===F?l():oe=!0):$.mode===de.ObjectLiteral?(T(),l()):(T(),oe=!0))}function I(){var e=!0,n=!0;return v(F)?(oe=!0,void T()):"*"!==U||"TK_DOT"!==z||Q.match(/^\d+$/)?":"===U&&$.in_case?($.case_body=!0,f(),T(),l(),void($.in_case=!1)):"::"===U?void T():(A(U,["--","++","!"])||A(U,["-","+"])&&(A(z,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||A(F,ee)||","===F)?(e=!1,n=!1,";"===F&&K($.mode)&&(e=!0),"TK_WORD"===z&&A(F,ee)&&(e=!0),$.mode!==de.BlockStatement&&$.mode!==de.Statement||"{"!==F&&";"!==F||l()):":"===U?0===$.ternary_depth?($.mode===de.BlockStatement&&($.mode=de.ObjectLiteral),e=!1):$.ternary_depth-=1:"?"===U&&($.ternary_depth+=1),oe=oe||e,T(),void(oe=n)):void T()}function w(){var e,n=i(U);if(O(n.slice(1),"*"))for(l(!1,!0),T(n[0]),e=1;e<n.length;e++)l(!1,!0),T(" "+r(n[e]));else for(n.length>1?l(!1,!0):"TK_END_BLOCK"===z?l(!1,!0):oe=!0,T(n[0]),X.push("\n"),e=1;e<n.length;e++)X.push(n[e]),X.push("\n");R("\n")||l(!1,!0)}function x(){oe=!0,T(),oe=!0}function B(){ie&&l(!1,!0),","!==F||ie||t(!0),oe=!0,T(),l(!1,!0)}function D(){v(F)?oe=!0:o(")"===F&&Te.break_chained_methods),T()}function W(){T(),"\n"===U[U.length-1]&&l()}var j,X,U,z,F,Q,G,$,q,H,J,V,Y,Z,ee,ne,te,re,ie,_e,ae,oe,le,ce,se,de,Te,fe="";for(J="\n\r	 ".split(""),V="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),ne="0123456789".split(""),Y="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",Y+=" <%= <% %> <?= <? ?>",Y=Y.split(" "),ee="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),de={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},se={TK_START_EXPR:b,TK_END_EXPR:S,TK_START_BLOCK:L,TK_END_BLOCK:y,TK_WORD:C,TK_SEMICOLON:g,TK_STRING:M,TK_EQUALS:k,TK_OPERATOR:I,TK_COMMA:P,TK_BLOCK_COMMENT:w,TK_INLINE_COMMENT:x,TK_COMMENT:B,TK_DOT:D,TK_UNKNOWN:W},n=n?n:{},Te={},void 0!==n.space_after_anon_function&&void 0===n.jslint_happy&&(n.jslint_happy=n.space_after_anon_function),void 0!==n.braces_on_own_line&&(Te.brace_style=n.braces_on_own_line?"expand":"collapse"),Te.brace_style=n.brace_style?n.brace_style:Te.brace_style?Te.brace_style:"collapse",Te.indent_size=n.indent_size?parseInt(n.indent_size,10):4,Te.indent_char=n.indent_char?n.indent_char:" ",Te.preserve_newlines=void 0===n.preserve_newlines?!0:n.preserve_newlines,Te.break_chained_methods=void 0===n.break_chained_methods?!1:n.break_chained_methods,Te.max_preserve_newlines=void 0===n.max_preserve_newlines?0:parseInt(n.max_preserve_newlines,10),Te.jslint_happy=void 0===n.jslint_happy?!1:n.jslint_happy,Te.keep_array_indentation=void 0===n.keep_array_indentation?!1:n.keep_array_indentation,Te.space_before_conditional=void 0===n.space_before_conditional?!0:n.space_before_conditional,Te.unescape_strings=void 0===n.unescape_strings?!1:n.unescape_strings,Te.wrap_line_length=void 0===n.wrap_line_length?0:parseInt(n.wrap_line_length,10),H="";Te.indent_size>0;)H+=Te.indent_char,Te.indent_size-=1;for(;e&&(" "===e.charAt(0)||"	"===e.charAt(0));)fe+=e.charAt(0),e=e.substring(1);j=e,ce=e.length,G="",z="TK_START_EXPR",F="",Q="",X=[],ae=!1,oe=!1,le=[],q=[],u(de.BlockStatement),Z=0,this.beautify=function(){for(var e,n,t,r;;){if(e=N(),U=e[0],re=e[1],"TK_EOF"===re)break;if(t=Te.keep_array_indentation&&h($.mode))for(n=0;_e>n;n+=1)l(!0);else if(ie=_e>0,Te.max_preserve_newlines&&_e>Te.max_preserve_newlines&&(_e=Te.max_preserve_newlines),Te.preserve_newlines&&_e>1)for(l(),n=1;_e>n;n+=1)l(!0);se[re](),"TK_INLINE_COMMENT"!==re&&"TK_COMMENT"!==re&&"TK_UNKNOWN"!==re&&(Q=F,z=re,F=U)}return r=fe+X.join("").replace(/[\r\n ]+$/,"")}}"undefined"!=typeof exports&&(exports.js_beautify=js_beautify);
//# sourceMappingURL=beautify.min.js.map