function js_beautify(e,n){function r(e){for(e="undefined"==typeof e?!1:e;S.length&&(" "===S[S.length-1]||S[S.length-1]===D||S[S.length-1]===F||e&&("\n"===S[S.length-1]||"\r"===S[S.length-1]));)S.pop()}function t(e){return e.replace(/^\s\s*|\s\s*$/,"")}function _(e){e=e.replace(/\x0d/g,"");for(var n=[],r=e.indexOf("\n");-1!==r;)n.push(e.substring(0,r)),e=e.substring(r+1),r=e.indexOf("\n");return e.length&&n.push(e),n}function a(e){if(e="undefined"==typeof e?!1:e,ne&&!e){var n="",r=S.lastIndexOf("\n")+1;r<S.length&&(n=S.slice(r).join(""),n.length+C.length>=ne&&(e=!0))}!j&&(z&&U||e)&&(i(),T(),U=!1)}function i(e){L.eat_next_space=!1,e="undefined"==typeof e?!0:e,r(),S.length&&("\n"===S[S.length-1]&&e||(j=!0,S.push("\n")),Y&&O(L.mode)&&L.whitespace_before.length?S.push(L.whitespace_before.join("")+""):(F&&S.push(F),T(L.indentation_level),T(L.var_line&&L.var_line_reindented)))}function T(e){if(void 0===e?e=1:"number"!=typeof e&&(e=e?1:0),""!=m)for(var n=0;e>n;n+=1)S.push(D)}function E(){var e=" ";L.eat_next_space?L.eat_next_space=!1:"TK_COMMENT"===v?i():(S.length&&(e=S[S.length-1])," "!==e&&"\n"!==e&&e!==D&&S.push(" "))}function o(){j=!1,L.eat_next_space=!1,S.push(C)}function f(){L.indentation_level+=1}function c(){S.length&&S[S.length-1]===D&&S.pop()}function s(e){L&&b.push(L),L={previous_mode:L?L.mode:"BLOCK",mode:e,var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,if_line:!1,in_case_statement:!1,in_case:!1,case_body:!1,eat_next_space:!1,indentation_level:L?L.indentation_level+(L.var_line&&L.var_line_reindented?1:0):0,ternary_depth:0}}function O(e){return"[EXPRESSION]"===e||"[INDENTED-EXPRESSION]"===e}function K(e){return u(e,["[EXPRESSION]","(EXPRESSION)","(FOR-EXPRESSION)","(COND-EXPRESSION)"])}function d(){if(W="DO_BLOCK"===L.mode,b.length>0){var e=L.mode;L=b.pop(),L.previous_mode=e}}function h(e,n){for(var r=0;r<e.length;r++){var _=t(e[r]);if(_.charAt(0)!==n)return!1}return!0}function l(e){return u(e,["case","return","do","if","throw","else"])}function u(e,n){for(var r=0;r<n.length;r+=1)if(n[r]===e)return!0;return!1}function N(e){for(var n,r=!1,t="",_=0,a="",i=0;r||_<e.length;)if(n=e.charAt(_),_++,r){if(r=!1,"x"===n)a=e.substr(_,2),_+=2;else{if("u"!==n){t+="\\"+n;continue}a=e.substr(_,4),_+=4}if(!a.match(/^[0123456789abcdefABCDEF]+$/))return e;if(i=parseInt(a,16),i>=0&&32>i){t+="x"===n?"\\x"+a:"\\u"+a;continue}if(34==i||39===i||92==i)t+="\\"+String.fromCharCode(i);else{if("x"===n&&i>126&&255>=i)return e;t+=String.fromCharCode(i)}}else"\\"==n?r=!0:t+=n;return t}function R(e){for(var n=B,r=A.charAt(n);u(r,M)&&r!==e;){if(n++,n>=re)return 0;r=A.charAt(n)}return r}function p(){if(Q=0,B>=re)return["","TK_EOF"];U=!1,L.whitespace_before=[];var e=A.charAt(B);for(B+=1;u(e,M);){if("\n"===e?(Q+=1,L.whitespace_before=[]):Q&&(e===D?L.whitespace_before.push(D):"\r"!==e&&L.whitespace_before.push(" ")),B>=re)return["","TK_EOF"];e=A.charAt(B),B+=1}if(u(e,X)){if(re>B)for(;u(A.charAt(B),X)&&(e+=A.charAt(B),B+=1,B!==re););if(B!==re&&e.match(/^[0-9]+[Ee]$/)&&("-"===A.charAt(B)||"+"===A.charAt(B))){var n=A.charAt(B);B+=1;var r=p();return e+=n+r[0],[e,"TK_WORD"]}return"in"===e?[e,"TK_OPERATOR"]:[e,"TK_WORD"]}if("("===e||"["===e)return[e,"TK_START_EXPR"];if(")"===e||"]"===e)return[e,"TK_END_EXPR"];if("{"===e)return[e,"TK_START_BLOCK"];if("}"===e)return[e,"TK_END_BLOCK"];if(";"===e)return[e,"TK_SEMICOLON"];if("/"===e){var _="",a=!0;if("*"===A.charAt(B)){if(B+=1,re>B)for(;re>B&&("*"!==A.charAt(B)||!A.charAt(B+1)||"/"!==A.charAt(B+1))&&(e=A.charAt(B),_+=e,"\n"!==e&&"\r"!==e||(a=!1),B+=1,!(B>=re)););return B+=2,a&&0===Q?["/*"+_+"*/","TK_INLINE_COMMENT"]:["/*"+_+"*/","TK_BLOCK_COMMENT"]}if("/"===A.charAt(B)){for(_=e;"\r"!==A.charAt(B)&&"\n"!==A.charAt(B)&&(_+=A.charAt(B),B+=1,!(B>=re)););return[_,"TK_COMMENT"]}}if("'"===e||'"'===e||"/"===e&&("TK_WORD"===v&&l(m)||")"===m&&u(L.previous_mode,["(COND-EXPRESSION)","(FOR-EXPRESSION)"])||"TK_COMMA"===v||"TK_COMMENT"===v||"TK_START_EXPR"===v||"TK_START_BLOCK"===v||"TK_END_BLOCK"===v||"TK_OPERATOR"===v||"TK_EQUALS"===v||"TK_EOF"===v||"TK_SEMICOLON"===v)){var i=e,T=!1,E=!1,o=e;if(re>B)if("/"===i){for(var f=!1;T||f||A.charAt(B)!==i;)if(o+=A.charAt(B),T?T=!1:(T="\\"===A.charAt(B),"["===A.charAt(B)?f=!0:"]"===A.charAt(B)&&(f=!1)),B+=1,B>=re)return[o,"TK_STRING"]}else for(;T||A.charAt(B)!==i;)if(o+=A.charAt(B),T?("x"!==A.charAt(B)&&"u"!==A.charAt(B)||(E=!0),T=!1):T="\\"===A.charAt(B),B+=1,B>=re)return[o,"TK_STRING"];if(B+=1,o+=i,E&&ee&&(o=N(o)),"/"===i)for(;re>B&&u(A.charAt(B),X);)o+=A.charAt(B),B+=1;return[o,"TK_STRING"]}if("#"===e){if(0===S.length&&"!"===A.charAt(B)){for(o=e;re>B&&"\n"!==e;)e=A.charAt(B),o+=e,B+=1;return[t(o)+"\n","TK_UNKNOWN"]}var c="#";if(re>B&&u(A.charAt(B),k)){do e=A.charAt(B),c+=e,B+=1;while(re>B&&"#"!==e&&"="!==e);return"#"===e||("["===A.charAt(B)&&"]"===A.charAt(B+1)?(c+="[]",B+=2):"{"===A.charAt(B)&&"}"===A.charAt(B+1)&&(c+="{}",B+=2)),[c,"TK_WORD"]}}if("<"===e&&"<!--"===A.substring(B-1,B+3)){for(B+=3,e="<!--";"\n"!==A.charAt(B)&&re>B;)e+=A.charAt(B),B++;return L.in_html_comment=!0,[e,"TK_COMMENT"]}if("-"===e&&L.in_html_comment&&"-->"===A.substring(B-1,B+2))return L.in_html_comment=!1,B+=2,["-->","TK_COMMENT"];if("."===e)return[e,"TK_DOT"];if(u(e,g)){for(;re>B&&u(e+A.charAt(B),g)&&(e+=A.charAt(B),B+=1,!(B>=re)););return","===e?[e,"TK_COMMA"]:"="===e?[e,"TK_EQUALS"]:[e,"TK_OPERATOR"]}return[e,"TK_UNKNOWN"]}var A,S,C,v,m,P,I,L,b,D,M,X,g,B,y,k,x,w,W,U,j,Q,F="";n=n?n:{};var J;void 0!==n.space_after_anon_function&&void 0===n.jslint_happy&&(n.jslint_happy=n.space_after_anon_function),void 0!==n.braces_on_own_line&&(J=n.braces_on_own_line?"expand":"collapse"),J=n.brace_style?n.brace_style:J?J:"collapse";var G=n.indent_size?parseInt(n.indent_size):4,$=n.indent_char?n.indent_char:" ",z="undefined"==typeof n.preserve_newlines?!0:n.preserve_newlines,q="undefined"==typeof n.break_chained_methods?!1:n.break_chained_methods,H="undefined"==typeof n.max_preserve_newlines?0:parseInt(n.max_preserve_newlines),V="undefined"===n.jslint_happy?!1:n.jslint_happy,Y="undefined"==typeof n.keep_array_indentation?!1:n.keep_array_indentation,Z="undefined"==typeof n.space_before_conditional?!0:n.space_before_conditional,ee="undefined"==typeof n.unescape_strings?!1:n.unescape_strings,ne="undefined"==typeof n.wrap_line_length?0:parseInt(n.wrap_line_length);j=!1;var re=e.length;for(D="";G>0;)D+=$,G-=1;for(;e&&(" "===e.charAt(0)||"	"===e.charAt(0));)F+=e.charAt(0),e=e.substring(1);for(A=e,I="",v="TK_START_EXPR",m="",P="",S=[],W=!1,M="\n\r	 ".split(""),X="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),k="0123456789".split(""),g="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",g+=" <%= <% %> <?= <? ?>",g=g.split(" "),y="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),b=[],s("BLOCK"),B=0;;){var te=p();if(C=te[0],w=te[1],"TK_EOF"===w)break;var _e=Y&&O(L.mode);if(_e)for(ie=0;Q>ie;ie+=1)i(!1),j=!0;else if(U=Q>0,H&&Q>H&&(Q=H),z&&Q>1)for(ie=0;Q>ie;ie+=1)i(0===ie),j=!0;switch(w){case"TK_START_EXPR":if("["===C){if("TK_WORD"===v||")"===m){u(m,y)&&E(),s("(EXPRESSION)"),o();break}"[EXPRESSION]"===L.mode||"[INDENTED-EXPRESSION]"===L.mode?"]"===P&&","===m?("[EXPRESSION]"===L.mode&&(L.mode="[INDENTED-EXPRESSION]",Y||f()),s("[EXPRESSION]"),Y||i()):"["===m?("[EXPRESSION]"===L.mode&&(L.mode="[INDENTED-EXPRESSION]",Y||f()),s("[EXPRESSION]"),Y||i()):s("[EXPRESSION]"):s("[EXPRESSION]")}else s("for"===I?"(FOR-EXPRESSION)":u(I,["if","while"])?"(COND-EXPRESSION)":"(EXPRESSION)");";"===m||"TK_START_BLOCK"===v?i():"TK_END_EXPR"===v||"TK_START_EXPR"===v||"TK_END_BLOCK"===v||"."===m?U&&i():"TK_WORD"!==v&&"TK_OPERATOR"!==v?E():"function"===I||"typeof"===I?V&&E():(u(m,y)||"catch"===m)&&Z&&E(),"("===C&&("TK_EQUALS"!==v&&"TK_OPERATOR"!==v||"OBJECT"!==L.mode&&a()),o();break;case"TK_DOT":l(m)?E():a(")"===m&&q),o();break;case"TK_END_EXPR":if("]"===C&&!Y&&"[INDENTED-EXPRESSION]"===L.mode&&"]"===m){d(),i(),o();break}d(),o();break;case"TK_START_BLOCK":if(s("do"===I?"DO_BLOCK":"BLOCK"),"expand"===J||"expand-strict"===J){var ae=!1;"expand-strict"===J?(ae="}"===R(),ae||i(!0)):"TK_OPERATOR"!==v&&("TK_EQUALS"===v||l(m)&&"else"!==m?E():i(!0)),o(),ae||f()}else"TK_OPERATOR"!==v&&"TK_START_EXPR"!==v?"TK_START_BLOCK"===v?i():E():O(L.previous_mode)&&","===m&&("}"===P?E():i()),f(),o();break;case"TK_END_BLOCK":d(),"expand"===J||"expand-strict"===J?("{"!==m&&i(),o()):("TK_START_BLOCK"===v?j?c():r():O(L.mode)&&Y?(Y=!1,i(),Y=!0):i(),o());break;case"TK_WORD":if(!U||"TK_OPERATOR"===v||"TK_EQUALS"===v||L.if_line||!z&&"var"===m||i(),W){E(),o(),E(),W=!1;break}if(x="NONE","function"===C){if(L.var_line&&"TK_EQUALS"!==v&&(L.var_line_reindented=!0),(j||";"===m)&&"{"!==m&&"TK_BLOCK_COMMENT"!==v&&"TK_COMMENT"!==v){Q=j?Q:0,z||(Q=1);for(var ie=0;2-Q>ie;ie++)i(!1)}"TK_WORD"===v?"get"===m||"set"===m||"new"===m||"return"===m?E():i():"TK_OPERATOR"===v||"="===m?E():K(L.mode)||i(),o(),I=C;break}if("case"===C||"default"===C&&L.in_case_statement){i(),L.case_body&&(L.indentation_level--,L.case_body=!1,c()),o(),L.in_case=!0,L.in_case_statement=!0;break}"TK_END_BLOCK"===v?u(C.toLowerCase(),["else","catch","finally"])?"expand"===J||"end-expand"===J||"expand-strict"===J?x="NEWLINE":(x="SPACE",E()):x="NEWLINE":"TK_SEMICOLON"!==v||"BLOCK"!==L.mode&&"DO_BLOCK"!==L.mode?"TK_SEMICOLON"===v&&K(L.mode)?x="SPACE":"TK_STRING"===v?x="NEWLINE":"TK_WORD"===v?("else"===m&&r(!0),x="SPACE"):"TK_START_BLOCK"===v?x="NEWLINE":"TK_END_EXPR"===v&&(E(),x="NEWLINE"):x="NEWLINE",u(C,y)&&")"!==m&&(x="else"===m?"SPACE":"NEWLINE"),L.if_line&&"TK_END_EXPR"===v&&(L.if_line=!1),"TK_COMMA"!==v&&"TK_START_EXPR"!==v&&"TK_EQUALS"!==v&&"TK_OPERATOR"!==v||"OBJECT"!==L.mode&&a(),u(C.toLowerCase(),["else","catch","finally"])?"TK_END_BLOCK"!==v||"expand"===J||"end-expand"===J||"expand-strict"===J?i():(r(!0),E()):"NEWLINE"===x?l(m)?E():"TK_END_EXPR"!==v?"TK_START_EXPR"===v&&"var"===C||":"===m||("if"===C&&"else"===I&&"{"!==m?E():(L.var_line=!1,L.var_line_reindented=!1,i())):u(C,y)&&")"!==m&&(L.var_line=!1,L.var_line_reindented=!1,i()):O(L.mode)&&","===m&&"}"===P?i():"SPACE"===x&&E(),o(),I=C,"var"===C&&(L.var_line=!0,L.var_line_reindented=!1,L.var_line_tainted=!1),"if"===C&&(L.if_line=!0),"else"===C&&(L.if_line=!1);break;case"TK_SEMICOLON":o(),L.var_line=!1,L.var_line_reindented=!1,"OBJECT"===L.mode&&(L.mode="BLOCK");break;case"TK_STRING":"TK_END_EXPR"===v&&u(L.previous_mode,["(COND-EXPRESSION)","(FOR-EXPRESSION)"])?E():"TK_WORD"===v?E():"TK_COMMA"===v||"TK_START_EXPR"===v||"TK_EQUALS"===v||"TK_OPERATOR"===v?"OBJECT"!==L.mode&&a():i(),o();break;case"TK_EQUALS":L.var_line&&(L.var_line_tainted=!0),E(),o(),E();break;case"TK_COMMA":if(L.var_line){if((K(L.mode)||"TK_END_BLOCK"===v)&&(L.var_line_tainted=!1),L.var_line_tainted){o(),L.var_line_reindented=!0,L.var_line_tainted=!1,i();break}L.var_line_tainted=!1,o(),E();break}"TK_COMMENT"===v&&i(),"TK_END_BLOCK"===v&&"(EXPRESSION)"!==L.mode?(o(),"OBJECT"===L.mode&&"}"===m?i():E()):"OBJECT"===L.mode?(o(),i()):(o(),E());break;case"TK_OPERATOR":var Te=!0,Ee=!0;if(l(m)){E(),o();break}if("*"===C&&"TK_DOT"===v&&!P.match(/^\d+$/)){o();break}if(":"===C&&L.in_case){L.case_body=!0,f(),o(),i(),L.in_case=!1;break}if("::"===C){o();break}u(C,["--","++","!"])||u(C,["-","+"])&&(u(v,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||u(m,y)||","==m)?(Te=!1,Ee=!1,";"===m&&K(L.mode)&&(Te=!0),"TK_WORD"===v&&u(m,y)&&(Te=!0),"BLOCK"!==L.mode||"{"!==m&&";"!==m||i()):":"===C?0===L.ternary_depth?("BLOCK"===L.mode&&(L.mode="OBJECT"),Te=!1):L.ternary_depth-=1:"?"===C&&(L.ternary_depth+=1),Te&&E(),o(),Ee&&E();break;case"TK_BLOCK_COMMENT":var oe,fe=_(C);if(h(fe.slice(1),"*"))for(i(),S.push(fe[0]),oe=1;oe<fe.length;oe++)i(),S.push(" "),S.push(t(fe[oe]));else for(fe.length>1?i():"TK_END_BLOCK"===v?i():E(),oe=0;oe<fe.length;oe++)S.push(fe[oe]),S.push("\n");"\n"!==R("\n")&&i();break;case"TK_INLINE_COMMENT":E(),o(),E();break;case"TK_COMMENT":U&&i(),","!==m||U||r(!0),"TK_COMMENT"!==v&&(U?i():E()),o(),i();break;case"TK_UNKNOWN":o(),"\n"===C[C.length-1]&&i()}"TK_INLINE_COMMENT"!==w&&"TK_UNKNOWN"!==w&&(P=m,v=w,m=C)}var ce=F+S.join("").replace(/[\r\n ]+$/,"");return ce}"undefined"!=typeof exports&&(exports.js_beautify=js_beautify);
//# sourceMappingURL=beautify.min.js.map