!function(e){e.jstree.plugin("grid",{__init:function(){var t=this._get_settings().grid||{};this.data.grid.columns=t.columns||[],this.data.grid.treeClass="jstree-grid",this.data.grid.columnWidth=t.width,this.data.grid.defaultConf={display:"inline-block"},e.browser.msie&&parseInt(e.browser.version.substr(0,1),10)<8&&(this.data.grid.defaultConf.display="inline",this.data.grid.defaultConf.zoom="1"),e("<link/>").attr({rel:"stylesheet",type:"text/css",href:"treegrid.css"}).appendTo(e("head",e(document))),this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree",e.proxy(function(e,t){this._prepare_grid(t.rslt.obj)},this)).bind("loaded.jstree",e.proxy(function(e){this._prepare_headers(),this._prepare_grid()},this))},defaults:{width:25},_fn:{_prepare_headers:function(){var t,a,s,i,d,r,l,n,h,g=this.data.grid.columns||[],o=this.data.grid.columnWidth,f=this.get_container(),u=f.parent(),p=0,c=this.data.grid.defaultConf;for(t=this.data.grid.header||e("<div></div>").addClass("jstree-grid-header"),a=0;a<g.length;a++)i=g[a].headerClass||"",d=g[a].header||"",d&&(p=!0),s=g[a].width||o,s-=10,r=0===a?3:0,l=e("<div></div>").css(c).css({"margin-left":r,width:s,padding:"1 3 2 5"}).addClass("jstree-grid-header "+i).text(d).appendTo(t);l.addClass("jstree-grid-header-last"),p&&(e("<div></div>").addClass("jstree-grid-wrapper").appendTo(u).append(t).append(f),this.data.grid.divOffset=t.parent().offset().left,this.data.grid.header=t,h=t.height(),n=f.height(),f.height(n-h))},_prepare_grid:function(t){var a,s,i,d=this.data.grid.treeClass,r=this,l=this.data.grid.columns||[],n=this.data.grid.columnWidth,h=(this.data.grid.divOffset,this.data.grid.defaultConf);t=t&&-1!=t?this._get_node(t):this.get_container(),t.each(function(){var t,g,o,f,u,p,c,C,_;if(a=e(this),u=a.children("a:not(."+d+")"),1===u.length){for(u.addClass(d),i=u.parentsUntil(r.get_container()).filter("li").length,s=l[0].width-18*i,u.css({width:s}),p=u,t=1;t<l.length;t++)o=l[t].cellClass||"",f=l[t].wideCellClass||"",g=l[t].value&&a.attr(l[t].value)?a.attr(l[t].value):"",c=l[t].valueClass&&a.attr(l[t].valueClass)?a.attr(l[t].valueClass):"",c&&l[t].valueClassPrefix&&""!==l[t].valueClassPrefix&&(c=l[t].valueClassPrefix+c),C=l[t].wideValueClass&&a.attr(l[t].wideValueClass)?a.attr(l[t].wideValueClass):"",C&&l[t].wideValueClassPrefix&&""!==l[t].wideValueClassPrefix&&(C=l[t].wideValueClassPrefix+C),s=l[t].width||n,s-=4,_=e("<span></span>").addClass(o+" "+c).text(g),p=e("<div></div>").css(h).css({width:s}).addClass("jstree-grid-cell "+f+" "+C).append(_).insertAfter(p);p.addClass("jstree-grid-cell-last")}}),t.is("li")?this._repair_state(t):t.find("> ul > li").each(function(){r._repair_state(this)})}}})}(jQuery);
//# sourceMappingURL=jstreegrid.min.js.map