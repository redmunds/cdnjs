!function(e){var t=function(e,t){var a,i="a"===e.get(0).tagName.toLowerCase()?e:e.children("a"),s=t.data.grid.columns[0].width;a=i.parentsUntil(t.get_container()).filter("li").length,s-=18*a,i.css({width:s})};e.jstree.plugin("grid",{__init:function(){var a=this._get_settings().grid||{};this.data.grid.columns=a.columns||[],this.data.grid.treeClass="jstree-grid",this.data.grid.columnWidth=a.width,this.data.grid.defaultConf={display:"inline-block"},e.browser.msie&&parseInt(e.browser.version.substr(0,1),10)<8&&(this.data.grid.defaultConf.display="inline",this.data.grid.defaultConf.zoom="1"),e('<style type="text/css">.jstree-grid-header {border-left: 1px solid #eeeeee;border-right: 1px solid #d0d0d0;background-color: #EBF3FD;}\n.jstree-grid-cell {padding-left: 4px;}</style>').appendTo(e("head")),this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree",e.proxy(function(e,t){this._prepare_grid(t.rslt.obj)},this)).bind("loaded.jstree",e.proxy(function(e){this._prepare_headers(),this._prepare_grid()},this)).bind("move_node.jstree",e.proxy(function(a,i){var s=i.rslt.o;t(s,this),s.find("li > a").each(e.proxy(function(a,i){t(e(i),this)},this))},this))},defaults:{width:25},_fn:{_prepare_headers:function(){var t,a,i,s,d,r,l,n=this.data.grid.columns||[],h=this.data.grid.columnWidth,o=this.get_container(),g=o.parent(),p=0,f=this.data.grid.defaultConf;for(t=this.data.grid.header||e("<div></div>").addClass("jstree-grid-header"),a=0;a<n.length;a++)s=n[a].headerClass||"",d=n[a].header||"",d&&(p=!0),i=n[a].width||h,i-=10,r=0===a?3:0,l=e("<div></div>").css(f).css({"margin-left":r,width:i,padding:"1 3 2 5"}).addClass("jstree-grid-header "+s).text(d).appendTo(t);l.addClass("jstree-grid-header-last"),p&&(e("<div></div>").addClass("jstree-grid-wrapper").appendTo(g).append(t).append(o),this.data.grid.divOffset=t.parent().offset().left,this.data.grid.header=t)},_prepare_grid:function(a){var i,s,d=this.data.grid.treeClass,r=this,l=this.data.grid.columns||[],n=this.data.grid.columnWidth,h=(this.data.grid.divOffset,this.data.grid.defaultConf);a=a&&-1!=a?this._get_node(a):this.get_container(),a.each(function(){var a,o,g,p,f,c,u,C,_,v;if(i=e(this),f=i.children("a:not(."+d+")"),1===f.length){for(f.addClass(d),t(f,r),c=f,a=1;a<l.length;a++)g=l[a].cellClass||"",p=l[a].wideCellClass||"",o=l[a].value&&i.attr(l[a].value)?i.attr(l[a].value):"",u=l[a].valueClass&&i.attr(l[a].valueClass)?i.attr(l[a].valueClass):"",u&&l[a].valueClassPrefix&&""!==l[a].valueClassPrefix&&(u=l[a].valueClassPrefix+u),C=l[a].wideValueClass&&i.attr(l[a].wideValueClass)?i.attr(l[a].wideValueClass):"",C&&l[a].wideValueClassPrefix&&""!==l[a].wideValueClassPrefix&&(C=l[a].wideValueClassPrefix+C),v=7,s=l[a].width||n,s-=v,_=e("<span></span>").addClass(g+" "+u).css("display","inline-block").text(o),c=e("<div></div>").css(h).css({width:s,"padding-left":v+"px"}).addClass("jstree-grid-cell "+p+" "+C).append(_).insertAfter(c);c.addClass("jstree-grid-cell-last")}}),a.is("li")?this._repair_state(a):a.find("> ul > li").each(function(){r._repair_state(this)})}}})}(jQuery);
//# sourceMappingURL=jstreegrid.min.js.map