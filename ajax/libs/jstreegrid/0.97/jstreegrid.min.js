!function(e){var t,a,i,d="_DATA_";i=/<\/?[^>]+>/gi,t=function(e,t){var a,i="a"===e.get(0).tagName.toLowerCase()?e:e.children("a"),d=t.data.grid.columns[0].width;a=i.parentsUntil(t.get_container().get(0).tagName+".jstree").filter("li").length,d-=18*a,i.css({width:d,"vertical-align":"top",overflow:"hidden"})},a=function(e,t,a){var r,s="a"===e.get(0).tagName.toLowerCase()?e:e.children("a"),l=a.data.grid.columns[0];r="",l.title&&(l.title===d?r=a.get_text(t):t.attr(l.title)&&(r=t.attr(l.title))),r=r.replace(i,""),r&&s.attr("title",r)},e.jstree.plugin("grid",{__init:function(){var a=this._get_settings().grid||{};this.data.grid.columns=a.columns||[],this.data.grid.treeClass="jstree-grid",this.data.grid.columnWidth=a.width,this.data.grid.defaultConf={display:"inline-block"},e.browser.msie&&parseInt(e.browser.version.substr(0,1),10)<8&&(this.data.grid.defaultConf.display="inline",this.data.grid.defaultConf.zoom="1"),e('<style type="text/css">.jstree-grid-header {border-left: 1px solid #eeeeee;border-right: 1px solid #d0d0d0;background-color: #EBF3FD;}\n.jstree-grid-cell {padding-left: 4px;}</style>').appendTo(e("head")),this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree",e.proxy(function(e,t){this._prepare_grid(t.rslt.obj)},this)).bind("loaded.jstree",e.proxy(function(e){this._prepare_headers(),this._prepare_grid(),this.get_container().trigger("loaded_grid.jstree")},this)).bind("move_node.jstree",e.proxy(function(a,i){var d=i.rslt.o;t(d,this),d.find("li > a").each(e.proxy(function(a,i){t(e(i),this)},this))},this))},__destroy:function(){var t=this.data.grid.parent,a=this.get_container();a.detach(),e("div.jstree-grid-wrapper",t).remove(),t.append(a)},defaults:{width:25},_fn:{_prepare_headers:function(){var t,a,i,d,r,s,l,n=this.data.grid.columns||[],o=this.data.grid.columnWidth,h=this.get_container(),g=h.parent(),p=0,c=this.data.grid.defaultConf;for(this.data.grid.parent=g,t=this.data.grid.header||e("<div></div>").addClass("jstree-grid-header"),a=0;a<n.length;a++)d=n[a].headerClass||"",r=n[a].header||"",r&&(p=!0),i=n[a].width||o,i-=10,s=0===a?3:0,l=e("<div></div>").css(c).css({"margin-left":s,width:i,padding:"1 3 2 5"}).addClass("jstree-grid-header "+d).text(r).appendTo(t);l.addClass("jstree-grid-header-last"),p&&(e("<div></div>").addClass("jstree-grid-wrapper").appendTo(g).append(t).append(h),this.data.grid.divOffset=t.parent().offset().left,this.data.grid.header=t)},_prepare_grid:function(d){var r,s,l=this.data.grid.treeClass,n=this,o=this.data.grid.columns||[],h=this.data.grid.columnWidth,g=(this.data.grid.divOffset,this.data.grid.defaultConf);d=d&&-1!==d?this._get_node(d):this.get_container(),d.each(function(){var d,p,c,f,u,_,v,C,w,j,m;if(r=e(this),u=r.children("a:not(."+l+")"),1===u.length){for(u.addClass(l),t(u,n),a(u,r,n),_=u,d=1;d<o.length;d++)c=o[d].cellClass||"",f=o[d].wideCellClass||"",p=o[d].value&&r.attr(o[d].value)?r.attr(o[d].value):"",v=o[d].valueClass&&r.attr(o[d].valueClass)?r.attr(o[d].valueClass):"",v&&o[d].valueClassPrefix&&""!==o[d].valueClassPrefix&&(v=o[d].valueClassPrefix+v),C=o[d].wideValueClass&&r.attr(o[d].wideValueClass)?r.attr(o[d].wideValueClass):"",C&&o[d].wideValueClassPrefix&&""!==o[d].wideValueClassPrefix&&(C=o[d].wideValueClassPrefix+C),m=o[d].title&&r.attr(o[d].title)?r.attr(o[d].title):"",m=m.replace(i,""),j=7,s=o[d].width||h,s-=j,w=e("<span></span>").addClass(c+" "+v).css("display","inline-block").html(p),_=e("<div></div>").css(g).css({width:s,"padding-left":j+"px"}).addClass("jstree-grid-cell "+f+" "+C).append(w).insertAfter(_),m&&w.attr("title",m);_.addClass("jstree-grid-cell-last")}}),d.is("li")?this._repair_state(d):d.find("> ul > li").each(function(){n._repair_state(this)})}}})}(jQuery);
//# sourceMappingURL=jstreegrid.min.js.map