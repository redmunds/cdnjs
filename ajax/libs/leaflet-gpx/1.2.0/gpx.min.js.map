{"version":3,"sources":["gpx.js"],"names":["L","require","_MAX_POINT_INTERVAL_MS","_SECOND_IN_MILLIS","_MINUTE_IN_MILLIS","_HOUR_IN_MILLIS","_DAY_IN_MILLIS","_DEFAULT_MARKER_OPTS","startIconUrl","endIconUrl","shadowUrl","wptIconUrls","iconSize","shadowSize","iconAnchor","shadowAnchor","clickable","_DEFAULT_POLYLINE_OPTS","color","_DEFAULT_GPX_OPTS","parseElements","GPX","FeatureGroup","extend","initialize","gpx","options","max_point_interval","marker_options","this","_merge_objs","polyline_options","gpx_options","Util","setOptions","GPXTrackIcon","Icon","_gpx","_layers","_info","name","length","elevation","gain","loss","max","min","Infinity","_points","hr","avg","_total","duration","start","end","moving","total","_parse","async","get_duration_string","hidems","s","Math","floor","mins","secs","round","to_miles","v","to_ft","m_to_km","m_to_mi","get_name","get_desc","desc","get_author","author","get_copyright","copyright","get_distance","get_distance_imp","get_start_time","get_end_time","get_moving_time","get_total_time","get_moving_pace","get_moving_pace_imp","get_moving_speed","get_moving_speed_imp","get_total_speed","get_total_speed_imp","get_elevation_gain","get_elevation_loss","get_elevation_gain_imp","get_elevation_loss_imp","get_elevation_data","_this","map","p","_prepare_data_point","a","b","toFixed","get_elevation_data_imp","get_elevation_max","get_elevation_min","get_elevation_max_imp","get_elevation_min_imp","get_average_hr","get_heartrate_data","get_heartrate_data_imp","reload","clearLayers","_","attr","trans1","trans2","trans_tooltip","r","push","_load_xml","url","cb","undefined","req","window","XMLHttpRequest","open","overrideMimeType","e","onreadystatechange","readyState","status","responseXML","send","input","layers","_parse_gpx_data","addLayer","fire","substr","parser","DOMParser","setTimeout","parseFromString","xml","j","i","el","tags","indexOf","getElementsByTagName","textContent","coords","_parse_trkseg","l","Polyline","line","startIcon","Marker","icon","iconUrl","point","point_type","endIcon","ll","LatLng","getAttribute","nameEl","descEl","symEl","symKey","symIcon","wptIcons","Default","marker","title","bindPopup","openPopup","tag","last","meta","time","ele","Date","parse","parseFloat","getElementsByTagNameNS","parseInt","_dist3d","t","abs","_dist2d","R","dLat","_deg2rad","lat","dLon","lng","sin","cos","c","atan2","sqrt","d","planar","height","pow","deg","PI","module","exports","define","amd"],"mappings":"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","file":"gpx.min.js"}