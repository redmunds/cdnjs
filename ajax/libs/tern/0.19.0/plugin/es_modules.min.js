!function(e){return"object"==typeof exports&&"object"==typeof module?e(require("../lib/infer"),require("../lib/tern"),require("acorn/dist/walk"),require("./modules")):"function"==typeof define&&define.amd?define(["../lib/infer","../lib/tern","acorn/dist/walk","./modules"],e):void e(tern,tern,acorn.walk)}(function(e,r,o){"use strict";function t(r,t){function a(o,a,i){l||(l=new e.Obj(!0),l.origin=r.name,l.originNode=r.ast,t.addType(l));var o=l.defProp(o,i);o.origin=r.name,a.propagate(o)}var i=e.cx().parent.mod.modules,l=null;o.simple(r.ast,{ImportDeclaration:function(e){for(var o=i.resolveModule(e.source.value,r.name),t=0;t<e.specifiers.length;t++){var a=e.specifiers[t],l=r.scope.getProp(a.local.name);"ImportNamespaceSpecifier"==a.type?o.propagate(l):"ImportDefaultSpecifier"==a.type?(o.getProp("default").propagate(l),o.propagate(l,n)):o.getProp(a.imported.name).propagate(l)}},ExportAllDeclaration:function(e){var o=i.resolveModule(e.source.value,r.name);o.forAllProps(function(e,r,o){o&&a(e,r,r.originNode)})},ExportDefaultDeclaration:function(o){var t=o.declaration.id||o.declaration;a("default",e.expressionType({node:t,state:r.scope}),t)},ExportNamedDeclaration:function(e){var o=e.declaration;if(o)if("VariableDeclaration"==o.type)for(var t=0;t<o.declarations.length;++t){var n=o.declarations[t];"Identifier"==n.id.type&&a(n.id.name,r.scope.getProp(n.id.name),n.id)}else a(o.id.name,r.scope.getProp(o.id.name),o.id);if(e.specifiers.length)for(var l=e.source?i.resolveModule(e.source.value,r.name):r.scope,t=0;t<e.specifiers.length;t++){var p=e.specifiers[t];a(p.exported.name,l.getProp(p.local.name),p.local)}}})}function a(r){if("Literal"==r.type&&"string"==typeof r.value){var o=e.findExpressionAround(r.sourceFile.ast,null,r.end,null,function(e,r){return"ImportDeclaration"==r.type||/Export(All|Named)Declaration/.test(r.type)});if(o&&o.node.source==r)return r.value}}function i(r,o){if("Identifier"==r.type){var t=e.findExpressionAround(r.sourceFile.ast,null,r.end,null,"ImportDeclaration");if(!t)return;for(var a=t.node.specifiers,i=0;i<a.length;i++){var n=a[i];if(n.local==r){var l={name:t.node.source.value,prop:null};return"ImportDefaultSpecifier"==n.type?l.prop="default":"ImportSpecifier"==n.type&&(l.prop=n.imported.name),l}}}else if("ImportDeclaration"==r.type&&/^import\s+\{\s*([\w$]+\s*,\s*)*$/.test(r.sourceFile.text.slice(r.start,o)))return{name:r.source.value,prop:""}}var n=80;r.registerPlugin("es_modules",function(e){e.loadPlugin("modules"),e.mod.modules.on("getExports",t),e.mod.modules.modNameTests.push(a),e.mod.modules.importTests.push(i),e.mod.modules.completableTypes.Identifier=!0,e.mod.modules.completableTypes.Literal=!0,e.mod.modules.completableTypes.ImportDeclaration=!0})});
//# sourceMappingURL=es_modules.min.js.map