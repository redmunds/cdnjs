{"version":3,"sources":["def.js"],"names":["mod","exports","module","init","define","amd","tern","def","infer","hop","obj","prop","Object","prototype","hasOwnProperty","call","parseType","spec","name","base","forceNew","type","TypeParser","test","i","args","length","arg","Fn","addEffect","_self","fArgs","fArg","propagate","IsCallee","cx","topScope","ANull","fn","handler","replaceRet","oldCmp","computeRet","rv","retval","self","handled","old","emptyObj","ctor","empty","create","props","isShell","isSimpleAnnotation","passOne","path","tp","charAt","Error","Arr","protos","Obj","charCodeAt","inner","defProp","getType","passTwo","proto","effects","parseEffect","known","innerPath","console","log","doc","url","doLoadEnvironment","data","scope","addOrigin","curOrigin","origins","loading","localDefs","parsePath","initIsCreated","IsCreated","constraint","addType","this","created","derived","AVal","cur","types","p","value","vtp","target","start","pos","eat","str","indexOf","word","re","ch","error","parseFnType","top","names","argname","colon","slice","push","retType","parseRetType","getInstance","num","bool","parseBaseRetType","Number","fname","customFunctions","t","extendRetType","propName","lhs","getProp","currentTopScope","effect","getOrigin","getTarget","andRet","getCallee","getSelf","getArgs","callee","slf","as","result","customFunc","trim","getFrom","getTo","from","to","forAllProps","val","local","PropHasSubset","cached","paths","parts","split","getFunctionType","propVal","isEmpty","load","oldScope","registerFunction","f","argNodes"],"mappings":"CAUA,SAAUA,GACR,MAAsB,gBAAXC,UAAwC,gBAAVC,QAChCD,QAAQE,KAAOH,EACH,kBAAVI,SAAwBA,OAAOC,IACjCD,QAAQD,KAAMH,SACvBM,KAAKC,KAAOJ,KAAMH,KACjB,SAASC,EAASO,GACnB,YAEA,SAASC,GAAIC,EAAKC,GAChB,MAAOC,QAAOC,UAAUC,eAAeC,KAAKL,EAAKC,GA8HnD,QAASK,GAAUC,EAAMC,EAAMC,EAAMC,GACnC,GAAIC,GAAO,GAAIC,GAAWL,EAAM,KAAME,EAAMC,GAAUJ,UAAUE,GAAM,EACtE,IAAI,QAAQK,KAAKN,GAAO,IAAK,GAAIO,GAAI,EAAGA,EAAIH,EAAKI,KAAKC,SAAUF,GAAG,SAAUA,GAC3E,GAAIG,GAAMN,EAAKI,KAAKD,EAChBG,aAAenB,GAAMoB,IAAMD,EAAIF,KAAKC,QAAQG,EAAUR,EAAM,SAASS,EAAOC,GAC9E,GAAIC,GAAOD,EAAMP,EACbQ,IAAMA,EAAKC,UAAU,GAAIzB,GAAM0B,SAAS1B,EAAM2B,KAAKC,SAAUT,EAAIF,KAAM,KAAMjB,EAAM6B,YAExFb,EACH,OAAOH,GAGT,QAASQ,GAAUS,EAAIC,EAASC,GAC9B,GAAIC,GAASH,EAAGI,WAAYC,EAAKL,EAAGM,MACpCN,GAAGI,WAAa,SAASG,EAAMpB,GAC7B,GAAIqB,GAAUP,EAAQM,EAAMpB,GACxBsB,EAAMN,EAASA,EAAOI,EAAMpB,GAAQkB,CACxC,OAAOH,GAAaM,EAAUC,GAkGlC,QAASC,GAASC,GAChB,GAAIC,GAAQtC,OAAOuC,OAAOF,EAAKpC,UAG/B,OAFAqC,GAAME,MAAQxC,OAAOuC,OAAO,MAC5BD,EAAMG,SAAU,EACTH,EAGT,QAASI,GAAmBrC,GAC1B,IAAKA,EAAK,SAAU,OAAO,CAC3B,KAAK,GAAIN,KAAQM,GACf,GAAY,SAARN,GAA2B,QAARA,GAA0B,QAARA,EACvC,OAAO,CACX,QAAO,EAGT,QAAS4C,GAAQpC,EAAMF,EAAMuC,GAC3B,IAAKrC,EAAM,CACT,GAAIsC,GAAKxC,EAAK,QACd,IAAIwC,EACF,GAAI,QAAQlC,KAAKkC,GAAKtC,EAAO6B,EAASxC,EAAMoB,QACvC,CAAA,GAAoB,KAAhB6B,EAAGC,OAAO,GACd,KAAM,IAAIC,OAAM,uBAAyBF,EADhBtC,GAAO6B,EAASxC,EAAMoD,SAGpDzC,GADSF,EAAK,aACPT,EAAM2B,KAAK0B,OAAO5C,EAAK,cAEvB+B,EAASxC,EAAMsD,IAExB3C,GAAKD,KAAOsC,EAGd,IAAK,GAAItC,KAAQD,GAAM,GAAIR,EAAIQ,EAAMC,IAA+B,IAAtBA,EAAK6C,WAAW,GAAU,CACtE,GAAIC,GAAQ/C,EAAKC,EACjB,IAAoB,gBAAT8C,IAAqBV,EAAmBU,GAAQ,QAC3D,IAAIrD,GAAOQ,EAAK8C,QAAQ/C,EACxBqC,GAAQ5C,EAAKuD,UAAWF,EAAOR,EAAOA,EAAO,IAAMtC,EAAOA,GAAMe,UAAUtB,GAE5E,MAAOQ,GAGT,QAASgD,GAAQhD,EAAMF,EAAMuC,GAC3B,GAAIrC,EAAKkC,QAAS,OACTlC,GAAKkC,OACZ,IAAII,GAAKxC,EAAK,QACd,IAAIwC,EACFzC,EAAUyC,EAAID,EAAMrC,OACf,CACL,GAAIiD,GAAQnD,EAAK,WAAaD,EAAUC,EAAK,UAC7CT,GAAMsD,IAAI/C,KAAKI,IAAMiD,YAAiB5D,GAAMsD,MAAMM,EAAcZ,IAIpE,GAAIa,GAAUpD,EAAK,WACnB,IAAIoD,GAAWlD,YAAgBX,GAAMoB,GAAI,IAAK,GAAIJ,GAAI,EAAGA,EAAI6C,EAAQ3C,SAAUF,EAC7E8C,EAAYD,EAAQ7C,GAAIL,EAE1B,KAAK,GAAID,KAAQD,GAAM,GAAIR,EAAIQ,EAAMC,IAA+B,IAAtBA,EAAK6C,WAAW,GAAU,CACtE,GAAIC,GAAQ/C,EAAKC,GAAOqD,EAAQpD,EAAK8C,QAAQ/C,GAAOsD,EAAYhB,EAAOA,EAAO,IAAMtC,EAAOA,EACvFG,EAAOkD,EAAML,SACjB,IAAoB,gBAATF,GAAmB,CAC5B,GAAI3C,EAAM,QACVL,GAAUgD,EAAOQ,GAAWvC,UAAUsC,OACjC,CACL,GAAKjB,EAAmBU,GAEjB,CAAA,GAAK3C,EAIL,QAHA2C,GAAM,UAAUS,QAAQC,IAAIF,GACjCxD,EAAUgD,EAAM,SAAUQ,EAAW,MAAM,GAAMvC,UAAUsC,GAC3DlD,EAAOkD,EAAML,cAJbC,GAAQ9C,EAAM2C,EAAOQ,EAMvB,IAAIG,GAAMX,EAAM,QAASY,EAAMZ,EAAM,OACjCW,KACEtD,GAAQA,YAAgBb,GAAMsD,MAAKzC,EAAKsD,IAAMA,GAClDJ,EAAMI,IAAMA,GAEVC,IACEvD,GAAQA,YAAgBb,GAAMsD,MAAKzC,EAAKuD,IAAMA,GAClDL,EAAMK,IAAMA,KAMpB,QAASC,GAAkBC,EAAMC,GAC/B,GAAI5C,GAAK3B,EAAM2B,IAEf3B,GAAMwE,UAAU7C,EAAG8C,UAAYH,EAAK,UAAY,OAAS3C,EAAG+C,QAAQxD,QACpES,EAAGgD,QAAUL,EACb3C,EAAGiD,UAAYxE,OAAOuC,OAAO,MAE7BI,EAAQwB,EAAOD,EAEf,IAAIvE,GAAMuE,EAAK,UACf,IAAIvE,EAAK,CACP,IAAK,GAAIW,KAAQX,GAAK,CACpB,GAAIU,GAAOV,EAAIW,EACfiB,GAAGiD,UAAUlE,GAAuB,gBAARD,GAAmBoE,EAAUpE,GAAQsC,EAAQ,KAAMtC,EAAMC,GAEvF,IAAK,GAAIA,KAAQX,GAAK,CACpB,GAAIU,GAAOV,EAAIW,EACI,iBAARD,IAAkBkD,EAAQhC,EAAGiD,UAAUlE,GAAOX,EAAIW,KAIjEiD,EAAQY,EAAOD,GAEf3C,EAAG8C,UAAY9C,EAAGgD,QAAUhD,EAAGiD,UAAY,KAoB7C,QAASE,KACP,MAAOC,KAAcA,EAAY/E,EAAMgF,WAAW,yBAChDC,QAAS,SAAShC,GAChB,GAAIA,YAAcjD,GAAMsD,KAAO4B,KAAKC,UAAY,EAAG,CACjD,GAAIC,GAAU,GAAIpF,GAAMsD,IAAIL,GAAKxC,EAAOyE,KAAKzE,IAE7C,IADIA,YAAgBT,GAAMqF,OAAM5E,EAAOA,EAAKiD,WACxCjD,YAAgBT,GAAMsD,IAAK,IAAK,GAAInD,KAAQM,GAAKmC,MAAO,CAC1D,GAAI0C,GAAM7E,EAAKmC,MAAMzC,GAAMoF,MAAM,GAC7BC,EAAIJ,EAAQ3B,QAAQtD,EACxB,IAAImF,GAAOA,YAAetF,GAAMsD,KAAOgC,EAAI1C,MAAM6C,MAAO,CACtD,GAAIC,GAAMJ,EAAI1C,MAAM6C,MAAM/B,SACtBgC,IAAKF,EAAEP,QAAQS,IAGvBR,KAAKS,OAAOV,QAAQG,QAzX5B,GAAItE,GAAarB,EAAQqB,WAAa,SAASL,EAAMmF,EAAOjF,EAAMC,GAChEsE,KAAKW,IAAMD,GAAS,EACpBV,KAAKzE,KAAOA,EACZyE,KAAKvE,KAAOA,EACZuE,KAAKtE,SAAWA,EAElBE,GAAWT,WACTyF,IAAK,SAASC,GACZ,GAAkB,GAAdA,EAAI7E,OAAcgE,KAAKzE,KAAKyC,OAAOgC,KAAKW,MAAQE,EAAMb,KAAKzE,KAAKuF,QAAQD,EAAKb,KAAKW,MAAQX,KAAKW,IAEjG,MADAX,MAAKW,KAAOE,EAAI7E,QACT,GAGX+E,KAAM,SAASC,GAEb,IADA,GAAeC,GAAXF,EAAO,GAAQC,EAAKA,GAAM,SACtBC,EAAKjB,KAAKzE,KAAKyC,OAAOgC,KAAKW,OAASK,EAAGnF,KAAKoF,IAAOF,GAAQE,IAAMjB,KAAKW,GAC9E,OAAOI,IAETG,MAAO,WACL,KAAM,IAAIjD,OAAM,2BAA6B+B,KAAKzE,KAAO,QAAUyE,KAAKW,IAAM,MAEhFQ,YAAa,SAAS3F,EAAM4F,GAC1B,GAAIrF,MAAWsF,IACf,KAAKrB,KAAKY,IAAI,KAAM,IAAK,GAAI9E,GAAI,KAAOA,EAAG,CACzC,GAA+CwF,GAA3CC,EAAQvB,KAAKzE,KAAKuF,QAAQ,KAAMd,KAAKW,IAUzC,IATIY,IAAS,IACXD,EAAUtB,KAAKzE,KAAKiG,MAAMxB,KAAKW,IAAKY,GAChC,YAAY1F,KAAKyF,GACnBtB,KAAKW,IAAMY,EAAQ,EAEnBD,EAAU,MAEdD,EAAMI,KAAKH,GACXvF,EAAK0F,KAAKzB,KAAK1E,cACV0E,KAAKY,IAAI,MAAO,CACnBZ,KAAKY,IAAI,MAAQZ,KAAKkB,OACtB,QAGJ,GAAIQ,GAAS1E,EAAYJ,CAYzB,OAXIoD,MAAKY,IAAI,QACPQ,GAAOpB,KAAKzE,KAAKuF,QAAQ,IAAKd,KAAKW,MAAO,GAC5Ce,EAAU5G,EAAM6B,MAChBK,EAAagD,KAAK2B,gBACbD,EAAU1B,KAAK1E,YACjBoG,EAAU5G,EAAM6B,MACnByE,IAAQxE,EAAKoD,KAAKvE,MACpBX,EAAMoB,GAAGb,KAAK2E,KAAKvE,KAAMD,EAAMV,EAAM6B,MAAOZ,EAAMsF,EAAOK,GAEzD9E,EAAK,GAAI9B,GAAMoB,GAAGV,EAAMV,EAAM6B,MAAOZ,EAAMsF,EAAOK,GAChD1E,IAAYJ,EAAGI,WAAaA,GACzBJ,GAETtB,UAAW,SAASE,EAAM4F,GACxB,GAAIpB,KAAKY,IAAI,OACX,MAAOZ,MAAKmB,YAAY3F,EAAM4F,EACzB,IAAIpB,KAAKY,IAAI,KAAM,CACxB,GAAItC,GAAQ0B,KAAK1E,WAEjB,OADA0E,MAAKY,IAAI,MAAQZ,KAAKkB,QAClBE,GAAOpB,KAAKvE,MACdX,EAAMoD,IAAI7C,KAAK2E,KAAKvE,KAAM6C,GACnB0B,KAAKvE,MAEP,GAAIX,GAAMoD,IAAII,GAChB,GAAI0B,KAAKY,IAAI,KAAM,CACxB,GAAI9C,GAAOkC,KAAKe,KAAK,cACjBtF,EAAOkE,EAAU7B,EAAO,aAE5B,OADMrC,aAAgBX,GAAMsD,MAAM3C,EAAOkE,EAAU7B,IAC7CrC,YAAgBX,GAAMsD,IACxBgD,GAAOpB,KAAKtE,SAAiB,GAAIZ,GAAMsD,IAAI3C,GACxCX,EAAM8G,YAAYnG,GAFgBA,EAGpC,GAAIuE,KAAKY,IAAI,KAClB,MAAO9F,GAAM6B,KAEb,IAAIpB,GAAOyE,KAAKe,KAAK,cAAetE,EAAK3B,EAAM2B,IAC/C,QAAQlB,GACR,IAAK,SAAU,MAAOkB,GAAGoF,GACzB,KAAK,SAAU,MAAOpF,GAAGoE,GACzB,KAAK,OAAQ,MAAOpE,GAAGqF,IACvB,KAAK,QAAS,MAAOrF,GAAGC,SAExB,MAAID,GAAGiD,WAAanE,IAAQkB,GAAGiD,UAAkBjD,EAAGiD,UAAUnE,GACvDoE,EAAUpE,IAGrBwG,iBAAkB,WAChB,GAAI/B,KAAKY,IAAI,KAAM,CACjB,GAAItC,GAAQ0B,KAAK2B,cAEjB,OADA3B,MAAKY,IAAI,MAAQZ,KAAKkB,QACf,SAAS/D,EAAMpB,GAAQ,MAAO,IAAIjB,GAAMoD,IAAII,EAAMnB,EAAMpB,KAC1D,GAAIiE,KAAKY,IAAI,KAAM,CACxB,GAAI3E,GAAM+D,KAAKe,KAAK,KACpB,IAAI9E,EAEF,MADAA,GAAM+F,OAAO/F,GACN,SAASkB,EAAMpB,GAAO,MAAOA,GAAKE,IAAQnB,EAAM6B,MAClD,IAAIqD,KAAKY,IAAI,QAClB,MAAO,UAASzD,GAAO,MAAOA,GACzB,IAAI6C,KAAKY,IAAI,WAAY,CAC9B,GAAIqB,GAAQjC,KAAKe,KAAK,QACtB,OAAOmB,GAAgBD,IAAU,WAAa,MAAOnH,GAAM6B,OACtDqD,KAAKkB,QAEd,GAAIiB,GAAInC,KAAK1E,WACb,OAAO,YAAW,MAAO6G,KAE3BC,cAAe,SAAS3G,GACtB,GAAI4G,GAAWrC,KAAKe,KAAK,aAAef,KAAKkB,OAC7C,OAAgB,QAAZmB,EAA2B,SAASlF,EAAMpB,GAC5C,GAAIuG,GAAM7G,EAAK0B,EAAMpB,EACrB,IAAIuG,EAAIpF,OAAQ,MAAOoF,GAAIpF,MAC3B,IAAID,GAAK,GAAInC,GAAMqF,IAEnB,OADAmC,GAAI/F,UAAU,GAAIzB,GAAM0B,SAAS1B,EAAM6B,SAAW,KAAMM,IACjDA,GAEF,SAASE,EAAMpB,GAAO,MAAON,GAAK0B,EAAMpB,GAAMwG,QAAQF,KAE/DV,aAAc,WAEZ,IADA,GAAI5D,GAAKiC,KAAK+B,mBACP/B,KAAKY,IAAI,MAAM7C,EAAKiC,KAAKoC,cAAcrE,EAC9C,OAAOA,IAyBX,IA2CIyE,GA3CA5D,EAAcrE,EAAQqE,YAAc,SAAS6D,EAAQ7F,GACvD,GAAoC,GAAhC6F,EAAO3B,QAAQ,cAAoB,CACrC,GAAIR,GAAI,GAAI1E,GAAW6G,EAAQ,IAC3BC,EAAYpC,EAAEqB,cACbrB,GAAEM,IAAI,MAAMN,EAAEY,OACnB,IAAIyB,GAAYrC,EAAEqB,cAClBxF,GAAUS,EAAI,SAASO,EAAMpB,GAC3B2G,EAAUvF,EAAMpB,GAAMQ,UAAUoG,EAAUxF,EAAMpB,UAE7C,IAA+B,GAA3B0G,EAAO3B,QAAQ,SAAe,CACvC,GAAI8B,GAA6C,GAApCH,EAAO3B,QAAQ,cAAe,GACvCR,EAAI,GAAI1E,GAAW6G,EAAQG,EAAS,GAAK,GACzCC,EAAYvC,EAAEqB,eAAgBmB,EAAU,KAAMC,IAElD,KADIzC,EAAEM,IAAI,YAAWkC,EAAUxC,EAAEqB,gBAC1BrB,EAAEM,IAAI,MAAMmC,EAAQtB,KAAKnB,EAAEqB,eAClCxF,GAAUS,EAAI,SAASO,EAAMpB,GAG3B,IAAK,GAFDiH,GAASH,EAAU1F,EAAMpB,GACzBkH,EAAMH,EAAUA,EAAQ3F,EAAMpB,GAAQjB,EAAM6B,MAAOuG,KAC9CpH,EAAI,EAAGA,EAAIiH,EAAQ/G,SAAUF,EAAGoH,EAAGzB,KAAKsB,EAAQjH,GAAGqB,EAAMpB,GAClE,IAAIoH,GAASP,EAAS,GAAI9H,GAAMqF,KAAOrF,EAAM6B,KAE7C,OADAqG,GAAOzG,UAAU,GAAIzB,GAAM0B,SAASyG,EAAKC,EAAI,KAAMC,IAC5CA,GACNP,OACE,IAAiC,GAA7BH,EAAO3B,QAAQ,WAAiB,CACzC,GAAIsC,GAAalB,EAAgBO,EAAOjB,MAAM,GAAG6B,OAC7CD,IAAYjH,EAAUS,EAAIwG,OACzB,CAAA,GAA+B,GAA3BX,EAAO3B,QAAQ,SAaxB,KAAM,IAAI7C,OAAM,wBAA0BwE,EAZ1C,IAAInC,GAAI,GAAI1E,GAAW6G,EAAQ,GAC3Ba,EAAUhD,EAAEqB,cAChBrB,GAAEM,IAAI,IACN,IAAI2C,GAAQjD,EAAEqB,cACdxF,GAAUS,EAAI,SAASO,EAAMpB,GAC3B,GAAIyH,GAAOF,EAAQnG,EAAMpB,GAAO0H,EAAKF,EAAMpG,EAAMpB,EACjDyH,GAAKE,YAAY,SAASzI,EAAM0I,EAAKC,GAC/BA,GAAiB,OAAR3I,GACXwI,EAAGlH,UAAU,GAAIzB,GAAM+I,cAAc5I,EAAM0I,UAUjDhE,EAAYpF,EAAQoF,UAAY,SAAS7B,GAC3C,GAAIrB,GAAK3B,EAAM2B,KAAMqH,EAASrH,EAAGsH,MAAMjG,EACvC,IAAc,MAAVgG,EAAgB,MAAOA,EAC3BrH,GAAGsH,MAAMjG,GAAQhD,EAAM6B,KAEvB,IAAIlB,GAAO+G,GAAmB/F,EAAGC,QAEjC,IAAID,EAAGiD,UAAW,IAAK,GAAIlE,KAAQiB,GAAGiD,UACpC,GAA0B,GAAtB5B,EAAKgD,QAAQtF,GAAY,CAC3B,GAAIsC,GAAQtC,EAAM,MAAOiB,GAAGsH,MAAMjG,GAAQrB,EAAGiD,UAAU5B,EACvB,MAA5BA,EAAKE,OAAOxC,EAAKQ,UACnBP,EAAOgB,EAAGiD,UAAUlE,GACpBsC,EAAOA,EAAK0D,MAAMhG,EAAKQ,OAAS,IAOtC,IAAK,GADDgI,IADS,kBAAkBnI,KAAKiC,GACxBA,EAAKmG,MAAM,MACdnI,EAAI,EAAGA,EAAIkI,EAAMhI,QAAUP,GAAQX,EAAM6B,QAASb,EAAG,CAC5D,GAAIb,GAAO+I,EAAMlI,EACjB,IAAsB,KAAlBb,EAAK+C,OAAO,GACd,GAAY,UAAR/C,EACFQ,EAAQA,YAAgBX,GAAMsD,KAAO3C,EAAKiD,OAAU5D,EAAM6B,UACrD,CACL,GAAIC,GAAKnB,EAAKyI,iBACd,IAAKtH,EAEE,GAAY,QAAR3B,EACTQ,EAAOmB,EAAGM,OAAOsB,WAAa1D,EAAM6B,UAC/B,CACL,GAAIV,GAAMW,EAAGb,KAAKiG,OAAO/G,EAAKuG,MAAM,IACpC/F,GAAQQ,GAAOA,EAAIuC,WAAc1D,EAAM6B,UALvClB,GAAOX,EAAM6B,UAQZ,IAAIlB,YAAgBX,GAAMsD,IAAK,CACpC,GAAI+F,GAAU1I,EAAKiC,MAAMzC,EAEvBQ,IADG0I,GAAWA,EAAQC,UACftJ,EAAM6B,MAENwH,EAAQ9D,MAAM,IAM3B,MADA5D,GAAGsH,MAAMjG,GAAQrC,GAAQX,EAAM6B,MAAQ,KAAOlB,EACvCA,EA+GTlB,GAAQ8J,KAAO,SAASjF,EAAMC,GACvBA,IAAOA,EAAQvE,EAAM2B,KAAKC,SAC/B,IAAI4H,GAAW9B,CACfA,GAAkBnD,CAClB,KACEF,EAAkBC,EAAMC,GACxB,QACAmD,EAAkB8B,GAMtB,IAAIpC,GAAkBhH,OAAOuC,OAAO,KACpC3C,GAAMyJ,iBAAmB,SAAS/I,EAAMgJ,GAAKtC,EAAgB1G,GAAQgJ,EAErE,IAAI3E,EA8BJ,OATA/E,GAAMyJ,iBAAiB,gBAAiB,SAASpH,EAAMpB,EAAM0I,GAC3D,GAAIA,EAASzI,QAA8B,WAApByI,EAAS,GAAG9I,MAA0C,MAArB8I,EAAS,GAAGlE,MAClE,MAAO,IAAIzF,GAAMsD,GAEnB,IAAI+E,GAAS,GAAIrI,GAAMqF,IAEvB,OADIpE,GAAK,IAAIA,EAAK,GAAGQ,UAAU,IAAKqD,KAAiB,EAAGuD,EAAQpH,EAAK,KAC9DoH,IAGF5I","file":"def.min.js"}