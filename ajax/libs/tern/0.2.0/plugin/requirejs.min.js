!function(e){return"object"==typeof exports&&"object"==typeof module?e(require("../lib/infer"),require("../lib/tern")):"function"==typeof define&&define.amd?define(["../lib/infer","../lib/tern"],e):void e(tern,tern)}(function(e,r){"use strict";function t(e){if(!/(^|\/)(\.\/|[^\/]+\/\.\.\/)/.test(e))return e;for(var r=e.split("/"),t=0;t<r.length;++t)"."==r[t]?r.splice(t--,1):t&&".."==r[t]&&r.splice(t-- -1,2);return r.join("/")}function n(e,r){var n=e.indexOf("!");n>-1&&(e=e.slice(0,n));var i=r.options,u=/\.js$/.test(e);if(u||/^(?:\w+:|\/)/.test(e))return e+(u?"":".js");var s=i.baseURL||"";if(s&&"/"!=s.charAt(s.length-1)&&(s+="/"),i.paths){var l=i.paths[e];if(l)return t(s+l+".js");var o=e.match(/^([^\/]+)(\/.*)$/);if(o){var l=i.paths[o[1]];if(l)return t(s+l+o[2]+".js")}}return t(s+e+".js")}function i(r){return r.require||(r.require=new e.Fn("require",e.ANull,[e.cx().str],["module"],new e.AVal),r.require.computeRet=function(t,n,i){return i.length&&"Literal"==i[0].type&&"string"==typeof i[0].value?u(i[0].value,r):e.ANull}),r.require}function u(r,u){if("require"==r)return i(u);if("module"==r)return e.cx().definitions.requirejs.module;if(u.options.override&&Object.prototype.hasOwnProperty.call(u.options.override,r)){var s=u.options.override[r];if("string"==typeof s&&"="==s.charAt(0))return e.def.parsePath(s.slice(1));if("object"==typeof s){if(u.interfaces[r])return u.interfaces[r];var l=u.interfaces[r]=new e.Obj(null,r);return e.def.load(s,l),l}r=s}/^(https?:|\/)|\.js$/.test(r)||(r=n(r,u)),r=t(r);var o=u.interfaces[r];return o||(o=u.interfaces[r]=new e.AVal,u.server.addFile(r)),o}var s=50;e.registerFunction("requireJS",function(r,t,n){var i=e.cx().parent,l=i&&i._requireJS;if(!l||!t.length)return e.ANull;var o=l.currentFile,a=l.interfaces[o];a||(a=l.interfaces[o]=new e.AVal);var f,c=[];if(n&&t.length>1){var p=n[2==t.length?0:1];if("Literal"==p.type&&"string"==typeof p.value)c.push(u(p.value,l));else if("ArrayExpression"==p.type)for(var d=0;d<p.elements.length;++d){var v=p.elements[d];if("Literal"==v.type&&"string"==typeof v.value)if("exports"==v.value){var g=new e.Obj(!0);c.push(g),a.addType(g,s)}else c.push(u(v.value,l))}}else if(n&&1==t.length&&"FunctionExpression"==n[0].type&&n[0].params.length){var g=new e.Obj(!0);c.push(u("require",l),g),a.addType(g,s),f=t[0]}return f||(f=t[Math.min(t.length-1,2)],f.isEmpty()||f.getFunctionType()||(f=null)),f?f.propagate(new e.IsCallee(e.ANull,c,null,a)):t.length&&t[0].propagate(a),e.ANull}),r.registerPlugin("requirejs",function(e,r){return e._requireJS={interfaces:Object.create(null),options:r||{},currentFile:null,server:e},e.on("beforeLoad",function(e){this._requireJS.currentFile=e.name}),e.on("reset",function(){this._requireJS.interfaces=Object.create(null),this._requireJS.require=null}),{defs:l}});var l={"!name":"requirejs","!define":{module:{id:"string",uri:"string",config:"fn() -> ?",exports:"?"}},requirejs:{"!type":"fn(deps: [string], callback: fn(), errback: fn()) -> !custom:requireJS",onError:"fn(err: +Error)",load:"fn(context: ?, moduleName: string, url: string)",config:"fn(config: ?)",version:"string",isBrowser:"bool"},require:"requirejs",define:{"!type":"fn(deps: [string], callback: fn()) -> !custom:requireJS",amd:{jQuery:"bool"}}}});
//# sourceMappingURL=requirejs.min.js.map