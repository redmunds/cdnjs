!function(e){return"object"==typeof exports&&"object"==typeof module?e(require("../lib/infer"),require("../lib/tern")):"function"==typeof define&&define.amd?define(["../lib/infer","../lib/tern"],e):void e(tern,tern)}(function(e,r){"use strict";function t(e){if(!/(^|\/)(\.\/|[^\/]+\/\.\.\/)/.test(e))return e;for(var r=e.split("/"),t=0;t<r.length;++t)"."==r[t]?r.splice(t--,1):t&&".."==r[t]&&r.splice(t-- -1,2);return r.join("/")}function n(e,r){var n=e.indexOf("!");n>-1&&(e=e.slice(0,n));var i=r.options,s=/\.js$/.test(e);if(s||/^(?:\w+:|\/)/.test(e))return e+(s?"":".js");var u=i.baseURL||"";if(u&&"/"!=u.charAt(u.length-1)&&(u+="/"),i.paths){var o=i.paths[e];if(o)return t(u+o+".js");var a=e.match(/^([^\/]+)(\/.*)$/);if(a){var o=i.paths[a[1]];if(o)return t(u+o+a[2]+".js")}}return t(u+e+".js")}function i(r){return r.require||(r.require=new e.Fn("require",e.ANull,[e.cx().str],["module"],new e.AVal),r.require.computeRet=function(t,n,i){return i.length&&"Literal"==i[0].type&&"string"==typeof i[0].value?s(i[0].value,r):e.ANull}),r.require}function s(r,s){if("require"==r)return i(s);if("module"==r)return e.cx().definitions.requirejs.module;if(s.options.override&&Object.prototype.hasOwnProperty.call(s.options.override,r)){var u=s.options.override[r];if("string"==typeof u&&"="==u.charAt(0))return e.def.parsePath(u.slice(1));if("object"==typeof u){if(s.interfaces[r])return s.interfaces[r];var o=s.interfaces[r]=new e.Obj(null,r);return e.def.load(u,o),o}r=u}/^(https?:|\/)|\.js$/.test(r)||(r=n(r,s)),r=t(r);var a=s.interfaces[r];return a||(a=s.interfaces[r]=new e.AVal,s.server.addFile(r)),a}function u(e){switch(e.type){case"ArrayExpression":return e.elements.map(u);case"Literal":return e.value;case"ObjectExpression":var r={};return e.properties.forEach(function(e){var t=e.key.name||e.key.value;r[t]=u(e.value)}),r}}var o=50;e.registerFunction("requireJS",function(r,t,n){var i=e.cx().parent,u=i&&i._requireJS;if(!u||!t.length)return e.ANull;var a=u.currentFile,l=u.interfaces[a];l||(l=u.interfaces[a]=new e.AVal);var f,c=[];if(n&&t.length>1){var p=n[2==t.length?0:1];if("Literal"==p.type&&"string"==typeof p.value)c.push(s(p.value,u));else if("ArrayExpression"==p.type)for(var v=0;v<p.elements.length;++v){var h=p.elements[v];if("Literal"==h.type&&"string"==typeof h.value)if("exports"==h.value){var g=new e.Obj(!0);c.push(g),l.addType(g,o)}else c.push(s(h.value,u))}}else if(n&&1==t.length&&"FunctionExpression"==n[0].type&&n[0].params.length){var g=new e.Obj(!0);c.push(s("require",u),g),l.addType(g,o),f=t[0]}return f||(f=t[Math.min(t.length-1,2)],f.isEmpty()||f.getFunctionType()||(f=null)),f?f.propagate(new e.IsCallee(e.ANull,c,null,l)):t.length&&t[0].propagate(l),e.ANull}),e.registerFunction("requireJSConfig",function(r,t,n){var i=e.cx().parent,s=i&&i._requireJS;if(s&&n&&n.length&&"ObjectExpression"==n[0].type){var o=u(n[0]);for(var a in o)if(o.hasOwnProperty(a)){var l=o[a],f=s.options[a];if(f){if("paths"==a)for(var c in l)l.hasOwnProperty(c)&&!s.options.paths[c]&&(s.options.paths[c]=l[c])}else s.options[a]=l}}return e.ANull}),r.registerPlugin("requirejs",function(e,r){return e._requireJS={interfaces:Object.create(null),options:r||{},currentFile:null,server:e},e.on("beforeLoad",function(e){this._requireJS.currentFile=e.name}),e.on("reset",function(){this._requireJS.interfaces=Object.create(null),this._requireJS.require=null}),{defs:a}});var a={"!name":"requirejs","!define":{module:{id:"string",uri:"string",config:"fn() -> ?",exports:"?"}},requirejs:{"!type":"fn(deps: [string], callback: fn(), errback: fn()) -> !custom:requireJS",onError:"fn(err: +Error)",load:"fn(context: ?, moduleName: string, url: string)",config:"fn(config: ?) -> !custom:requireJSConfig",version:"string",isBrowser:"bool"},require:"requirejs",define:{"!type":"fn(deps: [string], callback: fn()) -> !custom:requireJS",amd:{jQuery:"bool"}}}});
//# sourceMappingURL=requirejs.min.js.map