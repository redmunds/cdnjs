{"version":3,"sources":["smart-underline.js"],"names":["PHI","backgroundPositionYCache","calculateBaselineYRatio","calculateTextHighestY","calculateTypeMetrics","clearCanvas","containerIdAttrName","containsAnyNonInlineElements","containsInvalidElements","countParentContainers","destroy","getBackgroundColor","getBackgroundColorNode","getLinkColor","getUnderlineBackgroundPositionY","hasValidLinkContent","init","initLink","initLinkOnHover","isTransparent","linkAlwysAttrName","linkBgPosAttrName","linkColorAttrName","linkContainers","linkHoverAttrName","linkLargeAttrName","linkSmallAttrName","performanceTimes","renderStyles","selectionColor","sortContainersForCSSPrecendence","styleNode","time","uniqueLinkContainerID","window","SmartUnderline","document","documentElement","getAttribute","Date","id","canvas","context","clearRect","width","height","text","alpha","highestY","i","j","pixelData","r","ref","ref1","textWidth","x","y","fillStyle","measureText","fillText","getImageData","data","computedStyle","baselineY","descenderHeight","gLowestPixel","createElement","getContext","parseInt","fontSize","textBaseline","textAlign","fontStretch","angle","font","fontVariant","fontStyle","fontWeight","lineHeight","fontFamily","node","baselinePositionY","baselineYRatio","large","largeRect","small","smallRect","test","style","display","position","bottom","right","margin","padding","visibility","overflow","wordWrap","whiteSpace","innerHTML","appendChild","getBoundingClientRect","removeChild","top","Math","abs","adjustment","backgroundPositionY","backgroundPositionYPercent","cache","cacheKey","clientRects","descenderY","fontSizeInt","minimumCloseness","textHeight","getComputedStyle","getClientRects","length","navigator","userAgent","toLowerCase","indexOf","max","round","color","rgbaAlphaMatch","match","parseFloat","backgroundColor","parentNode","reachedRootNode","backgroundImage","child","len","ref2","children","tagName","count","hasAttribute","containers","container","sorted","depth","push","sort","a","b","link","textDecoration","setAttribute","links","containersWithPrecedence","len1","linkBackgroundPositionYs","linkColors","linkSelector","styles","modifier","alreadyMadeSmart","madeSmart","this","options","startTime","querySelectorAll","location","removeEventListener","addEventListener","body","attribute","results","Array","prototype","forEach","call","removeAttribute","readyState"],"mappings":"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","file":"smart-underline.min.js"}