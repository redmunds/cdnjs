(function(){var e,t,n,r,i,o,a,l,d,u,m,c,s,g,p,f,h,v,y,b,k,w,x,S,C,A,z,E,L,M,H,T,I,N;window.SmartUnderline={init:function(){},destroy:function(){}},window.getComputedStyle&&document.documentElement.getAttribute&&(e=1.618034,M="#b4d5fe",x="data-smart-underline-link-color",z="data-smart-underline-link-small",A="data-smart-underline-link-large",k="data-smart-underline-link-always",w="data-smart-underline-link-background-position",C="data-smart-underline-link-hover",a="data-smart-underline-container-id",E=[],I=function(){return+new Date},S={},N=function(){var e;return e=0,function(){return e+=1}}(),o=function(e,t){return t.clearRect(0,0,e.width,e.height)},r=function(e,t,n){var r,i,a,l,d,u,m,c,s,g,p;for(o(t,n),n.fillStyle="red",s=n.measureText(e).width,n.fillText(e,0,0),i=void 0,g=a=0,m=s;0<=m?a<=m:a>=m;g=0<=m?++a:--a)for(p=l=0,c=t.height;0<=c?l<=c:l>=c;p=0<=c?++l:--l)d=n.getImageData(g,p,g+1,p+1),u=d.data[0],r=d.data[3],255===u&&r>50&&(i||(i=p),p>i&&(i=p));return o(t,n),i},i=function(e){var t,n,i,o,a;return n=document.createElement("canvas"),i=n.getContext("2d"),n.height=n.width=2*parseInt(e.fontSize,10),i.textBaseline="top",i.textAlign="start",i.fontStretch=1,i.angle=0,i.font=e.fontVariant+" "+e.fontStyle+" "+e.fontWeight+" "+e.fontSize+"/"+e.lineHeight+" "+e.fontFamily,t=r("I",n,i),a=r("g",n,i),o=a-t,{baselineY:t,descenderHeight:o}},n=function(e){var t,n,r,i,o,a,l,d;return d=document.createElement("div"),d.style.display="block",d.style.position="absolute",d.style.bottom=0,d.style.right=0,d.style.width=0,d.style.height=0,d.style.margin=0,d.style.padding=0,d.style.visibility="hidden",d.style.overflow="hidden",d.style.wordWrap="normal",d.style.whiteSpace="nowrap",a=document.createElement("span"),i=document.createElement("span"),a.style.display="inline",i.style.display="inline",a.style.fontSize="0px",i.style.fontSize="2000px",a.innerHTML="X",i.innerHTML="X",d.appendChild(a),d.appendChild(i),e.appendChild(d),l=a.getBoundingClientRect(),o=i.getBoundingClientRect(),e.removeChild(d),t=l.top-o.top,r=o.height,n=Math.abs(t/r)},t={},p=function(r){var o,a,l,d,u,m,c,s,g,p,f,h,v,y,b;return g=getComputedStyle(r),c="font:"+g.fontFamily+"size:"+g.fontSize+"weight:"+g.fontWeight,(m=t[c])?m:(y=i(g),d=y.baselineY,p=y.descenderHeight,s=r.getClientRects(),(null!=s?s.length:void 0)?(o=1,b=s[0].height-o,-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&(o=.98,u=n(r),d=u*b*o),f=d+p,h=parseInt(g.fontSize,10),v=3,a=d+Math.max(v,p/e),4===p&&(a=f-1),3===p&&(a=f),l=Math.round(100*a/b),p>2&&h>10&&l<=100?(t[c]=l,l):void 0):void 0)},b=function(e){var t,n;return"transparent"===e||"rgba(0, 0, 0, 0)"===e||(n=e.match(/^rgba\(.*,(.+)\)/i),2===(null!=n?n.length:void 0)&&(t=parseFloat(n[1]),t<1e-4))},s=function(e){var t,n,r,i;return n=getComputedStyle(e),t=n.backgroundColor,r=e.parentNode,i=!r||r===document.documentElement||r===e,"none"!==n.backgroundImage?null:b(t)?i?e.parentNode||e:s(r):e},f=function(e){return d(e)||l(e)},d=function(e){var t,n,r,i,o,a;for(i=e.children,n=0,r=i.length;n<r;n++)return t=i[n],"img"===(o=null!=(a=t.tagName)?a.toLowerCase():void 0)||"video"===o||"canvas"===o||"embed"===o||"object"===o||"iframe"===o||d(t);return!1},l=function(e){var t,n,r,i,o;for(i=e.children,n=0,r=i.length;n<r;n++)return t=i[n],o=getComputedStyle(t),"inline"!==o.display||l(t);return!1},c=function(e){var t;return t=getComputedStyle(e).backgroundColor,e===document.documentElement&&b(t)?"rgb(255, 255, 255)":t},g=function(e){return getComputedStyle(e).color},T=document.createElement("style"),u=function(e,t){var n,r;return null==t&&(t=0),n=e.parentNode,r=!n||n===document||n===e,r?t:(n.hasAttribute(a)&&(t+=1),t+u(n))},H=function(e){var t,n,r;r=[];for(n in e)t=e[n],t.depth=u(t.container),r.push(t);return r.sort(function(e,t){return e.depth<t.depth?-1:e.depth>t.depth?1:0}),r},v=function(e){var t,n,r,i,o;return o=getComputedStyle(e),r=parseFloat(o.fontSize),!!("underline"===o.textDecoration&&"inline"===o.display&&r>=10&&!f(e)&&(n=s(e),n&&(t=p(e))))&&(e.setAttribute(x,g(e)),e.setAttribute(w,t),i=n.getAttribute(a),i?S[i].links.push(e):(i=N(),n.setAttribute(a,i),S[i]={id:i,container:n,links:[e]}),!0)},L=function(){var e,t,n,r,i,o,l,d,u,m,s,f,h,v,y;for(y="",i=H(S),s={},o=0,d=i.length;o<d;o++){for(r=i[o],f={},v=r.links,l=0,u=v.length;l<u;l++)m=v[l],f[g(m)]=!0,s[p(m)]=!0;e=c(r.container);for(n in f)h=function(e){return null==e&&(e=""),"["+a+'="'+r.id+'"] a['+x+'="'+n+'"]['+k+"]"+e+",\n["+a+'="'+r.id+'"] a['+x+'="'+n+'"]['+C+"]"+e+":hover"},y+=h()+", "+h(":visited")+" {\n  color: "+n+";\n  text-decoration: none !important;\n  text-shadow: 0.03em 0 "+e+", -0.03em 0 "+e+", 0 0.03em "+e+", 0 -0.03em "+e+", 0.06em 0 "+e+", -0.06em 0 "+e+", 0.09em 0 "+e+", -0.09em 0 "+e+", 0.12em 0 "+e+", -0.12em 0 "+e+", 0.15em 0 "+e+", -0.15em 0 "+e+";\n  background-color: transparent;\n  background-image: -webkit-linear-gradient("+e+", "+e+"), -webkit-linear-gradient("+e+", "+e+"), -webkit-linear-gradient("+n+", "+n+");\n  background-image: -moz-linear-gradient("+e+", "+e+"), -moz-linear-gradient("+e+", "+e+"), -moz-linear-gradient("+n+", "+n+");\n  background-image: -o-linear-gradient("+e+", "+e+"), -o-linear-gradient("+e+", "+e+"), -o-linear-gradient("+n+", "+n+");\n  background-image: -ms-linear-gradient("+e+", "+e+"), -ms-linear-gradient("+e+", "+e+"), -ms-linear-gradient("+n+", "+n+");\n  background-image: linear-gradient("+e+", "+e+"), linear-gradient("+e+", "+e+"), linear-gradient("+n+", "+n+");\n  -webkit-background-size: 0.05em 1px, 0.05em 1px, 1px 1px;\n  -moz-background-size: 0.05em 1px, 0.05em 1px, 1px 1px;\n  background-size: 0.05em 1px, 0.05em 1px, 1px 1px;\n  background-repeat: no-repeat, no-repeat, repeat-x;\n}\n\n"+h("::selection")+" {\n  text-shadow: 0.03em 0 "+M+", -0.03em 0 "+M+", 0 0.03em "+M+", 0 -0.03em "+M+", 0.06em 0 "+M+", -0.06em 0 "+M+", 0.09em 0 "+M+", -0.09em 0 "+M+", 0.12em 0 "+M+", -0.12em 0 "+M+", 0.15em 0 "+M+", -0.15em 0 "+M+";\n  background: "+M+";\n}\n\n"+h("::-moz-selection")+" {\n  text-shadow: 0.03em 0 "+M+", -0.03em 0 "+M+", 0 0.03em "+M+", 0 -0.03em "+M+", 0.06em 0 "+M+", -0.06em 0 "+M+", 0.09em 0 "+M+", -0.09em 0 "+M+", 0.12em 0 "+M+", -0.12em 0 "+M+", 0.15em 0 "+M+", -0.15em 0 "+M+";\n  background: "+M+";\n}"}for(t in s)y+="a["+w+'="'+t+'"] {\n  background-position: 0% '+t+"%, 100% "+t+"%, 0% "+t+"%;\n}";return T.innerHTML=y},y=function(){var e,t,n;if(t=this,e=t.hasAttribute(C),!e&&(n=v(t)))return t.setAttribute(C,""),L()},h=function(e){var t,n,r,i,o,a;if(a=I(),i=document.querySelectorAll((e.location?e.location+" ":"")+"a"),i.length){for(S={},t=0,n=i.length;t<n;t++)r=i[t],o=v(r),o?r.setAttribute(k,""):(r.removeEventListener("mouseover",y),r.addEventListener("mouseover",y));return L(),document.body.appendChild(T),E.push(I()-a)}},m=function(){var e,t,n,r,i,o;for(null!=(r=T.parentNode)&&r.removeChild(T),Array.prototype.forEach.call(document.querySelectorAll("["+C+"]"),function(e){return e.removeEventListener(y)}),i=[x,z,A,k,C,a],o=[],t=0,n=i.length;t<n;t++)e=i[t],o.push(Array.prototype.forEach.call(document.querySelectorAll("["+e+"]"),function(t){return t.removeAttribute(e)}));return o},window.SmartUnderline={init:function(e){return null==e&&(e={}),"loading"===document.readyState?(window.addEventListener("DOMContentLoaded",function(){return h(e)}),window.addEventListener("load",function(){return m(),h(e)})):(m(),h(e))},destroy:function(){return m()},performanceTimes:function(){return E}})}).call(this);
//# sourceMappingURL=smart-underline.min.js.map