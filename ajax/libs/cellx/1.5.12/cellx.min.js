!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.cellx=e():t.cellx=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){(function(e){function i(t,n){function r(t){var o=this;o&&o!=e||(o=r),j.call(o,C)||Object.defineProperty(o,C,{value:new c});var a=o[C].get(r);if(!a){if("dispose"===t&&arguments.length>=2)return;n=Object.create(n),n.owner=o,a=new O(s,n),o[C].set(r,a)}switch(arguments.length){case 0:return a.get();case 1:return a.set(t);default:switch(t){case"bind":return r=r.bind(o),r.constructor=i,r;case"unwrap":return a;default:return V[t].apply(a,I.call(arguments,1))}}}n||(n={});var s=t;return r.constructor=i,(n.onChange||n.onError)&&r.call(n.owner||e),r}function r(t,e){return new b(t,"boolean"==typeof e?{adoptsItemChanges:e}:e)}function s(t,e){return new E(t,"boolean"==typeof e?{adoptsItemChanges:e}:e)}function o(t,e,n){var r="_"+e;t[r]="function"==typeof n&&n.constructor==i?n:i(n),Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return this[r]()},set:function(t){this[r](t)}})}function a(t,e){Object.keys(e).forEach(function(n){o(t,n,e[n])})}function h(t,e,n){return 3==arguments.length?o(t,e,n):a(t,e),t}function l(t,e,n,r){if(1==arguments.length)return r=t,function(t,e,n){return l(t,e,n,r)};r||(r={}),r.computed=!1;var s="_"+e;return t[s]=i(n.initializer.call(t),r),{configurable:!0,enumerable:n.enumerable,get:function(){return this[s]()},set:function(t){this[s](t)}}}function u(t,e,n,r){if(1==arguments.length)return r=t,function(t,e,n){return u(t,e,n,r)};var s=n.initializer();if("function"!=typeof s)throw new TypeError("Property value must be a function");r||(r={}),r.computed=!0;var o="_"+e;t[o]=i(s,r);var a={configurable:!0,enumerable:n.enumerable,get:function(){return this[o]()}};return r.set&&(a.set=function(t){this[o](t)}),a}var c=n(4),f=n(1),_=n(15),v=n(7),p=n(10),d=n(5),g=n(11),m=n(9),y=n(3),x=n(2),b=n(14),E=n(13),O=n(12),w=m.UID,C=m.CELLS,j=Object.prototype.hasOwnProperty,I=Array.prototype.slice,V=O.prototype;y.setHandler(_),i.cellx=i,i.KEY_UID=w,i.ErrorLogger=y,i.EventEmitter=x,i.ObservableMap=b,i.ObservableList=E,i.Cell=O,i.map=r,i.list=s,i.define=h,i.d={observable:l,computed:u},i.js={Symbol:f,Map:c},i.utils={logError:_,nextUID:v,mixin:p,createClass:d,nextTick:g,defineObservableProperty:o,defineObservableProperties:a},t.exports=i}).call(e,function(){return this}())},function(t,e,n){(function(e){var i=n(7),r=e.Symbol;r||(r=function(t){return"__"+t+"_"+Math.floor(1e9*Math.random())+"_"+i()+"__"},r.iterator=r("iterator")),t.exports=r}).call(e,function(){return this}())},function(t,e,n){var i=n(1),r=n(5),s=n(3),o=Object.prototype.hasOwnProperty,a=i("inner"),h=r({Static:{KEY_INNER:a},constructor:function(){this._events=Object.create(null)},on:function(t,e,n){if("object"==typeof t){n=e;var i=t;for(t in i)o.call(i,t)&&this._on(t,i[t],n)}else this._on(t,e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t){n=e;var i=t;for(t in i)o.call(i,t)&&this._off(t,i[t],n)}else this._off(t,e,n);else this._events&&(this._events=Object.create(null));return this},_on:function(t,e,n){var i=t.indexOf(":");if(-1!=i)this["_"+t.slice(i+1)]("on",t.slice(0,i),e,n);else{var r=(this._events||(this._events=Object.create(null)))[t];r||(r=this._events[t]=[]),r.push({listener:e,context:null==n?this:n})}},_off:function(t,e,n){var i=t.indexOf(":");if(-1!=i)this["_"+t.slice(i+1)]("off",t.slice(0,i),e,n);else{var r=this._events&&this._events[t];if(!r)return;null==n&&(n=this);for(var s=r.length;s;){var o=r[--s];if((o.listener==e||o.listener[a]===e)&&o.context===n){r.splice(s,1);break}}r.length||delete this._events[t]}},once:function(t,e,n){function i(){return this._off(t,i,n),e.apply(this,arguments)}return i[a]=e,this._on(t,i,n),this},emit:function(t){return"string"==typeof t?t={target:this,type:t}:t.target||(t.target=this),this._handleEvent(t),t},_handleEvent:function(t){var e=this._events&&this._events[t.type];if(e){e=e.slice();for(var n=0,i=e.length;i>n;n++)try{e[n].listener.call(e[n].context,t)===!1&&(t.isPropagationStopped=!0)}catch(r){this._logError(r)}}},_logError:function(){s.log.apply(s,arguments)}});t.exports=h},function(t,e){var n={_handler:null,setHandler:function(t){this._handler=t},log:function(){this._handler.apply(this,arguments)}};t.exports=n},function(t,e,n){(function(e){var i=n(1),r=n(7),s=n(5),o=n(9),a=o.UID,h=Object.prototype.hasOwnProperty,l=e.Map;if(!l){var u={value:void 0};l=s({constructor:function(t){if(this._entries=Object.create(null),this._objectStamps={},this._first=null,this._last=null,this.size=0,t)for(var e=0,n=t.length;n>e;e++)this.set(t[e][0],t[e][1])},has:function(t){return!!this._entries[this._getValueStamp(t)]},get:function(t){return(this._entries[this._getValueStamp(t)]||u).value},set:function(t,e){var n=this._entries,i=this._getValueStamp(t);if(n[i])n[i].value=e;else{var r=n[i]={key:t,keyStamp:i,value:e,prev:this._last,next:null};this.size++?this._last.next=r:this._first=r,this._last=r}return this},"delete":function(t){var e=this._getValueStamp(t),n=this._entries[e];if(!n)return!1;if(--this.size){var i=n.prev,r=n.next;i?i.next=r:this._first=r,r?r.prev=i:this._last=i}else this._first=null,this._last=null;return delete this._entries[e],delete this._objectStamps[e],!0},clear:function(){var t=this._entries;for(var e in t)delete t[e];this._objectStamps={},this._first=null,this._last=null,this.size=0},_getValueStamp:function(t){switch(typeof t){case"undefined":return"undefined";case"object":if(null===t)return"null";break;case"boolean":return"?"+t;case"number":return"+"+t;case"string":return","+t}return this._getObjectStamp(t)},_getObjectStamp:function(t){if(!h.call(t,a)){if(!Object.isExtensible(t)){var e,n=this._objectStamps;for(e in n)if(h.call(n,e)&&n[e]==t)return e;return e=r(),n[e]=t,e}Object.defineProperty(t,a,{value:r()})}return t[a]},forEach:function(t,n){null==n&&(n=e);for(var i=this._first;i;){t.call(n,i.value,i.key,this);do i=i.next;while(i&&!this._entries[i.keyStamp])}},toString:function(){return"[object Map]"}}),[["keys",function(t){return t.key}],["values",function(t){return t.value}],["entries",function(t){return[t.key,t.value]}]].forEach(function(t){var e=t[1];l.prototype[t[0]]=function(){var t,n=this._entries,i=!1,r=this;return{next:function(){if(!i){if(t){do t=t.next;while(t&&!n[t.keyStamp])}else t=r._first;if(t)return{value:e(t),done:!1};i=!0}return{value:void 0,done:!0}}}}})}l.prototype[i.iterator]||(l.prototype[i.iterator]=l.prototype.entries),t.exports=l}).call(e,function(){return this}())},function(t,e,n){function i(t){var e;t.Extends?(e=t.Extends,delete t.Extends):e=Object;var n;o.call(t,"constructor")?(n=t.constructor,delete t.constructor):n=e==Object?function(){}:function(){return e.apply(this,arguments)};var i=n.prototype=Object.create(e.prototype);return t.Implements&&(t.Implements.forEach(function(t){"function"==typeof t?(Object.keys(t).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}),s(i,t.prototype)):s(i,t)}),delete t.Implements),Object.keys(e).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}),t.Static&&(s(n,t.Static),delete t.Static),void 0===n.extend&&(n.extend=r),s(i,t),Object.defineProperty(i,"constructor",{configurable:!0,writable:!0,value:n}),n}var r,s=n(10),o=Object.prototype.hasOwnProperty;r=function(t){return t.Extends=this,i(t)},t.exports=i},function(t,e){var n=Object.is||function(t,e){return 0===t&&0===e?1/t==1/e:t===e||t!=t&&e!=e};t.exports=n},function(t,e){function n(){return String(++i)}var i=0;t.exports=n},function(t,e,n){var i=n(4),r=n(2),s=r.extend({constructor:function(){this._valueCounts=new i},_onItemChange:function(t){this._handleEvent(t)},_registerValue:function(t){var e=this._valueCounts,n=e.get(t);n?e.set(t,n+1):(e.set(t,1),this.adoptsItemChanges&&t instanceof r&&t.on("change",this._onItemChange,this))},_unregisterValue:function(t){var e=this._valueCounts,n=e.get(t);n>1?e.set(t,n-1):(e["delete"](t),this.adoptsItemChanges&&t instanceof r&&t.off("change",this._onItemChange,this))},dispose:function(){this.adoptsItemChanges&&this._valueCounts.forEach(function(t){t instanceof r&&t.off("change",this._onItemChange,this)},this)}});t.exports=s},function(t,e,n){var i=n(1),r={UID:i("uid"),CELLS:i("cells")};t.exports=r},function(t,e){function n(t,e){for(var n=Object.getOwnPropertyNames(e),i=0,r=n.length;r>i;i++){var s=n[i];Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))}return t}t.exports=n},function(t,e,n){(function(e){var i,r=n(3);if(e.process&&"[object process]"==process.toString()&&process.nextTick)i=process.nextTick;else if(e.setImmediate)i=function(t){setImmediate(t)};else if(e.Promise&&-1!=Promise.toString().indexOf("[native code]")){var s=Promise.resolve();i=function(t){s.then(function(){t()})}}else{var o;e.addEventListener("message",function(){if(o){var t=o;o=null;for(var e=0,n=t.length;n>e;e++)try{t[e]()}catch(i){r.log(i)}}}),i=function(t){o?o.push(t):(o=[t],postMessage("__tic__","*"))}}t.exports=i}).call(e,function(){return this}())},function(t,e,n){function i(){if(!(f>_)){u=!0;do{var t=c[f];if(t){var e=t.shift();if(f){var n=f;e._active&&e._recalc(),c[n].length||(c[n]=null,f&&f++)}else{var i=e._changeEvent;e._fixedValue=e._value,e._changeEvent=null,e._changed=!0,e._events.change&&e._handleEvent(i);for(var r=e._slaves,s=0,o=r.length;o>s;s++){var a=r[s];a._fixed&&((c[1]||(c[1]=[])).push(a),_||(_=1),a._fixed=!1)}c[0].length||f++}}else f++}while(_>=f);_=-1,p++,u=!1}}var r=n(6),s=n(11),o=n(2),a=o.KEY_INNER,h=Array.prototype.slice,l={original:null},u=!1,c=[[]],f=0,_=-1,v=null,p=1,d=o.extend({constructor:function(t,e){o.call(this),e||(e={}),this.owner=e.owner||null,this.computed="function"==typeof t&&(void 0!==e.computed?e.computed:t.constructor==Function),this._value=void 0,this._fixedValue=void 0,this.initialValue=void 0,this._formula=null,this._get=e.get||null,this._set=e.set||null,this._validate=e.validate||null,this._masters=null,this._slaves=[],this._level=0,this._active=!this.computed,this._changeEvent=null,this._isChangeCancellable=!0,this._lastErrorEvent=null,this._fixed=!0,this._version=0,this._changed=!1,this._circularityCounter=0,this.computed?this._formula=t:(this._validate&&this._validate.call(this.owner||this,t),this._value=this._fixedValue=this.initialValue=t,t instanceof o&&t.on("change",this._onValueChange,this)),e.onChange&&this.on("change",e.onChange),e.onError&&this.on("error",e.onError)},get changed(){return!u&&this.computed&&i(),this._changed},on:function(t,e,n){return u||i(),!this.computed||this._events.change||this._slaves.length||this._activate(),o.prototype.on.call(this,t,e,n),this},off:function(t,e,n){return u||i(),o.prototype.off.call(this,t,e,n),!this.computed||this._events.change||this._slaves.length||this._deactivate(),this},_on:function(t,e,n){o.prototype._on.call(this,t,e,null==n?this.owner:n)},_off:function(t,e,n){o.prototype._off.call(this,t,e,null==n?this.owner:n)},addChangeListener:function(t,e){return this.on("change",t,e),this},removeChangeListener:function(t,e){return this.off("change",t,e),this},addErrorListener:function(t,e){return this.on("error",t,e),this},removeErrorListener:function(t,e){return this.off("error",t,e),this},subscribe:function(t,e){function n(e){return t.call(this,e.error||null,e)}return n[a]=t,this.on("change",n,e).on("error",n,e),this},unsubscribe:function(t,e){return this.off("change",t,e).off("error",t,e),this},_registerSlave:function(t){!this.computed||this._events.change||this._slaves.length||this._activate(),this._slaves.push(t)},_unregisterSlave:function(t){this._slaves.splice(this._slaves.indexOf(t),1),!this.computed||this._events.change||this._slaves.length||this._deactivate()},_activate:function(){if(this._version!=p){this._masters=null,this._level=0;var t=this._tryFormula();t===l?this._handleError(l.original):r(this._value,t)||(this._value=t,this._changed=!0),this._version=p}for(var e=this._masters||[],n=e.length;n;)e[--n]._registerSlave(this);this._active=!0},_deactivate:function(){for(var t=this._masters||[],e=t.length;e;)t[--e]._unregisterSlave(this);this._active=!1},_onValueChange:function(t){this._changeEvent?(t.prev=this._changeEvent,this._changeEvent=t,this._value===this._fixedValue&&(this._isChangeCancellable=!1)):(c[0].push(this),f=0,-1==_&&(_=0),t.prev=null,this._changeEvent=t,this._isChangeCancellable=!1,u||s(i))},get:function(){if(!u&&this.computed&&i(),this.computed&&!this._active&&this._version!=p){this._masters=null,this._level=0;var t=this._tryFormula();t===l?this._handleError(l.original):r(this._value,t)||(this._value=t,this._changed=!0),this._version=p}return v&&(v._masters?-1==v._masters.indexOf(this)&&(v._masters.push(this),v._level<=this._level&&(v._level=this._level+1)):(v._masters=[this],v._level=this._level+1)),this._get?this._get.call(this.owner||this,this._value):this._value},set:function(t){if(this.computed&&!this._set)throw new TypeError((this.debugKey?"["+this.debugKey+"] ":"")+"Cannot write to read-only cell");var e=this._value;return r(e,t)?!1:(this._validate&&this._validate.call(this.owner||this,t),this.computed?this._set.call(this.owner||this,t):(this._value=t,e instanceof o&&e.off("change",this._onValueChange,this),t instanceof o&&t.on("change",this._onValueChange,this),this._changeEvent?r(t,this._fixedValue)&&this._isChangeCancellable?(1==c[0].length?(c[0].pop(),_||(_=-1)):c[0].splice(c[0].indexOf(this),1),this._changeEvent=null):this._changeEvent={target:this,type:"change",oldValue:e,value:t,prev:this._changeEvent}:(c[0].push(this),f=0,-1==_&&(_=0),this._changeEvent={target:this,type:"change",oldValue:e,value:t,prev:null},this._isChangeCancellable=!0,u||s(i))),!0)},recalc:function(){return this._recalc(!0)},_recalc:function(t){if(!t)if(this._version==p+1){if(10==++this._circularityCounter)return this._fixed=!0,this._version=p+1,this._handleError(new RangeError("Circular dependency detected")),!1}else this._circularityCounter=1;var e=this._masters;this._masters=null;var n=this._level;this._level=0;for(var a=this._tryFormula(),h=this._masters||[],u=!1,f=e.length;f;){var v=e[--f];-1==h.indexOf(v)&&(v._unregisterSlave(this),u=!0)}if(u||e.length<h.length){for(var d=h.length;d;){var g=h[--d];-1==e.indexOf(g)&&g._registerSlave(this)}var m=this._level;if(m>n)return(c[m]||(c[m]=[])).push(this),m>_&&(_=m),void(t&&s(i))}if(this._fixed=!0,this._version=p+1,a===l)this._handleError(l.original);else{var y=this._value;if(!r(y,a)||a instanceof o){this._value=a,this._changed=!0,this._events.change&&this.emit({type:"change",oldValue:y,value:a,prev:null});for(var x=this._slaves,b=0,E=x.length;E>b;b++){var O=x[b];if(O._fixed){var w=O._level;(c[w]||(c[w]=[])).push(O),w>_&&(_=w),O._fixed=!1}}return!0}}return!1},_tryFormula:function(){var t=v;v=this;try{var e=this._formula.call(this.owner||this);return this._validate&&this._validate.call(this.owner||this,e),e}catch(n){return l.original=n,l}finally{v=t}},_handleError:function(t){this._logError(t),this._handleErrorEvent({type:"error",error:t===Object(t)?t:{message:t}})},_logError:function(){var t=h.call(arguments);this.debugKey&&t.unshift("["+this.debugKey+"]"),o.prototype._logError.apply(this,t)},_handleErrorEvent:function(t){if(this._lastErrorEvent!==t){this._lastErrorEvent=t,this._handleEvent(t);for(var e=this._slaves,n=0,i=e.length;i>n&&!t.isPropagationStopped;n++)e[n]._handleErrorEvent(t)}},dispose:function(){return u||i(),this._dispose(),this},_dispose:function(){if(this.off(),this._active)for(var t=this._slaves,e=0,n=t.length;n>e;e++)t[e]._dispose()}});t.exports=d},function(t,e,n){function i(t,e){return e>t?-1:t>e?1:0}function r(t,e){var n=t._items;if(t.sorted)for(var i=t.comparator,r=0,s=e.length;s>r;r++){for(var o=e[r],a=0,h=n.length;a!=h;){var u=a+h>>1;i(o,n[u])<0?h=u:a=u+1}n.splice(a,0,o),t._registerValue(o)}else{l.apply(n,e);for(var c=e.length;c;)t._registerValue(e[--c])}t.length=n.length}var s=n(1),o=n(6),a=n(2),h=n(8),l=Array.prototype.push,u=Array.prototype.splice,c=a.extend({Implements:[h],constructor:function f(t,e){a.call(this),h.call(this),e||(e={}),this._items=[],this.length=0,this.adoptsItemChanges=e.adoptsItemChanges!==!1,this.comparator=null,this.sorted=!1,(e.sorted||e.comparator&&e.sorted!==!1)&&(this.comparator=e.comparator||i,this.sorted=!0),t&&r(this,t instanceof f?t._items:t)},_validateIndex:function(t,e){if(void 0===t)return t;if(0>t){if(t+=this.length,0>t)throw new RangeError("Index out of range")}else if(t>=this.length+(e?1:0))throw new RangeError("Index out of range");return t},contains:function(t){return this._valueCounts.has(t)},indexOf:function(t,e){return this._items.indexOf(t,this._validateIndex(e))},lastIndexOf:function(t,e){return this._items.lastIndexOf(t,this._validateIndex(e))},get:function(t){return this._items[this._validateIndex(t)]},getRange:function(t,e){t=this._validateIndex(t||0,!0);var n=this._items;if(void 0===e)return n.slice(t);if(t+e>n.length)throw new RangeError('"index" and "count" do not denote a valid range');return n.slice(t,t+e)},set:function(t,e){if(this.sorted)throw new TypeError("Can't set to sorted list");t=this._validateIndex(t);var n=this._items;return o(n[t],e)?this:(this._unregisterValue(n[t]),n[t]=e,this._registerValue(e),this.emit("change"),this)},setRange:function(t,e){if(this.sorted)throw new TypeError("Can't set to sorted list");t=this._validateIndex(t);var n=e.length;if(!n)return this;if(t+n>this.length)throw new RangeError('"index" and length of "items" do not denote a valid range');for(var i=this._items,r=!1,s=t+n;s>t;){var a=e[--s];o(i[s],a)||(this._unregisterValue(i[s]),i[s]=a,this._registerValue(a),r=!0)}return r&&this.emit("change"),this},add:function(t){return this.addRange([t]),this},addRange:function(t){return t.length?(r(this,t),this.emit("change"),this):this},insert:function(t,e){return this.insertRange(t,[e]),this},insertRange:function(t,e){if(this.sorted)throw new TypeError("Can't insert to sorted list");t=this._validateIndex(t,!0);var n=e.length;if(!n)return this;u.apply(this._items,[].concat(t,0,e));for(var i=n;i;)this._registerValue(e[--i]);return this.length+=n,this.emit("change"),this},remove:function(t,e){var n=this._items.indexOf(t,this._validateIndex(e));return-1==n?this:(this._items.splice(n,1),this._unregisterValue(t),this.length--,this.emit("change"),this)},removeAll:function(t,e){for(var n=this._items,i=this._validateIndex(e),r=!1;-1!=(i=n.indexOf(t,i));)n.splice(i,1),this._unregisterValue(t),r=!0;return r&&(this.length=n.length,this.emit("change")),this},removeAt:function(t){return this._unregisterValue(this._items.splice(this._validateIndex(t),1)[0]),this.length--,this.emit("change"),this},removeRange:function(t,e){t=this._validateIndex(t||0,!0);var n=this._items;if(void 0===e)e=n.length-t;else if(t+e>n.length)throw new RangeError('"index" and "count" do not denote a valid range');if(!e)return this;for(var i=t+e;i>t;)this._unregisterValue(n[--i]);return n.splice(t,e),this.length-=e,this.emit("change"),this},clear:function(){return this.length&&(this._items.length=0,this._valueCounts.clear(),this.length=0,this.emit("change")),this},join:function(t){return this._items.join(t)},forEach:null,map:null,filter:null,find:function(t,e){null==e&&(e=this);for(var n=this._items,i=0,r=n.length;r>i;i++){var s=n[i];if(t.call(this,s,i,e))return s}},findIndex:function(t,e){null==e&&(e=this);for(var n=this._items,i=0,r=n.length;r>i;i++){var s=n[i];if(t.call(this,s,i,e))return i}return-1},every:null,some:null,reduce:null,reduceRight:null,clone:function(){return new this.constructor(this,{adoptsItemChanges:this.adoptsItemChanges,comparator:this.comparator,sorted:this.sorted})},toArray:function(){return this._items.slice()},toString:function(){return this._items.join()}});["forEach","map","filter","every","some","reduce","reduceRight"].forEach(function(t){c.prototype[t]=function(){return Array.prototype[t].apply(this._items,arguments)}}),[["keys",function(t){return t}],["values",function(t,e){return e}],["entries",function(t,e){return[t,e]}]].forEach(function(t){var e=t[1];c.prototype[t[0]]=function(){var t=this._items,n=0,i=!1;return{next:function(){if(!i){if(n<t.length)return{value:e(n,t[n++]),done:!1};i=!0}return{value:void 0,done:!0}}}}}),c.prototype[s.iterator]=c.prototype.values,t.exports=c},function(t,e,n){(function(e){var i=n(4),r=n(1),s=n(6),o=n(2),a=n(8),h=Object.prototype.hasOwnProperty,l=Array.isArray,u=o.extend({Implements:[a],constructor:function c(t,e){if(o.call(this),a.call(this),this._entries=new i,this.size=0,this.adoptsItemChanges=!e||e.adoptsItemChanges!==!1,t){var n=this._entries;if(t instanceof c)t._entries.forEach(function(t,e){n.set(e,t),this._registerValue(t)},this);else if(l(t))for(var r=0,s=t.length;s>r;r++){var u=t[r];n.set(u[0],u[1]),this._registerValue(u[1])}else for(var f in t)h.call(t,f)&&(n.set(f,t[f]),this._registerValue(t[f]));this.size=n.size}},has:function(t){return this._entries.has(t)},contains:function(t){return this._valueCounts.has(t)},get:function(t){return this._entries.get(t)},set:function(t,e){var n,i=this._entries,r=i.has(t);if(r){if(n=i.get(t),s(n,e))return this;this._unregisterValue(n)}return i.set(t,e),this._registerValue(e),r||this.size++,this.emit({type:"change",subtype:r?"update":"add",key:t,oldValue:n,value:e}),this},"delete":function(t){var e=this._entries;if(!e.has(t))return!1;var n=e.get(t);return e["delete"](t),this._unregisterValue(n),this.size--,this.emit({type:"change",subtype:"delete",key:t,oldValue:n,value:void 0}),!0},clear:function(){return this.size?(this._entries.clear(),this._valueCounts.clear(),this.size=0,this.emit({type:"change",subtype:"clear"}),this):this},forEach:function(t,n){null==n&&(n=e),this._entries.forEach(function(e,i){t.call(n,e,i,this)},this)},keys:function(){return this._entries.keys()},values:function(){return this._entries.values()},entries:function(){return this._entries.entries()},clone:function(){return new this.constructor(this,{adoptsItemChanges:this.adoptsItemChanges})}});u.prototype[r.iterator]=u.prototype.entries,t.exports=u}).call(e,function(){return this}())},function(t,e){(function(e){function n(){}function i(){var t=e.console;(t&&t.error||n).call(t||e,r.call(arguments,function(t){return t===Object(t)&&t.stack||t}).join(" "))}var r=Array.prototype.map;t.exports=i}).call(e,function(){return this}())}])});