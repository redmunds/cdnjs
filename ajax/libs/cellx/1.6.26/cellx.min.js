!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.cellx=e():t.cellx=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){function n(t,e){function i(t){var s=this;s&&s!=V||(s=i),C.call(s,I)||Object.defineProperty(s,I,{value:new d});var h=s[I].get(i);if(!h){if("dispose"===t&&arguments.length>=2)return;e=j(e),e.owner=s,h=new _(r,e),s[I].set(i,h)}switch(arguments.length){case 0:return h.get();case 1:return h.set(t),t;default:var o=t;switch(o){case"bind":return i=i.bind(s),i.constructor=n,i;case"unwrap":return h;default:var a=_.prototype[o].apply(h,O.call(arguments,1));return a===h?i:a}}}e||(e={});var r=t;return i.constructor=n,(e.onChange||e.onError)&&i.call(e.owner||V),i}function r(t,e){return new c(t,"boolean"==typeof e?{adoptsItemChanges:e}:e)}function s(t,e){return new f(t,"boolean"==typeof e?{adoptsItemChanges:e}:e)}function h(t,e,i){var n="_"+e;return t[n]=i instanceof _?i:new _(i,{owner:t}),Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return this[n].get()},set:function(t){this[n].set(t)}}),t}function o(t,e){return Object.keys(e).forEach(function(i){h(t,i,e[i])}),t}function a(t,e,i){return 3==arguments.length?h(t,e,i):o(t,e),t}var l=i(4),u=i(2),c=i(14),f=i(13),_=i(12),v=i(9),g=i(3),p=i(1),d=i(5),m=i(15),y=i(7),x=i(10),E=i(6),b=i(11),w=v.UID,I=v.CELLS,j=Object.create,C=Object.prototype.hasOwnProperty,O=Array.prototype.slice,V=Function("return this;")();l.setHandler(m),n.KEY_UID=w,n.ErrorLogger=l,n.EventEmitter=u,n.ObservableMap=c,n.ObservableList=f,n.Cell=_,n.map=r,n.list=s,n.define=a,n.js={is:g,Symbol:p,Map:d},n.utils={logError:m,nextUID:y,mixin:x,createClass:E,nextTick:b,defineObservableProperty:h,defineObservableProperties:o},n.cellx=n,t.exports=n},function(t,e,i){var n=i(7),r=Function("return this;")().Symbol;r||(r=function(t){return"__"+t+"_"+Math.floor(1e9*Math.random())+"_"+n()+"__"},r.iterator=r("iterator")),t.exports=r},function(t,e,i){var n=i(4),r=i(1),s=i(6),h=Object.create,o=Object.prototype.hasOwnProperty,a=r("inner"),l=s({Static:{KEY_INNER:a},constructor:function(){this._events=h(null)},on:function(t,e,i){if("object"==typeof t){i=arguments.length>=2?e:this;var n=t;for(t in n)o.call(n,t)&&this._on(t,n[t],i)}else this._on(t,e,arguments.length>=3?i:this);return this},off:function(t,e,i){var n=arguments.length;if(n)if("object"==typeof t){i=n>=2?e:this;var r=t;for(t in r)o.call(r,t)&&this._off(t,r[t],i)}else this._off(t,e,n>=3?i:this);else this._events&&(this._events=h(null));return this},_on:function(t,e,i){var n=t.indexOf(":");if(n!=-1)this["_"+t.slice(n+1)].on(t.slice(0,n),e,i);else{var r=(this._events||(this._events=h(null)))[t];r||(r=this._events[t]=[]),r.push({listener:e,context:i})}},_off:function(t,e,i){var n=t.indexOf(":");if(n!=-1)this["_"+t.slice(n+1)].off(t.slice(0,n),e,i);else{var r=this._events&&this._events[t];if(!r)return;for(var s=r.length;s;){var h=r[--s];if((h.listener==e||h.listener[a]===e)&&h.context===i){r.splice(s,1);break}}r.length||delete this._events[t]}},once:function(t,e,i){function n(){return this._off(t,n,i),e.apply(this,arguments)}return arguments.length<3&&(i=this),n[a]=e,this._on(t,n,i),this},emit:function(t){if("string"==typeof t)t={target:this,type:t};else if(t.target){if(t.target!=this)throw new TypeError("Event cannot be emitted on this object")}else t.target=this;try{this._handleEvent(t)}catch(e){this._logError(e)}return t},_handleEvent:function(t){var e=this._events&&this._events[t.type];if(e){e=e.slice();for(var i=0,n=e.length;i<n;i++)e[i].listener.call(e[i].context,t)===!1&&(t.isPropagationStopped=!0)}},_logError:function(){n.log.apply(n,arguments)}});t.exports=l},function(t,e){var i=Object.is||function(t,e){return 0===t&&0===e?1/t==1/e:t===e||t!=t&&e!=e};t.exports=i},function(t,e){var i={_handler:null,setHandler:function(t){this._handler=t},log:function(){this._handler.apply(this,arguments)}};t.exports=i},function(t,e,i){var n=i(9),r=i(1),s=i(7),h=i(6),o=n.UID,a=Object.create,l=Object.prototype.hasOwnProperty,u=Function("return this;")(),c=u.Map;if(!c){var f={value:void 0};c=h({constructor:function(t){if(this._entries=a(null),this._objectStamps={},this._first=null,this._last=null,this.size=0,t)for(var e=0,i=t.length;e<i;e++)this.set(t[e][0],t[e][1])},has:function(t){return!!this._entries[this._getValueStamp(t)]},get:function(t){return(this._entries[this._getValueStamp(t)]||f).value},set:function(t,e){var i=this._entries,n=this._getValueStamp(t);if(i[n])i[n].value=e;else{var r=i[n]={key:t,keyStamp:n,value:e,prev:this._last,next:null};this.size++?this._last.next=r:this._first=r,this._last=r}return this},"delete":function(t){var e=this._getValueStamp(t),i=this._entries[e];if(!i)return!1;if(--this.size){var n=i.prev,r=i.next;n?n.next=r:this._first=r,r?r.prev=n:this._last=n}else this._first=null,this._last=null;return delete this._entries[e],delete this._objectStamps[e],!0},clear:function(){var t=this._entries;for(var e in t)delete t[e];this._objectStamps={},this._first=null,this._last=null,this.size=0},_getValueStamp:function(t){switch(typeof t){case"undefined":return"undefined";case"object":if(null===t)return"null";break;case"boolean":return"?"+t;case"number":return"+"+t;case"string":return","+t}return this._getObjectStamp(t)},_getObjectStamp:function(t){if(!l.call(t,o)){if(!Object.isExtensible(t)){var e,i=this._objectStamps;for(e in i)if(l.call(i,e)&&i[e]==t)return e;return e=s(),i[e]=t,e}Object.defineProperty(t,o,{value:s()})}return t[o]},forEach:function(t,e){e=arguments.length>=2?e:u;for(var i=this._first;i;){t.call(e,i.value,i.key,this);do i=i.next;while(i&&!this._entries[i.keyStamp])}},toString:function(){return"[object Map]"}}),[["keys",function(t){return t.key}],["values",function(t){return t.value}],["entries",function(t){return[t.key,t.value]}]].forEach(function(t){var e=t[1];c.prototype[t[0]]=function(){var t,i=this._entries,n=!1,r=this;return{next:function(){if(!n){if(t){do t=t.next;while(t&&!i[t.keyStamp])}else t=r._first;if(t)return{value:e(t),done:!1};n=!0}return{value:void 0,done:!0}}}}})}c.prototype[r.iterator]||(c.prototype[r.iterator]=c.prototype.entries),t.exports=c},function(t,e,i){function n(t){var e;t.Extends?(e=t.Extends,delete t.Extends):e=Object;var i;o.call(t,"constructor")?(i=t.constructor,delete t.constructor):i=e==Object?function(){}:function(){return e.apply(this,arguments)};var n=i.prototype=h(e.prototype);return t.Implements&&(t.Implements.forEach(function(t){"function"==typeof t?(Object.keys(t).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(t,e))}),s(n,t.prototype)):s(n,t)}),delete t.Implements),Object.keys(e).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(e,t))}),t.Static&&(s(i,t.Static),delete t.Static),void 0===i.extend&&(i.extend=r),s(n,t),Object.defineProperty(n,"constructor",{configurable:!0,writable:!0,value:i}),i}var r,s=i(10),h=Object.create,o=Object.prototype.hasOwnProperty;r=function(t){return t.Extends=this,n(t)},t.exports=n},function(t,e){function i(){return String(++n)}var n=0;t.exports=i},function(t,e,i){var n=i(2),r=i(5),s=n.extend({constructor:function(){this._valueCounts=new r},_onItemChange:function(t){this._handleEvent(t)},_registerValue:function(t){var e=this._valueCounts,i=e.get(t);i?e.set(t,i+1):(e.set(t,1),this.adoptsItemChanges&&t instanceof n&&t.on("change",this._onItemChange,this))},_unregisterValue:function(t){var e=this._valueCounts,i=e.get(t);i>1?e.set(t,i-1):(e["delete"](t),this.adoptsItemChanges&&t instanceof n&&t.off("change",this._onItemChange,this))}});t.exports=s},function(t,e,i){var n=i(1);t.exports={UID:n("uid"),CELLS:n("cells")}},function(t,e){function i(t,e){for(var i=Object.getOwnPropertyNames(e),n=0,r=i.length;n<r;n++){var s=i[n];Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))}return t}t.exports=i},function(t,e,i){var n,r=i(4),s=Function("return this;")();if(s.process&&"[object process]"==process.toString()&&process.nextTick)n=process.nextTick;else if(s.setImmediate)n=function(t){setImmediate(t)};else if(s.Promise&&Promise.toString().indexOf("[native code]")!=-1){var h=Promise.resolve();n=function(t){h.then(function(){t()})}}else{var o;s.addEventListener("message",function(){if(o){var t=o;o=null;for(var e=0,i=t.length;e<i;e++)try{t[e]()}catch(n){r.log(n)}}}),n=function(t){o?o.push(t):(o=[t],postMessage("__tic__","*"))}}t.exports=n},function(t,e,i){function n(){if(g){g=!1,p=!0;for(var t=f[_];;){var e=(t||[]).shift();if(e){var i=_,n=e._level,r=e._changeEvent;if(!r){if(n>_||e._levelInRelease==-1){if(!t.length){if(++_>v)break;t=f[_]}continue}if(e.pull(),n=e._level,r=e._changeEvent,_!=i){r?t.unshift(e):n<=i&&(e._levelInRelease=-1),t=f[_];continue}if(n>_){t.length||(t=f[++_]);continue}}if(e._levelInRelease=-1,r){e._fixedValue=e._value,e._changeEvent=null,e._events.change&&e._handleEvent(r);for(var s=e._pushingIndex,h=e._slaves,o=0,a=h.length;o<a;o++){var u=h[o];u._level<=n&&(u._level=n+1),s>u._pushingIndex&&(u._pushingIndex=s,u._changeEvent=null,u._addToRelease())}}if(_==i){if(t.length)continue;if(++_>v)break}t=f[_]}else{if(++_>v)break;t=f[_]}}_=l,v=-1,p=!1,d++}}function r(t,e){e(t)}var s=i(2),h=i(3),o=i(11),a=Array.prototype.slice,l=Number.MAX_SAFE_INTEGER||9007199254740991,u=s.KEY_INNER,c=0,f=[],_=l,v=-1,g=!1,p=!1,d=1,m=null,y={original:null},x=s.extend({Static:{forceRelease:function(){g&&n()}},constructor:function(t,e){s.call(this),e||(e={});var i=this;this.debugKey=e.debugKey,this.owner=e.owner||this,this._pull="function"==typeof t?t:null,this._get=e.get||null,this._validate=e.validate||null,this._merge=e.merge||null,this._put=e.put||r;var n=this.push,h=this.fail;this.push=function(t){n.call(i,t)},this.fail=function(t){h.call(i,t)},this._onFulfilled=this._onRejected=null,this._reap=e.reap||null,this._pull?this._fixedValue=this._value=void 0:(this._validate&&this._validate(t,void 0),this._merge&&(t=this._merge(t,void 0)),this._fixedValue=this._value=t,t instanceof s&&t.on("change",this._onValueChange,this)),this._error=null,this._errorCell=null,this._pushingIndex=0,this._version=0,this._inited=!1,this._currentlyPulls=!1,this._active=!1,this._hasFollowers=!1,this._masters=null,this._slaves=[],this._level=0,this._levelInRelease=-1,this._pending=this._fulfilled=this._rejected=!1,this._changeEvent=null,this._canCancelChange=!0,this._lastErrorEvent=null,e.onChange&&this.on("change",e.onChange),e.onError&&this.on("error",e.onError)},on:function(t,e,i){return g&&n(),this._activate(),"object"==typeof t?s.prototype.on.call(this,t,arguments.length>=2?e:this.owner):s.prototype.on.call(this,t,e,arguments.length>=3?i:this.owner),this._hasFollowers=!0,this},off:function(t,e,i){g&&n();var r=arguments.length;return r?"object"==typeof t?s.prototype.off.call(this,t,r>=2?e:this.owner):s.prototype.off.call(this,t,e,r>=3?i:this.owner):s.prototype.off.call(this),this._slaves.length||this._events.change||this._events.error||(this._hasFollowers=!1,this._deactivate()),this},addChangeListener:function(t,e){return this.on("change",t,arguments.length>=2?e:this.owner)},removeChangeListener:function(t,e){return this.off("change",t,arguments.length>=2?e:this.owner)},addErrorListener:function(t,e){return this.on("error",t,arguments.length>=2?e:this.owner)},removeErrorListener:function(t,e){return this.off("error",t,arguments.length>=2?e:this.owner)},subscribe:function(t,e){function i(e){return t.call(this,e.error||null,e)}return i[u]=t,arguments.length<2&&(e=this.owner),this.on("change",i,e).on("error",i,e)},unsubscribe:function(t,e){return arguments.length<2&&(e=this.owner),this.off("change",t,e).off("error",t,e)},_registerSlave:function(t){this._activate(),this._slaves.push(t),this._hasFollowers=!0},_unregisterSlave:function(t){this._slaves.splice(this._slaves.indexOf(t),1),this._slaves.length||this._events.change||this._events.error||(this._hasFollowers=!1,this._deactivate())},_activate:function(){if(this._pull&&!this._active&&(!this._inited||this._masters)){if(this._version<d){var t=this._tryPull();t===y?this._fail(y.original,!0):this._push(t,!0)}var e=this._masters;if(e){for(var i=e.length;i;)e[--i]._registerSlave(this);this._active=!0}}},_deactivate:function(){if(this._active){for(var t=this._masters,e=t.length;e;)t[--e]._unregisterSlave(this);this._active=!1,this._reap&&this._reap.call(this.owner)}},_addToRelease:function(){var t=this._level;t<=this._levelInRelease||((f[t]||(f[t]=[])).push(this),_>t&&(_=t),v<t&&(v=t),this._levelInRelease=t,g||p||(g=!0,o(n)))},_onValueChange:function(t){this._pushingIndex=++c,this._changeEvent?(t.prev=this._changeEvent,this._changeEvent=t,this._value===this._fixedValue&&(this._canCancelChange=!1)):(t.prev=null,this._changeEvent=t,this._canCancelChange=!1,this._addToRelease())},pull:function(){if(!this._pull)return this;g&&n();var t,e,i=this._hasFollowers;i&&(t=this._masters||[],e=this._level),this._pending=!0,this._fulfilled=this._rejected=!1;var r=this._tryPull();if(i){for(var s=this._masters||[],h=s.length,o=0,a=h;a;){var l=s[--a];t.indexOf(l)==-1&&(l._registerSlave(this),o++)}if(h-o<t.length)for(var u=t.length;u;){var c=t[--u];s.indexOf(c)==-1&&c._unregisterSlave(this)}if(this._active=!!h,p&&this._level>e)return this._addToRelease(),this}return r===y?this._fail(y.original,p):this._push(r,p),this},_tryPull:function(){if(this._currentlyPulls)throw new TypeError("Circular pulling detected");var t=m;m=this,this._currentlyPulls=!0,this._masters=null,this._level=0;try{return this._pull.call(this.owner,this.push,this.fail,this._value)}catch(e){return y.original=e,y}finally{m=t,this._version=d+p,this._inited=!0,this._currentlyPulls=!1}},get:function(){if(g&&this._pull&&n(),this._pull&&!this._active&&this._version<d&&(!this._inited||this._masters)){var t=this._tryPull();if(this._hasFollowers){var e=this._masters;if(e){for(var i=e.length;i;)e[--i]._registerSlave(this);this._active=!0}}t===y?this._fail(y.original,!0):this._push(t,!0)}if(m){var r=m._masters,s=this._level;r?r.indexOf(this)==-1&&(r.push(this),m._level<=s&&(m._level=s+1)):(m._masters=[this],m._level=s+1)}return this._get?this._get(this._value):this._value},set:function(t){var e=this._value;return this._validate&&this._validate(t,e),this._merge&&(t=this._merge(t,e)),this._put.call(this.owner,t,this.push,this.fail,e),this},push:function(t){return this._push(t,!1),this},_push:function(t,e){this._setError(null),e||(this._pushingIndex=++c);var i=this._value;h(t,i)||(this._value=t,i instanceof s&&i.off("change",this._onValueChange,this),t instanceof s&&t.on("change",this._onValueChange,this),this._hasFollowers?this._changeEvent?h(t,this._fixedValue)&&this._canCancelChange?(this._levelInRelease=-1,this._changeEvent=null):this._changeEvent={target:this,type:"change",oldValue:i,value:t,prev:this._changeEvent}:(this._changeEvent={target:this,type:"change",oldValue:i,value:t,prev:null},this._canCancelChange=!0,this._addToRelease()):(p||e||d++,this._fixedValue=t),!e&&this._pending&&(this._pending=!1,this._fulfilled=!0,this._onFulfilled&&this._onFulfilled(t)))},fail:function(t){return this._fail(t,!1),this},_fail:function(t,e){this._logError(t),t instanceof Error||(t=new Error(String(t))),!e&&this._pending&&(this._pending=!1,this._rejected=!0,this._onRejected&&this._onRejected(t)),this._handleErrorEvent({type:"error",error:t})},_handleErrorEvent:function(t){if(this._lastErrorEvent!==t){this._setError(t.error),this._lastErrorEvent=t,this._handleEvent(t);for(var e=this._slaves,i=0,n=e.length;i<n;i++)e[i]._handleErrorEvent(t)}},getError:function(){return(this._errorCell||(this._errorCell=new x(this._error))).get()},_setError:function(t){if(this._error!==t&&(this._error=t,this._errorCell&&this._errorCell.set(t),!t))for(var e=this._slaves,i=0,n=e.length;i<n;i++)e[i]._setError(t)},then:function(t,e){if(g&&n(),!this._pull||this._fulfilled)return Promise.resolve(this._get?this._get(this._value):this._value).then(t);if(this._rejected)return Promise.reject(this._error)["catch"](e);var i=this,r=new Promise(function(t,e){i._onFulfilled=function(e){i._onFulfilled=i._onRejected=null,t(i._get?i._get(e):e)},i._onRejected=function(t){i._onFulfilled=i._onRejected=null,e(t)}}).then(t,e);return this._pending||this.pull(),r},"catch":function(t){return this.then(null,t)},_logError:function(){var t=a.call(arguments);this.debugKey&&t.unshift("["+this.debugKey+"]"),s.prototype._logError.apply(this,t)},dispose:function(){return g&&n(),this._dispose(),this},_dispose:function(){for(var t=this._slaves,e=0,i=t.length;e<i;e++)t[e]._dispose();this.off()}});t.exports=x},function(t,e,i){function n(t,e){return t<e?-1:t>e?1:0}var r=i(2),s=i(8),h=i(3),o=i(1),a=Array.prototype.push,l=Array.prototype.splice,u=Function("return this;")(),c=r.extend({Implements:[s],constructor:function f(t,e){r.call(this),s.call(this),e||(e={}),this._items=[],this.length=0,this.adoptsItemChanges=e.adoptsItemChanges!==!1,this.comparator=null,this.sorted=!1,(e.sorted||e.comparator&&e.sorted!==!1)&&(this.comparator=e.comparator||n,this.sorted=!0),t&&this._addRange(t instanceof f?t._items:t)},_validateIndex:function(t,e){if(void 0===t)return t;if(t<0){if(t+=this.length,t<0)throw new RangeError("Index out of valid range")}else if(t>=this.length+(e?1:0))throw new RangeError("Index out of valid range");return t},contains:function(t){return this._valueCounts.has(t)},indexOf:function(t,e){return this._items.indexOf(t,this._validateIndex(e))},lastIndexOf:function(t,e){return this._items.lastIndexOf(t,void 0===e?-1:this._validateIndex(e))},get:function(t){return this._items[this._validateIndex(t)]},getRange:function(t,e){t=this._validateIndex(t,!0);var i=this._items;if(void 0===e)return i.slice(t);if(t+e>i.length)throw new RangeError('Sum of "index" and "count" out of valid range');return i.slice(t,t+e)},set:function(t,e){if(this.sorted)throw new TypeError("Cannot set to sorted list");t=this._validateIndex(t);var i=this._items;return h(e,i[t])?this:(this._unregisterValue(i[t]),this._registerValue(e),i[t]=e,this.emit("change"),this)},setRange:function(t,e){if(this.sorted)throw new TypeError("Cannot set to sorted list");t=this._validateIndex(t);var i=e.length;if(!i)return this;if(t+i>this.length)throw new RangeError('Sum of "index" and "values.length" out of valid range');for(var n=this._items,r=!1,s=t+i;s>t;){var o=e[--s-t];h(o,n[s])||(this._unregisterValue(n[s]),this._registerValue(o),n[s]=o,r=!0)}return r&&this.emit("change"),this},add:function(t){return this.sorted?this._placeItem(t):(this._registerValue(t),this._items.push(t)),this.length++,this.emit("change"),this},addRange:function(t){return t.length&&(this._addRange(t),this.emit("change")),this},_addRange:function(t){if(this.sorted){for(var e=0,i=t.length;e<i;e++)this._placeItem(t[e]);this.length+=t.length}else{for(var n=t.length;n;)this._registerValue(t[--n]);this.length=a.apply(this._items,t)}},_placeItem:function(t){this._registerValue(t);for(var e=this._items,i=this.comparator,n=0,r=e.length;n!=r;){var s=n+r>>1;i(t,e[s])<0?r=s:n=s+1}e.splice(n,0,t)},insert:function(t,e){if(this.sorted)throw new TypeError("Cannot insert to sorted list");return t=this._validateIndex(t,!0),this._registerValue(e),this._items.splice(t,0,e),this.length++,this.emit("change"),this},insertRange:function(t,e){if(this.sorted)throw new TypeError("Cannot insert to sorted list");t=this._validateIndex(t,!0);var i=e.length;if(!i)return this;for(var n=i;n;)this._registerValue(e[--n]);return l.apply(this._items,[t,0].concat(e)),this.length+=i,this.emit("change"),this},remove:function(t,e){var i=this._items.indexOf(t,this._validateIndex(e));return i!=-1&&(this._unregisterValue(t),this._items.splice(i,1),this.length--,this.emit("change"),!0)},removeAll:function(t,e){for(var i=this._validateIndex(e),n=this._items,r=!1;(i=n.indexOf(t,i))!=-1;)this._unregisterValue(t),n.splice(i,1),r=!0;return r&&(this.length=n.length,this.emit("change")),r},removeEach:function(t,e){e=this._validateIndex(e);for(var i=this._items,n=!1,r=0,s=t.length;r<s;r++){var h=t[r],o=i.indexOf(h,e);o!=-1&&(this._unregisterValue(h),i.splice(o,1),n=!0)}return n&&(this.length=i.length,this.emit("change")),n},removeAllEach:function(t,e){e=this._validateIndex(e);for(var i=this._items,n=!1,r=0,s=t.length;r<s;r++)for(var h=t[r],o=e;(o=i.indexOf(h,o))!=-1;)this._unregisterValue(h),i.splice(o,1),n=!0;return n&&(this.length=i.length,this.emit("change")),n},removeAt:function(t){var e=this._items.splice(this._validateIndex(t),1)[0];return this._unregisterValue(e),this.length--,this.emit("change"),e},removeRange:function(t,e){t=this._validateIndex(t,!0);var i=this._items;if(void 0===e)e=i.length-t;else if(t+e>i.length)throw new RangeError('Sum of "index" and "count" out of valid range');if(!e)return[];for(var n=t+e;n>t;)this._unregisterValue(i[--n]);var r=i.splice(t,e);return this.length-=e,this.emit("change"),r},clear:function(){return this.length?(this.adoptsItemChanges&&this._valueCounts.forEach(function(t){t instanceof r&&t.off("change",this._onItemChange,this)},this),this._items.length=0,this._valueCounts.clear(),this.length=0,this.emit("change"),this):this},join:function(t){return this._items.join(t)},forEach:null,map:null,filter:null,find:function(t,e){e=arguments.length>=2?e:u;for(var i=this._items,n=0,r=i.length;n<r;n++){var s=i[n];if(t.call(e,s,n,this))return s}},findIndex:function(t,e){e=arguments.length>=2?e:u;for(var i=this._items,n=0,r=i.length;n<r;n++)if(t.call(e,i[n],n,this))return n;return-1},every:null,some:null,reduce:null,reduceRight:null,clone:function(){return new this.constructor(this,{adoptsItemChanges:this.adoptsItemChanges,comparator:this.comparator,sorted:this.sorted})},toArray:function(){return this._items.slice()},toString:function(){return this._items.join()}});["forEach","map","filter","every","some"].forEach(function(t){c.prototype[t]=function(e,i){return i=arguments.length>=2?i:u,this._items[t](function(t,n){return e.call(i,t,n,this)},this)}}),["reduce","reduceRight"].forEach(function(t){c.prototype[t]=function(e,i){function n(t,i,n){return e(t,i,n,s)}var r=this._items,s=this;return arguments.length>=2?r[t](n,i):r[t](n)}}),[["keys",function(t){return t}],["values",function(t,e){return e}],["entries",function(t,e){return[t,e]}]].forEach(function(t){var e=t[1];c.prototype[t[0]]=function(){var t=this._items,i=0,n=!1;return{next:function(){if(!n){if(i<t.length)return{value:e(i,t[i++]),done:!1};n=!0}return{value:void 0,done:!0}}}}}),c.prototype[o.iterator]=c.prototype.values,t.exports=c},function(t,e,i){var n=i(2),r=i(8),s=i(3),h=i(1),o=i(5),a=Object.prototype.hasOwnProperty,l=Array.isArray,u=Function("return this;")(),c=n.extend({Implements:[r],constructor:function f(t,e){if(n.call(this),r.call(this),this._entries=new o,this.size=0,this.adoptsItemChanges=!e||e.adoptsItemChanges!==!1,t){var i=this._entries;if(t instanceof f||t instanceof o)t._entries.forEach(function(t,e){this._registerValue(t),i.set(e,t)},this);else if(l(t))for(var s=0,h=t.length;s<h;s++){var u=t[s];this._registerValue(u[1]),i.set(u[0],u[1])}else for(var c in t)a.call(t,c)&&(this._registerValue(t[c]),i.set(c,t[c]));this.size=i.size}},has:function(t){return this._entries.has(t)},contains:function(t){return this._valueCounts.has(t)},get:function(t){return this._entries.get(t)},set:function(t,e){var i,n=this._entries,r=n.has(t);if(r){if(i=n.get(t),s(e,i))return this;this._unregisterValue(i)}return this._registerValue(e),n.set(t,e),r||this.size++,this.emit({type:"change",subtype:r?"update":"add",key:t,oldValue:i,value:e}),this},"delete":function(t){var e=this._entries;if(!e.has(t))return!1;var i=e.get(t);return this._unregisterValue(i),e["delete"](t),this.size--,this.emit({type:"change",subtype:"delete",key:t,oldValue:i,value:void 0}),!0},clear:function(){return this.size?(this.adoptsItemChanges&&this._valueCounts.forEach(function(t){t instanceof n&&t.off("change",this._onItemChange,this)},this),this._entries.clear(),this._valueCounts.clear(),this.size=0,this.emit({type:"change",subtype:"clear"}),this):this},forEach:function(t,e){e=arguments.length>=2?e:u,this._entries.forEach(function(i,n){t.call(e,i,n,this)},this)},keys:function(){return this._entries.keys()},values:function(){return this._entries.values()},entries:function(){return this._entries.entries()},clone:function(){return new this.constructor(this,{adoptsItemChanges:this.adoptsItemChanges})}});c.prototype[h.iterator]=c.prototype.entries,t.exports=c},function(t,e){function i(){}function n(){var t=s.console;(t&&t.error||i).call(t||s,r.call(arguments,function(t){return t===Object(t)&&t.stack||t}).join(" "))}var r=Array.prototype.map,s=Function("return this;")();t.exports=n}])});