!function(t){"use strict";function e(t,n){function i(t){return l(i,r,n,this,t,_.call(arguments,1),arguments.length)}n||(n={});var r=t;return i.constructor=e,(n.onChange||n.onError)&&i.call(n.owner||d),i}function n(){}function i(){var t=d.console;(t&&t.error||n).call(t||d,g.call(arguments,function(t,e){return t.push(e===Object(e)&&e.stack||e),t},[]).join(" "))}function r(t,e){for(var n=Object.getOwnPropertyNames(e),i=n.length;i;)Object.defineProperty(t,n[--i],Object.getOwnPropertyDescriptor(e,n[i]));return t}function s(e){var n;e.Extends?(n=e.Extends,delete e.Extends):n=Object;var i;u.call(e,"constructor")?(i=e.constructor,delete e.constructor):i=n==Object?function(){}:function(){return n.apply(this,arguments)},Object.keys(n).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(n,t))}),e.Static&&(r(i,e.Static),delete e.Static),i.extend===t&&(i.extend=b);var s=i.prototype=Object.create(n.prototype);return e.Implements&&(e.Implements.forEach(function(t){r(s,"function"==typeof t?t.prototype:t)}),delete e.Implements),r(s,e),Object.defineProperty(s,"constructor",{configurable:!0,writable:!0,value:i}),i}function a(t,n,i){var r="_"+n;t[r]="function"==typeof i&&i.constructor==e?i:e(i),Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:function(){return this[r]()},set:function(t){this[r](t)}})}function o(t,e){Object.keys(e).forEach(function(n){a(t,n,e[n])})}function h(t,e,n){return 3==arguments.length?a(t,e,n):o(t,e),t}var l,u=Object.prototype.hasOwnProperty,c=Object.prototype.toString,f=Array.prototype.push,_=Array.prototype.slice,v=Array.prototype.splice,g=Array.prototype.reduce,d=Function("return this;")();e.cellx=e;var p="__cellx_uid__",m="__cellx_cells__";d.Symbol&&"symbol"==typeof Symbol.iterator&&(p=Symbol(p),m=Symbol(m)),e.KEY_CELLS=m;var y=0;e._logError=i;var b,E=Object.is||function(t,e){return 0===t&&0===e?1/t==1/e:t===e||t!=t&&e!=e},x=Array.isArray||function(t){return"[object Array]"==c.call(t)};b=function(t){return t.Extends=this,s(t)},e.define=h;var C,w=function(){if(d.process&&"[object process]"==process.toString()&&process.nextTick)return process.nextTick;if(d.setImmediate)return function(t){setImmediate(t)};if(d.Promise&&-1!=Promise.toString().indexOf("[native code]")){var t=Promise.resolve();return function(e){t.then(function(){e()})}}var n;return d.addEventListener("message",function(){if(n){var t=n;n=null;for(var i=0,r=t.length;r>i;i++)try{t[i]()}catch(s){e._logError(s)}}}),function(t){n?n.push(t):(n=[t],postMessage("__tic__","*"))}}();!function(){if(C=d.Map,!C){var n={value:t};C=s({constructor:function(t){if(this._entries=Object.create(null),this._objectStamps={},this._first=null,this._last=null,this.size=0,t)for(var e=0,n=t.length;n>e;e++)this.set(t[e][0],t[e][1])},has:function(t){return!!this._entries[this._getValueStamp(t)]},get:function(t){return(this._entries[this._getValueStamp(t)]||n).value},set:function(t,e){var n=this._entries,i=this._getValueStamp(t);if(n[i])n[i].value=e;else{var r=n[i]={key:t,keyStamp:i,value:e,prev:this._last,next:null};this.size++?this._last.next=r:this._first=r,this._last=r}return this},"delete":function(t){var e=this._getValueStamp(t),n=this._entries[e];if(!n)return!1;if(--this.size){var i=n.prev,r=n.next;i?i.next=r:this._first=r,r?r.prev=i:this._last=i}else this._first=null,this._last=null;return delete this._entries[e],delete this._objectStamps[e],!0},clear:function(){var t=this._entries;for(var e in t)delete t[e];this._objectStamps={},this._first=null,this._last=null,this.size=0},_getValueStamp:function(t){switch(typeof t){case"undefined":return"undefined";case"object":if(null===t)return"null";break;case"boolean":return"?"+t;case"number":return"+"+t;case"string":return","+t}return this._getObjectStamp(t)},_getObjectStamp:function(t){if(!u.call(t,p)){if(!Object.isExtensible(t)){var e,n=this._objectStamps;for(e in n)if(u.call(n,e)&&n[e]==t)return e;return e=String(++y),n[e]=t,e}Object.defineProperty(t,p,{value:String(++y)})}return t[p]},forEach:function(t,e){null==e&&(e=d);for(var n=this._first;n;){t.call(e,n.value,n.key,this);do n=n.next;while(n&&!this._entries[n.keyStamp])}},toString:function(){return"[object Map]"}}),[["keys",function(t){return t.key}],["values",function(t){return t.value}],["entries",function(t){return[t.key,t.value]}]].forEach(function(e){var n=e[1];C.prototype[e[0]]=function(){var e,i=this._entries,r=!1,s=this;return{next:function(){if(!r){if(e){do e=e.next;while(e&&!i[e.keyStamp])}else e=s._first;if(e)return{value:n(e),done:!1};r=!0}return{value:t,done:!0}}}}})}d.Symbol&&Symbol.iterator&&!C[Symbol.iterator]&&(C.prototype[Symbol.iterator]=C.prototype.entries),e.Map=C}();var S;!function(){var t="__cellx_EventEmitter_inner__";d.Symbol&&"symbol"==typeof Symbol.iterator&&(t=Symbol(t)),S=s({Static:{KEY_INNER:t},constructor:function(){this._events=Object.create(null)},on:function(t,e,n){if("object"==typeof t){n=e;var i=t;for(t in i)u.call(i,t)&&this._on(t,i[t],n)}else this._on(t,e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t){n=e;var i=t;for(t in i)u.call(i,t)&&this._off(t,i[t],n)}else this._off(t,e,n);else this._events&&(this._events=Object.create(null));return this},_on:function(t,e,n){var i=t.indexOf(":");if(-1!=i)this["_"+t.slice(i+1)]("on",t.slice(0,i),e,n);else{var r=(this._events||(this._events=Object.create(null)))[t];r||(r=this._events[t]=[]),r.push({listener:e,context:null==n?this:n})}},_off:function(e,n,i){var r=e.indexOf(":");if(-1!=r)this["_"+e.slice(r+1)]("off",e.slice(0,r),n,i);else{var s=this._events&&this._events[e];if(!s)return;null==i&&(i=this);for(var a=s.length;a;){var o=s[--a];if((o.listener==n||o.listener[t]===n)&&o.context===i){s.splice(a,1);break}}s.length||delete this._events[e]}},once:function(e,n,i){function r(){return this._off(e,r,i),n.apply(this,arguments)}return r[t]=n,this._on(e,r,i),this},emit:function(t){return"string"==typeof t?t={target:this,type:t}:t.target||(t.target=this),this._handleEvent(t),t},_handleEvent:function(t){var e=this._events&&this._events[t.type];if(e){e=e.slice();for(var n=0,i=e.length;i>n;n++)try{e[n].listener.call(e[n].context,t)===!1&&(t.isPropagationStopped=!0)}catch(r){this._logError(r)}}},_logError:function(){e._logError.apply(e,arguments)}}),e.EventEmitter=S}();var O;!function(){O=S.extend({constructor:function(){this._valueCounts=new C},_onItemChange:function(t){this._handleEvent(t)},_registerValue:function(t){var e=this._valueCounts,n=e.get(t);n?e.set(t,n+1):(e.set(t,1),this.adoptsItemChanges&&t instanceof S&&t.on("change",this._onItemChange,this))},_unregisterValue:function(t){var e=this._valueCounts,n=e.get(t);n>1?e.set(t,n-1):(e["delete"](t),this.adoptsItemChanges&&t instanceof S&&t.off("change",this._onItemChange,this))},dispose:function(){this.adoptsItemChanges&&this._valueCounts.forEach(function(t){t instanceof S&&t.off("change",this._onItemChange,this)},this)}})}();var j;!function(){function n(t,e){return new j(t,"boolean"==typeof e?{adoptsItemChanges:e}:e)}j=S.extend({Implements:[O],constructor:function i(t,e){if(S.call(this),O.call(this),this._entries=new C,this.size=0,this.adoptsItemChanges=!e||e.adoptsItemChanges!==!1,t){var n=this._entries;if(t instanceof i)t._entries.forEach(function(t,e){n.set(e,t),this._registerValue(t)},this);else if(x(t))for(var r=0,s=t.length;s>r;r++){var a=t[r];n.set(a[0],a[1]),this._registerValue(a[1])}else for(var o in t)u.call(t,o)&&(n.set(o,t[o]),this._registerValue(t[o]));this.size=n.size}},has:function(t){return this._entries.has(t)},contains:function(t){return this._valueCounts.has(t)},get:function(t){return this._entries.get(t)},set:function(t,e){var n,i=this._entries,r=i.has(t);if(r){if(n=i.get(t),E(n,e))return this;this._unregisterValue(n)}return i.set(t,e),this._registerValue(e),r||this.size++,this.emit({type:"change",subtype:r?"update":"add",key:t,oldValue:n,value:e}),this},"delete":function(e){var n=this._entries;if(!n.has(e))return!1;var i=n.get(e);return n["delete"](e),this._unregisterValue(i),this.size--,this.emit({type:"change",subtype:"delete",key:e,oldValue:i,value:t}),!0},clear:function(){return this.size?(this._entries.clear(),this._valueCounts.clear(),this.size=0,this.emit({type:"change",subtype:"clear"}),this):this},forEach:function(t,e){null==e&&(e=d),this._entries.forEach(function(n,i){t.call(e,n,i,this)},this)},keys:function(){return this._entries.keys()},values:function(){return this._entries.values()},entries:function(){return this._entries.entries()},clone:function(){return new this.constructor(this,{adoptsItemChanges:this.adoptsItemChanges})}}),d.Symbol&&Symbol.iterator&&(j.prototype[Symbol.iterator]=j.prototype.entries),e.ObservableMap=j,e.map=n}();var I;!function(){function n(t,e){return e>t?-1:t>e?1:0}function i(t,e){var n=t._items;if(t.sorted)for(var i=t.comparator,r=0,s=e.length;s>r;r++){for(var a=e[r],o=0,h=n.length;o!=h;){var l=o+h>>1;i(a,n[l])<0?h=l:o=l+1}n.splice(o,0,a),t._registerValue(a)}else{f.apply(n,e);for(var u=e.length;u;)t._registerValue(e[--u])}t.length=n.length}function r(t,e){return new I(t,"boolean"==typeof e?{adoptsItemChanges:e}:e)}I=S.extend({Implements:[O],constructor:function s(t,e){S.call(this),O.call(this),e||(e={}),this._items=[],this.length=0,this.adoptsItemChanges=e.adoptsItemChanges!==!1,this.comparator=null,this.sorted=!1,(e.sorted||e.comparator&&e.sorted!==!1)&&(this.comparator=e.comparator||n,this.sorted=!0),t&&i(this,t instanceof s?t._items:t)},_validateIndex:function(e,n){if(e===t)return e;if(0>e){if(e+=this.length,0>e)throw new RangeError("Index out of range")}else if(e>=this.length+(n?1:0))throw new RangeError("Index out of range");return e},contains:function(t){return this._valueCounts.has(t)},indexOf:function(t,e){return this._items.indexOf(t,this._validateIndex(e))},lastIndexOf:function(t,e){return this._items.lastIndexOf(t,this._validateIndex(e))},get:function(t){return this._items[this._validateIndex(t)]},getRange:function(e,n){e=this._validateIndex(e||0,!0);var i=this._items;if(n===t)return i.slice(e);if(e+n>i.length)throw new RangeError('"index" and "count" do not denote a valid range');return i.slice(e,e+n)},set:function(t,e){if(this.sorted)throw new TypeError("Can't set to sorted list");t=this._validateIndex(t);var n=this._items;return E(n[t],e)?this:(this._unregisterValue(n[t]),n[t]=e,this._registerValue(e),this.emit("change"),this)},setRange:function(t,e){if(this.sorted)throw new TypeError("Can't set to sorted list");t=this._validateIndex(t);var n=e.length;if(!n)return this;if(t+n>this.length)throw new RangeError('"index" and length of "items" do not denote a valid range');for(var i=this._items,r=!1,s=t+n;s>t;){var a=e[--s];E(i[s],a)||(this._unregisterValue(i[s]),i[s]=a,this._registerValue(a),r=!0)}return r&&this.emit("change"),this},add:function(t){return this.addRange([t]),this},addRange:function(t){return t.length?(i(this,t),this.emit("change"),this):this},insert:function(t,e){return this.insertRange(t,[e]),this},insertRange:function(t,e){if(this.sorted)throw new TypeError("Can't insert to sorted list");t=this._validateIndex(t,!0);var n=e.length;if(!n)return this;v.apply(this._items,[].concat(t,0,e));for(var i=n;i;)this._registerValue(e[--i]);return this.length+=n,this.emit("change"),this},remove:function(t,e){var n=this._items.indexOf(t,this._validateIndex(e));return-1==n?this:(this._items.splice(n,1),this._unregisterValue(t),this.length--,this.emit("change"),this)},removeAll:function(t,e){for(var n=this._items,i=this._validateIndex(e),r=!1;-1!=(i=n.indexOf(t,i));)n.splice(i,1),this._unregisterValue(t),r=!0;return r&&(this.length=n.length,this.emit("change")),this},removeAt:function(t){return this._unregisterValue(this._items.splice(this._validateIndex(t),1)[0]),this.length--,this.emit("change"),this},removeRange:function(e,n){e=this._validateIndex(e||0,!0);var i=this._items;if(n===t)n=i.length-e;else if(e+n>i.length)throw new RangeError('"index" and "count" do not denote a valid range');if(!n)return this;for(var r=e+n;r>e;)this._unregisterValue(i[--r]);return i.splice(e,n),this.length-=n,this.emit("change"),this},clear:function(){return this.length&&(this._items.length=0,this._valueCounts.clear(),this.length=0,this.emit("change")),this},join:function(t){return this._items.join(t)},forEach:null,map:null,filter:null,find:function(t,e){null==e&&(e=this);for(var n=this._items,i=0,r=n.length;r>i;i++){var s=n[i];if(t.call(this,s,i,e))return s}},findIndex:function(t,e){null==e&&(e=this);for(var n=this._items,i=0,r=n.length;r>i;i++){var s=n[i];if(t.call(this,s,i,e))return i}return-1},every:null,some:null,reduce:null,reduceRight:null,clone:function(){return new this.constructor(this,{adoptsItemChanges:this.adoptsItemChanges,comparator:this.comparator,sorted:this.sorted})},toArray:function(){return this._items.slice()},toString:function(){return this._items.join()}}),["forEach","map","filter","every","some","reduce","reduceRight"].forEach(function(t){I.prototype[t]=function(){return Array.prototype[t].apply(this._items,arguments)}}),[["keys",function(t,e){return t}],["values",function(t,e){return e}],["entries",function(t,e){return[t,e]}]].forEach(function(e){var n=e[1];I.prototype[e[0]]=function(){var e,i=this._items,r=!1;return{next:function(){if(!r){if(e<i.length)return{value:n(e,i[e++]),done:!1};r=!0}return{value:t,done:!0}}}}}),d.Symbol&&Symbol.iterator&&(I.prototype[Symbol.iterator]=I.prototype.values),e.ObservableList=I,e.list=r}();var V;!function(){function n(){if(!(o>h)){s=!0;do{var t=a[o];if(t){var e=t.shift();if(o){var n=o;e._active&&e._recalc(),a[n].length||(a[n]=null,o&&o++)}else{var i=e._changeEvent;e._fixedValue=e._value,e._changeEvent=null,e._changed=!0,e._events.change&&e._handleEvent(i);for(var r=e._slaves,l=0,c=r.length;c>l;l++){var f=r[l];f._fixed&&((a[1]||(a[1]=[])).push(f),h||(h=1),f._fixed=!1)}a[0].length||o++}}else o++}while(h>=o);h=-1,u++,s=!1}}var i=S.KEY_INNER,r={original:null},s=!1,a=[[]],o=0,h=-1,l=null,u=1;V=S.extend({constructor:function(e,n){S.call(this),n||(n={}),this.owner=n.owner||null,this.computed="function"==typeof e&&(n.computed!==t?n.computed:e.constructor==Function),this._value=t,this._fixedValue=t,this.initialValue=t,this._formula=null,this._get=n.get||null,this._set=n.set||null,this._validate=n.validate||null,this._masters=null,this._slaves=[],this._level=0,this._active=!this.computed,this._changeEvent=null,this._isChangeCancellable=!0,this._lastErrorEvent=null,this._fixed=!0,this._version=0,this._changed=!1,this._circularityCounter=0,this.computed?this._formula=e:(this._validate&&this._validate.call(this.owner||this,e),this._value=this._fixedValue=this.initialValue=e,e instanceof S&&e.on("change",this._onValueChange,this)),n.onChange&&this.on("change",n.onChange),n.onError&&this.on("error",n.onError)},get changed(){return s||n(),this._changed},on:function(t,e,i){return s||n(),!this.computed||this._events.change||this._slaves.length||this._activate(),S.prototype.on.call(this,t,e,i),this},off:function(t,e,i){return s||n(),S.prototype.off.call(this,t,e,i),!this.computed||this._events.change||this._slaves.length||this._deactivate(),this},_on:function(t,e,n){S.prototype._on.call(this,t,e,null==n?this.owner:n)},_off:function(t,e,n){S.prototype._off.call(this,t,e,null==n?this.owner:n)},addChangeListener:function(t,e){return this.on("change",t,e),this},removeChangeListener:function(t,e){return this.off("change",t,e),this},addErrorListener:function(t,e){return this.on("error",t,e),this},removeErrorListener:function(t,e){return this.off("error",t,e),this},subscribe:function(t,e){function n(e){return t.call(this,e.error||null,e)}return n[i]=t,this.on("change",n,e).on("error",n,e),this},unsubscribe:function(t,e){return this.off("change",t,e).off("error",t,e),this},_registerSlave:function(t){!this.computed||this._events.change||this._slaves.length||this._activate(),this._slaves.push(t)},_unregisterSlave:function(t){this._slaves.splice(this._slaves.indexOf(t),1),!this.computed||this._events.change||this._slaves.length||this._deactivate()},_activate:function(){if(this._version!=u){this._masters=null,this._level=0;var t=this._tryFormula();t===r?this._handleError(r.original):E(this._value,t)||(this._value=t,this._changed=!0),this._version=u}for(var e=this._masters||[],n=e.length;n;)e[--n]._registerSlave(this);this._active=!0},_deactivate:function(){for(var t=this._masters||[],e=t.length;e;)t[--e]._unregisterSlave(this);this._active=!1},_onValueChange:function(t){this._changeEvent?(t.prev=this._changeEvent,this._changeEvent=t,this._value===this._fixedValue&&(this._isChangeCancellable=!1)):(a[0].push(this),o=0,-1==h&&(h=0),t.prev=null,this._changeEvent=t,this._isChangeCancellable=!1,s||w(n))},get:function(){if(s||n(),this.computed&&!this._active&&this._version!=u){this._masters=null,this._level=0;var t=this._tryFormula();t===r?this._handleError(r.original):E(this._value,t)||(this._value=t,this._changed=!0),this._version=u}return l&&(l._masters?-1==l._masters.indexOf(this)&&(l._masters.push(this),l._level<=this._level&&(l._level=this._level+1)):(l._masters=[this],l._level=this._level+1)),this._get?this._get.call(this.owner||this,this._value):this._value},set:function(t){if(this.computed&&!this._set)throw new TypeError((this.debugKey?"["+this.debugKey+"] ":"")+"Cannot write to read-only cell");var e=this._value;return E(e,t)?!1:(this._validate&&this._validate.call(this.owner||this,t),this.computed?this._set.call(this.owner||this,t):(this._value=t,e instanceof S&&e.off("change",this._onValueChange,this),t instanceof S&&t.on("change",this._onValueChange,this),this._changeEvent?E(t,this._fixedValue)&&this._isChangeCancellable?(1==a[0].length?(a[0].pop(),h||(h=-1)):a[0].splice(a[0].indexOf(this),1),this._changeEvent=null):this._changeEvent={target:this,type:"change",oldValue:e,value:t,prev:this._changeEvent}:(a[0].push(this),o=0,-1==h&&(h=0),this._changeEvent={target:this,type:"change",oldValue:e,value:t,prev:null},this._isChangeCancellable=!0,s||w(n))),!0)},recalc:function(){return this._recalc(!0)},_recalc:function(t){if(!t)if(this._version==u+1){if(10==++this._circularityCounter)return this._fixed=!0,this._version=u+1,this._handleError(new RangeError("Circular dependency detected")),!1}else this._circularityCounter=1;var e=this._masters;this._masters=null;var i=this._level;this._level=0;for(var s=this._tryFormula(),o=this._masters||[],l=!1,c=e.length;c;){var f=e[--c];-1==o.indexOf(f)&&(f._unregisterSlave(this),l=!0)}if(l||e.length<o.length){for(var _=o.length;_;){var v=o[--_];-1==e.indexOf(v)&&v._registerSlave(this)}var g=this._level;if(g>i)return(a[g]||(a[g]=[])).push(this),g>h&&(h=g),void(t&&w(n))}if(this._fixed=!0,this._version=u+1,s===r)this._handleError(r.original);else{var d=this._value;if(!E(d,s)||s instanceof S){this._value=s,this._changed=!0,this._events.change&&this.emit({type:"change",oldValue:d,value:s,prev:null});for(var p=this._slaves,m=0,y=p.length;y>m;m++){var b=p[m];if(b._fixed){var x=b._level;(a[x]||(a[x]=[])).push(b),x>h&&(h=x),b._fixed=!1}}return!0}}return!1},_tryFormula:function(){var t=l;l=this;try{var e=this._formula.call(this.owner||this);return this._validate&&this._validate.call(this.owner||this,e),e}catch(n){return r.original=n,r}finally{l=t}},_handleError:function(t){this._logError(t),this._handleErrorEvent({type:"error",error:t===Object(t)?t:{message:t}})},_logError:function(){var t=_.call(arguments);this.debugKey&&t.unshift("["+this.debugKey+"]"),S.prototype._logError.apply(this,t)},_handleErrorEvent:function(t){if(this._lastErrorEvent!==t){this._lastErrorEvent=t,this._handleEvent(t);for(var e=this._slaves,n=0,i=e.length;i>n&&!t.isPropagationStopped;n++)e[n]._handleErrorEvent(t)}},dispose:function(){return s||n(),this._dispose(),this},_dispose:function(){if(this.off(),this._active)for(var t=this._slaves,e=0,n=t.length;n>e;e++)t[e]._dispose()}}),e.Cell=V}(),function(){var t=V.prototype;l=function(n,i,r,s,a,o,h){s&&s!=d||(s=n),u.call(s,m)||Object.defineProperty(s,m,{value:new C});var l=s[m].get(n);if(!l){if(h>=2&&"dispose"===a)return;r=Object.create(r),r.owner=s,l=new V(i,r),s[m].set(n,l)}switch(h){case 0:return l.get();case 1:return l.set(a);default:switch(a){case"bind":return n=n.bind(s),n.constructor=e,n;case"unwrap":return l;default:return t[a].apply(l,o)}}}}(),function(){function t(n,i,r,s){if(1==arguments.length)return s=n,function(e,n,i){return t(e,n,i,s)};s||(s={}),s.computed=!1;var a="_"+i;return n[a]=e(r.initializer.call(n),s),{configurable:!0,enumerable:r.enumerable,get:function(){return this[a]()},set:function(t){this[a](t)}}}function n(t,i,r,s){if(1==arguments.length)return s=t,function(t,e,i){return n(t,e,i,s)};var a=r.initializer();if("function"!=typeof a)throw new TypeError("Property value must be a function");s||(s={}),s.computed=!0;var o="_"+i;t[o]=e(a,s);var h={configurable:!0,enumerable:r.enumerable,get:function(){return this[o]()}};return s.set&&(h.set=function(t){this[o](t)}),h}e.d={observable:t,computed:n}}(),e.utils={logError:i,mixin:r,createClass:s,nextTick:w,defineObservableProperty:a,defineObservableProperties:o},"object"==typeof exports?"object"==typeof module?module.exports=e:exports.cellx=e:d.cellx=e}();