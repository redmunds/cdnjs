!function(t){"function"!=typeof define&&"function"!=typeof t.Tone&&(t.define=function(e,i,n){"Tone/core/Tone"===e?t.Tone=n():n(t.Tone)})}(this),define("Tone/core/Tone",[],function(){function t(t){return void 0===t}var e;if(t(window.AudioContext)&&(window.AudioContext=window.webkitAudioContext),t(window.OfflineAudioContext)&&(window.OfflineAudioContext=window.webkitOfflineAudioContext),t(AudioContext))throw new Error("Web Audio is not supported in this browser");e=new AudioContext,"function"!=typeof AudioContext.prototype.createGain&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),"function"!=typeof AudioContext.prototype.createDelay&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),"function"!=typeof AudioBufferSourceNode.prototype.start&&(AudioBufferSourceNode.prototype.start=AudioBufferSourceNode.prototype.noteGrainOn),"function"!=typeof AudioBufferSourceNode.prototype.stop&&(AudioBufferSourceNode.prototype.stop=AudioBufferSourceNode.prototype.noteOff),"function"!=typeof OscillatorNode.prototype.start&&(OscillatorNode.prototype.start=OscillatorNode.prototype.noteOn),"function"!=typeof OscillatorNode.prototype.stop&&(OscillatorNode.prototype.stop=OscillatorNode.prototype.noteOff),AudioNode.prototype._nativeConnect=AudioNode.prototype.connect,AudioNode.prototype.connect=function(e,i,n){if(e.input)Array.isArray(e.input)?(t(n)&&(n=0),this.connect(e.input[n])):this.connect(e.input);else try{e instanceof AudioNode?this._nativeConnect(e,i,n):this._nativeConnect(e,i)}catch(s){throw new Error("error connecting to node: "+e)}};var i=function(){this.input=this.context.createGain(),this.output=this.context.createGain()};i.context=e,i.prototype.context=i.context,i.prototype.bufferSize=2048,i.prototype.connect=function(t,e,i){Array.isArray(this.output)?(e=this.defaultArg(e,0),this.output[e].connect(t,0,i)):this.output.connect(t,e,i)},i.prototype.disconnect=function(){this.output.disconnect()},i.prototype.chain=function(){if(arguments.length>1)for(var t=arguments[0],e=1;e<arguments.length;e++){var i=arguments[e];t.connect(i),t=i}},i.prototype.fan=function(){var t=arguments[0];if(arguments.length>1)for(var e=1;e<arguments.length;e++){var i=arguments[e];t.connect(i)}},i.prototype.set=function(){},i.prototype.defaultArg=function(e,i){if("object"==typeof e&&"object"==typeof i){var n={};for(var s in e)n[s]=this.defaultArg(e[s],e[s]);for(var o in i)n[o]=this.defaultArg(e[o],i[o]);return n}return t(e)?i:e},i.prototype.optionsObject=function(t,e,i){var n={};if(1===t.length&&"object"==typeof t[0])n=t[0];else for(var s=0;s<e.length;s++)n[e[s]]=t[s];return this.isUndef(i)?n:this.defaultArg(n,i)},i.prototype.isUndef=t,i.prototype.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},i.prototype.logScale=function(t){return Math.max(this.normalize(this.gainToDb(t),-100,0),0)},i.prototype.expScale=function(t){return this.dbToGain(this.interpolate(t,-100,0))},i.prototype.dbToGain=function(t){return Math.pow(2,t/6)},i.prototype.gainToDb=function(t){return 20*(Math.log(t)/Math.LN10)},i.prototype.interpolate=function(t,e,i){return t*(i-e)+e},i.prototype.normalize=function(t,e,i){if(e>i){var n=i;i=e,e=n}else if(e==i)return 0;return(t-e)/(i-e)},i.prototype.dispose=function(){this.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),this.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null)};var n=null;i.prototype.noGC=function(){this.output.connect(n)},AudioNode.prototype.noGC=function(){this.connect(n)},i.prototype.now=function(){return this.context.currentTime},i.prototype.samplesToSeconds=function(t){return t/this.context.sampleRate},i.prototype.toSamples=function(t){var e=this.toSeconds(t);return Math.round(e*this.context.sampleRate)},i.prototype.toSeconds=function(t,e){if(e=this.defaultArg(e,this.now()),"number"==typeof t)return t;if("string"==typeof t){var i=0;return"+"===t.charAt(0)&&(t=t.slice(1),i=e),parseFloat(t)+i}return e},i.prototype.frequencyToSeconds=function(t){return 1/parseFloat(t)},i.prototype.secondsToFrequency=function(t){return 1/t};var s={c:0,"c#":1,db:1,d:2,"d#":3,eb:3,e:4,f:5,"f#":6,gb:6,g:7,"g#":8,ab:8,a:9,"a#":10,bb:10,b:11},o=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],r=261.6255653005986;i.prototype.noteToFrequency=function(t){var e=t.split(/(\d+)/);if(3===e.length){var i=s[e[0].toLowerCase()],n=e[1],o=i+12*parseInt(n,10);return Math.pow(2,(o-48)/12)*r}return 0},i.prototype.frequencyToNote=function(t){var e=Math.log(t/r)/Math.LN2,i=Math.round(12*e)+48,n=Math.floor(i/12),s=o[i%12];return s+n.toString()};var a=[];return i._initAudioContext=function(t){t(i.context),a.push(t)},i.setContext=function(t){i.prototype.context=t,i.context=t;for(var e=0;e<a.length;e++)a[e](t)},i.extend=function(e,n){function s(){}t(n)&&(n=i),s.prototype=n.prototype,e.prototype=new s,e.prototype.constructor=e},i.startMobile=function(){var t=i.context.createOscillator(),e=i.context.createGain();e.gain.value=0,t.connect(e),e.connect(i.context.destination);var n=i.context.currentTime;t.start(n),t.stop(n+1)},i._initAudioContext(function(t){n=t.createGain(),n.gain.value=0,n.connect(t.destination)}),console.log("Tone.js r1-dev"),i}),define("Tone/signal/Signal",["Tone/core/Tone"],function(t){t.Signal=function(e){t.call(this),this._scalar=this.context.createGain(),this._syncRatio=1,this.chain(i,this._scalar,this.output),this.input.connect(this.output),this.setValue(this.defaultArg(e,0))},t.extend(t.Signal),t.Signal.prototype.getValue=function(){return this._scalar.gain.value},t.Signal.prototype.setValue=function(t){0===this._syncRatio?t=0:t*=this._syncRatio,this._scalar.gain.value=t},t.Signal.prototype.setValueAtTime=function(t,e){t*=this._syncRatio,this._scalar.gain.setValueAtTime(t,this.toSeconds(e))},t.Signal.prototype.setCurrentValueNow=function(t){t=this.defaultArg(t,this.now());var e=this.getValue();return this.cancelScheduledValues(t),this._scalar.gain.setValueAtTime(e,t),e},t.Signal.prototype.linearRampToValueAtTime=function(t,e){t*=this._syncRatio,this._scalar.gain.linearRampToValueAtTime(t,this.toSeconds(e))},t.Signal.prototype.exponentialRampToValueAtTime=function(t,e){t*=this._syncRatio,this._scalar.gain.exponentialRampToValueAtTime(t,this.toSeconds(e))},t.Signal.prototype.exponentialRampToValueNow=function(t,e){var i=this.now();this.setCurrentValueNow(i),t*=this._syncRatio,"+"===e.toString().charAt(0)&&(e=e.substr(1)),this._scalar.gain.exponentialRampToValueAtTime(t,i+this.toSeconds(e))},t.Signal.prototype.linearRampToValueNow=function(t,e){var i=this.now();this.setCurrentValueNow(i),t*=this._syncRatio,"+"===e.toString().charAt(0)&&(e=e.substr(1)),this._scalar.gain.linearRampToValueAtTime(t,i+this.toSeconds(e))},t.Signal.prototype.setTargetAtTime=function(t,e,i){t*=this._syncRatio,this.output.gain.setTargetAtTime(t,this.toSeconds(e),i)},t.Signal.prototype.setValueCurveAtTime=function(t,e,i){for(var n=0;n<t.length;n++)t[n]*=this._syncRatio;this._scalar.gain.setValueCurveAtTime(t,this.toSeconds(e),this.toSeconds(i))},t.Signal.prototype.cancelScheduledValues=function(t){this._scalar.gain.cancelScheduledValues(this.toSeconds(t))},t.Signal.prototype.sync=function(t,e){e?this._syncRatio=e:0!==t.getValue()?this._syncRatio=this.getValue()/t.getValue():this._syncRatio=0,this._scalar.disconnect(),this._scalar=this.context.createGain(),this.chain(t,this._scalar,this.output),this._scalar.gain.value=this._syncRatio},t.Signal.prototype.unsync=function(){var t=this.getValue();this._scalar.disconnect(),this._scalar=this.context.createGain(),this._scalar.gain.value=t/this._syncRatio,this._syncRatio=1,this.chain(i,this._scalar,this.output)},t.Signal.prototype.dispose=function(){this.output.disconnect(),this._scalar.disconnect(),this.output=null,this._scalar=null},t.Signal.prototype.connect=function(e,i,n){e instanceof t.Signal?e.setValue(0):e instanceof AudioParam&&(e.value=0),t.prototype.connect.call(this,e,i,n)};var e=null,i=null;return t._initAudioContext(function(t){e=t.createOscillator(),i=t.createWaveShaper();for(var n=8,s=new Float32Array(n),o=0;n>o;o++)s[o]=1;i.curve=s,e.connect(i),e.start(0),e.noGC()}),t.Signal}),define("Tone/signal/Add",["Tone/core/Tone","Tone/signal/Signal"],function(t){return t.Add=function(e){this._value=new t.Signal(e),this.input=this.output=this.context.createGain(),this._value.connect(this.output)},t.extend(t.Add),t.Add.prototype.setValue=function(t){this._value.setValue(t)},t.Add.prototype.connect=t.Signal.prototype.connect,t.Add.prototype.dispose=function(){this._value.dispose(),this.output.disconnect(),this._value=null,this.output=null},t.Add}),define("Tone/signal/Multiply",["Tone/core/Tone","Tone/signal/Signal"],function(t){return t.Multiply=function(t){this.input=this.output=this.context.createGain(),this.input.gain.value=this.defaultArg(t,1)},t.extend(t.Multiply),t.Multiply.prototype.setValue=function(t){this.input.gain.value=t},t.Multiply.prototype.connect=t.Signal.prototype.connect,t.Multiply.prototype.dispose=function(){this.input.disconnect(),this.input=null},t.Multiply}),define("Tone/signal/Scale",["Tone/core/Tone","Tone/signal/Add","Tone/signal/Multiply","Tone/signal/Signal"],function(t){return t.Scale=function(e,i,n,s){t.call(this),2==arguments.length&&(n=e,s=i,e=-1,i=1),this._inputMin=e,this._inputMax=i,this._outputMin=n,this._outputMax=s,this._plusInput=new t.Add(0),this._scale=new t.Multiply(1),this._plusOutput=new t.Add(0),this.chain(this.input,this._plusInput,this._scale,this._plusOutput,this.output),this._setScalingParameters()},t.extend(t.Scale),t.Scale.prototype._setScalingParameters=function(){this._plusInput.setValue(-this._inputMin),this._scale.setValue((this._outputMax-this._outputMin)/(this._inputMax-this._inputMin)),this._plusOutput.setValue(this._outputMin)},t.Scale.prototype.setInputMin=function(t){this._inputMin=t,this._setScalingParameters()},t.Scale.prototype.setInputMax=function(t){this._inputMax=t,this._setScalingParameters()},t.Scale.prototype.setOutputMin=function(t){this._outputMin=t,this._setScalingParameters()},t.Scale.prototype.setOutputMax=function(t){this._outputMax=t,this._setScalingParameters()},t.Scale.prototype.connect=t.Signal.prototype.connect,t.Scale.prototype.dispose=function(){this.input.disconnect(),this.output.disconnect(),this._plusInput.dispose(),this._plusOutput.dispose(),this._scale.dispose(),this.input=null,this.output=null,this._plusInput=null,this._plusOutput=null,this._scale=null},t.Scale}),define("Tone/component/DryWet",["Tone/core/Tone","Tone/signal/Signal","Tone/signal/Scale"],function(t){return t.DryWet=function(e){t.call(this),this.dry=this.input,this.wet=this.context.createGain(),this.wetness=new t.Signal,this._invert=new t.Scale(0,1,1,0),this.dry.connect(this.output),this.wet.connect(this.output),this.chain(this.wetness,this.wet.gain),this.chain(this.wetness,this._invert,this.dry.gain),this.setDry(this.defaultArg(e,0))},t.extend(t.DryWet),t.DryWet.prototype.setDry=function(t,e){this.setWet(1-t,e)},t.DryWet.prototype.setWet=function(t,e){e?this.wetness.linearRampToValueNow(t,e):this.wetness.setValue(t)},t.DryWet.prototype.dispose=function(){t.prototype.dispose.call(this),this.dry.disconnect(),this.wet.disconnect(),this.wetness.dispose(),this._invert.dispose(),this.dry=null,this.wet=null,this.wetness=null,this._invert=null},t.DryWet}),define("Tone/component/Filter",["Tone/core/Tone"],function(t){return t.Filter=function(){this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.frequency=this._filter.frequency,this.gain=this._filter.gain,this.Q=this._filter.Q,this.detune=this._filter.detune;var e=this.optionsObject(arguments,["frequency","type"],t.Filter.defaults);this.frequency.value=e.frequency,this._filter.type=e.type,this.detune.value=e.detune,this.gain.value=e.gain,this.Q.value=e.Q},t.extend(t.Filter),t.Filter.defaults={type:"lowpass",frequency:350,Q:1,gain:0,detune:0},t.Filter.prototype.set=function(t){this.isUndef(t.type)||this.setType(t.type),this.isUndef(t.frequency)||(this.frequency.value=t.frequency),this.isUndef(t.Q)||(this.Q.value=t.Q),this.isUndef(t.gain)||(this.gain.value=t.gain),this.isUndef(t.detune)||(this.detune.value=t.detune)},t.Filter.prototype.setType=function(t){this._filter.type=t},t.Filter.prototype.getType=function(){return this._filter.type},t.Filter.prototype.dispose=function(){this._filter.disconnect(),this._filter=null,this.frequency=null,this.Q=null,this.detune=null,this.gain=null},t.Filter}),define("Tone/component/EQ",["Tone/core/Tone","Tone/signal/Signal","Tone/component/Filter"],function(t){return t.EQ=function(){t.call(this);var e=this.optionsObject(arguments,["low","mid","high"],t.EQ.defaults);this._lowFilter=new t.Filter(0,"lowpass"),this._lowMidFilter=new t.Filter(0,"highpass"),this._highMidFilter=new t.Filter(0,"lowpass"),this._highFilter=new t.Filter(0,"highpass"),this.lowFrequency=new t.Signal(e.lowFrequency),this.highFrequency=new t.Signal(e.highFrequency),this.lowGain=this.context.createGain(),this.lowGain.gain.value=e.low,this.midGain=this.context.createGain(),this.midGain.gain.value=e.mid,this.highGain=this.context.createGain(),this.highGain.gain.value=e.high,this.chain(this.input,this._lowFilter,this.lowGain,this.output),this.chain(this.input,this._lowMidFilter,this._highMidFilter,this.midGain,this.output),this.chain(this.input,this._highFilter,this.highGain,this.output),this.lowFrequency.connect(this._lowFilter.frequency),this.lowFrequency.connect(this._lowMidFilter.frequency),this.highFrequency.connect(this._highMidFilter.frequency),this.highFrequency.connect(this._highFilter.frequency)},t.extend(t.EQ),t.EQ.defaults={low:1,mid:1,high:1,lowFrequency:400,highFrequency:2500},t.EQ.prototype.set=function(t){this.isUndef(t.mid)||this.setMid(t.mid),this.isUndef(t.high)||this.setHigh(t.high),this.isUndef(t.low)||this.setLow(t.low),this.isUndef(t.lowFrequency)||this.lowFrequency.setValue(t.lowFrequency),this.isUndef(t.highFrequency)||this.highFrequency.setValue(t.highFrequency)},t.EQ.prototype.setMid=function(t){this.midGain.gain.value=t},t.EQ.prototype.setHigh=function(t){this.highGain.gain.value=t},t.EQ.prototype.setLow=function(t){this.lowGain.gain.value=t},t.EQ.prototype.dispose=function(){t.prototype.dispose.call(this),this._lowFilter.dispose(),this._lowMidFilter.dispose(),this._highMidFilter.dispose(),this._highFilter.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.lowGain.disconnect(),this.midGain.disconnect(),this.highGain.disconnect(),this._lowFilter=null,this._lowMidFilter=null,this._highMidFilter=null,this._highFilter=null,this.lowFrequency=null,this.highFrequency=null,this.lowGain=null,this.midGain=null,this.highGain=null},t.EQ}),define("Tone/component/Envelope",["Tone/core/Tone","Tone/signal/Signal"],function(t){return t.Envelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);this.output=this.context.createGain(),this.attack=this.toSeconds(e.attack),this.decay=this.toSeconds(e.decay),this.sustain=this.toSeconds(e.sustain),this.release=this.toSeconds(e.release),this.min=this.toSeconds(e.min),this.max=this.toSeconds(e.max),this._control=new t.Signal(this.min),this._control.connect(this.output)},t.extend(t.Envelope),t.Envelope.defaults={attack:.01,decay:.1,sustain:.5,release:1,min:0,max:1},t.Envelope.prototype.set=function(t){this.isUndef(t.attack)||this.setAttack(t.attack),this.isUndef(t.decay)||this.setDecay(t.decay),this.isUndef(t.sustain)||this.setSustain(t.sustain),this.isUndef(t.release)||this.setRelease(t.release),this.isUndef(t.min)||(this.min=t.min),this.isUndef(t.max)||(this.max=t.max)},t.Envelope.prototype.setAttack=function(t){this.attack=this.toSeconds(t)},t.Envelope.prototype.setDecay=function(t){this.decay=this.toSeconds(t)},t.Envelope.prototype.setRelease=function(t){this.release=this.toSeconds(t)},t.Envelope.prototype.setSustain=function(t){this.sustain=t},t.Envelope.prototype.triggerAttack=function(t){var e=(this.max-this.min)*this.sustain+this.min;if(t){var i=this.min;t=this.toSeconds(t),this._control.cancelScheduledValues(t),this._control.setValueAtTime(i,t),this._control.linearRampToValueAtTime(this.max,t+this.attack),this._control.linearRampToValueAtTime(e,t+this.attack+this.decay)}else this._control.linearRampToValueNow(this.max,this.attack),this._control.linearRampToValueAtTime(e,this.now()+this.attack+this.decay)},t.Envelope.prototype.triggerExponentialAttack=function(t){var e=(this.max-this.min)*this.sustain+this.min;if(t){var i=this.min;t=this.toSeconds(t),this._control.cancelScheduledValues(t),this._control.setValueAtTime(i,t),this._control.exponentialRampToValueAtTime(this.max,t+this.attack),this._control.linearRampToValueAtTime(e,t+this.attack+this.decay)}else this._control.exponentialRampToValueNow(this.max,this.attack),this._control.linearRampToValueAtTime(e,this.now()+this.attack+this.decay)},t.Envelope.prototype.triggerRelease=function(t){if(t){var e=(this.max-this.min)*this.sustain+this.min;t=this.toSeconds(t),this._control.cancelScheduledValues(t),this._control.setValueAtTime(e,t),this._control.linearRampToValueAtTime(this.min,t+this.toSeconds(this.release))}else this._control.linearRampToValueNow(this.min,this.toSeconds(this.release))},t.Envelope.prototype.triggerExponentialRelease=function(t){if(t){var e=(this.max-this.min)*this.sustain+this.min;t=this.toSeconds(t),this._control.cancelScheduledValues(t),this._control.setValueAtTime(e,t),this._control.exponentialRampToValueAtTime(this.min,t+this.toSeconds(this.release))}else this._control.exponentialRampToValueNow(this.min,this.toSeconds(this.release))},t.Envelope.prototype.connect=t.Signal.prototype.connect,t.Envelope.prototype.dispose=function(){t.prototype.dispose.call(this),this._control.dispose(),this._control=null},t.Envelope}),define("Tone/signal/Threshold",["Tone/core/Tone","Tone/signal/Signal"],function(t){return t.Threshold=function(t){this._thresh=this.context.createWaveShaper(),this._doubleThresh=this.context.createWaveShaper(),this.input=this._thresh,this.output=this._doubleThresh,this._thresh.connect(this._doubleThresh),this._setThresh(this._thresh,this.defaultArg(t,0)),this._setThresh(this._doubleThresh,1)},t.extend(t.Threshold),t.Threshold.prototype._setThresh=function(t,e){for(var i=1023,n=new Float32Array(i),s=0;i>s;s++){var o,r=s/(i-1)*2-1;o=e>r?0:1,n[s]=o}t.curve=n},t.Threshold.prototype.setThreshold=function(t){this._setThresh(this._thresh,t)},t.Threshold.prototype.connect=t.Signal.prototype.connect,t.Threshold.prototype.dispose=function(){this._thresh.disconnect(),this._doubleThresh.disconnect(),this._thresh=null,this._doubleThresh=null},t.Threshold}),define("Tone/signal/EqualZero",["Tone/core/Tone","Tone/signal/Threshold","Tone/signal/Signal","Tone/signal/Multiply"],function(t){return t.EqualZero=function(){this._equals=this.context.createWaveShaper(),this._thresh=new t.Threshold(1),this.input=this._equals,this.chain(this._equals,this._thresh),this.output=this._thresh,this._setEquals()},t.extend(t.EqualZero),t.EqualZero.prototype._setEquals=function(){for(var t=1023,e=new Float32Array(t),i=0;t>i;i++){var n=i/(t-1)*2-1;0===n?e[i]=1:e[i]=0}this._equals.curve=e},t.EqualZero.prototype.connect=t.Signal.prototype.connect,t.EqualZero.prototype.dispose=function(){this._equals.disconnect(),this._thresh.dispose(),this._equals=null,this._thresh=null},t.EqualZero}),define("Tone/signal/Equal",["Tone/core/Tone","Tone/signal/EqualZero","Tone/signal/Add","Tone/signal/Signal"],function(t){return t.Equal=function(e){this._adder=new t.Add(-e),this._equals=new t.EqualZero,this.input=this._adder,this.output=this._equals,this._adder.connect(this._equals)},t.extend(t.Equal),t.Equal.prototype.setValue=function(t){this._adder.setValue(-t)},t.Equal.prototype.connect=t.Signal.prototype.connect,t.Equal.prototype.dispose=function(){this._equals.disconnect(),this._adder.dispose(),this._equals=null,this._adder=null},t.Equal}),define("Tone/signal/Selector",["Tone/core/Tone","Tone/signal/Equal","Tone/signal/Signal"],function(t){t.Selector=function(i){i=this.defaultArg(i,2),this.input=new Array(i),this.output=this.context.createGain(),this.gate=new t.Signal(0);for(var n=0;i>n;n++){var s=new e(n);this.input[n]=s,this.gate.connect(s.selecter),s.connect(this.output)}},t.extend(t.Selector),t.Selector.prototype.select=function(t,e){t=Math.floor(t),this.gate.setValueAtTime(t,this.toSeconds(e))},t.Selector.prototype.connect=t.Signal.prototype.connect,t.Selector.prototype.dispose=function(){this.output.disconnect(),this.gate.dispose();for(var t=0;t<this.input.length;t++)this.input[t].dispose(),this.input[t]=null;this.gate=null,this.output=null};var e=function(e){this.selecter=new t.Equal(e),this.gate=this.input=this.output=this.context.createGain(),this.selecter.connect(this.gate.gain)};return t.extend(e),e.prototype.dispose=function(){this.selecter.dispose(),this.gate.disconnect(),this.selecter=null,this.gate=null},t.Selector}),define("Tone/signal/Negate",["Tone/core/Tone","Tone/signal/Multiply","Tone/signal/Signal"],function(t){return t.Negate=function(){this._multiply=new t.Multiply(-1),this.input=this.output=this._multiply},t.extend(t.Negate),t.Negate.prototype.connect=t.Signal.prototype.connect,t.Negate.prototype.dispose=function(){this.input.disconnect(),this.input=null},t.Negate}),define("Tone/signal/LessThan",["Tone/core/Tone","Tone/signal/Threshold","Tone/signal/Add","Tone/signal/Signal"],function(t){return t.LessThan=function(e){this._lt=this.context.createWaveShaper(),this._thresh=new t.Threshold(.5),this._adder=new t.Add(this.defaultArg(-e,0)),this.input=this._adder,this.output=this._thresh,this.chain(this._adder,this._lt,this._thresh),this._setLessThanZero()},t.extend(t.LessThan),t.LessThan.prototype._setLessThanZero=function(){for(var t=1023,e=new Float32Array(t),i=0;t>i;i++){var n=i/(t-1)*2-1;0>n?e[i]=1:e[i]=0}this._lt.curve=e},t.LessThan.prototype.setValue=function(t){this._adder.setValue(-t)},t.LessThan.prototype.connect=t.Signal.prototype.connect,t.LessThan.prototype.dispose=function(){this._lt.disconnect(),this._adder.disconnect(),this._thresh.dispose(),this._lt=null,this._adder=null,this._thresh=null},t.LessThan}),define("Tone/signal/Abs",["Tone/core/Tone","Tone/signal/Selector","Tone/signal/Negate","Tone/signal/LessThan","Tone/signal/Signal"],function(t){return t.Abs=function(){t.call(this),this._ltz=new t.LessThan(0),this._switch=new t.Selector(2),this._negate=new t.Negate,this.input.connect(this._switch,0,0),this.input.connect(this._negate),this._negate.connect(this._switch,0,1),this._switch.connect(this.output),this.chain(this.input,this._ltz,this._switch.gate)},t.extend(t.Abs),t.Abs.prototype.connect=t.Signal.prototype.connect,t.Abs.prototype.dispose=function(){this._switch.dispose(),this._ltz.dispose(),this._negate.dispose(),this.input.disconnect(),this.output.disconnect(),this._switch=null,this._ltz=null,this._negate=null,this.input=null,this.output=null},t.Abs}),define("Tone/component/Follower",["Tone/core/Tone","Tone/signal/Abs","Tone/signal/Negate","Tone/signal/Multiply"],function(t){return t.Follower=function(){t.call(this);var e=this.optionsObject(arguments,["attack","release"],t.Follower.defaults);this._abs=new t.Abs,this._filter=this.context.createBiquadFilter(),this._filter.type="lowpass",this._filter.frequency.value=0,this._filter.Q.value=-100,this._frequencyValues=this.context.createWaveShaper(),this._negate=new t.Negate,this._difference=this.context.createGain(),this._delay=this.context.createDelay(),this._delay.delayTime.value=.02,this._mult=new t.Multiply(1e3),this._attack=this.secondsToFrequency(e.attack),this._release=this.secondsToFrequency(e.release),this.chain(this.input,this._abs,this._filter,this.output),this.chain(this._abs,this._negate,this._difference),this.chain(this._filter,this._delay,this._difference),this.chain(this._difference,this._mult,this._frequencyValues,this._filter.frequency),this._setAttackRelease(this._attack,this._release)},t.extend(t.Follower),t.Follower.defaults={attack:.05,release:.5},t.Follower.prototype._setAttackRelease=function(t,e){for(var i=1024,n=new Float32Array(i),s=0;i>s;s++){var o,r=s/(i-1)*2-1;o=0>=r?t:e,n[s]=o}this._frequencyValues.curve=n},t.Follower.prototype.setAttack=function(t){this._attack=this.secondsToFrequency(t),this._setAttackRelease(this._attack,this._release)},t.Follower.prototype.setRelease=function(t){this._release=this.secondsToFrequency(t),this._setAttackRelease(this._attack,this._release)},t.Follower.prototype.set=function(e){this.isUndef(e.attack)||this.setAttack(e.attack),this.isUndef(e.release)||this.setRelease(e.release),t.Effect.prototype.set.call(this,e)},t.Follower.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.disconnect(),this._frequencyValues.disconnect(),this._delay.disconnect(),this._difference.disconnect(),this._abs.dispose(),this._negate.dispose(),this._mult.dispose(),this._filter=null,this._delay=null,this._frequencyValues=null,this._abs=null,this._negate=null,this._difference=null,this._mult=null},t.Follower}),define("Tone/component/FollowerOld",["Tone/core/Tone","Tone/signal/Abs","Tone/signal/Negate","Tone/signal/Multiply"],function(t){return t.Follower=function(e,i){t.call(this),e=this.defaultArg(e,.01),i=this.defaultArg(i,.5),this._abs=new t.Abs,this._filter=this.context.createBiquadFilter(),this._filter.type="lowpass",this._filter.frequency.value=0,this._filter.Q.value=-100,this._frequencyValues=this.context.createWaveShaper(),this._negate=new t.Negate,this._difference=this.context.createGain(),this._delay=this.context.createDelay(),this._delay.delayTime.value=.02,this._mult=new t.Multiply(100),this.chain(this.input,this._abs,this._filter,this.output),this.chain(this._abs,this._negate,this._difference),this.chain(this._filter,this._delay,this._difference),this.chain(this._difference,this._mult,this._frequencyValues,this._filter.frequency),this._setAttackRelease(this.secondsToFrequency(e),this.secondsToFrequency(i))},t.extend(t.Follower),t.Follower.prototype._setAttackRelease=function(t,e){for(var i=1024,n=new Float32Array(i),s=0;i>s;s++){var o,r=s/(i-1)*2-1;o=0>=r?t:e,n[s]=o}this._frequencyValues.curve=n},t.Follower.prototype.dispose=function(){this._filter.disconnect(),this.input.disconnect(),this._frequencyValues.disconnect(),this.output.disconnect(),this._abs.dispose(),this._delay.dispose(),this._negate.dispose(),this._difference.dispose(),this._mult.dispose(),this._filter=null,this.input=null,this._delay=null,this._frequencyValues=null,this.output=null,this._abs=null,this._negate=null,this._difference=null,this._mult=null},t.Follower}),define("Tone/signal/GreaterThan",["Tone/core/Tone","Tone/signal/Threshold","Tone/signal/Add","Tone/signal/Signal"],function(t){return t.GreaterThan=function(e){this._gt=this.context.createWaveShaper(),this._thresh=new t.Threshold(.001),this._adder=new t.Add(this.defaultArg(-e,0)),this.input=this._adder,this.output=this._thresh,this.chain(this._adder,this._gt,this._thresh),this._setGreaterThanZero()},t.extend(t.GreaterThan),t.GreaterThan.prototype._setGreaterThanZero=function(){for(var t=1023,e=new Float32Array(t),i=0;t>i;i++){var n=i/(t-1)*2-1;n>0?e[i]=1:e[i]=0}this._gt.curve=e},t.GreaterThan.prototype.setValue=function(t){this._adder.setValue(-t)},t.GreaterThan.prototype.connect=t.Signal.prototype.connect,t.GreaterThan.prototype.dispose=function(){this._gt.disconnect(),this._adder.disconnect(),this._thresh.dispose(),this._gt=null,this._adder=null,this._thresh=null},t.GreaterThan}),define("Tone/component/Gate",["Tone/core/Tone","Tone/component/Follower","Tone/signal/GreaterThan"],function(t){return t.Gate=function(e,i){t.call(this),e=this.defaultArg(e,-40),i=this.defaultArg(i,.1),this._follower=new t.Follower(i),this._gt=new t.GreaterThan(this.dbToGain(e)),this.chain(this.input,this.output),this.chain(this.input,this._follower,this._gt,this.output.gain)},t.extend(t.Gate),t.Gate.prototype.setThreshold=function(t){this._gt.setValue(this.dbToGain(t))},t.Gate.prototype.setSmoothTime=function(t){this._follower.setSmoothTime(t)},t.Gate.prototype.dispose=function(){t.prototype.dispose.call(this),this._follower.dispose(),this._gt.dispose(),this._follower=null,this._gt=null},t.Gate}),define("Tone/core/Clock",["Tone/core/Tone","Tone/signal/Signal"],function(t){return t.Clock=function(e,i){this._oscillator=null,this._jsNode=this.context.createScriptProcessor(this.bufferSize,1,1),this._jsNode.onaudioprocess=this._processBuffer.bind(this),this._controlSignal=new t.Signal(1),this._upTick=!1,this.tick=this.defaultArg(i,function(){}),this._jsNode.noGC(),this.setRate(e)},t.extend(t.Clock),t.Clock.prototype.setRate=function(t,e){var i=this.secondsToFrequency(this.toSeconds(t));e?this._controlSignal.exponentialRampToValueNow(i,e):(this._controlSignal.cancelScheduledValues(0),this._controlSignal.setValue(i))},t.Clock.prototype.getRate=function(){return this._controlSignal.getValue()},t.Clock.prototype.start=function(t){this._oscillator=this.context.createOscillator(),this._oscillator.type="square",this._oscillator.connect(this._jsNode),this._controlSignal.connect(this._oscillator.frequency),this._upTick=!1;var e=this.toSeconds(t);this._oscillator.start(e)},t.Clock.prototype.stop=function(t){var e=this.toSeconds(t);this._oscillator.stop(e)},t.Clock.prototype._processBuffer=function(t){for(var e=this.defaultArg(t.playbackTime,this.now()),i=this._jsNode.bufferSize,n=t.inputBuffer.getChannelData(0),s=this._upTick,o=0;i>o;o++){var r=n[o];r>0&&!s?(s=!0,this.tick(e+this.samplesToSeconds(o))):0>r&&s&&(s=!1)}this._upTick=s},t.Clock.prototype.dispose=function(){this._jsNode.disconnect(),this._controlSignal.dispose(),this._oscillator&&this._oscillator.disconnect(),this._jsNode.onaudioprocess=function(){},this._jsNode=null,this._controlSignal=null,this._oscillator=null},t.Clock}),define("Tone/core/Transport",["Tone/core/Tone","Tone/core/Clock","Tone/signal/Signal"],function(Tone){var Transport=function(){this._clock=new Tone.Clock(1,this._processTick.bind(this)),this.loop=!1,this.state=TransportState.STOPPED};Tone.extend(Transport);var timelineTicks=0,transportTicks=0,tatum=12,transportTimeSignature=4,loopStart=0,loopEnd=4*tatum,intervals=[],timeouts=[],transportTimeline=[],timelineProgress=0,SyncedSources=[],TransportState={STARTED:"started",PAUSED:"paused",STOPPED:"stopped"};Transport.prototype._processTick=function(t){processIntervals(t),processTimeouts(t),processTimeline(t),transportTicks+=1,timelineTicks+=1,this.loop&&timelineTicks===loopEnd&&this._setTicks(loopStart)},Transport.prototype._setTicks=function(t){timelineTicks=t;for(var e=0;e<transportTimeline.length;e++){var i=transportTimeline[e];if(i.callbackTick()>=t){timelineProgress=e;break}}};var processIntervals=function(t){for(var e=0,i=intervals.length;i>e;e++){var n=intervals[e];n.testInterval(transportTicks)&&n.doCallback(t)}},processTimeouts=function(t){for(var e=0,i=0,n=timeouts.length;n>i;i++){var s=timeouts[i],o=s.callbackTick();if(transportTicks>=o)s.doCallback(t),e++;else if(o>transportTicks)break}timeouts.splice(0,e)},processTimeline=function(t){for(var e=timelineProgress,i=transportTimeline.length;i>e;e++){var n=transportTimeline[e],s=n.callbackTick();if(s===timelineTicks)n.doCallback(t),timelineProgress=e;else if(s>timelineTicks)break}};Transport.prototype.setInterval=function(t,e,i){var n=this.toTicks(e),s=new TimelineEvent(t,i,n,transportTicks);return intervals.push(s),s.id},Transport.prototype.clearInterval=function(t){for(var e=0;e<intervals.length;e++){var i=intervals[e];if(i.id===t)return intervals.splice(e,1),!0}return!1},Transport.prototype.clearIntervals=function(){intervals=[]},Transport.prototype.setTimeout=function(t,e,i){for(var n=this.toTicks(e),s=new TimelineEvent(t,i,n+transportTicks,0),o=0,r=timeouts.length;r>o;o++){var a=timeouts[o];if(a.callbackTick()>s.callbackTick())return timeouts.splice(o,0,s),s.id}return timeouts.push(s),s.id},Transport.prototype.clearTimeout=function(t){for(var e=0;e<timeouts.length;e++){
var i=timeouts[e];if(i.id===t)return timeouts.splice(e,1),!0}return!1},Transport.prototype.clearTimeouts=function(){timeouts=[]},Transport.prototype.setTimeline=function(t,e,i){for(var n=this.toTicks(e),s=new TimelineEvent(t,i,n,0),o=timelineProgress,r=transportTimeline.length;r>o;o++){var a=transportTimeline[o];if(a.callbackTick()>s.callbackTick())return transportTimeline.splice(o,0,s),s.id}return transportTimeline.push(s),s.id},Transport.prototype.clearTimeline=function(t){for(var e=0;e<transportTimeline.length;e++){var i=transportTimeline[e];if(i.id===t)return transportTimeline.splice(e,1),!0}return!1},Transport.prototype.clearTimelines=function(){timelineProgress=0,transportTimeline=[]},Transport.prototype.toTicks=function(t){var e=this.toSeconds(t),i=this.notationToSeconds("4n"),n=e/i,s=n*tatum;return Math.round(s)},Transport.prototype.getTransportTime=function(){var t=timelineTicks/tatum,e=Math.floor(t/transportTimeSignature),i=Math.floor(t%1*4);t=Math.floor(t)%transportTimeSignature;var n=[e,t,i];return n.join(":")},Transport.prototype.setTransportTime=function(t){var e=this.toTicks(t);this._setTicks(e)},Transport.prototype.start=function(t){if(this.state===TransportState.STOPPED||this.state===TransportState.PAUSED){this.state=TransportState.STARTED;var e=this.toSeconds(t);this._clock.start(e);for(var i=0;i<SyncedSources.length;i++){var n=SyncedSources[i].source,s=SyncedSources[i].delay;n.start(e+s)}}},Transport.prototype.stop=function(t){if(this.state===TransportState.STARTED||this.state===TransportState.PAUSED){this.state=TransportState.STOPPED;var e=this.toSeconds(t);this._clock.stop(e),this._setTicks(0),this.clearTimeouts();for(var i=0;i<SyncedSources.length;i++){var n=SyncedSources[i].source;n.stop(e)}}},Transport.prototype.pause=function(t){if(this.state===TransportState.STARTED){this.state=TransportState.PAUSED;var e=this.toSeconds(t);this._clock.stop(e);for(var i=0;i<SyncedSources.length;i++){var n=SyncedSources[i].source;n.pause(e)}}},Transport.prototype.setBpm=function(t,e){var i=this.notationToSeconds(tatum.toString()+"n",t,transportTimeSignature)/4;this._clock.setRate(i,e)},Transport.prototype.getBpm=function(){var t=this._clock.getRate();return 60*(t/tatum)},Transport.prototype.setTimeSignature=function(t,e){e=this.defaultArg(e,4),transportTimeSignature=t/(e/4)},Transport.prototype.getTimeSignature=function(){return transportTimeSignature},Transport.prototype.setLoopStart=function(t){loopStart=this.toTicks(t)},Transport.prototype.setLoopEnd=function(t){loopEnd=this.toTicks(t)},Transport.prototype.setLoopPoint=function(t,e){this.setLoopStart(t),this.setLoopEnd(e)},Transport.prototype.syncSource=function(t,e){SyncedSources.push({source:t,delay:this.toSeconds(this.defaultArg(e,0))})},Transport.prototype.unsyncSource=function(t){for(var e=0;e<SyncedSources.length;e++)SyncedSources[e].source===t&&SyncedSources.splice(e,1)},Transport.prototype.syncSignal=function(t){};var TimelineEventIDCounter=0,TimelineEvent=function(t,e,i,n){this.startTicks=n,this.tickTime=i,this.callback=t,this.context=e,this.id=TimelineEventIDCounter++};return TimelineEvent.prototype.doCallback=function(t){this.callback.call(this.context,t)},TimelineEvent.prototype.callbackTick=function(){return this.startTicks+this.tickTime},TimelineEvent.prototype.testInterval=function(t){return(t-this.startTicks)%this.tickTime===0},Transport.prototype.dispose=function(){this._clock.dispose(),this._clock=null},Tone.prototype.isNotation=function(){var t=new RegExp(/[0-9]+[mnt]$/i);return function(e){return t.test(e)}}(),Tone.prototype.isTicks=function(){var t=new RegExp(/[0-9]+[i]$/i);return function(e){return t.test(e)}}(),Tone.prototype.isTransportTime=function(){var t=new RegExp(/^\d+(\.\d+)?:\d+(\.\d+)?(:\d+(\.\d+)?)?$/);return function(e){return t.test(e)}}(),Tone.prototype.isFrequency=function(){var t=new RegExp(/[0-9]+hz$/i);return function(e){return t.test(e)}}(),Tone.prototype.notationToSeconds=function(t,e,i){e=this.defaultArg(e,Tone.Transport.getBpm()),i=this.defaultArg(i,transportTimeSignature);var n=60/e,s=parseInt(t,10),o=0;0===s&&(o=0);var r=t.slice(-1);return o="t"===r?4/s*2/3:"n"===r?4/s:"m"===r?s*i:0,n*o},Tone.prototype.transportTimeToSeconds=function(t,e,i){e=this.defaultArg(e,Tone.Transport.getBpm()),i=this.defaultArg(i,transportTimeSignature);var n=0,s=0,o=0,r=t.split(":");2===r.length?(n=parseFloat(r[0]),s=parseFloat(r[1])):1===r.length?s=parseFloat(r[0]):3===r.length&&(n=parseFloat(r[0]),s=parseFloat(r[1]),o=parseFloat(r[2]));var a=n*i+s+o/4;return a*this.notationToSeconds("4n")},Tone.prototype.ticksToSeconds=function(t,e,i){t=parseInt(t);var n=this.notationToSeconds("4n",e,i);return 4*n/(tatum/t)},Tone.prototype.toTransportTime=function(t,e,i){var n=this.toSeconds(t,e,i);e=this.defaultArg(e,Tone.Transport.getBpm()),i=this.defaultArg(i,transportTimeSignature);var s=this.notationToSeconds("4n"),o=n/s,r=Math.floor(o/i),a=Math.floor(o%1*4);o=Math.floor(o)%i;var c=[r,o,a];return c.join(":")},Tone.prototype.toFrequency=function(t,e){return this.isFrequency(t)?parseFloat(t):this.isNotation(t)||this.isTransportTime(t)?this.secondsToFrequency(this.toSeconds(t,e)):t},Tone.prototype.toSeconds=function(time,now){if(now=this.defaultArg(now,this.now()),"number"==typeof time)return time;if("string"==typeof time){var plusTime=0;"+"===time.charAt(0)&&(plusTime=now,time=time.slice(1));var components=time.split(/[\(\)\-\+\/\*]/);if(components.length>1){for(var oringalTime=time,i=0;i<components.length;i++){var symb=components[i];if(""!==symb){var val=this.toSeconds(symb.trim());time=time.replace(symb,val)}}try{time=eval(time)}catch(e){console.log("problem evaluating Tone.Time: "+oringalTime),time=0}}else time=this.isNotation(time)?this.notationToSeconds(time):this.isTransportTime(time)?this.transportTimeToSeconds(time):this.isFrequency(time)?this.frequencyToSeconds(time):parseFloat(time);return time+plusTime}return now},Tone.Transport=new Transport,Tone._initAudioContext(function(){Tone.Transport._clock=new Tone.Clock(1,Tone.Transport._processTick.bind(Tone.Transport))}),Tone.Transport}),define("Tone/source/Source",["Tone/core/Tone","Tone/core/Transport"],function(t){return t.Source=function(){this.output=this.context.createGain(),this.state=t.Source.State.STOPPED},t.extend(t.Source),t.Source.prototype.start=function(){},t.Source.prototype.stop=function(){},t.Source.prototype.pause=function(t){this.stop(t)},t.Source.prototype.sync=function(e){t.Transport.syncSource(this,e)},t.Source.prototype.unsync=function(){t.Transport.unsyncSource(this)},t.Source.prototype.setVolume=function(t,e){var i=this.now(),n=this.dbToGain(t);if(e){var s=this.output.gain.value;this.output.gain.cancelScheduledValues(i),this.output.gain.setValueAtTime(s,i),this.output.gain.linearRampToValueAtTime(n,i+this.toSeconds(e))}else this.output.gain.setValueAtTime(n,i)},t.Source.prototype.dispose=function(){t.prototype.dispose.call(this),this.state=null},t.Source.State={STARTED:"started",PAUSED:"paused",STOPPED:"stopped",SYNCED:"synced"},t.Source}),define("Tone/source/Oscillator",["Tone/core/Tone","Tone/signal/Signal","Tone/source/Source"],function(t){return t.Oscillator=function(e,i){t.Source.call(this),this.oscillator=this.context.createOscillator(),this.frequency=new t.Signal(this.defaultArg(this.toFrequency(e),440)),this.detune=new t.Signal(0),this.onended=function(){},this.oscillator.connect(this.output),this.oscillator.type=this.defaultArg(i,"sine")},t.extend(t.Oscillator,t.Source),t.Oscillator.prototype.start=function(e){if(this.state===t.Source.State.STOPPED){this.state=t.Source.State.STARTED;var i=this.oscillator.type;this.oscillator=this.context.createOscillator(),this.oscillator.type=i,this.oscillator.connect(this.output),this.frequency.connect(this.oscillator.frequency),this.detune.connect(this.oscillator.detune),this.oscillator.start(this.toSeconds(e)),this.oscillator.onended=this._onended.bind(this)}},t.Oscillator.prototype.stop=function(e){this.state===t.Source.State.STARTED&&(e||(this.state=t.Source.State.STOPPED),this.oscillator.stop(this.toSeconds(e)))},t.Oscillator.prototype.setFrequency=function(t,e){e?this.frequency.exponentialRampToValueAtTime(this.toFrequency(t),this.toSeconds(e)):this.frequency.setValue(this.toFrequency(t))},t.Oscillator.prototype.setType=function(t){this.oscillator.type=t},t.Oscillator.prototype._onended=function(){this.state=t.Source.State.STOPPED,this.onended()},t.Oscillator.prototype.dispose=function(){t.Source.prototype.dispose.call(this),this.stop(),null!==this.oscillator&&(this.oscillator.disconnect(),this.oscillator=null),this.frequency.dispose(),this.frequency=null},t.Oscillator}),define("Tone/component/LFO",["Tone/core/Tone","Tone/source/Oscillator","Tone/signal/Scale","Tone/signal/Signal"],function(t){return t.LFO=function(e,i,n){this.oscillator=new t.Oscillator(this.defaultArg(e,1),"sine"),this.frequency=this.oscillator.frequency,this._scaler=new t.Scale(this.defaultArg(i,0),this.defaultArg(n,1)),this.output=this._scaler,this.chain(this.oscillator,this.output)},t.extend(t.LFO),t.LFO.prototype.start=function(t){this.oscillator.start(t)},t.LFO.prototype.stop=function(t){this.oscillator.stop(t)},t.LFO.prototype.sync=function(e){t.Transport.syncSource(this.oscillator,e),t.Transport.syncSignal(this.oscillator.frequency)},t.LFO.prototype.unsync=function(){t.Transport.unsyncSource(this.oscillator),t.Transport.unsyncSignal(this.oscillator.frequency)},t.LFO.prototype.setFrequency=function(t){this.oscillator.setFrequency(t)},t.LFO.prototype.setMin=function(t){this._scaler.setOutputMin(t)},t.LFO.prototype.setMax=function(t){this._scaler.setOutputMax(t)},t.LFO.prototype.setType=function(t){this.oscillator.setType(t)},t.LFO.prototype.set=function(t){this.isUndef(t.frequency)||this.setFrequency(t.frequency),this.isUndef(t.type)||this.setType(t.type),this.isUndef(t.min)||this.setMin(t.min),this.isUndef(t.max)||this.setMax(t.max)},t.LFO.prototype.connect=t.Signal.prototype.connect,t.LFO.prototype.dispose=function(){this.oscillator.dispose(),this._scaler.dispose(),this.oscillator=null,this.frequency=null,this.output=null},t.LFO}),define("Tone/component/Merge",["Tone/core/Tone"],function(t){return t.Merge=function(){this.output=this.context.createGain(),this.input=new Array(2),this.left=this.input[0]=this.context.createGain(),this.right=this.input[1]=this.context.createGain(),this._merger=this.context.createChannelMerger(2),this.left.connect(this._merger,0,0),this.right.connect(this._merger,0,1),this._merger.connect(this.output)},t.extend(t.Merge),t.Merge.prototype.dispose=function(){t.prototype.dispose.call(this),this.left.disconnect(),this.right.disconnect(),this._merger.disconnect(),this.left=null,this.right=null,this._merger=null},t.Merge}),define("Tone/core/Master",["Tone/core/Tone"],function(t){var e=function(){t.call(this),this.limiter=this.context.createDynamicsCompressor(),this.limiter.threshold.value=0,this.limiter.ratio.value=20,this.chain(this.input,this.limiter,this.output,this.context.destination)};return t.extend(e),e.prototype.mute=function(t){t=this.defaultArg(t,!0),t?this.output.gain.value=0:this.output.gain.value=1},e.prototype.setVolume=function(t,e){var i=this.now();if(e){var n=this.output.gain.value;this.output.gain.cancelScheduledValues(i),this.output.gain.setValueAtTime(n,i),this.output.gain.linearRampToValueAtTime(t,i+this.toSeconds(e))}else this.output.gain.setValueAtTime(t,i)},t.prototype.toMaster=function(){this.connect(t.Master)},AudioNode.prototype.toMaster=function(){this.connect(t.Master)},t._initAudioContext(function(){t.Master=new e}),t.Master}),define("Tone/component/Meter",["Tone/core/Tone","Tone/core/Master"],function(t){return t.Meter=function(e,i,n){t.call(this),this.channels=this.defaultArg(e,1),this.smoothing=this.defaultArg(i,.8),this.clipMemory=this.defaultArg(n,500),this._volume=new Array(this.channels),this._values=new Array(this.channels);for(var s=0;s<this.channels;s++)this._volume[s]=0,this._values[s]=0;this._lastClip=0,this._jsNode=this.context.createScriptProcessor(this.bufferSize,this.channels,1),this._jsNode.onaudioprocess=this._onprocess.bind(this),this._jsNode.noGC(),this.input.connect(this.output),this.input.connect(this._jsNode)},t.extend(t.Meter),t.Meter.prototype._onprocess=function(t){for(var e=this._jsNode.bufferSize,i=this.smoothing,n=0;n<this.channels;n++){for(var s,o=t.inputBuffer.getChannelData(n),r=0,a=0,c=!1,h=0;e>h;h++)s=o[h],!c&&s>.95&&(c=!0,this._lastClip=Date.now()),a+=s,r+=s*s;var l=a/e,u=Math.sqrt(r/e);this._volume[n]=Math.max(u,this._volume[n]*i),this._values[n]=l}},t.Meter.prototype.getLevel=function(t){t=this.defaultArg(t,0);var e=this._volume[t];return 1e-5>e?0:e},t.Meter.prototype.getValue=function(t){return t=this.defaultArg(t,0),this._values[t]},t.Meter.prototype.getDb=function(t){return this.gainToDb(this.getLevel(t))},t.Meter.prototype.isClipped=function(){return Date.now()-this._lastClip<this.clipMemory},t.Meter.prototype.dispose=function(){t.prototype.dispose.call(this),this._jsNode.disconnect(),this._jsNode.onaudioprocess=null,this._volume=null,this._values=null},t.Meter}),define("Tone/component/Split",["Tone/core/Tone"],function(t){return t.Split=function(){this.input=this.context.createGain(),this.output=new Array(2),this._splitter=this.context.createChannelSplitter(2),this.left=this.output[0]=this.context.createGain(),this.right=this.output[1]=this.context.createGain(),this.input.connect(this._splitter),this._splitter.connect(this.left,0,0),this._splitter.connect(this.right,1,0)},t.extend(t.Split),t.Split.prototype.dispose=function(){t.prototype.dispose.call(this),this._splitter.disconnect(),this.left.disconnect(),this.right.disconnect(),this.left=null,this.right=null,this._splitter=null},t.Split}),define("Tone/component/Panner",["Tone/core/Tone","Tone/component/DryWet","Tone/component/Merge","Tone/component/Split"],function(t){return t.Panner=function(e){t.call(this),this._dryWet=new t.DryWet,this._merger=new t.Merge,this._splitter=new t.Split,this.pan=this._dryWet.wetness,this.input.connect(this._splitter.left),this.input.connect(this._splitter.right),this._splitter.left.connect(this._dryWet.dry),this._splitter.right.connect(this._dryWet.wet),this._dryWet.dry.connect(this._merger.left),this._dryWet.wet.connect(this._merger.right),this._merger.connect(this.output),this.setPan(this.defaultArg(e,.5))},t.extend(t.Panner),t.Panner.prototype.setPan=function(t,e){this._dryWet.setWet(t,e)},t.Panner.prototype.dispose=function(){t.prototype.dispose.call(this),this._dryWet.dispose(),this._splitter.dispose(),this._merger.dispose(),this._dryWet=null,this._splitter=null,this._merger=null},t.Panner}),define("Tone/component/Recorder",["Tone/core/Tone","Tone/core/Master"],function(t){t.Recorder=function(i){t.call(this),this.channels=this.defaultArg(i,1),this._jsNode=this.context.createScriptProcessor(this.bufferSize,this.channels,1),this._jsNode.onaudioprocess=this._audioprocess.bind(this),this._recordBuffers=new Array(this.channels),this._recordStartSample=0,this._recordEndSample=0,this._recordDuration=0,this.state=e.STOPPED,this._recordBufferOffset=0,this._callback=function(){},this.input.connect(this._jsNode),this.input.connect(this.output),this._jsNode.noGC(),this.clear()},t.extend(t.Recorder),t.Recorder.prototype._audioprocess=function(t){if(this.state!==e.STOPPED&&this.state===e.RECORDING){var i,n,s=this.defaultArg(t.playbackTime,this.now()),o=this.toSamples(s),r=this._jsNode.bufferSize,a=o+r;o>this._recordEndSample?(this.state=e.STOPPED,this._callback(this._recordBuffers)):o>this._recordStartSample?(i=0,n=Math.min(this._recordEndSample-o,r),this._recordChannels(t.inputBuffer,i,n,r)):a>this._recordStartSample&&(n=a-this._recordStartSample,i=r-n,this._recordChannels(t.inputBuffer,i,n,r))}},t.Recorder.prototype._recordChannels=function(t,e,i,n){for(var s=this._recordBufferOffset,o=this._recordBuffers,r=0;r<t.numberOfChannels;r++){var a=t.getChannelData(r);if(0===e&&i===n)this._recordBuffers[r].set(a,s);else for(var c=e;e+i>c;c++){var h=c-e;o[r][h+s]=a[c]}}this._recordBufferOffset+=i},t.Recorder.prototype.record=function(t,i,n){if(this.state===e.STOPPED){this.clear(),this._recordBufferOffset=0,i=this.defaultArg(i,0),this._recordDuration=this.toSamples(t),this._recordStartSample=this.toSamples("+"+i),this._recordEndSample=this._recordStartSample+this._recordDuration;for(var s=0;s<this.channels;s++)this._recordBuffers[s]=new Float32Array(this._recordDuration);this.state=e.RECORDING,this._callback=this.defaultArg(n,function(){})}},t.Recorder.prototype.clear=function(){for(var t=0;t<this.channels;t++)this._recordBuffers[t]=null;this._recordBufferOffset=0},t.Recorder.prototype.isEmpty=function(){return null===this._recordBuffers[0]},t.Recorder.prototype.getFloat32Array=function(){return this.isEmpty()?null:this._recordBuffers},t.Recorder.prototype.getAudioBuffer=function(){if(this.isEmpty())return null;for(var t=this.context.createBuffer(this.channels,this._recordBuffers[0].length,this.context.sampleRate),e=0;e<t.numberOfChannels;e++){var i=t.getChannelData(e);i.set(this._recordBuffers[e])}return t},t.Recorder.prototype.dispose=function(){t.prototype.dispose.call(this),this._jsNode.disconnect(),this._jsNode.onaudioprocess=void 0,this._jsNode=null,this._recordBuffers=null};var e={STOPPED:"stopped",SCHEDULED:"scheduled",RECORDING:"recording"};return t.Recorder}),define("Tone/core/Bus",["Tone/core/Tone"],function(t){var e={};t.prototype.send=function(t,i){e.hasOwnProperty(t)||(e[t]=this.context.createGain());var n=this.context.createGain();return n.gain.value=this.defaultArg(i,1),this.chain(this.output,n,e[t]),n},t.prototype.receive=function(t){e.hasOwnProperty(t)||(e[t]=this.context.createGain()),e[t].connect(this.input)}}),define("Tone/core/Note",["Tone/core/Tone","Tone/core/Transport"],function(t){function e(t,e){if(i.hasOwnProperty(t))for(var n=i[t],s=0,o=n.length;o>s;s++)n[s](e)}t.Note=function(e,i,n){this.value=i,this._channel=n,this._timelineID=t.Transport.setTimeline(this._trigger.bind(this),e)},t.Note.prototype._trigger=function(){e(this._channel,this.value)},t.Note.prototype.dispose=function(){t.Tranport.clearTimeline(this._timelineID),this.value=null};var i={};return t.Note.route=function(t,e){i.hasOwnProperty(t)?i[t].push(e):i[t]=[e]},t.Note.unroute=function(t,e){if(i.hasOwnProperty(t)){var n=i[t],s=n.indexOf(e);-1!==s&&i[t].splice(s,1)}},t.Note.parseScore=function(e){var i=[];for(var n in e)for(var s=0;s<n.length;s++){var o=n[s][0],r=n[s][1],a=new t.Note(o,r,n);i.push(a)}return i},t.Note}),define("Tone/effect/Effect",["Tone/core/Tone","Tone/component/DryWet"],function(t){return t.Effect=function(){t.call(this);var e=this.optionsObject(arguments,["dry"],t.Effect.defaults);this.dryWet=new t.DryWet,this.effectSend=this.context.createGain(),this.effectReturn=this.context.createGain(),this.input.connect(this.dryWet.dry),this.input.connect(this.effectSend),this.effectReturn.connect(this.dryWet.wet),this.dryWet.connect(this.output),this.setDry(e.dry)},t.extend(t.Effect),t.Effect.defaults={dry:0},t.Effect.prototype.setDry=function(t,e){this.dryWet.setDry(t,e)},t.Effect.prototype.setWet=function(t,e){this.dryWet.setWet(t,e)},t.Effect.prototype.set=function(t){this.isUndef(t.dry)||this.setDry(t.dry),this.isUndef(t.wet)||this.setWet(t.wet)},t.Effect.prototype.bypass=function(){this.setDry(1)},t.Effect.prototype.connectEffect=function(t){this.chain(this.effectSend,t,this.effectReturn)},t.Effect.prototype.dispose=function(){t.prototype.dispose.call(this),this.dryWet.dispose(),this.effectSend.disconnect(),this.effectReturn.disconnect(),this.dryWet=null,this.effectSend=null,this.effectReturn=null},t.Effect}),define("Tone/effect/AutoPanner",["Tone/core/Tone","Tone/effect/Effect","Tone/component/LFO","Tone/component/Panner"],function(t){return t.AutoPanner=function(){var e=this.optionsObject(arguments,["frequency"],t.AutoPanner.defaults);t.Effect.call(this,e),this._lfo=new t.LFO(e.frequency,0,1),this._panner=new t.Panner,this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this.setType(e.type)},t.extend(t.AutoPanner,t.Effect),t.AutoPanner.defaults={frequency:1,type:"sine"},t.AutoPanner.prototype.start=function(t){this._lfo.start(t)},t.AutoPanner.prototype.stop=function(t){this._lfo.stop(t)},t.AutoPanner.prototype.setType=function(t){this._lfo.setType(t)},t.AutoPanner.prototype.setFrequency=function(t){this._lfo.setFrequency(t)},t.AutoPanner.prototype.set=function(e){this.isUndef(e.frequency)||this.setFrequency(e.frequency),this.isUndef(e.type)||this.setType(e.type),t.Effect.prototype.set.call(this,e)},t.AutoPanner.prototype.dispose=function(){t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._panner.dispose(),this._lfo=null,this._panner=null},t.AutoPanner}),define("Tone/signal/ScaleExp",["Tone/core/Tone","Tone/signal/Add","Tone/signal/Multiply","Tone/signal/Signal"],function(t){return t.ScaleExp=function(e,i,n,s,o){t.call(this),2===arguments.length?(n=e,s=i,o=2,e=-1,i=1):3===arguments.length&&(o=n,n=e,s=i,e=-1,i=1),this._inputMin=e,this._inputMax=i,this._outputMin=n,this._outputMax=s,this._plusInput=new t.Add(0),this._normalize=new t.Multiply(1),this._scale=new t.Multiply(1),this._plusOutput=new t.Add(0),this._expScaler=this.context.createWaveShaper(),this.chain(this.input,this._plusInput,this._normalize,this._expScaler,this._scale,this._plusOutput,this.output),this._setScalingParameters(),this.setExponent(this.defaultArg(o,2))},t.extend(t.ScaleExp),t.ScaleExp.prototype._setScalingParameters=function(){this._plusInput.setValue(-this._inputMin),this._scale.setValue(this._outputMax-this._outputMin),this._normalize.setValue(1/(this._inputMax-this._inputMin)),this._plusOutput.setValue(this._outputMin)},t.ScaleExp.prototype.setExponent=function(t){for(var e=1024,i=new Float32Array(e),n=0;e>n;n++){var s=n/e*2-1;s>=0?i[n]=Math.pow(s,t):i[n]=s}this._expScaler.curve=i},t.ScaleExp.prototype.setInputMin=function(t){this._inputMin=t,this._setScalingParameters()},t.ScaleExp.prototype.setInputMax=function(t){this._inputMax=t,this._setScalingParameters()},t.ScaleExp.prototype.setOutputMin=function(t){this._outputMin=t,this._setScalingParameters()},t.ScaleExp.prototype.setOutputMax=function(t){this._outputMax=t,this._setScalingParameters()},t.ScaleExp.prototype.connect=t.Signal.prototype.connect,t.ScaleExp.prototype.dispose=function(){this.input.disconnect(),this.output.disconnect(),this._plusInput.dispose(),this._plusOutput.dispose(),this._normalize.dispose(),this._scale.dispose(),this.input=null,this.output=null,this._plusInput=null,this._plusOutput=null,this._scale=null},t.ScaleExp}),define("Tone/effect/AutoWah",["Tone/core/Tone","Tone/component/Follower","Tone/signal/ScaleExp","Tone/effect/Effect"],function(t){return t.AutoWah=function(){var e=this.optionsObject(arguments,["baseFrequency","octaves","sensitivity"],t.AutoWah.defaults);t.Effect.call(this,e),this._follower=new t.Follower(e.follower),this._sweepRange=new t.ScaleExp(0,1,0,1,2),this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this._bandpass=this.context.createBiquadFilter(),this._bandpass.type="bandpass",this._bandpass.Q.value=2,this._peaking=this.context.createBiquadFilter(),this._peaking.type="peaking",this._peaking.gain.value=20,this.chain(this.effectSend,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.chain(this.effectSend,this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.setSensitiviy(e.sensitivity)},t.extend(t.AutoWah,t.Effect),t.AutoWah.defaults={baseFrequency:100,octaves:5,sensitivity:0,follower:{attack:.15,release:.5}},t.AutoWah.prototype.setOctaves=function(t){this._octaves=t,this._setSweepRange()},t.AutoWah.prototype.setBaseFrequency=function(t){this._baseFrequency=t,this._setSweepRange()},t.AutoWah.prototype.setSensitiviy=function(t){this._sweepRange.setInputMax(this.dbToGain(t))},t.AutoWah.prototype._setSweepRange=function(){this._sweepRange.setOutputMin(this._baseFrequency),this._sweepRange.setOutputMax(Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2))},t.AutoWah.prototype.set=function(e){this.isUndef(e.baseFrequency)||this.setBaseFrequency(e.baseFrequency),this.isUndef(e.sensitivity)||this.setSensitiviy(e.sensitivity),this.isUndef(e.octaves)||this.setOctaves(e.octaves),this.isUndef(e.follower)||this._follower.set(e.follower),t.Effect.prototype.set.call(this,e)},t.AutoWah.prototype.dispose=function(){t.Effect.prototype.dispose.call(this),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.disconnect(),this._peaking.disconnect(),this._follower=null,this._sweepRange=null,this._bandpass=null,this._peaking=null},t.AutoWah}),define("Tone/effect/BitCrusher",["Tone/core/Tone","Tone/effect/Effect"],function(t){return t.BitCrusher=function(){var e=this.optionsObject(arguments,["bits","frequency"],t.BitCrusher.defaults);t.Effect.call(this,e),this._bits=this.defaultArg(e.bits,8),this._frequency=this.defaultArg(e.frequency,.5),this._step=2*Math.pow(.5,this._bits),this._invStep=1/this._step,this._phasor=0,this._last=0,this._crusher=this.context.createScriptProcessor(this.bufferSize,1,1),this._crusher.onaudioprocess=this._audioprocess.bind(this),this.connectEffect(this._crusher)},t.extend(t.BitCrusher,t.Effect),t.BitCrusher.defaults={bits:8,frequency:.5},t.BitCrusher.prototype._audioprocess=function(t){for(var e=this._phasor,i=this._frequency,n=this._invStep,s=this._last,o=this._step,r=t.inputBuffer.getChannelData(0),a=t.outputBuffer.getChannelData(0),c=0,h=a.length;h>c;c++)e+=i,e>=1&&(e-=1,s=o*(r[c]*n|.5)),a[c]=s;this._phasor=e,this._last=s},t.BitCrusher.prototype.setBits=function(t){this._bits=t,this._step=2*Math.pow(.5,this._bits),this._invStep=1/this._step},t.BitCrusher.prototype.setFrequency=function(t){this._frequency=t},t.BitCrusher.prototype.set=function(e){this.isUndef(e.frequency)||this.setFrequency(e.frequency),this.isUndef(e.bits)||this.setBits(e.bits),t.Effect.prototype.set.call(this,e)},t.BitCrusher.prototype.dispose=function(){t.Effect.prototype.dispose.call(this),this._crusher.disconnect(),this._crusher=null},t.BitCrusher}),define("Tone/effect/FeedbackEffect",["Tone/core/Tone","Tone/effect/Effect","Tone/signal/Signal","Tone/signal/Multiply"],function(t){return t.FeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"]);e=this.defaultArg(e,t.FeedbackEffect.defaults),t.Effect.call(this,e),this.feedback=new t.Signal(e.feedback),this._half=new t.Multiply(.5),this._feedbackGain=this.context.createGain(),this.chain(this.effectReturn,this._feedbackGain,this.effectSend),this.chain(this.feedback,this._half,this._feedbackGain.gain)},t.extend(t.FeedbackEffect,t.Effect),t.FeedbackEffect.defaults={feedback:.25},t.FeedbackEffect.prototype.setFeedback=function(t,e){e?this.feedback.linearRampToValueNow(t,e):this.feedback.setValue(t)},t.FeedbackEffect.prototype.set=function(e){this.isUndef(e.feedback)||this.setFeedback(e.feedback),t.Effect.prototype.set.call(this,e)},t.FeedbackEffect.prototype.dispose=function(){t.Effect.prototype.dispose.call(this),this.feedback.dispose(),this._half.dispose(),this._feedbackGain.disconnect(),this.feedback=null,this._feedbackGain=null,this._half=null},t.FeedbackEffect}),define("Tone/effect/Chorus",["Tone/core/Tone","Tone/component/LFO","Tone/effect/FeedbackEffect"],function(t){return t.Chorus=function(){var e=this.optionsObject(arguments,["rate","delayTime","depth"],t.Chorus.defaults);t.FeedbackEffect.call(this,e),this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfo=new t.LFO(e.rate,0,1),this._delayNode=this.context.createDelay(),this.connectEffect(this._delayNode),this.effectSend.connect(this.effectReturn),this._lfo.connect(this._delayNode.delayTime),this._lfo.start(),this.setDepth(this._depth)},t.extend(t.Chorus,t.FeedbackEffect),t.Chorus.defaults={rate:2,delayTime:3.5,depth:.7},t.Chorus.prototype.setDepth=function(t){this._depth=t;var e=this._delayTime*t;this._lfo.setMin(this._delayTime-e),this._lfo.setMax(this._delayTime+e)},t.Chorus.prototype.setDelayTime=function(t){this._delayTime=t/1e3,this.setDepth(this._depth)},t.Chorus.prototype.setRate=function(t){this._lfo.setFrequency(t)},t.Chorus.prototype.set=function(e){this.isUndef(e.rate)||this.setRate(e.rate),this.isUndef(e.delayTime)||this.setDelayTime(e.delayTime),this.isUndef(e.depth)||this.setDepth(e.depth),t.FeedbackEffect.prototype.set.call(this,e)},t.Chorus.prototype.dispose=function(){t.FeedbackEffect.prototype.dispose.call(this),this._lfo.dispose(),this._delayNode.disconnect(),this._lfo=null,this._delayNode=null},t.Chorus}),define("Tone/effect/FeedbackDelay",["Tone/core/Tone","Tone/effect/FeedbackEffect","Tone/signal/Signal"],function(t){return t.FeedbackDelay=function(){var e=this.optionsObject(arguments,["delayTime"],t.FeedbackDelay.defaults);t.FeedbackEffect.call(this,e),this.delayTime=new t.Signal,this._delayNode=this.context.createDelay(4),this.connectEffect(this._delayNode),this.delayTime.connect(this._delayNode.delayTime),this.setDelayTime(e.delayTime)},t.extend(t.FeedbackDelay,t.FeedbackEffect),t.FeedbackDelay.defaults={delayTime:.25},t.FeedbackDelay.prototype.setDelayTime=function(t,e){e?this.delayTime.linearRampToValueNow(this.toSeconds(t),e):this.delayTime.setValue(this.toSeconds(t))},t.FeedbackDelay.prototype.set=function(e){this.isUndef(e.delayTime)||this.setDelayTime(e.delayTime),t.FeedbackEffect.prototype.set.call(this,e)},t.FeedbackDelay.prototype.dispose=function(){t.FeedbackEffect.prototype.dispose.call(this),this.delayTime.dispose(),this._delayNode.disconnect(),this._delayNode=null,this.delayTime=null},t.FeedbackDelay}),define("Tone/effect/Phaser",["Tone/core/Tone","Tone/component/LFO","Tone/effect/FeedbackEffect","Tone/component/Filter"],function(t){return t.Phaser=function(){var e=this.optionsObject(arguments,["rate","depth","baseFrequency"],t.Phaser.defaults);t.FeedbackEffect.call(this,e),this._lfo=new t.LFO(e.rate,0,1),this._baseFrequency=e.baseFrequency,this._depth=e.depth,this._filters=new Array(e.stages);for(var i=0;i<e.stages;i++){var n=new t.Filter(0,"allpass");this._lfo.connect(n.frequency),this._filters[i]=n}this.chain.apply(this,this._filters),this.effectSend.connect(this._filters[0]),this.effectSend.connect(this.effectReturn),this._filters[e.stages-1].connect(this.effectReturn),this.setBaseFrequency(e.baseFrequency),this.setDepth(e.depth),this._lfo.start()},t.extend(t.Phaser,t.FeedbackEffect),t.Phaser.defaults={rate:1,depth:.6,stages:4,baseFrequency:750},t.Phaser.prototype.setDepth=function(t){this._depth=t,this._lfo.setMax(this._baseFrequency+this._baseFrequency*t)},t.Phaser.prototype.setBaseFrequency=function(t){this._baseFrequency=t,this._lfo.setMin(t),this.setDepth(this._depth)},t.Phaser.prototype.setRate=function(t){this._lfo.setFrequency(t)},t.Phaser.prototype.set=function(e){this.isUndef(e.rate)||this.setRate(e.rate),this.isUndef(e.baseFrequency)||this.setBaseFrequency(e.baseFrequency),this.isUndef(e.depth)||this.setDepth(e.depth),t.FeedbackEffect.prototype.set.call(this,e)},t.Phaser.prototype.dispose=function(){t.FeedbackEffect.prototype.dispose.call(this),this._lfo.dispose();for(var e=0;e<this._filters.length;e++)this._filters[e].dispose(),this._filters[e]=null;this._filters=null},t.Phaser}),define("Tone/effect/PingPongDelay",["Tone/core/Tone","Tone/effect/FeedbackDelay","Tone/component/Split","Tone/component/Merge"],function(t){return t.PingPongDelay=function(){var e=this.optionsObject(arguments,["delayTime"],t.PingPongDelay.defaults);t.call(this),this._merger=new t.Merge,this.leftDelay=new t.FeedbackDelay,this.rightDelay=new t.FeedbackDelay,this.input.connect(this.leftDelay),this.input.connect(this.rightDelay),this.leftDelay._feedbackGain.disconnect(),this.rightDelay._feedbackGain.disconnect(),this.leftDelay._feedbackGain.connect(this.rightDelay.effectSend),this.rightDelay._feedbackGain.connect(this.leftDelay.effectSend),this.leftDelay.connect(this._merger.left),this.rightDelay.connect(this._merger.right),this._merger.connect(this.output),
this.setDelayTime(e.delayTime),this.setFeedback(e.feedback)},t.extend(t.PingPongDelay),t.PingPongDelay.defaults={delayTime:.25,feedback:.4},t.PingPongDelay.prototype.setDelayTime=function(t){this.leftDelay.setDelayTime(t),this.rightDelay.setDelayTime(2*t)},t.PingPongDelay.prototype.setFeedback=function(t){this.leftDelay.setFeedback(t),this.rightDelay.setFeedback(t)},t.PingPongDelay.prototype.setWet=function(t){this.leftDelay.setWet(t),this.rightDelay.setWet(t)},t.PingPongDelay.prototype.setDry=function(t){this.leftDelay.setDry(t),this.rightDelay.setDry(t)},t.PingPongDelay.prototype.set=function(t){this.isUndef(t.feedback)||this.setFeedback(t.feedback),this.isUndef(t.wet)||this.setWet(t.wet),this.isUndef(t.dry)||this.setDry(t.dry),this.isUndef(t.delayTime)||this.setDelayTime(t.delayTime)},t.PingPongDelay.prototype.dispose=function(){t.prototype.dispose.call(this),this.leftDelay.dispose(),this.rightDelay.dispose(),this._merger.dispose(),this.leftDelay=null,this.rightDelay=null,this._merger=null},t.PingPongDelay}),define("Tone/instrument/MonoSynth",["Tone/core/Tone","Tone/component/Envelope","Tone/source/Oscillator","Tone/signal/Signal","Tone/component/Filter","Tone/signal/Add","Tone/source/Source"],function(t){return t.MonoSynth=function(e){e=this.defaultArg(e,t.MonoSynth.defaults),this.output=this.context.createGain(),this.portamento=this.toSeconds(e.portamento),this.frequency=new t.Signal(440),this.detune=new t.Signal(0),this._unison=new t.Add(e.unison),this._osc0=new t.Oscillator(0,e.osc0Type),this._osc1=new t.Oscillator(0,e.osc1Type),this._filter=new t.Filter(e.filter),this.filterEnvelope=new t.Envelope(e.filterEnvelope),this.envelope=new t.Envelope(e.envelope),this.fan(this.frequency,this._osc0.frequency,this._osc1.frequency),this._osc0.connect(this._filter),this._osc1.connect(this._filter),this._filter.connect(this.output),this._osc0.start(),this._osc1.start(),this.filterEnvelope.connect(this._filter.frequency),this.envelope.connect(this.output.gain),this.detune.connect(this._osc0.detune),this.chain(this.detune,this._unison,this._osc1.detune)},t.extend(t.MonoSynth),t.MonoSynth.defaults={portamento:.05,osc0Type:"square",osc1Type:"sawtooth",unison:0,filter:{Q:6,frequency:4e3,type:"lowpass"},envelope:{attack:.005,decay:.1,sustain:.9,release:1},filterEnvelope:{attack:.06,decay:.2,sustain:.5,release:2,min:10,max:4e3}},t.MonoSynth.prototype.triggerAttack=function(t,e){if(this.envelope.triggerAttack(e),this.filterEnvelope.triggerExponentialAttack(e),this.portamento>0){var i=this.frequency.getValue();e=this.toSeconds(e),this.frequency.setValueAtTime(i,e),this.frequency.exponentialRampToValueAtTime(t,e+this.portamento)}else this.frequency.setValueAtTime(t,e)},t.MonoSynth.prototype.triggerRelease=function(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerExponentialRelease(t)},t.MonoSynth.prototype.setOscType=function(t,e){this.isUndef(e)?(this._osc0.setType(t),this._osc1.setType(t)):0===e?this._osc0.setType(t):this._osc1.setType(t)},t.MonoSynth.prototype.setUnison=function(t){this._unison.setValue(t)},t.MonoSynth.prototype.setPortamento=function(t){this.portamento=this.toSeconds(t)},t.MonoSynth.prototype.setVolume=t.Source.prototype.setVolume,t.MonoSynth.prototype.set=function(t){this.isUndef(t.unison)||this.setUnison(t.unison),this.isUndef(t.volume)||this.setVolume(t.volume),this.isUndef(t.portamento)||this.setPortamento(t.portamento),this.isUndef(t.oscType)||this.setOscType(t.oscType),this.isUndef(t.osc0Type)||this.setOscType(t.osc0Type,0),this.isUndef(t.osc1Type)||this.setOscType(t.osc1Type,1),this.isUndef(t.filterEnvelope)||this.filterEnvelope.set(t.filterEnvelope),this.isUndef(t.envelope)||this.envelope.set(t.envelope),this.isUndef(t.filter)||this._filter.set(t.filter)},t.MonoSynth.prototype.dispose=function(){t.prototype.dispose.call(this),this._osc0.dispose(),this._osc1.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.frequency.dispose(),this._filter.dispose(),this.detune.dispose(),this._unison.dispose(),this._osc0=null,this._osc1=null,this.frequency=null,this.filterEnvelope=null,this.envelope=null,this._filter=null,this.detune=null,this._unison=null},t.MonoSynth}),define("Tone/instrument/DuoSynth",["Tone/core/Tone","Tone/instrument/MonoSynth","Tone/component/LFO","Tone/signal/Signal","Tone/signal/Multiply"],function(t){return t.DuoSynth=function(e){e=this.defaultArg(e,t.DuoSynth.defaults),this.output=this.context.createGain(),this.voice0=new t.MonoSynth(e.voice0),this.voice1=new t.MonoSynth(e.voice1),this._vibrato=new t.LFO(e.vibratoRate,-50,50),this._vibrato.start(),this._vibratoGain=this.context.createGain(),this._vibratoGain.gain.value=e.vibratoAmount,this._vibratoDelay=this.toSeconds(e.vibratoDelay),this._vibratoAmount=e.vibratoAmount,this.portamento=this.toSeconds(e.portamento),this.frequency=new t.Signal(440),this._frequencyRatio=new t.Multiply(e.voiceRatio),this.fan(this.frequency,this.voice0.frequency,this._frequencyRatio),this._frequencyRatio.connect(this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this.fan(this._vibratoGain,this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output)},t.extend(t.DuoSynth),t.DuoSynth.defaults={vibratoAmount:.5,vibratoRate:5,vibratoDelay:1,portamento:.05,voiceRatio:1.5,voice0:{portamento:0,osc0type:"sine",osc1type:"sawtooth",unison:20,filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5}},voice1:{volume:-6,portamento:0,osc0type:"square",osc1type:"square",unison:10,filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5}}},t.DuoSynth.prototype.triggerAttack=function(t,e){if(this.voice0.envelope.triggerAttack(e),this.voice1.envelope.triggerAttack(e),this.voice0.filterEnvelope.triggerExponentialAttack(e),this.voice1.filterEnvelope.triggerExponentialAttack(e),e=this.toSeconds(e),this.portamento>0){var i=this.frequency.getValue();this.frequency.setValueAtTime(i,e),this.frequency.exponentialRampToValueAtTime(t,e+this.portamento)}else this.frequency.setValueAtTime(t,e);this._vibratoDelay>0&&this._vibratoAmount>0&&(this._vibratoGain.gain.setValueAtTime(0,e),this._vibratoGain.gain.setValueAtTime(0,e+this._vibratoDelay-.05),this._vibratoGain.gain.linearRampToValueAtTime(this._vibratoAmount,e+this._vibratoDelay))},t.DuoSynth.prototype.triggerRelease=function(t){this.voice0.triggerRelease(t),this.voice1.triggerRelease(t)},t.DuoSynth.prototype.setOscRatio=function(t){this._frequencyRatio.setValue(t)},t.DuoSynth.prototype.setPortamento=function(t){this.portamento=this.toSeconds(t)},t.DuoSynth.prototype.setVibratoDelay=function(t){this._vibratoDelay=this.toSeconds(t)},t.DuoSynth.prototype.setVibratoAmount=function(t){this._vibratoAmount=t,this._vibratoGain.gain.setValueAtTime(t,this.now())},t.DuoSynth.prototype.setVibratoRate=function(t){this._vibrato.setFrequency(t)},t.DuoSynth.prototype.set=function(t){this.isUndef(t.oscRatio)||this.setOscRatio(t.oscRatio),this.isUndef(t.vibratoRate)||this.setVibratoRate(t.vibratoRate),this.isUndef(t.vibratoAmount)||this.setVibratoAmount(t.vibratoAmount),this.isUndef(t.vibratoDelay)||this.setVibratoDelay(t.vibratoDelay),this.isUndef(t.portamento)||(this.portament=this.toSeconds(t.portamento)),this.isUndef(t.voice0)||this.voice0.set(t.voice0),this.isUndef(t.voice1)||this.voice1.set(t.voice1)},t.DuoSynth.dispose=function(){this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this._vibrato.dispose(),this._vibratoGain.disconnect(),this.voice0=null,this.voice1=null,this.frequency=null,this._vibrato=null,this._vibratoGain=null},t.DuoSynth}),define("Tone/source/Player",["Tone/core/Tone","Tone/source/Source"],function(t){return t.Player=function(e,i){t.Source.call(this),this._source=null,this._buffer=null,this.duration=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this._playbackRate=1,this.retrigger=!1,this.onended=function(){},e&&this.load(e,i)},t.extend(t.Player,t.Source),t.Player.prototype.load=function(t,e){if(this._buffer)e&&e(this);else{var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer";var n=this;i.onload=function(){n.context.decodeAudioData(i.response,function(t){n.setBuffer(t),e&&e(n)})},i.send()}},t.Player.prototype.setBuffer=function(t){this._buffer=t,this.duration=t.duration},t.Player.prototype.start=function(e,i,n){(this.state===t.Source.State.STOPPED||this.retrigger)&&this._buffer&&(this.state=t.Source.State.STARTED,i=this.defaultArg(i,0),n=this.defaultArg(n,this._buffer.duration-i),this._source=this.context.createBufferSource(),this._source.buffer=this._buffer,this._source.loop=this.loop,this._source.loopStart=this.loopStart,this._source.loopEnd=this.loopEnd,this._source.playbackRate.value=this._playbackRate,this._source.onended=this._onended.bind(this),this.chain(this._source,this.output),this._source.start(this.toSeconds(e),this.toSeconds(i),this.toSeconds(n)))},t.Player.prototype.stop=function(e){this.state===t.Source.State.STARTED&&this._buffer&&this._source&&(e||(this.state=t.Source.State.STOPPED),this._source.stop(this.toSeconds(e)))},t.Player.prototype.setPlaybackRate=function(t,e){this._playbackRate=t,this._source&&(e?this._source.playbackRate.exponentialRampToValueAtTime(t,this.toSeconds(e)):this._source.playbackRate.value=e)},t.Player.prototype._onended=function(){this.state=t.Source.State.STOPPED,this.onended()},t.Player.prototype.dispose=function(){t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer=null},t.Player}),define("Tone/instrument/Sampler",["Tone/core/Tone","Tone/source/Player","Tone/component/Envelope","Tone/component/Filter"],function(t){return t.Sampler=function(){var e=this.optionsObject(e,["url","load"],t.Sampler.defaults);this.output=this.context.createGain(),this.player=new t.Player(e.url,e.load),this.player.retrigger=!0,this.envelope=new t.Envelope(e.envelope),this.filterEnvelope=new t.Envelope(e.filterEnvelope),this.filter=new t.Filter(e.filter),this.chain(this.player,this.filter,this.output),this.envelope.connect(this.player.output),this.filterEnvelope.connect(this.filter.frequency)},t.extend(t.Sampler),t.Sampler.defaults={url:null,load:function(){},envelope:{attack:.001,decay:0,sustain:1,release:.1},filterEnvelope:{attack:.001,decay:.001,sustain:1,release:.5,min:0,max:2e4},filter:{type:"lowpass"}},t.Sampler.prototype.set=function(t){this.isUndef(t.filterEnvelope)||this.filterEnvelope.set(t.filterEnvelope),this.isUndef(t.envelope)||this.envelope.set(t.envelope),this.isUndef(t.filter)||this.filter.set(t.filter)},t.Sampler.prototype.triggerAttack=function(t){this.player.start(t),this.envelope.triggerAttack(t),this.filterEnvelope.triggerRelease(t)},t.Sampler.prototype.triggerRelease=function(t){this.filterEnvelope.triggerRelease(t),this.envelope.triggerRelease(t)},t.Sampler.prototype.dispose=function(){t.prototype.dispose.call(this),this.player.dispose(),this.filterEnvelope.dispose(),this.envelope.dispose(),this.filter.dispose(),this.player=null,this.filterEnvelope=null,this.envelope=null,this.filter=null},t.Sampler}),define("Tone/instrument/MultiSampler",["Tone/core/Tone","Tone/instrument/Sampler"],function(t){return t.MultiSampler=function(t,e){this.output=this.context.createGain(),this.samples={},this._createSamples(t,e)},t.extend(t.MultiSampler),t.MultiSampler.prototype._createSamples=function(e,i){var n={total:0,loaded:0};for(var s in e)"string"==typeof e[s]&&n.total++;var o=function(){n.loaded++,n.loaded===n.total&&i&&i()};for(var r in e){var a=e[r],c=new t.Sample(a,o);c.connect(this.output),this.samples[r]=c}},t.MultiSampler.prototype.triggerAttack=function(t,e){this.samples.hasOwnProperty(t)&&this.samples[t].triggerAttack(e)},t.MultiSampler.prototype.triggerRelease=function(t,e){this.samples.hasOwnProperty(t)&&this.samples[t].triggerRelease(e)},t.MultiSampler.prototype.set=function(t){for(var e in this.samples)this.samples[e].set(t)},t.MultiSampler.dispose=function(){t.prototype.dispose.call(this);for(var e in this.samples)this.samples[e].dispose(),this.samples[e]=null},t.MultiSampler}),define("Tone/instrument/PolySynth",["Tone/core/Tone","Tone/instrument/MonoSynth"],function(t){return t.PolySynth=function(){var e=this.optionsObject(arguments,["polyphony","voice","voiceOptions"],t.PolySynth.defaults);this.output=this.context.createGain(),this._voices=new Array(e.polyphony),this._freeVoices=[],this._activeVoices={};for(var i=0;i<e.polyphony;i++){var n=new e.voice(e.voiceOptions);this._voices[i]=n,n.connect(this.output)}this._freeVoices=this._voices.slice(0)},t.extend(t.PolySynth),t.PolySynth.defaults={polyphony:4,voice:t.MonoSynth,voiceOptions:{portamento:0}},t.PolySynth.prototype.triggerAttack=function(t,e){var i=JSON.stringify(t);if(this._activeVoices[i])this._activeVoices[i].triggerAttack(t,e);else if(this._freeVoices.length>0){var n=this._freeVoices.shift();n.triggerAttack(t,e),this._activeVoices[i]=n}},t.PolySynth.prototype.triggerRelease=function(t,e){var i=JSON.stringify(t),n=this._activeVoices[i];n&&(n.triggerRelease(e),this._freeVoices.push(n),this._activeVoices[i]=null)},t.PolySynth.prototype.set=function(t){for(var e=0;e<this._voices.length;e++)this._voices[e].set(t)},t.PolySynth.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=0;e<this._voices.length;e++)this._voices[e].dispose(),this._voices[e]=null;this._voices=null,this._activeVoices=null,this._freeVoices=null},t.PolySynth}),define("Tone/instrument/preset/DuoSynth.preset",["Tone/core/Tone","Tone/instrument/MonoSynth"],function(t){return t.MonoSynth.preset={PanFluteSteelDrum:{portamento:.05,oscType:"square",detune:20,filter:{Q:6,type:"lowpass"},envelope:{attack:.005,decay:.1,sustain:.9,release:1},filterEnvelope:{attack:.06,decay:.2,sustain:.5,release:2,min:10,max:4e3}},CasioPiano:{portamento:0,oscType:"sine",detune:0,filter:{Q:3,type:"lowpass"},envelope:{attack:.005,decay:.1,sustain:.9,release:.2},filterEnvelope:{attack:.06,decay:.2,sustain:1,release:2,min:10,max:8e3}}},t.MonoSynth.preset}),define("Tone/instrument/preset/MonoSynth.preset",["Tone/core/Tone","Tone/instrument/MonoSynth"],function(t){return t.MonoSynth.preset={PanFluteSteelDrum:{portamento:.05,osc0Type:"square",osc1Type:"square",unison:20,filter:{Q:6,type:"lowpass"},envelope:{attack:.005,decay:.1,sustain:.9,release:1},filterEnvelope:{attack:.06,decay:.2,sustain:.5,release:2,min:10,max:4e3}},CasioPiano:{portamento:0,oscType:"sine",unison:0,filter:{Q:3,type:"lowpass"},envelope:{attack:.005,decay:.1,sustain:.9,release:.2},filterEnvelope:{attack:.06,decay:.2,sustain:1,release:2,min:10,max:8e3}}},t.MonoSynth.preset}),define("Tone/signal/Max",["Tone/core/Tone","Tone/signal/GreaterThan","Tone/signal/Selector","Tone/signal/Signal"],function(t){return t.Max=function(e){t.call(this),this._maxSignal=new t.Signal(e),this._switch=new t.Selector(2),this._gt=new t.GreaterThan(e),this._maxSignal.connect(this._switch,0,0),this.input.connect(this._switch,0,1),this.input.connect(this._gt),this._gt.connect(this._switch.gate),this._switch.connect(this.output)},t.extend(t.Max),t.Max.prototype.setMax=function(t){this._maxSignal.setValue(t)},t.Max.prototype.connect=t.Signal.prototype.connect,t.Max.prototype.dispose=function(){this.input.disconnect(),this.output.disconnect(),this._maxSignal.dispose(),this._switch.dispose(),this._gt.dispose(),this.input=null,this.output=null,this._maxSignal=null,this._switch=null,this._gt=null},t.Max}),define("Tone/signal/Min",["Tone/core/Tone","Tone/signal/LessThan","Tone/signal/Selector","Tone/signal/Signal"],function(t){return t.Min=function(e){t.call(this),this._minSignal=new t.Signal(e),this._switch=new t.Selector(2),this._lt=new t.LessThan(e),this._minSignal.connect(this._switch,0,0),this.input.connect(this._switch,0,1),this.input.connect(this._lt),this._lt.connect(this._switch.gate),this._switch.connect(this.output)},t.extend(t.Min),t.Min.prototype.setMin=function(t){this._minSignal.setValue(t)},t.Min.prototype.connect=t.Signal.prototype.connect,t.Min.prototype.dispose=function(){this.input.disconnect(),this.output.disconnect(),this._minSignal.dispose(),this._switch.dispose(),this._lt.dispose(),this.input=null,this.output=null,this._minSignal=null,this._switch=null,this._lt=null},t.Min}),define("Tone/signal/Clip",["Tone/core/Tone","Tone/signal/Max","Tone/signal/Min","Tone/signal/Signal"],function(t){return t.Clip=function(e,i){if(t.call(this),e>i){var n=e;e=i,i=n}this._min=new t.Min(i),this._max=new t.Max(e),this.chain(this.input,this._min,this._max,this.output)},t.extend(t.Clip),t.Clip.prototype.setMin=function(t){this._min.setMin(t)},t.Clip.prototype.setMax=function(t){this._max.setMax(t)},t.Clip.prototype.connect=t.Signal.prototype.connect,t.Clip.prototype.dispose=function(){this._min.dispose(),this._max.dispose(),this.input.disconnect(),this.output.disconnect(),this._min=null,this._max=null,this.input=null,this.output=null},t.Clip}),define("Tone/signal/Route",["Tone/core/Tone","Tone/signal/Equal","Tone/signal/Signal"],function(t){t.Route=function(i){i=this.defaultArg(i,2),this.output=new Array(i),this.input=this.context.createGain(),this.gate=new t.Signal(0);for(var n=0;i>n;n++){var s=new e(n);this.output[n]=s,this.gate.connect(s.selecter),this.input.connect(s)}},t.extend(t.Route),t.Route.prototype.select=function(t,e){t=Math.floor(t),this.gate.setValueAtTime(t,this.toSeconds(e))},t.Route.prototype.connect=t.Signal.prototype.connect,t.Route.prototype.dispose=function(){this.input.disconnect(),this.gate.dispose();for(var t=0;t<this.output.length;t++)this.output[t].dispose(),this.output[t]=null;this.gate=null,this.input=null};var e=function(e){this.selecter=new t.Equal(e),this.gate=this.input=this.output=this.context.createGain(),this.selecter.connect(this.gate.gain)};return t.extend(e),e.prototype.dispose=function(){this.selecter.dispose(),this.gate.disconnect(),this.selecter=null,this.gate=null},t.Route}),define("Tone/signal/Switch",["Tone/core/Tone","Tone/signal/Signal","Tone/signal/Threshold"],function(t){return t.Switch=function(){t.call(this),this.gate=new t.Signal(0),this._thresh=new t.Threshold(.5),this.input.connect(this.output),this.chain(this.gate,this._thresh,this.output.gain),this.output.gain.value=0},t.extend(t.Switch),t.Switch.prototype.open=function(t){this.gate.setValueAtTime(1,this.toSeconds(t))},t.Switch.prototype.close=function(t){this.gate.setValueAtTime(0,this.toSeconds(t))},t.Switch.prototype.connect=t.Signal.prototype.connect,t.Switch.prototype.dispose=function(){t.prototype.dispose.call(this),this.gate.dispose(),this._thresh.dispose(),this.signal=null,this._thresh=null},t.Switch}),define("Tone/source/Microphone",["Tone/core/Tone","Tone/source/Source"],function(t){return t.Microphone=function(e){t.Source.call(this),this._mediaStream=null,this._stream=null,this.constraints={audio:!0};var i=this;MediaStreamTrack.getSources(function(t){e<t.length&&(i.constraints.audio={optional:[{sourceId:t[e].id}]})})},t.extend(t.Microphone,t.Source),t.Microphone.prototype.start=function(){this.state===t.Source.State.STOPPED&&(this.state=t.Source.State.STARTED,navigator.getUserMedia(this.constraints,this._onStream.bind(this),this._onStreamError.bind(this)))},t.Microphone.prototype.stop=function(){this._stream&&this.state===t.Source.State.STARTED&&(this.state=t.Source.State.STOPPED,this._stream.stop())},t.Microphone.prototype._onStream=function(t){this._stream=t,this._mediaStream=this.context.createMediaStreamSource(t),this._mediaStream.connect(this.output)},t.Microphone.prototype._onStreamError=function(t){console.error(t)},t.Microphone.prototype.dispose=function(){t.Source.prototype.dispose.call(this),this._stream.disconnect(),this._mediaStream.disconnect(),this._stream=null,this._mediaStream=null},navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,t.Microphone}),define("Tone/source/Noise",["Tone/core/Tone","Tone/source/Source"],function(t){t.Noise=function(e){t.Source.call(this),this._source=null,this._buffer=null,this.onended=function(){},this.setType(this.defaultArg(e,"white"))},t.extend(t.Noise,t.Source),t.Noise.prototype.setType=function(s,o){switch(s){case"white":this._buffer=n;break;case"pink":this._buffer=e;break;case"brown":this._buffer=i;break;default:this._buffer=n}this.state===t.Source.State.STARTED&&(o=this.toSeconds(o),this._source.onended=void 0,this._stop(o),this._start(o))},t.Noise.prototype._start=function(t){this._source=this.context.createBufferSource(),this._source.buffer=this._buffer,this._source.loop=!0,this.chain(this._source,this.output),this._source.start(this.toSeconds(t)),this._source.onended=this._onended.bind(this)},t.Noise.prototype.start=function(e){this.state===t.Source.State.STOPPED&&(this.state=t.Source.State.STARTED,this._start(e))},t.Noise.prototype._stop=function(t){this._source.stop(this.toSeconds(t))},t.Noise.prototype.stop=function(e){this.state===t.Source.State.STARTED&&this._buffer&&this._source&&(e||(this.state=t.Source.State.STOPPED),this._stop(e))},t.Noise.prototype._onended=function(){this.state=t.Source.State.STOPPED,this.onended()},t.Noise.prototype.dispose=function(){t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer=null};var e=null,i=null,n=null;return t._initAudioContext(function(t){var s=t.sampleRate,o=4*s;e=function(){for(var e=t.createBuffer(2,o,s),i=0;i<e.numberOfChannels;i++){var n,r,a,c,h,l,u,p=e.getChannelData(i);n=r=a=c=h=l=u=0;for(var f=0;o>f;f++){var d=2*Math.random()-1;n=.99886*n+.0555179*d,r=.99332*r+.0750759*d,a=.969*a+.153852*d,c=.8665*c+.3104856*d,h=.55*h+.5329522*d,l=-.7616*l-.016898*d,p[f]=n+r+a+c+h+l+u+.5362*d,p[f]*=.11,u=.115926*d}}return e}(),i=function(){for(var e=t.createBuffer(2,o,s),i=0;i<e.numberOfChannels;i++)for(var n=e.getChannelData(i),r=0,a=0;o>a;a++){var c=2*Math.random()-1;n[a]=(r+.02*c)/1.02,r=n[a],n[a]*=3.5}return e}(),n=function(){for(var e=t.createBuffer(2,o,s),i=0;i<e.numberOfChannels;i++)for(var n=e.getChannelData(i),r=0;o>r;r++)n[r]=2*Math.random()-1;return e}()}),t.Noise});