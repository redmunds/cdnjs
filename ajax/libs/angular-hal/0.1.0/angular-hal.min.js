angular.module("angular-hal",[]).service("halClient",["$http","$q","$window",function(r,n,t){function e(r,t,e){function f(r,n,t){Object.defineProperty(r,n,{configurable:!1,enumerable:!1,value:t})}function s(r){if(Array.isArray(r))return r.map(function(r){return s(r)});var t=r.$href("self");v[t]=n.when(r)}function h(r,n){var t=r.templated?new c.UriTemplate(r.href).stringify(n):r.href;return t}function l(r,e,i,u){var a;return Array.isArray(e)?n.all(e.map(function(n){if("GET"!==r)throw"method is not supported for arrays";return l(r,n,i,u)})):(a=h(e,i),"GET"===r?a in v?v[a]:v[a]=o(r,a,t,u):o(r,a,t,u))}function d(r,n){if(Array.isArray(r))return r.map(function(r){return d(r,n)});var t=h(r,n);t in v&&delete v[t]}var p={},v={};r=a(r,e).href,f(this,"$href",function(r,n){return r in p?h(p[r],n):null}),f(this,"$has",function(r){return r in p}),f(this,"$flush",function(r,n){var t=p[r];return d(t,n)}),f(this,"$get",function(r,n){var t=p[r];return l("GET",t,n)}),f(this,"$post",function(r,n,t){var e=p[r];return l("POST",e,n,t)}),f(this,"$put",function(r,n,t){var e=p[r];return l("PUT",e,n,t)}),f(this,"$patch",function(r,n,t){var e=p[r];return l("PATCH",e,n,t)}),f(this,"$del",function(r,n){var t=p[r];return l("DELETE",t,n)}),Object.keys(e).filter(function(r){return!~["_","$"].indexOf(r[0])}).forEach(function(r){Object.defineProperty(this,r,{configurable:!1,enumerable:!0,value:e[r]})},this),e._links&&Object.keys(e._links).forEach(function(n){var t=e._links[n];t=u(r,t),p[n]=t},this),e._embedded&&Object.keys(e._embedded).forEach(function(n){var u=e._embedded[n],o=a(r,u);p[n]=o;var f=i(r,t,u);s(f)},this)}function i(r,n,t){if(Array.isArray(t))return t.map(function(t){return i(r,n,t)});var u=new e(r,n,t);return u}function u(r,n){return Array.isArray(n)?n.map(function(n){return u(r,n)}):(n?("string"==typeof n&&(n={href:n}),n.href=f(r,n.href)):n={href:r},n)}function a(r,n){return Array.isArray(n)?n.map(function(n){return a(r,n)}):u(r,n&&n._links&&n._links.self)}function o(t,e,u,a){u||(u={});var o=r({method:t,url:u.transformUrl?u.transformUrl(e):e,headers:{Authorization:u.authorization,"Content-Type":"application/json",Accept:"application/hal+json,application/json"},data:a}).then(function(r){switch(Math.floor(r.status/100)){case 2:return r.data?i(e,u,r.data):r.headers("Content-Location")?r.headers("Content-Location"):null;default:return n.reject(r.status)}});return o}function f(r,n){for(var t="",e=/^((?:\w+\:)?)((?:\/\/)?)([^\/]*)((?:\/.*)?)$/,i=e.exec(r),u=e.exec(n),a=1;5>a;a++)t+=u[a]?u[a]:i[a];return t}var c=t.rfc6570;this.$get=function(r,n){return o("GET",r,n)},this.$post=function(r,n,t){return o("POST",r,n,t)},this.$put=function(r,n,t){return o("PUT",r,n,t)},this.$patch=function(r,n,t){return o("PATCH",r,n,t)},this.$del=function(r,n){return o("DELETE",r,n)}}]);