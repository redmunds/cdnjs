angular.module("angular-hal",[]).service("halClient",["$http","$q","$window",function(r,n,t){function e(r,t,e){function f(r,n,t){Object.defineProperty(r,n,{configurable:!1,enumerable:!1,value:t})}function s(r){if(Array.isArray(r))return r.map(function(r){return s(r)});var t=r.$href("self");p[t]=n.when(r)}function h(r,n){var t=r.templated?new c.UriTemplate(r.href).stringify(n):r.href;return t}function l(r,e,a,i){var u;return Array.isArray(e)?n.all(e.map(function(n){if("GET"!==r)throw"method is not supported for arrays";return l(r,n,a,i)})):(u=h(e,a),"GET"===r&&u in p?p[u]:o(r,u,t,i))}var d={},p={};r=u(r,e).href,f(this,"$href",function(r,n){return r in d?h(d[r],n):null}),f(this,"$has",function(r){return r in d}),f(this,"$get",function(r,n){var t=d[r];return l("GET",t,n)}),f(this,"$post",function(r,n,t){var e=d[r];return l("POST",e,n,t)}),f(this,"$put",function(r,n,t){var e=d[r];return l("PUT",e,n,t)}),f(this,"$patch",function(r,n,t){var e=d[r];return l("PATCH",e,n,t)}),f(this,"$del",function(r,n){var t=d[r];return l("DELETE",t,n)}),Object.keys(e).filter(function(r){return!~["_","$"].indexOf(r[0])}).forEach(function(r){Object.defineProperty(this,r,{configurable:!1,enumerable:!0,value:e[r]})},this),e._links&&Object.keys(e._links).forEach(function(n){var t=e._links[n];t=i(r,t),d[n]=t},this),e._embedded&&Object.keys(e._embedded).forEach(function(n){var i=e._embedded[n],o=u(r,i);d[n]=o;var f=a(r,t,i);s(f)},this)}function a(r,n,t){if(Array.isArray(t))return t.map(function(t){return a(r,n,t)});var i=new e(r,n,t);return i}function i(r,n){return Array.isArray(n)?n.map(function(n){return i(r,n)}):(n?("string"==typeof n&&(n={href:n}),n.href=f(r,n.href)):n={href:r},n)}function u(r,n){return Array.isArray(n)?n.map(function(n){return u(r,n)}):i(r,n&&n._links&&n._links.self)}function o(t,e,i,u){i||(i={}),i.headers||(i.headers={}),i.headers["Content-Type"]||(i.headers["Content-Type"]="application/json"),i.headers.Accept||(i.headers.Accept="application/hal+json,application/json");var o=r({method:t,url:i.transformUrl?i.transformUrl(e):e,headers:i.headers,data:u}).then(function(r){switch(Math.floor(r.status/100)){case 2:return r.data?a(e,i,r.data):r.headers("Content-Location")?r.headers("Content-Location"):r.headers("Location")?r.headers("Location"):null;default:return n.reject(r.status)}});return o}function f(r,n){for(var t="",e=/^((?:\w+\:)?)((?:\/\/)?)([^\/]*)((?:\/.*)?)$/,a=e.exec(r),i=e.exec(n),u=1;5>u;u++)t+=i[u]?i[u]:a[u];return t}var c=t.rfc6570;this.$get=function(r,n){return o("GET",r,n)},this.$post=function(r,n,t){return o("POST",r,n,t)},this.$put=function(r,n,t){return o("PUT",r,n,t)},this.$patch=function(r,n,t){return o("PATCH",r,n,t)},this.$del=function(r,n){return o("DELETE",r,n)}}]);