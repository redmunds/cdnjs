angular.module("angular-hal",[]).service("halClient",["$http","$q","$window",function(r,t,n){function e(r,n,e){function o(r,t,n){Object.defineProperty(r,t,{configurable:!1,enumerable:!1,value:n})}function c(r){if(Array.isArray(r))return r.map(function(r){return c(r)});var n=r.$href("self");v[n]=t.when(r)}function s(r,t){var n=r.templated?new f.UriTemplate(r.href).stringify(t):r.href;return n}function h(r,e,a,i){var o;return Array.isArray(e)?t.all(e.map(function(t){if("GET"!==r)throw"method is not supported for arrays";return h(r,t,a,i)})):(o=s(e,a),"GET"===r&&o in v?v[o]:u(r,o,n,i))}function l(r,t){return Array.isArray(t)?t.map(function(t){return l(r,t)}):i(r,t&&t[d]&&t[d].self)}var d=n.linksAttribute||"_links",p=n.embeddedAttribute||"_embedded",y={},v={};r=l(r,e).href,o(this,"$href",function(r,t){return r in y?s(y[r],t):null}),o(this,"$has",function(r){return r in y}),o(this,"$get",function(r,t){var n=y[r];return h("GET",n,t)}),o(this,"$post",function(r,t,n){var e=y[r];return h("POST",e,t,n)}),o(this,"$put",function(r,t,n){var e=y[r];return h("PUT",e,t,n)}),o(this,"$patch",function(r,t,n){var e=y[r];return h("PATCH",e,t,n)}),o(this,"$del",function(r,t){var n=y[r];return h("DELETE",n,t)}),Object.keys(e).filter(function(r){return r!==d&&r!==p&&!~["_","$"].indexOf(r[0])}).forEach(function(r){Object.defineProperty(this,r,{configurable:!1,enumerable:!0,value:e[r]})},this),e[d]&&Object.keys(e[d]).forEach(function(t){var n=e[d][t];n=i(r,n),y[t]=n},this),e[p]&&Object.keys(e[p]).forEach(function(t){var i=e[p][t],u=l(r,i);y[t]=u;var o=a(r,n,i);c(o)},this)}function a(r,t,n){if(Array.isArray(n))return n.map(function(n){return a(r,t,n)});var i=new e(r,t,n);return i}function i(r,t){return Array.isArray(t)?t.map(function(t){return i(r,t)}):(t?("string"==typeof t&&(t={href:t}),t.href=o(r,t.href)):t={href:r},t)}function u(n,e,i,u){i||(i={}),i.headers||(i.headers={}),i.headers["Content-Type"]||(i.headers["Content-Type"]="application/json"),i.headers.Accept||(i.headers.Accept="application/hal+json,application/json");var o=r({method:n,url:i.transformUrl?i.transformUrl(e):e,headers:i.headers,data:u}).then(function(r){switch(Math.floor(r.status/100)){case 2:return r.data?a(e,i,r.data):r.headers("Content-Location")?r.headers("Content-Location"):r.headers("Location")?r.headers("Location"):null;default:return t.reject(r.status)}});return o}function o(r,t){for(var n="",e=/^((?:\w+\:)?)((?:\/\/)?)([^\/]*)((?:\/.*)?)$/,a=e.exec(r),i=e.exec(t),u=1;5>u;u++)n+=i[u]?i[u]:a[u];return n}var f=n.rfc6570;this.$get=function(r,t){return u("GET",r,t)},this.$post=function(r,t,n){return u("POST",r,t,n)},this.$put=function(r,t,n){return u("PUT",r,t,n)},this.$patch=function(r,t,n){return u("PATCH",r,t,n)},this.$del=function(r,t){return u("DELETE",r,t)}}]);