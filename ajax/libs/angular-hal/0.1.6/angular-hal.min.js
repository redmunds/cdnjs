angular.module("angular-hal",[]).service("halClient",["$http","$q","$window",function(r,t,n){function e(r,n,e,o){function c(r,t,n){Object.defineProperty(r,t,{configurable:!1,enumerable:!1,value:n})}function s(r){if(Array.isArray(r))return r.map(function(r){return s(r)});var n=r.$href("self");A[n]=t.when(r)}function h(r,t){var n=r.templated?new f.UriTemplate(r.href).stringify(t):r.href;return n}function l(r,e,a,i,o){var f;if(Array.isArray(e))return t.all(e.map(function(t){if("GET"!==r)throw"method is not supported for arrays";return l(r,t,a,i)}));f=h(e,a);var c=angular.extend({},n,o);return"GET"===r&&f in A?A[f]:u(r,f,c,i)}function d(r,t){return Array.isArray(t)?t.map(function(t){return d(r,t)}):i(r,t&&t[p]&&t[p].self)}var p=n.linksAttribute||"_links",v=n.embeddedAttribute||"_embedded",y=n.ignoreAttributePrefixes||["_","$"],$={},A={};r=d(r,e).href,c(this,"$href",function(r,t){return r in $?h($[r],t):null}),c(this,"$has",function(r){return r in $}),c(this,"$get",function(r,t,n){var e=$[r];return l("GET",e,t,n)}),c(this,"$post",function(r,t,n,e){var a=$[r];return l("POST",a,t,n,e)}),c(this,"$put",function(r,t,n,e){var a=$[r];return l("PUT",a,t,n,e)}),c(this,"$patch",function(r,t,n,e){var a=$[r];return l("PATCH",a,t,n,e)}),c(this,"$del",function(r,t,n){var e=$[r];return l("DELETE",e,t,n)}),c(this,"$response",function(){return o}),Object.keys(e).filter(function(r){return r!==p&&r!==v&&!~y.indexOf(r[0])}).forEach(function(r){Object.defineProperty(this,r,{configurable:!1,enumerable:!0,value:e[r],writable:!0})},this),e[p]&&Object.keys(e[p]).forEach(function(t){var n=e[p][t];n=i(r,n),$[t]=n},this),e[v]&&Object.keys(e[v]).forEach(function(t){var i=e[v][t],u=d(r,i);$[t]=u;var f=a(r,n,i,o);s(f)},this)}function a(r,t,n,i){if(Array.isArray(n))return n.map(function(n){return a(r,t,n,i)});var u=new e(r,t,n,i);return u}function i(r,t){return Array.isArray(t)?t.map(function(t){return i(r,t)}):(t?("string"==typeof t&&(t={href:t}),t.href=o(r,t.href)):t={href:r},t)}function u(n,e,i,u){i||(i={}),i.headers||(i.headers={}),i.headers["Content-Type"]||(i.headers["Content-Type"]="application/json"),i.headers.Accept||(i.headers.Accept="application/hal+json,application/json");var o={method:n,url:i.transformUrl?i.transformUrl(e):e,headers:i.headers,data:u};i.httpConfig&&(o=angular.extend(o,i.httpConfig));var f=r(o).then(function(r){switch(Math.floor(r.status/100)){case 2:return r.data&&r.data?a(e,i,r.data,r):r.headers("Content-Location")?r.headers("Content-Location"):r.headers("Location")?r.headers("Location"):null;default:return t.reject(r.status)}});return f}function o(r,t){for(var n="",e=/^((?:\w+\:)?)((?:\/\/)?)([^\/]*)((?:\/.*)?)$/,a=e.exec(r),i=e.exec(t),u=1;5>u;u++)n+=i[u]?i[u]:a[u];return n}var f=n.rfc6570;this.$get=function(r,t){return u("GET",r,t)},this.$post=function(r,t,n){return u("POST",r,t,n)},this.$put=function(r,t,n){return u("PUT",r,t,n)},this.$patch=function(r,t,n){return u("PATCH",r,t,n)},this.$del=function(r,t){return u("DELETE",r,t)}}]);