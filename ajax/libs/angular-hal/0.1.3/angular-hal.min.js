angular.module("angular-hal",[]).service("halClient",["$http","$q","$window",function(r,n,t){function e(r,t,e){function f(r,n,t){Object.defineProperty(r,n,{configurable:!1,enumerable:!1,value:t})}function s(r){if(Array.isArray(r))return r.map(function(r){return s(r)});var t=r.$href("self");p[t]=n.when(r)}function h(r,n){var t=r.templated?new c.UriTemplate(r.href).stringify(n):r.href;return t}function l(r,e,i,a){var u;return Array.isArray(e)?n.all(e.map(function(n){if("GET"!==r)throw"method is not supported for arrays";return l(r,n,i,a)})):(u=h(e,i),"GET"===r&&u in p?p[u]:o(r,u,t,a))}var d={},p={};r=u(r,e).href,f(this,"$href",function(r,n){return r in d?h(d[r],n):null}),f(this,"$has",function(r){return r in d}),f(this,"$get",function(r,n){var t=d[r];return l("GET",t,n)}),f(this,"$post",function(r,n,t){var e=d[r];return l("POST",e,n,t)}),f(this,"$put",function(r,n,t){var e=d[r];return l("PUT",e,n,t)}),f(this,"$patch",function(r,n,t){var e=d[r];return l("PATCH",e,n,t)}),f(this,"$del",function(r,n){var t=d[r];return l("DELETE",t,n)}),Object.keys(e).filter(function(r){return!~["_","$"].indexOf(r[0])}).forEach(function(r){Object.defineProperty(this,r,{configurable:!1,enumerable:!0,value:e[r]})},this),e._links&&Object.keys(e._links).forEach(function(n){var t=e._links[n];t=a(r,t),d[n]=t},this),e._embedded&&Object.keys(e._embedded).forEach(function(n){var a=e._embedded[n],o=u(r,a);d[n]=o;var f=i(r,t,a);s(f)},this)}function i(r,n,t){if(Array.isArray(t))return t.map(function(t){return i(r,n,t)});var a=new e(r,n,t);return a}function a(r,n){return Array.isArray(n)?n.map(function(n){return a(r,n)}):(n?("string"==typeof n&&(n={href:n}),n.href=f(r,n.href)):n={href:r},n)}function u(r,n){return Array.isArray(n)?n.map(function(n){return u(r,n)}):a(r,n&&n._links&&n._links.self)}function o(t,e,a,u){a||(a={}),a.headers||(a.headers={}),a.headers["Content-Type"]||(a.headers["Content-Type"]="application/json"),a.headers.Accept||(a.headers.Accept="application/hal+json,application/json");var o=r({method:t,url:a.transformUrl?a.transformUrl(e):e,headers:a.headers,data:u}).then(function(r){switch(Math.floor(r.status/100)){case 2:return r.data?i(e,a,r.data):r.headers("Content-Location")?r.headers("Content-Location"):null;default:return n.reject(r.status)}});return o}function f(r,n){for(var t="",e=/^((?:\w+\:)?)((?:\/\/)?)([^\/]*)((?:\/.*)?)$/,i=e.exec(r),a=e.exec(n),u=1;5>u;u++)t+=a[u]?a[u]:i[u];return t}var c=t.rfc6570;this.$get=function(r,n){return o("GET",r,n)},this.$post=function(r,n,t){return o("POST",r,n,t)},this.$put=function(r,n,t){return o("PUT",r,n,t)},this.$patch=function(r,n,t){return o("PATCH",r,n,t)},this.$del=function(r,n){return o("DELETE",r,n)}}]);