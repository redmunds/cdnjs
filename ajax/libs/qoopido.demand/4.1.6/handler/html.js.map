{"version":3,"sources":["handler/html.js"],"names":["definition","abstractHandler","parseHtml","source","node","fragment","document","createDocumentFragment","container","innerHTML","firstElementChild","appendChild","HandlerHtml","regexMatchType","createElement","prototype","validate","type","test","onPreRequest","dependency","url","slice","process","provide","extends"],"mappings":";CAAC,WACA,YAEA,SAASA,GAAWC,GAInB,QAASC,GAAUC,GAClB,GACCC,GADGC,EAAWC,SAASC,wBAKxB,KAFAC,EAAUC,UAAYN,EAEhBC,EAAOI,EAAUE,mBACtBL,EAASM,YAAYP,EAGtB,OAAOC,GAGR,QAASO,MAhBT,GAAIC,GAAiB,cACpBL,EAAiBF,SAASQ,cAAc,OA+BzC,OAdAF,GAAYG,WACXC,SAAU,SAASC,GAClB,MAAOJ,GAAeK,KAAKD,IAE5BE,aAAc,SAASC,GACtB,GAAIC,GAAOD,EAAWC,GAEtBD,GAAWC,IAAwB,UAAlBA,EAAIC,OAAM,GAAkBD,EAAM,QAAUA,GAE9DE,QAAS,SAASH,GACjBI,QAAQ,WAAa,MAAOtB,GAAUkB,EAAWjB,YAI5C,IAAKS,EAAYa,QAAQxB,IAGjCuB,SAAU,4BAA8BxB","file":"html.js","sourcesContent":["(function() {\n\t'use strict';\n\n\tfunction definition(abstractHandler) {\n\t\tvar regexMatchType = /^text\\/html/,\n\t\t\tcontainer      = document.createElement('body');\n\n\t\tfunction parseHtml(source) {\n\t\t\tvar fragment = document.createDocumentFragment(),\n\t\t\t\tnode;\n\n\t\t\tcontainer.innerHTML = source;\n\n\t\t\twhile(node = container.firstElementChild) {\n\t\t\t\tfragment.appendChild(node);\n\t\t\t}\n\n\t\t\treturn fragment;\n\t\t}\n\n\t\tfunction HandlerHtml() {}\n\n\t\tHandlerHtml.prototype = {\n\t\t\tvalidate: function(type) {\n\t\t\t\treturn regexMatchType.test(type);\n\t\t\t},\n\t\t\tonPreRequest: function(dependency) {\n\t\t\t\tvar url  = dependency.url;\n\n\t\t\t\tdependency.url = url.slice(-5) !== '.html' ? url + '.html' : url;\n\t\t\t},\n\t\t\tprocess: function(dependency) {\n\t\t\t\tprovide(function() { return parseHtml(dependency.source); });\n\t\t\t}\n\t\t};\n\n\t\treturn new (HandlerHtml.extends(abstractHandler));\n\t}\n\n\tprovide([ '/demand/abstract/handler' ], definition);\n}());"]}