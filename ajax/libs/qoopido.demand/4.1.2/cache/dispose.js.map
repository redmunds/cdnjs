{"version":3,"sources":["cache/dispose.js"],"names":["localStorage","definition","functionIterate","filterStates","property","state","match","regexMatchState","JSON","parse","getItem","PREFIX","SUFFIX","id","this","push","compareAccess","a","b","access","RegExp","demand","clear","path","bytes","states","sort","length","shift","size","provide"],"mappings":";CAAC,SAASA,GACT,YAEA,SAASC,GAAWC,GAkBnB,QAASC,GAAaC,GACrB,GACCC,GADGC,EAAQF,EAASE,MAAMC,EAGxBD,KACFD,EAAWG,KAAKC,MAAMT,EAAaU,QAAQ,IAAMC,EAAS,KAAOL,EAAM,GAAK,KAAOM,EAAS,MAC5FP,EAAMQ,GAAKP,EAAM,GAEjBQ,KAAKC,KAAKV,IAIZ,QAASW,GAAcC,EAAGC,GACzB,MAAGD,GAAEE,OAASD,EAAEC,QACR,EAGLF,EAAEE,OAASD,EAAEC,OACR,EAGD,EAtCR,GAAIR,GAAkB,SACrBC,EAAkB,QAClBL,EAAkB,GAAIa,QAAO,OAAST,EAAS,oBAAsBC,EAAS,OAuC/E,OArCAV,GAAgBF,EAAc,SAASI,GACtC,GACCC,GADGC,EAAQF,EAASE,MAAMC,EAGxBD,KACFD,EAAQG,KAAKC,MAAMT,EAAaU,QAAQ,IAAMC,EAAS,KAAOL,EAAM,GAAK,KAAOM,EAAS,MAErFP,EAAMc,QACTE,OAAOC,MAAMC,KAAKjB,EAAM,OA6BpB,SAAsBkB,GAC5B,GACCnB,GADGoB,IAOJ,KAJAvB,EAAgBF,EAAcG,EAAcsB,GAE5CA,EAAOC,KAAKV,GAENQ,EAAQ,GAAKC,EAAOE,QACzBtB,EAASoB,EAAOG,QAChBJ,GAASnB,EAAMwB,KAEfR,OAAOC,MAAMC,KAAKlB,EAAMQ,KAK3BiB,SAAU,4BAA8B7B,IACvCD","file":"dispose.js","sourcesContent":["(function(localStorage) {\n\t'use strict';\n\n\tfunction definition(functionIterate) {\n\t\tvar PREFIX          = 'demand',\n\t\t\tSUFFIX          = 'state',\n\t\t\tregexMatchState = new RegExp('^\\\\[' + PREFIX + '\\\\]\\\\[(.+?)\\\\]\\\\[' + SUFFIX + '\\\\]$');\n\n\t\tfunctionIterate(localStorage, function(property) {\n\t\t\tvar match = property.match(regexMatchState),\n\t\t\t\tstate;\n\n\t\t\tif(match) {\n\t\t\t\tstate = JSON.parse(localStorage.getItem('[' + PREFIX + '][' + match[1] + '][' + SUFFIX + ']'));\n\n\t\t\t\tif(!state.access) {\n\t\t\t\t\tdemand.clear.path(match[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfunction filterStates(property) {\n\t\t\tvar match = property.match(regexMatchState),\n\t\t\t\tstate;\n\n\t\t\tif(match) {\n\t\t\t\tstate    = JSON.parse(localStorage.getItem('[' + PREFIX + '][' + match[1] + '][' + SUFFIX + ']'));\n\t\t\t\tstate.id = match[1];\n\n\t\t\t\tthis.push(state);\n\t\t\t}\n\t\t}\n\n\t\tfunction compareAccess(a, b) {\n\t\t\tif(a.access < b.access) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\tif(a.access > b.access) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn function cacheDispose(bytes) {\n\t\t\tvar states = [],\n\t\t\t\tstate;\n\n\t\t\tfunctionIterate(localStorage, filterStates, states);\n\n\t\t\tstates.sort(compareAccess);\n\n\t\t\twhile(bytes > 0 && states.length) {\n\t\t\t\tstate  = states.shift();\n\t\t\t\tbytes -= state.size;\n\n\t\t\t\tdemand.clear.path(state.id);\n\t\t\t}\n\t\t};\n\t}\n\n\tprovide([ '/demand/function/iterate' ], definition);\n}(localStorage));"]}