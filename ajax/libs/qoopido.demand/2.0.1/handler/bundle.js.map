{"version":3,"sources":["bundle.js","handler/bundle.js"],"names":["definition","Reason","handlerModule","queue","settings","matchType","onPostRequest","onPreProcess","self","this","deferred","modules","path","demand","mock","then","apply","arguments","process","call","resolve","reject","provide"],"mappings":"AAAA;AACA,CCWE,WACD,YAEA,SAASA,GAAWC,EAAQC,EAAeC,EAAOC,GACjD,OACCC,UAAeH,EAAcG,UAC7BC,cAAeJ,EAAcI,cAC7BC,aAAc,WACb,GAAIC,GAAWC,KACdC,EAAWF,EAAKE,SAChBC,EAAWP,EAASI,EAAKI,KAE1BC,QACEC,KAAKH,GACLI,KACA,WACCZ,EAAMa,MAAM,KAAMC,WAClBf,EAAcgB,QAAQC,KAAKX,GAE3BK,OACEG,MAAM,KAAML,GACZI,KACAL,EAASU,QACT,WACCV,EAASW,OAAO,GAAIpB,GAAO,kBAAmBO,EAAKI,KAAMK,eAI7D,WACCP,EAASW,OAAO,GAAIpB,GAAO,gBAAiB,KAAMgB,gBAOxDK,SAAU,iBAAkB,yBAA0B,gBAAiB,YAActB","file":"handler/bundle.js","sourcesContent":[null,"/**\n * Qoopido.demand handler/bundle\n *\n * Copyright (c) 2015 Dirk Lueth\n *\n * Dual licensed under the MIT and GPL licenses.\n *  - http://www.opensource.org/licenses/mit-license.php\n *  - http://www.gnu.org/copyleft/gpl.html\n *\n * @author Dirk Lueth <info@qoopido.com>\n */\n\n;(function() {\n\t'use strict';\n\n\tfunction definition(Reason, handlerModule, queue, settings) {\n\t\treturn {\n\t\t\tmatchType:     handlerModule.matchType,\n\t\t\tonPostRequest: handlerModule.onPostRequest,\n\t\t\tonPreProcess: function() {\n\t\t\t\tvar self     = this,\n\t\t\t\t\tdeferred = self.deferred,\n\t\t\t\t\tmodules  = settings[self.path];\n\n\t\t\t\tdemand\n\t\t\t\t\t.mock(modules)\n\t\t\t\t\t.then(\n\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\tqueue.apply(null, arguments);\n\t\t\t\t\t\t\thandlerModule.process.call(self);\n\n\t\t\t\t\t\t\tdemand\n\t\t\t\t\t\t\t\t.apply(null, modules)\n\t\t\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\t\t\tdeferred.resolve,\n\t\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t\tdeferred.reject(new Reason('error resolving', self.path, arguments));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\tdeferred.reject(new Reason('error mocking', null, arguments));\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t}\n\t\t};\n\t}\n\n\tprovide([ '/demand/reason', '/demand/handler/module', '/demand/queue', 'settings' ], definition);\n}());"],"sourceRoot":"/source/"}