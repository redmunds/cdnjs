{"version":3,"sources":["plugin/lzstring.js"],"names":["definition","path","iterate","isObject","isTypeOf","onPostConfigure","options","pattern","length","key","value","push","weight","state","enabled","compressUTF16","uncompressed","bitsPerChar","subprocess","contextDataPosition","contextData","getCharFromInt","contextDataVal","process","objectPrototypeHasOwnProperty","call","contextDictionaryToCreate","contextW","charCodeAt","i","contextNumBits","contextEnlargeIn","Math","pow","contextDictionary","contextC","contextWc","contextDictSize","ii","charAt","String","join","decompressUTF16","compressed","resetValue","maxpower","bits","power","resb","data","val","position","getNextValue","index","next","w","c","dictionary","enlargeIn","dictSize","numBits","entry","result","mathPow22","mathPow28","stringFormCharCode","mathPow216","a","compress","input","decompress","isEnabled","pointer","match","indexOf","fromCharCode","Object","prototype","hasOwnProperty","demand","on","loader","source","deferred","pledge","cache","provide"],"mappings":"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","file":"lzstring.js","sourcesContent":["/**\n * Qoopido.demand plugin/lzstring\n *\n * Based on lz-string:\n *   Repo:    https://github.com/pieroxy/lz-string\n *   License: https://github.com/pieroxy/lz-string/blob/master/LICENSE.txt\n *\n * Copyright (c) 2016 Dirk Lueth\n *\n * Dual licensed under the MIT and GPL licenses.\n *  - http://www.opensource.org/licenses/mit-license.php\n *  - http://www.gnu.org/copyleft/gpl.html\n *\n * @author Dirk Lueth <info@qoopido.com>\n */\n\n(function() {\n\t'use strict';\n\n\tfunction definition(path, iterate, isObject, isTypeOf) {\n\t\tvar stringFormCharCode            = String.fromCharCode,\n\t\t\tobjectPrototypeHasOwnProperty = Object.prototype.hasOwnProperty,\n\t\t\tmathPow22                     = Math.pow(2, 2),\n\t\t\tmathPow28                     = Math.pow(2, 8),\n\t\t\tmathPow216                    = Math.pow(2, 16),\n\t\t\tpattern                       = [ { pattern: path, weight: path.length, state: false }],\n\t\t\tenabled;\n\t\t\n\t\tfunction onPostConfigure(options) {\n\t\t\tif(isObject(options)) {\n\t\t\t\tpattern.length = 0;\n\t\t\t\t\n\t\t\t\titerate(options, function(key, value) {\n\t\t\t\t\tpattern.push({ pattern: key, weight: key.length, state: value });\n\t\t\t\t});\n\t\t\t} else if(isTypeOf(options, 'boolean')) {\n\t\t\t\tenabled = options;\n\t\t\t}\n\t\t}\n\t\t\n\t\tdemand.on('postConfigure:' + path, onPostConfigure);\n\n\t\tfunction compressUTF16(uncompressed, bitsPerChar) {\n\t\t\tvar contextDictionary         = {},\n\t\t\t\tcontextDictionaryToCreate = {},\n\t\t\t\tcontextC                  = '',\n\t\t\t\tcontextWc                 = '',\n\t\t\t\tcontextW                  = '',\n\t\t\t\tcontextEnlargeIn          = 2,\n\t\t\t\tcontextDictSize           = 3,\n\t\t\t\tcontextNumBits            = 2,\n\t\t\t\tcontextData               = [],\n\t\t\t\tcontextDataVal            = 0,\n\t\t\t\tcontextDataPosition       = 0,\n\t\t\t\tii = 0, i, value;\n\n\t\t\tbitsPerChar -= 1;\n\n\t\t\tfunction subprocess() {\n\t\t\t\tif(contextDataPosition === bitsPerChar) {\n\t\t\t\t\tcontextData.push(getCharFromInt(contextDataVal));\n\n\t\t\t\t\tcontextDataPosition = 0;\n\t\t\t\t\tcontextDataVal      = 0;\n\t\t\t\t} else {\n\t\t\t\t\tcontextDataPosition++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction process() {\n\t\t\t\tif(objectPrototypeHasOwnProperty.call(contextDictionaryToCreate, contextW)) {\n\t\t\t\t\tif(contextW.charCodeAt(0) < 256) {\n\t\t\t\t\t\tfor(i = 0; i < contextNumBits; i++) {\n\t\t\t\t\t\t\tcontextDataVal = (contextDataVal << 1);\n\n\t\t\t\t\t\t\tsubprocess();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvalue = contextW.charCodeAt(0);\n\n\t\t\t\t\t\tfor(i = 0; i < 8; i++) {\n\t\t\t\t\t\t\tcontextDataVal = (contextDataVal << 1) | (value & 1);\n\n\t\t\t\t\t\t\tsubprocess();\n\n\t\t\t\t\t\t\tvalue = value >> 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = 1;\n\n\t\t\t\t\t\tfor(i = 0; i < contextNumBits; i++) {\n\t\t\t\t\t\t\tcontextDataVal = (contextDataVal << 1) | value;\n\n\t\t\t\t\t\t\tsubprocess();\n\n\t\t\t\t\t\t\tvalue = 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvalue = contextW.charCodeAt(0);\n\n\t\t\t\t\t\tfor(i = 0; i < 16; i++) {\n\t\t\t\t\t\t\tcontextDataVal = (contextDataVal << 1) | (value & 1);\n\n\t\t\t\t\t\t\tsubprocess();\n\n\t\t\t\t\t\t\tvalue = value >> 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcontextEnlargeIn--;\n\n\t\t\t\t\tif(contextEnlargeIn === 0) {\n\t\t\t\t\t\tcontextEnlargeIn = Math.pow(2, contextNumBits);\n\n\t\t\t\t\t\tcontextNumBits++;\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete contextDictionaryToCreate[contextW];\n\t\t\t\t} else {\n\t\t\t\t\tvalue = contextDictionary[contextW];\n\n\t\t\t\t\tfor(i = 0; i < contextNumBits; i++) {\n\t\t\t\t\t\tcontextDataVal = (contextDataVal << 1) | (value & 1);\n\n\t\t\t\t\t\tsubprocess();\n\n\t\t\t\t\t\tvalue = value >> 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcontextEnlargeIn--;\n\t\t\t}\n\n\t\t\tfor(; uncompressed[ii]; ii++) {\n\t\t\t\tcontextC = uncompressed.charAt(ii);\n\n\t\t\t\tif(!objectPrototypeHasOwnProperty.call(contextDictionary, contextC)) {\n\t\t\t\t\tcontextDictionary[contextC]         = contextDictSize++;\n\t\t\t\t\tcontextDictionaryToCreate[contextC] = true;\n\t\t\t\t}\n\n\t\t\t\tcontextWc = contextW + contextC;\n\n\t\t\t\tif(objectPrototypeHasOwnProperty.call(contextDictionary, contextWc)) {\n\t\t\t\t\tcontextW = contextWc;\n\t\t\t\t} else {\n\t\t\t\t\tprocess();\n\n\t\t\t\t\tif(contextEnlargeIn === 0) {\n\t\t\t\t\t\tcontextEnlargeIn = Math.pow(2, contextNumBits);\n\n\t\t\t\t\t\tcontextNumBits++;\n\t\t\t\t\t}\n\n\t\t\t\t\tcontextDictionary[contextWc] = contextDictSize++;\n\t\t\t\t\tcontextW                      = String(contextC);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (contextW !== '') {\n\t\t\t\tprocess();\n\n\t\t\t\tif(contextEnlargeIn === 0) {\n\t\t\t\t\tcontextNumBits++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvalue = 2;\n\n\t\t\tfor(i = 0 ; i < contextNumBits ; i++) {\n\t\t\t\tcontextDataVal = (contextDataVal << 1) | (value&1);\n\n\t\t\t\tsubprocess();\n\n\t\t\t\tvalue = value >> 1;\n\t\t\t}\n\n\t\t\twhile(true) { // eslint-disable-line no-constant-condition\n\t\t\t\tcontextDataVal = (contextDataVal << 1);\n\n\t\t\t\tif(contextDataPosition === bitsPerChar) {\n\t\t\t\t\tcontextData.push(getCharFromInt(contextDataVal));\n\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tcontextDataPosition++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn contextData.join('');\n\t\t}\n\n\t\tfunction decompressUTF16(compressed, length, resetValue) {\n\t\t\tvar dictionary = [],\n\t\t\t\tenlargeIn  = 4,\n\t\t\t\tdictSize   = 4,\n\t\t\t\tnumBits    = 3,\n\t\t\t\tentry      = '',\n\t\t\t\tresult     = [],\n\t\t\t\tdata       = { val: getNextValue(compressed, 0), position: resetValue, index: 1 },\n\t\t\t\tbits       = 0,\n\t\t\t\tmaxpower   = mathPow22,\n\t\t\t\tpower      = 1,\n\t\t\t\tnext, i, w, resb, c;\n\n\t\t\tfunction process(maxpower) {\n\t\t\t\tbits  = 0;\n\t\t\t\tpower = 1;\n\n\t\t\t\twhile(power !== maxpower) {\n\t\t\t\t\tresb = data.val & data.position;\n\n\t\t\t\t\tdata.position >>= 1;\n\n\t\t\t\t\tif(data.position === 0) {\n\t\t\t\t\t\tdata.position = resetValue;\n\t\t\t\t\t\tdata.val      = getNextValue(compressed, data.index++);\n\t\t\t\t\t}\n\n\t\t\t\t\tbits |= (resb > 0 ? 1 : 0) * power;\n\t\t\t\t\tpower <<= 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor(i = 0; i < 3; i++) {\n\t\t\t\tdictionary[i] = i;\n\t\t\t}\n\n\t\t\tprocess(maxpower);\n\n\t\t\tnext = bits;\n\n\t\t\tswitch(next) {\n\t\t\t\tcase 0:\n\t\t\t\t\tprocess(mathPow28);\n\n\t\t\t\t\tc = stringFormCharCode(bits);\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tprocess(mathPow216);\n\n\t\t\t\t\tc = stringFormCharCode(bits);\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tdictionary[3] = c;\n\t\t\tw             = c;\n\n\t\t\tresult.push(c);\n\n\t\t\twhile(true) { // eslint-disable-line no-constant-condition\n\t\t\t\tif(data.index > length) {\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\n\t\t\t\tprocess(Math.pow(2, numBits));\n\n\t\t\t\tswitch(c = bits) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tprocess(mathPow28);\n\n\t\t\t\t\t\tdictionary[dictSize++] = stringFormCharCode(bits);\n\t\t\t\t\t\tc                      = dictSize - 1;\n\n\t\t\t\t\t\tenlargeIn--;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tprocess(mathPow216);\n\n\t\t\t\t\t\tdictionary[dictSize++] = stringFormCharCode(bits);\n\t\t\t\t\t\tc                      = dictSize - 1;\n\n\t\t\t\t\t\tenlargeIn--;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\treturn result.join('');\n\t\t\t\t}\n\n\t\t\t\tif(enlargeIn === 0) {\n\t\t\t\t\tenlargeIn = Math.pow(2, numBits);\n\n\t\t\t\t\tnumBits++;\n\t\t\t\t}\n\n\t\t\t\tif(dictionary[c]) {\n\t\t\t\t\tentry = dictionary[c];\n\t\t\t\t} else {\n\t\t\t\t\tif(c === dictSize) {\n\t\t\t\t\t\tentry = w + w.charAt(0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tresult.push(entry);\n\n\t\t\t\tdictionary[dictSize++] = w + entry.charAt(0);\n\n\t\t\t\tenlargeIn--;\n\n\t\t\t\tw = entry;\n\n\t\t\t\tif(enlargeIn === 0) {\n\t\t\t\t\tenlargeIn = Math.pow(2, numBits);\n\n\t\t\t\t\tnumBits++;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tfunction getCharFromInt(a) {\n\t\t\treturn stringFormCharCode(a + 32);\n\t\t}\n\n\t\tfunction getNextValue(compressed, index) {\n\t\t\treturn compressed.charCodeAt(index) - 32;\n\t\t}\n\n\t\tfunction compress(input) {\n\t\t\treturn input ? compressUTF16(input, 15) + ' ' : '';\n\t\t}\n\n\t\tfunction decompress(compressed) {\n\t\t\treturn compressed ? decompressUTF16(compressed, compressed.length, 16384) : '';\n\t\t}\n\n\t\tfunction isEnabled(path) {\n\t\t\tvar i = 0, pointer, match;\n\n\t\t\tfor(; (pointer = pattern[i]); i++) {\n\t\t\t\tif(path.indexOf(pointer.pattern) === 0 && (!match || pointer.weight > match.weight)) {\n\t\t\t\t\tmatch = pointer;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn match ? match.state : false;\n\t\t}\n\n\t\tdemand\n\t\t\t.on('preCache', function(loader) {\n\t\t\t\tif(enabled || isEnabled(loader.path)) {\n\t\t\t\t\tloader.source = compress(loader.source);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.on('preProcess', function(loader) {\n\t\t\t\tif(loader.deferred.pledge.cache === 'hit' && (enabled || isEnabled(loader.path))) {\n\t\t\t\t\tloader.source = decompress(loader.source);\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn {\n\t\t\tcompress:   compress,\n\t\t\tdecompress: decompress\n\t\t};\n\t}\n\n\tprovide([ 'path', '/demand/function/iterate', '/demand/validator/isObject', '/demand/validator/isTypeOf' ], definition);\n}());"]}