/**! Qoopido.demand 4.1.1 | https://github.com/dlueth/qoopido.demand | (c) 2017 Dirk Lueth */
!function(e,t,n,r,i){"use strict";function o(e,t,n,r){return{__proto__:V,value:e,enumerable:!!r,configurable:!!n,writable:!!t}}function u(e,t){return typeof e===t}function a(e){return e&&u(e,re)}function c(e){return u(e,oe)&&isFinite(e)&&Math.floor(e)===e&&e>=0}function s(e,t){return e instanceof t}function f(e,t,n){for(var r,i=Object.keys(e),o=0;(r=i[o])!==W&&t.call(n,r,e[r])!==Y;o++);}function d(){return+new Date}function l(e){return H.href=e,H.href}function h(e,t){var n=e.replace(Be,"");return Ue.test(n)||Le.test(n)||(n="/"+l((t&&l(t+"/../")||"/")+n).replace(Fe,"")),n}function p(e,t){var n=e.match(Be);return(n&&n[1]?"mock:":"")+(n&&n[3]||O.handler)+"!"+h(e,t)}function v(){return u(this.uuid,ee)&&$(this,"uuid",new o(Ie())),this}function m(){this.parent.constructor.call(this),P[this.uuid]={},e.storage=P[this.uuid]}function g(e,t,n){this.message=e,t&&(this.module=t),n&&(this.stack=C.call(n))}function y(e){function t(t,n){n&&e.handler.validate&&!e.handler.validate(n)?e.deferred.reject(new g(Me+" (content-type)",e.id)):(e.source=t,_e.emit(Re,e.type,e))}function n(t){e.deferred.reject(new g(Me+(t?" (status)":""),e.id))}function r(e,t,n){var r;return H.href=e,H.search=(r=(H.search||"").replace(u,""))+(r?"&":"?")+t+"="+n,H.href}function i(u){u=u||0,e.url=o?l(o.process(e.path,u)):e.path,_e.emit(qe,e.type,e),new Ve(r(e.url,L,+new Date)).then(t,o?function(){u++,o.location[u]?i(u):n()}:n)}var o,u=/^\?/;Le.test(e.path)||f(O.pattern,function(t,n){n.matches(e.path)&&(!o||o.weight<n.weight)&&(o=n)}),i()}function x(e){return"[object Array]"===D.call(e)}function w(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}function b(){this.parent.constructor.call(this),P[this.uuid]=[]}function j(e){var t=this.parent.constructor.call(this),n=P[t.uuid]={queue:e,current:V};demand.on(Se+":"+e.uuid,function(){!n.current&&t.process()})}function q(e,t){for(var n,r;n=Xe.exec(t);)H.href=e,Le.test(n[2])?r=H.protocol+"//"+H.host+n[2]:(H.pathname+="/../"+n[2],r=H.protocol+"//"+H.host+H.pathname),t=t.replace(n[0],n[1]+" sourceMappingURL="+r+".map"+(n[3]?" "+n[3]:""));return t}function g(e,t,n){this.message=e,t&&(this.module=t),n&&(this.stack=C.call(n))}function R(e,t){provide(e,function(){return t})}var k,E,O={cache:{},timeout:8e3,pattern:{},modules:{},handler:"module"},P={},S=Array.prototype,C=S.slice,M=S.concat,A=Object.prototype,D=A.toString,T=Object.create,$=Object.defineProperty,I=Object.getOwnPropertyNames,N=Object.getOwnPropertyDescriptor,_=Function.prototype,H=t.createElement("a"),L="demand",U="provide",X="path",F="/"+L+"/",J=F+"abstract/",B=F+"handler/",G=F+"plugin/",Q=F+"function/",z=F+"validator/",K="mock:",V=null,W=void 0,Y=!1,Z=!0,ee="undefined",te="string",ne="boolean",re="object",ie="function",oe="number",ue=function(){},ae="pre",ce="post",se="Configure",fe=ae+se,de=ce+se,le="cache",he=le+"Miss",pe=le+"Hit",ve=le+"Clear",me=le+"Exceed",ge=ae+"Cache",ye=ce+"Cache",xe="Resolve",we=ae+xe,be=ce+xe,je="Request",qe=ae+je,Re=ce+je,ke="Process",Ee=ae+ke,Oe=ce+ke,Pe="queue",Se=Pe+"Enqueue",Ce=Pe+"Dequeue",Me="error loading",Ae="error providing",De="error resolving",Te="unspecified anonymous provide";!function(){function e(e){var t,n=this,r=n.prototype,i={},u=I(r),a=0;for(e=e.prototype||e;t=u[a];a++)i[t]=N(r,t);return i.constructor=new o(n),i.parent=new o(e),n.prototype=T(e,i),n}$(_,"extends",new o(e))}();var $e=function(){function e(e,t){var n,r=this[e];t!==W&&(a(t)?(n=a(r),r=t.length!==W?n&&r.length!==W?r:[]:n&&r.length===W?r:{},this[e]=$e(r,t)):this[e]=t)}return function(){for(var t,n=arguments[0],r=1;(t=arguments[r])!==W;r++)f(t,e,n);return n}}(),Ie=function(){function e(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}var t=new RegExp("[xy]","g"),n={};return function(){var r;do r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e);while(n[r]);return n[r]=1,r}}(),Ne=function(){var n,i,o="setImmediate"in e;return"MutationObserver"in e?function(e){n=t.createElement("div"),new MutationObserver(function(){e()}).observe(n,{attributes:Z}),n.setAttribute("i","1")}:!o&&"postMessage"in e&&!("importScripts"in e)&&"addEventListener"in e?function(){function t(t){t.source===e&&t.data&&P[t.data]&&(P[t.data](),delete P[t.data])}return e.addEventListener("message",t,Y),function(t){var n=Ie();P[n]=t,e.postMessage(n,"*")}}():!o&&"onreadystatechange"in(n=t.createElement("script"))?function(e){n.onreadystatechange=function(){n.onreadystatechange=V,n.parentNode.removeChild(n),e()},t.body.appendChild(n)}:(i=o?setImmediate:r,function(e){i(e)})}(),_e=function(){function e(e,t,r){var a,c;if(u(t,te)&&u(r,ie))for(t=t.split(" ");a=t.shift();)a=a.split(":"),i.test(a[0])&&((o[a[0]]||(o[a[0]]={on:[],after:[]}))[e].push({callback:r,filter:a[1]}),e===n&&a[0]===de&&(c=O.modules[a[1]])&&r(c))}function t(){}var n="on",r="after",i=/^cache(Miss|Hit|Clear|Exceed)|queue(En|De)queue|(pre|post)(Resolve|Configure|Request|Process|Cache)$/,o={};return t.prototype={emit:function(e,t){var i,u,a,c=o[e];if(c){for(i=C.call(arguments,2),u=0;a=c[n][u];u++)a.filter&&a.filter!==t||a.callback.apply(V,i);for(u=0;a=c[r][u];u++)a.filter&&a.filter!==t||a.callback.apply(V,i)}return this},on:function(t,r){return e(n,t,r),this},after:function(t,n){return e(r,t,n),this}},new t}(),He=function(){var e=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;return function(t){return t.replace(e,"\\$&")}}(),Le=/^(http(s?):)?\/\//i,Ue=/^\//,Xe=/((?:\/\/|\/\*)#)\s*sourceMappingURL\s*=\s*(?!(?:http[s]?:)?\/\/)(.+?)\.map(?:\s+)?(\*\/)?/g,Fe=new RegExp("^"+He(l("/"))),Je=new RegExp("^"+L+"|"+U+"|"+X+"$"),Be=/^(mock:)?([+-])?((?:[-\w]+\/?)+)?(?:@(\d+\.\d+.\d+))?(?:#(\d+))?!/,Ge=function(t){function n(e){var t;return e.cache!==V?e.cache:(f(O.cache,function(n,r){0===e.path.indexOf(n)&&(!t||r.weight>t.weight)&&(t=r)}),t?t.state:Y)}function r(e){return y.getItem(e)}function i(e,t){y[t?"setItem":"removeItem"](e,t)}function o(e){return t.parse(r(e))}function u(e,n){n.access=d(),i(e,t.stringify(n))}function a(e,t,n){_e.emit(e,t.id,t,n)}function c(){Ne(this.clear.expired.bind(this.clear))}var s,l="["+L+"]",h="[state]",v="[value]",m=new RegExp("^"+He(l)+"\\[(.+?)\\]"+He(h)+"$"),g=function(){try{return"localStorage"in e&&e.localStorage}catch(e){return Y}}(),y=g?e.localStorage:V,x=g&&"remainingSpace"in y,w={};return _e.on(he,function(e){Ne(function(){s.clear.path(e.id)})}).on(Re,function(e){e.source&&n(e)&&(w[e.id]=Z)}).after(Oe,function(e){w[e.id]&&Ne(function(){s.set(e)})}),c.prototype={get:function(){return g?function(e){var t,i;if(n(e)&&(t=l+"["+e.id+"]",i=o(t+h),i&&i.version===e.version&&(!i.expires&&!e.lifetime||i.expires>d())))return e.source=r(t+v),Ne(function(){u(t+h,i)}),Z}:ue}(),resolve:function(){return g?function(e){var t=this;t.get(e)?a(pe,e):a(he,e)}:function(e){a(he,e)}}(),set:function(){return g?function(e){var t,r,o;if(n(e)){t={version:e.version,demand:demand.version,expires:e.lifetime?d()+e.lifetime:e.lifetime},r=l+"["+e.id+"]",a(ge,e,t);try{if(o=x?y.remainingSpace:V,i(r+v,e.source),u(r+h,t),o!==V&&y.remainingSpace===o)throw new Error("QUOTA_EXCEEDED_ERR");a(ye,e,t)}catch(t){a(me,e)}}}:ue}(),clear:{path:function(){return g?function e(e){var t=p(e),n=l+"["+t+"]";r(n+h)&&(i(n+h),i(n+v),a(ve,ze.get(t)||new ze(t,V,Y)))}:ue}(),all:function(){return g?function(){var e;f(y,function(t){e=t.match(m),e&&this.path(e[1])},this)}:ue}(),expired:function(){return g?function(){var e,t,n=this;f(y,function(r){e=r.match(m),e&&(t=o(l+"["+e[1]+"]"+h),t&&t.expires>0&&t.expires<=d()&&n.path(e[1]))},this)}:ue}()}},s=new c}(JSON),Qe=function(){function e(){s[this.uuid].handle(a,arguments)}function t(){s[this.uuid].handle(c,arguments)}function n(e,t){var n,r,i=s[this.uuid];for(i.state===u&&(i.state=e,i.value=t);n=i[i.state].shift();)r=n.handler.apply(V,i.value),r&&"function"==typeof r.then?r.then(n.deferred.resolve,n.deferred.reject):n.deferred[i.state===a?"resolve":"reject"].apply(V,i.value);i[a].length=0,i[c].length=0}function r(e,t,n){e.then(function(){n.resolved[t]=C.call(arguments),n.count++,i(n)},function(){n.rejected.push(C.call(arguments)),i(n)})}function i(e){e.count===e.total?e.deferred.resolve.apply(V,M.apply([],e.resolved)):e.rejected.length+e.count===e.total&&e.deferred.reject.apply(V,M.apply([],e.rejected))}function o(r){var i=this.parent.constructor.call(this);s[i.uuid]={state:u,handle:n.bind(i),value:V,resolved:[],rejected:[],count:0},r(e.bind(i),t.bind(i))}var u="pending",a="resolved",c="rejected",s={};return o.prototype={catch:function(e){return this.then(ue,e)},always:function(e){return this.then(e,e)},then:function(e,t){var n=s[this.uuid],r=o.defer();return e&&n[a].push({handler:e,deferred:r}),t&&n[c].push({handler:t,deferred:r}),n.state!==u&&Ne(n.handle),r.pledge},isPending:function(){return s[this.uuid].state===u},isResolved:function(){return s[this.uuid].state===a},isRejected:function(){return s[this.uuid].state===c}},o.defer=function(){var e={};return e.pledge=new o(function(t,n){e.resolve=t,e.reject=n}),e},o.all=function(e){var t,n,i=o.defer(),u=0;if(e.length)for(t=s[Ie()]={deferred:i,resolved:[],rejected:[],total:e.length,count:0};n=e[u];u++)r(n,u,t);else i.resolve();return i.pledge},o.race=function(e){for(var t,n=o.defer(),r=0;t=e[r];r++)t.then(n.resolve,n.reject);return e.length||n.resolve(),n.pledge},o.extends(v)}();m.prototype={get:function(e){return e?P[this.uuid][e]:P[this.uuid]},set:function(e,t){P[this.uuid][e]=t},remove:function(e){delete P[this.uuid][e]}},m.extends(v),g.prototype={toString:function(){var e=this,t=L+": "+e.message+" "+(e.module?'"'+e.module+'"':"");return e.stack&&(t=g.traverse(e.stack,t,1)),t}},g.traverse=function(e,t,n){for(var r,i=new Array(n+1).join(" "),o=0;r=e[o];o++)t+="\n"+i+"> "+r.message+" "+(r.module?'"'+r.module+'"':""),r.stack&&(t=g.traverse(r.stack,t,n+1));return t};var ze=function(){function e(e,t,n){var o=this,u=e.match(Be)||i;return o.path=h(e,t),o.mock=u[1]?Z:Y,o.cache=u[2]?"+"===u[1]:V,o.type=u[3]||O.handler,o.version=u[4]||O.version,o.lifetime=u[5]&&1e3*u[5]||O.lifetime,o.id=(o.mock?K:"")+o.type+"!"+o.path,o.uri=(o.mock?K:"")+o.type+"@"+o.version+(c(o.lifetime)&&o.lifetime>0?"#"+o.lifetime:"")+"!"+o.path,o.deferred=Qe.defer(),o.pledge=o.deferred.pledge,n!==Y&&r.set(o.id,o),o}var n="internal!",r=new m,i=[];return e.prototype={enqueue:!0},e.get=function(e,t){return r.get(p(e,t))},e.resolve=function(t,r){var i=r&&Je.test(t),o=i?this.get(n+r+"/"+t):this.get(t,r);if(!o)if(i)switch(o=new e(n+r+"/"+t),t){case L:o.deferred.resolve(function(){var e=demand.bind(r);return f(demand,function(t,n){e[t]=n}),e}());break;case U:o.deferred.resolve(provide.bind(r));break;case X:o.deferred.resolve(r)}else o=new e(t,r),demand(B+o.type).then(function(e){o.handler=e,o.mock?o.deferred.resolve(e):Ge.resolve(o)},function(){o.deferred.reject(new g(Me+" (handler)",self.id))});return o},e.remove=function(e,n,i){var o=p(e,n),u=t.querySelector("["+L+'-id="'+o+'"]');r.remove(o),r.remove(K+o),u&&u.parentNode.removeChild(u),i!==Y&&Ge.clear.path(o)},e.list={all:function(){return Object.keys(r.get())},pending:function(){var e=[];return f(r.get(),function(t,n){n.pledge.isPending()&&e.push(t)}),e},resolved:function(){var e=[];return f(r.get(),function(t,n){n.pledge.isResolved()&&e.push(t)}),e},rejected:function(){var e=[];return f(r.get(),function(t,n){n.pledge.isRejected()&&e.push(t)}),e}},e}(),Ke=function(){function e(e,n){var r=this;r.weight=e.length,r.match=new RegExp("^"+He(e)),r.location=[].concat(n),f(r.location,function(e,n){r.location[e]={url:l(n).replace(t,"$1"),match:new RegExp("^"+He(n))}})}var t=/(.+)\/$/;return e.prototype={matches:function(e){return this.match.test(e)},process:function(e,t){var n=this.location[t];if(n)return e.replace(this.match,n.url)}},e}(),Ve=function(t){function n(){this.readyState<4&&this.abort()}var o="XDomainRequest"in e&&e.XDomainRequest||t;return function(e){var u,a=Qe.defer(),c=Fe.test(e)?new t:new o,s=n.bind(c),f=O.timeout;return c.ontimeout=c.onerror=c.onabort=function(){a.reject(c.status)},c.onprogress=c.onreadystatechange=function(){i(u),u=r(s,f)},c.onload=function(){u=i(u),"status"in c&&200!==c.status?a.reject(c.status):a.resolve(c.responseText,c.getResponseHeader&&c.getResponseHeader("content-type"))},c.open("GET",e,Z),c.send(),u=r(s,f),a.pledge}}(XMLHttpRequest);e.demand=function(){function t(){var t,n,r,i=C.call(arguments),o=this!==e?this:V,a=0;for(_e.emit(we,V,i,o);t=i[a];a++)u(t,te)?i[a]=ze.resolve(t,o).pledge:(i[a]=(n=Qe.defer()).pledge,n.resolve(t));return r=i.length>1?Qe.all(i):i[0],r.always(function(){_e.emit(be,V,i,o)})}return t.configure=function(e){var n,r=e.cache,i=e.version,o=e.timeout,s=e.lifetime,d=e.base,l=e.pattern,h=e.modules,p=O.modules;return u(r,ne)?O.cache[""]={weight:0,state:r}:a(r)&&f(r,function(e,t){O.cache[e]={weight:e.length,state:t}}),u(i,te)&&(O.version=i),c(o)&&(O.timeout=1e3*Math.min(Math.max(o,2),12)),c(s)&&s>0&&(O.lifetime=1e3*s),u(d,te)&&""!==d&&(O.pattern.base=new Ke("",d)),a(l)&&f(l,function(e,t){"base"!==e&&(O.pattern[e]=new Ke(e,t))}),a(h)&&f(h,function(e,t){n=p[e]=p[e]||{},_e.emit(fe,e,n),$e(n,t),_e.emit(de,e,n)}),t},t.version="4.1.1",t.on=_e.on.bind(t),t.remove=ze.remove,t.list=ze.list,t.clear=Ge.clear,_e.after(he,function(e){new y(e)}).after(pe+" "+Re,function(e){_e.emit(Ee,e.id,e)}).after(qe,function(e){var t=e.handler.onPreRequest;t&&t(e)}).after(Re,function(e){var t=e.handler.onPostRequest;t&&t(e)}).after(Ee,function(e){var t=e.handler.onPreProcess;t&&t(e),e.pledge.then(function(){_e.emit(Oe,e.id,e)}),e.enqueue===!0?k.enqueue(e):s(e.enqueue,Qe)&&e.enqueue.then(function(){k.enqueue(e)})}),t}(),e.provide=function(){var t,n,r=u(arguments[0],te)?arguments[0]:V,i=this!==e?this:V,o=x(arguments[r?1:0])?arguments[r?1:0]:V,a=o?arguments[r?2:1]:arguments[r?1:0];!r&&E.current&&(t=E.current,r=t.uri,E.process()),r?(t=t||new ze(r,i),n=u(a,ie),o?demand.apply(t.path,o).then(function(){t.deferred.resolve(n?a.apply(V,arguments):a)},function(){t.deferred.reject(new g(Ae,t.id,arguments))}):t.deferred.resolve(n?a():a)):!u(console,ee)&&console.error(new g(Te))},demand.configure({cache:Z,base:"/",pattern:{"/demand":l((n&&n.url||location.href)+"/../").slice(0,-1)}}),n&&n.settings&&demand.configure(n.settings),b.prototype={enqueue:function(){P[this.uuid]=P[this.uuid].concat(C.call(arguments)),_e.emit(Se,this.uuid)},dequeue:function(){return _e.emit(Ce,this.uuid),P[this.uuid].shift()},get current(){return P[this.uuid][0]},get length(){return P[this.uuid].length}},b.extends(v),j.prototype={process:function(){var e,t=P[this.uuid];t.queue.length?(e=t.current=t.queue.dequeue(),e.handler.process&&e.handler.process(e)):t.current=V},get current(){return P[this.uuid].current}},j.extends(v);var We=function(){function e(){}return e.prototype={validate:V,onPreRequest:V,onPostRequest:V,onPreProcess:V,process:V},new e}(),Ye=function(){function e(){}var n=t.getElementsByTagName("head")[0],r=/^(application|text)\/(x-)?javascript/;return e.prototype={validate:function(e){return r.test(e)},onPreRequest:function(e){var t=e.url;e.url=".js"!==t.slice(-3)?t+".js":t},onPostRequest:function(e){e.source=q(e.url,e.source)},process:function(e){var r;e.source&&(r=t.createElement("script"),r.async=Z,r.text=e.source,r.setAttribute(L+"-id",e.id),n.appendChild(r))}},new(e.extends(We))}();g.prototype={toString:function(){var e=this,t=L+": "+e.message+" "+(e.module?'"'+e.module+'"':"");return e.stack&&(t=g.traverse(e.stack,t,1)),t}},g.traverse=function(e,t,n){for(var r,i=new Array(n+1).join(" "),o=0;r=e[o];o++)t+="\n"+i+"> "+r.message+" "+(r.module?'"'+r.module+'"':""),r.stack&&(t=g.traverse(r.stack,t,n+1));return t};var Ze=function(){function e(e){for(var t,n,i=0;n=e[i];i++)if(n=n.match(Be),n=n&&n[3]||r.handler,t){if(n!==t)return Y}else t=n;return t}function t(){}var n=B+"bundle",r={};return demand.on(de+":"+n,function(e){var t,n;a(e)&&(r=e,f(r,function(e,r){for(t=0;n=r[t];t++)u(n,te)&&(r[t]=p(n))}))}),t.prototype={validate:Ye.validate,onPreProcess:function(t){function n(){f.reject(new g(De,t.id,arguments))}var i,o,u,a,c,s=t.source,f=t.deferred,d=r[t.path];if(t.enqueue=!1,d&&(i=e(d))){for(;o=Xe.exec(s);)s=s.replace(o[0],"");for(t.source=s,u=[],c=0;a=d[c];c++)u.push(ze.resolve(K+a).pledge);Qe.all(u).then(function(){for(u.length=0,c=0;a=d[c];c++)a=d[c]=ze.get(a)||new ze(a),a.handler=arguments[c],u.push(a.pledge);"module"===i?(k.enqueue.apply(k,d),Ye.process(t)):(Ye.process(t),k.enqueue.apply(k,d)),Qe.all(u).then(f.resolve,n)},n)}else n()}},new(t.extends(We))}(),et=function(){function e(e){for(var t,n,r=0;t=o[r];r++)0===e.indexOf(t.prefix)&&(!n||t.weight>n.weight)&&(n=t);return n}function t(e){var t,n,r=e.matches,i={pattern:{},modules:{"/demand/handler/bundle":{}}},o=0;for(i.pattern[e.id]=e.fn(r),i.modules[B+"bundle"][e.id]=t=[];n=r[o];o++)t.push(n.path);return i}function n(){for(var e,t=0;e=this[t];t++)e.deferred.resolve(arguments[t])}function r(){for(var e,t=0;e=this[t];t++)e.deferred.reject(new g(De,e.id))}var i=G+"genie",o=[];return demand.on(de+":"+i,function(e){a(e)&&(o.length=0,f(e,function(e,t){o.push({prefix:e,weight:e.length,fn:t})}))}).on(we,function(o,a){var c,s,d,l,h={};for(c=0;s=o[c];c++)!u(s,te)||Je.test(s)||ze.get(s,a)||(s=new ze(s,a,Y),"module"===s.type&&(d=e(s.path))&&!Ge.get(s)&&(h[d.prefix]||(h[d.prefix]={fn:d.fn,matches:[]})).matches.push(s));f(h,function(e,o){if(l=o.matches,l.length>1){for(o.id=i+"/"+w(JSON.stringify(o.matches)),c=0;s=l[c];c++)l[c]=new ze(s.uri);demand.configure(t(o)),demand("bundle!"+o.id).then(n.bind(l),r.bind(l))}})}),Z}();if(k=new b,E=new j(k),R(J+"uuid",v),R(J+"handler",We),R(B+"module",Ye),R(B+"bundle",Ze),R(G+"genie",et),R(z+"isTypeOf",u),R(z+"isArray",x),R(z+"isObject",a),R(z+"isInstanceOf",s),R(Q+"resolveUrl",l),R(Q+"resolveSourcemaps",q),R(Q+"merge",$e),R(Q+"iterate",f),R(Q+"hash",w),R(Q+"defer",Ne),R(F+"descriptor",o),R(F+"pledge",Qe),R(F+"queue",b),R(F+"xhr",Ve),R(F+"failure",g),n&&n.main)switch(typeof n.main){case te:demand(n.main);break;case ie:provide("main",n.main())}}(this,document,"demand"in this&&demand,setTimeout,clearTimeout);
//# sourceMappingURL=demand.js.map
