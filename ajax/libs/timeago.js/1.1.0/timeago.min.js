!function(e,t){"object"==typeof module&&module.exports?module.exports=t(e):e.timeago=t(e)}("undefined"!=typeof window?window:this,function(){var e=function(e,t){var n={},r=0;return t||(t="en"),SEC_ARRAY=[60,60,24,7,365/7/12,12],SEC_ARRAY_LEN=6,indexMapEn=["second","minute","hour","day","week","month","year"],indexMapZh=["秒","分钟","小时","天","周","月","年"],locales={en:function(e,t){if(0===t)return["just now","a while"];var n=indexMapEn[parseInt(t/2)];return e>1&&(n+="s"),[e+" "+n+" ago","in "+e+" "+n]},zh_CN:function(e,t){if(0===t)return["刚刚","片刻后"];var n=indexMapZh[parseInt(t/2)];return[e+n+"前",e+n+"后"]}},diff_sec=function(t){var n=new Date;return e&&(n=toDate(e)),(n.getTime()-toDate(t).getTime())/1e3},format_diff=function(e,n){locales[n]||(n=t);var r=(locales[n],0),a=0;for(e<0&&(r=1),e=Math.abs(e);e>=SEC_ARRAY[a]&&a<SEC_ARRAY_LEN;a++)e/=SEC_ARRAY[a];return e=toInt(e),a*=2,e>(0===a?9:1)&&(a+=1),locales[n](e,a)[r].replace("%s",e)},format=function(e,t){return format_diff(diff_sec(e),t)},register=function(e,t){locales[e]=t},toDate=function(e){if(e instanceof Date)return e;if(isNaN(e)){if(/^\d+$/.test(e))return new Date(toInt(e,10));var t=(e||"").trim();return t=t.replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/T/," ").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(t)}return new Date(toInt(e))},toInt=function(e){return parseInt(e)},left_sec=function(e,t){return e%=t,e=e?t-e:t,Math.ceil(e)},next_interval=function(e){for(var t=1,n=0,r=e;e>=SEC_ARRAY[n]&&n<SEC_ARRAY_LEN;n++)e/=SEC_ARRAY[n],t*=SEC_ARRAY[n];return left_sec(r,t)},do_render=function(e,t,r,a){var o=diff_sec(t);e.innerHTML=format_diff(o,r),n["k"+a]=setTimeout(function(){do_render(e,t,r,a)},1e3*next_interval(o))},attr="data-timeago",get_date_attr=function(e){return e.getAttribute?e.getAttribute(attr):e.attr?e.attr(attr):void 0},render=function(e,t){void 0===e.length&&(e=[e]);for(var n=0;n<e.length;n++)r++,do_render(e[n],get_date_attr(e[n]),t,r)},cancel=function(){for(var e in n)clearTimeout(n[e]);n={}},setLocale=function(e){t=e},{format:format,register:register,render:render,cancel:cancel,setLocale:setLocale}};return e});