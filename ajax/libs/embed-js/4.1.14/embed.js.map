{"version":3,"file":null,"sources":["../src/js/modules/utils.js","../src/js/modules/template.js","../src/js/modules/regex.js","../src/js/modules/emoticons/emoji.js","../src/js/modules/emoticons/smiley.js","../src/js/modules/url.js","../node_modules/fetch-jsonp/build/fetch-jsonp.js","../src/js/helpers/template.js","../src/js/helpers/playVideo.js","../src/js/helpers/getDetailsTemplate.js","../src/js/helpers/applyPlyr.js","../src/js/helpers/applyVideoJS.js","../src/js/helpers/destroyVideos.js","../src/js/helpers/embed.js","../src/js/modules/base.js","../src/js/helpers/baseEmbed.js","../src/js/helpers/asyncEmbed.js","../src/js/modules/twitter/twitter.js","../node_modules/unfetch/src/index.js","../src/js/modules/map/map.js","../src/js/modules/markdown.js","../src/js/modules/code/highlight.js","../src/js/modules/code/gist.js","../src/js/modules/video/youtube.js","../src/js/modules/video/vimeo.js","../src/js/modules/image/slideshare.js","../src/js/modules/openGraph.js","../src/js/modules/github.js","../src/js/modules/mentions.js","../src/js/modules/hashtag.js","../src/js/main.js"],"sourcesContent":["/**\n * Trucates the string and adds ellipsis at the end.\n * @param string        The string to be truncated\n * @param n             Length to which it should be truncated\n * @returns {string}    The truncated string\n */\nexport function truncate(string, n) {\n    return string.substr(0, n - 1) + (string.length > n ? '...' : '');\n}\n\n/**\n * Returns an array after removing the duplicates.\n * @param array         The array containing the duplicates\n * @returns {Array}     Array with unique values.\n */\nexport function getUnique(array) {\n    var u = {},\n        a = [];\n\n    array.forEach((value) => {\n        if (!u.hasOwnProperty(value)) {\n            a.push(value);\n            u[value] = 1;\n        }\n    });\n    return a;\n}\n\n/**\n * Converts a string into legitimate url.\n * @param string\n */\nexport function toUrl(string) {\n    return (string.indexOf('//') === -1) ? ('//' + string) : string\n}\n\n/**\n * Extends an Object\n * @param destination\n * @param source\n * @returns {*}\n */\nexport function deepExtend(destination, source) {\n    for (var property in source) {\n        if (source.hasOwnProperty(property) && source[property] && source[property].constructor === Object) {\n            destination[property] = destination[property] || {};\n            deepExtend(destination[property], source[property]);\n        } else {\n            destination[property] = source[property];\n        }\n    }\n    return destination;\n}\n\nexport function escapeRegExp(str) {\n    return str.replace(/[\\-\\[\\]\\/\\{}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\n\n/**\n * Sort an array of objects based on the index value\n * @param  {Array} arr Array to be sorted\n * @return {Array}     Sorted array\n */\nfunction sortObject(arr) {\n    return arr.sort((a, b) => (a.index - b.index));\n}\n\n/**\n * Creates the string of the iframes after sorting them and finally returning a string\n * @param  {string} str    String to which the created text has to be added\n * @param  {object} embeds Sorted array of iframe html\n * @return {string}        String to be rendered\n */\nexport function createText(str, embeds) {\n    let sortedEmbeds = sortObject(embeds);\n    for (let i = 0; i < sortedEmbeds.length; i++) {\n        str += ` ${sortedEmbeds[i].text}`;\n    }\n    return str;\n}\n\n/**\n * Matches the string and finds the substrings matching to the provided regex pattern\n * @param  {object} regex Regex pattern\n * @param  {string} input The string to be analyzed\n * @return {object}       Returns the matched substring with their corresponding positions\n */\nexport function matches(regex, input) {\n    return regex.exec(input);\n}\n\n/**\n * Checks whether a particular service should be embedded or not based on\n * the setting provided by the user\n * @param  {object} options The options provided by the user\n * @param  {string} service Name of the service for which the condition is to be analyzed\n * @return {boolean}        True if it should be embedded\n */\nexport function ifEmbed(options, service) {\n    if (options.singleEmbed && options.served.length) return;\n    return ((options.excludeEmbed.indexOf(service) == -1) && !(options.excludeEmbed === 'all'));\n}\n\nexport function ifInline(options, service) {\n    return ((options.inlineEmbed.indexOf(service) >= 0) || (options.inlineEmbed === 'all'));\n}\n\n/**\n * Calculates the dimensions for the elements based on a aspect ratio\n * @param  {object} options Plugin options\n * @return {object}         The width and height of the elements\n */\nfunction setDimensions(options) {\n\toptions.videoWidth = options.videoWidth || ((options.videoHeight) / 3) * 4 || 800;\n\toptions.videoHeight = options.videoHeight || ((options.videoWidth) / 4) * 3 || 600;\n\treturn options;\n}\n\n/**\n * Returns a cloned object\n * @param  {object} obj\n * @return {object}     cloned object\n */\nexport function cloneObject(obj) {\n    if (obj === null || typeof obj !== 'object') return obj;\n    var temp = obj.constructor(); // give temp the original obj's constructor\n    for (var key in obj) {\n        temp[key] = cloneObject(obj[key])\n    }\n    return temp\n}\n\nexport function urlRegex() {\n    return /((href|src)=[\"']|)(\\b(https?|ftp|file):\\/\\/[^,.\\s]+[^\\s]*[^,.\\s]+)|(?:https?:\\/\\/)?(?:(?:0rz\\.tw)|(?:1link\\.in)|(?:1url\\.com)|(?:2\\.gp)|(?:2big\\.at)|(?:2tu\\.us)|(?:3\\.ly)|(?:307\\.to)|(?:4ms\\.me)|(?:4sq\\.com)|(?:4url\\.cc)|(?:6url\\.com)|(?:7\\.ly)|(?:a\\.gg)|(?:a\\.nf)|(?:aa\\.cx)|(?:abcurl\\.net)|(?:ad\\.vu)|(?:adf\\.ly)|(?:adjix\\.com)|(?:afx\\.cc)|(?:all\\.fuseurl.com)|(?:alturl\\.com)|(?:amzn\\.to)|(?:ar\\.gy)|(?:arst\\.ch)|(?:atu\\.ca)|(?:azc\\.cc)|(?:b23\\.ru)|(?:b2l\\.me)|(?:bacn\\.me)|(?:bcool\\.bz)|(?:binged\\.it)|(?:bit\\.ly)|(?:buff\\.ly)|(?:bizj\\.us)|(?:bloat\\.me)|(?:bravo\\.ly)|(?:bsa\\.ly)|(?:budurl\\.com)|(?:canurl\\.com)|(?:chilp\\.it)|(?:chzb\\.gr)|(?:cl\\.lk)|(?:cl\\.ly)|(?:clck\\.ru)|(?:cli\\.gs)|(?:cliccami\\.info)|(?:clickthru\\.ca)|(?:clop\\.in)|(?:conta\\.cc)|(?:cort\\.as)|(?:cot\\.ag)|(?:crks\\.me)|(?:ctvr\\.us)|(?:cutt\\.us)|(?:dai\\.ly)|(?:decenturl\\.com)|(?:dfl8\\.me)|(?:digbig\\.com)|(?:digg\\.com)|(?:disq\\.us)|(?:dld\\.bz)|(?:dlvr\\.it)|(?:do\\.my)|(?:doiop\\.com)|(?:dopen\\.us)|(?:easyuri\\.com)|(?:easyurl\\.net)|(?:eepurl\\.com)|(?:eweri\\.com)|(?:fa\\.by)|(?:fav\\.me)|(?:fb\\.me)|(?:fbshare\\.me)|(?:ff\\.im)|(?:fff\\.to)|(?:fire\\.to)|(?:firsturl\\.de)|(?:firsturl\\.net)|(?:flic\\.kr)|(?:flq\\.us)|(?:fly2\\.ws)|(?:fon\\.gs)|(?:freak\\.to)|(?:fuseurl\\.com)|(?:fuzzy\\.to)|(?:fwd4\\.me)|(?:fwib\\.net)|(?:g\\.ro.lt)|(?:gizmo\\.do)|(?:gl\\.am)|(?:go\\.9nl.com)|(?:go\\.ign.com)|(?:go\\.usa.gov)|(?:goo\\.gl)|(?:goshrink\\.com)|(?:gurl\\.es)|(?:hex\\.io)|(?:hiderefer\\.com)|(?:hmm\\.ph)|(?:href\\.in)|(?:hsblinks\\.com)|(?:htxt\\.it)|(?:huff\\.to)|(?:hulu\\.com)|(?:hurl\\.me)|(?:hurl\\.ws)|(?:icanhaz\\.com)|(?:idek\\.net)|(?:ilix\\.in)|(?:is\\.gd)|(?:its\\.my)|(?:ix\\.lt)|(?:j\\.mp)|(?:jijr\\.com)|(?:kl\\.am)|(?:klck\\.me)|(?:korta\\.nu)|(?:krunchd\\.com)|(?:l9k\\.net)|(?:lat\\.ms)|(?:liip\\.to)|(?:liltext\\.com)|(?:linkbee\\.com)|(?:linkbun\\.ch)|(?:liurl\\.cn)|(?:ln-s\\.net)|(?:ln-s\\.ru)|(?:lnk\\.gd)|(?:lnk\\.ms)|(?:lnkd\\.in)|(?:lnkurl\\.com)|(?:lru\\.jp)|(?:lt\\.tl)|(?:lurl\\.no)|(?:macte\\.ch)|(?:mash\\.to)|(?:merky\\.de)|(?:migre\\.me)|(?:miniurl\\.com)|(?:minurl\\.fr)|(?:mke\\.me)|(?:moby\\.to)|(?:moourl\\.com)|(?:mrte\\.ch)|(?:myloc\\.me)|(?:myurl\\.in)|(?:n\\.pr)|(?:nbc\\.co)|(?:nblo\\.gs)|(?:nn\\.nf)|(?:not\\.my)|(?:notlong\\.com)|(?:nsfw\\.in)|(?:nutshellurl\\.com)|(?:nxy\\.in)|(?:nyti\\.ms)|(?:o-x\\.fr)|(?:oc1\\.us)|(?:om\\.ly)|(?:omf\\.gd)|(?:omoikane\\.net)|(?:on\\.cnn.com)|(?:on\\.mktw.net)|(?:onforb\\.es)|(?:orz\\.se)|(?:ow\\.ly)|(?:ping\\.fm)|(?:pli\\.gs)|(?:pnt\\.me)|(?:politi\\.co)|(?:post\\.ly)|(?:pp\\.gg)|(?:profile\\.to)|(?:ptiturl\\.com)|(?:pub\\.vitrue.com)|(?:qlnk\\.net)|(?:qte\\.me)|(?:qu\\.tc)|(?:qy\\.fi)|(?:r\\.im)|(?:rb6\\.me)|(?:read\\.bi)|(?:readthis\\.ca)|(?:reallytinyurl\\.com)|(?:redir\\.ec)|(?:redirects\\.ca)|(?:redirx\\.com)|(?:retwt\\.me)|(?:ri\\.ms)|(?:rickroll\\.it)|(?:riz\\.gd)|(?:rt\\.nu)|(?:ru\\.ly)|(?:rubyurl\\.com)|(?:rurl\\.org)|(?:rww\\.tw)|(?:s4c\\.in)|(?:s7y\\.us)|(?:safe\\.mn)|(?:sameurl\\.com)|(?:sdut\\.us)|(?:shar\\.es)|(?:shink\\.de)|(?:shorl\\.com)|(?:short\\.ie)|(?:short\\.to)|(?:shortlinks\\.co.uk)|(?:shorturl\\.com)|(?:shout\\.to)|(?:show\\.my)|(?:shrinkify\\.com)|(?:shrinkr\\.com)|(?:shrt\\.fr)|(?:shrt\\.st)|(?:shrten\\.com)|(?:shrunkin\\.com)|(?:simurl\\.com)|(?:slate\\.me)|(?:smallr\\.com)|(?:smsh\\.me)|(?:smurl\\.name)|(?:sn\\.im)|(?:snipr\\.com)|(?:snipurl\\.com)|(?:snurl\\.com)|(?:sp2\\.ro)|(?:spedr\\.com)|(?:srnk\\.net)|(?:srs\\.li)|(?:starturl\\.com)|(?:su\\.pr)|(?:surl\\.co.uk)|(?:surl\\.hu)|(?:t\\.cn)|(?:t\\.co)|(?:t\\.lh.com)|(?:ta\\.gd)|(?:tbd\\.ly)|(?:tcrn\\.ch)|(?:tgr\\.me)|(?:tgr\\.ph)|(?:tighturl\\.com)|(?:tiniuri\\.com)|(?:tiny\\.cc)|(?:tiny\\.ly)|(?:tiny\\.pl)|(?:tinylink\\.in)|(?:tinyuri\\.ca)|(?:tinyurl\\.com)|(?:tl\\.gd)|(?:tmi\\.me)|(?:tnij\\.org)|(?:tnw\\.to)|(?:tny\\.com)|(?:to\\.ly)|(?:togoto\\.us)|(?:totc\\.us)|(?:toysr\\.us)|(?:tpm\\.ly)|(?:tr\\.im)|(?:tra\\.kz)|(?:trunc\\.it)|(?:twhub\\.com)|(?:twirl\\.at)|(?:twitclicks\\.com)|(?:twitterurl\\.net)|(?:twitterurl\\.org)|(?:twiturl\\.de)|(?:twurl\\.cc)|(?:twurl\\.nl)|(?:u\\.mavrev.com)|(?:u\\.nu)|(?:u76\\.org)|(?:ub0\\.cc)|(?:ulu\\.lu)|(?:updating\\.me)|(?:ur1\\.ca)|(?:url\\.az)|(?:url\\.co.uk)|(?:url\\.ie)|(?:url360\\.me)|(?:url4\\.eu)|(?:urlborg\\.com)|(?:urlbrief\\.com)|(?:urlcover\\.com)|(?:urlcut\\.com)|(?:urlenco\\.de)|(?:urli\\.nl)|(?:urls\\.im)|(?:urlshorteningservicefortwitter\\.com)|(?:urlx\\.ie)|(?:urlzen\\.com)|(?:usat\\.ly)|(?:use\\.my)|(?:vb\\.ly)|(?:vgn\\.am)|(?:vl\\.am)|(?:vm\\.lc)|(?:w55\\.de)|(?:wapo\\.st)|(?:wapurl\\.co.uk)|(?:wipi\\.es)|(?:wp\\.me)|(?:x\\.vu)|(?:xr\\.com)|(?:xrl\\.in)|(?:xrl\\.us)|(?:xurl\\.es)|(?:xurl\\.jp)|(?:y\\.ahoo.it)|(?:yatuc\\.com)|(?:ye\\.pe)|(?:yep\\.it)|(?:yfrog\\.com)|(?:yhoo\\.it)|(?:yiyd\\.com)|(?:youtu\\.be)|(?:yuarel\\.com)|(?:z0p\\.de)|(?:zi\\.ma)|(?:zi\\.mu)|(?:zipmyurl\\.com)|(?:zud\\.me)|(?:zurl\\.ws)|(?:zz\\.gd)|(?:zzang\\.kr)|(?:›\\.ws)|(?:✩\\.ws)|(?:✿\\.ws)|(?:❥\\.ws)|(?:➔\\.ws)|(?:➞\\.ws)|(?:➡\\.ws)|(?:➨\\.ws)|(?:➯\\.ws)|(?:➹\\.ws)|(?:➽\\.ws))\\/[a-z0-9]*/gi;\n}\n\nfunction arrayLowercase(options, property){\n\tif(typeof options[property] !== 'string'){\n\t\toptions[property] = options[property].map(function(elem){\n\t\t\treturn elem.toLowerCase();\n\t\t})\n\t}\n\treturn options;\n}\n\n/**\n * Sets the dimensions and converts options values' Array into lowercase.\n * @param options\n * @returns {Object|*}\n */\nexport function processOptions(options){\n\toptions = setDimensions(options);\n\toptions = arrayLowercase(options, 'excludeEmbed');\n\toptions = arrayLowercase(options, 'inlineEmbed');\n\treturn arrayLowercase(options, 'openGraphExclude');\n}\n\n/**\n * Get the last element of an array or string\n * @param elem [String|Array]\n * @returns last element of the Array or String\n */\nexport function lastElement(elem){\n\treturn elem[elem.length - 1];\n}\n","import { toUrl, lastElement } from './utils'\n\nexport default {\n\turl(match, options){\n\t\tlet config = options.linkOptions;\n\t\treturn `<a href=\"${toUrl(match)}\" rel=\"${config.rel}\" target=\"${config.target}\">${match}</a>`;\n\t},\n\n\tsmiley(text, pre, code) {\n\t\treturn `<span class=\"icon-emoticon\" title=\"${text}\">${pre}${code}</span>`;\n\t},\n\n\temoji(text){\n\t\treturn `<span class=\"emoticon emoticon-${text}\" title=\":${text}:\"></span>`;\n\t},\n\n\taudio(match){\n\t\treturn `<div class=\"ejs-audio ejs-plyr ejs-embed\"><audio src=\"${match}\" controls class=\"video-js ejs-video-js\"></audio></div>`\n\t},\n\n\tsoundcloud(match, options){\n\t\tlet config = options.soundCloudOptions;\n\t\treturn `<div class=\"ejs-embed\">\n\t\t<iframe height=\"160\" scrolling=\"no\" src=\"https://w.soundcloud.com/player/?url=${match}&auto_play=${config.autoPlay}&hide_related=${config.hideRelated}&show_comments= ${config.showComments}&show_user=${config.showUser}&show_reposts=${config.showReposts}&visual=${config.visual}&download=${config.download}&color=${config.themeColor}&theme_color=${config.themeColor}\"></iframe>\n\t\t</div>`\n\t},\n\n\tspotify(match){\n\t\tlet id = lastElement(match.split('/'));\n\t\treturn `<div class=\"ejs-embed\"><iframe src=\"https://embed.spotify.com/?uri=spotify:track:${id}\" height=\"80\"></iframe></div>`\n\t},\n\n\tcodepen(id, options){\n\t\treturn `<div class=\"ejs-embed ejs-codepen\"><iframe scrolling=\"no\" height=\"${options.codeEmbedHeight}\" src=\"${id.replace(/\\/pen\\//, '/embed/')}/?height=${options.codeEmbedHeight}\"></iframe></div>`\n\t},\n\n\tideone(match, options){\n\t\treturn `<div class=\"ejs-ideone ejs-embed\"><iframe src=\"http://ideone.com/embed/${match.split('/')[1]}\" frameborder=\"0\" height=\"${options.codeEmbedHeight}\"></iframe></div>`\n\t},\n\n\tjsbin(id, options){\n\t\treturn `<div class=\"ejs-jsbin ejs-embed\"><iframe height=\"${options.codeEmbedHeight}\" class=\"jsbin-embed foo\" src=\"http://${id}/embed?html,js,output\"></iframe></div>`\n\t},\n\n\tjsfiddle(id, options){\n\t\tid = lastElement(id) == '/' ? id.slice(0, - 1) : id;\n\t\tid =  (id.indexOf('//') !== -1) ? id : `//${id}`;\n\t\treturn `<div class=\"ejs-embed ejs-jsfiddle\"><iframe height=\"${options.codeEmbedHeight}\" src=\"${id}/embedded\"></iframe></div>`\n\t},\n\n\tplunker(id, options){\n\t\treturn `<div class=\"ejs-embed ejs-plunker\"><iframe class=\"ne-plunker\" src=\"http://embed.plnkr.co/${id}\" height=\"${options.codeEmbedHeight}\"></iframe></div>`\n\t},\n\n\timage(match){\n\t\treturn `<div class=\"ejs-image ejs-embed\"><div class=\"ne-image-wrapper\"><img src=\"${match}\"/></div></div>`\n\t},\n\n\tflickr(match, options){\n\t\treturn `<div class=\"ejs-embed\"><div class=\"ne-image-wrapper\"><iframe src=\"${toUrl(match.split('/?')[0])}/player/\" width=\"${options.videoWidth}\" height=\"${options.videoHeight}\"></iframe></div></div>`\n\t},\n\n\tinstagram(match, options){\n\t\treturn `<div class=\"ejs-embed ejs-instagram\"><iframe src=\"${toUrl(match.split('/?')[0])}/embed/\" height=\"${options.videoHeight}\"></iframe></div>`;\n\t},\n\n\tslideShare(html){\n\t\treturn `<div class=\"ejs-embed ejs-slideshare\">${html}</div>`;\n\t},\n\n\tvideo(match){\n\t\treturn `<div class=\"ejs-video ejs-embed\"><div class=\"ejs-video-player\"><div class=\"ejs-player ejs-plyr\"><video src=\"${match}\" class=\"ejs-video-js video-js\" controls></video></div></div></div>`\n\t},\n\n\tdailymotion(match, options){\n\t\tconst id = lastElement(match.split('/'));\n\t\treturn `<div class=\"ejs-video ejs-embed\"><iframe src=\"http://www.dailymotion.com/embed/video/${id}\" height=\"${options.videoHeight}\" width=\"${options.videoWidth}\"></iframe></div>`\n\t},\n\n\tliveleak(match, options){\n\t\treturn `<div class=\"ejs-video ejs-embed\"><iframe src=\"http://www.liveleak.com/e/${match.split('=')[1]}\" height=\"${options.videoHeight}\" width=\"${options.videoWidth}\"></iframe></div>`\n\t},\n\n\tted(match, options){\n\t\tlet a = match.split('/');\n\t\tconst id = a[a.length - 1];\n\t\treturn `<div class=\"ejs-embed ejs-ted\"><iframe src=\"http://embed.ted.com/talks/${id}.html\" height=\"${options.videoHeight}\" width=\"${options.videoWidth}\"></iframe></div>`\n\t},\n\n\tustream(match, options){\n\t\tlet id = match.split('/');\n\t\t// only add embed if it is not already in the link\n\t\tif( match.indexOf('/embed/') < 0 ) {\n\t\t\tid.splice(1, 0, 'embed');\n\t\t}\n\t\treturn `<div class=\"ejs-embed ejs-ustream\"><iframe src=\"//www.${id.join('/')}\" height=\"${options.videoHeight}\" width=\"${options.videoWidth}\"></iframe></div>`\n\t},\n\n\tdetailsVimeo(data, fullData, embedUrl){\n\t\treturn `<div class=\"ejs-video ejs-embed\"><div class=\"ejs-video-preview\"><div class=\"ejs-video-thumb\" data-ejs-url=\"${embedUrl}\"><div class=\"ejs-thumb\" style=\"background-image:url(${data.thumbnail})\"></div><i class=\"fa fa-play-circle-o\"></i></div><div class=\"ejs-video-detail\"><div class=\"ejs-video-title\"><a href=\"${data.url}\">${data.title}</a></div><div class=\"ejs-video-desc\">${data.description}</div><div class=\"ejs-video-stats\"><span><i class=\"fa fa-eye\"></i>${data.views}</span><span><i class=\"fa fa-heart\"></i>${data.likes}</span></div></div></div></div>`\n\t},\n\n\tdetailsYoutube(data, fullData, embedUrl){\n\t\treturn `<div class=\"ejs-video ejs-embed\"><div class=\"ejs-video-preview\"><div class=\"ejs-video-thumb\" data-ejs-url=\"${embedUrl}\"><div class=\"ejs-thumb\" style=\"background-image:url(${data.thumbnail})\"></div><i class=\"fa fa-play-circle-o\"></i></div><div class=\"ejs-video-detail\"><div class=\"ejs-video-title\"><a href=\"${data.url}\">${data.title}</a></div><div class=\"ejs-video-desc\">${data.description}</div><div class=\"ejs-video-stats\"><span><i class=\"fa fa-eye\"></i>${data.views}</span><span><i class=\"fa fa-heart\"></i>${data.likes}</span></div></div></div></div>`\n\t},\n\n\tvine(match, options){\n\t\tconst id = lastElement(match.split('/'));\n\t\tconst config = options.vineOptions;\n\t\treturn `<div class=\"ejs-vine\"><iframe class=\"ejs-vine-iframe\" src=\"https://vine.co/v/${id}/embed/${config.type}\" height=\"${config.height}\" width=\"${config.width}\"></iframe></div>`\n\t},\n\n\tvimeo(url, options){\n\t\treturn options.plyr ?\n\t\t\t`<div class='ejs-plyr'><div data-video-type='vimeo' data-video-id='${lastElement(url.split(\"/\"))}'></div></div>` :\n\t\t\t`<div class=\"ejs-video-player ejs-embed\"><iframe src=\"${url}\" frameBorder=\"0\" width=\"${options.videoWidth}\" height=\"${options.videoHeight}\"></iframe></div>`\n\t},\n\n\tyoutube(url, options){\n\t\treturn options.plyr ?\n\t\t\t`<div class='ejs-plyr'><div data-video-type='youtube' data-video-id='${lastElement(url.split(\"/\"))}'></div></div>` :\n\t\t\t`<div class=\"ejs-video-player ejs-embed\"><iframe src=\"${url}\" frameBorder=\"0\" width=\"${options.videoWidth}\" height=\"${options.videoHeight}\"></iframe></div>`\n\t},\n\n\topenGraph(data, options){\n\t\treturn `<div class=\"ejs-embed ejs-ogp\"><div class=\"ejs-ogp-thumb\" style=\"background-image:url(${data.image})\"></div><div class=\"ejs-ogp-details\"><div class=\"ejs-ogp-title\"><a href=\"${data.url}\" target=\"${options.linkOptions.target}\">${data.title}</a></div><div class=\"ejs-ogb-details\">${data.description}</div></div></div>`\n\t},\n\n\tgithub(data, options){\n\t\treturn `<div class=\"ejs-embed ejs-github\"><div class=\"ejs-ogp-thumb\" style=\"background-image:url(${data.owner.avatar_url})\"></div><div class=\"ejs-ogp-details\"><div class=\"ejs-ogp-title\"><a href=\"${data.html_url}\" target=\"${options.linkOptions.target}\">${data.full_name}</a></div><div class=\"ejs-ogb-details\">${data.description}</div><div class=\"ejs-github-stats\"><span><i class=\"fa fa-star\"></i>${data.stargazers_count}</span><span><i class=\"fa fa-code-fork\"></i>${data.network_count}</span></div></div></div>`\n\t},\n\n\tgmap(latitude, longitude, location, options){\n\t\tconst config = options.mapOptions;\n\t\tif (config.mode === 'place') {\n\t\t\treturn `<div class=\"ejs-embed ejs-map\"><iframe width=\"${options.videoWidth}\" height=\"${options.videoHeight}\" src=\"https://www.google.com/maps/embed/v1/place?key=${options.googleAuthKey}&q=${location}\"></iframe></div>`;\n\t\t} else if (config.mode === 'streetview') {\n\t\t\treturn `<div class=\"ejs-embed ejs-map\"><iframe width=\"${options.videoWidth}\" height=\"${options.videoHeight}\" src=\"https://www.google.com/maps/embed/v1/streetview?key=${options.googleAuthKey}&location=${latitude},${longitude}&heading=210&pitch=10&fov=35\"></iframe></div>`;\n\t\t} else if (config.mode === 'view') {\n\t\t\treturn `<div class=\"ejs-embed ejs-map\"><iframe width=\"${options.videoWidth}\" height=\"${options.videoHeight}\" src=\"https://www.google.com/maps/embed/v1/view?key=${options.googleAuthKey}&center=${latitude},${longitude}&zoom=18&maptype=satellite\"></iframe></div>`\n\t\t}\n\t}\n}\n","const regex = {\n\tmentions     : /(^|\\s)(@[a-z0-9_-]+)/gi,\n\thashtag      : /(^|\\s)(#[a-z\\d-]+)/gi,\n\tbasicAudio   : /((?:https?):\\/\\/\\S*\\.(?:wav|mp3|ogg))/gi,\n\tsoundCloud   : /(soundcloud.com)\\/[a-zA-Z0-9-_]+\\/[a-zA-Z0-9-_]+/gi,\n\tspotify      : /spotify.com\\/track\\/[a-zA-Z0-9_]+/gi,\n\tcodepen      : /http:\\/\\/codepen.io\\/([A-Za-z0-9_]+)\\/pen\\/([A-Za-z0-9_]+)/gi,\n\tgist         : /gist.github.com\\/[a-zA-Z0-9_-]+\\/([a-zA-Z0-9]+)/gi,\n\thighlightCode: /(`{3})(\\s|[a-z]+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/gm,\n\tinlineCode   : /(`)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/gm,\n\tideone       : /ideone.com\\/[a-zA-Z0-9]{6}/gi,\n\tjsbin        : /jsbin.com\\/[a-zA-Z0-9_]+\\/[0-9_]+/gi,\n\tjsfiddle     : /jsfiddle.net\\/[a-zA-Z0-9_]+\\/[a-zA-Z0-9_\\/]+/gi,\n\tplunker      : /plnkr.co\\/edit\\/[a-zA-Z0-9\\?=]+/gi,\n\tbasicImage   : /((?:https?):\\/\\/\\S*\\.(?:gif|jpg|jpeg|tiff|png|svg|webp))/gi,\n\tflickr       : /flickr.com\\/[a-z]+\\/[a-zA-Z@_$!\\d\\-\\]+\\/[\\d]+/gi,\n\tinstagram    : /instagram.com\\/p\\/[a-zA-Z0-9_\\/\\?\\-\\=]+/gi,\n\tslideShare   : /slideshare.net\\/[a-zA-Z0-9_-]*\\/[a-zA-Z0-9_-]*/gi,\n\tgithub       : /[^\\.]github.com\\/([\\w\\.\\-]+)\\/([\\w\\.\\-]+)/gi,\n\tbasicVideo   : /(?:https?):\\/\\/\\S*\\.(?:ogv|webm|mp4)/gi,\n\tdailymotion  : /dailymotion.com\\/video\\/[a-zA-Z0-9-_]+/gi,\n\tliveleak     : /liveleak.com\\/view\\?i=[a-zA-Z0-9_]+/gi,\n\tted          : /ted.com\\/talks\\/[a-zA-Z0-9_]+/gi,\n\tustream      : /ustream.tv\\/[a-z\\/0-9]*/gi,\n\tvimeo        : /https?:\\/\\/(?:www\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|)(\\d+)(?:$|\\/|\\?)*/gi,\n\tvine         : /vine.co\\/v\\/[a-zA-Z0-9]+/gi,\n\tyoutube      : /https?:\\/\\/(?:[0-9A-Z-]+\\.)?(?:youtu\\.be\\/|youtube\\.com(?:\\/embed\\/|\\/v\\/|\\/watch\\?v=|\\/ytscreeningroom\\?v=|\\/feeds\\/api\\/videos\\/|\\/user\\S*[^\\w\\-\\s]|\\S*[^\\w\\-\\s]))([\\w\\-]{11})[?=&+%\\w-]*/gi,\n\tgmap         : /@\\((.+)\\)/gi,\n\ttwitter      : /https:\\/\\/twitter\\.com\\/\\w+\\/\\w+\\/\\d+/gi,\n\tsmileys      : /:[a-zA-Z0-9-_+]+:(:skin-tone-[2-6]:)?/gi\n};\n\nexport default regex;\n","import regex from '../regex';\nimport {lastElement} from '../utils';\n\nfunction getEmoji(match) {\n\treturn match[0] === ':' && (lastElement(match) === ':') && match.substring(1, match.length - 1)\n}\n\nexport default function (output, options) {\n\treturn output.replace(regex.smileys, function (match) {\n\t\tif (typeof options.customEmoji === 'function') {\n\t\t\treturn options.customEmoji(match);\n\t\t} else {\n\t\t\tconst emoji = getEmoji(match);\n\t\t\tif (emoji) {\n\t\t\t\treturn options.template.emoji(emoji, options)\n\t\t\t}\n\t\t}\n\t\treturn match;\n\t});\n}\n","import {escapeRegExp} from '../utils'\n\nconst defaultIcons = [{\n\t'text': ':)',\n\t'code': '&#xe60a'\n}, {\n\t'text': ':D',\n\t'code': '&#xe608'\n}, {\n\t'text': ':d',\n\t'code': '&#xe608'\n}, {\n\t'text': ':(',\n\t'code': '&#xe60e'\n}, {\n\t'text': ':/',\n\t'code': '&#xe620'\n\n}, {\n\t'text': ':P',\n\t'code': '&#xe60c'\n}, {\n\t'text': ':p',\n\t'code': '&#xe60c'\n}, {\n\t'text': '3:)',\n\t'code': '&#xe618'\n}, {\n\t'text': '(^)',\n\t'code': '&#xe607'\n}, {\n\t'text': ';)',\n\t'code': '&#xe610'\n}, {\n\t'text': ':o',\n\t'code': '&#xe61a'\n}, {\n\t'text': ':O',\n\t'code': '&#xe61a'\n}, {\n\t'text': '-_-',\n\t'code': '&#xe61e'\n}, {\n\t'text': '(y)',\n\t'code': '&#xe606'\n}, {\n\t'text': ':*',\n\t'code': '&#xe604'\n}, {\n\t'text': '&lt;3',\n\t'code': '&#xe604'\n}, {\n\t'text': '<3',\n\t'code': '&#xe604'\n}, {\n\t'text': '&lt;/3',\n\t'code': '&#xe605'\n}, {\n\t'text': '</3',\n\t'code': '&#xe605'\n}, {\n\t'text': '^_^',\n\t'code': '&#xe612'\n}, {\n\t'text': '8-)',\n\t'code': '&#xe614'\n}, {\n\t'text': '8|',\n\t'code': '&#xe614'\n}, {\n\t'text': ':S',\n\t'code': '&#xe61c'\n}, {\n\t'text': ':s',\n\t'code': '&#xe61c'\n}];\n\nexport default function (input, options) {\n\tconst icons = options.customFontIcons.length ? options.customFontIcons : defaultIcons;\n\n\tconst escapedSymbols = icons.map((val) => escapeRegExp(val.text));\n\n\tconst smileyRegex = new RegExp(`(^|\\\\s)(${escapedSymbols.join('|')})(?=\\\\s|$)`, 'gi');\n\n\treturn input.replace(smileyRegex, (match, pre, text) => {\n\t\tlet index = escapedSymbols.indexOf(escapeRegExp(text));\n\t\tif (index === -1) return match;\n\t\tlet code  = icons[index].code;\n\t\treturn options.template.smiley(text, pre, code, options);\n\t});\n}\n\n","import {urlRegex, lastElement} from './utils'\n\nexport default function (input, options) {\n\tconst config = options.linkOptions;\n\treturn input.replace(urlRegex(), function(match) {\n\t\tif(lastElement(match) === ')') return match; //hack for markdown image\n\t\tlet extension = lastElement(match.split('.'));\n\t\tif ((lastElement(match) === '/'))\n\t\t\tmatch = match.slice(0, -1);\n\t\tif (config.exclude.indexOf(extension) === -1)\n\t\t\treturn options.template.url(match, options);\n\t\treturn match;\n\t});\n}\n","(function (global, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['exports', 'module'], factory);\n  } else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n    factory(exports, module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, mod);\n    global.fetchJsonp = mod.exports;\n  }\n})(this, function (exports, module) {\n  'use strict';\n\n  var defaultOptions = {\n    timeout: 5000,\n    jsonpCallback: 'callback',\n    jsonpCallbackFunction: null\n  };\n\n  function generateCallbackFunction() {\n    return 'jsonp_' + Date.now() + '_' + Math.ceil(Math.random() * 100000);\n  }\n\n  // Known issue: Will throw 'Uncaught ReferenceError: callback_*** is not defined'\n  // error if request timeout\n  function clearFunction(functionName) {\n    // IE8 throws an exception when you try to delete a property on window\n    // http://stackoverflow.com/a/1824228/751089\n    try {\n      delete window[functionName];\n    } catch (e) {\n      window[functionName] = undefined;\n    }\n  }\n\n  function removeScript(scriptId) {\n    var script = document.getElementById(scriptId);\n    document.getElementsByTagName('head')[0].removeChild(script);\n  }\n\n  function fetchJsonp(_url) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    // to avoid param reassign\n    var url = _url;\n    var timeout = options.timeout || defaultOptions.timeout;\n    var jsonpCallback = options.jsonpCallback || defaultOptions.jsonpCallback;\n\n    var timeoutId = undefined;\n\n    return new Promise(function (resolve, reject) {\n      var callbackFunction = options.jsonpCallbackFunction || generateCallbackFunction();\n      var scriptId = jsonpCallback + '_' + callbackFunction;\n\n      window[callbackFunction] = function (response) {\n        resolve({\n          ok: true,\n          // keep consistent with fetch API\n          json: function json() {\n            return Promise.resolve(response);\n          }\n        });\n\n        if (timeoutId) clearTimeout(timeoutId);\n\n        removeScript(scriptId);\n\n        clearFunction(callbackFunction);\n      };\n\n      // Check if the user set their own params, and if not add a ? to start a list of params\n      url += url.indexOf('?') === -1 ? '?' : '&';\n\n      var jsonpScript = document.createElement('script');\n      jsonpScript.setAttribute('src', '' + url + jsonpCallback + '=' + callbackFunction);\n      jsonpScript.id = scriptId;\n      document.getElementsByTagName('head')[0].appendChild(jsonpScript);\n\n      timeoutId = setTimeout(function () {\n        reject(new Error('JSONP request to ' + url + ' timed out'));\n\n        clearFunction(callbackFunction);\n        removeScript(scriptId);\n      }, timeout);\n    });\n  }\n\n  // export as global function\n  /*\n  let local;\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n  local.fetchJsonp = fetchJsonp;\n  */\n\n  module.exports = fetchJsonp;\n});","/**\n * Common template for vimeo and youtube iframes\n * @param  {string} url     URL of the embedding video\n * @param  {object} options Options object\n * @return {string}         compiled template with variables replaced\n */\nexport default function template(url, options) {\n\treturn options.template.vimeo(url, options) || options.template.youtube(url, options)\n}\n","import template from './template'\n\n/**\n * Plays the video after clicking on the thumbnail\n * @param  {object} options   Options object\n * @return {null}\n */\nexport default function playVideo(options) {\n\t/** Execute the customVideoClickHandler if the user wants to handle it on his own. */\n\tif (options.customVideoClickHandler) return options.videoClickHandler(options, template);\n\n\tlet classes = document.getElementsByClassName(options.videoClickClass);\n\tfor (let i = 0; i < classes.length; i++) {\n\t\tclasses[i].onclick = function () {\n\t\t\toptions.onVideoShow();\n\t\t\tlet url                              = this.getAttribute('data-ejs-url') + \"?autoplay=true\";\n\t\t\tthis.parentNode.parentNode.innerHTML = template(url, options);\n\t\t};\n\t}\n}\n","export default function (data, fullData, embedUrl, options) {\n\tif (data.host === 'vimeo') {\n\t\treturn options.template.detailsVimeo(data, fullData, embedUrl, options)\n\t} else if (data.host === 'youtube') {\n\t\treturn options.template.detailsYoutube(data, fullData, embedUrl, options)\n\t}\n}\n","/**\n * Applies video.js to all audio and video dynamically\n * @param  {object} options Options object\n * @return {null}\n */\nexport default function (options) {\n\tif (options.plyr) {\n\t\tif (!options.plugins.plyr) throw new ReferenceError(\"You have enabled plyr but you haven't loaded the library.Find it at https://plyr.io/\");\n\t\tlet plyr = options.plugins.plyr;\n\t\tplyr.setup('.ejs-plyr', options.plyrOptions);\n\t}\n}\n","/**\n * Applies video.js to all audio and video dynamically\n * @param  {object} options Options object\n * @return {null}\n */\nexport default function applyVideoJS(options) {\n\toptions.videojsOptions.width  = options.videoWidth;\n\toptions.videojsOptions.height = options.videoHeight;\n\tif (options.videoJS) {\n\t\tif (!options.plugins.videojs) throw new ReferenceError(\"You have enabled videojs but you haven't loaded the library.Find it at http://videojs.com/\");\n\t\tlet VideoJS = options.plugins.videojs;\n\t\tlet elements = options.input.getElementsByClassName('ejs-video-js');\n\t\tfor (let i = 0; i < elements.length; i++) {\n\t\t\tVideoJS(elements[i], options.videojsOptions, () => options.videojsCallback());\n\t\t}\n\t}\n}\n","/**\n * Destroys the onclick event for opening the video template from the details template\n * @param  {className} className\n * @return {null}\n */\nexport default function (className) {\n\tconst classes = document.getElementsByClassName(className);\n\tfor (let i = 0; i < classes.length; i++) {\n\t\tclasses[i].onclick = null\n\t}\n}\n","import { ifInline, matches } from '../modules/utils'\n\nfunction inlineEmbed(_){\n\tlet regexInline = _.options.link ? new RegExp(`([^>]*${_.regex.source})<\\/a>`, 'gm') : new RegExp(`([^\\\\s]*${_.regex.source})`, 'gm');\n\t_.output     = _.output.replace(regexInline, function(match) {\n\t\tlet url = _.options.link ? match.slice(0, -4) : match;\n\t\tif (_.options.served.indexOf(url) === -1) {\n\t\t\t_.options.served.push(url);\n\t\t\tif (_.options.link) {\n\t\t\t\treturn !_.options.inlineText ? _.template(match.slice(0, -4)) + '</a>' : match + _.template(match.slice(0, -4))\n\t\t\t} else {\n\t\t\t\treturn !_.options.inlineText ? _.template(match) : match + _.template(match)\n\t\t\t}\n\t\t} else {\n\t\t\treturn match; //TODO : check whether this should be `match`\n\t\t}\n\t});\n\treturn [_.output, _.embeds];\n}\n\nfunction normalEmbed(_){\n\tlet match;\n\twhile ((match = matches(_.regex, _.input)) !== null) {\n\t\tlet url = match[0];\n\t\tif (!(_.options.served.indexOf(url) === -1) || (_.options.served.length && _.options.singleEmbed)) continue;\n\t\t_.options.served.push(url);\n\t\tlet text = _.template(url);\n\t\t_.embeds.push({\n\t\t\ttext : text,\n\t\t\tindex: match.index\n\t\t})\n\t}\n\treturn [_.output, _.embeds];\n}\n\nexport default function embed(_){\n\treturn (ifInline(_.options, _.service)) ? inlineEmbed(_) : normalEmbed(_)\n}\n","import { embed } from '../helpers'\n\nexport default function (input, output, embeds, options, regex, service) {\n\tconst args = {\n\t\tinput,\n\t\toutput,\n\t\toptions,\n\t\tembeds,\n\t\tregex,\n\t\tservice,\n\t\ttemplate(match){\n\t\t\treturn this.options.template[this.service](match, this.options);\n\t\t}\n\t};\n\n\treturn embed(args);\n}\n","import { ifEmbed } from '../modules/utils'\nimport base from '../modules/base'\n\nexport default function baseEmbed(input, output, embeds, options, regex, service, flag){\n\treturn ifEmbed(options, service) || (ifEmbed(options, service) && flag) ? base(input, output, embeds, options, regex, service) : [output, embeds]\n}\n","import { matches, ifInline } from '../modules/utils'\n\n/**\n * This is a private function which is used to get the actual text to be replaced for\n * a particular url in inline embedding. This returns a promise\n * @param  {object} _     reference to this\n * @param  {function} urlToText The function that converts url to replaceable text\n * @param  {object} match     object containing info of matching string\n * @return {Promise}           resolves to the text\n */\nfunction getInlineData(_, urlToText, match) {\n\tlet url = (_.options.link ? match[0].slice(0, -4) : match[0]) || match[1];\n\tif (_.options.served.indexOf(url) >= 0) return Promise.resolve(null);\n\n\treturn new Promise((resolve) => {\n\t\turlToText(_, match, url).then((text) => {\n\t\t\tif (!text) return resolve();\n\t\t\t_.options.served.push(url);\n\t\t\tresolve(text);\n\t\t})\n\t})\n}\n\n/**\n * A helper function for inline embedding\n * @param _\n * @param urlToText\n * @returns Promise\n */\nfunction inlineAsyncEmbed(_, urlToText) {\n\tlet regexInline     = _.options.link ? new RegExp(`([^>]*${_.regex.source})<\\/a>`, 'gi') : new RegExp(`([^\\\\s]*${_.regex.source})`, 'gi');\n\tlet match, promises = [];\n\n\twhile ((match = matches(regexInline, _.output)) !== null)\n\t\tpromises.push(getInlineData(_, urlToText, match));\n\n\treturn new Promise((resolve) => {\n\t\tif (promises.length)\n\t\t\tPromise.all(promises).then((data) => {\n\t\t\t\tlet i        = 0;\n\t\t\t\t_.output = _.output.replace(regexInline, (matched) => {\n\t\t\t\t\tif (_.options.link)\n\t\t\t\t\t\treturn !_.options.inlineText ? data[i++] + '</a>' : matched + data[i++];\n\t\t\t\t\telse\n\t\t\t\t\t\treturn !_.options.inlineText ? data[i++] : matched + data[i++];\n\t\t\t\t});\n\t\t\t\tresolve(_.output)\n\t\t\t});\n\t\telse\n\t\t\tresolve(_.output)\n\t})\n}\n\n\nfunction getNormalData(_, urlToText, match) {\n\tlet url = match[0];\n\tif (_.options.served.indexOf(url) >= 0) return;\n\n\treturn new Promise((resolve) => {\n\t\turlToText(_, match, url, true).then(function (text) {\n\t\t\tif (!text) resolve();\n\t\t\t_.options.served.push(url);\n\t\t\t_.embeds.push({\n\t\t\t\ttext : text,\n\t\t\t\tindex: match.index\n\t\t\t});\n\t\t\tresolve()\n\t\t})\n\t})\n}\n\n/**\n * A helper function for normal embedding\n * @param  {object} _\n * @param  {function} urlToText\n * @return {Promise}\n */\nfunction normalAsyncEmbed(_, urlToText) {\n\tlet match, promises = [];\n\twhile ((match = matches(_.regex, _.input)) !== null)\n\t\tpromises.push(getNormalData(_, urlToText, match));\n\treturn new Promise(function (resolve) {\n\t\tPromise.all(promises).then(function () {\n\t\t\tresolve(_.embeds)\n\t\t});\n\t})\n}\n\nexport default function asyncEmbed(_, urlToText) {\n\treturn new Promise(function (resolve) {\n\t\tif (ifInline(_.options, _.service))\n\t\t\tinlineAsyncEmbed(_, urlToText).then((output) => resolve([output, _.embeds]));\n\t\telse\n\t\t\tnormalAsyncEmbed(_, urlToText).then((embeds) => resolve([_.output, embeds]))\n\t})\n}\n","import fetchJsonp from 'fetch-jsonp'\nimport { asyncEmbed } from '../../helpers'\nimport regex from '../regex'\n\nexport default class Twitter {\n\tconstructor(input, output, options, embeds) {\n\t\tthis.input   = input;\n\t\tthis.output  = output;\n\t\tthis.options = options;\n\t\tthis.embeds  = embeds;\n\t\tthis.regex   = regex.twitter;\n\t\tthis.service = 'twitter';\n\n\t\tthis.load = this.load.bind(this);\n\t\tif(typeof this.options.input !== 'string'){\n\t\t\tthis.options.input.addEventListener('rendered', this.load, false);\n\t\t}\n\t}\n\n\t/**\n\t * Fetches the data from twitter's oEmbed API\n\t * @param  {string} url URL of the tweet\n\t * @return {object}     data containing the tweet info\n\t */\n\ttweetData(url) {\n\t\tlet config = this.options.tweetOptions;\n\t\tlet apiUrl = `https://api.twitter.com/1/statuses/oembed.json?omit_script=true&url=${url}&maxwidth=${config.maxWidth}&hide_media=${config.hideMedia}&hide_thread=${config.hideThread}&align=${config.align}&lang=${config.lang}`;\n\t\treturn new Promise((resolve) => {\n\t\t\tfetchJsonp(apiUrl, {credentials: 'include'})\n\t\t\t\t.then((data)=>data.json())\n\t\t\t\t.then((json)=>resolve(json))\n\t\t})\n\t}\n\n\t/**\n\t * Load twitter widgets\n\t * @return null\n\t */\n\tload() {\n\t\tconst twitter = this.options.plugins.twitter;\n\t\ttwitter.widgets.load(this.options.element); //here this refers to the element\n\n\t\t//Execute the function after the widget is loaded\n\t\ttwitter.events.bind('loaded', this.options.onTweetsLoad);\n\t}\n\n\tstatic urlToText(_this, match, url) {\n\t\treturn new Promise((resolve) => _this.tweetData(url).then((data) => resolve(data.html)))\n\t}\n\n\tprocess() {\n\t\treturn new Promise((resolve) => asyncEmbed(this, Twitter.urlToText).then((data) => resolve(data)))\n\t}\n}\n","export default function fetch(url, options) {\n\toptions = options || {};\n\treturn new Promise( (resolve, reject) => {\n\t\tlet request = new XMLHttpRequest();\n\n\t\tfor (let i in options.headers) {\n\t\t\trequest.setRequestHeader(i, options.headers[i]);\n\t\t}\n\n\t\trequest.open(options.method || 'get', url);\n\n\t\trequest.onload = () => {\n\t\t\tresolve(response(request));\n\t\t};\n\n\t\trequest.onerror = () => {\n\t\t\treject(Error('Network Error'));\n\t\t};\n\n\t\trequest.send(options.body || null);\n\n\t\tfunction response(xhr) {\n\t\t\tlet headerText = xhr.getAllResponseHeaders(),\n\t\t\t\tkeys = [],\n\t\t\t\tall = [],\n\t\t\t\theaders = {},\n\t\t\t\treg = /^\\s*(.*?)\\s*\\:\\s*([\\s\\S]*?)\\s*$/gm,\n\t\t\t\tmatch, key;\n\t\t\twhile ((match=reg.exec(headerText))) {\n\t\t\t\tkeys.push(key = match[1].toLowerCase());\n\t\t\t\tall.push([key, match[2]]);\n\t\t\t\theaders[key] = (headers[key]?(headers[key]+','):'') + match[2];\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttype: 'cors',\n\t\t\t\tok: xhr.status/200|0 == 1,\t\t// 200-399\n\t\t\t\tstatus: xhr.status,\n\t\t\t\tstatusText: xhr.statusText,\n\t\t\t\turl: xhr.responseURL,\n\t\t\t\tclone: () => response(xhr),\n\t\t\t\ttext: () => Promise.resolve(xhr.responseText),\n\t\t\t\tjson: () => Promise.resolve(xhr.responseText).then(JSON.parse),\n\t\t\t\txml: () => Promise.resolve(xhr.responseXML),\n\t\t\t\tblob: () => Promise.resolve(xhr.response),\n\t\t\t\theaders: {\n\t\t\t\t\tkeys: () => keys,\n\t\t\t\t\tentries: () => all,\n\t\t\t\t\tget: n => headers[n.toLowerCase()],\n\t\t\t\t\thas: n => !!headers[n.toLowerCase()]\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t});\n}\n","import {ifInline, matches} from '../utils'\nimport regex from '../regex'\nimport fetch from 'unfetch'\n\n/**\n * Takes the location name and returns the coordinates of that location using the Google\n * Map API v3. This is an async function so it will return a promise.\n * @param  {string} location The name of any location\n * @return {array}           Returns an array in the form [latitude, longitude]\n */\nfunction getCoordinate(location) {\n\tlet url = `http://maps.googleapis.com/maps/api/geocode/json?address=${location}&sensor=false`;\n\treturn new Promise((resolve) => {\n\t\tfetch(url)\n\t\t\t.then((data) => data.json())\n\t\t\t.then((json) => resolve([json.results[0].geometry.location.lat, json.results[0].geometry.location.lng]))\n\t})\n}\n\n/**\n * Returns the template of the Map widget. The source of the iframe is based on whether the\n * mode set in options is 'place', 'streetview' or 'view'.\n * @param  {string} match     The matching string in the form of @(location name).\n * @param  {number} latitude  Latitude of the location\n * @param  {number} longitude Longitude of the location\n * @param  {object} options   plugin options\n * @return {string}           Template of the map widget.\n */\nfunction template(match, latitude, longitude, options) {\n\tconst location = locationText(match);\n\treturn options.template.gmap(latitude, longitude, location, options);\n}\n\n/**\n * Extracts out the location name from the format @(locationName)\n * @param  {string} match The string in the supported format. Eg : @(Delhi)\n * @return {string}       Only the location name removing @ and brackets. Eg: Delhi\n */\nfunction locationText(match) {\n\treturn match.split('(')[1].split(')')[0]\n}\n\nexport default function (input, output, options, embeds) {\n\tlet match, promises = [], allMatches = [];\n\n\tconst service = 'map';\n\n\twhile ((match = matches(regex.gmap, output)) !== null) {\n\t\toptions.served.push(match);\n\t\tconst promise = options.mapOptions.mode !== 'place' ? getCoordinate(match[0]) : Promise.resolve([null, null]);\n\t\tpromises.push(promise);\n\t\tallMatches.push(match)\n\t}\n\n\treturn new Promise((resolve) => {\n\t\tPromise.all(promises).then((coordinatesArr) => {\n\t\t\tfor (var i in promises) {\n\t\t\t\tlet [latitude, longitude] = coordinatesArr[i];\n\t\t\t\tlet text = template((allMatches[i])[0], latitude, longitude, options);\n\t\t\t\tif (ifInline(options, service)) {\n\t\t\t\t\toutput = output.replace(regex.gmap, (regexMatch) => {\n\t\t\t\t\t\treturn `<span class=\"ejs-location\">${locationText(regexMatch)}</span>${text}`\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tembeds.push({\n\t\t\t\t\t\ttext : text,\n\t\t\t\t\t\tindex: allMatches[i][0].index\n\t\t\t\t\t});\n\t\t\t\t\toutput = output.replace(regex.gmap, (regexMatch) => {\n\t\t\t\t\t\treturn `<span class=\"ejs-location\">${locationText(regexMatch)}</span>`\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tresolve([output, embeds])\n\t\t})\n\t})\n}\n","export default function (output, options) {\n\tif (!options.plugins.marked) throw new ReferenceError(`marked.js is not loaded.`);\n\n\tconst Marked = options.plugins.marked;\n\tconst renderer = new Marked.Renderer();\n\n\trenderer.link = (href, title, text) => {\n\t\tif (href.indexOf('&lt;/a') === -1) return href;\n\t\tif (href.match(/&gt;(.+)&lt;\\/a/gi)) {\n\t\t\tif (!title) title = '';\n\t\t\treturn `<a href=\"${RegExp.$1}\" rel=${options.linkOptions.rel}\" target=\"${options.linkOptions.target}\" title=\"${title}\">${text}</a>`\n\t\t}\n\t};\n\n\trenderer.image = (href, title, text) => {\n\t\tif (href.match(/&gt;(.+)&lt;\\/a/gi)) {\n\t\t\tif (!title) title = '';\n\t\t\treturn `<div class=\"ejs-image ejs-embed\"><div class=\"ne-image-wrapper\"><img src=\"${RegExp.$1}\" title=\"${title}\" alt=\"${text}\"/></div></div>`\n\t\t}\n\t\treturn `<div class=\"ejs-image ejs-embed\"><div class=\"ne-image-wrapper\"><img src=\"${href}\" title=\"${title}\" alt=\"${text}\"/></div></div>`\n\t};\n\n\trenderer.paragraph = (text) => `<p> ${text} </p>`; //for font smiley in end.\n\n\t//Fix for heading that should be actually present in marked.js\n\t//if gfm is true the `## Heading` is acceptable but `##Heading` is not\n\tMarked.Lexer.rules.gfm.heading    = Marked.Lexer.rules.normal.heading;\n\tMarked.Lexer.rules.tables.heading = Marked.Lexer.rules.normal.heading;\n\n\toptions.markedOptions.renderer = renderer;\n\toptions.markedOptions.highlight = false;\n\treturn Marked(output, options.markedOptions)\n}\n","import regex from '../regex'\n\n/**\n * Encodes the characters like <, > and space and replaces them with\n * &lt;, &gt; and &gt; respectively.\n * @param  {string} code The string that has to be encoded.\n * @return {string}      The encoded string\n */\nfunction encode(code) {\n\tcode = code.replace(/&amp;/gm, '');\n\tcode = code.replace(/&lt;/g, '<');\n\tcode = code.replace(/&gt;/g, '>');\n\treturn code;\n}\n\n/**\n * removes whitespace characters\n * @param  {string} code The string from which the whitespace has to be removed\n * @return {string}\n */\nfunction trimSpace(code) {\n\tcode = code.replace(/^([ \\t]*)/g, ''); // leading whitespace\n\tcode = code.replace(/[ \\t]*$/g, ''); // trailing whitespace\n\treturn code;\n}\n\n\n/**\n * Places the code and the language name in the required template\n * @param {string} processedCode\n * @param {string} language\n * @return {string}\n */\nfunction addTemplate(processedCode, language) {\n\treturn `<pre><code class=\"ejs-code hljs ${language}\">${processedCode.value || processedCode}</code></pre>`\n}\n\n\n/**\n * Replaces the code block with the pre tags and returns a string having the code\n * formatting using Highlight.js.\n * => Matches the string with the regex and finds the code written in three back-ticks ```\n * => Detects whether any language has been provided by the user.\n *     The format supported by embed.js is\n *         ```[language-name]\n *         var a = 2;\n *         ```\n * => Trims all the unnecessary spaces and newlines from the code.\n * => Passes the code to `hljs.highlightAuto(code, language)` which returns a formatted string\n *     having the html tags for styling. The `language` here is optional. In case we don't pass the\n *     language, it tries to detect the language itself.\n * => Replaces the code string in the template with the formatted string\n * @return {string} The string in which the code is formatted\n */\nexport default function (output, options) {\n\toutput = output.replace(regex.inlineCode, function (match, group1, group2) {\n\t\treturn `<code>${group2}</code>`\n\t});\n\n\treturn output.replace(regex.highlightCode, (match, group1, group2, group3) => {\n\t\tlet code = group3;\n\t\tcode     = trimSpace(code);\n\t\tcode     = encode(code);\n\n\t\t// to prevent auto-linking. Not necessary in code\n\t\t// *blocks*, but in code spans. Will be converted\n\t\t// back after the auto-linker runs.\n\t\tcode = code.replace(/:\\/\\//g, '~P');\n\n\t\tlet language = group2.split('\\n')[0];\n\t\tlet highlightedCode;\n\n\t\tconst HighlightJS = options.plugins.highlightjs;\n\t\tif (language) {\n\t\t\thighlightedCode = HighlightJS.highlightAuto(code, [language]);\n\t\t} else {\n\t\t\thighlightedCode = HighlightJS.highlightAuto(code);\n\t\t\tlanguage        = highlightedCode.language;\n\t\t}\n\n\t\treturn addTemplate(highlightedCode, language);\n\t});\n}\n","import regex from '../regex'\nimport { embed } from '../../helpers'\n\nexport default class Gist {\n\tconstructor(input, output, options, embeds) {\n\t\tthis.input   = input;\n\t\tthis.output  = output;\n\t\tthis.options = options;\n\t\tthis.embeds  = embeds;\n\t\tthis.regex   = regex.gist;\n\t\tthis.service = 'gist';\n\n\t\tif(typeof this.options.input !== 'string'){\n\t\t\tthis.options.input.addEventListener('rendered', () => {\n\t\t\t\tthis.load()\n\t\t\t})\n\t\t}\n\t}\n\n\ttemplate(match) {\n\t\treturn `<div class=\"ejs-gist\" data-src=\"${match}\"></div>`\n\t}\n\n\tload() {\n\t\tlet gists = this.options.input.getElementsByClassName('ejs-gist');\n\t\tfor (let i = 0; i < gists.length; i++) {\n\t\t\tlet gistFrame = document.createElement(\"iframe\");\n\t\t\tgistFrame.setAttribute(\"width\", \"100%\");\n\t\t\tgistFrame.id = `ejs-gist-${i}`;\n\n\t\t\tlet zone       = gists[i];\n\t\t\tzone.innerHTML = \"\";\n\t\t\tzone.appendChild(gistFrame);\n\n\t\t\t// Create the iframe's document\n\t\t\tlet url           = gists[i].getAttribute('data-src');\n\t\t\turl               = url.indexOf('http') === -1 ? `https://${url}` : url;\n\t\t\tlet gistFrameHTML = `<html><base target=\"_parent\"/><body onload=\"parent.document.getElementById('ejs-gist-${i}').style.height=parseInt(document.body.scrollHeight)+20+'px'\"><script type=\"text/javascript\" src=\"${url}.js\"></script></body></html>`;\n\n\t\t\t// Set iframe's document with a trigger for this document to adjust the height\n\t\t\tlet gistFrameDoc = gistFrame.document;\n\n\t\t\tif (gistFrame.contentDocument) {\n\t\t\t\tgistFrameDoc = gistFrame.contentDocument;\n\t\t\t} else if (gistFrame.contentWindow) {\n\t\t\t\tgistFrameDoc = gistFrame.contentWindow.document;\n\t\t\t}\n\n\t\t\tgistFrameDoc.open();\n\t\t\tgistFrameDoc.writeln(gistFrameHTML);\n\t\t\tgistFrameDoc.close();\n\t\t}\n\t}\n\n\tprocess() {\n\t\treturn embed(this);\n\t}\n}\n","import { truncate } from '../utils'\nimport { getDetailsTemplate, template, asyncEmbed } from '../../helpers'\nimport fetch from 'unfetch'\nimport regex from '../regex'\n\nfunction formatData(data) {\n\treturn {\n\t\ttitle         : data.snippet.title,\n\t\tthumbnail     : data.snippet.thumbnails.medium.url,\n\t\trawDescription: data.snippet.description,\n\t\tviews         : data.statistics.viewCount,\n\t\tlikes         : data.statistics.likeCount,\n\t\tdescription   : truncate(data.snippet.description, 150),\n\t\turl           : `https://www.youtube.com/watch?v=${data.id}`,\n\t\tid            : data.id,\n\t\thost          : 'youtube'\n\t}\n}\n\nfunction data(id, options) {\n\tlet url      = `https://www.googleapis.com/youtube/v3/videos?id=${id}&key=${options.googleAuthKey}&part=snippet,statistics`;\n\treturn new Promise((resolve) => {\n\t\tfetch(url)\n\t\t\t.then((data) => data.json())\n\t\t\t.then((json) => resolve(json.items[0]))\n\t})\n}\n\nfunction urlToText(args, match, url, normalEmbed) {\n\tlet id       = normalEmbed ? match[1] : match[2];\n\tlet embedUrl = `https://www.youtube.com/embed/${id}`;\n\tif (args.options.videoDetails) {\n\t\treturn new Promise((resolve) => {\n\t\t\tdata(id, args.options).then((data) => resolve(getDetailsTemplate(formatData(data), data, embedUrl, args.options)))\n\t\t})\n\t} else {\n\t\treturn new Promise((resolve) => resolve(template(embedUrl, args.options)))\n\t}\n}\n\nexport default function (input, output, options, embeds) {\n\tconst args = {\n\t\tinput,\n\t\toutput,\n\t\toptions,\n\t\tembeds,\n\t\tregex  : regex.youtube,\n\t\tservice: 'youtube'\n\t};\n\n\treturn new Promise((resolve) => asyncEmbed(args, urlToText).then((data) => resolve(data)))\n}\n","import {truncate} from '../utils'\nimport {getDetailsTemplate, template, asyncEmbed} from '../../helpers'\nimport fetch from 'unfetch'\nimport regex from '../regex'\n\n\nfunction formatData(data, truncate) {\n\treturn {\n\t\ttitle         : data.title,\n\t\tthumbnail     : data.thumbnail_medium,\n\t\trawDescription: data.description.replace(/\\n/g, '<br/>').replace(/&#10;/g, '<br/>'),\n\t\tviews         : data.stats_number_of_plays,\n\t\tlikes         : data.stats_number_of_likes,\n\t\tdescription   : truncate(data.description.replace(/((<|&lt;)br\\s*\\/*(>|&gt;)\\r\\n)/g, ' '), 150),\n\t\turl           : data.url,\n\t\tid            : data.id,\n\t\thost          : 'vimeo'\n\t}\n}\n\nfunction data(id) {\n\tlet url = `https://vimeo.com/api/v2/video/${id}.json`;\n\treturn new Promise((resolve) => {\n\t\tfetch(url)\n\t\t\t.then((data) => data.json())\n\t\t\t.then((json) => resolve(json[0]))\n\t})\n}\n\nfunction urlToText(args, match, url, normalEmbed) {\n\tlet id;\n\tif (!normalEmbed) {\n\t\tid = args.options.link ? match[0].slice(0, -4).split('/').slice(-1).pop() : match[0].split('/').slice(-1).pop();\n\t} else {\n\t\tid = match[3]\n\t}\n\tif (!id) return;\n\tlet embedUrl = `https://player.vimeo.com/video/${id}`;\n\tif (args.options.videoDetails) {\n\t\treturn new Promise((resolve) => {\n\t\t\tdata(id).then((data) => resolve(getDetailsTemplate(formatData(data, truncate), data, embedUrl, args.options)))\n\t\t})\n\t} else {\n\t\treturn new Promise((resolve) => resolve(template(embedUrl, args.options)))\n\t}\n\n}\n\nexport default function (input, output, options, embeds) {\n\tconst args = {\n\t\tinput,\n\t\toutput,\n\t\toptions,\n\t\tembeds,\n\t\tregex  : regex.vimeo,\n\t\tservice: 'vimeo'\n\t};\n\n\treturn new Promise((resolve) => asyncEmbed(args, urlToText).then((data) => resolve(data)))\n}\n","import {asyncEmbed} from '../../helpers'\nimport fetchJsonp     from 'fetch-jsonp'\nimport regex from '../regex'\n\nfunction fetchData(args, url) {\n\tlet api = `http://www.slideshare.net/api/oembed/2?url=${url}&format=jsonp&maxwidth=${args.options.videoWidth}&maxheight=${args.options.videoHeight}`;\n\treturn new Promise((resolve) => {\n\t\tfetchJsonp(api, {credentials: 'include'})\n\t\t\t.then((data) => data.json())\n\t\t\t.then((json) => resolve(json.html))\n\t})\n}\n\nfunction urlToText(args, match, url) {\n\treturn new Promise((resolve) => {\n\t\tfetchData(args, url).then((html) => resolve(args.template(html)))\n\t})\n}\n\nexport default function (input, output, options, embeds) {\n\tconst args = {\n\t\tinput, output, options, embeds,\n\t\tregex: regex.slideShare,\n\t\tservice: 'slideshare',\n\t\ttemplate(html) {\n\t\t\treturn this.options.template.slideShare(html, this.options)\n\t\t}\n\t};\n\n\treturn new Promise((resolve) => asyncEmbed(args, urlToText).then((data) => resolve(data)))\n}\n","import { urlRegex } from './utils'\nimport { asyncEmbed } from '../helpers'\nimport fetch from 'unfetch'\n\nfunction fetchData(url, _) {\n\turl     = encodeURIComponent(url);\n\tlet api = new Function('url', 'return `' + _.options.openGraphEndpoint + '`')(url);\n\treturn new Promise((resolve) => {\n\t\tfetch(api)\n\t\t\t.then((res)=>res.json())\n\t\t\t.then((json)=>resolve(_.options.onOpenGraphFetch(json) || json))\n\t})\n}\n\nfunction urlToText(_, match, url) {\n\tif (url.match(_.excludeRegex)) return Promise.resolve();\n\n\treturn new Promise((resolve) => {\n\t\tfetchData(url, _).then((data) => resolve(data && data.success ? _.template(data) : ''))\n\t})\n}\n\nexport default function (input, output, options, embeds) {\n\tconst args = {\n\t\tinput,\n\t\toutput,\n\t\toptions,\n\t\tembeds,\n\t\tservice     : 'opengraph',\n\t\tregex       : urlRegex(),\n\t\texcludeRegex: new RegExp(['.mp4|.mp3|.gif|.pdf|.doc|.ppt|.docx|.jpg|.jpeg|.ogg'].concat(options.openGraphExclude).join('|'), 'gi'),\n\t\ttemplate(data) {\n\t\t\treturn this.options.template.openGraph(data, this.options)\n\t\t}\n\t};\n\n\treturn new Promise((resolve) => asyncEmbed(args, urlToText).then((data) => resolve(data)))\n}\n","import {asyncEmbed} from '../helpers'\nimport regex from './regex'\nimport fetch from 'unfetch'\n\nfunction template(data, options) {\n\treturn options.template.github(data, options);\n}\n\nfunction fetchRepo(data) {\n\tlet api = `https://api.github.com/repos/${data.user}/${data.repo}`;\n\treturn new Promise((resolve) => {\n\t\tfetch(api)\n\t\t\t.then(function (data) {\n\t\t\t\treturn data.json()\n\t\t\t})\n\t\t\t.then(function (json) {\n\t\t\t\treturn resolve(json)\n\t\t\t})\n\t})\n}\n\nfunction urlToText(_this, match, url, normalEmbed) {\n\tlet data = !normalEmbed ? ({\n\t\tuser: match[2],\n\t\trepo: match[3]\n\t}) : ({\n\t\tuser: match[1],\n\t\trepo: match[2]\n\t});\n\n\tif (!data.repo) return;\n\treturn new Promise(function (resolve) {\n\t\tfetchRepo(data)\n\t\t\t.then(function (response) {\n\t\t\t\treturn resolve(template(response, _this.options))\n\t\t\t})\n\t})\n}\n\nexport default function (input, output, options, embeds) {\n\tconst args = {\n\t\tinput, output, options, embeds,\n\t\tservice: 'github',\n\t\tregex  : regex.github\n\t};\n\n\treturn new Promise((resolve) => asyncEmbed(args, urlToText).then((data) => resolve(data)))\n}\n","import regex from './regex';\n\nexport default function (input, options) {\n\tconst mRegex = regex.mentions;\n\treturn input.replace(mRegex,(match, $1, $2) => {\n\t\tconst username = $2.split('@')[1];\n\t\treturn $1 + options.mentionsUrl(username);\n\t})\n}\n","import regex from './regex';\n\nexport default function (input, options) {\n\tconst hRegex = regex.hashtag;\n\treturn input.replace(hRegex,(match, $1, $2)=>{\n\t\tconst username = $2.split('#')[1];\n\t\treturn $1 + options.hashtagUrl(username);\n\t})\n}\n","import { ifEmbed, createText, deepExtend, cloneObject, processOptions } from './modules/utils'\n\nimport renderer    from './modules/template'\n\nimport emoji       from './modules/emoticons/emoji'\nimport smiley      from './modules/emoticons/smiley'\nimport url         from './modules/url'\n\nimport Twitter     from './modules/twitter/twitter'\nimport gmap        from './modules/map/map'\nimport markdown    from './modules/markdown'\n\nimport highlight   from './modules/code/highlight'\nimport Gist        from './modules/code/gist'\n\nimport youtube     from './modules/video/youtube'\nimport vimeo       from './modules/video/vimeo'\n\nimport slideShare  from './modules/image/slideshare'\n\nimport openGraph   from './modules/openGraph'\nimport github      from './modules/github'\n\nimport mentions    from './modules/mentions';\nimport hashtag     from './modules/hashtag';\n\nimport regex from './modules/regex'\n\nimport { applyPlyr, applyVideoJS, playVideo, destroyVideos, baseEmbed } from './helpers'\n\nlet globalOptions = {};\n\nconst defaultOptions = {\n\tmarked: false,\n\tmarkedOptions: {},\n\tlink: true,\n\tlinkOptions: {\n\t\ttarget: 'self',\n\t\texclude: ['pdf'],\n\t\trel: ''\n\t},\n\temoji: true,\n\tcustomEmoji: [],\n\tfontIcons: true,\n\tcustomFontIcons: [],\n\thighlightCode: false,\n\tmentions: false,\n\thashtag: false,\n\tvideoJS: false,\n\tvideojsOptions: {\n\t\tfluid: true,\n\t\tpreload: 'metadata'\n\t},\n\tplyr: false,\n\tplyrOptions: {},\n\tlocationEmbed: true,\n\tmapOptions: {\n\t\tmode: 'place'\n\t},\n\ttweetsEmbed: false,\n\ttweetOptions: {\n\t\tmaxWidth: 550,\n\t\thideMedia: false,\n\t\thideThread: false,\n\t\talign: 'none',\n\t\tlang: 'en'\n\t},\n\tsingleEmbed: false,\n\topenGraphEndpoint: null,\n\topenGraphExclude: [],\n\tvideoEmbed: true,\n\tvideoHeight: null,\n\tvideoWidth: null,\n\tvideoDetails: true,\n\taudioEmbed: true,\n\timageEmbed: true,\n\texcludeEmbed: [],\n\tinlineEmbed: [],\n\tinlineText: true,\n\tcodeEmbedHeight: 500,\n\tvineOptions: {\n\t\tmaxWidth: null,\n\t\ttype: 'postcard', //'postcard' or 'simple' embedding\n\t\tresponsive: true,\n\t\twidth: 350,\n\t\theight: 460\n\t},\n\tplugins: {\n\t\tmarked: window.marked,\n\t\tvideojs: window.videojs,\n\t\tplyr: window.plyr,\n\t\thighlightjs: window.hljs,\n\t\tprismjs: window.Prism,\n\t\ttwitter: window.twttr\n\t},\n\tgoogleAuthKey: '',\n\tsoundCloudOptions: {\n\t\theight: 160,\n\t\tthemeColor: 'f50000', //Hex Code of the player theme color\n\t\tautoPlay: false,\n\t\thideRelated: false,\n\t\tshowComments: true,\n\t\tshowUser: true,\n\t\tshowReposts: false,\n\t\tvisual: false, //Show/hide the big preview image\n\t\tdownload: false //Show/Hide download buttons\n\t},\n\tvideoClickClass: 'ejs-video-thumb',\n\tcustomVideoClickHandler: false,\n\tmentionsUrl: function () {\n\t},\n\thashtagUrl: function () {\n\t},\n\tbeforeEmbedJSApply: function () {\n\t},\n\tafterEmbedJSApply: function () {\n\t},\n\tonVideoShow: function () {\n\t},\n\tonTweetsLoad: function () {\n\t},\n\tvideojsCallback: function () {\n\t},\n\tonOpenGraphFetch: function () {\n\t},\n\tonOpenGraphFail: function () {\n\t},\n\tvideoClickHandler: function () {\n\t},\n\tserved: [] //Private variable used to store processed urls so that they are not processed multiple times.\n};\n\nlet instances = [];\nlet allInstances = [];\nlet promises = [];\n\nexport default class EmbedJS {\n\t/**\n\t * The constructor takes two arguments. The first one is the options object and the second one is the\n\t * optional string . If the user wants to provide a string directly instead of the element, he can do that.\n\t * In case the user provides both the input element and the string, the input string will be taken from the element\n\t * and the provided string won't be processed.\n\t *\n\t * @param  {object} options The options object\n\t * @param template\n\t * @return {null}\n\t */\n\tconstructor(options, template) {\n\t\t/**\n\t\t * We have created a clone of the original options to make sure that the original object\n\t\t * isn't altered.\n\t\t */\n\t\tlet defOpts = cloneObject(defaultOptions);\n\t\tlet globOpts = cloneObject(globalOptions);\n\n\t\t//merge global options with the default options\n\t\tlet globOptions = deepExtend(defOpts, globOpts);\n\n\t\t//deepExtend global options with the overriding options provided by the user as an options\n\t\t//object while creating a new instance of embed.js\n\t\tthis.options = deepExtend(globOptions, options);\n\n\t\tthis.options.template = deepExtend(renderer, template);\n\n\t\tif (!(typeof this.options.input === 'string' || typeof this.options.input === 'object')) throw ReferenceError(\"You need to pass an element or the string that needs to be processed\");\n\n\t\tthis.input = (typeof this.options.input === 'object') ? this.options.input.innerHTML : this.options.input\n\n\t}\n\n\t/**\n\t * Processes the string and performs all the insertions and manipulations based on\n\t * the options and the input provided by the user. This returns a promise which is resolved once the result data is ready\n\t * @return {Promise} The processes resulting string\n\t */\n\tprocess() {\n\t\tconst input = this.input;\n\n\t\tif (input === '') return Promise.resolve('');\n\n\t\tconst options = processOptions(this.options);\n\t\tlet embeds = [];\n\t\tlet output = input;\n\n\t\tthis.options.beforeEmbedJSApply();\n\n\t\treturn new Promise((resolve) => {\n\t\t\tif (options.link)\n\t\t\t\toutput = url(input, options);\n\n\t\t\tconst openGraphPromise = options.openGraphEndpoint ? openGraph(input, output, options, embeds) : Promise.resolve([output, embeds]);\n\n\t\t\topenGraphPromise.then(function ([output, embeds]) {\n\t\t\t\tif (options.highlightCode) {\n\t\t\t\t\toutput = highlight(output, options)\n\t\t\t\t}\n\t\t\t\tif (options.marked) {\n\t\t\t\t\toutput = markdown(output, options)\n\t\t\t\t}\n\t\t\t\tif (options.emoji) {\n\t\t\t\t\toutput = emoji(output, options)\n\t\t\t\t}\n\t\t\t\tif (options.fontIcons) {\n\t\t\t\t\toutput = smiley(output, options)\n\t\t\t\t}\n\t\t\t\tif (options.mentions) {\n\t\t\t\t\toutput = mentions(output, options);\n\t\t\t\t}\n\t\t\t\tif (options.hashtag) {\n\t\t\t\t\toutput = hashtag(output, options);\n\t\t\t\t}\n\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.ideone, 'ideone');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.plunker, 'plunker');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.jsbin, 'jsbin');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.codepen, 'codepen');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.jsfiddle, 'jsfiddle');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.ted, 'ted');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.dailymotion, 'dailymotion');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.ustream, 'ustream');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.liveleak, 'liveleak');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.basicVideo, 'video', options.videoEmbed);\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.vine, 'vine');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.soundCloud, 'soundcloud');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.spotify, 'spotify');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.basicAudio, 'audio', options.audioEmbed);\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.flickr, 'flickr');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.instagram, 'instagram');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.basicImage, 'image', options.imageEmbed);\n\n\t\t\t\tif (ifEmbed(options, 'gist')) {\n\t\t\t\t\t[output, embeds] = new Gist(input, output, options, embeds).process()\n\t\t\t\t}\n\n\t\t\t\treturn ifEmbed(options, 'youtube') ? youtube(input, output, options, embeds) : Promise.resolve([output, embeds]);\n\t\t\t}).then(function ([output, embeds]) {\n\t\t\t\treturn ifEmbed(options, 'vimeo') ? vimeo(input, output, options, embeds) : Promise.resolve([output, embeds]);\n\t\t\t}).then(function ([output, embeds]) {\n\t\t\t\treturn ifEmbed(options, 'github') ? github(input, output, options, embeds) : Promise.resolve([output, embeds]);\n\t\t\t}).then(function ([output, embeds]) {\n\t\t\t\treturn options.locationEmbed && ifEmbed(options, 'gmap') ? gmap(input, output, options, embeds) : Promise.resolve([output, embeds])\n\t\t\t}).then(function ([output, embeds]) {\n\t\t\t\treturn ifEmbed(options, 'slideshare') ? slideShare(input, output, options, embeds) : Promise.resolve([output, embeds]);\n\t\t\t}).then(([output, embeds]) => {\n\t\t\t\tif (options.tweetsEmbed && ifEmbed(options, 'twitter')) {\n\t\t\t\t\tthis.twitter = new Twitter(input, output, options, embeds);\n\t\t\t\t\treturn this.twitter.process()\n\t\t\t\t} else {\n\t\t\t\t\treturn Promise.resolve([output, embeds])\n\t\t\t\t}\n\t\t\t}).then(([output, embeds]) => {\n\t\t\t\tthis.data = {\n\t\t\t\t\tinput: options.input,\n\t\t\t\t\toutput,\n\t\t\t\t\toptions,\n\t\t\t\t\tinputString: this.input,\n\t\t\t\t\tservices: options.served,\n\t\t\t\t\ttemplate: options.template\n\t\t\t\t};\n\n\t\t\t\tresolve(createText(output, embeds))\n\n\t\t\t})\n\t\t})\n\t}\n\n\t/**\n\t * First processes the data by calling the .process() and then renders the data in the div\n\t * => Loads the twitter widgets\n\t * => Executes the onTweetsLoad() once all the tweets have been rendered\n\t * => Applies video.js on the media (both audio and video)\n\t * => Triggers video loading on click of the video preview\n\t * => Executes afterEmbedJSApply() once everything is done.\n\t *\n\t * @return Promise\n\t */\n\trender() {\n\t\tif (typeof this.options.input === 'string') throw new Error(`You cannot call render method for a string`);\n\t\tif (!this.options.input) throw new Error(`You didn't pass an element while creating this instance. render() method can't work without an input element`);\n\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.process().then((data) => {\n\t\t\t\tthis.options.input.innerHTML = data;\n\t\t\t\tthis.applyListeners();\n\t\t\t\tresolve(this.data);\n\t\t\t})\n\t\t})\n\t}\n\n\t/**\n\t * This method listens to all the events like click, handle\n\t * events to be done after an element has been rendered. These\n\t * include twitter widget rendering, gist embedding, click event listeners .\n\t */\n\tapplyListeners() {\n\t\tapplyVideoJS(this.options);\n\t\tapplyPlyr(this.options);\n\n\t\tplayVideo(this.options);\n\n\t\tlet event = new Event('rendered');\n\t\tthis.options.input.dispatchEvent(event);\n\n\t\tthis.options.afterEmbedJSApply();\n\t}\n\n\n\t/**\n\t * This function updates the parametrs of the current instance\n\t * @param options   New updated options object. will be extended with the older options\n\t * @param template  [optional] the new template instance\n\t */\n\tupdate(options, template) {\n\n\t\tif (options)\n\t\t\tthis.options = deepExtend(this.options, options);\n\n\t\tif (template)\n\t\t\tthis.options.template = template;\n\n\t\tif (!this.options.input || !(typeof this.options.input === 'string' || typeof this.options.input === 'object')) throw ReferenceError(\"You need to pass an element or the string that needs to be processed\");\n\n\t\tthis.input = (typeof this.options.input === 'object') ? this.options.input.innerHTML : this.options.input\n\t}\n\n\t/**\n\t * returns the resulting string based on the input and the options passed by the user.\n\t * @return Promise\n\t */\n\ttext(callback) {\n\t\tthis.process().then((data) => callback(data, this.input))\n\t}\n\n\t/**\n\t * The destroy method destroys all the listeners and replaces the rih text with the original text in the\n\t * element.\n\t * @return {null}\n\t */\n\tdestroy() {\n\t\tif (typeof this.options.input !== 'object') throw new Error(`destroy() method only works if an element had been passed in the options object`);\n\t\tdestroyVideos('ejs-video-thumb');\n\t\tif (this.options.tweetsEmbed)\n\t\t\tthis.options.input.removeEventListener('rendered', this.twitter.load(), false);\n\t\tthis.options.input.innerHTML = this.input\n\t}\n\n\t/**\n\t * Sets options globally\n\t * @param {object} options\n\t */\n\tstatic setOptions(options) {\n\t\tglobalOptions = deepExtend(defaultOptions, options)\n\t}\n\n\t/**\n\t * Applies embed.js to all the elements with the class name provided as option\n\t * @return {Promise}\n\t * @param selectorName\n\t * @param options\n\t * @param template\n\t */\n\tstatic applyEmbedJS(selectorName, options = {}, template = renderer) {\n\t\tlet elements = document.querySelectorAll(selectorName);\n\t\tfor (let i = 0; i < elements.length; i++) {\n\t\t\toptions.input = elements[i];\n\t\t\tinstances[i] = new EmbedJS(options, template);\n\t\t\tpromises[i] = instances[i].render()\n\t\t}\n\t\treturn new Promise(function (resolve) {\n\t\t\tPromise.all(promises).then(function (val) {\n\t\t\t\tresolve(val);\n\t\t\t})\n\t\t})\n\t}\n\n\t/**\n\t * Destroys all the instances of EmbedJS created by using applyEmbedJS() method.\n\t * @return {null}\n\t */\n\tstatic destroyEmbedJS() {\n\t\tfor (let i = 0; i < instances.length; i++) {\n\t\t\tinstances[i].destroy()\n\t\t}\n\t}\n\n\t/**\n\t * Destroys all instances of EmbedJS on the page\n\t * @return {null}\n\t */\n\tstatic destroyAll() {\n\t\tfor (let i = 0; i < allInstances.length; i++) {\n\t\t\tallInstances[i].destroy()\n\t\t}\n\t}\n\n\t/**\n\t * Creates a new instance of the Template constructor. This has been done so that multiple\n\t * templates of a single service can be used by creating different instances of the Template.\n\t *\n\t * The usage of the plugin is described below.\n\t *\n\t * => Create a new Instance of the template by using .Template() method of EmbedJS.\n\t *\n\t *        var template = EmbedJS.Template()\n\t *\n\t * => Now create different templates for different service names.\n\t *\n\t *        template.url = function(match, options){\n     * \t\t\treturn '<a href=\" + match + \"> + match + </a>'\n     * \t\t}\n\t *\n\t *        template.instagram = function(match, dimensions, options){\n     * \t\t\tvar config = options.soundCloudOptions;\n     * \t\t\treturn `<div class=\"ejs-embed ejs-instagram\"><iframe src=\"${toUrl(match.split('/?')[0])}/embed/\" height=\"${dimensions.height}\"></iframe></div>`;\n     * \t\t}\n\t *\n\t */\n\tstatic Template() {\n\t\treturn renderer;\n\t}\n}\n"],"names":["truncate","string","n","substr","length","toUrl","indexOf","deepExtend","destination","source","property","hasOwnProperty","constructor","Object","escapeRegExp","str","replace","sortObject","arr","sort","a","b","index","createText","embeds","sortedEmbeds","i","text","matches","regex","input","exec","ifEmbed","options","service","singleEmbed","served","excludeEmbed","ifInline","inlineEmbed","setDimensions","videoWidth","videoHeight","cloneObject","obj","temp","key","urlRegex","arrayLowercase","map","elem","toLowerCase","processOptions","lastElement","match","config","linkOptions","rel","target","pre","code","soundCloudOptions","autoPlay","hideRelated","showComments","showUser","showReposts","visual","download","themeColor","id","split","codeEmbedHeight","slice","html","splice","join","data","fullData","embedUrl","thumbnail","url","title","description","views","likes","vineOptions","type","height","width","plyr","image","owner","avatar_url","html_url","full_name","stargazers_count","network_count","latitude","longitude","location","mapOptions","mode","googleAuthKey","getEmoji","substring","output","smileys","customEmoji","emoji","template","defaultIcons","icons","customFontIcons","escapedSymbols","val","smileyRegex","RegExp","smiley","extension","exclude","global","factory","define","amd","exports","module","mod","fetchJsonp","this","defaultOptions","generateCallbackFunction","Date","now","Math","ceil","random","clearFunction","functionName","window","e","undefined","removeScript","scriptId","script","document","getElementById","getElementsByTagName","removeChild","_url","arguments","timeout","jsonpCallback","timeoutId","Promise","resolve","reject","callbackFunction","jsonpCallbackFunction","response","json","clearTimeout","jsonpScript","createElement","setAttribute","appendChild","setTimeout","Error","vimeo","youtube","playVideo","customVideoClickHandler","videoClickHandler","classes","getElementsByClassName","videoClickClass","onclick","onVideoShow","getAttribute","parentNode","innerHTML","host","detailsVimeo","detailsYoutube","plugins","ReferenceError","setup","plyrOptions","applyVideoJS","videojsOptions","videoJS","videojs","VideoJS","elements","videojsCallback","className","_","regexInline","link","push","inlineText","normalEmbed","embed","args","baseEmbed","flag","base","getInlineData","urlToText","then","inlineAsyncEmbed","promises","all","matched","getNormalData","normalAsyncEmbed","asyncEmbed","Twitter","twitter","load","bind","addEventListener","tweetOptions","apiUrl","maxWidth","hideMedia","hideThread","align","lang","credentials","widgets","element","events","onTweetsLoad","_this","tweetData","fetch","request","XMLHttpRequest","headers","setRequestHeader","open","method","onload","onerror","send","body","xhr","headerText","getAllResponseHeaders","keys","reg","status","statusText","responseURL","responseText","JSON","parse","responseXML","getCoordinate","results","geometry","lat","lng","locationText","gmap","allMatches","promise","coordinatesArr","regexMatch","marked","Marked","renderer","Renderer","href","$1","paragraph","Lexer","rules","gfm","heading","normal","tables","markedOptions","highlight","encode","trimSpace","addTemplate","processedCode","language","value","inlineCode","group1","group2","highlightCode","group3","highlightedCode","HighlightJS","highlightjs","highlightAuto","Gist","gist","gists","gistFrame","zone","gistFrameHTML","gistFrameDoc","contentDocument","contentWindow","writeln","close","formatData","snippet","thumbnails","medium","statistics","viewCount","likeCount","items","videoDetails","getDetailsTemplate","thumbnail_medium","stats_number_of_plays","stats_number_of_likes","pop","fetchData","api","slideShare","encodeURIComponent","Function","openGraphEndpoint","res","onOpenGraphFetch","excludeRegex","success","concat","openGraphExclude","openGraph","github","fetchRepo","user","repo","mRegex","mentions","$2","username","mentionsUrl","hRegex","hashtag","hashtagUrl","globalOptions","hljs","Prism","twttr","instances","allInstances","EmbedJS","defOpts","globOpts","globOptions","beforeEmbedJSApply","openGraphPromise","markdown","fontIcons","ideone","plunker","jsbin","codepen","jsfiddle","ted","dailymotion","ustream","liveleak","basicVideo","videoEmbed","vine","soundCloud","spotify","basicAudio","audioEmbed","flickr","instagram","basicImage","imageEmbed","process","locationEmbed","tweetsEmbed","applyListeners","event","Event","dispatchEvent","afterEmbedJSApply","callback","removeEventListener","selectorName","querySelectorAll","render","destroy"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;AAMA,AAAO,SAASA,QAAT,CAAkBC,MAAlB,EAA0BC,CAA1B,EAA6B;WACzBD,OAAOE,MAAP,CAAc,CAAd,EAAiBD,IAAI,CAArB,KAA2BD,OAAOG,MAAP,GAAgBF,CAAhB,GAAoB,KAApB,GAA4B,EAAvD,CAAP;;;;;;;;AAQJ,AAAO;;;;;;AAiBP,AAAO,SAASG,KAAT,CAAeJ,MAAf,EAAuB;WAClBA,OAAOK,OAAP,CAAe,IAAf,MAAyB,CAAC,CAA3B,GAAiC,OAAOL,MAAxC,GAAkDA,MAAzD;;;;;;;;;AASJ,AAAO,SAASM,UAAT,CAAoBC,WAApB,EAAiCC,MAAjC,EAAyC;SACvC,IAAIC,QAAT,IAAqBD,MAArB,EAA6B;YACrBA,OAAOE,cAAP,CAAsBD,QAAtB,KAAmCD,OAAOC,QAAP,CAAnC,IAAuDD,OAAOC,QAAP,EAAiBE,WAAjB,KAAiCC,MAA5F,EAAoG;wBACpFH,QAAZ,IAAwBF,YAAYE,QAAZ,KAAyB,EAAjD;uBACWF,YAAYE,QAAZ,CAAX,EAAkCD,OAAOC,QAAP,CAAlC;SAFJ,MAGO;wBACSA,QAAZ,IAAwBD,OAAOC,QAAP,CAAxB;;;WAGDF,WAAP;;;AAGJ,AAAO,SAASM,YAAT,CAAsBC,GAAtB,EAA2B;WACvBA,IAAIC,OAAJ,CAAY,oCAAZ,EAAkD,MAAlD,CAAP;;;;;;;;AAQJ,SAASC,UAAT,CAAoBC,GAApB,EAAyB;WACdA,IAAIC,IAAJ,CAAS,UAACC,CAAD,EAAIC,CAAJ;eAAWD,EAAEE,KAAF,GAAUD,EAAEC,KAAvB;KAAT,CAAP;;;;;;;;;AASJ,AAAO,SAASC,UAAT,CAAoBR,GAApB,EAAyBS,MAAzB,EAAiC;QAChCC,eAAeR,WAAWO,MAAX,CAAnB;SACK,IAAIE,IAAI,CAAb,EAAgBA,IAAID,aAAarB,MAAjC,EAAyCsB,GAAzC,EAA8C;qBAC/BD,aAAaC,CAAb,EAAgBC,IAA3B;;WAEGZ,GAAP;;;;;;;;;AASJ,AAAO,SAASa,OAAT,CAAiBC,KAAjB,EAAwBC,KAAxB,EAA+B;WAC3BD,MAAME,IAAN,CAAWD,KAAX,CAAP;;;;;;;;;;AAUJ,AAAO,SAASE,OAAT,CAAiBC,OAAjB,EAA0BC,OAA1B,EAAmC;QAClCD,QAAQE,WAAR,IAAuBF,QAAQG,MAAR,CAAehC,MAA1C,EAAkD;WACzC6B,QAAQI,YAAR,CAAqB/B,OAArB,CAA6B4B,OAA7B,KAAyC,CAAC,CAA3C,IAAiD,EAAED,QAAQI,YAAR,KAAyB,KAA3B,CAAzD;;;AAGJ,AAAO,SAASC,QAAT,CAAkBL,OAAlB,EAA2BC,OAA3B,EAAoC;WAC9BD,QAAQM,WAAR,CAAoBjC,OAApB,CAA4B4B,OAA5B,KAAwC,CAAzC,IAAgDD,QAAQM,WAAR,KAAwB,KAAhF;;;;;;;;AAQJ,SAASC,aAAT,CAAuBP,OAAvB,EAAgC;YACvBQ,UAAR,GAAqBR,QAAQQ,UAAR,IAAwBR,QAAQS,WAAT,GAAwB,CAAzB,GAA8B,CAApD,IAAyD,GAA9E;YACQA,WAAR,GAAsBT,QAAQS,WAAR,IAAyBT,QAAQQ,UAAT,GAAuB,CAAxB,GAA6B,CAApD,IAAyD,GAA/E;WACOR,OAAP;;;;;;;;AAQD,AAAO,SAASU,WAAT,CAAqBC,GAArB,EAA0B;QACzBA,QAAQ,IAAR,IAAgB,QAAOA,GAAP,qDAAOA,GAAP,OAAe,QAAnC,EAA6C,OAAOA,GAAP;QACzCC,OAAOD,IAAIhC,WAAJ,EAAX,CAF6B;SAGxB,IAAIkC,GAAT,IAAgBF,GAAhB,EAAqB;aACZE,GAAL,IAAYH,YAAYC,IAAIE,GAAJ,CAAZ,CAAZ;;WAEGD,IAAP;;;AAGJ,AAAO,SAASE,QAAT,GAAoB;WAChB;;;;AAGX,SAASC,cAAT,CAAwBf,OAAxB,EAAiCvB,QAAjC,EAA0C;QACtC,OAAOuB,QAAQvB,QAAR,CAAP,KAA6B,QAAhC,EAAyC;gBAChCA,QAAR,IAAoBuB,QAAQvB,QAAR,EAAkBuC,GAAlB,CAAsB,UAASC,IAAT,EAAc;mBAChDA,KAAKC,WAAL,EAAP;SADmB,CAApB;;WAIMlB,OAAP;;;;;;;;AAQD,AAAO,SAASmB,cAAT,CAAwBnB,OAAxB,EAAgC;cAC5BO,cAAcP,OAAd,CAAV;cACUe,eAAef,OAAf,EAAwB,cAAxB,CAAV;cACUe,eAAef,OAAf,EAAwB,aAAxB,CAAV;WACOe,eAAef,OAAf,EAAwB,kBAAxB,CAAP;;;;;;;;AAQD,AAAO,SAASoB,WAAT,CAAqBH,IAArB,EAA0B;WACzBA,KAAKA,KAAK9C,MAAL,GAAc,CAAnB,CAAP;;;ACjKD,eAAe;IAAA,eACVkD,KADU,EACHrB,OADG,EACK;MACdsB,SAAStB,QAAQuB,WAArB;uBACmBnD,MAAMiD,KAAN,CAAnB,eAAyCC,OAAOE,GAAhD,kBAAgEF,OAAOG,MAAvE,UAAkFJ,KAAlF;EAHa;OAAA,kBAMP3B,IANO,EAMDgC,GANC,EAMIC,IANJ,EAMU;iDACsBjC,IAA7C,UAAsDgC,GAAtD,GAA4DC,IAA5D;EAPa;MAAA,iBAURjC,IAVQ,EAUH;6CAC+BA,IAAzC,kBAA0DA,IAA1D;EAXa;MAAA,iBAcR2B,KAdQ,EAcF;oEACqDA,KAAhE;EAfa;WAAA,sBAkBHA,KAlBG,EAkBIrB,OAlBJ,EAkBY;MACrBsB,SAAStB,QAAQ4B,iBAArB;yHAEgFP,KADhF,mBACmGC,OAAOO,QAD1G,sBACmIP,OAAOQ,WAD1I,wBACwKR,OAAOS,YAD/K,mBACyMT,OAAOU,QADhN,sBACyOV,OAAOW,WADhP,gBACsQX,OAAOY,MAD7Q,kBACgSZ,OAAOa,QADvS,eACyTb,OAAOc,UADhU,qBAC0Vd,OAAOc,UADjW;EApBa;QAAA,mBAyBNf,KAzBM,EAyBA;MACTgB,KAAKjB,YAAYC,MAAMiB,KAAN,CAAY,GAAZ,CAAZ,CAAT;+FAC2FD,EAA3F;EA3Ba;QAAA,mBA8BNA,EA9BM,EA8BFrC,OA9BE,EA8BM;gFACyDA,QAAQuC,eAApF,eAA6GF,GAAGtD,OAAH,CAAW,SAAX,EAAsB,SAAtB,CAA7G,iBAAyJiB,QAAQuC,eAAjK;EA/Ba;OAAA,kBAkCPlB,KAlCO,EAkCArB,OAlCA,EAkCQ;qFAC4DqB,MAAMiB,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAjF,kCAAiItC,QAAQuC,eAAzI;EAnCa;MAAA,iBAsCRF,EAtCQ,EAsCJrC,OAtCI,EAsCI;+DAC0CA,QAAQuC,eAAnE,8CAA2HF,EAA3H;EAvCa;SAAA,oBA0CLA,EA1CK,EA0CDrC,OA1CC,EA0CO;OACfoB,YAAYiB,EAAZ,KAAmB,GAAnB,GAAyBA,GAAGG,KAAH,CAAS,CAAT,EAAY,CAAE,CAAd,CAAzB,GAA4CH,EAAjD;OACOA,GAAGhE,OAAH,CAAW,IAAX,MAAqB,CAAC,CAAvB,GAA4BgE,EAA5B,UAAsCA,EAA5C;kEAC8DrC,QAAQuC,eAAtE,eAA+FF,EAA/F;EA7Ca;QAAA,mBAgDNA,EAhDM,EAgDFrC,OAhDE,EAgDM;uGACgFqC,EAAnG,kBAAkHrC,QAAQuC,eAA1H;EAjDa;MAAA,iBAoDRlB,KApDQ,EAoDF;uFACwEA,KAAnF;EArDa;OAAA,kBAwDPA,KAxDO,EAwDArB,OAxDA,EAwDQ;gFACuD5B,MAAMiD,MAAMiB,KAAN,CAAY,IAAZ,EAAkB,CAAlB,CAAN,CAA5E,yBAA2HtC,QAAQQ,UAAnI,kBAA0JR,QAAQS,WAAlK;EAzDa;UAAA,qBA4DJY,KA5DI,EA4DGrB,OA5DH,EA4DW;gEACoC5B,MAAMiD,MAAMiB,KAAN,CAAY,IAAZ,EAAkB,CAAlB,CAAN,CAA5D,yBAA2GtC,QAAQS,WAAnH;EA7Da;WAAA,sBAgEHgC,IAhEG,EAgEE;oDACiCA,IAAhD;EAjEa;MAAA,iBAoERpB,KApEQ,EAoEF;0HAC2GA,KAAtH;EArEa;YAAA,uBAwEFA,KAxEE,EAwEKrB,OAxEL,EAwEa;MACpBqC,KAAKjB,YAAYC,MAAMiB,KAAN,CAAY,GAAZ,CAAZ,CAAX;mGAC+FD,EAA/F,kBAA8GrC,QAAQS,WAAtH,iBAA6IT,QAAQQ,UAArJ;EA1Ea;SAAA,oBA6ELa,KA7EK,EA6EErB,OA7EF,EA6EU;sFAC2DqB,MAAMiB,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAlF,kBAAkHtC,QAAQS,WAA1H,iBAAiJT,QAAQQ,UAAzJ;EA9Ea;IAAA,eAiFVa,KAjFU,EAiFHrB,OAjFG,EAiFK;MACdb,IAAIkC,MAAMiB,KAAN,CAAY,GAAZ,CAAR;MACMD,KAAKlD,EAAEA,EAAEhB,MAAF,GAAW,CAAb,CAAX;qFACiFkE,EAAjF,uBAAqGrC,QAAQS,WAA7G,iBAAoIT,QAAQQ,UAA5I;EApFa;QAAA,mBAuFNa,KAvFM,EAuFCrB,OAvFD,EAuFS;MAClBqC,KAAKhB,MAAMiB,KAAN,CAAY,GAAZ,CAAT;;MAEIjB,MAAMhD,OAAN,CAAc,SAAd,IAA2B,CAA/B,EAAmC;MAC/BqE,MAAH,CAAU,CAAV,EAAa,CAAb,EAAgB,OAAhB;;oEAE+DL,GAAGM,IAAH,CAAQ,GAAR,CAAhE,kBAAyF3C,QAAQS,WAAjG,iBAAwHT,QAAQQ,UAAhI;EA7Fa;aAAA,wBAgGDoC,IAhGC,EAgGKC,QAhGL,EAgGeC,QAhGf,EAgGwB;yHACgFA,QAArH,6DAAqLF,KAAKG,SAA1L,8HAA4TH,KAAKI,GAAjU,UAAyUJ,KAAKK,KAA9U,8CAA4XL,KAAKM,WAAjY,0EAAidN,KAAKO,KAAtd,gDAAsgBP,KAAKQ,KAA3gB;EAjGa;eAAA,0BAoGCR,IApGD,EAoGOC,QApGP,EAoGiBC,QApGjB,EAoG0B;yHAC8EA,QAArH,6DAAqLF,KAAKG,SAA1L,8HAA4TH,KAAKI,GAAjU,UAAyUJ,KAAKK,KAA9U,8CAA4XL,KAAKM,WAAjY,0EAAidN,KAAKO,KAAtd,gDAAsgBP,KAAKQ,KAA3gB;EArGa;KAAA,gBAwGT/B,KAxGS,EAwGFrB,OAxGE,EAwGM;MACbqC,KAAKjB,YAAYC,MAAMiB,KAAN,CAAY,GAAZ,CAAZ,CAAX;MACMhB,SAAStB,QAAQqD,WAAvB;2FACuFhB,EAAvF,eAAmGf,OAAOgC,IAA1G,kBAA2HhC,OAAOiC,MAAlI,iBAAoJjC,OAAOkC,KAA3J;EA3Ga;MAAA,iBA8GRR,GA9GQ,EA8GHhD,OA9GG,EA8GK;SACXA,QAAQyD,IAAR,+EAC+DrC,YAAY4B,IAAIV,KAAJ,CAAU,GAAV,CAAZ,CAD/D,iFAEkDU,GAFlD,iCAEiFhD,QAAQQ,UAFzF,kBAEgHR,QAAQS,WAFxH,sBAAP;EA/Ga;QAAA,mBAoHNuC,GApHM,EAoHDhD,OApHC,EAoHO;SACbA,QAAQyD,IAAR,iFACiErC,YAAY4B,IAAIV,KAAJ,CAAU,GAAV,CAAZ,CADjE,iFAEkDU,GAFlD,iCAEiFhD,QAAQQ,UAFzF,kBAEgHR,QAAQS,WAFxH,sBAAP;EArHa;UAAA,qBA0HJmC,IA1HI,EA0HE5C,OA1HF,EA0HU;oGACyE4C,KAAKc,KAArG,kFAAuLd,KAAKI,GAA5L,kBAA4MhD,QAAQuB,WAAR,CAAoBE,MAAhO,UAA2OmB,KAAKK,KAAhP,+CAA+RL,KAAKM,WAApS;EA3Ha;OAAA,kBA8HPN,IA9HO,EA8HD5C,OA9HC,EA8HO;uGAC+E4C,KAAKe,KAAL,CAAWC,UAA9G,kFAAqMhB,KAAKiB,QAA1M,kBAA+N7D,QAAQuB,WAAR,CAAoBE,MAAnP,UAA8PmB,KAAKkB,SAAnQ,+CAAsTlB,KAAKM,WAA3T,4EAA6YN,KAAKmB,gBAAlZ,oDAAidnB,KAAKoB,aAAtd;EA/Ha;KAAA,gBAkITC,QAlIS,EAkICC,SAlID,EAkIYC,QAlIZ,EAkIsBnE,OAlItB,EAkI8B;MACrCsB,SAAStB,QAAQoE,UAAvB;MACI9C,OAAO+C,IAAP,KAAgB,OAApB,EAA6B;6DAC4BrE,QAAQQ,UAAhE,kBAAuFR,QAAQS,WAA/F,8DAAmKT,QAAQsE,aAA3K,WAA8LH,QAA9L;GADD,MAEO,IAAI7C,OAAO+C,IAAP,KAAgB,YAApB,EAAkC;6DACgBrE,QAAQQ,UAAhE,kBAAuFR,QAAQS,WAA/F,mEAAwKT,QAAQsE,aAAhL,kBAA0ML,QAA1M,SAAsNC,SAAtN;GADM,MAEA,IAAI5C,OAAO+C,IAAP,KAAgB,MAApB,EAA4B;6DACsBrE,QAAQQ,UAAhE,kBAAuFR,QAAQS,WAA/F,6DAAkKT,QAAQsE,aAA1K,gBAAkML,QAAlM,SAA8MC,SAA9M;;;CAzIH;;ACFA,IAAMtE,QAAQ;WACE,wBADF;UAEE,sBAFF;aAGE,yCAHF;aAIE,oDAJF;UAKE,qCALF;UAME,8DANF;OAOE,mDAPF;gBAQE,gDARF;aASE,kCATF;SAUE,8BAVF;QAWE,qCAXF;WAYE,gDAZF;UAaE,mCAbF;aAcE,4DAdF;SAeE,iDAfF;YAgBE,2CAhBF;aAiBE,kDAjBF;SAkBE,6CAlBF;aAmBE,wCAnBF;cAoBE,0CApBF;WAqBE,uCArBF;MAsBE,iCAtBF;UAuBE,2BAvBF;QAwBE,+HAxBF;OAyBE,4BAzBF;UA0BE,+LA1BF;OA2BE,aA3BF;UA4BE,yCA5BF;UA6BE;CA7BhB,CAgCA;;AC7BA,SAAS2E,QAAT,CAAkBlD,KAAlB,EAAyB;QACjBA,MAAM,CAAN,MAAa,GAAb,IAAqBD,YAAYC,KAAZ,MAAuB,GAA5C,IAAoDA,MAAMmD,SAAN,CAAgB,CAAhB,EAAmBnD,MAAMlD,MAAN,GAAe,CAAlC,CAA3D;;;AAGD,cAAe,UAAUsG,MAAV,EAAkBzE,OAAlB,EAA2B;QAClCyE,OAAO1F,OAAP,CAAea,MAAM8E,OAArB,EAA8B,UAAUrD,KAAV,EAAiB;MACjD,OAAOrB,QAAQ2E,WAAf,KAA+B,UAAnC,EAA+C;UACvC3E,QAAQ2E,WAAR,CAAoBtD,KAApB,CAAP;GADD,MAEO;OACAuD,QAAQL,SAASlD,KAAT,CAAd;OACIuD,KAAJ,EAAW;WACH5E,QAAQ6E,QAAR,CAAiBD,KAAjB,CAAuBA,KAAvB,EAA8B5E,OAA9B,CAAP;;;SAGKqB,KAAP;EATM,CAAP;;;ACND,IAAMyD,eAAe,CAAC;SACb,IADa;SAEb;CAFY,EAGlB;SACM,IADN;SAEM;CALY,EAMlB;SACM,IADN;SAEM;CARY,EASlB;SACM,IADN;SAEM;CAXY,EAYlB;SACM,IADN;SAEM;;CAdY,EAgBlB;SACM,IADN;SAEM;CAlBY,EAmBlB;SACM,IADN;SAEM;CArBY,EAsBlB;SACM,KADN;SAEM;CAxBY,EAyBlB;SACM,KADN;SAEM;CA3BY,EA4BlB;SACM,IADN;SAEM;CA9BY,EA+BlB;SACM,IADN;SAEM;CAjCY,EAkClB;SACM,IADN;SAEM;CApCY,EAqClB;SACM,KADN;SAEM;CAvCY,EAwClB;SACM,KADN;SAEM;CA1CY,EA2ClB;SACM,IADN;SAEM;CA7CY,EA8ClB;SACM,OADN;SAEM;CAhDY,EAiDlB;SACM,IADN;SAEM;CAnDY,EAoDlB;SACM,QADN;SAEM;CAtDY,EAuDlB;SACM,KADN;SAEM;CAzDY,EA0DlB;SACM,KADN;SAEM;CA5DY,EA6DlB;SACM,KADN;SAEM;CA/DY,EAgElB;SACM,IADN;SAEM;CAlEY,EAmElB;SACM,IADN;SAEM;CArEY,EAsElB;SACM,IADN;SAEM;CAxEY,CAArB;;AA2EA,eAAe,UAAUjF,KAAV,EAAiBG,OAAjB,EAA0B;KAClC+E,QAAQ/E,QAAQgF,eAAR,CAAwB7G,MAAxB,GAAiC6B,QAAQgF,eAAzC,GAA2DF,YAAzE;;KAEMG,iBAAiBF,MAAM/D,GAAN,CAAU,UAACkE,GAAD;SAASrG,aAAaqG,IAAIxF,IAAjB,CAAT;EAAV,CAAvB;;KAEMyF,cAAc,IAAIC,MAAJ,cAAsBH,eAAetC,IAAf,CAAoB,GAApB,CAAtB,iBAA4D,IAA5D,CAApB;;QAEO9C,MAAMd,OAAN,CAAcoG,WAAd,EAA2B,UAAC9D,KAAD,EAAQK,GAAR,EAAahC,IAAb,EAAsB;MACnDL,QAAQ4F,eAAe5G,OAAf,CAAuBQ,aAAaa,IAAb,CAAvB,CAAZ;MACIL,UAAU,CAAC,CAAf,EAAkB,OAAOgC,KAAP;MACdM,OAAQoD,MAAM1F,KAAN,EAAasC,IAAzB;SACO3B,QAAQ6E,QAAR,CAAiBQ,MAAjB,CAAwB3F,IAAxB,EAA8BgC,GAA9B,EAAmCC,IAAnC,EAAyC3B,OAAzC,CAAP;EAJM,CAAP;;;AClFD,YAAe,UAAUH,KAAV,EAAiBG,OAAjB,EAA0B;KAClCsB,SAAStB,QAAQuB,WAAvB;QACO1B,MAAMd,OAAN,CAAc+B,UAAd,EAA0B,UAASO,KAAT,EAAgB;MAC7CD,YAAYC,KAAZ,MAAuB,GAA1B,EAA+B,OAAOA,KAAP,CADiB;MAE5CiE,YAAYlE,YAAYC,MAAMiB,KAAN,CAAY,GAAZ,CAAZ,CAAhB;MACKlB,YAAYC,KAAZ,MAAuB,GAA5B,EACCA,QAAQA,MAAMmB,KAAN,CAAY,CAAZ,EAAe,CAAC,CAAhB,CAAR;MACGlB,OAAOiE,OAAP,CAAelH,OAAf,CAAuBiH,SAAvB,MAAsC,CAAC,CAA3C,EACC,OAAOtF,QAAQ6E,QAAR,CAAiB7B,GAAjB,CAAqB3B,KAArB,EAA4BrB,OAA5B,CAAP;SACMqB,KAAP;EAPM,CAAP;;;;GCJA,UAAUmE,MAAV,EAAkBC,OAAlB,EAA2B;QACtB,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,OAAOC,GAA3C,EAAgD;aACvC,CAAC,SAAD,EAAY,QAAZ,CAAP,EAA8BF,OAA9B;KADF,MAEO,IAAI,OAAOG,OAAP,KAAmB,WAAnB,IAAkC,OAAOC,MAAP,KAAkB,WAAxD,EAAqE;cAClED,OAAR,EAAiBC,MAAjB;KADK,MAEA;UACDC,MAAM;iBACC;OADX;cAGQA,IAAIF,OAAZ,EAAqBE,GAArB;aACOC,UAAP,GAAoBD,IAAIF,OAAxB;;GAVJ,EAYGI,iBAZH,EAYS,UAAUJ,OAAV,EAAmBC,MAAnB,EAA2B;;;QAG9BI,iBAAiB;eACV,IADU;qBAEJ,UAFI;6BAGI;KAHzB;;aAMSC,wBAAT,GAAoC;aAC3B,WAAWC,KAAKC,GAAL,EAAX,GAAwB,GAAxB,GAA8BC,KAAKC,IAAL,CAAUD,KAAKE,MAAL,KAAgB,MAA1B,CAArC;;;;;aAKOC,aAAT,CAAuBC,YAAvB,EAAqC;;;UAG/B;eACKC,OAAOD,YAAP,CAAP;OADF,CAEE,OAAOE,CAAP,EAAU;eACHF,YAAP,IAAuBG,SAAvB;;;;aAIKC,YAAT,CAAsBC,QAAtB,EAAgC;UAC1BC,SAASC,SAASC,cAAT,CAAwBH,QAAxB,CAAb;eACSI,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyCC,WAAzC,CAAqDJ,MAArD;;;aAGOhB,UAAT,CAAoBqB,IAApB,EAA0B;UACpBpH,UAAUqH,UAAUlJ,MAAV,IAAoB,CAApB,IAAyBkJ,UAAU,CAAV,MAAiBT,SAA1C,GAAsD,EAAtD,GAA2DS,UAAU,CAAV,CAAzE;;;UAGIrE,MAAMoE,IAAV;UACIE,UAAUtH,QAAQsH,OAAR,IAAmBrB,eAAeqB,OAAhD;UACIC,gBAAgBvH,QAAQuH,aAAR,IAAyBtB,eAAesB,aAA5D;;UAEIC,YAAYZ,SAAhB;;aAEO,IAAIa,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;YACxCC,mBAAmB5H,QAAQ6H,qBAAR,IAAiC3B,0BAAxD;YACIY,WAAWS,gBAAgB,GAAhB,GAAsBK,gBAArC;;eAEOA,gBAAP,IAA2B,UAAUE,QAAV,EAAoB;kBACrC;gBACF,IADE;;kBAGA,SAASC,IAAT,GAAgB;qBACbN,QAAQC,OAAR,CAAgBI,QAAhB,CAAP;;WAJJ;;cAQIN,SAAJ,EAAeQ,aAAaR,SAAb;;uBAEFV,QAAb;;wBAEcc,gBAAd;SAbF;;;eAiBO5E,IAAI3E,OAAJ,CAAY,GAAZ,MAAqB,CAAC,CAAtB,GAA0B,GAA1B,GAAgC,GAAvC;;YAEI4J,cAAcjB,SAASkB,aAAT,CAAuB,QAAvB,CAAlB;oBACYC,YAAZ,CAAyB,KAAzB,EAAgC,KAAKnF,GAAL,GAAWuE,aAAX,GAA2B,GAA3B,GAAiCK,gBAAjE;oBACYvF,EAAZ,GAAiByE,QAAjB;iBACSI,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyCkB,WAAzC,CAAqDH,WAArD;;oBAEYI,WAAW,YAAY;iBAC1B,IAAIC,KAAJ,CAAU,sBAAsBtF,GAAtB,GAA4B,YAAtC,CAAP;;wBAEc4E,gBAAd;uBACad,QAAb;SAJU,EAKTQ,OALS,CAAZ;OA5BK,CAAP;;;;;;;;;;;;;;;;;;;;WAsDK1B,OAAP,GAAiBG,UAAjB;GA1GF;;;;;ACAA;;;;;;AAMA,AAAe,SAASlB,UAAT,CAAkB7B,GAAlB,EAAuBhD,OAAvB,EAAgC;SACvCA,QAAQ6E,QAAR,CAAiB0D,KAAjB,CAAuBvF,GAAvB,EAA4BhD,OAA5B,KAAwCA,QAAQ6E,QAAR,CAAiB2D,OAAjB,CAAyBxF,GAAzB,EAA8BhD,OAA9B,CAA/C;;;ACLD;;;;;AAKA,AAAe,SAASyI,SAAT,CAAmBzI,OAAnB,EAA4B;;KAEtCA,QAAQ0I,uBAAZ,EAAqC,OAAO1I,QAAQ2I,iBAAR,CAA0B3I,OAA1B,EAAmC6E,UAAnC,CAAP;;KAEjC+D,UAAU5B,SAAS6B,sBAAT,CAAgC7I,QAAQ8I,eAAxC,CAAd;MACK,IAAIrJ,IAAI,CAAb,EAAgBA,IAAImJ,QAAQzK,MAA5B,EAAoCsB,GAApC,EAAyC;UAChCA,CAAR,EAAWsJ,OAAX,GAAqB,YAAY;WACxBC,WAAR;OACIhG,MAAmC,KAAKiG,YAAL,CAAkB,cAAlB,IAAoC,gBAA3E;QACKC,UAAL,CAAgBA,UAAhB,CAA2BC,SAA3B,GAAuCtE,WAAS7B,GAAT,EAAchD,OAAd,CAAvC;GAHD;;;;ACbF,yBAAe,UAAU4C,IAAV,EAAgBC,QAAhB,EAA0BC,QAA1B,EAAoC9C,OAApC,EAA6C;KACvD4C,KAAKwG,IAAL,KAAc,OAAlB,EAA2B;SACnBpJ,QAAQ6E,QAAR,CAAiBwE,YAAjB,CAA8BzG,IAA9B,EAAoCC,QAApC,EAA8CC,QAA9C,EAAwD9C,OAAxD,CAAP;EADD,MAEO,IAAI4C,KAAKwG,IAAL,KAAc,SAAlB,EAA6B;SAC5BpJ,QAAQ6E,QAAR,CAAiByE,cAAjB,CAAgC1G,IAAhC,EAAsCC,QAAtC,EAAgDC,QAAhD,EAA0D9C,OAA1D,CAAP;;;;ACJF;;;;;AAKA,gBAAe,UAAUA,OAAV,EAAmB;KAC7BA,QAAQyD,IAAZ,EAAkB;MACb,CAACzD,QAAQuJ,OAAR,CAAgB9F,IAArB,EAA2B,MAAM,IAAI+F,cAAJ,CAAmB,sFAAnB,CAAN;MACvB/F,OAAOzD,QAAQuJ,OAAR,CAAgB9F,IAA3B;OACKgG,KAAL,CAAW,WAAX,EAAwBzJ,QAAQ0J,WAAhC;;;;ACTF;;;;;AAKA,AAAe,SAASC,YAAT,CAAsB3J,OAAtB,EAA+B;SACrC4J,cAAR,CAAuBpG,KAAvB,GAAgCxD,QAAQQ,UAAxC;SACQoJ,cAAR,CAAuBrG,MAAvB,GAAgCvD,QAAQS,WAAxC;KACIT,QAAQ6J,OAAZ,EAAqB;MAChB,CAAC7J,QAAQuJ,OAAR,CAAgBO,OAArB,EAA8B,MAAM,IAAIN,cAAJ,CAAmB,4FAAnB,CAAN;MAC1BO,UAAU/J,QAAQuJ,OAAR,CAAgBO,OAA9B;MACIE,WAAWhK,QAAQH,KAAR,CAAcgJ,sBAAd,CAAqC,cAArC,CAAf;OACK,IAAIpJ,IAAI,CAAb,EAAgBA,IAAIuK,SAAS7L,MAA7B,EAAqCsB,GAArC,EAA0C;WACjCuK,SAASvK,CAAT,CAAR,EAAqBO,QAAQ4J,cAA7B,EAA6C;WAAM5J,QAAQiK,eAAR,EAAN;IAA7C;;;;;ACbH;;;;;AAKA,oBAAe,UAAUC,SAAV,EAAqB;MAC7BtB,UAAU5B,SAAS6B,sBAAT,CAAgCqB,SAAhC,CAAhB;OACK,IAAIzK,IAAI,CAAb,EAAgBA,IAAImJ,QAAQzK,MAA5B,EAAoCsB,GAApC,EAAyC;YAChCA,CAAR,EAAWsJ,OAAX,GAAqB,IAArB;;;;ACNF,SAASzI,WAAT,CAAqB6J,CAArB,EAAuB;KAClBC,cAAcD,EAAEnK,OAAF,CAAUqK,IAAV,GAAiB,IAAIjF,MAAJ,YAAoB+E,EAAEvK,KAAF,CAAQpB,MAA5B,YAA4C,IAA5C,CAAjB,GAAqE,IAAI4G,MAAJ,cAAsB+E,EAAEvK,KAAF,CAAQpB,MAA9B,QAAyC,IAAzC,CAAvF;GACEiG,MAAF,GAAe0F,EAAE1F,MAAF,CAAS1F,OAAT,CAAiBqL,WAAjB,EAA8B,UAAS/I,KAAT,EAAgB;MACxD2B,MAAMmH,EAAEnK,OAAF,CAAUqK,IAAV,GAAiBhJ,MAAMmB,KAAN,CAAY,CAAZ,EAAe,CAAC,CAAhB,CAAjB,GAAsCnB,KAAhD;MACI8I,EAAEnK,OAAF,CAAUG,MAAV,CAAiB9B,OAAjB,CAAyB2E,GAAzB,MAAkC,CAAC,CAAvC,EAA0C;KACvChD,OAAF,CAAUG,MAAV,CAAiBmK,IAAjB,CAAsBtH,GAAtB;OACImH,EAAEnK,OAAF,CAAUqK,IAAd,EAAoB;WACZ,CAACF,EAAEnK,OAAF,CAAUuK,UAAX,GAAwBJ,EAAEtF,QAAF,CAAWxD,MAAMmB,KAAN,CAAY,CAAZ,EAAe,CAAC,CAAhB,CAAX,IAAiC,MAAzD,GAAkEnB,QAAQ8I,EAAEtF,QAAF,CAAWxD,MAAMmB,KAAN,CAAY,CAAZ,EAAe,CAAC,CAAhB,CAAX,CAAjF;IADD,MAEO;WACC,CAAC2H,EAAEnK,OAAF,CAAUuK,UAAX,GAAwBJ,EAAEtF,QAAF,CAAWxD,KAAX,CAAxB,GAA4CA,QAAQ8I,EAAEtF,QAAF,CAAWxD,KAAX,CAA3D;;GALF,MAOO;UACCA,KAAP,CADM;;EATO,CAAf;QAaO,CAAC8I,EAAE1F,MAAH,EAAW0F,EAAE5K,MAAb,CAAP;;;AAGD,SAASiL,WAAT,CAAqBL,CAArB,EAAuB;KAClB9I,cAAJ;QACO,CAACA,QAAQ1B,QAAQwK,EAAEvK,KAAV,EAAiBuK,EAAEtK,KAAnB,CAAT,MAAwC,IAA/C,EAAqD;MAChDmD,MAAM3B,MAAM,CAAN,CAAV;MACI,EAAE8I,EAAEnK,OAAF,CAAUG,MAAV,CAAiB9B,OAAjB,CAAyB2E,GAAzB,MAAkC,CAAC,CAArC,KAA4CmH,EAAEnK,OAAF,CAAUG,MAAV,CAAiBhC,MAAjB,IAA2BgM,EAAEnK,OAAF,CAAUE,WAArF,EAAmG;IACjGF,OAAF,CAAUG,MAAV,CAAiBmK,IAAjB,CAAsBtH,GAAtB;MACItD,OAAOyK,EAAEtF,QAAF,CAAW7B,GAAX,CAAX;IACEzD,MAAF,CAAS+K,IAAT,CAAc;SACN5K,IADM;UAEN2B,MAAMhC;GAFd;;QAKM,CAAC8K,EAAE1F,MAAH,EAAW0F,EAAE5K,MAAb,CAAP;;;AAGD,AAAe,SAASkL,KAAT,CAAeN,CAAf,EAAiB;QACvB9J,SAAS8J,EAAEnK,OAAX,EAAoBmK,EAAElK,OAAtB,CAAD,GAAmCK,YAAY6J,CAAZ,CAAnC,GAAoDK,YAAYL,CAAZ,CAA3D;;;AClCD,WAAe,UAAUtK,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,KAA1C,EAAiDK,OAAjD,EAA0D;KAClEyK,OAAO;cAAA;gBAAA;kBAAA;gBAAA;cAAA;kBAAA;UAAA,oBAOHrJ,KAPG,EAOG;UACP,KAAKrB,OAAL,CAAa6E,QAAb,CAAsB,KAAK5E,OAA3B,EAAoCoB,KAApC,EAA2C,KAAKrB,OAAhD,CAAP;;EARF;;QAYOyK,MAAMC,IAAN,CAAP;;;ACZc,SAASC,SAAT,CAAmB9K,KAAnB,EAA0B4E,MAA1B,EAAkClF,MAAlC,EAA0CS,OAA1C,EAAmDJ,KAAnD,EAA0DK,OAA1D,EAAmE2K,IAAnE,EAAwE;QAC/E7K,QAAQC,OAAR,EAAiBC,OAAjB,KAA8BF,QAAQC,OAAR,EAAiBC,OAAjB,KAA6B2K,IAA3D,GAAmEC,KAAKhL,KAAL,EAAY4E,MAAZ,EAAoBlF,MAApB,EAA4BS,OAA5B,EAAqCJ,KAArC,EAA4CK,OAA5C,CAAnE,GAA0H,CAACwE,MAAD,EAASlF,MAAT,CAAjI;;;ACFD;;;;;;;;AAQA,SAASuL,aAAT,CAAuBX,CAAvB,EAA0BY,SAA1B,EAAqC1J,KAArC,EAA4C;KACvC2B,MAAM,CAACmH,EAAEnK,OAAF,CAAUqK,IAAV,GAAiBhJ,MAAM,CAAN,EAASmB,KAAT,CAAe,CAAf,EAAkB,CAAC,CAAnB,CAAjB,GAAyCnB,MAAM,CAAN,CAA1C,KAAuDA,MAAM,CAAN,CAAjE;KACI8I,EAAEnK,OAAF,CAAUG,MAAV,CAAiB9B,OAAjB,CAAyB2E,GAAzB,KAAiC,CAArC,EAAwC,OAAOyE,QAAQC,OAAR,CAAgB,IAAhB,CAAP;;QAEjC,IAAID,OAAJ,CAAY,UAACC,OAAD,EAAa;YACrByC,CAAV,EAAa9I,KAAb,EAAoB2B,GAApB,EAAyBgI,IAAzB,CAA8B,UAACtL,IAAD,EAAU;OACnC,CAACA,IAAL,EAAW,OAAOgI,SAAP;KACT1H,OAAF,CAAUG,MAAV,CAAiBmK,IAAjB,CAAsBtH,GAAtB;WACQtD,IAAR;GAHD;EADM,CAAP;;;;;;;;;AAeD,SAASuL,gBAAT,CAA0Bd,CAA1B,EAA6BY,SAA7B,EAAwC;KACnCX,cAAkBD,EAAEnK,OAAF,CAAUqK,IAAV,GAAiB,IAAIjF,MAAJ,YAAoB+E,EAAEvK,KAAF,CAAQpB,MAA5B,YAA4C,IAA5C,CAAjB,GAAqE,IAAI4G,MAAJ,cAAsB+E,EAAEvK,KAAF,CAAQpB,MAA9B,QAAyC,IAAzC,CAA3F;KACI6C,cAAJ;KAAW6J,WAAW,EAAtB;;QAEO,CAAC7J,QAAQ1B,QAAQyK,WAAR,EAAqBD,EAAE1F,MAAvB,CAAT,MAA6C,IAApD;WACU6F,IAAT,CAAcQ,cAAcX,CAAd,EAAiBY,SAAjB,EAA4B1J,KAA5B,CAAd;EAED,OAAO,IAAIoG,OAAJ,CAAY,UAACC,OAAD,EAAa;MAC3BwD,SAAS/M,MAAb,EACCsJ,QAAQ0D,GAAR,CAAYD,QAAZ,EAAsBF,IAAtB,CAA2B,UAACpI,IAAD,EAAU;OAChCnD,IAAW,CAAf;KACEgF,MAAF,GAAW0F,EAAE1F,MAAF,CAAS1F,OAAT,CAAiBqL,WAAjB,EAA8B,UAACgB,OAAD,EAAa;QACjDjB,EAAEnK,OAAF,CAAUqK,IAAd,EACC,OAAO,CAACF,EAAEnK,OAAF,CAAUuK,UAAX,GAAwB3H,KAAKnD,GAAL,IAAY,MAApC,GAA6C2L,UAAUxI,KAAKnD,GAAL,CAA9D,CADD,KAGC,OAAO,CAAC0K,EAAEnK,OAAF,CAAUuK,UAAX,GAAwB3H,KAAKnD,GAAL,CAAxB,GAAoC2L,UAAUxI,KAAKnD,GAAL,CAArD;IAJS,CAAX;WAMQ0K,EAAE1F,MAAV;GARD,EADD,KAYCiD,QAAQyC,EAAE1F,MAAV;EAbK,CAAP;;;AAkBD,SAAS4G,aAAT,CAAuBlB,CAAvB,EAA0BY,SAA1B,EAAqC1J,KAArC,EAA4C;KACvC2B,MAAM3B,MAAM,CAAN,CAAV;KACI8I,EAAEnK,OAAF,CAAUG,MAAV,CAAiB9B,OAAjB,CAAyB2E,GAAzB,KAAiC,CAArC,EAAwC;;QAEjC,IAAIyE,OAAJ,CAAY,UAACC,OAAD,EAAa;YACrByC,CAAV,EAAa9I,KAAb,EAAoB2B,GAApB,EAAyB,IAAzB,EAA+BgI,IAA/B,CAAoC,UAAUtL,IAAV,EAAgB;OAC/C,CAACA,IAAL,EAAWgI;KACT1H,OAAF,CAAUG,MAAV,CAAiBmK,IAAjB,CAAsBtH,GAAtB;KACEzD,MAAF,CAAS+K,IAAT,CAAc;UACN5K,IADM;WAEN2B,MAAMhC;IAFd;;GAHD;EADM,CAAP;;;;;;;;;AAmBD,SAASiM,gBAAT,CAA0BnB,CAA1B,EAA6BY,SAA7B,EAAwC;KACnC1J,cAAJ;KAAW6J,WAAW,EAAtB;QACO,CAAC7J,QAAQ1B,QAAQwK,EAAEvK,KAAV,EAAiBuK,EAAEtK,KAAnB,CAAT,MAAwC,IAA/C;WACUyK,IAAT,CAAce,cAAclB,CAAd,EAAiBY,SAAjB,EAA4B1J,KAA5B,CAAd;EACD,OAAO,IAAIoG,OAAJ,CAAY,UAAUC,OAAV,EAAmB;UAC7ByD,GAAR,CAAYD,QAAZ,EAAsBF,IAAtB,CAA2B,YAAY;WAC9Bb,EAAE5K,MAAV;GADD;EADM,CAAP;;;AAOD,AAAe,SAASgM,UAAT,CAAoBpB,CAApB,EAAuBY,SAAvB,EAAkC;QACzC,IAAItD,OAAJ,CAAY,UAAUC,OAAV,EAAmB;MACjCrH,SAAS8J,EAAEnK,OAAX,EAAoBmK,EAAElK,OAAtB,CAAJ,EACCgL,iBAAiBd,CAAjB,EAAoBY,SAApB,EAA+BC,IAA/B,CAAoC,UAACvG,MAAD;UAAYiD,QAAQ,CAACjD,MAAD,EAAS0F,EAAE5K,MAAX,CAAR,CAAZ;GAApC,EADD,KAGC+L,iBAAiBnB,CAAjB,EAAoBY,SAApB,EAA+BC,IAA/B,CAAoC,UAACzL,MAAD;UAAYmI,QAAQ,CAACyC,EAAE1F,MAAH,EAAWlF,MAAX,CAAR,CAAZ;GAApC;EAJK,CAAP;;;ICrFoBiM;kBACR3L,KAAZ,EAAmB4E,MAAnB,EAA2BzE,OAA3B,EAAoCT,MAApC,EAA4C;;;OACtCM,KAAL,GAAeA,KAAf;OACK4E,MAAL,GAAeA,MAAf;OACKzE,OAAL,GAAeA,OAAf;OACKT,MAAL,GAAeA,MAAf;OACKK,KAAL,GAAeA,MAAM6L,OAArB;OACKxL,OAAL,GAAe,SAAf;;OAEKyL,IAAL,GAAY,KAAKA,IAAL,CAAUC,IAAV,CAAe,IAAf,CAAZ;MACG,OAAO,KAAK3L,OAAL,CAAaH,KAApB,KAA8B,QAAjC,EAA0C;QACpCG,OAAL,CAAaH,KAAb,CAAmB+L,gBAAnB,CAAoC,UAApC,EAAgD,KAAKF,IAArD,EAA2D,KAA3D;;;;;;;;;;;;;4BASQ1I,KAAK;OACV1B,SAAS,KAAKtB,OAAL,CAAa6L,YAA1B;OACIC,kFAAgF9I,GAAhF,kBAAgG1B,OAAOyK,QAAvG,oBAA8HzK,OAAO0K,SAArI,qBAA8J1K,OAAO2K,UAArK,eAAyL3K,OAAO4K,KAAhM,cAA8M5K,OAAO6K,IAAzN;UACO,IAAI1E,OAAJ,CAAY,UAACC,OAAD,EAAa;iBACpBoE,MAAX,EAAmB,EAACM,aAAa,SAAd,EAAnB,EACEpB,IADF,CACO,UAACpI,IAAD;YAAQA,KAAKmF,IAAL,EAAR;KADP,EAEEiD,IAFF,CAEO,UAACjD,IAAD;YAAQL,QAAQK,IAAR,CAAR;KAFP;IADM,CAAP;;;;;;;;;;yBAWM;OACA0D,UAAU,KAAKzL,OAAL,CAAauJ,OAAb,CAAqBkC,OAArC;WACQY,OAAR,CAAgBX,IAAhB,CAAqB,KAAK1L,OAAL,CAAasM,OAAlC,EAFM;;;WAKEC,MAAR,CAAeZ,IAAf,CAAoB,QAApB,EAA8B,KAAK3L,OAAL,CAAawM,YAA3C;;;;4BAOS;;;UACF,IAAI/E,OAAJ,CAAY,UAACC,OAAD;WAAa6D,mBAAiBC,QAAQT,SAAzB,EAAoCC,IAApC,CAAyC,UAACpI,IAAD;YAAU8E,QAAQ9E,IAAR,CAAV;KAAzC,CAAb;IAAZ,CAAP;;;;4BALgB6J,OAAOpL,OAAO2B,KAAK;UAC5B,IAAIyE,OAAJ,CAAY,UAACC,OAAD;WAAa+E,MAAMC,SAAN,CAAgB1J,GAAhB,EAAqBgI,IAArB,CAA0B,UAACpI,IAAD;YAAU8E,QAAQ9E,KAAKH,IAAb,CAAV;KAA1B,CAAb;IAAZ,CAAP;;;;;;AC/Ca,SAASkK,KAAT,CAAe3J,GAAf,EAAoBhD,OAApB,EAA6B;WACjCA,WAAW,EAArB;QACO,IAAIyH,OAAJ,CAAa,UAACC,OAAD,EAAUC,MAAV,EAAqB;MACpCiF,UAAU,IAAIC,cAAJ,EAAd;;OAEK,IAAIpN,CAAT,IAAcO,QAAQ8M,OAAtB,EAA+B;WACtBC,gBAAR,CAAyBtN,CAAzB,EAA4BO,QAAQ8M,OAAR,CAAgBrN,CAAhB,CAA5B;;;UAGOuN,IAAR,CAAahN,QAAQiN,MAAR,IAAkB,KAA/B,EAAsCjK,GAAtC;;UAEQkK,MAAR,GAAiB,YAAM;WACdpF,SAAS8E,OAAT,CAAR;GADD;;UAIQO,OAAR,GAAkB,YAAM;UAChB7E,MAAM,eAAN,CAAP;GADD;;UAIQ8E,IAAR,CAAapN,QAAQqN,IAAR,IAAgB,IAA7B;;WAESvF,QAAT,CAAkBwF,GAAlB,EAAuB;OAClBC,aAAaD,IAAIE,qBAAJ,EAAjB;OACCC,QAAO,EADR;OAECtC,MAAM,EAFP;OAGC2B,UAAU,EAHX;OAICY,MAAM,mCAJP;OAKCrM,cALD;OAKQR,YALR;UAMQQ,QAAMqM,IAAI5N,IAAJ,CAASyN,UAAT,CAAd,EAAqC;UAC/BjD,IAAL,CAAUzJ,MAAMQ,MAAM,CAAN,EAASH,WAAT,EAAhB;QACIoJ,IAAJ,CAAS,CAACzJ,GAAD,EAAMQ,MAAM,CAAN,CAAN,CAAT;YACQR,GAAR,IAAe,CAACiM,QAAQjM,GAAR,IAAciM,QAAQjM,GAAR,IAAa,GAA3B,GAAgC,EAAjC,IAAuCQ,MAAM,CAAN,CAAtD;;;UAGM;UACA,MADA;QAEFiM,IAAIK,MAAJ,GAAW,GAAX,GAAe,KAAK,CAFlB;YAGEL,IAAIK,MAHN;gBAIML,IAAIM,UAJV;SAKDN,IAAIO,WALH;WAMC;YAAM/F,SAASwF,GAAT,CAAN;KAND;UAOA;YAAM7F,QAAQC,OAAR,CAAgB4F,IAAIQ,YAApB,CAAN;KAPA;UAQA;YAAMrG,QAAQC,OAAR,CAAgB4F,IAAIQ,YAApB,EAAkC9C,IAAlC,CAAuC+C,KAAKC,KAA5C,CAAN;KARA;SASD;YAAMvG,QAAQC,OAAR,CAAgB4F,IAAIW,WAApB,CAAN;KATC;UAUA;YAAMxG,QAAQC,OAAR,CAAgB4F,IAAIxF,QAApB,CAAN;KAVA;aAWG;WACF;aAAM2F,KAAN;MADE;cAEC;aAAMtC,GAAN;MAFD;UAGH;aAAK2B,QAAQ7O,EAAEiD,WAAF,EAAR,CAAL;MAHG;UAIH;aAAK,CAAC,CAAC4L,QAAQ7O,EAAEiD,WAAF,EAAR,CAAP;;;IAfP;;EAhCK,CAAP;;;ACED;;;;;;AAMA,SAASgN,aAAT,CAAuB/J,QAAvB,EAAiC;KAC5BnB,oEAAkEmB,QAAlE,kBAAJ;QACO,IAAIsD,OAAJ,CAAY,UAACC,OAAD,EAAa;QACzB1E,GAAN,EACEgI,IADF,CACO,UAACpI,IAAD;UAAUA,KAAKmF,IAAL,EAAV;GADP,EAEEiD,IAFF,CAEO,UAACjD,IAAD;UAAUL,QAAQ,CAACK,KAAKoG,OAAL,CAAa,CAAb,EAAgBC,QAAhB,CAAyBjK,QAAzB,CAAkCkK,GAAnC,EAAwCtG,KAAKoG,OAAL,CAAa,CAAb,EAAgBC,QAAhB,CAAyBjK,QAAzB,CAAkCmK,GAA1E,CAAR,CAAV;GAFP;EADM,CAAP;;;;;;;;;;;;AAgBD,SAASzJ,UAAT,CAAkBxD,KAAlB,EAAyB4C,QAAzB,EAAmCC,SAAnC,EAA8ClE,OAA9C,EAAuD;KAChDmE,WAAWoK,aAAalN,KAAb,CAAjB;QACOrB,QAAQ6E,QAAR,CAAiB2J,IAAjB,CAAsBvK,QAAtB,EAAgCC,SAAhC,EAA2CC,QAA3C,EAAqDnE,OAArD,CAAP;;;;;;;;AAQD,SAASuO,YAAT,CAAsBlN,KAAtB,EAA6B;QACrBA,MAAMiB,KAAN,CAAY,GAAZ,EAAiB,CAAjB,EAAoBA,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,CAAP;;;AAGD,aAAe,UAAUzC,KAAV,EAAiB4E,MAAjB,EAAyBzE,OAAzB,EAAkCT,MAAlC,EAA0C;KACpD8B,cAAJ;KAAW6J,WAAW,EAAtB;KAA0BuD,aAAa,EAAvC;;KAEMxO,UAAU,KAAhB;;QAEO,CAACoB,QAAQ1B,QAAQC,MAAM4O,IAAd,EAAoB/J,MAApB,CAAT,MAA0C,IAAjD,EAAuD;UAC9CtE,MAAR,CAAemK,IAAf,CAAoBjJ,KAApB;MACMqN,UAAU1O,QAAQoE,UAAR,CAAmBC,IAAnB,KAA4B,OAA5B,GAAsC6J,cAAc7M,MAAM,CAAN,CAAd,CAAtC,GAAgEoG,QAAQC,OAAR,CAAgB,CAAC,IAAD,EAAO,IAAP,CAAhB,CAAhF;WACS4C,IAAT,CAAcoE,OAAd;aACWpE,IAAX,CAAgBjJ,KAAhB;;;QAGM,IAAIoG,OAAJ,CAAY,UAACC,OAAD,EAAa;UACvByD,GAAR,CAAYD,QAAZ,EAAsBF,IAAtB,CAA2B,UAAC2D,cAAD,EAAoB;;uDAEjBA,eAAelP,CAAf,CAFiB;;QAExCwE,QAFwC;QAE9BC,SAF8B;;QAGzCxE,OAAOmF,WAAU4J,WAAWhP,CAAX,CAAD,CAAgB,CAAhB,CAAT,EAA6BwE,QAA7B,EAAuCC,SAAvC,EAAkDlE,OAAlD,CAAX;QACIK,SAASL,OAAT,EAAkBC,OAAlB,CAAJ,EAAgC;cACtBwE,OAAO1F,OAAP,CAAea,MAAM4O,IAArB,EAA2B,UAACI,UAAD,EAAgB;6CACdL,aAAaK,UAAb,CAArC,eAAuElP,IAAvE;MADQ,CAAT;KADD,MAIO;YACC4K,IAAP,CAAY;YACJ5K,IADI;aAEJ+O,WAAWhP,CAAX,EAAc,CAAd,EAAiBJ;MAFzB;cAISoF,OAAO1F,OAAP,CAAea,MAAM4O,IAArB,EAA2B,UAACI,UAAD,EAAgB;6CACdL,aAAaK,UAAb,CAArC;MADQ,CAAT;;;;QAZG,IAAInP,CAAT,IAAcyL,QAAd,EAAwB;;;WAiBhB,CAACzG,MAAD,EAASlF,MAAT,CAAR;GAlBD;EADM,CAAP;;;ACtDD,eAAe,UAAUkF,MAAV,EAAkBzE,OAAlB,EAA2B;KACrC,CAACA,QAAQuJ,OAAR,CAAgBsF,MAArB,EAA6B,MAAM,IAAIrF,cAAJ,4BAAN;;KAEvBsF,SAAS9O,QAAQuJ,OAAR,CAAgBsF,MAA/B;KACME,WAAW,IAAID,OAAOE,QAAX,EAAjB;;UAES3E,IAAT,GAAgB,UAAC4E,IAAD,EAAOhM,KAAP,EAAcvD,IAAd,EAAuB;MAClCuP,KAAK5Q,OAAL,CAAa,QAAb,MAA2B,CAAC,CAAhC,EAAmC,OAAO4Q,IAAP;MAC/BA,KAAK5N,KAAL,CAAW,mBAAX,CAAJ,EAAqC;OAChC,CAAC4B,KAAL,EAAYA,QAAQ,EAAR;wBACOmC,OAAO8J,EAA1B,cAAqClP,QAAQuB,WAAR,CAAoBC,GAAzD,kBAAyExB,QAAQuB,WAAR,CAAoBE,MAA7F,iBAA+GwB,KAA/G,UAAyHvD,IAAzH;;EAJF;;UAQSgE,KAAT,GAAiB,UAACuL,IAAD,EAAOhM,KAAP,EAAcvD,IAAd,EAAuB;MACnCuP,KAAK5N,KAAL,CAAW,mBAAX,CAAJ,EAAqC;OAChC,CAAC4B,KAAL,EAAYA,QAAQ,EAAR;wFACuEmC,OAAO8J,EAA1F,iBAAwGjM,KAAxG,eAAuHvD,IAAvH;;uFAEkFuP,IAAnF,iBAAmGhM,KAAnG,eAAkHvD,IAAlH;EALD;;UAQSyP,SAAT,GAAqB,UAACzP,IAAD;kBAAiBA,IAAjB;EAArB,CAtByC;;;;QA0BlC0P,KAAP,CAAaC,KAAb,CAAmBC,GAAnB,CAAuBC,OAAvB,GAAoCT,OAAOM,KAAP,CAAaC,KAAb,CAAmBG,MAAnB,CAA0BD,OAA9D;QACOH,KAAP,CAAaC,KAAb,CAAmBI,MAAnB,CAA0BF,OAA1B,GAAoCT,OAAOM,KAAP,CAAaC,KAAb,CAAmBG,MAAnB,CAA0BD,OAA9D;;SAEQG,aAAR,CAAsBX,QAAtB,GAAiCA,QAAjC;SACQW,aAAR,CAAsBC,SAAtB,GAAkC,KAAlC;QACOb,OAAOrK,MAAP,EAAezE,QAAQ0P,aAAvB,CAAP;;;AC7BD;;;;;;AAMA,SAASE,MAAT,CAAgBjO,IAAhB,EAAsB;QACdA,KAAK5C,OAAL,CAAa,SAAb,EAAwB,EAAxB,CAAP;QACO4C,KAAK5C,OAAL,CAAa,OAAb,EAAsB,GAAtB,CAAP;QACO4C,KAAK5C,OAAL,CAAa,OAAb,EAAsB,GAAtB,CAAP;QACO4C,IAAP;;;;;;;;AAQD,SAASkO,SAAT,CAAmBlO,IAAnB,EAAyB;QACjBA,KAAK5C,OAAL,CAAa,YAAb,EAA2B,EAA3B,CAAP,CADwB;QAEjB4C,KAAK5C,OAAL,CAAa,UAAb,EAAyB,EAAzB,CAAP,CAFwB;QAGjB4C,IAAP;;;;;;;;;AAUD,SAASmO,WAAT,CAAqBC,aAArB,EAAoCC,QAApC,EAA8C;6CACHA,QAA1C,WAAuDD,cAAcE,KAAd,IAAuBF,aAA9E;;;;;;;;;;;;;;;;;;;AAoBD,gBAAe,UAAUtL,MAAV,EAAkBzE,OAAlB,EAA2B;UAChCyE,OAAO1F,OAAP,CAAea,MAAMsQ,UAArB,EAAiC,UAAU7O,KAAV,EAAiB8O,MAAjB,EAAyBC,MAAzB,EAAiC;oBAC1DA,MAAhB;EADQ,CAAT;;QAIO3L,OAAO1F,OAAP,CAAea,MAAMyQ,aAArB,EAAoC,UAAChP,KAAD,EAAQ8O,MAAR,EAAgBC,MAAhB,EAAwBE,MAAxB,EAAmC;MACzE3O,OAAO2O,MAAX;SACWT,UAAUlO,IAAV,CAAX;SACWiO,OAAOjO,IAAP,CAAX;;;;;SAKOA,KAAK5C,OAAL,CAAa,QAAb,EAAuB,IAAvB,CAAP;;MAEIiR,WAAWI,OAAO9N,KAAP,CAAa,IAAb,EAAmB,CAAnB,CAAf;MACIiO,wBAAJ;;MAEMC,cAAcxQ,QAAQuJ,OAAR,CAAgBkH,WAApC;MACIT,QAAJ,EAAc;qBACKQ,YAAYE,aAAZ,CAA0B/O,IAA1B,EAAgC,CAACqO,QAAD,CAAhC,CAAlB;GADD,MAEO;qBACYQ,YAAYE,aAAZ,CAA0B/O,IAA1B,CAAlB;cACkB4O,gBAAgBP,QAAlC;;;SAGMF,YAAYS,eAAZ,EAA6BP,QAA7B,CAAP;EArBM,CAAP;;;ICxDoBW;eACR9Q,KAAZ,EAAmB4E,MAAnB,EAA2BzE,OAA3B,EAAoCT,MAApC,EAA4C;;;;;OACtCM,KAAL,GAAeA,KAAf;OACK4E,MAAL,GAAeA,MAAf;OACKzE,OAAL,GAAeA,OAAf;OACKT,MAAL,GAAeA,MAAf;OACKK,KAAL,GAAeA,MAAMgR,IAArB;OACK3Q,OAAL,GAAe,MAAf;;MAEG,OAAO,KAAKD,OAAL,CAAaH,KAApB,KAA8B,QAAjC,EAA0C;QACpCG,OAAL,CAAaH,KAAb,CAAmB+L,gBAAnB,CAAoC,UAApC,EAAgD,YAAM;UAChDF,IAAL;IADD;;;;;;2BAMOrK,OAAO;+CAC2BA,KAA1C;;;;yBAGM;OACFwP,QAAQ,KAAK7Q,OAAL,CAAaH,KAAb,CAAmBgJ,sBAAnB,CAA0C,UAA1C,CAAZ;QACK,IAAIpJ,IAAI,CAAb,EAAgBA,IAAIoR,MAAM1S,MAA1B,EAAkCsB,GAAlC,EAAuC;QAClCqR,YAAY9J,SAASkB,aAAT,CAAuB,QAAvB,CAAhB;cACUC,YAAV,CAAuB,OAAvB,EAAgC,MAAhC;cACU9F,EAAV,iBAA2B5C,CAA3B;;QAEIsR,OAAaF,MAAMpR,CAAN,CAAjB;SACK0J,SAAL,GAAiB,EAAjB;SACKf,WAAL,CAAiB0I,SAAjB;;;QAGI9N,MAAgB6N,MAAMpR,CAAN,EAASwJ,YAAT,CAAsB,UAAtB,CAApB;UACoBjG,IAAI3E,OAAJ,CAAY,MAAZ,MAAwB,CAAC,CAAzB,gBAAwC2E,GAAxC,GAAgDA,GAApE;QACIgO,2GAAwGvR,CAAxG,6GAA8MuD,GAA9M,iCAAJ;;;QAGIiO,eAAeH,UAAU9J,QAA7B;;QAEI8J,UAAUI,eAAd,EAA+B;oBACfJ,UAAUI,eAAzB;KADD,MAEO,IAAIJ,UAAUK,aAAd,EAA6B;oBACpBL,UAAUK,aAAV,CAAwBnK,QAAvC;;;iBAGYgG,IAAb;iBACaoE,OAAb,CAAqBJ,aAArB;iBACaK,KAAb;;;;;4BAIQ;UACF5G,MAAM,IAAN,CAAP;;;;;;AClDF,SAAS6G,UAAT,CAAoB1O,IAApB,EAA0B;QAClB;SACUA,KAAK2O,OAAL,CAAatO,KADvB;aAEUL,KAAK2O,OAAL,CAAaC,UAAb,CAAwBC,MAAxB,CAA+BzO,GAFzC;kBAGUJ,KAAK2O,OAAL,CAAarO,WAHvB;SAIUN,KAAK8O,UAAL,CAAgBC,SAJ1B;SAKU/O,KAAK8O,UAAL,CAAgBE,SAL1B;eAMU7T,SAAS6E,KAAK2O,OAAL,CAAarO,WAAtB,EAAmC,GAAnC,CANV;4CAO6CN,KAAKP,EAPlD;MAQUO,KAAKP,EARf;QASU;EATjB;;;AAaD,SAASO,IAAT,CAAcP,EAAd,EAAkBrC,OAAlB,EAA2B;KACtBgD,2DAA8DX,EAA9D,aAAwErC,QAAQsE,aAAhF,6BAAJ;QACO,IAAImD,OAAJ,CAAY,UAACC,OAAD,EAAa;QACzB1E,GAAN,EACEgI,IADF,CACO,UAACpI,IAAD;UAAUA,KAAKmF,IAAL,EAAV;GADP,EAEEiD,IAFF,CAEO,UAACjD,IAAD;UAAUL,QAAQK,KAAK8J,KAAL,CAAW,CAAX,CAAR,CAAV;GAFP;EADM,CAAP;;;AAOD,SAAS9G,WAAT,CAAmBL,IAAnB,EAAyBrJ,KAAzB,EAAgC2B,GAAhC,EAAqCwH,WAArC,EAAkD;KAC7CnI,KAAWmI,cAAcnJ,MAAM,CAAN,CAAd,GAAyBA,MAAM,CAAN,CAAxC;KACIyB,8CAA4CT,EAAhD;KACIqI,KAAK1K,OAAL,CAAa8R,YAAjB,EAA+B;SACvB,IAAIrK,OAAJ,CAAY,UAACC,OAAD,EAAa;QAC1BrF,EAAL,EAASqI,KAAK1K,OAAd,EAAuBgL,IAAvB,CAA4B,UAACpI,IAAD;WAAU8E,QAAQqK,mBAAmBT,WAAW1O,IAAX,CAAnB,EAAqCA,IAArC,EAA2CE,QAA3C,EAAqD4H,KAAK1K,OAA1D,CAAR,CAAV;IAA5B;GADM,CAAP;EADD,MAIO;SACC,IAAIyH,OAAJ,CAAY,UAACC,OAAD;UAAaA,QAAQ7C,WAAS/B,QAAT,EAAmB4H,KAAK1K,OAAxB,CAAR,CAAb;GAAZ,CAAP;;;;AAIF,gBAAe,UAAUH,KAAV,EAAiB4E,MAAjB,EAAyBzE,OAAzB,EAAkCT,MAAlC,EAA0C;KAClDmL,OAAO;cAAA;gBAAA;kBAAA;gBAAA;SAKH9K,MAAM4I,OALH;WAMH;EANV;;QASO,IAAIf,OAAJ,CAAY,UAACC,OAAD;SAAa6D,WAAWb,IAAX,EAAiBK,WAAjB,EAA4BC,IAA5B,CAAiC,UAACpI,IAAD;UAAU8E,QAAQ9E,IAAR,CAAV;GAAjC,CAAb;EAAZ,CAAP;;;AC5CD,SAAS0O,YAAT,CAAoB1O,IAApB,EAA0B7E,WAA1B,EAAoC;QAC5B;SACU6E,KAAKK,KADf;aAEUL,KAAKoP,gBAFf;kBAGUpP,KAAKM,WAAL,CAAiBnE,OAAjB,CAAyB,KAAzB,EAAgC,OAAhC,EAAyCA,OAAzC,CAAiD,QAAjD,EAA2D,OAA3D,CAHV;SAIU6D,KAAKqP,qBAJf;SAKUrP,KAAKsP,qBALf;eAMUnU,YAAS6E,KAAKM,WAAL,CAAiBnE,OAAjB,CAAyB,iCAAzB,EAA4D,GAA5D,CAAT,EAA2E,GAA3E,CANV;OAOU6D,KAAKI,GAPf;MAQUJ,KAAKP,EARf;QASU;EATjB;;;AAaD,SAASO,MAAT,CAAcP,EAAd,EAAkB;KACbW,0CAAwCX,EAAxC,UAAJ;QACO,IAAIoF,OAAJ,CAAY,UAACC,OAAD,EAAa;QACzB1E,GAAN,EACEgI,IADF,CACO,UAACpI,IAAD;UAAUA,KAAKmF,IAAL,EAAV;GADP,EAEEiD,IAFF,CAEO,UAACjD,IAAD;UAAUL,QAAQK,KAAK,CAAL,CAAR,CAAV;GAFP;EADM,CAAP;;;AAOD,SAASgD,WAAT,CAAmBL,IAAnB,EAAyBrJ,KAAzB,EAAgC2B,GAAhC,EAAqCwH,WAArC,EAAkD;KAC7CnI,WAAJ;KACI,CAACmI,WAAL,EAAkB;OACZE,KAAK1K,OAAL,CAAaqK,IAAb,GAAoBhJ,MAAM,CAAN,EAASmB,KAAT,CAAe,CAAf,EAAkB,CAAC,CAAnB,EAAsBF,KAAtB,CAA4B,GAA5B,EAAiCE,KAAjC,CAAuC,CAAC,CAAxC,EAA2C2P,GAA3C,EAApB,GAAuE9Q,MAAM,CAAN,EAASiB,KAAT,CAAe,GAAf,EAAoBE,KAApB,CAA0B,CAAC,CAA3B,EAA8B2P,GAA9B,EAA5E;EADD,MAEO;OACD9Q,MAAM,CAAN,CAAL;;KAEG,CAACgB,EAAL,EAAS;KACLS,+CAA6CT,EAAjD;KACIqI,KAAK1K,OAAL,CAAa8R,YAAjB,EAA+B;SACvB,IAAIrK,OAAJ,CAAY,UAACC,OAAD,EAAa;UAC1BrF,EAAL,EAAS2I,IAAT,CAAc,UAACpI,IAAD;WAAU8E,QAAQqK,mBAAmBT,aAAW1O,IAAX,EAAiB7E,QAAjB,CAAnB,EAA+C6E,IAA/C,EAAqDE,QAArD,EAA+D4H,KAAK1K,OAApE,CAAR,CAAV;IAAd;GADM,CAAP;EADD,MAIO;SACC,IAAIyH,OAAJ,CAAY,UAACC,OAAD;UAAaA,QAAQ7C,WAAS/B,QAAT,EAAmB4H,KAAK1K,OAAxB,CAAR,CAAb;GAAZ,CAAP;;;;AAKF,cAAe,UAAUH,KAAV,EAAiB4E,MAAjB,EAAyBzE,OAAzB,EAAkCT,MAAlC,EAA0C;KAClDmL,OAAO;cAAA;gBAAA;kBAAA;gBAAA;SAKH9K,MAAM2I,KALH;WAMH;EANV;;QASO,IAAId,OAAJ,CAAY,UAACC,OAAD;SAAa6D,WAAWb,IAAX,EAAiBK,WAAjB,EAA4BC,IAA5B,CAAiC,UAACpI,IAAD;UAAU8E,QAAQ9E,IAAR,CAAV;GAAjC,CAAb;EAAZ,CAAP;;;ACtDD,SAASwP,SAAT,CAAmB1H,IAAnB,EAAyB1H,GAAzB,EAA8B;KACzBqP,sDAAoDrP,GAApD,+BAAiF0H,KAAK1K,OAAL,CAAaQ,UAA9F,mBAAsHkK,KAAK1K,OAAL,CAAaS,WAAvI;QACO,IAAIgH,OAAJ,CAAY,UAACC,OAAD,EAAa;eACpB2K,GAAX,EAAgB,EAACjG,aAAa,SAAd,EAAhB,EACEpB,IADF,CACO,UAACpI,IAAD;UAAUA,KAAKmF,IAAL,EAAV;GADP,EAEEiD,IAFF,CAEO,UAACjD,IAAD;UAAUL,QAAQK,KAAKtF,IAAb,CAAV;GAFP;EADM,CAAP;;;AAOD,SAASsI,WAAT,CAAmBL,IAAnB,EAAyBrJ,KAAzB,EAAgC2B,GAAhC,EAAqC;QAC7B,IAAIyE,OAAJ,CAAY,UAACC,OAAD,EAAa;YACrBgD,IAAV,EAAgB1H,GAAhB,EAAqBgI,IAArB,CAA0B,UAACvI,IAAD;UAAUiF,QAAQgD,KAAK7F,QAAL,CAAcpC,IAAd,CAAR,CAAV;GAA1B;EADM,CAAP;;;AAKD,mBAAe,UAAU5C,KAAV,EAAiB4E,MAAjB,EAAyBzE,OAAzB,EAAkCT,MAAlC,EAA0C;KAClDmL,OAAO;cAAA,EACLjG,cADK,EACGzE,gBADH,EACYT,cADZ;SAELK,MAAM0S,UAFD;WAGH,YAHG;UAAA,oBAIH7P,IAJG,EAIG;UACP,KAAKzC,OAAL,CAAa6E,QAAb,CAAsByN,UAAtB,CAAiC7P,IAAjC,EAAuC,KAAKzC,OAA5C,CAAP;;EALF;;QASO,IAAIyH,OAAJ,CAAY,UAACC,OAAD;SAAa6D,WAAWb,IAAX,EAAiBK,WAAjB,EAA4BC,IAA5B,CAAiC,UAACpI,IAAD;UAAU8E,QAAQ9E,IAAR,CAAV;GAAjC,CAAb;EAAZ,CAAP;;;ACzBD,SAASwP,WAAT,CAAmBpP,GAAnB,EAAwBmH,CAAxB,EAA2B;OAChBoI,mBAAmBvP,GAAnB,CAAV;KACIqP,MAAM,IAAIG,QAAJ,CAAa,KAAb,EAAoB,aAAarI,EAAEnK,OAAF,CAAUyS,iBAAvB,GAA2C,GAA/D,EAAoEzP,GAApE,CAAV;QACO,IAAIyE,OAAJ,CAAY,UAACC,OAAD,EAAa;QACzB2K,GAAN,EACErH,IADF,CACO,UAAC0H,GAAD;UAAOA,IAAI3K,IAAJ,EAAP;GADP,EAEEiD,IAFF,CAEO,UAACjD,IAAD;UAAQL,QAAQyC,EAAEnK,OAAF,CAAU2S,gBAAV,CAA2B5K,IAA3B,KAAoCA,IAA5C,CAAR;GAFP;EADM,CAAP;;;AAOD,SAASgD,WAAT,CAAmBZ,CAAnB,EAAsB9I,KAAtB,EAA6B2B,GAA7B,EAAkC;KAC7BA,IAAI3B,KAAJ,CAAU8I,EAAEyI,YAAZ,CAAJ,EAA+B,OAAOnL,QAAQC,OAAR,EAAP;;QAExB,IAAID,OAAJ,CAAY,UAACC,OAAD,EAAa;cACrB1E,GAAV,EAAemH,CAAf,EAAkBa,IAAlB,CAAuB,UAACpI,IAAD;UAAU8E,QAAQ9E,QAAQA,KAAKiQ,OAAb,GAAuB1I,EAAEtF,QAAF,CAAWjC,IAAX,CAAvB,GAA0C,EAAlD,CAAV;GAAvB;EADM,CAAP;;;AAKD,kBAAe,UAAU/C,KAAV,EAAiB4E,MAAjB,EAAyBzE,OAAzB,EAAkCT,MAAlC,EAA0C;KAClDmL,OAAO;cAAA;gBAAA;kBAAA;gBAAA;WAKE,WALF;SAME5J,UANF;gBAOE,IAAIsE,MAAJ,CAAW,CAAC,qDAAD,EAAwD0N,MAAxD,CAA+D9S,QAAQ+S,gBAAvE,EAAyFpQ,IAAzF,CAA8F,GAA9F,CAAX,EAA+G,IAA/G,CAPF;UAAA,oBAQHC,IARG,EAQG;UACP,KAAK5C,OAAL,CAAa6E,QAAb,CAAsBmO,SAAtB,CAAgCpQ,IAAhC,EAAsC,KAAK5C,OAA3C,CAAP;;EATF;;QAaO,IAAIyH,OAAJ,CAAY,UAACC,OAAD;SAAa6D,WAAWb,IAAX,EAAiBK,WAAjB,EAA4BC,IAA5B,CAAiC,UAACpI,IAAD;UAAU8E,QAAQ9E,IAAR,CAAV;GAAjC,CAAb;EAAZ,CAAP;;;AChCD,SAASiC,UAAT,CAAkBjC,IAAlB,EAAwB5C,OAAxB,EAAiC;QACzBA,QAAQ6E,QAAR,CAAiBoO,MAAjB,CAAwBrQ,IAAxB,EAA8B5C,OAA9B,CAAP;;;AAGD,SAASkT,SAAT,CAAmBtQ,IAAnB,EAAyB;KACpByP,wCAAsCzP,KAAKuQ,IAA3C,SAAmDvQ,KAAKwQ,IAA5D;QACO,IAAI3L,OAAJ,CAAY,UAACC,OAAD,EAAa;QACzB2K,GAAN,EACErH,IADF,CACO,UAAUpI,IAAV,EAAgB;UACdA,KAAKmF,IAAL,EAAP;GAFF,EAIEiD,IAJF,CAIO,UAAUjD,IAAV,EAAgB;UACdL,QAAQK,IAAR,CAAP;GALF;EADM,CAAP;;;AAWD,SAASgD,WAAT,CAAmB0B,KAAnB,EAA0BpL,KAA1B,EAAiC2B,GAAjC,EAAsCwH,WAAtC,EAAmD;KAC9C5H,OAAO,CAAC4H,WAAD,GAAgB;QACpBnJ,MAAM,CAAN,CADoB;QAEpBA,MAAM,CAAN;EAFI,GAGL;QACCA,MAAM,CAAN,CADD;QAECA,MAAM,CAAN;EALP;;KAQI,CAACuB,KAAKwQ,IAAV,EAAgB;QACT,IAAI3L,OAAJ,CAAY,UAAUC,OAAV,EAAmB;YAC3B9E,IAAV,EACEoI,IADF,CACO,UAAUlD,QAAV,EAAoB;UAClBJ,QAAQ7C,WAASiD,QAAT,EAAmB2E,MAAMzM,OAAzB,CAAR,CAAP;GAFF;EADM,CAAP;;;AAQD,eAAe,UAAUH,KAAV,EAAiB4E,MAAjB,EAAyBzE,OAAzB,EAAkCT,MAAlC,EAA0C;KAClDmL,OAAO;cAAA,EACLjG,cADK,EACGzE,gBADH,EACYT,cADZ;WAEH,QAFG;SAGHK,MAAMqT;EAHhB;;QAMO,IAAIxL,OAAJ,CAAY,UAACC,OAAD;SAAa6D,WAAWb,IAAX,EAAiBK,WAAjB,EAA4BC,IAA5B,CAAiC,UAACpI,IAAD;UAAU8E,QAAQ9E,IAAR,CAAV;GAAjC,CAAb;EAAZ,CAAP;;;AC5CD,eAAe,UAAU/C,KAAV,EAAiBG,OAAjB,EAA0B;KAClCqT,SAASzT,MAAM0T,QAArB;QACOzT,MAAMd,OAAN,CAAcsU,MAAd,EAAqB,UAAChS,KAAD,EAAQ6N,EAAR,EAAYqE,EAAZ,EAAmB;MACxCC,WAAWD,GAAGjR,KAAH,CAAS,GAAT,EAAc,CAAd,CAAjB;SACO4M,KAAKlP,QAAQyT,WAAR,CAAoBD,QAApB,CAAZ;EAFM,CAAP;;;ACFD,cAAe,UAAU3T,KAAV,EAAiBG,OAAjB,EAA0B;KAClC0T,SAAS9T,MAAM+T,OAArB;QACO9T,MAAMd,OAAN,CAAc2U,MAAd,EAAqB,UAACrS,KAAD,EAAQ6N,EAAR,EAAYqE,EAAZ,EAAiB;MACtCC,WAAWD,GAAGjR,KAAH,CAAS,GAAT,EAAc,CAAd,CAAjB;SACO4M,KAAKlP,QAAQ4T,UAAR,CAAmBJ,QAAnB,CAAZ;EAFM,CAAP;;;AC0BD,IAAIK,gBAAgB,EAApB;;AAEA,IAAM5N,iBAAiB;SACd,KADc;gBAEP,EAFO;OAGhB,IAHgB;cAIT;UACJ,MADI;WAEH,CAAC,KAAD,CAFG;OAGP;EAPgB;QASf,IATe;cAUT,EAVS;YAWX,IAXW;kBAYL,EAZK;gBAaP,KAbO;WAcZ,KAdY;UAeb,KAfa;UAgBb,KAhBa;iBAiBN;SACR,IADQ;WAEN;EAnBY;OAqBhB,KArBgB;cAsBT,EAtBS;gBAuBP,IAvBO;aAwBV;QACL;EAzBe;cA2BT,KA3BS;eA4BR;YACH,GADG;aAEF,KAFE;cAGD,KAHC;SAIN,MAJM;QAKP;EAjCe;cAmCT,KAnCS;oBAoCH,IApCG;mBAqCJ,EArCI;aAsCV,IAtCU;cAuCT,IAvCS;aAwCV,IAxCU;eAyCR,IAzCQ;aA0CV,IA1CU;aA2CV,IA3CU;eA4CR,EA5CQ;cA6CT,EA7CS;aA8CV,IA9CU;kBA+CL,GA/CK;cAgDT;YACF,IADE;QAEN,UAFM;cAGA,IAHA;SAIL,GAJK;UAKJ;EArDa;UAuDb;UACAS,OAAOmI,MADP;WAECnI,OAAOoD,OAFR;QAGFpD,OAAOjD,IAHL;eAIKiD,OAAOoN,IAJZ;WAKCpN,OAAOqN,KALR;WAMCrN,OAAOsN;EA7DK;gBA+DP,EA/DO;oBAgEH;UACV,GADU;cAEN,QAFM;YAGR,KAHQ;eAIL,KAJK;gBAKJ,IALI;YAMR,IANQ;eAOL,KAPK;UAQV,KARU;YASR,KATQ;EAhEG;kBA2EL,iBA3EK;0BA4EG,KA5EH;cA6ET,uBAAY,EA7EH;aA+EV,sBAAY,EA/EF;qBAiFF,8BAAY,EAjFV;oBAmFH,6BAAY,EAnFT;cAqFT,uBAAY,EArFH;eAuFR,wBAAY,EAvFJ;kBAyFL,2BAAY,EAzFP;mBA2FJ,4BAAY,EA3FR;kBA6FL,2BAAY,EA7FP;oBA+FH,6BAAY,EA/FT;SAiGd,EAjGc;CAAvB;;AAoGA,IAAIC,YAAY,EAAhB;AACA,IAAIC,eAAe,EAAnB;AACA,IAAIhJ,WAAW,EAAf;;IAEqBiJ;;;;;;;;;;;kBAWRnU,OAAZ,EAAqB6E,WAArB,EAA+B;;;;;;;MAK1BuP,UAAU1T,YAAYuF,cAAZ,CAAd;MACIoO,WAAW3T,YAAYmT,aAAZ,CAAf;;;MAGIS,cAAchW,WAAW8V,OAAX,EAAoBC,QAApB,CAAlB;;;;OAIKrU,OAAL,GAAe1B,WAAWgW,WAAX,EAAwBtU,OAAxB,CAAf;;OAEKA,OAAL,CAAa6E,QAAb,GAAwBvG,WAAWyQ,QAAX,EAAqBlK,WAArB,CAAxB;;MAEI,EAAE,OAAO,KAAK7E,OAAL,CAAaH,KAApB,KAA8B,QAA9B,IAA0C,oBAAO,KAAKG,OAAL,CAAaH,KAApB,MAA8B,QAA1E,CAAJ,EAAyF,MAAM2J,eAAe,sEAAf,CAAN;;OAEpF3J,KAAL,GAAc,oBAAO,KAAKG,OAAL,CAAaH,KAApB,MAA8B,QAA/B,GAA2C,KAAKG,OAAL,CAAaH,KAAb,CAAmBsJ,SAA9D,GAA0E,KAAKnJ,OAAL,CAAaH,KAApG;;;;;;;;;;;;4BASS;;;OACHA,QAAQ,KAAKA,KAAnB;;OAEIA,UAAU,EAAd,EAAkB,OAAO4H,QAAQC,OAAR,CAAgB,EAAhB,CAAP;;OAEZ1H,UAAUmB,eAAe,KAAKnB,OAApB,CAAhB;OACIT,SAAS,EAAb;OACIkF,SAAS5E,KAAb;;QAEKG,OAAL,CAAauU,kBAAb;;UAEO,IAAI9M,OAAJ,CAAY,UAACC,OAAD,EAAa;QAC3B1H,QAAQqK,IAAZ,EACC5F,SAASzB,MAAInD,KAAJ,EAAWG,OAAX,CAAT;;QAEKwU,mBAAmBxU,QAAQyS,iBAAR,GAA4BO,YAAUnT,KAAV,EAAiB4E,MAAjB,EAAyBzE,OAAzB,EAAkCT,MAAlC,CAA5B,GAAwEkI,QAAQC,OAAR,CAAgB,CAACjD,MAAD,EAASlF,MAAT,CAAhB,CAAjG;;qBAEiByL,IAAjB,CAAsB,gBAA4B;;;SAAjBvG,MAAiB;SAATlF,MAAS;;SAC7CS,QAAQqQ,aAAZ,EAA2B;eACjBV,UAAUlL,MAAV,EAAkBzE,OAAlB,CAAT;;SAEGA,QAAQ6O,MAAZ,EAAoB;eACV4F,SAAShQ,MAAT,EAAiBzE,OAAjB,CAAT;;SAEGA,QAAQ4E,KAAZ,EAAmB;eACTA,QAAMH,MAAN,EAAczE,OAAd,CAAT;;SAEGA,QAAQ0U,SAAZ,EAAuB;eACbrP,SAAOZ,MAAP,EAAezE,OAAf,CAAT;;SAEGA,QAAQsT,QAAZ,EAAsB;eACZA,SAAS7O,MAAT,EAAiBzE,OAAjB,CAAT;;SAEGA,QAAQ2T,OAAZ,EAAqB;eACXA,QAAQlP,MAAR,EAAgBzE,OAAhB,CAAT;;;sBAGkB2K,UAAU9K,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,MAAM+U,MAAhD,EAAwD,QAAxD,CApB8B;;;;WAAA;WAAA;;uBAqB9BhK,UAAU9K,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,MAAMgV,OAAhD,EAAyD,SAAzD,CArB8B;;;;WAAA;WAAA;;uBAsB9BjK,UAAU9K,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,MAAMiV,KAAhD,EAAuD,OAAvD,CAtB8B;;;;WAAA;WAAA;;uBAuB9BlK,UAAU9K,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,MAAMkV,OAAhD,EAAyD,SAAzD,CAvB8B;;;;WAAA;WAAA;;uBAwB9BnK,UAAU9K,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,MAAMmV,QAAhD,EAA0D,UAA1D,CAxB8B;;;;WAAA;WAAA;;wBAyB9BpK,UAAU9K,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,MAAMoV,GAAhD,EAAqD,KAArD,CAzB8B;;;;WAAA;WAAA;;wBA0B9BrK,UAAU9K,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,MAAMqV,WAAhD,EAA6D,aAA7D,CA1B8B;;;;WAAA;WAAA;;wBA2B9BtK,UAAU9K,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,MAAMsV,OAAhD,EAAyD,SAAzD,CA3B8B;;;;WAAA;WAAA;;wBA4B9BvK,UAAU9K,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,MAAMuV,QAAhD,EAA0D,UAA1D,CA5B8B;;;;WAAA;WAAA;;wBA6B9BxK,UAAU9K,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,MAAMwV,UAAhD,EAA4D,OAA5D,EAAqEpV,QAAQqV,UAA7E,CA7B8B;;;;WAAA;WAAA;;wBA8B9B1K,UAAU9K,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,MAAM0V,IAAhD,EAAsD,MAAtD,CA9B8B;;;;WAAA;WAAA;;wBA+B9B3K,UAAU9K,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,MAAM2V,UAAhD,EAA4D,YAA5D,CA/B8B;;;;WAAA;WAAA;;wBAgC9B5K,UAAU9K,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,MAAM4V,OAAhD,EAAyD,SAAzD,CAhC8B;;;;WAAA;WAAA;;wBAiC9B7K,UAAU9K,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,MAAM6V,UAAhD,EAA4D,OAA5D,EAAqEzV,QAAQ0V,UAA7E,CAjC8B;;;;WAAA;WAAA;;wBAkC9B/K,UAAU9K,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,MAAM+V,MAAhD,EAAwD,QAAxD,CAlC8B;;;;WAAA;WAAA;;wBAmC9BhL,UAAU9K,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,MAAMgW,SAAhD,EAA2D,WAA3D,CAnC8B;;;;WAAA;WAAA;;wBAoC9BjL,UAAU9K,KAAV,EAAiB4E,MAAjB,EAAyBlF,MAAzB,EAAiCS,OAAjC,EAA0CJ,MAAMiW,UAAhD,EAA4D,OAA5D,EAAqE7V,QAAQ8V,UAA7E,CApC8B;;;;WAAA;WAAA;;;SAsC7C/V,QAAQC,OAAR,EAAiB,MAAjB,CAAJ,EAA8B;qBACV,IAAI2Q,IAAJ,CAAS9Q,KAAT,EAAgB4E,MAAhB,EAAwBzE,OAAxB,EAAiCT,MAAjC,EAAyCwW,OAAzC,EADU;;;;YAAA;YAAA;;;YAIvBhW,QAAQC,OAAR,EAAiB,SAAjB,IAA8BwI,UAAQ3I,KAAR,EAAe4E,MAAf,EAAuBzE,OAAvB,EAAgCT,MAAhC,CAA9B,GAAwEkI,QAAQC,OAAR,CAAgB,CAACjD,MAAD,EAASlF,MAAT,CAAhB,CAA/E;KA1CD,EA2CGyL,IA3CH,CA2CQ,iBAA4B;;;SAAjBvG,MAAiB;SAATlF,MAAS;;YAC5BQ,QAAQC,OAAR,EAAiB,OAAjB,IAA4BuI,QAAM1I,KAAN,EAAa4E,MAAb,EAAqBzE,OAArB,EAA8BT,MAA9B,CAA5B,GAAoEkI,QAAQC,OAAR,CAAgB,CAACjD,MAAD,EAASlF,MAAT,CAAhB,CAA3E;KA5CD,EA6CGyL,IA7CH,CA6CQ,iBAA4B;;;SAAjBvG,MAAiB;SAATlF,MAAS;;YAC5BQ,QAAQC,OAAR,EAAiB,QAAjB,IAA6BiT,SAAOpT,KAAP,EAAc4E,MAAd,EAAsBzE,OAAtB,EAA+BT,MAA/B,CAA7B,GAAsEkI,QAAQC,OAAR,CAAgB,CAACjD,MAAD,EAASlF,MAAT,CAAhB,CAA7E;KA9CD,EA+CGyL,IA/CH,CA+CQ,iBAA4B;;;SAAjBvG,MAAiB;SAATlF,MAAS;;YAC5BS,QAAQgW,aAAR,IAAyBjW,QAAQC,OAAR,EAAiB,MAAjB,CAAzB,GAAoDwO,OAAK3O,KAAL,EAAY4E,MAAZ,EAAoBzE,OAApB,EAA6BT,MAA7B,CAApD,GAA2FkI,QAAQC,OAAR,CAAgB,CAACjD,MAAD,EAASlF,MAAT,CAAhB,CAAlG;KAhDD,EAiDGyL,IAjDH,CAiDQ,iBAA4B;;;SAAjBvG,MAAiB;SAATlF,MAAS;;YAC5BQ,QAAQC,OAAR,EAAiB,YAAjB,IAAiCsS,aAAWzS,KAAX,EAAkB4E,MAAlB,EAA0BzE,OAA1B,EAAmCT,MAAnC,CAAjC,GAA8EkI,QAAQC,OAAR,CAAgB,CAACjD,MAAD,EAASlF,MAAT,CAAhB,CAArF;KAlDD,EAmDGyL,IAnDH,CAmDQ,kBAAsB;;;SAApBvG,MAAoB;SAAZlF,MAAY;;SACzBS,QAAQiW,WAAR,IAAuBlW,QAAQC,OAAR,EAAiB,SAAjB,CAA3B,EAAwD;YAClDyL,OAAL,GAAe,IAAID,OAAJ,CAAY3L,KAAZ,EAAmB4E,MAAnB,EAA2BzE,OAA3B,EAAoCT,MAApC,CAAf;aACO,MAAKkM,OAAL,CAAasK,OAAb,EAAP;MAFD,MAGO;aACCtO,QAAQC,OAAR,CAAgB,CAACjD,MAAD,EAASlF,MAAT,CAAhB,CAAP;;KAxDF,EA0DGyL,IA1DH,CA0DQ,kBAAsB;;;SAApBvG,MAAoB;SAAZlF,MAAY;;WACxBqD,IAAL,GAAY;aACJ5C,QAAQH,KADJ;oBAAA;sBAAA;mBAIE,MAAKA,KAJP;gBAKDG,QAAQG,MALP;gBAMDH,QAAQ6E;MANnB;;aASQvF,WAAWmF,MAAX,EAAmBlF,MAAnB,CAAR;KApED;IANM,CAAP;;;;;;;;;;;;;;;;2BA0FQ;;;OACJ,OAAO,KAAKS,OAAL,CAAaH,KAApB,KAA8B,QAAlC,EAA4C,MAAM,IAAIyI,KAAJ,8CAAN;OACxC,CAAC,KAAKtI,OAAL,CAAaH,KAAlB,EAAyB,MAAM,IAAIyI,KAAJ,kHAAN;;UAElB,IAAIb,OAAJ,CAAY,UAACC,OAAD,EAAa;WAC1BqO,OAAL,GAAe/K,IAAf,CAAoB,UAACpI,IAAD,EAAU;YACxB5C,OAAL,CAAaH,KAAb,CAAmBsJ,SAAnB,GAA+BvG,IAA/B;YACKsT,cAAL;aACQ,OAAKtT,IAAb;KAHD;IADM,CAAP;;;;;;;;;;;mCAcgB;gBACH,KAAK5C,OAAlB;aACU,KAAKA,OAAf;;aAEU,KAAKA,OAAf;;OAEImW,QAAQ,IAAIC,KAAJ,CAAU,UAAV,CAAZ;QACKpW,OAAL,CAAaH,KAAb,CAAmBwW,aAAnB,CAAiCF,KAAjC;;QAEKnW,OAAL,CAAasW,iBAAb;;;;;;;;;;;yBASMtW,SAAS6E,aAAU;;OAErB7E,OAAJ,EACC,KAAKA,OAAL,GAAe1B,WAAW,KAAK0B,OAAhB,EAAyBA,OAAzB,CAAf;;OAEG6E,WAAJ,EACC,KAAK7E,OAAL,CAAa6E,QAAb,GAAwBA,WAAxB;;OAEG,CAAC,KAAK7E,OAAL,CAAaH,KAAd,IAAuB,EAAE,OAAO,KAAKG,OAAL,CAAaH,KAApB,KAA8B,QAA9B,IAA0C,oBAAO,KAAKG,OAAL,CAAaH,KAApB,MAA8B,QAA1E,CAA3B,EAAgH,MAAM2J,eAAe,sEAAf,CAAN;;QAE3G3J,KAAL,GAAc,oBAAO,KAAKG,OAAL,CAAaH,KAApB,MAA8B,QAA/B,GAA2C,KAAKG,OAAL,CAAaH,KAAb,CAAmBsJ,SAA9D,GAA0E,KAAKnJ,OAAL,CAAaH,KAApG;;;;;;;;;;uBAOI0W,UAAU;;;QACTR,OAAL,GAAe/K,IAAf,CAAoB,UAACpI,IAAD;WAAU2T,SAAS3T,IAAT,EAAe,OAAK/C,KAApB,CAAV;IAApB;;;;;;;;;;;4BAQS;OACL,oBAAO,KAAKG,OAAL,CAAaH,KAApB,MAA8B,QAAlC,EAA4C,MAAM,IAAIyI,KAAJ,mFAAN;iBAC9B,iBAAd;OACI,KAAKtI,OAAL,CAAaiW,WAAjB,EACC,KAAKjW,OAAL,CAAaH,KAAb,CAAmB2W,mBAAnB,CAAuC,UAAvC,EAAmD,KAAK/K,OAAL,CAAaC,IAAb,EAAnD,EAAwE,KAAxE;QACI1L,OAAL,CAAaH,KAAb,CAAmBsJ,SAAnB,GAA+B,KAAKtJ,KAApC;;;;;;;;;;6BAOiBG,SAAS;mBACV1B,WAAW2H,cAAX,EAA2BjG,OAA3B,CAAhB;;;;;;;;;;;;;+BAUmByW,cAAiD;OAAnCzW,OAAmC,uEAAzB,EAAyB;OAArB6E,WAAqB,uEAAVkK,QAAU;;OAChE/E,WAAWhD,SAAS0P,gBAAT,CAA0BD,YAA1B,CAAf;QACK,IAAIhX,IAAI,CAAb,EAAgBA,IAAIuK,SAAS7L,MAA7B,EAAqCsB,GAArC,EAA0C;YACjCI,KAAR,GAAgBmK,SAASvK,CAAT,CAAhB;cACUA,CAAV,IAAe,IAAI0U,OAAJ,CAAYnU,OAAZ,EAAqB6E,WAArB,CAAf;aACSpF,CAAT,IAAcwU,UAAUxU,CAAV,EAAakX,MAAb,EAAd;;UAEM,IAAIlP,OAAJ,CAAY,UAAUC,OAAV,EAAmB;YAC7ByD,GAAR,CAAYD,QAAZ,EAAsBF,IAAtB,CAA2B,UAAU9F,GAAV,EAAe;aACjCA,GAAR;KADD;IADM,CAAP;;;;;;;;;;mCAWuB;QAClB,IAAIzF,IAAI,CAAb,EAAgBA,IAAIwU,UAAU9V,MAA9B,EAAsCsB,GAAtC,EAA2C;cAChCA,CAAV,EAAamX,OAAb;;;;;;;;;;;+BAQkB;QACd,IAAInX,IAAI,CAAb,EAAgBA,IAAIyU,aAAa/V,MAAjC,EAAyCsB,GAAzC,EAA8C;iBAChCA,CAAb,EAAgBmX,OAAhB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6BA0BgB;UACV7H,QAAP;;;;;;;;"}