!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.EmbedJS=t()}(this,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports,ce),t.exports}function t(e,t){return e.substr(0,t-1)+(e.length>t?"...":"")}function i(e){return e.indexOf("//")===-1?"//"+e:e}function n(e,t){for(var i in t)t.hasOwnProperty(i)&&t[i]&&t[i].constructor===Object?(e[i]=e[i]||{},n(e[i],t[i])):e[i]=t[i];return e}function o(e){return e.replace(/[\-\[\]\/\{}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function r(e){return e.sort(function(e,t){return e.index-t.index})}function s(e,t){for(var i=r(t),n=0;n<i.length;n++)e+=" "+i[n].text;return e}function a(e,t){return e.exec(t)}function u(e,t){if(!e.singleEmbed||!e.served.length)return e.excludeEmbed.indexOf(t)==-1&&!("all"===e.excludeEmbed)}function l(e,t){return e.inlineEmbed.indexOf(t)>=0||"all"===e.inlineEmbed}function d(e){return e.videoWidth=e.videoWidth||e.videoHeight/3*4||800,e.videoHeight=e.videoHeight||e.videoWidth/4*3||600,e}function c(e){if(null===e||"object"!==("undefined"==typeof e?"undefined":pe.typeof(e)))return e;var t=e.constructor();for(var i in e)t[i]=c(e[i]);return t}function p(){return/((href|src)=["']|)(\b(https?|ftp|file):\/\/[^,.\s]+[^\s]*[^,.\s]+)|(?:https?:\/\/)?(?:(?:0rz\.tw)|(?:1link\.in)|(?:1url\.com)|(?:2\.gp)|(?:2big\.at)|(?:2tu\.us)|(?:3\.ly)|(?:307\.to)|(?:4ms\.me)|(?:4sq\.com)|(?:4url\.cc)|(?:6url\.com)|(?:7\.ly)|(?:a\.gg)|(?:a\.nf)|(?:aa\.cx)|(?:abcurl\.net)|(?:ad\.vu)|(?:adf\.ly)|(?:adjix\.com)|(?:afx\.cc)|(?:all\.fuseurl.com)|(?:alturl\.com)|(?:amzn\.to)|(?:ar\.gy)|(?:arst\.ch)|(?:atu\.ca)|(?:azc\.cc)|(?:b23\.ru)|(?:b2l\.me)|(?:bacn\.me)|(?:bcool\.bz)|(?:binged\.it)|(?:bit\.ly)|(?:buff\.ly)|(?:bizj\.us)|(?:bloat\.me)|(?:bravo\.ly)|(?:bsa\.ly)|(?:budurl\.com)|(?:canurl\.com)|(?:chilp\.it)|(?:chzb\.gr)|(?:cl\.lk)|(?:cl\.ly)|(?:clck\.ru)|(?:cli\.gs)|(?:cliccami\.info)|(?:clickthru\.ca)|(?:clop\.in)|(?:conta\.cc)|(?:cort\.as)|(?:cot\.ag)|(?:crks\.me)|(?:ctvr\.us)|(?:cutt\.us)|(?:dai\.ly)|(?:decenturl\.com)|(?:dfl8\.me)|(?:digbig\.com)|(?:digg\.com)|(?:disq\.us)|(?:dld\.bz)|(?:dlvr\.it)|(?:do\.my)|(?:doiop\.com)|(?:dopen\.us)|(?:easyuri\.com)|(?:easyurl\.net)|(?:eepurl\.com)|(?:eweri\.com)|(?:fa\.by)|(?:fav\.me)|(?:fb\.me)|(?:fbshare\.me)|(?:ff\.im)|(?:fff\.to)|(?:fire\.to)|(?:firsturl\.de)|(?:firsturl\.net)|(?:flic\.kr)|(?:flq\.us)|(?:fly2\.ws)|(?:fon\.gs)|(?:freak\.to)|(?:fuseurl\.com)|(?:fuzzy\.to)|(?:fwd4\.me)|(?:fwib\.net)|(?:g\.ro.lt)|(?:gizmo\.do)|(?:gl\.am)|(?:go\.9nl.com)|(?:go\.ign.com)|(?:go\.usa.gov)|(?:goo\.gl)|(?:goshrink\.com)|(?:gurl\.es)|(?:hex\.io)|(?:hiderefer\.com)|(?:hmm\.ph)|(?:href\.in)|(?:hsblinks\.com)|(?:htxt\.it)|(?:huff\.to)|(?:hulu\.com)|(?:hurl\.me)|(?:hurl\.ws)|(?:icanhaz\.com)|(?:idek\.net)|(?:ilix\.in)|(?:is\.gd)|(?:its\.my)|(?:ix\.lt)|(?:j\.mp)|(?:jijr\.com)|(?:kl\.am)|(?:klck\.me)|(?:korta\.nu)|(?:krunchd\.com)|(?:l9k\.net)|(?:lat\.ms)|(?:liip\.to)|(?:liltext\.com)|(?:linkbee\.com)|(?:linkbun\.ch)|(?:liurl\.cn)|(?:ln-s\.net)|(?:ln-s\.ru)|(?:lnk\.gd)|(?:lnk\.ms)|(?:lnkd\.in)|(?:lnkurl\.com)|(?:lru\.jp)|(?:lt\.tl)|(?:lurl\.no)|(?:macte\.ch)|(?:mash\.to)|(?:merky\.de)|(?:migre\.me)|(?:miniurl\.com)|(?:minurl\.fr)|(?:mke\.me)|(?:moby\.to)|(?:moourl\.com)|(?:mrte\.ch)|(?:myloc\.me)|(?:myurl\.in)|(?:n\.pr)|(?:nbc\.co)|(?:nblo\.gs)|(?:nn\.nf)|(?:not\.my)|(?:notlong\.com)|(?:nsfw\.in)|(?:nutshellurl\.com)|(?:nxy\.in)|(?:nyti\.ms)|(?:o-x\.fr)|(?:oc1\.us)|(?:om\.ly)|(?:omf\.gd)|(?:omoikane\.net)|(?:on\.cnn.com)|(?:on\.mktw.net)|(?:onforb\.es)|(?:orz\.se)|(?:ow\.ly)|(?:ping\.fm)|(?:pli\.gs)|(?:pnt\.me)|(?:politi\.co)|(?:post\.ly)|(?:pp\.gg)|(?:profile\.to)|(?:ptiturl\.com)|(?:pub\.vitrue.com)|(?:qlnk\.net)|(?:qte\.me)|(?:qu\.tc)|(?:qy\.fi)|(?:r\.im)|(?:rb6\.me)|(?:read\.bi)|(?:readthis\.ca)|(?:reallytinyurl\.com)|(?:redir\.ec)|(?:redirects\.ca)|(?:redirx\.com)|(?:retwt\.me)|(?:ri\.ms)|(?:rickroll\.it)|(?:riz\.gd)|(?:rt\.nu)|(?:ru\.ly)|(?:rubyurl\.com)|(?:rurl\.org)|(?:rww\.tw)|(?:s4c\.in)|(?:s7y\.us)|(?:safe\.mn)|(?:sameurl\.com)|(?:sdut\.us)|(?:shar\.es)|(?:shink\.de)|(?:shorl\.com)|(?:short\.ie)|(?:short\.to)|(?:shortlinks\.co.uk)|(?:shorturl\.com)|(?:shout\.to)|(?:show\.my)|(?:shrinkify\.com)|(?:shrinkr\.com)|(?:shrt\.fr)|(?:shrt\.st)|(?:shrten\.com)|(?:shrunkin\.com)|(?:simurl\.com)|(?:slate\.me)|(?:smallr\.com)|(?:smsh\.me)|(?:smurl\.name)|(?:sn\.im)|(?:snipr\.com)|(?:snipurl\.com)|(?:snurl\.com)|(?:sp2\.ro)|(?:spedr\.com)|(?:srnk\.net)|(?:srs\.li)|(?:starturl\.com)|(?:su\.pr)|(?:surl\.co.uk)|(?:surl\.hu)|(?:t\.cn)|(?:t\.co)|(?:t\.lh.com)|(?:ta\.gd)|(?:tbd\.ly)|(?:tcrn\.ch)|(?:tgr\.me)|(?:tgr\.ph)|(?:tighturl\.com)|(?:tiniuri\.com)|(?:tiny\.cc)|(?:tiny\.ly)|(?:tiny\.pl)|(?:tinylink\.in)|(?:tinyuri\.ca)|(?:tinyurl\.com)|(?:tl\.gd)|(?:tmi\.me)|(?:tnij\.org)|(?:tnw\.to)|(?:tny\.com)|(?:to\.ly)|(?:togoto\.us)|(?:totc\.us)|(?:toysr\.us)|(?:tpm\.ly)|(?:tr\.im)|(?:tra\.kz)|(?:trunc\.it)|(?:twhub\.com)|(?:twirl\.at)|(?:twitclicks\.com)|(?:twitterurl\.net)|(?:twitterurl\.org)|(?:twiturl\.de)|(?:twurl\.cc)|(?:twurl\.nl)|(?:u\.mavrev.com)|(?:u\.nu)|(?:u76\.org)|(?:ub0\.cc)|(?:ulu\.lu)|(?:updating\.me)|(?:ur1\.ca)|(?:url\.az)|(?:url\.co.uk)|(?:url\.ie)|(?:url360\.me)|(?:url4\.eu)|(?:urlborg\.com)|(?:urlbrief\.com)|(?:urlcover\.com)|(?:urlcut\.com)|(?:urlenco\.de)|(?:urli\.nl)|(?:urls\.im)|(?:urlshorteningservicefortwitter\.com)|(?:urlx\.ie)|(?:urlzen\.com)|(?:usat\.ly)|(?:use\.my)|(?:vb\.ly)|(?:vgn\.am)|(?:vl\.am)|(?:vm\.lc)|(?:w55\.de)|(?:wapo\.st)|(?:wapurl\.co.uk)|(?:wipi\.es)|(?:wp\.me)|(?:x\.vu)|(?:xr\.com)|(?:xrl\.in)|(?:xrl\.us)|(?:xurl\.es)|(?:xurl\.jp)|(?:y\.ahoo.it)|(?:yatuc\.com)|(?:ye\.pe)|(?:yep\.it)|(?:yfrog\.com)|(?:yhoo\.it)|(?:yiyd\.com)|(?:youtu\.be)|(?:yuarel\.com)|(?:z0p\.de)|(?:zi\.ma)|(?:zi\.mu)|(?:zipmyurl\.com)|(?:zud\.me)|(?:zurl\.ws)|(?:zz\.gd)|(?:zzang\.kr)|(?:›\.ws)|(?:✩\.ws)|(?:✿\.ws)|(?:❥\.ws)|(?:➔\.ws)|(?:➞\.ws)|(?:➡\.ws)|(?:➨\.ws)|(?:➯\.ws)|(?:➹\.ws)|(?:➽\.ws))\/[a-z0-9]*/gi}function m(e,t){return"string"!=typeof e[t]&&(e[t]=e[t].map(function(e){return e.toLowerCase()})),e}function h(e){return e=d(e),e=m(e,"excludeEmbed"),e=m(e,"inlineEmbed"),m(e,"openGraphExclude")}function f(e){return e[e.length-1]}function v(e){return":"===e[0]&&":"===f(e)&&e.substring(1,e.length-1)}function g(e,t){return e.replace(he.smileys,function(e){var i=v(e);return i?t.template.emoji(i,t):e})}function y(e,t){var i=t.customFontIcons.length?t.customFontIcons:fe,n=i.map(function(e){return o(e.text)}),r=new RegExp("(^|\\s)("+n.join("|")+")(?=\\s|$)","gi");return e.replace(r,function(e,r,s){var a=n.indexOf(o(s));if(a===-1)return e;var u=i[a].code;return t.template.smiley(s,r,u,t)})}function b(e,t){var i=t.linkOptions;return e.replace(p(),function(e){if(")"===f(e))return e;var n=f(e.split("."));return"/"===f(e)&&(e=e.slice(0,-1)),i.exclude.indexOf(n)===-1?t.template.url(e,t):e})}function w(e,t){return t.template.vimeo(e,t)||t.template.youtube(e,t)}function j(e){if(e.customVideoClickHandler)return e.videoClickHandler(e,w);for(var t=document.getElementsByClassName(e.videoClickClass),i=0;i<t.length;i++)t[i].onclick=function(){e.onVideoShow();var t=this.getAttribute("data-ejs-url")+"?autoplay=true";this.parentNode.parentNode.innerHTML=w(t,e)}}function x(e,t,i,n){return"vimeo"===e.host?n.template.detailsVimeo(e,t,i,n):"youtube"===e.host?n.template.detailsYoutube(e,t,i,n):void 0}function k(e){if(e.plyr){if(!e.plugins.plyr)throw new ReferenceError("You have enabled plyr but you haven't loaded the library.Find it at https://plyr.io/");var t=e.plugins.plyr;t.setup(".ejs-plyr",e.plyrOptions)}}function E(e){if(e.videojsOptions.width=e.videoWidth,e.videojsOptions.height=e.videoHeight,e.videoJS){if(!e.plugins.videojs)throw new ReferenceError("You have enabled videojs but you haven't loaded the library.Find it at http://videojs.com/");for(var t=e.plugins.videojs,i=e.input.getElementsByClassName("ejs-video-js"),n=0;n<i.length;n++)t(i[n],e.videojsOptions,function(){return e.videojsCallback()})}}function T(e){for(var t=document.getElementsByClassName(e),i=0;i<t.length;i++)t[i].onclick=null}function A(e){var t=e.options.link?new RegExp("([^>]*"+e.regex.source+")</a>","gm"):new RegExp("([^\\s]*"+e.regex.source+")","gm");return e.output=e.output.replace(t,function(t){var i=e.options.link?t.slice(0,-4):t;return e.options.served.indexOf(i)===-1?(e.options.served.push(i),e.options.link?e.options.inlineText?t+e.template(t.slice(0,-4)):e.template(t.slice(0,-4))+"</a>":e.options.inlineText?t+e.template(t):e.template(t)):t}),[e.output,e.embeds]}function P(e){for(var t=void 0;null!==(t=a(e.regex,e.input));){var i=t[0];if(!(e.options.served.indexOf(i)!==-1||e.options.served.length&&e.options.singleEmbed)){e.options.served.push(i);var n=e.template(i);e.embeds.push({text:n,index:t.index})}}return[e.output,e.embeds]}function _(e){return l(e.options,e.service)?A(e):P(e)}function O(e,t,i,n,o,r){var s={input:e,output:t,options:n,embeds:i,regex:o,service:r,template:function(e){return this.options.template[this.service](e,this.options)}};return _(s)}function C(e,t,i,n,o,r,s){return u(n,r)||u(n,r)&&s?O(e,t,i,n,o,r):[t,i]}function z(e,t,i){var n=(e.options.link?i[0].slice(0,-4):i[0])||i[1];return e.options.served.indexOf(n)>=0?Promise.resolve(null):new Promise(function(o){t(e,i,n).then(function(t){return t?(e.options.served.push(n),void o(t)):o()})})}function S(e,t){for(var i=e.options.link?new RegExp("([^>]*"+e.regex.source+")</a>","gi"):new RegExp("([^\\s]*"+e.regex.source+")","gi"),n=void 0,o=[];null!==(n=a(i,e.output));)o.push(z(e,t,n));return new Promise(function(t){o.length?Promise.all(o).then(function(n){var o=0;e.output=e.output.replace(i,function(t){return e.options.link?e.options.inlineText?t+n[o++]:n[o++]+"</a>":e.options.inlineText?t+n[o++]:n[o++]}),t(e.output)}):t(e.output)})}function H(e,t,i){var n=i[0];if(!(e.options.served.indexOf(n)>=0))return new Promise(function(o){t(e,i,n,!0).then(function(t){t||o(),e.options.served.push(n),e.embeds.push({text:t,index:i.index}),o()})})}function R(e,t){for(var i=void 0,n=[];null!==(i=a(e.regex,e.input));)n.push(H(e,t,i));return new Promise(function(t){Promise.all(n).then(function(){t(e.embeds)})})}function B(e,t){return new Promise(function(i){l(e.options,e.service)?S(e,t).then(function(t){return i([t,e.embeds])}):R(e,t).then(function(t){return i([e.output,t])})})}function D(e){var t="http://maps.googleapis.com/maps/api/geocode/json?address="+e+"&sensor=false";return new Promise(function(e){fetch(t).then(function(e){return e.json()}).then(function(t){return e([t.results[0].geometry.location.lat,t.results[0].geometry.location.lng])})})}function L(e,t,i,n){var o=U(e);return n.template.gmap(t,i,o,n)}function U(e){return e.split("(")[1].split(")")[0]}function F(e,t,i,n){for(var o=void 0,r=[],s=[],u="map";null!==(o=a(he.gmap,t));){i.served.push(o);var d="place"!==i.mapOptions.mode?D(o[0]):Promise.resolve([null,null]);r.push(d),s.push(o)}return new Promise(function(e){Promise.all(r).then(function(o){var a=function(){var e=pe.slicedToArray(o[d],2),r=e[0],a=e[1],c=L(s[d][0],r,a,i);l(i,u)?t=t.replace(he.gmap,function(e){return'<span class="ejs-location">'+U(e)+"</span>"+c}):(n.push({text:c,index:s[d][0].index}),t=t.replace(he.gmap,function(e){return'<span class="ejs-location">'+U(e)+"</span>"}))};for(var d in r)a();e([t,n])})})}function I(e,t){if(!t.plugins.marked)throw new ReferenceError("marked.js is not loaded.");var i=t.plugins.marked,n=new i.Renderer;return n.link=function(e,i,n){return e.indexOf("&lt;/a")===-1?e:e.match(/&gt;(.+)&lt;\/a/gi)?(i||(i=""),'<a href="'+RegExp.$1+'" rel='+t.linkOptions.rel+'" target="'+t.linkOptions.target+'" title="'+i+'">'+n+"</a>"):void 0},n.image=function(e,t,i){return e.match(/&gt;(.+)&lt;\/a/gi)?(t||(t=""),'<div class="ejs-image ejs-embed"><div class="ne-image-wrapper"><img src="'+RegExp.$1+'" title="'+t+'" alt="'+i+'"/></div></div>'):'<div class="ejs-image ejs-embed"><div class="ne-image-wrapper"><img src="'+e+'" title="'+t+'" alt="'+i+'"/></div></div>'},n.paragraph=function(e){return"<p> "+e+" </p>"},i.Lexer.rules.gfm.heading=i.Lexer.rules.normal.heading,i.Lexer.rules.tables.heading=i.Lexer.rules.normal.heading,t.markedOptions.renderer=n,t.markedOptions.highlight=!1,i(e,t.markedOptions)}function W(e){return e=e.replace(/&amp;/gm,""),e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">")}function Z(e){return e=e.replace(/^([ \t]*)/g,""),e=e.replace(/[ \t]*$/g,"")}function q(e,t){return'<pre><code class="ejs-code hljs '+t+'">'+(e.value||e)+"</code></pre>"}function G(e,t){return e=e.replace(he.inlineCode,function(e,t,i){return"<code>"+i+"</code>"}),e.replace(he.highlightCode,function(e,i,n,o){var r=o;r=Z(r),r=W(r),r=r.replace(/:\/\//g,"~P");var s=n.split("\n")[0],a=void 0,u=t.plugins.highlightjs;return s?a=u.highlightAuto(r,[s]):(a=u.highlightAuto(r),s=a.language),q(a,s)})}function N(e){return{title:e.snippet.title,thumbnail:e.snippet.thumbnails.medium.url,rawDescription:e.snippet.description,views:e.statistics.viewCount,likes:e.statistics.likeCount,description:t(e.snippet.description,150),url:"https://www.youtube.com/watch?v="+e.id,id:e.id,host:"youtube"}}function J(e,t){var i="https://www.googleapis.com/youtube/v3/videos?id="+e+"&key="+t.googleAuthKey+"&part=snippet,statistics";return new Promise(function(e){fetch(i).then(function(e){return e.json()}).then(function(t){return e(t.items[0])})})}function $(e,t,i,n){var o=n?t[1]:t[2],r="https://www.youtube.com/embed/"+o;return e.options.videoDetails?new Promise(function(t){J(o,e.options).then(function(i){return t(x(N(i),i,r,e.options))})}):new Promise(function(t){return t(w(r,e.options))})}function M(e,t,i,n){var o={input:e,output:t,options:i,embeds:n,regex:he.youtube,service:"youtube"};return new Promise(function(e){return B(o,$).then(function(t){return e(t)})})}function V(e,t){return{title:e.title,thumbnail:e.thumbnail_medium,rawDescription:e.description.replace(/\n/g,"<br/>").replace(/&#10;/g,"<br/>"),views:e.stats_number_of_plays,likes:e.stats_number_of_likes,description:t(e.description.replace(/((<|&lt;)br\s*\/*(>|&gt;)\r\n)/g," "),150),url:e.url,id:e.id,host:"vimeo"}}function Y(e){var t="https://vimeo.com/api/v2/video/"+e+".json";return new Promise(function(e){fetch(t).then(function(e){return e.json()}).then(function(t){return e(t[0])})})}function K(e,i,n,o){var r=void 0;if(r=o?i[3]:e.options.link?i[0].slice(0,-4).split("/").slice(-1).pop():i[0].split("/").slice(-1).pop()){var s="https://player.vimeo.com/video/"+r;return e.options.videoDetails?new Promise(function(i){Y(r).then(function(n){return i(x(V(n,t),n,s,e.options))})}):new Promise(function(t){return t(w(s,e.options))})}}function X(e,t,i,n){var o={input:e,output:t,options:i,embeds:n,regex:he.vimeo,service:"vimeo"};return new Promise(function(e){return B(o,K).then(function(t){return e(t)})})}function Q(e,t){var i="http://www.slideshare.net/api/oembed/2?url="+t+"&format=jsonp&maxwidth="+e.options.videoWidth+"&maxheight="+e.options.videoHeight;return new Promise(function(e){ge(i,{credentials:"include"}).then(function(e){return e.json()}).then(function(t){return e(t.html)})})}function ee(e,t,i){return new Promise(function(t){Q(e,i).then(function(i){return t(e.template(i))})})}function te(e,t,i,n){var o={input:e,output:t,options:i,embeds:n,regex:he.slideShare,service:"slideshare",template:function(e){return this.options.template.slideShare(e,this.options)}};return new Promise(function(e){return B(o,ee).then(function(t){return e(t)})})}function ie(e,t){e=encodeURIComponent(e);var i=new Function("url","return `"+t.options.openGraphEndpoint+"`")(e);return new Promise(function(e){fetch(i).then(function(e){return e.json()}).then(function(i){return e(t.options.onOpenGraphFetch(i)||i)})})}function ne(e,t,i){return i.match(e.excludeRegex)?Promise.resolve():new Promise(function(t){ie(i,e).then(function(i){return t(i&&i.success?e.template(i):"")})})}function oe(e,t,i,n){var o={input:e,output:t,options:i,embeds:n,service:"opengraph",regex:p(),excludeRegex:new RegExp([".mp4|.mp3|.gif|.pdf|.doc|.ppt|.docx|.jpg|.jpeg|.ogg"].concat(i.openGraphExclude).join("|"),"gi"),template:function(e){return this.options.template.openGraph(e,this.options)}};return new Promise(function(e){return B(o,ne).then(function(t){return e(t)})})}function re(e,t){return t.template.github(e,t)}function se(e){var t="https://api.github.com/repos/"+e.user+"/"+e.repo;return new Promise(function(e){fetch(t).then(function(e){return e.json()}).then(function(t){return e(t)})})}function ae(e,t,i,n){var o=n?{user:t[1],repo:t[2]}:{user:t[2],repo:t[3]};if(o.repo)return new Promise(function(t){se(o).then(function(i){return t(re(i,e.options))})})}function ue(e,t,i,n){var o={input:e,output:t,options:i,embeds:n,service:"github",regex:he.github};return new Promise(function(e){return B(o,ae).then(function(t){return e(t)})})}function le(e,t){var i=he.mentions;return e.replace(i,function(e,i,n){var o=n.split("@")[1];return i+t.mentionsUrl(o)})}function de(e,t){var i=he.hashtag;return e.replace(i,function(e,i,n){var o=n.split("#")[1];return i+t.hashtagUrl(o)})}var ce="undefined"!=typeof window?window:"undefined"!=typeof global?global:this,pe={};pe.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},pe.createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),pe.slicedToArray=function(){function e(e,t){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var me={url:function(e,t){var n=t.linkOptions;return'<a href="'+i(e)+'" rel="'+n.rel+'" target="'+n.target+'">'+e+"</a>"},smiley:function(e,t,i){return'<span class="icon-emoticon" title="'+e+'">'+t+i+"</span>"},emoji:function(e){return'<span class="emoticon emoticon-'+e+'" title=":'+e+':"></span>'},audio:function(e){return'<div class="ejs-audio ejs-plyr ejs-embed"><audio src="'+e+'" controls class="video-js ejs-video-js"></audio></div>'},soundcloud:function(e,t){var i=t.soundCloudOptions;return'<div class="ejs-embed">\n\t\t<iframe height="160" scrolling="no" src="https://w.soundcloud.com/player/?url='+e+"&auto_play="+i.autoPlay+"&hide_related="+i.hideRelated+"&show_comments= "+i.showComments+"&show_user="+i.showUser+"&show_reposts="+i.showReposts+"&visual="+i.visual+"&download="+i.download+"&color="+i.themeColor+"&theme_color="+i.themeColor+'"></iframe>\n\t\t</div>'},spotify:function(e){var t=f(e.split("/"));return'<div class="ejs-embed"><iframe src="https://embed.spotify.com/?uri=spotify:track:'+t+'" height="80"></iframe></div>'},codepen:function(e,t){return'<div class="ejs-embed ejs-codepen"><iframe scrolling="no" height="'+t.codeEmbedHeight+'" src="'+e.replace(/\/pen\//,"/embed/")+"/?height="+t.codeEmbedHeight+'"></iframe></div>'},ideone:function(e,t){return'<div class="ejs-ideone ejs-embed"><iframe src="http://ideone.com/embed/'+e.split("/")[1]+'" frameborder="0" height="'+t.codeEmbedHeight+'"></iframe></div>'},jsbin:function(e,t){return'<div class="ejs-jsbin ejs-embed"><iframe height="'+t.codeEmbedHeight+'" class="jsbin-embed foo" src="http://'+e+'/embed?html,js,output"></iframe></div>'},jsfiddle:function(e,t){return e="/"==f(e)?e.slice(0,-1):e,e=e.indexOf("//")!==-1?e:"//"+e,'<div class="ejs-embed ejs-jsfiddle"><iframe height="'+t.codeEmbedHeight+'" src="'+e+'/embedded"></iframe></div>'},plunker:function(e,t){return'<div class="ejs-embed ejs-plunker"><iframe class="ne-plunker" src="http://embed.plnkr.co/'+e+'" height="'+t.codeEmbedHeight+'"></iframe></div>'},image:function(e){return'<div class="ejs-image ejs-embed"><div class="ne-image-wrapper"><img src="'+e+'"/></div></div>'},flickr:function(e,t){return'<div class="ejs-embed"><div class="ne-image-wrapper"><iframe src="'+i(e.split("/?")[0])+'/player/" width="'+t.videoWidth+'" height="'+t.videoHeight+'"></iframe></div></div>'},instagram:function(e,t){return'<div class="ejs-embed ejs-instagram"><iframe src="'+i(e.split("/?")[0])+'/embed/" height="'+t.videoHeight+'"></iframe></div>'},slideShare:function(e){return'<div class="ejs-embed ejs-slideshare">'+e+"</div>"},video:function(e){return'<div class="ejs-video ejs-embed"><div class="ejs-video-player"><div class="ejs-player ejs-plyr"><video src="'+e+'" class="ejs-video-js video-js" controls></video></div></div></div>'},dailymotion:function(e,t){var i=f(e.split("/"));return'<div class="ejs-video ejs-embed"><iframe src="http://www.dailymotion.com/embed/video/'+i+'" height="'+t.videoHeight+'" width="'+t.videoWidth+'"></iframe></div>'},liveleak:function(e,t){return'<div class="ejs-video ejs-embed"><iframe src="http://www.liveleak.com/e/'+e.split("=")[1]+'" height="'+t.videoHeight+'" width="'+t.videoWidth+'"></iframe></div>'},ted:function(e,t){var i=e.split("/"),n=i[i.length-1];return'<div class="ejs-embed ejs-ted"><iframe src="http://embed.ted.com/talks/'+n+'.html" height="'+t.videoHeight+'" width="'+t.videoWidth+'"></iframe></div>'},ustream:function(e,t){var i=e.split("/");return e.indexOf("/embed/")<0&&i.splice(1,0,"embed"),'<div class="ejs-embed ejs-ustream"><iframe src="//www.'+i.join("/")+'" height="'+t.videoHeight+'" width="'+t.videoWidth+'"></iframe></div>'},detailsVimeo:function(e,t,i){return'<div class="ejs-video ejs-embed"><div class="ejs-video-preview"><div class="ejs-video-thumb" data-ejs-url="'+i+'"><div class="ejs-thumb" style="background-image:url('+e.thumbnail+')"></div><i class="fa fa-play-circle-o"></i></div><div class="ejs-video-detail"><div class="ejs-video-title"><a href="'+e.url+'">'+e.title+'</a></div><div class="ejs-video-desc">'+e.description+'</div><div class="ejs-video-stats"><span><i class="fa fa-eye"></i>'+e.views+'</span><span><i class="fa fa-heart"></i>'+e.likes+"</span></div></div></div></div>"},detailsYoutube:function(e,t,i){return'<div class="ejs-video ejs-embed"><div class="ejs-video-preview"><div class="ejs-video-thumb" data-ejs-url="'+i+'"><div class="ejs-thumb" style="background-image:url('+e.thumbnail+')"></div><i class="fa fa-play-circle-o"></i></div><div class="ejs-video-detail"><div class="ejs-video-title"><a href="'+e.url+'">'+e.title+'</a></div><div class="ejs-video-desc">'+e.description+'</div><div class="ejs-video-stats"><span><i class="fa fa-eye"></i>'+e.views+'</span><span><i class="fa fa-heart"></i>'+e.likes+"</span></div></div></div></div>"},vine:function(e,t){var i=f(e.split("/")),n=t.vineOptions;return'<div class="ejs-vine"><iframe class="ejs-vine-iframe" src="https://vine.co/v/'+i+"/embed/"+n.type+'" height="'+n.height+'" width="'+n.width+'"></iframe></div>'},vimeo:function(e,t){return t.plyr?"<div class='ejs-plyr'><div data-video-type='vimeo' data-video-id='"+f(e.split("/"))+"'></div></div>":'<div class="ejs-video-player ejs-embed"><iframe src="'+e+'" frameBorder="0" width="'+t.videoWidth+'" height="'+t.videoHeight+'"></iframe></div>'},youtube:function(e,t){return t.plyr?"<div class='ejs-plyr'><div data-video-type='youtube' data-video-id='"+f(e.split("/"))+"'></div></div>":'<div class="ejs-video-player ejs-embed"><iframe src="'+e+'" frameBorder="0" width="'+t.videoWidth+'" height="'+t.videoHeight+'"></iframe></div>'},openGraph:function(e,t){return'<div class="ejs-embed ejs-ogp"><div class="ejs-ogp-thumb" style="background-image:url('+e.image+')"></div><div class="ejs-ogp-details"><div class="ejs-ogp-title"><a href="'+e.url+'" target="'+t.linkOptions.target+'">'+e.title+'</a></div><div class="ejs-ogb-details">'+e.description+"</div></div></div>"},github:function(e,t){return'<div class="ejs-embed ejs-github"><div class="ejs-ogp-thumb" style="background-image:url('+e.owner.avatar_url+')"></div><div class="ejs-ogp-details"><div class="ejs-ogp-title"><a href="'+e.html_url+'" target="'+t.linkOptions.target+'">'+e.full_name+'</a></div><div class="ejs-ogb-details">'+e.description+'</div><div class="ejs-github-stats"><span><i class="fa fa-star"></i>'+e.stargazers_count+'</span><span><i class="fa fa-code-fork"></i>'+e.network_count+"</span></div></div></div>"},gmap:function(e,t,i,n){var o=n.mapOptions;return"place"===o.mode?'<div class="ejs-embed ejs-map"><iframe width="'+n.videoWidth+'" height="'+n.videoHeight+'" src="https://www.google.com/maps/embed/v1/place?key='+n.googleAuthKey+"&q="+i+'"></iframe></div>':"streetview"===o.mode?'<div class="ejs-embed ejs-map"><iframe width="'+n.videoWidth+'" height="'+n.videoHeight+'" src="https://www.google.com/maps/embed/v1/streetview?key='+n.googleAuthKey+"&location="+e+","+t+'&heading=210&pitch=10&fov=35"></iframe></div>':"view"===o.mode?'<div class="ejs-embed ejs-map"><iframe width="'+n.videoWidth+'" height="'+n.videoHeight+'" src="https://www.google.com/maps/embed/v1/view?key='+n.googleAuthKey+"&center="+e+","+t+'&zoom=18&maptype=satellite"></iframe></div>':void 0}},he={mentions:/(^|\s)(@[a-z0-9_-]+)/gi,hashtag:/(^|\s)(#[a-z\d-]+)/gi,basicAudio:/((?:https?):\/\/\S*\.(?:wav|mp3|ogg))/gi,soundCloud:/(soundcloud.com)\/[a-zA-Z0-9-_]+\/[a-zA-Z0-9-_]+/gi,spotify:/spotify.com\/track\/[a-zA-Z0-9_]+/gi,codepen:/http:\/\/codepen.io\/([A-Za-z0-9_]+)\/pen\/([A-Za-z0-9_]+)/gi,gist:/gist.github.com\/[a-zA-Z0-9_-]+\/([a-zA-Z0-9]+)/gi,highlightCode:/(`{3})(\s|[a-z]+)\s*([\s\S]*?[^`])\s*\1(?!`)/gm,inlineCode:/(`)\s*([\s\S]*?[^`])\s*\1(?!`)/gm,ideone:/ideone.com\/[a-zA-Z0-9]{6}/gi,jsbin:/jsbin.com\/[a-zA-Z0-9_]+\/[0-9_]+/gi,jsfiddle:/jsfiddle.net\/[a-zA-Z0-9_]+\/[a-zA-Z0-9_\/]+/gi,plunker:/plnkr.co\/edit\/[a-zA-Z0-9\?=]+/gi,basicImage:/((?:https?):\/\/\S*\.(?:gif|jpg|jpeg|tiff|png|svg|webp))/gi,flickr:/flickr.com\/[a-z]+\/[a-zA-Z@_$!\d\-\]+\/[\d]+/gi,instagram:/instagram.com\/p\/[a-zA-Z0-9_\/\?\-\=]+/gi,slideShare:/slideshare.net\/[a-zA-Z0-9_-]*\/[a-zA-Z0-9_-]*/gi,github:/[^\.]github.com\/([\w\.\-]+)\/([\w\.\-]+)/gi,basicVideo:/(?:https?):\/\/\S*\.(?:ogv|webm|mp4)/gi,dailymotion:/dailymotion.com\/video\/[a-zA-Z0-9-_]+/gi,liveleak:/liveleak.com\/view\?i=[a-zA-Z0-9_]+/gi,ted:/ted.com\/talks\/[a-zA-Z0-9_]+/gi,ustream:/ustream.tv\/[a-z\/0-9]*/gi,vimeo:/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)*/gi,vine:/vine.co\/v\/[a-zA-Z0-9]+/gi,youtube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/ytscreeningroom\?v=|\/feeds\/api\/videos\/|\/user\S*[^\w\-\s]|\S*[^\w\-\s]))([\w\-]{11})[?=&+%\w-]*/gi,gmap:/@\((.+)\)/gi,twitter:/https:\/\/twitter\.com\/\w+\/\w+\/\d+/gi,smileys:/(\:[\+\-\w]+\:|\<[\/\\]?3|[\(\)\\\D|\*\$][\-\^]?[\:\;\=]|[\:\;\=B8][\-\^]?[3DOPp\@\$\*\\\)\(\/\|])(?=\s|[\!\.\?]|$)/gi},fe=[{text:":)",code:"&#xe60a"},{text:":D",code:"&#xe608"},{text:":d",code:"&#xe608"},{text:":(",code:"&#xe60e"},{text:":/",code:"&#xe620"},{text:":P",code:"&#xe60c"},{text:":p",code:"&#xe60c"},{text:"3:)",code:"&#xe618"},{text:"(^)",code:"&#xe607"},{text:";)",code:"&#xe610"},{text:":o",code:"&#xe61a"},{text:":O",code:"&#xe61a"},{text:"-_-",code:"&#xe61e"},{text:"(y)",code:"&#xe606"},{text:":*",code:"&#xe604"},{text:"&lt;3",code:"&#xe604"},{text:"<3",code:"&#xe604"},{text:"&lt;/3",code:"&#xe605"},{text:"</3",code:"&#xe605"},{text:"^_^",code:"&#xe612"},{text:"8-)",code:"&#xe614"},{text:"8|",code:"&#xe614"},{text:":S",code:"&#xe61c"},{text:":s",code:"&#xe61c"}],ve=e(function(e,t,i){!function(i,n){if("function"==typeof define&&define.amd)define(["exports","module"],n);else if("undefined"!=typeof t&&"undefined"!=typeof e)n(t,e);else{var o={exports:{}};n(o.exports,o),i.fetchJsonp=o.exports}}(ce,function(e,t){function i(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function n(e){try{delete window[e]}catch(t){window[e]=void 0}}function o(e){var t=document.getElementById(e);document.getElementsByTagName("head")[0].removeChild(t)}function r(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=e,a=t.timeout||s.timeout,u=t.jsonpCallback||s.jsonpCallback,l=void 0;return new Promise(function(e,s){var d=t.jsonpCallbackFunction||i(),c=u+"_"+d;window[d]=function(t){e({ok:!0,json:function(){return Promise.resolve(t)}}),l&&clearTimeout(l),o(c),n(d)},r+=r.indexOf("?")===-1?"?":"&";var p=document.createElement("script");p.setAttribute("src",""+r+u+"="+d),p.id=c,document.getElementsByTagName("head")[0].appendChild(p),l=setTimeout(function(){s(new Error("JSONP request to "+r+" timed out")),n(d),o(c)},a)})}var s={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};t.exports=r})}),ge=ve&&"object"===("undefined"==typeof ve?"undefined":pe.typeof(ve))&&"default"in ve?ve.default:ve,ye=function(){function e(t,i,n,o){pe.classCallCheck(this,e),this.input=t,this.output=i,this.options=n,this.embeds=o,this.regex=he.twitter,this.service="twitter",this.load=this.load.bind(this),"string"!=typeof this.options.input&&this.options.input.addEventListener("rendered",this.load,!1)}return pe.createClass(e,[{key:"tweetData",value:function(e){var t=this.options.tweetOptions,i="https://api.twitter.com/1/statuses/oembed.json?omit_script=true&url="+e+"&maxwidth="+t.maxWidth+"&hide_media="+t.hideMedia+"&hide_thread="+t.hideThread+"&align="+t.align+"&lang="+t.lang;return new Promise(function(e){ge(i,{credentials:"include"}).then(function(e){return e.json()}).then(function(t){return e(t)})})}},{key:"load",value:function(){var e=this.options.plugins.twitter;e.widgets.load(this.options.element),e.events.bind("loaded",this.options.onTweetsLoad)}},{key:"process",value:function(){var t=this;return new Promise(function(i){return B(t,e.urlToText).then(function(e){return i(e)})})}}],[{key:"urlToText",value:function(e,t,i){return new Promise(function(t){return e.tweetData(i).then(function(e){return t(e.html)})})}}]),e}();!function(e){function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return f.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function r(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function s(e){return new Promise(function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}})}function a(e){var t=new FileReader;return t.readAsArrayBuffer(e),s(t)}function u(e){var t=new FileReader;return t.readAsText(e),s(t)}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(f.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(f.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(f.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!f.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob?(this.blob=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");
return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(a)},this.text=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=r(this);return e?e:Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}function c(e,t){t=t||{};var i=t.body;if(c.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,i||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var i=e.split("="),n=i.shift().replace(/\+/g," "),o=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function m(e){var t=new o,i=(e.getAllResponseHeaders()||"").trim().split("\n");return i.forEach(function(e){var i=e.trim().split(":"),n=i.shift().trim(),o=i.join(":").trim();t.append(n,o)}),t}function h(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof o?t.headers:new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var f={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};o.prototype.append=function(e,n){e=t(e),n=i(n);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(n)},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){var i=this.map[t(e)];return i?i[0]:null},o.prototype.getAll=function(e){return this.map[t(e)]||[]},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,n){this.map[t(e)]=[i(n)]},o.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(i){this.map[i].forEach(function(n){e.call(t,n,i,this)},this)},this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,i){e.push(i)}),n(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,i){e.push([i,t])}),n(e)},f.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this)},l.call(c.prototype),l.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},h.error=function(){var e=new h(null,{status:0,statusText:""});return e.type="error",e};var g=[301,302,303,307,308];h.redirect=function(e,t){if(g.indexOf(t)===-1)throw new RangeError("Invalid status code");return new h(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=c,e.Response=h,e.fetch=function(e,t){return new Promise(function(i,n){function o(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var r;r=c.prototype.isPrototypeOf(e)&&!t?e:new c(e,t);var s=new XMLHttpRequest;s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:m(s),url:o()},t="response"in s?s.response:s.responseText;i(new h(t,e))},s.onerror=function(){n(new TypeError("Network request failed"))},s.ontimeout=function(){n(new TypeError("Network request failed"))},s.open(r.method,r.url,!0),"include"===r.credentials&&(s.withCredentials=!0),"responseType"in s&&f.blob&&(s.responseType="blob"),r.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send("undefined"==typeof r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:void 0);var be=function(){function e(t,i,n,o){var r=this;pe.classCallCheck(this,e),this.input=t,this.output=i,this.options=n,this.embeds=o,this.regex=he.gist,this.service="gist","string"!=typeof this.options.input&&this.options.input.addEventListener("rendered",function(){r.load()})}return pe.createClass(e,[{key:"template",value:function(e){return'<div class="ejs-gist" data-src="'+e+'"></div>'}},{key:"load",value:function(){for(var e=this.options.input.getElementsByClassName("ejs-gist"),t=0;t<e.length;t++){var i=document.createElement("iframe");i.setAttribute("width","100%"),i.id="ejs-gist-"+t;var n=e[t];n.innerHTML="",n.appendChild(i);var o=e[t].getAttribute("data-src");o=o.indexOf("http")===-1?"https://"+o:o;var r='<html><base target="_parent"/><body onload="parent.document.getElementById(\'ejs-gist-'+t+'\').style.height=parseInt(document.body.scrollHeight)+20+\'px\'"><script type="text/javascript" src="'+o+'.js"></script></body></html>',s=i.document;i.contentDocument?s=i.contentDocument:i.contentWindow&&(s=i.contentWindow.document),s.open(),s.writeln(r),s.close()}}},{key:"process",value:function(){return _(this)}}]),e}(),we={},je={marked:!1,markedOptions:{},link:!0,linkOptions:{target:"self",exclude:["pdf"],rel:""},emoji:!0,customEmoji:[],fontIcons:!0,customFontIcons:[],highlightCode:!1,mentions:!1,hashtag:!1,videoJS:!1,videojsOptions:{fluid:!0,preload:"metadata"},plyr:!1,plyrOptions:{},locationEmbed:!0,mapOptions:{mode:"place"},tweetsEmbed:!1,tweetOptions:{maxWidth:550,hideMedia:!1,hideThread:!1,align:"none",lang:"en"},singleEmbed:!1,openGraphEndpoint:null,openGraphExclude:[],videoEmbed:!0,videoHeight:null,videoWidth:null,videoDetails:!0,audioEmbed:!0,imageEmbed:!0,excludeEmbed:[],inlineEmbed:[],inlineText:!0,codeEmbedHeight:500,vineOptions:{maxWidth:null,type:"postcard",responsive:!0,width:350,height:460},plugins:{marked:window.marked,videojs:window.videojs,plyr:window.plyr,highlightjs:window.hljs,prismjs:window.Prism,twitter:window.twttr},googleAuthKey:"",soundCloudOptions:{height:160,themeColor:"f50000",autoPlay:!1,hideRelated:!1,showComments:!0,showUser:!0,showReposts:!1,visual:!1,download:!1},videoClickClass:"ejs-video-thumb",customVideoClickHandler:!1,mentionsUrl:function(){},hashtagUrl:function(){},beforeEmbedJSApply:function(){},afterEmbedJSApply:function(){},onVideoShow:function(){},onTweetsLoad:function(){},videojsCallback:function(){},onOpenGraphFetch:function(){},onOpenGraphFail:function(){},videoClickHandler:function(){},served:[]},xe=[],ke=[],Ee=[],Te=function(){function e(t,i){pe.classCallCheck(this,e);var o=c(je),r=c(we),s=n(o,r);if(this.options=n(s,t),this.options.template=n(me,i),"string"!=typeof this.options.input&&"object"!==pe.typeof(this.options.input))throw ReferenceError("You need to pass an element or the string that needs to be processed");this.input="object"===pe.typeof(this.options.input)?this.options.input.innerHTML:this.options.input}return pe.createClass(e,[{key:"process",value:function(){var e=this,t=this.input;if(""===t)return Promise.resolve("");var i=h(this.options),n=[],o=t;return this.options.beforeEmbedJSApply(),new Promise(function(r){i.link&&(o=b(t,i));var a=i.openGraphEndpoint?oe(t,o,i,n):Promise.resolve([o,n]);a.then(function(e){var n=pe.slicedToArray(e,2),o=n[0],r=n[1];i.highlightCode&&(o=G(o,i)),i.marked&&(o=I(o,i)),i.emoji&&(o=g(o,i)),i.fontIcons&&(o=y(o,i)),i.mentions&&(o=le(o,i)),i.hashtag&&(o=de(o,i));var s=C(t,o,r,i,he.ideone,"ideone"),a=pe.slicedToArray(s,2);o=a[0],r=a[1];var l=C(t,o,r,i,he.plunker,"plunker"),d=pe.slicedToArray(l,2);o=d[0],r=d[1];var c=C(t,o,r,i,he.jsbin,"jsbin"),p=pe.slicedToArray(c,2);o=p[0],r=p[1];var m=C(t,o,r,i,he.codepen,"codepen"),h=pe.slicedToArray(m,2);o=h[0],r=h[1];var f=C(t,o,r,i,he.jsfiddle,"jsfiddle"),v=pe.slicedToArray(f,2);o=v[0],r=v[1];var b=C(t,o,r,i,he.ted,"ted"),w=pe.slicedToArray(b,2);o=w[0],r=w[1];var j=C(t,o,r,i,he.dailymotion,"dailymotion"),x=pe.slicedToArray(j,2);o=x[0],r=x[1];var k=C(t,o,r,i,he.ustream,"ustream"),E=pe.slicedToArray(k,2);o=E[0],r=E[1];var T=C(t,o,r,i,he.liveleak,"liveleak"),A=pe.slicedToArray(T,2);o=A[0],r=A[1];var P=C(t,o,r,i,he.basicVideo,"video",i.videoEmbed),_=pe.slicedToArray(P,2);o=_[0],r=_[1];var O=C(t,o,r,i,he.vine,"vine"),z=pe.slicedToArray(O,2);o=z[0],r=z[1];var S=C(t,o,r,i,he.soundCloud,"soundcloud"),H=pe.slicedToArray(S,2);o=H[0],r=H[1];var R=C(t,o,r,i,he.spotify,"spotify"),B=pe.slicedToArray(R,2);o=B[0],r=B[1];var D=C(t,o,r,i,he.basicAudio,"audio",i.audioEmbed),L=pe.slicedToArray(D,2);o=L[0],r=L[1];var U=C(t,o,r,i,he.flickr,"flickr"),F=pe.slicedToArray(U,2);o=F[0],r=F[1];var W=C(t,o,r,i,he.instagram,"instagram"),Z=pe.slicedToArray(W,2);o=Z[0],r=Z[1];var q=C(t,o,r,i,he.basicImage,"image",i.imageEmbed),N=pe.slicedToArray(q,2);if(o=N[0],r=N[1],u(i,"gist")){var J=new be(t,o,i,r).process(),$=pe.slicedToArray(J,2);o=$[0],r=$[1]}return u(i,"youtube")?M(t,o,i,r):Promise.resolve([o,r])}).then(function(e){var n=pe.slicedToArray(e,2),o=n[0],r=n[1];return u(i,"vimeo")?X(t,o,i,r):Promise.resolve([o,r])}).then(function(e){var n=pe.slicedToArray(e,2),o=n[0],r=n[1];return u(i,"github")?ue(t,o,i,r):Promise.resolve([o,r])}).then(function(e){var n=pe.slicedToArray(e,2),o=n[0],r=n[1];return i.locationEmbed&&u(i,"gmap")?F(t,o,i,r):Promise.resolve([o,r])}).then(function(e){var n=pe.slicedToArray(e,2),o=n[0],r=n[1];return u(i,"slideshare")?te(t,o,i,r):Promise.resolve([o,r])}).then(function(n){var o=pe.slicedToArray(n,2),r=o[0],s=o[1];return i.tweetsEmbed&&u(i,"twitter")?(e.twitter=new ye(t,r,i,s),e.twitter.process()):Promise.resolve([r,s])}).then(function(t){var n=pe.slicedToArray(t,2),o=n[0],a=n[1];e.data={input:i.input,output:o,options:i,inputString:e.input,services:i.served,template:i.template},r(s(o,a))})})}},{key:"render",value:function(){var e=this;if("string"==typeof this.options.input)throw new Error("You cannot call render method for a string");if(!this.options.input)throw new Error("You didn't pass an element while creating this instance. render() method can't work without an input element");return new Promise(function(t){e.process().then(function(i){e.options.input.innerHTML=i,e.applyListeners(),t(e.data)})})}},{key:"applyListeners",value:function(){E(this.options),k(this.options),j(this.options);var e=new Event("rendered");this.options.input.dispatchEvent(e),this.options.afterEmbedJSApply()}},{key:"update",value:function(e,t){if(e&&(this.options=n(this.options,e)),t&&(this.options.template=t),!this.options.input||"string"!=typeof this.options.input&&"object"!==pe.typeof(this.options.input))throw ReferenceError("You need to pass an element or the string that needs to be processed");this.input="object"===pe.typeof(this.options.input)?this.options.input.innerHTML:this.options.input}},{key:"text",value:function(e){var t=this;this.process().then(function(i){return e(i,t.input)})}},{key:"destroy",value:function(){if("object"!==pe.typeof(this.options.input))throw new Error("destroy() method only works if an element had been passed in the options object");T("ejs-video-thumb"),this.options.tweetsEmbed&&this.options.input.removeEventListener("rendered",this.twitter.load(),!1),this.options.input.innerHTML=this.input}}],[{key:"setOptions",value:function(e){we=n(je,e)}},{key:"applyEmbedJS",value:function(t){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:me,o=document.querySelectorAll(t),r=0;r<o.length;r++)i.input=o[r],xe[r]=new e(i,n),Ee[r]=xe[r].render();return new Promise(function(e){Promise.all(Ee).then(function(t){e(t)})})}},{key:"destroyEmbedJS",value:function(){for(var e=0;e<xe.length;e++)xe[e].destroy()}},{key:"destroyAll",value:function(){for(var e=0;e<ke.length;e++)ke[e].destroy()}},{key:"Template",value:function(){return me}}]),e}();return Te});