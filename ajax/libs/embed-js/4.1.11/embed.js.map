{"version":3,"file":null,"sources":["../src/js/modules/utils.js","../src/js/modules/template.js","../src/js/modules/regex.js","../src/js/modules/emoticons/emoji.js","../src/js/modules/emoticons/smiley.js","../src/js/modules/url.js","../node_modules/fetch-jsonp/build/fetch-jsonp.js","../src/js/helpers/template.js","../src/js/helpers/playVideo.js","../src/js/helpers/getDetailsTemplate.js","../src/js/helpers/applyPlyr.js","../src/js/helpers/applyVideoJS.js","../src/js/helpers/destroyVideos.js","../src/js/helpers/embed.js","../src/js/modules/base.js","../src/js/helpers/baseEmbed.js","../src/js/helpers/asyncEmbed.js","../src/js/modules/twitter/twitter.js","../node_modules/whatwg-fetch/fetch.js","../src/js/modules/map/map.js","../src/js/modules/markdown.js","../src/js/modules/code/highlight.js","../src/js/modules/code/gist.js","../src/js/modules/video/youtube.js","../src/js/modules/video/vimeo.js","../src/js/modules/image/slideshare.js","../src/js/modules/openGraph.js","../src/js/modules/github.js","../src/js/modules/mentions.js","../src/js/modules/hashtag.js","../src/js/main.js"],"sourcesContent":["/**\n * Trucates the string and adds ellipsis at the end.\n * @param string        The string to be truncated\n * @param n             Length to which it should be truncated\n * @returns {string}    The truncated string\n */\nexport function truncate(string, n) {\n    return string.substr(0, n - 1) + (string.length > n ? '...' : '');\n}\n\n/**\n * Returns an array after removing the duplicates.\n * @param array         The array containing the duplicates\n * @returns {Array}     Array with unique values.\n */\nexport function getUnique(array) {\n    var u = {},\n        a = [];\n\n    array.forEach((value) => {\n        if (!u.hasOwnProperty(value)) {\n            a.push(value);\n            u[value] = 1;\n        }\n    });\n    return a;\n}\n\n/**\n * Converts a string into legitimate url.\n * @param string\n */\nexport function toUrl(string) {\n    return (string.indexOf('//') === -1) ? ('//' + string) : string\n}\n\n/**\n * Extends an Object\n * @param destination\n * @param source\n * @returns {*}\n */\nexport function deepExtend(destination, source) {\n    for (var property in source) {\n        if (source.hasOwnProperty(property) && source[property] && source[property].constructor === Object) {\n            destination[property] = destination[property] || {};\n            deepExtend(destination[property], source[property]);\n        } else {\n            destination[property] = source[property];\n        }\n    }\n    return destination;\n}\n\nexport function escapeRegExp(str) {\n    return str.replace(/[\\-\\[\\]\\/\\{}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\n\n/**\n * Sort an array of objects based on the index value\n * @param  {Array} arr Array to be sorted\n * @return {Array}     Sorted array\n */\nfunction sortObject(arr) {\n    return arr.sort((a, b) => (a.index - b.index));\n}\n\n/**\n * Creates the string of the iframes after sorting them and finally returning a string\n * @param  {string} str    String to which the created text has to be added\n * @param  {object} embeds Sorted array of iframe html\n * @return {string}        String to be rendered\n */\nexport function createText(str, embeds) {\n    let sortedEmbeds = sortObject(embeds);\n    for (let i = 0; i < sortedEmbeds.length; i++) {\n        str += ` ${sortedEmbeds[i].text}`;\n    }\n    return str;\n}\n\n/**\n * Matches the string and finds the substrings matching to the provided regex pattern\n * @param  {object} regex Regex pattern\n * @param  {string} input The string to be analyzed\n * @return {object}       Returns the matched substring with their corresponding positions\n */\nexport function matches(regex, input) {\n    return regex.exec(input);\n}\n\n/**\n * Checks whether a particular service should be embedded or not based on\n * the setting provided by the user\n * @param  {object} options The options provided by the user\n * @param  {string} service Name of the service for which the condition is to be analyzed\n * @return {boolean}        True if it should be embedded\n */\nexport function ifEmbed(options, service) {\n    if (options.singleEmbed && options.served.length) return;\n    return ((options.excludeEmbed.indexOf(service) == -1) && !(options.excludeEmbed === 'all'));\n}\n\nexport function ifInline(options, service) {\n    return ((options.inlineEmbed.indexOf(service) >= 0) || (options.inlineEmbed === 'all'));\n}\n\n/**\n * Calculates the dimensions for the elements based on a aspect ratio\n * @param  {object} options Plugin options\n * @return {object}         The width and height of the elements\n */\nfunction setDimensions(options) {\n\toptions.videoWidth = options.videoWidth || ((options.videoHeight) / 3) * 4 || 800;\n\toptions.videoHeight = options.videoHeight || ((options.videoWidth) / 4) * 3 || 600;\n\treturn options;\n}\n\n/**\n * Returns a cloned object\n * @param  {object} obj\n * @return {object}     cloned object\n */\nexport function cloneObject(obj) {\n    if (obj === null || typeof obj !== 'object') return obj;\n    var temp = obj.constructor(); // give temp the original obj's constructor\n    for (var key in obj) {\n        temp[key] = cloneObject(obj[key])\n    }\n    return temp\n}\n\nexport function urlRegex() {\n    return /((href|src)=[\"']|)(\\b(https?|ftp|file):\\/\\/[^,.\\s]+[^\\s]*[^,.\\s]+)|(?:https?:\\/\\/)?(?:(?:0rz\\.tw)|(?:1link\\.in)|(?:1url\\.com)|(?:2\\.gp)|(?:2big\\.at)|(?:2tu\\.us)|(?:3\\.ly)|(?:307\\.to)|(?:4ms\\.me)|(?:4sq\\.com)|(?:4url\\.cc)|(?:6url\\.com)|(?:7\\.ly)|(?:a\\.gg)|(?:a\\.nf)|(?:aa\\.cx)|(?:abcurl\\.net)|(?:ad\\.vu)|(?:adf\\.ly)|(?:adjix\\.com)|(?:afx\\.cc)|(?:all\\.fuseurl.com)|(?:alturl\\.com)|(?:amzn\\.to)|(?:ar\\.gy)|(?:arst\\.ch)|(?:atu\\.ca)|(?:azc\\.cc)|(?:b23\\.ru)|(?:b2l\\.me)|(?:bacn\\.me)|(?:bcool\\.bz)|(?:binged\\.it)|(?:bit\\.ly)|(?:buff\\.ly)|(?:bizj\\.us)|(?:bloat\\.me)|(?:bravo\\.ly)|(?:bsa\\.ly)|(?:budurl\\.com)|(?:canurl\\.com)|(?:chilp\\.it)|(?:chzb\\.gr)|(?:cl\\.lk)|(?:cl\\.ly)|(?:clck\\.ru)|(?:cli\\.gs)|(?:cliccami\\.info)|(?:clickthru\\.ca)|(?:clop\\.in)|(?:conta\\.cc)|(?:cort\\.as)|(?:cot\\.ag)|(?:crks\\.me)|(?:ctvr\\.us)|(?:cutt\\.us)|(?:dai\\.ly)|(?:decenturl\\.com)|(?:dfl8\\.me)|(?:digbig\\.com)|(?:digg\\.com)|(?:disq\\.us)|(?:dld\\.bz)|(?:dlvr\\.it)|(?:do\\.my)|(?:doiop\\.com)|(?:dopen\\.us)|(?:easyuri\\.com)|(?:easyurl\\.net)|(?:eepurl\\.com)|(?:eweri\\.com)|(?:fa\\.by)|(?:fav\\.me)|(?:fb\\.me)|(?:fbshare\\.me)|(?:ff\\.im)|(?:fff\\.to)|(?:fire\\.to)|(?:firsturl\\.de)|(?:firsturl\\.net)|(?:flic\\.kr)|(?:flq\\.us)|(?:fly2\\.ws)|(?:fon\\.gs)|(?:freak\\.to)|(?:fuseurl\\.com)|(?:fuzzy\\.to)|(?:fwd4\\.me)|(?:fwib\\.net)|(?:g\\.ro.lt)|(?:gizmo\\.do)|(?:gl\\.am)|(?:go\\.9nl.com)|(?:go\\.ign.com)|(?:go\\.usa.gov)|(?:goo\\.gl)|(?:goshrink\\.com)|(?:gurl\\.es)|(?:hex\\.io)|(?:hiderefer\\.com)|(?:hmm\\.ph)|(?:href\\.in)|(?:hsblinks\\.com)|(?:htxt\\.it)|(?:huff\\.to)|(?:hulu\\.com)|(?:hurl\\.me)|(?:hurl\\.ws)|(?:icanhaz\\.com)|(?:idek\\.net)|(?:ilix\\.in)|(?:is\\.gd)|(?:its\\.my)|(?:ix\\.lt)|(?:j\\.mp)|(?:jijr\\.com)|(?:kl\\.am)|(?:klck\\.me)|(?:korta\\.nu)|(?:krunchd\\.com)|(?:l9k\\.net)|(?:lat\\.ms)|(?:liip\\.to)|(?:liltext\\.com)|(?:linkbee\\.com)|(?:linkbun\\.ch)|(?:liurl\\.cn)|(?:ln-s\\.net)|(?:ln-s\\.ru)|(?:lnk\\.gd)|(?:lnk\\.ms)|(?:lnkd\\.in)|(?:lnkurl\\.com)|(?:lru\\.jp)|(?:lt\\.tl)|(?:lurl\\.no)|(?:macte\\.ch)|(?:mash\\.to)|(?:merky\\.de)|(?:migre\\.me)|(?:miniurl\\.com)|(?:minurl\\.fr)|(?:mke\\.me)|(?:moby\\.to)|(?:moourl\\.com)|(?:mrte\\.ch)|(?:myloc\\.me)|(?:myurl\\.in)|(?:n\\.pr)|(?:nbc\\.co)|(?:nblo\\.gs)|(?:nn\\.nf)|(?:not\\.my)|(?:notlong\\.com)|(?:nsfw\\.in)|(?:nutshellurl\\.com)|(?:nxy\\.in)|(?:nyti\\.ms)|(?:o-x\\.fr)|(?:oc1\\.us)|(?:om\\.ly)|(?:omf\\.gd)|(?:omoikane\\.net)|(?:on\\.cnn.com)|(?:on\\.mktw.net)|(?:onforb\\.es)|(?:orz\\.se)|(?:ow\\.ly)|(?:ping\\.fm)|(?:pli\\.gs)|(?:pnt\\.me)|(?:politi\\.co)|(?:post\\.ly)|(?:pp\\.gg)|(?:profile\\.to)|(?:ptiturl\\.com)|(?:pub\\.vitrue.com)|(?:qlnk\\.net)|(?:qte\\.me)|(?:qu\\.tc)|(?:qy\\.fi)|(?:r\\.im)|(?:rb6\\.me)|(?:read\\.bi)|(?:readthis\\.ca)|(?:reallytinyurl\\.com)|(?:redir\\.ec)|(?:redirects\\.ca)|(?:redirx\\.com)|(?:retwt\\.me)|(?:ri\\.ms)|(?:rickroll\\.it)|(?:riz\\.gd)|(?:rt\\.nu)|(?:ru\\.ly)|(?:rubyurl\\.com)|(?:rurl\\.org)|(?:rww\\.tw)|(?:s4c\\.in)|(?:s7y\\.us)|(?:safe\\.mn)|(?:sameurl\\.com)|(?:sdut\\.us)|(?:shar\\.es)|(?:shink\\.de)|(?:shorl\\.com)|(?:short\\.ie)|(?:short\\.to)|(?:shortlinks\\.co.uk)|(?:shorturl\\.com)|(?:shout\\.to)|(?:show\\.my)|(?:shrinkify\\.com)|(?:shrinkr\\.com)|(?:shrt\\.fr)|(?:shrt\\.st)|(?:shrten\\.com)|(?:shrunkin\\.com)|(?:simurl\\.com)|(?:slate\\.me)|(?:smallr\\.com)|(?:smsh\\.me)|(?:smurl\\.name)|(?:sn\\.im)|(?:snipr\\.com)|(?:snipurl\\.com)|(?:snurl\\.com)|(?:sp2\\.ro)|(?:spedr\\.com)|(?:srnk\\.net)|(?:srs\\.li)|(?:starturl\\.com)|(?:su\\.pr)|(?:surl\\.co.uk)|(?:surl\\.hu)|(?:t\\.cn)|(?:t\\.co)|(?:t\\.lh.com)|(?:ta\\.gd)|(?:tbd\\.ly)|(?:tcrn\\.ch)|(?:tgr\\.me)|(?:tgr\\.ph)|(?:tighturl\\.com)|(?:tiniuri\\.com)|(?:tiny\\.cc)|(?:tiny\\.ly)|(?:tiny\\.pl)|(?:tinylink\\.in)|(?:tinyuri\\.ca)|(?:tinyurl\\.com)|(?:tl\\.gd)|(?:tmi\\.me)|(?:tnij\\.org)|(?:tnw\\.to)|(?:tny\\.com)|(?:to\\.ly)|(?:togoto\\.us)|(?:totc\\.us)|(?:toysr\\.us)|(?:tpm\\.ly)|(?:tr\\.im)|(?:tra\\.kz)|(?:trunc\\.it)|(?:twhub\\.com)|(?:twirl\\.at)|(?:twitclicks\\.com)|(?:twitterurl\\.net)|(?:twitterurl\\.org)|(?:twiturl\\.de)|(?:twurl\\.cc)|(?:twurl\\.nl)|(?:u\\.mavrev.com)|(?:u\\.nu)|(?:u76\\.org)|(?:ub0\\.cc)|(?:ulu\\.lu)|(?:updating\\.me)|(?:ur1\\.ca)|(?:url\\.az)|(?:url\\.co.uk)|(?:url\\.ie)|(?:url360\\.me)|(?:url4\\.eu)|(?:urlborg\\.com)|(?:urlbrief\\.com)|(?:urlcover\\.com)|(?:urlcut\\.com)|(?:urlenco\\.de)|(?:urli\\.nl)|(?:urls\\.im)|(?:urlshorteningservicefortwitter\\.com)|(?:urlx\\.ie)|(?:urlzen\\.com)|(?:usat\\.ly)|(?:use\\.my)|(?:vb\\.ly)|(?:vgn\\.am)|(?:vl\\.am)|(?:vm\\.lc)|(?:w55\\.de)|(?:wapo\\.st)|(?:wapurl\\.co.uk)|(?:wipi\\.es)|(?:wp\\.me)|(?:x\\.vu)|(?:xr\\.com)|(?:xrl\\.in)|(?:xrl\\.us)|(?:xurl\\.es)|(?:xurl\\.jp)|(?:y\\.ahoo.it)|(?:yatuc\\.com)|(?:ye\\.pe)|(?:yep\\.it)|(?:yfrog\\.com)|(?:yhoo\\.it)|(?:yiyd\\.com)|(?:youtu\\.be)|(?:yuarel\\.com)|(?:z0p\\.de)|(?:zi\\.ma)|(?:zi\\.mu)|(?:zipmyurl\\.com)|(?:zud\\.me)|(?:zurl\\.ws)|(?:zz\\.gd)|(?:zzang\\.kr)|(?:›\\.ws)|(?:✩\\.ws)|(?:✿\\.ws)|(?:❥\\.ws)|(?:➔\\.ws)|(?:➞\\.ws)|(?:➡\\.ws)|(?:➨\\.ws)|(?:➯\\.ws)|(?:➹\\.ws)|(?:➽\\.ws))\\/[a-z0-9]*/gi;\n}\n\nfunction arrayLowercase(options, property){\n\tif(typeof options[property] !== 'string'){\n\t\toptions[property] = options[property].map(function(elem){\n\t\t\treturn elem.toLowerCase();\n\t\t})\n\t}\n\treturn options;\n}\n\n/**\n * Sets the dimensions and converts options values' Array into lowercase.\n * @param options\n * @returns {Object|*}\n */\nexport function processOptions(options){\n\toptions = setDimensions(options);\n\toptions = arrayLowercase(options, 'excludeEmbed');\n\toptions = arrayLowercase(options, 'inlineEmbed');\n\treturn arrayLowercase(options, 'openGraphExclude');\n}\n\n/**\n * Get the last element of an array or string\n * @param elem [String|Array]\n * @returns last element of the Array or String\n */\nexport function lastElement(elem){\n\treturn elem[elem.length - 1];\n}\n","import { toUrl, lastElement } from './utils'\n\nexport default {\n\turl(match, options){\n\t\tlet config = options.linkOptions;\n\t\treturn `<a href=\"${toUrl(match)}\" rel=\"${config.rel}\" target=\"${config.target}\">${match}</a>`;\n\t},\n\n\tsmiley(text, pre, code) {\n\t\treturn `<span class=\"icon-emoticon\" title=\"${text}\">${pre}${code}</span>`;\n\t},\n\n\temoji(text){\n\t\treturn `<span class=\"emoticon emoticon-${text}\" title=\":${text}:\"></span>`;\n\t},\n\n\taudio(match){\n\t\treturn `<div class=\"ejs-audio ejs-plyr ejs-embed\"><audio src=\"${match}\" controls class=\"video-js ejs-video-js\"></audio></div>`\n\t},\n\n\tsoundcloud(match, options){\n\t\tlet config = options.soundCloudOptions;\n\t\treturn `<div class=\"ejs-embed\">\n\t\t<iframe height=\"160\" scrolling=\"no\" src=\"https://w.soundcloud.com/player/?url=${match}&auto_play=${config.autoPlay}&hide_related=${config.hideRelated}&show_comments= ${config.showComments}&show_user=${config.showUser}&show_reposts=${config.showReposts}&visual=${config.visual}&download=${config.download}&color=${config.themeColor}&theme_color=${config.themeColor}\"></iframe>\n\t\t</div>`\n\t},\n\n\tspotify(match){\n\t\tlet id = lastElement(match.split('/'));\n\t\treturn `<div class=\"ejs-embed\"><iframe src=\"https://embed.spotify.com/?uri=spotify:track:${id}\" height=\"80\"></iframe></div>`\n\t},\n\n\tcodepen(id, options){\n\t\treturn `<div class=\"ejs-embed ejs-codepen\"><iframe scrolling=\"no\" height=\"${options.codeEmbedHeight}\" src=\"${id.replace(/\\/pen\\//, '/embed/')}/?height=${options.codeEmbedHeight}\"></iframe></div>`\n\t},\n\n\tideone(match, options){\n\t\treturn `<div class=\"ejs-ideone ejs-embed\"><iframe src=\"http://ideone.com/embed/${match.split('/')[1]}\" frameborder=\"0\" height=\"${options.codeEmbedHeight}\"></iframe></div>`\n\t},\n\n\tjsbin(id, options){\n\t\treturn `<div class=\"ejs-jsbin ejs-embed\"><iframe height=\"${options.codeEmbedHeight}\" class=\"jsbin-embed foo\" src=\"http://${id}/embed?html,js,output\"></iframe></div>`\n\t},\n\n\tjsfiddle(id, options){\n\t\tid = lastElement(id) == '/' ? id.slice(0, - 1) : id;\n\t\tid =  (id.indexOf('//') !== -1) ? id : `//${id}`;\n\t\treturn `<div class=\"ejs-embed ejs-jsfiddle\"><iframe height=\"${options.codeEmbedHeight}\" src=\"${id}/embedded\"></iframe></div>`\n\t},\n\n\tplunker(id, options){\n\t\treturn `<div class=\"ejs-embed ejs-plunker\"><iframe class=\"ne-plunker\" src=\"http://embed.plnkr.co/${id}\" height=\"${options.codeEmbedHeight}\"></iframe></div>`\n\t},\n\n\timage(match){\n\t\treturn `<div class=\"ejs-image ejs-embed\"><div class=\"ne-image-wrapper\"><img src=\"${match}\"/></div></div>`\n\t},\n\n\tflickr(match, options){\n\t\treturn `<div class=\"ejs-embed\"><div class=\"ne-image-wrapper\"><iframe src=\"${toUrl(match.split('/?')[0])}/player/\" width=\"${options.videoWidth}\" height=\"${options.videoHeight}\"></iframe></div></div>`\n\t},\n\n\tinstagram(match, options){\n\t\treturn `<div class=\"ejs-embed ejs-instagram\"><iframe src=\"${toUrl(match.split('/?')[0])}/embed/\" height=\"${options.videoHeight}\"></iframe></div>`;\n\t},\n\n\tslideShare(html){\n\t\treturn `<div class=\"ejs-embed ejs-slideshare\">${html}</div>`;\n\t},\n\n\tvideo(match){\n\t\treturn `<div class=\"ejs-video ejs-embed\"><div class=\"ejs-video-player\"><div class=\"ejs-player ejs-plyr\"><video src=\"${match}\" class=\"ejs-video-js video-js\" controls></video></div></div></div>`\n\t},\n\n\tdailymotion(match, options){\n\t\tconst id = lastElement(match.split('/'));\n\t\treturn `<div class=\"ejs-video ejs-embed\"><iframe src=\"http://www.dailymotion.com/embed/video/${id}\" height=\"${options.videoHeight}\" width=\"${options.videoWidth}\"></iframe></div>`\n\t},\n\n\tliveleak(match, options){\n\t\treturn `<div class=\"ejs-video ejs-embed\"><iframe src=\"http://www.liveleak.com/e/${match.split('=')[1]}\" height=\"${options.videoHeight}\" width=\"${options.videoWidth}\"></iframe></div>`\n\t},\n\n\tted(match, options){\n\t\tlet a = match.split('/');\n\t\tconst id = a[a.length - 1];\n\t\treturn `<div class=\"ejs-embed ejs-ted\"><iframe src=\"http://embed.ted.com/talks/${id}.html\" height=\"${options.videoHeight}\" width=\"${options.videoWidth}\"></iframe></div>`\n\t},\n\n\tustream(match, options){\n\t\tlet id = match.split('/');\n\t\t// only add embed if it is not already in the link\n\t\tif( match.indexOf('/embed/') < 0 ) {\n\t\t\tid.splice(1, 0, 'embed');\n\t\t}\n\t\treturn `<div class=\"ejs-embed ejs-ustream\"><iframe src=\"//www.${id.join('/')}\" height=\"${options.videoHeight}\" width=\"${options.videoWidth}\"></iframe></div>`\n\t},\n\n\tdetailsVimeo(data, fullData, embedUrl){\n\t\treturn `<div class=\"ejs-video ejs-embed\"><div class=\"ejs-video-preview\"><div class=\"ejs-video-thumb\" data-ejs-url=\"${embedUrl}\"><div class=\"ejs-thumb\" style=\"background-image:url(${data.thumbnail})\"></div><i class=\"fa fa-play-circle-o\"></i></div><div class=\"ejs-video-detail\"><div class=\"ejs-video-title\"><a href=\"${data.url}\">${data.title}</a></div><div class=\"ejs-video-desc\">${data.description}</div><div class=\"ejs-video-stats\"><span><i class=\"fa fa-eye\"></i>${data.views}</span><span><i class=\"fa fa-heart\"></i>${data.likes}</span></div></div></div></div>`\n\t},\n\n\tdetailsYoutube(data, fullData, embedUrl){\n\t\treturn `<div class=\"ejs-video ejs-embed\"><div class=\"ejs-video-preview\"><div class=\"ejs-video-thumb\" data-ejs-url=\"${embedUrl}\"><div class=\"ejs-thumb\" style=\"background-image:url(${data.thumbnail})\"></div><i class=\"fa fa-play-circle-o\"></i></div><div class=\"ejs-video-detail\"><div class=\"ejs-video-title\"><a href=\"${data.url}\">${data.title}</a></div><div class=\"ejs-video-desc\">${data.description}</div><div class=\"ejs-video-stats\"><span><i class=\"fa fa-eye\"></i>${data.views}</span><span><i class=\"fa fa-heart\"></i>${data.likes}</span></div></div></div></div>`\n\t},\n\n\tvine(match, options){\n\t\tconst id = lastElement(match.split('/'));\n\t\tconst config = options.vineOptions;\n\t\treturn `<div class=\"ejs-vine\"><iframe class=\"ejs-vine-iframe\" src=\"https://vine.co/v/${id}/embed/${config.type}\" height=\"${config.height}\" width=\"${config.width}\"></iframe></div>`\n\t},\n\n\tvimeo(url, options){\n\t\treturn options.plyr ?\n\t\t\t`<div class='ejs-plyr'><div data-video-type='vimeo' data-video-id='${lastElement(url.split(\"/\"))}'></div></div>` :\n\t\t\t`<div class=\"ejs-video-player ejs-embed\"><iframe src=\"${url}\" frameBorder=\"0\" width=\"${options.videoWidth}\" height=\"${options.videoHeight}\"></iframe></div>`\n\t},\n\n\tyoutube(url, options){\n\t\treturn options.plyr ?\n\t\t\t`<div class='ejs-plyr'><div data-video-type='youtube' data-video-id='${lastElement(url.split(\"/\"))}'></div></div>` :\n\t\t\t`<div class=\"ejs-video-player ejs-embed\"><iframe src=\"${url}\" frameBorder=\"0\" width=\"${options.videoWidth}\" height=\"${options.videoHeight}\"></iframe></div>`\n\t},\n\n\topenGraph(data, options){\n\t\treturn `<div class=\"ejs-embed ejs-ogp\"><div class=\"ejs-ogp-thumb\" style=\"background-image:url(${data.image})\"></div><div class=\"ejs-ogp-details\"><div class=\"ejs-ogp-title\"><a href=\"${data.url}\" target=\"${options.linkOptions.target}\">${data.title}</a></div><div class=\"ejs-ogb-details\">${data.description}</div></div></div>`\n\t},\n\n\tgithub(data, options){\n\t\treturn `<div class=\"ejs-embed ejs-github\"><div class=\"ejs-ogp-thumb\" style=\"background-image:url(${data.owner.avatar_url})\"></div><div class=\"ejs-ogp-details\"><div class=\"ejs-ogp-title\"><a href=\"${data.html_url}\" target=\"${options.linkOptions.target}\">${data.full_name}</a></div><div class=\"ejs-ogb-details\">${data.description}</div><div class=\"ejs-github-stats\"><span><i class=\"fa fa-star\"></i>${data.stargazers_count}</span><span><i class=\"fa fa-code-fork\"></i>${data.network_count}</span></div></div></div>`\n\t},\n\n\tgmap(latitude, longitude, location, options){\n\t\tconst config = options.mapOptions;\n\t\tif (config.mode === 'place') {\n\t\t\treturn `<div class=\"ejs-embed ejs-map\"><iframe width=\"${options.videoWidth}\" height=\"${options.videoHeight}\" src=\"https://www.google.com/maps/embed/v1/place?key=${options.googleAuthKey}&q=${location}\"></iframe></div>`;\n\t\t} else if (config.mode === 'streetview') {\n\t\t\treturn `<div class=\"ejs-embed ejs-map\"><iframe width=\"${options.videoWidth}\" height=\"${options.videoHeight}\" src=\"https://www.google.com/maps/embed/v1/streetview?key=${options.googleAuthKey}&location=${latitude},${longitude}&heading=210&pitch=10&fov=35\"></iframe></div>`;\n\t\t} else if (config.mode === 'view') {\n\t\t\treturn `<div class=\"ejs-embed ejs-map\"><iframe width=\"${options.videoWidth}\" height=\"${options.videoHeight}\" src=\"https://www.google.com/maps/embed/v1/view?key=${options.googleAuthKey}&center=${latitude},${longitude}&zoom=18&maptype=satellite\"></iframe></div>`\n\t\t}\n\t}\n}\n","const regex = {\n\tmentions     : /(^|\\s)(@[a-z0-9_-]+)/gi,\n\thashtag      : /(^|\\s)(#[a-z\\d-]+)/gi,\n\tbasicAudio   : /((?:https?):\\/\\/\\S*\\.(?:wav|mp3|ogg))/gi,\n\tsoundCloud   : /(soundcloud.com)\\/[a-zA-Z0-9-_]+\\/[a-zA-Z0-9-_]+/gi,\n\tspotify      : /spotify.com\\/track\\/[a-zA-Z0-9_]+/gi,\n\tcodepen      : /http:\\/\\/codepen.io\\/([A-Za-z0-9_]+)\\/pen\\/([A-Za-z0-9_]+)/gi,\n\tgist         : /gist.github.com\\/[a-zA-Z0-9_-]+\\/([a-zA-Z0-9]+)/gi,\n\thighlightCode: /(`{3})(\\s|[a-z]+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/gm,\n\tinlineCode   : /(`)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/gm,\n\tideone       : /ideone.com\\/[a-zA-Z0-9]{6}/gi,\n\tjsbin        : /jsbin.com\\/[a-zA-Z0-9_]+\\/[0-9_]+/gi,\n\tjsfiddle     : /jsfiddle.net\\/[a-zA-Z0-9_]+\\/[a-zA-Z0-9_\\/]+/gi,\n\tplunker      : /plnkr.co\\/edit\\/[a-zA-Z0-9\\?=]+/gi,\n\tbasicImage   : /((?:https?):\\/\\/\\S*\\.(?:gif|jpg|jpeg|tiff|png|svg|webp))/gi,\n\tflickr       : /flickr.com\\/[a-z]+\\/[a-zA-Z@_$!\\d\\-\\]+\\/[\\d]+/gi,\n\tinstagram    : /instagram.com\\/p\\/[a-zA-Z0-9_\\/\\?\\-\\=]+/gi,\n\tslideShare   : /slideshare.net\\/[a-zA-Z0-9_-]*\\/[a-zA-Z0-9_-]*/gi,\n\tgithub       : /[^\\.]github.com\\/([\\w\\.\\-]+)\\/([\\w\\.\\-]+)/gi,\n\tbasicVideo   : /(?:https?):\\/\\/\\S*\\.(?:ogv|webm|mp4)/gi,\n\tdailymotion  : /dailymotion.com\\/video\\/[a-zA-Z0-9-_]+/gi,\n\tliveleak     : /liveleak.com\\/view\\?i=[a-zA-Z0-9_]+/gi,\n\tted          : /ted.com\\/talks\\/[a-zA-Z0-9_]+/gi,\n\tustream      : /ustream.tv\\/[a-z\\/0-9]*/gi,\n\tvimeo        : /https?:\\/\\/(?:www\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|)(\\d+)(?:$|\\/|\\?)*/gi,\n\tvine         : /vine.co\\/v\\/[a-zA-Z0-9]+/gi,\n\tyoutube      : /https?:\\/\\/(?:[0-9A-Z-]+\\.)?(?:youtu\\.be\\/|youtube\\.com(?:\\/embed\\/|\\/v\\/|\\/watch\\?v=|\\/ytscreeningroom\\?v=|\\/feeds\\/api\\/videos\\/|\\/user\\S*[^\\w\\-\\s]|\\S*[^\\w\\-\\s]))([\\w\\-]{11})[?=&+%\\w-]*/gi,\n\tgmap         : /@\\((.+)\\)/gi,\n\ttwitter      : /https:\\/\\/twitter\\.com\\/\\w+\\/\\w+\\/\\d+/gi,\n\tsmileys      : /(\\:[\\+\\-\\w]+\\:|\\<[\\/\\\\]?3|[\\(\\)\\\\\\D|\\*\\$][\\-\\^]?[\\:\\;\\=]|[\\:\\;\\=B8][\\-\\^]?[3DOPp\\@\\$\\*\\\\\\)\\(\\/\\|])(?=\\s|[\\!\\.\\?]|$)/gi\n};\n\nexport default regex;\n","import regex from '../regex';\nimport {lastElement} from '../utils';\n\nfunction getEmoji(match) {\n\treturn match[0] === ':' && (lastElement(match) === ':') && match.substring(1, match.length - 1)\n}\n\nexport default function (output, options) {\n\treturn output.replace(regex.smileys, function (match) {\n\t\tconst emoji = getEmoji(match);\n\t\tif (emoji) {\n\t\t\treturn options.template.emoji(emoji, options)\n\t\t}\n\t\treturn match;\n\t});\n}\n","import {escapeRegExp} from '../utils'\n\nconst defaultIcons = [{\n\t'text': ':)',\n\t'code': '&#xe60a'\n}, {\n\t'text': ':D',\n\t'code': '&#xe608'\n}, {\n\t'text': ':d',\n\t'code': '&#xe608'\n}, {\n\t'text': ':(',\n\t'code': '&#xe60e'\n}, {\n\t'text': ':/',\n\t'code': '&#xe620'\n\n}, {\n\t'text': ':P',\n\t'code': '&#xe60c'\n}, {\n\t'text': ':p',\n\t'code': '&#xe60c'\n}, {\n\t'text': '3:)',\n\t'code': '&#xe618'\n}, {\n\t'text': '(^)',\n\t'code': '&#xe607'\n}, {\n\t'text': ';)',\n\t'code': '&#xe610'\n}, {\n\t'text': ':o',\n\t'code': '&#xe61a'\n}, {\n\t'text': ':O',\n\t'code': '&#xe61a'\n}, {\n\t'text': '-_-',\n\t'code': '&#xe61e'\n}, {\n\t'text': '(y)',\n\t'code': '&#xe606'\n}, {\n\t'text': ':*',\n\t'code': '&#xe604'\n}, {\n\t'text': '&lt;3',\n\t'code': '&#xe604'\n}, {\n\t'text': '<3',\n\t'code': '&#xe604'\n}, {\n\t'text': '&lt;/3',\n\t'code': '&#xe605'\n}, {\n\t'text': '</3',\n\t'code': '&#xe605'\n}, {\n\t'text': '^_^',\n\t'code': '&#xe612'\n}, {\n\t'text': '8-)',\n\t'code': '&#xe614'\n}, {\n\t'text': '8|',\n\t'code': '&#xe614'\n}, {\n\t'text': ':S',\n\t'code': '&#xe61c'\n}, {\n\t'text': ':s',\n\t'code': '&#xe61c'\n}];\n\nexport default function (input, options) {\n\tconst icons = options.customFontIcons.length ? options.customFontIcons : defaultIcons;\n\n\tconst escapedSymbols = icons.map((val) => escapeRegExp(val.text));\n\n\tconst smileyRegex = new RegExp(`(^|\\\\s)(${escapedSymbols.join('|')})(?=\\\\s|$)`, 'gi');\n\n\treturn input.replace(smileyRegex, (match, pre, text) => {\n\t\tlet index = escapedSymbols.indexOf(escapeRegExp(text));\n\t\tif (index === -1) return match;\n\t\tlet code  = icons[index].code;\n\t\treturn options.template.smiley(text, pre, code, options);\n\t});\n}\n\n","import {urlRegex, lastElement} from './utils'\n\nexport default function (input, options) {\n\tconst config = options.linkOptions;\n\treturn input.replace(urlRegex(), function(match) {\n\t\tif(lastElement(match) === ')') return match; //hack for markdown image\n\t\tlet extension = lastElement(match.split('.'));\n\t\tif ((lastElement(match) === '/'))\n\t\t\tmatch = match.slice(0, -1);\n\t\tif (config.exclude.indexOf(extension) === -1)\n\t\t\treturn options.template.url(match, options);\n\t\treturn match;\n\t});\n}\n","(function (global, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['exports', 'module'], factory);\n  } else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n    factory(exports, module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, mod);\n    global.fetchJsonp = mod.exports;\n  }\n})(this, function (exports, module) {\n  'use strict';\n\n  var defaultOptions = {\n    timeout: 5000,\n    jsonpCallback: 'callback',\n    jsonpCallbackFunction: null\n  };\n\n  function generateCallbackFunction() {\n    return 'jsonp_' + Date.now() + '_' + Math.ceil(Math.random() * 100000);\n  }\n\n  // Known issue: Will throw 'Uncaught ReferenceError: callback_*** is not defined'\n  // error if request timeout\n  function clearFunction(functionName) {\n    // IE8 throws an exception when you try to delete a property on window\n    // http://stackoverflow.com/a/1824228/751089\n    try {\n      delete window[functionName];\n    } catch (e) {\n      window[functionName] = undefined;\n    }\n  }\n\n  function removeScript(scriptId) {\n    var script = document.getElementById(scriptId);\n    document.getElementsByTagName('head')[0].removeChild(script);\n  }\n\n  function fetchJsonp(_url) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    // to avoid param reassign\n    var url = _url;\n    var timeout = options.timeout || defaultOptions.timeout;\n    var jsonpCallback = options.jsonpCallback || defaultOptions.jsonpCallback;\n\n    var timeoutId = undefined;\n\n    return new Promise(function (resolve, reject) {\n      var callbackFunction = options.jsonpCallbackFunction || generateCallbackFunction();\n      var scriptId = jsonpCallback + '_' + callbackFunction;\n\n      window[callbackFunction] = function (response) {\n        resolve({\n          ok: true,\n          // keep consistent with fetch API\n          json: function json() {\n            return Promise.resolve(response);\n          }\n        });\n\n        if (timeoutId) clearTimeout(timeoutId);\n\n        removeScript(scriptId);\n\n        clearFunction(callbackFunction);\n      };\n\n      // Check if the user set their own params, and if not add a ? to start a list of params\n      url += url.indexOf('?') === -1 ? '?' : '&';\n\n      var jsonpScript = document.createElement('script');\n      jsonpScript.setAttribute('src', '' + url + jsonpCallback + '=' + callbackFunction);\n      jsonpScript.id = scriptId;\n      document.getElementsByTagName('head')[0].appendChild(jsonpScript);\n\n      timeoutId = setTimeout(function () {\n        reject(new Error('JSONP request to ' + url + ' timed out'));\n\n        clearFunction(callbackFunction);\n        removeScript(scriptId);\n      }, timeout);\n    });\n  }\n\n  // export as global function\n  /*\n  let local;\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n  local.fetchJsonp = fetchJsonp;\n  */\n\n  module.exports = fetchJsonp;\n});","/**\n * Common template for vimeo and youtube iframes\n * @param  {string} url     URL of the embedding video\n * @param  {object} options Options object\n * @return {string}         compiled template with variables replaced\n */\nexport default function template(url, options) {\n\treturn options.template.vimeo(url, options) || options.template.youtube(url, options)\n}\n","import template from './template'\n\n/**\n * Plays the video after clicking on the thumbnail\n * @param  {object} options   Options object\n * @return {null}\n */\nexport default function playVideo(options) {\n\t/** Execute the customVideoClickHandler if the user wants to handle it on his own. */\n\tif (options.customVideoClickHandler) return options.videoClickHandler(options, template);\n\n\tlet classes = document.getElementsByClassName(options.videoClickClass);\n\tfor (let i = 0; i < classes.length; i++) {\n\t\tclasses[i].onclick = function () {\n\t\t\toptions.onVideoShow();\n\t\t\tlet url                              = this.getAttribute('data-ejs-url') + \"?autoplay=true\";\n\t\t\tthis.parentNode.parentNode.innerHTML = template(url, options);\n\t\t};\n\t}\n}\n","export default function (data, fullData, embedUrl, options) {\n\tif (data.host === 'vimeo') {\n\t\treturn options.template.detailsVimeo(data, fullData, embedUrl, options)\n\t} else if (data.host === 'youtube') {\n\t\treturn options.template.detailsYoutube(data, fullData, embedUrl, options)\n\t}\n}\n","/**\n * Applies video.js to all audio and video dynamically\n * @param  {object} options Options object\n * @return {null}\n */\nexport default function (options) {\n\tif (options.plyr) {\n\t\tif (!options.plugins.plyr) throw new ReferenceError(\"You have enabled plyr but you haven't loaded the library.Find it at https://plyr.io/\");\n\t\tlet plyr = options.plugins.plyr;\n\t\tplyr.setup('.ejs-plyr', options.plyrOptions);\n\t}\n}\n","/**\n * Applies video.js to all audio and video dynamically\n * @param  {object} options Options object\n * @return {null}\n */\nexport default function applyVideoJS(options) {\n\toptions.videojsOptions.width  = options.videoWidth;\n\toptions.videojsOptions.height = options.videoHeight;\n\tif (options.videoJS) {\n\t\tif (!options.plugins.videojs) throw new ReferenceError(\"You have enabled videojs but you haven't loaded the library.Find it at http://videojs.com/\");\n\t\tlet VideoJS = options.plugins.videojs;\n\t\tlet elements = options.input.getElementsByClassName('ejs-video-js');\n\t\tfor (let i = 0; i < elements.length; i++) {\n\t\t\tVideoJS(elements[i], options.videojsOptions, () => options.videojsCallback());\n\t\t}\n\t}\n}\n","/**\n * Destroys the onclick event for opening the video template from the details template\n * @param  {className} className\n * @return {null}\n */\nexport default function (className) {\n\tconst classes = document.getElementsByClassName(className);\n\tfor (let i = 0; i < classes.length; i++) {\n\t\tclasses[i].onclick = null\n\t}\n}\n","import { ifInline, matches } from '../modules/utils'\n\nfunction inlineEmbed(_){\n\tlet regexInline = _.options.link ? new RegExp(`([^>]*${_.regex.source})<\\/a>`, 'gm') : new RegExp(`([^\\\\s]*${_.regex.source})`, 'gm');\n\t_.output     = _.output.replace(regexInline, function(match) {\n\t\tlet url = _.options.link ? match.slice(0, -4) : match;\n\t\tif (_.options.served.indexOf(url) === -1) {\n\t\t\t_.options.served.push(url);\n\t\t\tif (_.options.link) {\n\t\t\t\treturn !_.options.inlineText ? _.template(match.slice(0, -4)) + '</a>' : match + _.template(match.slice(0, -4))\n\t\t\t} else {\n\t\t\t\treturn !_.options.inlineText ? _.template(match) : match + _.template(match)\n\t\t\t}\n\t\t} else {\n\t\t\treturn match; //TODO : check whether this should be `match`\n\t\t}\n\t});\n\treturn [_.output, _.embeds];\n}\n\nfunction normalEmbed(_){\n\tlet match;\n\twhile ((match = matches(_.regex, _.input)) !== null) {\n\t\tlet url = match[0];\n\t\tif (!(_.options.served.indexOf(url) === -1) || (_.options.served.length && _.options.singleEmbed)) continue;\n\t\t_.options.served.push(url);\n\t\tlet text = _.template(url);\n\t\t_.embeds.push({\n\t\t\ttext : text,\n\t\t\tindex: match.index\n\t\t})\n\t}\n\treturn [_.output, _.embeds];\n}\n\nexport default function embed(_){\n\treturn (ifInline(_.options, _.service)) ? inlineEmbed(_) : normalEmbed(_)\n}\n","import { embed } from '../helpers'\n\nexport default function (input, output, embeds, options, regex, service) {\n\tconst args = {\n\t\tinput,\n\t\toutput,\n\t\toptions,\n\t\tembeds,\n\t\tregex,\n\t\tservice,\n\t\ttemplate(match){\n\t\t\treturn this.options.template[this.service](match, this.options);\n\t\t}\n\t};\n\n\treturn embed(args);\n}\n","import { ifEmbed } from '../modules/utils'\nimport base from '../modules/base'\n\nexport default function baseEmbed(input, output, embeds, options, regex, service, flag){\n\treturn ifEmbed(options, service) || (ifEmbed(options, service) && flag) ? base(input, output, embeds, options, regex, service) : [output, embeds]\n}\n","import { matches, ifInline } from '../modules/utils'\n\n/**\n * This is a private function which is used to get the actual text to be replaced for\n * a particular url in inline embedding. This returns a promise\n * @param  {object} _     reference to this\n * @param  {function} urlToText The function that converts url to replaceable text\n * @param  {object} match     object containing info of matching string\n * @return {Promise}           resolves to the text\n */\nfunction getInlineData(_, urlToText, match) {\n\tlet url = (_.options.link ? match[0].slice(0, -4) : match[0]) || match[1];\n\tif (_.options.served.indexOf(url) >= 0) return Promise.resolve(null);\n\n\treturn new Promise((resolve) => {\n\t\turlToText(_, match, url).then((text) => {\n\t\t\tif (!text) return resolve();\n\t\t\t_.options.served.push(url);\n\t\t\tresolve(text);\n\t\t})\n\t})\n}\n\n/**\n * A helper function for inline embedding\n * @param _\n * @param urlToText\n * @returns Promise\n */\nfunction inlineAsyncEmbed(_, urlToText) {\n\tlet regexInline     = _.options.link ? new RegExp(`([^>]*${_.regex.source})<\\/a>`, 'gi') : new RegExp(`([^\\\\s]*${_.regex.source})`, 'gi');\n\tlet match, promises = [];\n\n\twhile ((match = matches(regexInline, _.output)) !== null)\n\t\tpromises.push(getInlineData(_, urlToText, match));\n\n\treturn new Promise((resolve) => {\n\t\tif (promises.length)\n\t\t\tPromise.all(promises).then((data) => {\n\t\t\t\tlet i        = 0;\n\t\t\t\t_.output = _.output.replace(regexInline, (matched) => {\n\t\t\t\t\tif (_.options.link)\n\t\t\t\t\t\treturn !_.options.inlineText ? data[i++] + '</a>' : matched + data[i++];\n\t\t\t\t\telse\n\t\t\t\t\t\treturn !_.options.inlineText ? data[i++] : matched + data[i++];\n\t\t\t\t});\n\t\t\t\tresolve(_.output)\n\t\t\t});\n\t\telse\n\t\t\tresolve(_.output)\n\t})\n}\n\n\nfunction getNormalData(_, urlToText, match) {\n\tlet url = match[0];\n\tif (_.options.served.indexOf(url) >= 0) return;\n\n\treturn new Promise((resolve) => {\n\t\turlToText(_, match, url, true).then(function (text) {\n\t\t\tif (!text) resolve();\n\t\t\t_.options.served.push(url);\n\t\t\t_.embeds.push({\n\t\t\t\ttext : text,\n\t\t\t\tindex: match.index\n\t\t\t});\n\t\t\tresolve()\n\t\t})\n\t})\n}\n\n/**\n * A helper function for normal embedding\n * @param  {object} _\n * @param  {function} urlToText\n * @return {Promise}\n */\nfunction normalAsyncEmbed(_, urlToText) {\n\tlet match, promises = [];\n\twhile ((match = matches(_.regex, _.input)) !== null)\n\t\tpromises.push(getNormalData(_, urlToText, match));\n\treturn new Promise(function (resolve) {\n\t\tPromise.all(promises).then(function () {\n\t\t\tresolve(_.embeds)\n\t\t});\n\t})\n}\n\nexport default function asyncEmbed(_, urlToText) {\n\treturn new Promise(function (resolve) {\n\t\tif (ifInline(_.options, _.service))\n\t\t\tinlineAsyncEmbed(_, urlToText).then((output) => resolve([output, _.embeds]));\n\t\telse\n\t\t\tnormalAsyncEmbed(_, urlToText).then((embeds) => resolve([_.output, embeds]))\n\t})\n}\n","import fetchJsonp from 'fetch-jsonp'\nimport { asyncEmbed } from '../../helpers'\nimport regex from '../regex'\n\nexport default class Twitter {\n\tconstructor(input, output, options, embeds) {\n\t\tthis.input   = input;\n\t\tthis.output  = output;\n\t\tthis.options = options;\n\t\tthis.embeds  = embeds;\n\t\tthis.regex   = regex.twitter;\n\t\tthis.service = 'twitter';\n\n\t\tthis.load = this.load.bind(this);\n\t\tif(typeof this.options.input !== 'string'){\n\t\t\tthis.options.input.addEventListener('rendered', this.load, false);\n\t\t}\n\t}\n\n\t/**\n\t * Fetches the data from twitter's oEmbed API\n\t * @param  {string} url URL of the tweet\n\t * @return {object}     data containing the tweet info\n\t */\n\ttweetData(url) {\n\t\tlet config = this.options.tweetOptions;\n\t\tlet apiUrl = `https://api.twitter.com/1/statuses/oembed.json?omit_script=true&url=${url}&maxwidth=${config.maxWidth}&hide_media=${config.hideMedia}&hide_thread=${config.hideThread}&align=${config.align}&lang=${config.lang}`;\n\t\treturn new Promise((resolve) => {\n\t\t\tfetchJsonp(apiUrl, {credentials: 'include'})\n\t\t\t\t.then((data)=>data.json())\n\t\t\t\t.then((json)=>resolve(json))\n\t\t})\n\t}\n\n\t/**\n\t * Load twitter widgets\n\t * @return null\n\t */\n\tload() {\n\t\tconst twitter = this.options.plugins.twitter;\n\t\ttwitter.widgets.load(this.options.element); //here this refers to the element\n\n\t\t//Execute the function after the widget is loaded\n\t\ttwitter.events.bind('loaded', this.options.onTweetsLoad);\n\t}\n\n\tstatic urlToText(_this, match, url) {\n\t\treturn new Promise((resolve) => _this.tweetData(url).then((data) => resolve(data.html)))\n\t}\n\n\tprocess() {\n\t\treturn new Promise((resolve) => asyncEmbed(this, Twitter.urlToText).then((data) => resolve(data)))\n\t}\n}\n","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var list = this.map[name]\n    if (!list) {\n      list = []\n      this.map[name] = list\n    }\n    list.push(value)\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    var values = this.map[normalizeName(name)]\n    return values ? values[0] : null\n  }\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || []\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)]\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this)\n      }, this)\n    }, this)\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    reader.readAsArrayBuffer(blob)\n    return fileReaderReady(reader)\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    reader.readAsText(blob)\n    return fileReaderReady(reader)\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (!body) {\n        this._bodyText = ''\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        // Only support ArrayBuffers for POST method.\n        // Receiving ArrayBuffers happens via Blobs, instead.\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n\n      this.text = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text')\n        } else {\n          return Promise.resolve(this._bodyText)\n        }\n      }\n    } else {\n      this.text = function() {\n        var rejected = consumed(this)\n        return rejected ? rejected : Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = input\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this)\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function headers(xhr) {\n    var head = new Headers()\n    var pairs = (xhr.getAllResponseHeaders() || '').trim().split('\\n')\n    pairs.forEach(function(header) {\n      var split = header.trim().split(':')\n      var key = split.shift().trim()\n      var value = split.join(':').trim()\n      head.append(key, value)\n    })\n    return head\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = options.statusText\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input\n      } else {\n        request = new Request(input, init)\n      }\n\n      var xhr = new XMLHttpRequest()\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL\n        }\n\n        // Avoid security warnings on getResponseHeader when not allowed by CORS\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL')\n        }\n\n        return\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","import {ifInline, matches} from '../utils'\nimport regex from '../regex'\nimport 'whatwg-fetch'\n\n/**\n * Takes the location name and returns the coordinates of that location using the Google\n * Map API v3. This is an async function so it will return a promise.\n * @param  {string} location The name of any location\n * @return {array}           Returns an array in the form [latitude, longitude]\n */\nfunction getCoordinate(location) {\n\tlet url = `http://maps.googleapis.com/maps/api/geocode/json?address=${location}&sensor=false`;\n\treturn new Promise((resolve) => {\n\t\tfetch(url)\n\t\t\t.then((data) => data.json())\n\t\t\t.then((json) => resolve([json.results[0].geometry.location.lat, json.results[0].geometry.location.lng]))\n\t})\n}\n\n/**\n * Returns the template of the Map widget. The source of the iframe is based on whether the\n * mode set in options is 'place', 'streetview' or 'view'.\n * @param  {string} match     The matching string in the form of @(location name).\n * @param  {number} latitude  Latitude of the location\n * @param  {number} longitude Longitude of the location\n * @param  {object} options   plugin options\n * @return {string}           Template of the map widget.\n */\nfunction template(match, latitude, longitude, options) {\n\tconst location = locationText(match);\n\treturn options.template.gmap(latitude, longitude, location, options);\n}\n\n/**\n * Extracts out the location name from the format @(locationName)\n * @param  {string} match The string in the supported format. Eg : @(Delhi)\n * @return {string}       Only the location name removing @ and brackets. Eg: Delhi\n */\nfunction locationText(match) {\n\treturn match.split('(')[1].split(')')[0]\n}\n\nexport default function (input, output, options, embeds) {\n\tlet match, promises = [], allMatches = [];\n\n\tconst service = 'map';\n\n\twhile ((match = matches(regex.gmap, output)) !== null) {\n\t\toptions.served.push(match);\n\t\tconst promise = options.mapOptions.mode !== 'place' ? getCoordinate(match[0]) : Promise.resolve([null, null]);\n\t\tpromises.push(promise);\n\t\tallMatches.push(match)\n\t}\n\n\treturn new Promise((resolve) => {\n\t\tPromise.all(promises).then((coordinatesArr) => {\n\t\t\tfor (var i in promises) {\n\t\t\t\tlet [latitude, longitude] = coordinatesArr[i];\n\t\t\t\tlet text = template((allMatches[i])[0], latitude, longitude, options);\n\t\t\t\tif (ifInline(options, service)) {\n\t\t\t\t\toutput = output.replace(regex.gmap, (regexMatch) => {\n\t\t\t\t\t\treturn `<span class=\"ejs-location\">${locationText(regexMatch)}</span>${text}`\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tembeds.push({\n\t\t\t\t\t\ttext : text,\n\t\t\t\t\t\tindex: allMatches[i][0].index\n\t\t\t\t\t});\n\t\t\t\t\toutput = output.replace(regex.gmap, (regexMatch) => {\n\t\t\t\t\t\treturn `<span class=\"ejs-location\">${locationText(regexMatch)}</span>`\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tresolve([output, embeds])\n\t\t})\n\t})\n}\n","export default function (output, options) {\n\tif (!options.plugins.marked) throw new ReferenceError(`marked.js is not loaded.`);\n\n\tconst Marked = options.plugins.marked;\n\tconst renderer = new Marked.Renderer();\n\n\trenderer.link = (href, title, text) => {\n\t\tif (href.indexOf('&lt;/a') === -1) return href;\n\t\tif (href.match(/&gt;(.+)&lt;\\/a/gi)) {\n\t\t\tif (!title) title = '';\n\t\t\treturn `<a href=\"${RegExp.$1}\" rel=${options.linkOptions.rel}\" target=\"${options.linkOptions.target}\" title=\"${title}\">${text}</a>`\n\t\t}\n\t};\n\n\trenderer.image = (href, title, text) => {\n\t\tif (href.match(/&gt;(.+)&lt;\\/a/gi)) {\n\t\t\tif (!title) title = '';\n\t\t\treturn `<div class=\"ejs-image ejs-embed\"><div class=\"ne-image-wrapper\"><img src=\"${RegExp.$1}\" title=\"${title}\" alt=\"${text}\"/></div></div>`\n\t\t}\n\t\treturn `<div class=\"ejs-image ejs-embed\"><div class=\"ne-image-wrapper\"><img src=\"${href}\" title=\"${title}\" alt=\"${text}\"/></div></div>`\n\t};\n\n\trenderer.paragraph = (text) => `<p> ${text} </p>`; //for font smiley in end.\n\n\t//Fix for heading that should be actually present in marked.js\n\t//if gfm is true the `## Heading` is acceptable but `##Heading` is not\n\tMarked.Lexer.rules.gfm.heading    = Marked.Lexer.rules.normal.heading;\n\tMarked.Lexer.rules.tables.heading = Marked.Lexer.rules.normal.heading;\n\n\toptions.markedOptions.renderer = renderer;\n\toptions.markedOptions.highlight = false;\n\treturn Marked(output, options.markedOptions)\n}\n","import regex from '../regex'\n\n/**\n * Encodes the characters like <, > and space and replaces them with\n * &lt;, &gt; and &gt; respectively.\n * @param  {string} code The string that has to be encoded.\n * @return {string}      The encoded string\n */\nfunction encode(code) {\n\tcode = code.replace(/&amp;/gm, '');\n\tcode = code.replace(/&lt;/g, '<');\n\tcode = code.replace(/&gt;/g, '>');\n\treturn code;\n}\n\n/**\n * removes whitespace characters\n * @param  {string} code The string from which the whitespace has to be removed\n * @return {string}\n */\nfunction trimSpace(code) {\n\tcode = code.replace(/^([ \\t]*)/g, ''); // leading whitespace\n\tcode = code.replace(/[ \\t]*$/g, ''); // trailing whitespace\n\treturn code;\n}\n\n\n/**\n * Places the code and the language name in the required template\n * @param {string} processedCode\n * @param {string} language\n * @return {string}\n */\nfunction addTemplate(processedCode, language) {\n\treturn `<pre><code class=\"ejs-code hljs ${language}\">${processedCode.value || processedCode}</code></pre>`\n}\n\n\n/**\n * Replaces the code block with the pre tags and returns a string having the code\n * formatting using Highlight.js.\n * => Matches the string with the regex and finds the code written in three back-ticks ```\n * => Detects whether any language has been provided by the user.\n *     The format supported by embed.js is\n *         ```[language-name]\n *         var a = 2;\n *         ```\n * => Trims all the unnecessary spaces and newlines from the code.\n * => Passes the code to `hljs.highlightAuto(code, language)` which returns a formatted string\n *     having the html tags for styling. The `language` here is optional. In case we don't pass the\n *     language, it tries to detect the language itself.\n * => Replaces the code string in the template with the formatted string\n * @return {string} The string in which the code is formatted\n */\nexport default function (output, options) {\n\toutput = output.replace(regex.inlineCode, function (match, group1, group2) {\n\t\treturn `<code>${group2}</code>`\n\t});\n\n\treturn output.replace(regex.highlightCode, (match, group1, group2, group3) => {\n\t\tlet code = group3;\n\t\tcode     = trimSpace(code);\n\t\tcode     = encode(code);\n\n\t\t// to prevent auto-linking. Not necessary in code\n\t\t// *blocks*, but in code spans. Will be converted\n\t\t// back after the auto-linker runs.\n\t\tcode = code.replace(/:\\/\\//g, '~P');\n\n\t\tlet language = group2.split('\\n')[0];\n\t\tlet highlightedCode;\n\n\t\tconst HighlightJS = options.plugins.highlightjs;\n\t\tif (language) {\n\t\t\thighlightedCode = HighlightJS.highlightAuto(code, [language]);\n\t\t} else {\n\t\t\thighlightedCode = HighlightJS.highlightAuto(code);\n\t\t\tlanguage        = highlightedCode.language;\n\t\t}\n\n\t\treturn addTemplate(highlightedCode, language);\n\t});\n}\n","import regex from '../regex'\nimport { embed } from '../../helpers'\n\nexport default class Gist {\n\tconstructor(input, output, options, embeds) {\n\t\tthis.input   = input;\n\t\tthis.output  = output;\n\t\tthis.options = options;\n\t\tthis.embeds  = embeds;\n\t\tthis.regex   = regex.gist;\n\t\tthis.service = 'gist';\n\n\t\tif(typeof this.options.input !== 'string'){\n\t\t\tthis.options.input.addEventListener('rendered', () => {\n\t\t\t\tthis.load()\n\t\t\t})\n\t\t}\n\t}\n\n\ttemplate(match) {\n\t\treturn `<div class=\"ejs-gist\" data-src=\"${match}\"></div>`\n\t}\n\n\tload() {\n\t\tlet gists = this.options.input.getElementsByClassName('ejs-gist');\n\t\tfor (let i = 0; i < gists.length; i++) {\n\t\t\tlet gistFrame = document.createElement(\"iframe\");\n\t\t\tgistFrame.setAttribute(\"width\", \"100%\");\n\t\t\tgistFrame.id = `ejs-gist-${i}`;\n\n\t\t\tlet zone       = gists[i];\n\t\t\tzone.innerHTML = \"\";\n\t\t\tzone.appendChild(gistFrame);\n\n\t\t\t// Create the iframe's document\n\t\t\tlet url           = gists[i].getAttribute('data-src');\n\t\t\turl               = url.indexOf('http') === -1 ? `https://${url}` : url;\n\t\t\tlet gistFrameHTML = `<html><base target=\"_parent\"/><body onload=\"parent.document.getElementById('ejs-gist-${i}').style.height=parseInt(document.body.scrollHeight)+20+'px'\"><script type=\"text/javascript\" src=\"${url}.js\"></script></body></html>`;\n\n\t\t\t// Set iframe's document with a trigger for this document to adjust the height\n\t\t\tlet gistFrameDoc = gistFrame.document;\n\n\t\t\tif (gistFrame.contentDocument) {\n\t\t\t\tgistFrameDoc = gistFrame.contentDocument;\n\t\t\t} else if (gistFrame.contentWindow) {\n\t\t\t\tgistFrameDoc = gistFrame.contentWindow.document;\n\t\t\t}\n\n\t\t\tgistFrameDoc.open();\n\t\t\tgistFrameDoc.writeln(gistFrameHTML);\n\t\t\tgistFrameDoc.close();\n\t\t}\n\t}\n\n\tprocess() {\n\t\treturn embed(this);\n\t}\n}\n","import { truncate } from '../utils'\nimport { getDetailsTemplate, template, asyncEmbed } from '../../helpers'\nimport 'whatwg-fetch'\nimport regex from '../regex'\n\nfunction formatData(data) {\n\treturn {\n\t\ttitle         : data.snippet.title,\n\t\tthumbnail     : data.snippet.thumbnails.medium.url,\n\t\trawDescription: data.snippet.description,\n\t\tviews         : data.statistics.viewCount,\n\t\tlikes         : data.statistics.likeCount,\n\t\tdescription   : truncate(data.snippet.description, 150),\n\t\turl           : `https://www.youtube.com/watch?v=${data.id}`,\n\t\tid            : data.id,\n\t\thost          : 'youtube'\n\t}\n}\n\nfunction data(id, options) {\n\tlet url      = `https://www.googleapis.com/youtube/v3/videos?id=${id}&key=${options.googleAuthKey}&part=snippet,statistics`;\n\treturn new Promise((resolve) => {\n\t\tfetch(url)\n\t\t\t.then((data) => data.json())\n\t\t\t.then((json) => resolve(json.items[0]))\n\t})\n}\n\nfunction urlToText(args, match, url, normalEmbed) {\n\tlet id       = normalEmbed ? match[1] : match[2];\n\tlet embedUrl = `https://www.youtube.com/embed/${id}`;\n\tif (args.options.videoDetails) {\n\t\treturn new Promise((resolve) => {\n\t\t\tdata(id, args.options).then((data) => resolve(getDetailsTemplate(formatData(data), data, embedUrl, args.options)))\n\t\t})\n\t} else {\n\t\treturn new Promise((resolve) => resolve(template(embedUrl, args.options)))\n\t}\n}\n\nexport default function (input, output, options, embeds) {\n\tconst args = {\n\t\tinput,\n\t\toutput,\n\t\toptions,\n\t\tembeds,\n\t\tregex  : regex.youtube,\n\t\tservice: 'youtube'\n\t};\n\n\treturn new Promise((resolve) => asyncEmbed(args, urlToText).then((data) => resolve(data)))\n}\n","import {truncate} from '../utils'\nimport {getDetailsTemplate, template, asyncEmbed} from '../../helpers'\nimport 'whatwg-fetch'\nimport regex from '../regex'\n\n\nfunction formatData(data, truncate) {\n\treturn {\n\t\ttitle         : data.title,\n\t\tthumbnail     : data.thumbnail_medium,\n\t\trawDescription: data.description.replace(/\\n/g, '<br/>').replace(/&#10;/g, '<br/>'),\n\t\tviews         : data.stats_number_of_plays,\n\t\tlikes         : data.stats_number_of_likes,\n\t\tdescription   : truncate(data.description.replace(/((<|&lt;)br\\s*\\/*(>|&gt;)\\r\\n)/g, ' '), 150),\n\t\turl           : data.url,\n\t\tid            : data.id,\n\t\thost          : 'vimeo'\n\t}\n}\n\nfunction data(id) {\n\tlet url = `https://vimeo.com/api/v2/video/${id}.json`;\n\treturn new Promise((resolve) => {\n\t\tfetch(url)\n\t\t\t.then((data) => data.json())\n\t\t\t.then((json) => resolve(json[0]))\n\t})\n}\n\nfunction urlToText(args, match, url, normalEmbed) {\n\tlet id;\n\tif (!normalEmbed) {\n\t\tid = args.options.link ? match[0].slice(0, -4).split('/').slice(-1).pop() : match[0].split('/').slice(-1).pop();\n\t} else {\n\t\tid = match[3]\n\t}\n\tif (!id) return;\n\tlet embedUrl = `https://player.vimeo.com/video/${id}`;\n\tif (args.options.videoDetails) {\n\t\treturn new Promise((resolve) => {\n\t\t\tdata(id).then((data) => resolve(getDetailsTemplate(formatData(data, truncate), data, embedUrl, args.options)))\n\t\t})\n\t} else {\n\t\treturn new Promise((resolve) => resolve(template(embedUrl, args.options)))\n\t}\n\n}\n\nexport default function (input, output, options, embeds) {\n\tconst args = {\n\t\tinput,\n\t\toutput,\n\t\toptions,\n\t\tembeds,\n\t\tregex  : regex.vimeo,\n\t\tservice: 'vimeo'\n\t};\n\n\treturn new Promise((resolve) => asyncEmbed(args, urlToText).then((data) => resolve(data)))\n}\n","import {asyncEmbed} from '../../helpers'\nimport fetchJsonp     from 'fetch-jsonp'\nimport regex from '../regex'\n\nfunction fetchData(args, url) {\n\tlet api = `http://www.slideshare.net/api/oembed/2?url=${url}&format=jsonp&maxwidth=${args.options.videoWidth}&maxheight=${args.options.videoHeight}`;\n\treturn new Promise((resolve) => {\n\t\tfetchJsonp(api, {credentials: 'include'})\n\t\t\t.then((data) => data.json())\n\t\t\t.then((json) => resolve(json.html))\n\t})\n}\n\nfunction urlToText(args, match, url) {\n\treturn new Promise((resolve) => {\n\t\tfetchData(args, url).then((html) => resolve(args.template(html)))\n\t})\n}\n\nexport default function (input, output, options, embeds) {\n\tconst args = {\n\t\tinput, output, options, embeds,\n\t\tregex: regex.slideShare,\n\t\tservice: 'slideshare',\n\t\ttemplate(html) {\n\t\t\treturn this.options.template.slideShare(html, this.options)\n\t\t}\n\t};\n\n\treturn new Promise((resolve) => asyncEmbed(args, urlToText).then((data) => resolve(data)))\n}\n","import { urlRegex } from './utils'\nimport { asyncEmbed } from '../helpers'\nimport 'whatwg-fetch'\n\nfunction fetchData(url, _) {\n\turl     = encodeURIComponent(url);\n\tlet api = new Function('url', 'return `' + _.options.openGraphEndpoint + '`')(url);\n\treturn new Promise((resolve) => {\n\t\tfetch(api)\n\t\t\t.then((res)=>res.json())\n\t\t\t.then((json)=>resolve(_.options.onOpenGraphFetch(json) || json))\n\t})\n}\n\nfunction urlToText(_, match, url) {\n\tif (url.match(_.excludeRegex)) return Promise.resolve();\n\n\treturn new Promise((resolve) => {\n\t\tfetchData(url, _).then((data) => resolve(data && data.success ? _.template(data) : ''))\n\t})\n}\n\nexport default function (input, output, options, embeds) {\n\tconst args = {\n\t\tinput,\n\t\toutput,\n\t\toptions,\n\t\tembeds,\n\t\tservice     : 'opengraph',\n\t\tregex       : urlRegex(),\n\t\texcludeRegex: new RegExp(['.mp4|.mp3|.gif|.pdf|.doc|.ppt|.docx|.jpg|.jpeg|.ogg'].concat(options.openGraphExclude).join('|'), 'gi'),\n\t\ttemplate(data) {\n\t\t\treturn this.options.template.openGraph(data, this.options)\n\t\t}\n\t};\n\n\treturn new Promise((resolve) => asyncEmbed(args, urlToText).then((data) => resolve(data)))\n}\n","import {asyncEmbed} from '../helpers'\nimport regex from './regex'\nimport 'whatwg-fetch'\n\nfunction template(data, options) {\n\treturn options.template.github(data, options);\n}\n\nfunction fetchRepo(data) {\n\tlet api = `https://api.github.com/repos/${data.user}/${data.repo}`;\n\treturn new Promise((resolve) => {\n\t\tfetch(api)\n\t\t\t.then(function (data) {\n\t\t\t\treturn data.json()\n\t\t\t})\n\t\t\t.then(function (json) {\n\t\t\t\treturn resolve(json)\n\t\t\t})\n\t})\n}\n\nfunction urlToText(_this, match, url, normalEmbed) {\n\tlet data = !normalEmbed ? ({\n\t\tuser: match[2],\n\t\trepo: match[3]\n\t}) : ({\n\t\tuser: match[1],\n\t\trepo: match[2]\n\t});\n\n\tif (!data.repo) return;\n\treturn new Promise(function (resolve) {\n\t\tfetchRepo(data)\n\t\t\t.then(function (response) {\n\t\t\t\treturn resolve(template(response, _this.options))\n\t\t\t})\n\t})\n}\n\nexport default function (input, output, options, embeds) {\n\tconst args = {\n\t\tinput, output, options, embeds,\n\t\tservice: 'github',\n\t\tregex  : regex.github\n\t};\n\n\treturn new Promise((resolve) => asyncEmbed(args, urlToText).then((data) => resolve(data)))\n}\n","import regex from './regex';\n\nexport default function (input, options) {\n\tconst mRegex = regex.mentions;\n\treturn input.replace(mRegex,(match, $1, $2) => {\n\t\tconst username = $2.split('@')[1];\n\t\treturn $1 + options.mentionsUrl(username);\n\t})\n}\n","import regex from './regex';\n\nexport default function (input, options) {\n\tconst hRegex = regex.hashtag;\n\treturn input.replace(hRegex,(match, $1, $2)=>{\n\t\tconst username = $2.split('#')[1];\n\t\treturn $1 + options.hashtagUrl(username);\n\t})\n}\n","import { ifEmbed, createText, deepExtend, cloneObject, processOptions } from './modules/utils'\n\nimport renderer    from './modules/template'\n\nimport emoji       from './modules/emoticons/emoji'\nimport smiley      from './modules/emoticons/smiley'\nimport url         from './modules/url'\n\nimport Twitter     from './modules/twitter/twitter'\nimport gmap        from './modules/map/map'\nimport markdown    from './modules/markdown'\n\nimport highlight   from './modules/code/highlight'\nimport Gist        from './modules/code/gist'\n\nimport youtube     from './modules/video/youtube'\nimport vimeo       from './modules/video/vimeo'\n\nimport slideShare  from './modules/image/slideshare'\n\nimport openGraph   from './modules/openGraph'\nimport github      from './modules/github'\n\nimport mentions    from './modules/mentions';\nimport hashtag     from './modules/hashtag';\n\nimport regex from './modules/regex'\n\nimport { applyPlyr, applyVideoJS, playVideo, destroyVideos, baseEmbed } from './helpers'\n\nlet globalOptions = {};\n\nconst defaultOptions = {\n\tmarked: false,\n\tmarkedOptions: {},\n\tlink: true,\n\tlinkOptions: {\n\t\ttarget: 'self',\n\t\texclude: ['pdf'],\n\t\trel: ''\n\t},\n\temoji: true,\n\tcustomEmoji: [],\n\tfontIcons: true,\n\tcustomFontIcons: [],\n\thighlightCode: false,\n\tmentions: false,\n\thashtag: false,\n\tvideoJS: false,\n\tvideojsOptions: {\n\t\tfluid: true,\n\t\tpreload: 'metadata'\n\t},\n\tplyr: false,\n\tplyrOptions: {},\n\tlocationEmbed: true,\n\tmapOptions: {\n\t\tmode: 'place'\n\t},\n\ttweetsEmbed: false,\n\ttweetOptions: {\n\t\tmaxWidth: 550,\n\t\thideMedia: false,\n\t\thideThread: false,\n\t\talign: 'none',\n\t\tlang: 'en'\n\t},\n\tsingleEmbed: false,\n\topenGraphEndpoint: null,\n\topenGraphExclude: [],\n\tvideoEmbed: true,\n\tvideoHeight: null,\n\tvideoWidth: null,\n\tvideoDetails: true,\n\taudioEmbed: true,\n\timageEmbed: true,\n\texcludeEmbed: [],\n\tinlineEmbed: [],\n\tinlineText: true,\n\tcodeEmbedHeight: 500,\n\tvineOptions: {\n\t\tmaxWidth: null,\n\t\ttype: 'postcard', //'postcard' or 'simple' embedding\n\t\tresponsive: true,\n\t\twidth: 350,\n\t\theight: 460\n\t},\n\tplugins: {\n\t\tmarked: window.marked,\n\t\tvideojs: window.videojs,\n\t\tplyr: window.plyr,\n\t\thighlightjs: window.hljs,\n\t\tprismjs: window.Prism,\n\t\ttwitter: window.twttr\n\t},\n\tgoogleAuthKey: '',\n\tsoundCloudOptions: {\n\t\theight: 160,\n\t\tthemeColor: 'f50000', //Hex Code of the player theme color\n\t\tautoPlay: false,\n\t\thideRelated: false,\n\t\tshowComments: true,\n\t\tshowUser: true,\n\t\tshowReposts: false,\n\t\tvisual: false, //Show/hide the big preview image\n\t\tdownload: false //Show/Hide download buttons\n\t},\n\tvideoClickClass: 'ejs-video-thumb',\n\tcustomVideoClickHandler: false,\n\tmentionsUrl: function () {\n\t},\n\thashtagUrl: function () {\n\t},\n\tbeforeEmbedJSApply: function () {\n\t},\n\tafterEmbedJSApply: function () {\n\t},\n\tonVideoShow: function () {\n\t},\n\tonTweetsLoad: function () {\n\t},\n\tvideojsCallback: function () {\n\t},\n\tonOpenGraphFetch: function () {\n\t},\n\tonOpenGraphFail: function () {\n\t},\n\tvideoClickHandler: function () {\n\t},\n\tserved: [] //Private variable used to store processed urls so that they are not processed multiple times.\n};\n\nlet instances = [];\nlet allInstances = [];\nlet promises = [];\n\nexport default class EmbedJS {\n\t/**\n\t * The constructor takes two arguments. The first one is the options object and the second one is the\n\t * optional string . If the user wants to provide a string directly instead of the element, he can do that.\n\t * In case the user provides both the input element and the string, the input string will be taken from the element\n\t * and the provided string won't be processed.\n\t *\n\t * @param  {object} options The options object\n\t * @param template\n\t * @return {null}\n\t */\n\tconstructor(options, template) {\n\t\t/**\n\t\t * We have created a clone of the original options to make sure that the original object\n\t\t * isn't altered.\n\t\t */\n\t\tlet defOpts = cloneObject(defaultOptions);\n\t\tlet globOpts = cloneObject(globalOptions);\n\n\t\t//merge global options with the default options\n\t\tlet globOptions = deepExtend(defOpts, globOpts);\n\n\t\t//deepExtend global options with the overriding options provided by the user as an options\n\t\t//object while creating a new instance of embed.js\n\t\tthis.options = deepExtend(globOptions, options);\n\n\t\tthis.options.template = deepExtend(renderer, template);\n\n\t\tif (!(typeof this.options.input === 'string' || typeof this.options.input === 'object')) throw ReferenceError(\"You need to pass an element or the string that needs to be processed\");\n\n\t\tthis.input = (typeof this.options.input === 'object') ? this.options.input.innerHTML : this.options.input\n\n\t}\n\n\t/**\n\t * Processes the string and performs all the insertions and manipulations based on\n\t * the options and the input provided by the user. This returns a promise which is resolved once the result data is ready\n\t * @return {Promise} The processes resulting string\n\t */\n\tprocess() {\n\t\tconst input = this.input;\n\n\t\tif (input === '') return Promise.resolve('');\n\n\t\tconst options = processOptions(this.options);\n\t\tlet embeds = [];\n\t\tlet output = input;\n\n\t\tthis.options.beforeEmbedJSApply();\n\n\t\treturn new Promise((resolve) => {\n\t\t\tif (options.link)\n\t\t\t\toutput = url(input, options);\n\n\t\t\tconst openGraphPromise = options.openGraphEndpoint ? openGraph(input, output, options, embeds) : Promise.resolve([output, embeds]);\n\n\t\t\topenGraphPromise.then(function ([output, embeds]) {\n\t\t\t\tif (options.highlightCode) {\n\t\t\t\t\toutput = highlight(output, options)\n\t\t\t\t}\n\t\t\t\tif (options.marked) {\n\t\t\t\t\toutput = markdown(output, options)\n\t\t\t\t}\n\t\t\t\tif (options.emoji) {\n\t\t\t\t\toutput = emoji(output, options)\n\t\t\t\t}\n\t\t\t\tif (options.fontIcons) {\n\t\t\t\t\toutput = smiley(output, options)\n\t\t\t\t}\n\t\t\t\tif (options.mentions) {\n\t\t\t\t\toutput = mentions(output, options);\n\t\t\t\t}\n\t\t\t\tif (options.hashtag) {\n\t\t\t\t\toutput = hashtag(output, options);\n\t\t\t\t}\n\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.ideone, 'ideone');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.plunker, 'plunker');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.jsbin, 'jsbin');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.codepen, 'codepen');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.jsfiddle, 'jsfiddle');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.ted, 'ted');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.dailymotion, 'dailymotion');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.ustream, 'ustream');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.liveleak, 'liveleak');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.basicVideo, 'video', options.videoEmbed);\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.vine, 'vine');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.soundCloud, 'soundcloud');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.spotify, 'spotify');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.basicAudio, 'audio', options.audioEmbed);\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.flickr, 'flickr');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.instagram, 'instagram');\n\t\t\t\t[output, embeds] = baseEmbed(input, output, embeds, options, regex.basicImage, 'image', options.imageEmbed);\n\n\t\t\t\tif (ifEmbed(options, 'gist')) {\n\t\t\t\t\t[output, embeds] = new Gist(input, output, options, embeds).process()\n\t\t\t\t}\n\n\t\t\t\treturn ifEmbed(options, 'youtube') ? youtube(input, output, options, embeds) : Promise.resolve([output, embeds]);\n\t\t\t}).then(function ([output, embeds]) {\n\t\t\t\treturn ifEmbed(options, 'vimeo') ? vimeo(input, output, options, embeds) : Promise.resolve([output, embeds]);\n\t\t\t}).then(function ([output, embeds]) {\n\t\t\t\treturn ifEmbed(options, 'github') ? github(input, output, options, embeds) : Promise.resolve([output, embeds]);\n\t\t\t}).then(function ([output, embeds]) {\n\t\t\t\treturn options.locationEmbed && ifEmbed(options, 'gmap') ? gmap(input, output, options, embeds) : Promise.resolve([output, embeds])\n\t\t\t}).then(function ([output, embeds]) {\n\t\t\t\treturn ifEmbed(options, 'slideshare') ? slideShare(input, output, options, embeds) : Promise.resolve([output, embeds]);\n\t\t\t}).then(([output, embeds]) => {\n\t\t\t\tif (options.tweetsEmbed && ifEmbed(options, 'twitter')) {\n\t\t\t\t\tthis.twitter = new Twitter(input, output, options, embeds);\n\t\t\t\t\treturn this.twitter.process()\n\t\t\t\t} else {\n\t\t\t\t\treturn Promise.resolve([output, embeds])\n\t\t\t\t}\n\t\t\t}).then(([output, embeds]) => {\n\t\t\t\tthis.data = {\n\t\t\t\t\tinput: options.input,\n\t\t\t\t\toutput,\n\t\t\t\t\toptions,\n\t\t\t\t\tinputString: this.input,\n\t\t\t\t\tservices: options.served,\n\t\t\t\t\ttemplate: options.template\n\t\t\t\t};\n\n\t\t\t\tresolve(createText(output, embeds))\n\n\t\t\t})\n\t\t})\n\t}\n\n\t/**\n\t * First processes the data by calling the .process() and then renders the data in the div\n\t * => Loads the twitter widgets\n\t * => Executes the onTweetsLoad() once all the tweets have been rendered\n\t * => Applies video.js on the media (both audio and video)\n\t * => Triggers video loading on click of the video preview\n\t * => Executes afterEmbedJSApply() once everything is done.\n\t *\n\t * @return Promise\n\t */\n\trender() {\n\t\tif (typeof this.options.input === 'string') throw new Error(`You cannot call render method for a string`);\n\t\tif (!this.options.input) throw new Error(`You didn't pass an element while creating this instance. render() method can't work without an input element`);\n\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.process().then((data) => {\n\t\t\t\tthis.options.input.innerHTML = data;\n\t\t\t\tthis.applyListeners();\n\t\t\t\tresolve(this.data);\n\t\t\t})\n\t\t})\n\t}\n\n\t/**\n\t * This method listens to all the events like click, handle\n\t * events to be done after an element has been rendered. These\n\t * include twitter widget rendering, gist embedding, click event listeners .\n\t */\n\tapplyListeners() {\n\t\tapplyVideoJS(this.options);\n\t\tapplyPlyr(this.options);\n\n\t\tplayVideo(this.options);\n\n\t\tlet event = new Event('rendered');\n\t\tthis.options.input.dispatchEvent(event);\n\n\t\tthis.options.afterEmbedJSApply();\n\t}\n\n\n\t/**\n\t * This function updates the parametrs of the current instance\n\t * @param options   New updated options object. will be extended with the older options\n\t * @param template  [optional] the new template instance\n\t */\n\tupdate(options, template) {\n\n\t\tif (options)\n\t\t\tthis.options = deepExtend(this.options, options);\n\n\t\tif (template)\n\t\t\tthis.options.template = template;\n\n\t\tif (!this.options.input || !(typeof this.options.input === 'string' || typeof this.options.input === 'object')) throw ReferenceError(\"You need to pass an element or the string that needs to be processed\");\n\n\t\tthis.input = (typeof this.options.input === 'object') ? this.options.input.innerHTML : this.options.input\n\t}\n\n\t/**\n\t * returns the resulting string based on the input and the options passed by the user.\n\t * @return Promise\n\t */\n\ttext(callback) {\n\t\tthis.process().then((data) => callback(data, this.input))\n\t}\n\n\t/**\n\t * The destroy method destroys all the listeners and replaces the rih text with the original text in the\n\t * element.\n\t * @return {null}\n\t */\n\tdestroy() {\n\t\tif (typeof this.options.input !== 'object') throw new Error(`destroy() method only works if an element had been passed in the options object`);\n\t\tdestroyVideos('ejs-video-thumb');\n\t\tif (this.options.tweetsEmbed)\n\t\t\tthis.options.input.removeEventListener('rendered', this.twitter.load(), false);\n\t\tthis.options.input.innerHTML = this.input\n\t}\n\n\t/**\n\t * Sets options globally\n\t * @param {object} options\n\t */\n\tstatic setOptions(options) {\n\t\tglobalOptions = deepExtend(defaultOptions, options)\n\t}\n\n\t/**\n\t * Applies embed.js to all the elements with the class name provided as option\n\t * @return {Promise}\n\t * @param selectorName\n\t * @param options\n\t * @param template\n\t */\n\tstatic applyEmbedJS(selectorName, options = {}, template = renderer) {\n\t\tlet elements = document.querySelectorAll(selectorName);\n\t\tfor (let i = 0; i < elements.length; i++) {\n\t\t\toptions.input = elements[i];\n\t\t\tinstances[i] = new EmbedJS(options, template);\n\t\t\tpromises[i] = instances[i].render()\n\t\t}\n\t\treturn new Promise(function (resolve) {\n\t\t\tPromise.all(promises).then(function (val) {\n\t\t\t\tresolve(val);\n\t\t\t})\n\t\t})\n\t}\n\n\t/**\n\t * Destroys all the instances of EmbedJS created by using applyEmbedJS() method.\n\t * @return {null}\n\t */\n\tstatic destroyEmbedJS() {\n\t\tfor (let i = 0; i < instances.length; i++) {\n\t\t\tinstances[i].destroy()\n\t\t}\n\t}\n\n\t/**\n\t * Destroys all instances of EmbedJS on the page\n\t * @return {null}\n\t */\n\tstatic destroyAll() {\n\t\tfor (let i = 0; i < allInstances.length; i++) {\n\t\t\tallInstances[i].destroy()\n\t\t}\n\t}\n\n\t/**\n\t * Creates a new instance of the Template constructor. This has been done so that multiple\n\t * templates of a single service can be used by creating different instances of the Template.\n\t *\n\t * The usage of the plugin is described below.\n\t *\n\t * => Create a new Instance of the template by using .Template() method of EmbedJS.\n\t *\n\t *        var template = EmbedJS.Template()\n\t *\n\t * => Now create different templates for different service names.\n\t *\n\t *        template.url = function(match, options){\n     * \t\t\treturn '<a href=\" + match + \"> + match + </a>'\n     * \t\t}\n\t *\n\t *        template.instagram = function(match, dimensions, options){\n     * \t\t\tvar config = options.soundCloudOptions;\n     * \t\t\treturn `<div class=\"ejs-embed ejs-instagram\"><iframe src=\"${toUrl(match.split('/?')[0])}/embed/\" height=\"${dimensions.height}\"></iframe></div>`;\n     * \t\t}\n\t *\n\t */\n\tstatic Template() {\n\t\treturn renderer;\n\t}\n}\n"],"names":["truncate","string","n","substr","length","toUrl","indexOf","deepExtend","destination","source","property","hasOwnProperty","constructor","Object","escapeRegExp","str","replace","sortObject","arr","sort","a","b","index","createText","embeds","sortedEmbeds","i","text","matches","regex","input","exec","ifEmbed","options","service","singleEmbed","served","excludeEmbed","ifInline","inlineEmbed","setDimensions","videoWidth","videoHeight","cloneObject","obj","temp","key","urlRegex","arrayLowercase","map","elem","toLowerCase","processOptions","lastElement","url","match","config","linkOptions","rel","target","smiley","pre","code","emoji","audio","soundcloud","soundCloudOptions","autoPlay","hideRelated","showComments","showUser","showReposts","visual","download","themeColor","spotify","id","split","codepen","codeEmbedHeight","ideone","jsbin","jsfiddle","slice","plunker","image","flickr","instagram","slideShare","html","video","dailymotion","liveleak","ted","ustream","splice","join","detailsVimeo","data","fullData","embedUrl","thumbnail","title","description","views","likes","detailsYoutube","vine","vineOptions","type","height","width","vimeo","plyr","youtube","openGraph","github","owner","avatar_url","html_url","full_name","stargazers_count","network_count","gmap","latitude","longitude","location","mapOptions","mode","googleAuthKey","mentions","hashtag","basicAudio","soundCloud","gist","highlightCode","inlineCode","basicImage","basicVideo","twitter","smileys","getEmoji","substring","output","template","defaultIcons","icons","customFontIcons","escapedSymbols","val","smileyRegex","RegExp","extension","exclude","global","factory","define","amd","exports","module","mod","fetchJsonp","this","defaultOptions","timeout","jsonpCallback","jsonpCallbackFunction","generateCallbackFunction","Date","now","Math","ceil","random","clearFunction","functionName","window","e","undefined","removeScript","scriptId","script","document","getElementById","getElementsByTagName","removeChild","_url","arguments","timeoutId","Promise","resolve","reject","callbackFunction","response","ok","json","clearTimeout","jsonpScript","createElement","setAttribute","appendChild","setTimeout","Error","playVideo","customVideoClickHandler","videoClickHandler","classes","getElementsByClassName","videoClickClass","onclick","onVideoShow","getAttribute","parentNode","innerHTML","host","plugins","ReferenceError","setup","plyrOptions","applyVideoJS","videojsOptions","videoJS","videojs","VideoJS","elements","videojsCallback","className","_","regexInline","link","push","inlineText","normalEmbed","embed","args","baseEmbed","flag","base","getInlineData","urlToText","then","inlineAsyncEmbed","promises","all","matched","getNormalData","normalAsyncEmbed","asyncEmbed","Twitter","load","bind","addEventListener","tweetOptions","apiUrl","maxWidth","hideMedia","hideThread","align","lang","credentials","widgets","element","events","onTweetsLoad","_this","tweetData","self","fetch","support","searchParams","iterable","Symbol","blob","Blob","formData","arrayBuffer","normalizeName","name","String","test","TypeError","normalizeValue","value","iteratorFor","items","iterator","next","shift","done","Headers","headers","forEach","append","getOwnPropertyNames","prototype","list","get","values","getAll","has","set","callback","thisArg","call","keys","entries","consumed","body","bodyUsed","fileReaderReady","reader","onload","result","onerror","error","readBlobAsArrayBuffer","FileReader","readAsArrayBuffer","readBlobAsText","readAsText","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","toString","ArrayBuffer","rejected","decode","JSON","parse","methods","normalizeMethod","method","upcased","toUpperCase","Request","referrer","clone","form","trim","bytes","decodeURIComponent","xhr","head","pairs","getAllResponseHeaders","header","Response","bodyInit","status","statusText","redirectStatuses","redirect","RangeError","init","request","XMLHttpRequest","responseURL","getResponseHeader","responseText","ontimeout","open","withCredentials","responseType","setRequestHeader","send","polyfill","getCoordinate","results","geometry","lat","lng","locationText","allMatches","promise","coordinatesArr","regexMatch","marked","Marked","renderer","Renderer","href","$1","paragraph","Lexer","rules","gfm","heading","normal","tables","markedOptions","highlight","encode","trimSpace","addTemplate","processedCode","language","group1","group2","group3","highlightedCode","HighlightJS","highlightjs","highlightAuto","Gist","gists","gistFrame","zone","gistFrameHTML","gistFrameDoc","contentDocument","contentWindow","writeln","close","formatData","snippet","thumbnails","medium","rawDescription","statistics","viewCount","likeCount","videoDetails","getDetailsTemplate","thumbnail_medium","stats_number_of_plays","stats_number_of_likes","pop","fetchData","api","encodeURIComponent","Function","openGraphEndpoint","res","onOpenGraphFetch","excludeRegex","success","concat","openGraphExclude","fetchRepo","user","repo","mRegex","$2","username","mentionsUrl","hRegex","hashtagUrl","globalOptions","customEmoji","fontIcons","fluid","preload","locationEmbed","tweetsEmbed","videoEmbed","audioEmbed","imageEmbed","responsive","hljs","prismjs","Prism","twttr","beforeEmbedJSApply","afterEmbedJSApply","onOpenGraphFail","instances","allInstances","EmbedJS","defOpts","globOpts","globOptions","openGraphPromise","markdown","process","inputString","services","applyListeners","applyPlyr","event","Event","dispatchEvent","destroyVideos","removeEventListener","selectorName","querySelectorAll","render","destroy"],"mappings":"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"}