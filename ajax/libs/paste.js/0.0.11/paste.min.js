(function(){var t,e,n,r;t=window.jQuery,t.paste=function(t){var n;return"undefined"!=typeof console&&null!==console&&console.log("DEPRECATED: This method is deprecated. Please use $.fn.pastableNonInputable() instead."),n=e.mountNonInputable(t),n._container},t.fn.pastableNonInputable=function(){var t,n,r;for(n=0,r=this.length;n<r;n++)t=this[n],e.mountNonInputable(t);return this},t.fn.pastableTextarea=function(){var t,n,r;for(n=0,r=this.length;n<r;n++)t=this[n],e.mountTextarea(t);return this},t.fn.pastableContenteditable=function(){var t,n,r;for(n=0,r=this.length;n<r;n++)t=this[n],e.mountContenteditable(t);return this},r=function(t,e){var n,r,a,o,i,u,s,c,l,f,h;if(null==e&&(e=512),!(c=t.match(/^data\:([^\;]+)\;base64\,(.+)$/)))return null;for(f=c,c=f[0],u=f[1],n=f[2],o=atob(n),a=[],l=0;l<o.length;){for(h=o.slice(l,l+e),i=new Array(h.length),s=0;s<h.length;)i[s]=h.charCodeAt(s),s++;r=new Uint8Array(i),a.push(r),l+=e}return new Blob(a,{type:u})},n=function(){return t(document.createElement("div")).attr("contenteditable",!0).attr("aria-hidden",!0).attr("tabindex",-1).css({width:1,height:1,position:"fixed",left:-100,overflow:"hidden"})},e=function(){function e(e,n){this._container=e,this._target=n,this._container=t(this._container),this._target=t(this._target).addClass("pastable"),this._container.on("paste",function(t){return function(e){var n,r,a,o,i,u,s,c,l,f,h,g,d,p;if(null!=(null!=(l=e.originalEvent)?l.clipboardData:void 0))if(n=e.originalEvent.clipboardData,n.items)for(f=n.items,o=0,u=f.length;o<u;o++)a=f[o],a.type.match(/^image\//)&&(c=new FileReader,c.onload=function(e){return t._handleImage(e.target.result)},c.readAsDataURL(a.getAsFile())),"text/plain"===a.type&&a.getAsString(function(e){return t._target.trigger("pasteText",{text:e})});else-1!==Array.prototype.indexOf.call(n.types,"text/plain")&&(p=n.getData("Text"),t._target.trigger("pasteText",{text:p})),t._checkImagesInContainer(function(e){return t._handleImage(e)});if(n=window.clipboardData){if(null!=(h=p=n.getData("Text"))?h.length:void 0)return t._target.trigger("pasteText",{text:p});for(g=n.files,d=[],i=0,s=g.length;i<s;i++)r=g[i],t._handleImage(URL.createObjectURL(r)),d.push(t._checkImagesInContainer(function(){}));return d}}}(this))}return e.prototype._target=null,e.prototype._container=null,e.mountNonInputable=function(r){var a;return a=new e(n().appendTo(r),r),t(r).on("click",function(t){return function(){return a._container.focus()}}(this)),a._container.on("focus",function(e){return function(){return t(r).addClass("pastable-focus")}}(this)),a._container.on("blur",function(e){return function(){return t(r).removeClass("pastable-focus")}}(this))},e.mountTextarea=function(r){var a,o;return-1!==navigator.userAgent.toLowerCase().indexOf("chrome")?this.mountContenteditable(r):(o=new e(n().insertBefore(r),r),a=!1,t(r).on("keyup",function(t){var e;if(17===(e=t.keyCode)||224===e)return a=!1}),t(r).on("keydown",function(t){var e;if(17!==(e=t.keyCode)&&224!==e||(a=!0),null!=t.ctrlKey&&null!=t.metaKey&&(a=t.ctrlKey||t.metaKey),a&&86===t.keyCode)return o._container.focus()}),t(o._target).on("pasteImage",function(e){return function(){return t(r).focus()}}(this)),t(o._target).on("pasteImageError",function(e){return function(){return t(r).focus()}}(this)),t(o._target).on("pasteText",function(e){return function(){return t(r).focus()}}(this)),t(r).on("focus",function(e){return function(){return t(r).addClass("pastable-focus")}}(this)),t(r).on("blur",function(e){return function(){return t(r).removeClass("pastable-focus")}}(this)))},e.mountContenteditable=function(n){var r;return r=new e(n,n),t(n).on("focus",function(e){return function(){return t(n).addClass("pastable-focus")}}(this)),t(n).on("blur",function(e){return function(){return t(n).removeClass("pastable-focus")}}(this))},e.prototype._handleImage=function(t){var e;return t.match(/^webkit\-fake\-url\:\/\//)?this._target.trigger("pasteImageError",{message:"You are trying to paste an image in Safari, however we are unable to retieve its data."}):(e=new Image,e.crossOrigin="anonymous",e.onload=function(t){return function(){var n,a,o,i;a=document.createElement("canvas"),a.width=e.width,a.height=e.height,o=a.getContext("2d"),o.drawImage(e,0,0,a.width,a.height),i=null;try{i=a.toDataURL("image/png"),n=r(i)}catch(t){}if(i)return t._target.trigger("pasteImage",{blob:n,dataURL:i,width:e.width,height:e.height})}}(this),e.onerror=function(e){return function(){return e._target.trigger("pasteImageError",{message:"Failed to get image from: "+t,url:t})}}(this),e.src=t)},e.prototype._checkImagesInContainer=function(e){var n,r,a,o,i;for(i=Math.floor(1e3*Math.random()),o=this._container.find("img"),r=0,a=o.length;r<a;r++)n=o[r],n["_paste_marked_"+i]=!0;return setTimeout(function(r){return function(){var a,o,u,s;for(u=r._container.find("img"),s=[],a=0,o=u.length;a<o;a++)n=u[a],n["_paste_marked_"+i]||e(n.src),s.push(t(n).remove());return s}}(this),1)},e}()}).call(this);
//# sourceMappingURL=paste.min.js.map