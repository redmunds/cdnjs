(function(){var t,n,e;t=window.jQuery,t.paste=function(t){var e;return"undefined"!=typeof console&&null!==console&&console.log("DEPRECATED: This method is deprecated. Please use $.fn.pastableNonInputable() instead."),e=n.mountNonInputable(t),e._container},t.fn.pastableNonInputable=function(){var t,e,r,a;for(r=0,a=this.length;r<a;r++)t=this[r],e=n.mountNonInputable(t);return this},t.fn.pastableTextarea=function(){var t,e,r,a;for(r=0,a=this.length;r<a;r++)t=this[r],e=n.mountTextarea(t);return this},t.fn.pastableContenteditable=function(){var t,e,r,a;for(r=0,a=this.length;r<a;r++)t=this[r],e=n.mountContenteditable(t);return this},e=function(){return t(document.createElement("div")).attr("contenteditable",!0).css({width:1,height:1,position:"fixed",left:-100,overflow:"hidden"})},n=function(){function n(n,e){this._container=n,this._target=e,this._container=t(this._container),this._target=t(this._target).addClass("pastable"),this._container.on("paste",function(t){return function(n){var e,r,a,o,i,u,s,c,l,f,h,d,g,p;if(null!=(null!=(f=n.originalEvent)?f.clipboardData:void 0))if(e=n.originalEvent.clipboardData,e.items)for(h=e.items,u=0,c=h.length;u<c;u++)a=h[u],a.type.match(/^image\//)&&(o=new FileReader,o.onload=function(n){return t._handleImage(n.target.result)},o.readAsDataURL(a.getAsFile())),"text/plain"===a.type&&a.getAsString(function(n){return t._target.trigger("pasteText",{text:n})});else e.types.length?(i=e.getData("Text"),t._target.trigger("pasteText",{text:i})):t._checkImagesInContainer(function(n){return t._handleImage(n)});if(e=window.clipboardData){if(null!=(d=i=e.getData("Text"))?d.length:void 0)return t._target.trigger("pasteText",{text:i});for(g=e.files,p=[],s=0,l=g.length;s<l;s++)r=g[s],t._handleImage(URL.createObjectURL(r)),p.push(t._checkImagesInContainer(function(){}));return p}}}(this))}return n.prototype._target=null,n.prototype._container=null,n.mountNonInputable=function(r){var a;return a=new n(e().appendTo(r),r),t(r).on("click",function(t){return function(){return a._container.focus()}}(this)),a._container.on("focus",function(n){return function(){return t(r).addClass("pastable-focus")}}(this)),a._container.on("blur",function(n){return function(){return t(r).removeClass("pastable-focus")}}(this))},n.mountTextarea=function(r){var a,o;return window.ClipboardEvent||window.clipboardData?(o=new n(e().insertBefore(r),r),a=!1,t(r).on("keyup",function(t){var n;if(17===(n=t.keyCode)||224===n)return a=!1}),t(r).on("keydown",function(t){var n;if(17!==(n=t.keyCode)&&224!==n||(a=!0),a&&86===t.keyCode)return o._container.focus()}),t(o._target).on("pasteImage",function(n){return function(){return t(r).focus()}}(this)),t(o._target).on("pasteText",function(n){return function(){return t(r).focus()}}(this)),t(r).on("focus",function(n){return function(){return t(r).addClass("pastable-focus")}}(this)),t(r).on("blur",function(n){return function(){return t(r).removeClass("pastable-focus")}}(this))):this.mountContenteditable(r)},n.mountContenteditable=function(e){var r;return r=new n(e,e),t(e).on("focus",function(n){return function(){return t(e).addClass("pastable-focus")}}(this)),t(e).on("blur",function(n){return function(){return t(e).removeClass("pastable-focus")}}(this))},n.prototype._handleImage=function(t){var n;return n=new Image,n.onload=function(t){return function(){var e,r,a;e=document.createElement("canvas"),e.width=n.width,e.height=n.height,r=e.getContext("2d"),r.drawImage(n,0,0,e.width,e.height),a=null;try{a=e.toDataURL("image/png")}catch(t){}if(a)return t._target.trigger("pasteImage",{dataURL:a,width:n.width,height:n.height})}}(this),n.src=t},n.prototype._checkImagesInContainer=function(n){var e,r,a,o,i;for(r=Math.floor(1e3*Math.random()),i=this._container.find("img"),a=0,o=i.length;a<o;a++)e=i[a],e["_paste_marked_"+r]=!0;return setTimeout(function(a){return function(){var o,i,u,s;for(u=a._container.find("img"),s=[],o=0,i=u.length;o<i;o++)e=u[o],e["_paste_marked_"+r]||n(e.src),s.push(t(e).remove());return s}}(this),1)},n}()}).call(this);
//# sourceMappingURL=paste.min.js.map