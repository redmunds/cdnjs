// JSTS. See https://github.com/bjornharrtell/jsts
// Licenses:
// https://github.com/bjornharrtell/jsts/blob/master/LICENSE_BHARRTELL_BSD3.txt
// https://github.com/bjornharrtell/jsts/blob/master/LICENSE_EPLv1.txt
// https://github.com/bjornharrtell/jsts/blob/master/LICENSE_MDAVIS_BSD3.txt
// https://github.com/bjornharrtell/jsts/blob/master/LICENSE_VSI_BSD3.txt
"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iterator(){}function Collection(){}function IndexOutOfBoundsException$1(e){this.message=e||""}function List(){}function NoSuchElementException(e){this.message=e||""}function OperationNotSupported(e){this.message=e||""}function Map$1(){}function SortedMap(){}function Set(){}function HashSet(){this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}function colorOf(e){return null==e?BLACK:e.color}function parentOf(e){return null==e?null:e.parent}function setColor(e,t){null!==e&&(e.color=t)}function leftOf(e){return null==e?null:e.left}function rightOf(e){return null==e?null:e.right}function TreeMap(){this.root_=null,this.size_=0}function SortedSet(){}function TreeSet(){this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}function Arrays(){}function HashMap(){this.map_=new Map}function EmptyStackException(e){this.message=e||""}function Stack(){this.array_=[]}function p2c(e){return[e.x,e.y]}function patch(){Geometry.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1},Geometry.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(null===e[t])return!0;return!1};var e={getFactory:function(){return this.factory},getGeometryN:function(e){return this},getArea:function(){return 0},union:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return UnaryUnionOp$1.union(this);if(1===t.length){var r=t[0];if(this.isEmpty()||r.isEmpty()){if(this.isEmpty()&&r.isEmpty())return OverlayOp$1.createEmptyResult(OverlayOp$1.UNION,this,r,this.factory);if(this.isEmpty())return r.copy();if(r.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(r),SnapIfNeededOverlayOp$1.overlayOp(this,r,OverlayOp$1.UNION)}},isValid:function(){return IsValidOp$1.isValid(this)},intersection:function(e){if(this.isEmpty()||e.isEmpty())return OverlayOp$1.createEmptyResult(OverlayOp$1.INTERSECTION,this,e,this.factory);if(this.isGeometryCollection()){var t=e;return GeometryCollectionMapper$1.map(this,new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"map",value:function(e){return e.intersection(t)}}]),e}()))}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp$1.overlayOp(this,e,OverlayOp$1.INTERSECTION)},intersects:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.isRectangle()?RectangleIntersects$1.intersects(this,e):e.isRectangle()?RectangleIntersects$1.intersects(e,this):this.relate(e).isIntersects():!1},buffer:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return BufferOp$1.bufferOp(this,r)}if(2===t.length){var r=t[0],i=t[1];return BufferOp$1.bufferOp(this,r,i)}if(3===t.length){var r=t[0],i=t[1],a=t[2];return BufferOp$1.bufferOp(this,r,i,a)}},convexHull:function(){return new ConvexHull$1(this).getConvexHull()},relate:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(r),RelateOp$1.relate(this,r)}if(2===t.length){var r=t[0],i=t[1];return this.relate(r).matches(i)}},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var e=Centroid$1.getCentroid(this);return this.createPointFromInternalCoord(e,this)},isEquivalentClass:function(e){return this.getClass()===e.getClass()},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var e=null,t=this.getDimension();if(0===t){var n=new InteriorPointPoint$1(this);e=n.getInteriorPoint()}else if(1===t){var n=new InteriorPointLine$1(this);e=n.getInteriorPoint()}else{var n=new InteriorPointArea$1(this);e=n.getInteriorPoint()}return this.createPointFromInternalCoord(e,this)},symDifference:function(e){if(this.isEmpty()||e.isEmpty()){if(this.isEmpty()&&e.isEmpty())return OverlayOp$1.createEmptyResult(OverlayOp$1.SYMDIFFERENCE,this,e,this.factory);if(this.isEmpty())return e.copy();if(e.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp$1.overlayOp(this,e,OverlayOp$1.SYMDIFFERENCE)},createPointFromInternalCoord:function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)},disjoint:function(e){return!this.intersects(e)},toText:function(){var e=new WKTWriter;return e.write(this)},contains:function(e){return this.getEnvelopeInternal().contains(e.getEnvelopeInternal())?this.isRectangle()?RectangleContains$1.contains(this,e):this.relate(e).isContains():!1},difference:function(e){return this.isEmpty()?OverlayOp$1.createEmptyResult(OverlayOp$1.DIFFERENCE,this,e,this.factory):e.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp$1.overlayOp(this,e,OverlayOp$1.DIFFERENCE))},isSimple:function(){var e=new IsSimpleOp$1(this);return e.isSimple()},isWithinDistance:function(e,t){var n=this.getEnvelopeInternal().distance(e.getEnvelopeInternal());return n>t?!1:DistanceOp$1.isWithinDistance(this,e,t)},distance:function(e){return DistanceOp$1.distance(this,e)}};for(var t in e)Geometry.prototype[t]=e[t]}var _get=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;if(void 0!==s)return s.call(r)},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),NumberUtil=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"equalsWithTolerance",value:function(e,t,n){return Math.abs(e-t)<=n}}]),e}(),IllegalArgumentException$1=function e(){_classCallCheck(this,e)},Double=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"isNaN",value:function(e){return Number.isNaN(e)}},{key:"doubleToLongBits",value:function(e){return e}},{key:"longBitsToDouble",value:function(e){return e}},{key:"isInfinite",value:function(e){return!Number.isFinite(e)}}]),e}(),Comparable=function e(){_classCallCheck(this,e)},Clonable=function e(){_classCallCheck(this,e)},Comparator=function e(){_classCallCheck(this,e)},Serializable=function e(){_classCallCheck(this,e)},RuntimeException=function e(){_classCallCheck(this,e)},AssertionFailedException=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];_classCallCheck(this,t);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),o=function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];return 0===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n))}.apply(void 0,r):1===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var a=r[0];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,a))}.apply(void 0,r):void 0};return e=o.apply(s,i),_possibleConstructorReturn(s,e)}return _inherits(t,e),_createClass(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(RuntimeException),Assert=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"shouldNeverReachHere",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(0===n.length)e.shouldNeverReachHere(null);else if(1===n.length){var i=n[0];throw new AssertionFailedException("Should never reach here"+(null!==i?": "+i:""))}}},{key:"isTrue",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];e.isTrue(i,null)}else if(2===n.length){var i=n[0],a=n[1];if(!i)throw null===a?new AssertionFailedException:new AssertionFailedException(a)}}},{key:"equals",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1];e.equals(i,a,null)}else if(3===n.length){var i=n[0],a=n[1],s=n[2];if(!a.equals(i))throw new AssertionFailedException("Expected "+i+" but encountered "+a+(null!==s?": "+s:""))}}}]),e}(),Coordinate=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.x=null,this.y=null,this.z=null;var a=function n(){for(var r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];if(0===i.length)n.call(t,0,0);else if(1===i.length){var s=i[0];n.call(t,s.x,s.y,s.z)}else if(2===i.length){var o=i[0],u=i[1];n.call(t,o,u,e.NULL_ORDINATE)}else if(3===i.length){var o=i[0],u=i[1],l=i[2];t.x=o,t.y=u,t.z=l}};return a.apply(this,r)}return _createClass(e,[{key:"setOrdinate",value:function(t,n){switch(t){case e.X:this.x=n;break;case e.Y:this.y=n;break;case e.Z:this.z=n;break;default:throw new IllegalArgumentException$1("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return this.x!==r.x?!1:this.y!==r.y?!1:!0}if(2===t.length){var i=t[0],a=t[1];return NumberUtil.equalsWithTolerance(this.x,i.x,a)&&NumberUtil.equalsWithTolerance(this.y,i.y,a)?!0:!1}}},{key:"getOrdinate",value:function(t){switch(t){case e.X:return this.x;case e.Y:return this.y;case e.Z:return this.z}throw new IllegalArgumentException$1("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||Double.isNaN(this.z)&&Double.isNaN(e.z))}},{key:"equals",value:function(t){return t instanceof e?this.equals2D(t):!1}},{key:"equalInZ",value:function(e,t){return NumberUtil.equalsWithTolerance(this.z,e.z,t)}},{key:"compareTo",value:function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}},{key:"clone",value:function(){try{var t=_get(Object.getPrototypeOf(e.prototype),"clone",this).call(this);return t}catch(e){if(e instanceof CloneNotSupportedException)return Assert.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw e}finally{}}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.z+")"}},{key:"distance3D",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return Math.sqrt(t*t+n*n+r*r)}},{key:"distance",value:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}},{key:"hashCode",value:function(){var t=17;return t=37*t+e.hashCode(this.x),t=37*t+e.hashCode(this.y)}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.z}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable,Clonable,Serializable]}}],[{key:"hashCode",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0],s=Double.doubleToLongBits(a);return Math.trunc(s^s>>>32)}return(t=_get(Object.getPrototypeOf(e),"hashCode",this)).call.apply(t,[this].concat(r))}},{key:"DimensionalComparator",get:function(){return DimensionalComparator}}]),e}(),DimensionalComparator=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.dimensionsToTest=2;var a=function e(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(0===r.length)e.call(t,2);else if(1===r.length){var a=r[0];if(2!==a&&3!==a)throw new IllegalArgumentException$1("only 2 or 3 dimensions may be specified");t.dimensionsToTest=a}};return a.apply(this,r)}return _createClass(e,[{key:"compare",value:function(t,n){var r=t,i=n,a=e.compare(r.x,i.x);if(0!==a)return a;var s=e.compare(r.y,i.y);if(0!==s)return s;if(this.dimensionsToTest<=2)return 0;var o=e.compare(r.z,i.z);return o}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparator]}}],[{key:"compare",value:function(e,t){return t>e?-1:e>t?1:Double.isNaN(e)?Double.isNaN(t)?0:-1:Double.isNaN(t)?1:0}}]),e}();Coordinate.serialVersionUID=0x5cbf2c235c7e5800,Coordinate.NULL_ORDINATE=Double.NaN,Coordinate.X=0,Coordinate.Y=1,Coordinate.Z=2;var CoordinateSequence=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"setOrdinate",value:function(e,t,n){}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(e,t){}},{key:"getCoordinate",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){t[0]}else if(2===t.length){t[0],t[1]}}},{key:"getCoordinateCopy",value:function(e){}},{key:"getDimension",value:function(){}},{key:"getX",value:function(e){}},{key:"clone",value:function(){}},{key:"expandEnvelope",value:function(e){}},{key:"copy",value:function(){}},{key:"getY",value:function(e){}},{key:"toCoordinateArray",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Clonable]}}]),e}();CoordinateSequence.X=0,CoordinateSequence.Y=1,CoordinateSequence.Z=2,CoordinateSequence.M=3;var CoordinateSequenceFactory=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"create",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(t[0]instanceof Array){t[0]}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateSequence)>-1){t[0]}}else if(2===t.length){t[0],t[1]}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Location=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toLocationSymbol",value:function(t){switch(t){case e.EXTERIOR:return"e";case e.BOUNDARY:return"b";case e.INTERIOR:return"i";case e.NONE:return"-"}throw new IllegalArgumentException$1("Unknown location value: "+t)}}]),e}();Location.INTERIOR=0,Location.BOUNDARY=1,Location.EXTERIOR=2,Location.NONE=-1;var MathUtil=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"log10",value:function(t){var n=Math.log(t);return Double.isInfinite(n)?n:Double.isNaN(n)?n:n/e.LOG_10}},{key:"min",value:function e(t,n,r,i){var e=t;return e>n&&(e=n),e>r&&(e=r),e>i&&(e=i),e}},{key:"clamp",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(3===t.length){if("number"==typeof t[2]&&"number"==typeof t[0]&&"number"==typeof t[1]){var r=t[0],i=t[1],a=t[2];return i>r?i:r>a?a:r}if(Number.isInteger(t[2])&&Number.isInteger(t[0])&&Number.isInteger(t[1])){var r=t[0],i=t[1],a=t[2];return i>r?i:r>a?a:r}}}},{key:"wrap",value:function(e,t){return 0>e?t- -e%t:e%t}},{key:"max",value:function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],a=n[1],s=n[2],e=i;return a>e&&(e=a),s>e&&(e=s),e}if(4===n.length){var i=n[0],a=n[1],s=n[2],o=n[3],e=i;return a>e&&(e=a),s>e&&(e=s),o>e&&(e=o),e}}},{key:"average",value:function(e,t){return(e+t)/2}}]),e}();MathUtil.LOG_10=Math.log(10);var StringBuffer=function(){function e(t){_classCallCheck(this,e),this.str=t}return _createClass(e,[{key:"append",value:function(e){this.str+=e}},{key:"setCharAt",value:function(e,t){return this.str.substr(0,e)+t+this.str.substr(e+1)}},{key:"toString",value:function(){return this.str}}]),e}(),Integer=function(){function e(t){_classCallCheck(this,e),this.value=t}return _createClass(e,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(e){return this.value<e?-1:this.value>e?1:0}}],[{key:"isNaN",value:function(e){return Number.isNaN(e)}}]),e}(),Character=function e(){_classCallCheck(this,e)};Character.isWhitespace=function(e){return 32>=e&&e>=0||127==e},Character.toUpperCase=function(e){return e.toUpperCase()};var DD=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.hi=0,this.lo=0;var a=function n(){for(var r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];if(0===i.length)t.init(0);else if(1===i.length){if("number"==typeof i[0]){var s=i[0];t.init(s)}else if(i[0]instanceof e){var o=i[0];t.init(o)}else if("string"==typeof i[0]){var u=i[0];n.call(t,e.parse(u))}}else if(2===i.length){var l=i[0],c=i[1];t.init(l,c)}};return a.apply(this,r)}return _createClass(e,[{key:"le",value:function(e){return this.hi<e.hi||this.hi===e.hi&&this.lo<=e.lo}},{key:"extractSignificantDigits",value:function(t,n){var r=this.abs(),i=e.magnitude(r.hi),a=e.TEN.pow(i);r=r.divide(a),r.gt(e.TEN)?(r=r.divide(e.TEN),i+=1):r.lt(e.ONE)&&(r=r.multiply(e.TEN),i-=1);for(var s=i+1,o=new StringBuffer,u=e.MAX_PRINT_DIGITS-1,l=0;u>=l;l++){t&&l===s&&o.append(".");var c=Math.trunc(r.hi);if(0>c)break;var h=!1,g=0;c>9?(h=!0,g="9"):g="0"+c,o.append(g),r=r.subtract(e.valueOf(c)).multiply(e.TEN),h&&r.selfAdd(e.TEN);var f=!0,y=e.magnitude(r.hi);if(0>y&&Math.abs(y)>=u-l&&(f=!1),!f)break}return n[0]=i,o.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this.hi+this.lo}},{key:"subtract",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.add(i.negate())}if("number"==typeof n[0]){var i=n[0];return this.add(-i)}}}},{key:"equals",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];return this.hi===a.hi&&this.lo===a.lo}return(t=_get(Object.getPrototypeOf(e.prototype),"equals",this)).call.apply(t,[this].concat(r))}},{key:"isZero",value:function(){return 0===this.hi&&0===this.lo}},{key:"selfSubtract",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.isNaN()?this:this.selfAdd(-i.hi,-i.lo)}if("number"==typeof n[0]){var i=n[0];return this.isNaN()?this:this.selfAdd(-i,0)}}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(e){return this.le(e)?this:e}},{key:"selfDivide",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.selfDivide(i.hi,i.lo)}if("number"==typeof n[0]){var i=n[0];return this.selfDivide(i,0)}}else if(2===n.length){var a=n[0],s=n[1],o=null,u=null,l=null,c=null,h=null,g=null,f=null,y=null;return h=this.hi/a,g=e.SPLIT*h,o=g-h,y=e.SPLIT*a,o=g-o,u=h-o,l=y-a,f=h*a,l=y-l,c=a-l,y=o*l-f+o*c+u*l+u*c,g=(this.hi-f-y+this.lo-h*s)/a,y=h+g,this.hi=y,this.lo=h-y+g,this}}},{key:"dump",value:function(){return"DD<"+this.hi+", "+this.lo+">"}},{key:"divide",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0],a=null,s=null,o=null,u=null,l=null,c=null,h=null,g=null;l=this.hi/i.hi,c=e.SPLIT*l,a=c-l,g=e.SPLIT*i.hi,a=c-a,s=l-a,o=g-i.hi,h=l*i.hi,o=g-o,u=i.hi-o,g=a*o-h+a*u+s*o+s*u,c=(this.hi-h-g+this.lo-l*i.lo)/i.hi,g=l+c;var f=g,y=l-g+c;return new e(f,y)}if("number"==typeof n[0]){var i=n[0];return Double.isNaN(i)?e.createNaN():e.copy(this).selfDivide(i,0)}}}},{key:"ge",value:function(e){return this.hi>e.hi||this.hi===e.hi&&this.lo>=e.lo}},{key:"pow",value:function(t){if(0===t)return e.valueOf(1);var n=new e(this),r=e.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2===1&&r.selfMultiply(n),i/=2,i>0&&(n=n.sqr());else r=n;return 0>t?r.reciprocal():r}},{key:"ceil",value:function(){if(this.isNaN())return e.NaN;var t=Math.ceil(this.hi),n=0;return t===this.hi&&(n=Math.ceil(this.lo)),new e(t,n)}},{key:"compareTo",value:function(e){var t=e;return this.hi<t.hi?-1:this.hi>t.hi?1:this.lo<t.lo?-1:this.lo>t.lo?1:0}},{key:"rint",value:function(){if(this.isNaN())return this;var e=this.add(.5);return e.floor()}},{key:"setValue",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.init(i),this}if("number"==typeof n[0]){var i=n[0];return this.init(i),this}}}},{key:"max",value:function(e){return this.ge(e)?this:e}},{key:"sqrt",value:function(){if(this.isZero())return e.valueOf(0);if(this.isNegative())return e.NaN;var t=1/Math.sqrt(this.hi),n=this.hi*t,r=e.valueOf(n),i=this.subtract(r.sqr()),a=i.hi*(.5*t);return r.add(a)}},{key:"selfAdd",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.selfAdd(i.hi,i.lo)}if("number"==typeof n[0]){var i=n[0],a=null,s=null,o=null,u=null,l=null,c=null;return o=this.hi+i,l=o-this.hi,u=o-l,u=i-l+(this.hi-u),c=u+this.lo,a=o+c,s=c+(o-a),this.hi=a+s,this.lo=s+(a-this.hi),this}}else if(2===n.length){var h=n[0],g=n[1],a=null,s=null,f=null,y=null,o=null,u=null,l=null,c=null;o=this.hi+h,f=this.lo+g,l=o-this.hi,c=f-this.lo,u=o-l,y=f-c,u=h-l+(this.hi-u),y=g-c+(this.lo-y),l=u+f,a=o+l,s=l+(o-a),l=y+s;var d=a+l,v=l+(a-d);return this.hi=d,this.lo=v,this}}},{key:"selfMultiply",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.selfMultiply(i.hi,i.lo)}if("number"==typeof n[0]){var i=n[0];return this.selfMultiply(i,0)}}else if(2===n.length){var a=n[0],s=n[1],o=null,u=null,l=null,c=null,h=null,g=null;h=e.SPLIT*this.hi,o=h-this.hi,g=e.SPLIT*a,o=h-o,u=this.hi-o,l=g-a,h=this.hi*a,l=g-l,c=a-l,g=o*l-h+o*c+u*l+u*c+(this.hi*s+this.lo*a);var f=h+g;o=h-f;var y=g+o;return this.hi=f,this.lo=y,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return e.NaN;var t=Math.floor(this.hi),n=0;return t===this.hi&&(n=Math.floor(this.lo)),new e(t,n)}},{key:"negate",value:function(){return this.isNaN()?this:new e(-this.hi,-this.lo)}},{key:"clone",value:function(){try{return _get(Object.getPrototypeOf(e.prototype),"clone",this).call(this)}catch(e){if(e instanceof CloneNotSupportedException)return null;throw e}finally{}}},{key:"multiply",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return i.isNaN()?e.createNaN():e.copy(this).selfMultiply(i)}if("number"==typeof n[0]){var i=n[0];return Double.isNaN(i)?e.createNaN():e.copy(this).selfMultiply(i,0)}}}},{key:"isNaN",value:function(){return Double.isNaN(this.hi)}},{key:"intValue",value:function(){return Math.trunc(this.hi)}},{key:"toString",value:function(){var t=e.magnitude(this.hi);return t>=-3&&20>=t?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1),r=this.extractSignificantDigits(!0,n),i=n[0]+1,a=r;if("."===r.charAt(0))a="0"+r;else if(0>i)a="0."+e.stringOfChar("0",-i)+r;else if(-1===r.indexOf(".")){var s=i-r.length,o=e.stringOfChar("0",s);a=r+o+".0"}return this.isNegative()?"-"+a:a}},{key:"reciprocal",value:function(){var t=null,n=null,r=null,i=null,a=null,s=null,o=null,u=null;a=1/this.hi,s=e.SPLIT*a,t=s-a,u=e.SPLIT*this.hi,t=s-t,n=a-t,r=u-this.hi,o=a*this.hi,r=u-r,i=this.hi-r,u=t*r-o+t*i+n*r+n*i,s=(1-o-u-a*this.lo)/this.hi;var l=a+s,c=a-l+s;return new e(l,c)}},{key:"toSciNotation",value:function(){if(this.isZero())return e.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1),r=this.extractSignificantDigits(!1,n),i=e.SCI_NOT_EXPONENT_CHAR+n[0];if("0"===r.charAt(0))throw new IllegalStateException("Found leading zero: "+r);var a="";r.length>1&&(a=r.substring(1));var s=r.charAt(0)+"."+a;return this.isNegative()?"-"+s+i:s+i}},{key:"abs",value:function(){return this.isNaN()?e.NaN:this.isNegative()?this.negate():new e(this)}},{key:"isPositive",value:function(){return this.hi>0||0===this.hi&&this.lo>0}},{key:"lt",value:function(e){return this.hi<e.hi||this.hi===e.hi&&this.lo<e.lo}},{key:"add",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return e.copy(this).selfAdd(i)}if("number"==typeof n[0]){var i=n[0];return e.copy(this).selfAdd(i)}}}},{key:"init",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if("number"==typeof n[0]){var i=n[0];this.hi=i,this.lo=0}else if(n[0]instanceof e){var a=n[0];this.hi=a.hi,this.lo=a.lo}}else if(2===n.length){var s=n[0],o=n[1];this.hi=s,this.lo=o}}},{key:"gt",value:function(e){return this.hi>e.hi||this.hi===e.hi&&this.lo>e.lo}},{key:"isNegative",value:function(){return this.hi<0||0===this.hi&&this.lo<0}},{key:"trunc",value:function(){return this.isNaN()?e.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Serializable,Comparable,Clonable]}}],[{key:"sqr",value:function(t){return e.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if("string"==typeof n[0]){var i=n[0];return e.parse(i)}if("number"==typeof n[0]){var a=n[0];return new e(a)}}}},{key:"sqrt",value:function(t){return e.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var n=0,r=t.length;Character.isWhitespace(t.charAt(n));)n++;var i=!1;if(r>n){var a=t.charAt(n);("-"===a||"+"===a)&&(n++,"-"===a&&(i=!0))}for(var s=new e,o=0,u=0,l=0;;){if(n>=r)break;var c=t.charAt(n);if(n++,Character.isDigit(c)){var h=c-"0";s.selfMultiply(e.TEN),s.selfAdd(h),o++}else{if("."!==c){if("e"===c||"E"===c){var g=t.substring(n);try{l=Integer.parseInt(g)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+g+" in string "+t):e}finally{}break}throw new NumberFormatException("Unexpected character '"+c+"' at position "+n+" in string "+t)}u=o}}var f=s,y=o-u-l;if(0===y)f=s;else if(y>0){var d=e.TEN.pow(y);f=s.divide(d)}else if(0>y){var d=e.TEN.pow(-y);f=s.multiply(d)}return i?f.negate():f}},{key:"createNaN",value:function(){return new e(Double.NaN,Double.NaN)}},{key:"copy",value:function(t){return new e(t)}},{key:"magnitude",value:function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),r=Math.trunc(Math.floor(n)),i=Math.pow(10,r);return t>=10*i&&(r+=1),r}},{key:"stringOfChar",value:function(e,t){for(var n=new StringBuffer,r=0;t>r;r++)n.append(e);return n.toString()}}]),e}();DD.PI=new DD(3.141592653589793,1.2246467991473532e-16),DD.TWO_PI=new DD(6.283185307179586,2.4492935982947064e-16),DD.PI_2=new DD(1.5707963267948966,6.123233995736766e-17),DD.E=new DD(2.718281828459045,1.4456468917292502e-16),DD.NaN=new DD(Double.NaN,Double.NaN),DD.EPS=1.23259516440783e-32,DD.SPLIT=134217729,DD.MAX_PRINT_DIGITS=32,DD.TEN=DD.valueOf(10),DD.ONE=DD.valueOf(1),DD.SCI_NOT_EXPONENT_CHAR="E",DD.SCI_NOT_ZERO="0.0E0";var CGAlgorithmsDD=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"orientationIndex",value:function(t,n,r){var i=e.orientationIndexFilter(t,n,r);if(1>=i)return i;var a=DD.valueOf(n.x).selfAdd(-t.x),s=DD.valueOf(n.y).selfAdd(-t.y),o=DD.valueOf(r.x).selfAdd(-n.x),u=DD.valueOf(r.y).selfAdd(-n.y);return a.selfMultiply(u).selfSubtract(s.selfMultiply(o)).signum()}},{key:"signOfDet2x2",value:function(e,t,n,r){var i=e.multiply(r).selfSubtract(t.multiply(n));return i.signum()}},{key:"intersection",value:function(e,t,n,r){var i=DD.valueOf(r.y).selfSubtract(n.y).selfMultiply(DD.valueOf(t.x).selfSubtract(e.x)),a=DD.valueOf(r.x).selfSubtract(n.x).selfMultiply(DD.valueOf(t.y).selfSubtract(e.y)),s=i.subtract(a),o=DD.valueOf(r.x).selfSubtract(n.x).selfMultiply(DD.valueOf(e.y).selfSubtract(n.y)),u=DD.valueOf(r.y).selfSubtract(n.y).selfMultiply(DD.valueOf(e.x).selfSubtract(n.x)),l=o.subtract(u),c=l.selfDivide(s).doubleValue(),h=DD.valueOf(e.x).selfAdd(DD.valueOf(t.x).selfSubtract(e.x).selfMultiply(c)).doubleValue(),g=DD.valueOf(t.x).selfSubtract(e.x).selfMultiply(DD.valueOf(e.y).selfSubtract(n.y)),f=DD.valueOf(t.y).selfSubtract(e.y).selfMultiply(DD.valueOf(e.x).selfSubtract(n.x)),y=g.subtract(f),d=y.selfDivide(s).doubleValue(),v=DD.valueOf(n.y).selfAdd(DD.valueOf(r.y).selfSubtract(n.y).selfMultiply(d)).doubleValue();return new Coordinate(h,v)}},{key:"orientationIndexFilter",value:function(t,n,r){var i=null,a=(t.x-r.x)*(n.y-r.y),s=(t.y-r.y)*(n.x-r.x),o=a-s;if(a>0){if(0>=s)return e.signum(o);i=a+s}else{if(!(0>a))return e.signum(o);if(s>=0)return e.signum(o);i=-a-s}var u=e.DP_SAFE_EPSILON*i;return o>=u||-o>=u?e.signum(o):2}},{key:"signum",value:function(e){return e>0?1:0>e?-1:0}}]),e}();CGAlgorithmsDD.DP_SAFE_EPSILON=1e-15;var Exception=function e(){_classCallCheck(this,e)},NotRepresentableException=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(0===r.length)var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,"Projective point not representable on the Cartesian plane."));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Exception),System=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"arraycopy",value:function(e,t,n,r,i){for(var a=0,s=t;t+i>s;s++)n[r+a]=e[s],a++}},{key:"getProperty",value:function(e){return{"line.separator":"\n"}[e]}}]),e}(),HCoordinate=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.x=null,this.y=null,this.w=null;var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(0===r.length)t.x=0,t.y=0,t.w=1;else if(1===r.length){var a=r[0];t.x=a.x,t.y=a.y,t.w=1}else if(2===r.length){if("number"==typeof r[0]&&"number"==typeof r[1]){var s=r[0],o=r[1];t.x=s,t.y=o,t.w=1}else if(r[0]instanceof e&&r[1]instanceof e){var u=r[0],l=r[1];t.x=u.y*l.w-l.y*u.w,t.y=l.x*u.w-u.x*l.w,t.w=u.x*l.y-l.x*u.y}else if(r[0]instanceof Coordinate&&r[1]instanceof Coordinate){var u=r[0],l=r[1];t.x=u.y-l.y,t.y=l.x-u.x,t.w=u.x*l.y-l.x*u.y}}else if(3===r.length){var s=r[0],o=r[1],c=r[2];t.x=s,t.y=o,t.w=c}else if(4===r.length){var u=r[0],l=r[1],h=r[2],g=r[3],f=u.y-l.y,y=l.x-u.x,d=u.x*l.y-l.x*u.y,v=h.y-g.y,m=g.x-h.x,p=h.x*g.y-g.x*h.y;t.x=y*p-m*d,t.y=v*d-f*p,t.w=f*m-v*y}};return a.apply(this,r)}return _createClass(e,[{key:"getY",value:function(){var e=this.y/this.w;if(Double.isNaN(e)||Double.isInfinite(e))throw new NotRepresentableException;return e}},{key:"getX",value:function(){var e=this.x/this.w;if(Double.isNaN(e)||Double.isInfinite(e))throw new NotRepresentableException;return e}},{key:"getCoordinate",value:function(){var e=new Coordinate;return e.x=this.getX(),e.y=this.getY(),e}},{key:"getClass",value:function(){
return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"intersection",value:function(e,t,n,r){var i=e.y-t.y,a=t.x-e.x,s=e.x*t.y-t.x*e.y,o=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=a*l-u*s,h=o*s-i*l,g=i*u-o*a,f=c/g,y=h/g;if(Double.isNaN(f)||Double.isInfinite(f)||Double.isNaN(y)||Double.isInfinite(y))throw new NotRepresentableException;return new Coordinate(f,y)}}]),e}(),Envelope=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.minx=null,this.maxx=null,this.miny=null,this.maxy=null;var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(0===r.length)t.init();else if(1===r.length){if(r[0]instanceof Coordinate){var a=r[0];t.init(a.x,a.x,a.y,a.y)}else if(r[0]instanceof e){var s=r[0];t.init(s)}}else if(2===r.length){var o=r[0],u=r[1];t.init(o.x,u.x,o.y,u.y)}else if(4===r.length){var l=r[0],c=r[1],h=r[2],g=r[3];t.init(l,c,h,g)}};return a.apply(this,r)}return _createClass(e,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.isNull()?n.isNull():this.maxx===n.getMaxX()&&this.maxy===n.getMaxY()&&this.minx===n.getMinX()&&this.miny===n.getMinY()}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new e;var n=this.minx>t.minx?this.minx:t.minx,r=this.miny>t.miny?this.miny:t.miny,i=this.maxx<t.maxx?this.maxx:t.maxx,a=this.maxy<t.maxy?this.maxy:t.maxy;return new e(n,i,r,a)}},{key:"isNull",value:function(){return this.maxx<this.minx}},{key:"getMaxX",value:function(){return this.maxx}},{key:"covers",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof Coordinate){var i=n[0];return this.covers(i.x,i.y)}if(n[0]instanceof e){var a=n[0];return this.isNull()||a.isNull()?!1:a.getMinX()>=this.minx&&a.getMaxX()<=this.maxx&&a.getMinY()>=this.miny&&a.getMaxY()<=this.maxy}}else if(2===n.length){var s=n[0],o=n[1];return this.isNull()?!1:s>=this.minx&&s<=this.maxx&&o>=this.miny&&o<=this.maxy}}},{key:"intersects",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.isNull()||i.isNull()?!1:!(i.minx>this.maxx||i.maxx<this.minx||i.miny>this.maxy||i.maxy<this.miny)}if(n[0]instanceof Coordinate){var a=n[0];return this.intersects(a.x,a.y)}}else if(2===n.length){var s=n[0],o=n[1];return this.isNull()?!1:!(s>this.maxx||s<this.minx||o>this.maxy||o<this.miny)}}},{key:"getMinY",value:function(){return this.miny}},{key:"getMinX",value:function(){return this.minx}},{key:"expandToInclude",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof Coordinate){var i=n[0];this.expandToInclude(i.x,i.y)}else if(n[0]instanceof e){var a=n[0];if(a.isNull())return null;this.isNull()?(this.minx=a.getMinX(),this.maxx=a.getMaxX(),this.miny=a.getMinY(),this.maxy=a.getMaxY()):(a.minx<this.minx&&(this.minx=a.minx),a.maxx>this.maxx&&(this.maxx=a.maxx),a.miny<this.miny&&(this.miny=a.miny),a.maxy>this.maxy&&(this.maxy=a.maxy))}}else if(2===n.length){var s=n[0],o=n[1];this.isNull()?(this.minx=s,this.maxx=s,this.miny=o,this.maxy=o):(s<this.minx&&(this.minx=s),s>this.maxx&&(this.maxx=s),o<this.miny&&(this.miny=o),o>this.maxy&&(this.maxy=o))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return t>e?e:t}},{key:"getWidth",value:function(){return this.isNull()?0:this.maxx-this.minx}},{key:"compareTo",value:function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this.minx<t.minx?-1:this.minx>t.minx?1:this.miny<t.miny?-1:this.miny>t.miny?1:this.maxx<t.maxx?-1:this.maxx>t.maxx?1:this.maxy<t.maxy?-1:this.maxy>t.maxy?1:0}},{key:"translate",value:function(e,t){return this.isNull()?null:void this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)}},{key:"toString",value:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"}},{key:"setToNull",value:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1}},{key:"getHeight",value:function(){return this.isNull()?0:this.maxy-this.miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t}},{key:"expandBy",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];this.expandBy(r,r)}else if(2===t.length){var i=t[0],a=t[1];if(this.isNull())return null;this.minx-=i,this.maxx+=i,this.miny-=a,this.maxy+=a,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}}},{key:"contains",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.covers(i)}if(n[0]instanceof Coordinate){var a=n[0];return this.covers(a)}}else if(2===n.length){var s=n[0],o=n[1];return this.covers(s,o)}}},{key:"centre",value:function(){return this.isNull()?null:new Coordinate((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(0===n.length)this.setToNull();else if(1===n.length){if(n[0]instanceof Coordinate){var i=n[0];this.init(i.x,i.x,i.y,i.y)}else if(n[0]instanceof e){var a=n[0];this.minx=a.minx,this.maxx=a.maxx,this.miny=a.miny,this.maxy=a.maxy}}else if(2===n.length){var s=n[0],o=n[1];this.init(s.x,o.x,s.y,o.y)}else if(4===n.length){var u=n[0],l=n[1],c=n[2],h=n[3];l>u?(this.minx=u,this.maxx=l):(this.minx=l,this.maxx=u),h>c?(this.miny=c,this.maxy=h):(this.miny=h,this.maxy=c)}}},{key:"getMaxY",value:function(){return this.maxy}},{key:"distance",value:function(e){if(this.intersects(e))return 0;var t=0;this.maxx<e.minx?t=e.minx-this.maxx:this.minx>e.maxx&&(t=this.minx-e.maxx);var n=0;return this.maxy<e.miny?n=e.miny-this.maxy:this.miny>e.maxy&&(n=this.miny-e.maxy),0===t?n:0===n?t:Math.sqrt(t*t+n*n)}},{key:"hashCode",value:function(){var e=17;return e=37*e+Coordinate.hashCode(this.minx),e=37*e+Coordinate.hashCode(this.maxx),e=37*e+Coordinate.hashCode(this.miny),e=37*e+Coordinate.hashCode(this.maxy)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable,Serializable]}}],[{key:"intersects",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(3===t.length){var r=t[0],i=t[1],a=t[2];return a.x>=(r.x<i.x?r.x:i.x)&&a.x<=(r.x>i.x?r.x:i.x)&&a.y>=(r.y<i.y?r.y:i.y)&&a.y<=(r.y>i.y?r.y:i.y)?!0:!1}if(4===t.length){var r=t[0],i=t[1],s=t[2],o=t[3],u=Math.min(s.x,o.x),l=Math.max(s.x,o.x),c=Math.min(r.x,i.x),h=Math.max(r.x,i.x);return c>l?!1:u>h?!1:(u=Math.min(s.y,o.y),l=Math.max(s.y,o.y),c=Math.min(r.y,i.y),h=Math.max(r.y,i.y),c>l?!1:u>h?!1:!0)}}}]),e}();Envelope.serialVersionUID=0x51845cd552189800;var regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},WKTParser=function(){function e(t){_classCallCheck(this,e),this.geometryFactory=t||new GeometryFactory}return _createClass(e,[{key:"read",value:function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var i=regExes.typeStr.exec(e);if(-1!==e.search("EMPTY")&&(i=regExes.emptyTypeStr.exec(e),i[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],parse$1[n]&&(t=parse$1[n].apply(this,[r]))),void 0===t)throw new Error("Could not parse WKT "+e);return t}},{key:"write",value:function(e){return this.extractGeometry(e)}},{key:"extractGeometry",value:function(e){var t=e.getGeometryType().toLowerCase();if(!extract$1[t])return null;var n,r=t.toUpperCase();return n=e.isEmpty()?r+" EMPTY":r+"("+extract$1[t].apply(this,[e])+")"}}]),e}(),extract$1={coordinate:function(e){return e.x+" "+e.y},point:function(e){return extract$1.coordinate.call(this,e.coordinates.coordinates[0])},multipoint:function(e){for(var t=[],n=0,r=e.geometries.length;r>n;++n)t.push("("+extract$1.point.apply(this,[e.geometries[n]])+")");return t.join(",")},linestring:function(e){for(var t=[],n=0,r=e.points.coordinates.length;r>n;++n)t.push(extract$1.coordinate.apply(this,[e.points.coordinates[n]]));return t.join(",")},linearring:function(e){for(var t=[],n=0,r=e.points.coordinates.length;r>n;++n)t.push(extract$1.coordinate.apply(this,[e.points.coordinates[n]]));return t.join(",")},multilinestring:function(e){for(var t=[],n=0,r=e.geometries.length;r>n;++n)t.push("("+extract$1.linestring.apply(this,[e.geometries[n]])+")");return t.join(",")},polygon:function(e){var t=[];t.push("("+extract$1.linestring.apply(this,[e.shell])+")");for(var n=0,r=e.holes.length;r>n;++n)t.push("("+extract$1.linestring.apply(this,[e.holes[n]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],n=0,r=e.geometries.length;r>n;++n)t.push("("+extract$1.polygon.apply(this,[e.geometries[n]])+")");return t.join(",")},geometrycollection:function(e){for(var t=[],n=0,r=e.geometries.length;r>n;++n)t.push(this.extractGeometry(e.geometries[n]));return t.join(",")}},parse$1={point:function(e){if(void 0===e)return this.geometryFactory.createPoint();var t=e.trim().split(regExes.spaces);return this.geometryFactory.createPoint(new Coordinate(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){if(void 0===e)return this.geometryFactory.createMultiPoint();for(var t,n=e.trim().split(","),r=[],i=0,a=n.length;a>i;++i)t=n[i].replace(regExes.trimParens,"$1"),r.push(parse$1.point.apply(this,[t]));return this.geometryFactory.createMultiPoint(r)},linestring:function(e){if(void 0===e)return this.geometryFactory.createLineString();for(var t,n=e.trim().split(","),r=[],i=0,a=n.length;a>i;++i)t=n[i].trim().split(regExes.spaces),r.push(new Coordinate(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLineString(r)},linearring:function(e){if(void 0===e)return this.geometryFactory.createLinearRing();for(var t,n=e.trim().split(","),r=[],i=0,a=n.length;a>i;++i)t=n[i].trim().split(regExes.spaces),r.push(new Coordinate(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(e){if(void 0===e)return this.geometryFactory.createMultiLineString();for(var t,n=e.trim().split(regExes.parenComma),r=[],i=0,a=n.length;a>i;++i)t=n[i].replace(regExes.trimParens,"$1"),r.push(parse$1.linestring.apply(this,[t]));return this.geometryFactory.createMultiLineString(r)},polygon:function(e){if(void 0===e)return this.geometryFactory.createPolygon();for(var t,n,r,i,a=e.trim().split(regExes.parenComma),s=[],o=0,u=a.length;u>o;++o)t=a[o].replace(regExes.trimParens,"$1"),n=parse$1.linestring.apply(this,[t]),r=this.geometryFactory.createLinearRing(n.points),0===o?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(e){if(void 0===e)return this.geometryFactory.createMultiPolygon();for(var t,n=e.trim().split(regExes.doubleParenComma),r=[],i=0,a=n.length;a>i;++i)t=n[i].replace(regExes.trimParens,"$1"),r.push(parse$1.polygon.apply(this,[t]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(e){if(void 0===e)return this.geometryFactory.createGeometryCollection();e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var t=e.trim().split("|"),n=[],r=0,i=t.length;i>r;++r)n.push(this.read(t[r]));return this.geometryFactory.createGeometryCollection(n)}},WKTWriter=function(){function e(t){_classCallCheck(this,e),this.parser=new WKTParser(t)}return _createClass(e,[{key:"write",value:function(e){return this.parser.write(e)}},{key:"toLineString",value:function(e,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"}}]),e}(),LineIntersector=function(){function e(){_classCallCheck(this,e),this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length&&(this.intPt[0]=new Coordinate,this.intPt[1]=new Coordinate,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0)}return _createClass(e,[{key:"getIndexAlongSegment",value:function(e,t){return this.computeIntLineIndex(),this.intLineIndex[e][t]}},{key:"getTopologySummary",value:function(){var e=new StringBuffer;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()}},{key:"computeIntersection",value:function(e,t,n,r){this.inputLines[0][0]=e,this.inputLines[0][1]=t,this.inputLines[1][0]=n,this.inputLines[1][1]=r,this.result=this.computeIntersect(e,t,n,r)}},{key:"getIntersectionNum",value:function(){return this.result}},{key:"computeIntLineIndex",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)null===this.intLineIndex&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===t.length){var r=t[0],i=this.getEdgeDistance(r,0),a=this.getEdgeDistance(r,1);i>a?(this.intLineIndex[r][0]=0,this.intLineIndex[r][1]=1):(this.intLineIndex[r][0]=1,this.intLineIndex[r][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(e){this.precisionModel=e}},{key:"isInteriorIntersection",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return this.isInteriorIntersection(0)?!0:this.isInteriorIntersection(1)?!0:!1;if(1===t.length){for(var r=t[0],i=0;i<this.result;i++)if(!this.intPt[i].equals2D(this.inputLines[r][0])&&!this.intPt[i].equals2D(this.inputLines[r][1]))return!0;return!1}}},{key:"getIntersection",value:function(e){return this.intPt[e]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this.result!==e.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,n){var r=e.computeEdgeDistance(this.intPt[n],this.inputLines[t][0],this.inputLines[t][1]);return r}},{key:"isCollinear",value:function(){return this.result===e.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return WKTWriter.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+WKTWriter.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(e,t){return this.inputLines[e][t]}},{key:"isIntersection",value:function(e){for(var t=0;t<this.result;t++)if(this.intPt[t].equals2D(e))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(e,t){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[e][t]]}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeEdgeDistance",value:function(e,t,n){var r=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y),a=-1;if(e.equals(t))a=0;else if(e.equals(n))a=r>i?r:i;else{var s=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y);a=r>i?s:o,0!==a||e.equals(t)||(a=Math.max(s,o))}return Assert.isTrue(!(0===a&&!e.equals(t)),"Bad distance calculation"),a}},{key:"nonRobustComputeEdgeDistance",value:function(e,t,n){var r=e.x-t.x,i=e.y-t.y,a=Math.sqrt(r*r+i*i);return Assert.isTrue(!(0===a&&!e.equals(t)),"Invalid distance calculation"),a}}]),e}();LineIntersector.DONT_INTERSECT=0,LineIntersector.DO_INTERSECT=1,LineIntersector.COLLINEAR=2,LineIntersector.NO_INTERSECTION=0,LineIntersector.POINT_INTERSECTION=1,LineIntersector.COLLINEAR_INTERSECTION=2;var RobustLineIntersector=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length,e}return _inherits(t,e),_createClass(t,[{key:"isInSegmentEnvelopes",value:function(e){var t=new Envelope(this.inputLines[0][0],this.inputLines[0][1]),n=new Envelope(this.inputLines[1][0],this.inputLines[1][1]);return t.contains(e)&&n.contains(e)}},{key:"computeIntersection",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(3!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"computeIntersection",this)).call.apply(e,[this].concat(r));var a=r[0],s=r[1],o=r[2];return this._isProper=!1,Envelope.intersects(s,o,a)&&0===CGAlgorithms.orientationIndex(s,o,a)&&0===CGAlgorithms.orientationIndex(o,s,a)?(this._isProper=!0,(a.equals(s)||a.equals(o))&&(this._isProper=!1),this.result=LineIntersector.POINT_INTERSECTION,null):void(this.result=LineIntersector.NO_INTERSECTION)}},{key:"normalizeToMinimum",value:function(e,t,n,r,i){i.x=this.smallestInAbsValue(e.x,t.x,n.x,r.x),i.y=this.smallestInAbsValue(e.y,t.y,n.y,r.y),e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y}},{key:"safeHCoordinateIntersection",value:function(e,n,r,i){var a=null;try{a=HCoordinate.intersection(e,n,r,i)}catch(s){if(!(s instanceof NotRepresentableException))throw s;a=t.nearestEndpoint(e,n,r,i)}finally{}return a}},{key:"intersection",value:function(e,n,r,i){var a=this.intersectionWithNormalization(e,n,r,i);return this.isInSegmentEnvelopes(a)||(a=new Coordinate(t.nearestEndpoint(e,n,r,i))),null!==this.precisionModel&&this.precisionModel.makePrecise(a),a}},{key:"smallestInAbsValue",value:function(e,t,n,r){var i=e,a=Math.abs(i);return Math.abs(t)<a&&(i=t,a=Math.abs(t)),Math.abs(n)<a&&(i=n,a=Math.abs(n)),Math.abs(r)<a&&(i=r),i}},{key:"checkDD",value:function(e,t,n,r,i){var a=CGAlgorithmsDD.intersection(e,t,n,r),s=this.isInSegmentEnvelopes(a);System.out.println("DD in env = "+s+"  --------------------- "+a),i.distance(a)>1e-4&&System.out.println("Distance = "+i.distance(a))}},{key:"intersectionWithNormalization",value:function(e,t,n,r){var i=new Coordinate(e),a=new Coordinate(t),s=new Coordinate(n),o=new Coordinate(r),u=new Coordinate;this.normalizeToEnvCentre(i,a,s,o,u);var l=this.safeHCoordinateIntersection(i,a,s,o);return l.x+=u.x,l.y+=u.y,l}},{key:"computeCollinearIntersection",value:function(e,t,n,r){var i=Envelope.intersects(e,t,n),a=Envelope.intersects(e,t,r),s=Envelope.intersects(n,r,e),o=Envelope.intersects(n,r,t);return i&&a?(this.intPt[0]=n,this.intPt[1]=r,LineIntersector.COLLINEAR_INTERSECTION):s&&o?(this.intPt[0]=e,this.intPt[1]=t,LineIntersector.COLLINEAR_INTERSECTION):i&&s?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||a||o?LineIntersector.COLLINEAR_INTERSECTION:LineIntersector.POINT_INTERSECTION):i&&o?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||a||s?LineIntersector.COLLINEAR_INTERSECTION:LineIntersector.POINT_INTERSECTION):a&&s?(this.intPt[0]=r,this.intPt[1]=e,!r.equals(e)||i||o?LineIntersector.COLLINEAR_INTERSECTION:LineIntersector.POINT_INTERSECTION):a&&o?(this.intPt[0]=r,this.intPt[1]=t,!r.equals(t)||i||s?LineIntersector.COLLINEAR_INTERSECTION:LineIntersector.POINT_INTERSECTION):LineIntersector.NO_INTERSECTION}},{key:"normalizeToEnvCentre",value:function(e,t,n,r,i){var a=e.x<t.x?e.x:t.x,s=e.y<t.y?e.y:t.y,o=e.x>t.x?e.x:t.x,u=e.y>t.y?e.y:t.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,g=n.y>r.y?n.y:r.y,f=a>l?a:l,y=h>o?o:h,d=s>c?s:c,v=g>u?u:g,m=(f+y)/2,p=(d+v)/2;i.x=m,i.y=p,e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y}},{key:"computeIntersect",value:function(e,t,n,r){if(this._isProper=!1,!Envelope.intersects(e,t,n,r))return LineIntersector.NO_INTERSECTION;var i=CGAlgorithms.orientationIndex(e,t,n),a=CGAlgorithms.orientationIndex(e,t,r);if(i>0&&a>0||0>i&&0>a)return LineIntersector.NO_INTERSECTION;var s=CGAlgorithms.orientationIndex(n,r,e),o=CGAlgorithms.orientationIndex(n,r,t);if(s>0&&o>0||0>s&&0>o)return LineIntersector.NO_INTERSECTION;var u=0===i&&0===a&&0===s&&0===o;return u?this.computeCollinearIntersection(e,t,n,r):(0===i||0===a||0===s||0===o?(this._isProper=!1,e.equals2D(n)||e.equals2D(r)?this.intPt[0]=e:t.equals2D(n)||t.equals2D(r)?this.intPt[0]=t:0===i?this.intPt[0]=new Coordinate(n):0===a?this.intPt[0]=new Coordinate(r):0===s?this.intPt[0]=new Coordinate(e):0===o&&(this.intPt[0]=new Coordinate(t))):(this._isProper=!0,this.intPt[0]=this.intersection(e,t,n,r)),LineIntersector.POINT_INTERSECTION)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"nearestEndpoint",value:function(e,t,n,r){var i=e,a=CGAlgorithms.distancePointLine(e,n,r),s=CGAlgorithms.distancePointLine(t,n,r);return a>s&&(a=s,i=t),s=CGAlgorithms.distancePointLine(n,e,t),a>s&&(a=s,i=n),s=CGAlgorithms.distancePointLine(r,e,t),a>s&&(a=s,i=r),i}}]),t}(LineIntersector),RobustDeterminant=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"orientationIndex",value:function(t,n,r){var i=n.x-t.x,a=n.y-t.y,s=r.x-n.x,o=r.y-n.y;return e.signOfDet2x2(i,a,s,o)}},{key:"signOfDet2x2",value:function(e,t,n,r){var i=null,a=null,s=null,o=0;if(i=1,0===e||0===r)return 0===t||0===n?0:t>0?n>0?-i:i:n>0?i:-i;if(0===t||0===n)return r>0?e>0?i:-i:e>0?-i:i;if(t>0?r>0?r>=t||(i=-i,a=e,e=n,n=a,a=t,t=r,r=a):-r>=t?(i=-i,n=-n,r=-r):(a=e,e=-n,n=a,a=t,t=-r,r=a):r>0?r>=-t?(i=-i,e=-e,t=-t):(a=-e,e=n,n=a,a=-t,t=r,r=a):t>=r?(e=-e,t=-t,n=-n,r=-r):(i=-i,a=-e,e=-n,n=a,a=-t,t=-r,r=a),e>0){if(!(n>0))return i;if(!(n>=e))return i}else{if(n>0)return-i;if(!(e>=n))return-i;i=-i,e=-e,n=-n}for(;;){if(o+=1,s=Math.floor(n/e),n-=s*e,r-=s*t,0>r)return-i;if(r>t)return i;if(e>n+n){if(r+r>t)return i}else{if(t>r+r)return-i;n=e-n,r=t-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if(s=Math.floor(e/n),e-=s*n,t-=s*r,0>t)return i;if(t>r)return-i;if(n>e+e){if(t+t>r)return-i}else{if(r>t+t)return i;e=n-e,t=r-t,i=-i}if(0===t)return 0===e?0:i;if(0===e)return-i}}}]),e}(),RayCrossingCounter=function(){function e(){_classCallCheck(this,e),this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.p=i}}return _createClass(e,[{key:"countSegment",value:function(e,t){if(e.x<this.p.x&&t.x<this.p.x)return null;if(this.p.x===t.x&&this.p.y===t.y)return this.isPointOnSegment=!0,null;if(e.y===this.p.y&&t.y===this.p.y){var n=e.x,r=t.x;return n>r&&(n=t.x,r=e.x),this.p.x>=n&&this.p.x<=r&&(this.isPointOnSegment=!0),null}if(e.y>this.p.y&&t.y<=this.p.y||t.y>this.p.y&&e.y<=this.p.y){var i=e.x-this.p.x,a=e.y-this.p.y,s=t.x-this.p.x,o=t.y-this.p.y,u=RobustDeterminant.signOfDet2x2(i,a,s,o);if(0===u)return this.isPointOnSegment=!0,null;a>o&&(u=-u),u>0&&this.crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==Location.EXTERIOR}},{key:"getLocation",value:function(){return this.isPointOnSegment?Location.BOUNDARY:this.crossingCount%2===1?Location.INTERIOR:Location.EXTERIOR}},{key:"isOnSegment",value:function(){return this.isPointOnSegment}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"locatePointInRing",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){if(n[0]instanceof Coordinate&&n[1].interfaces_&&n[1].interfaces_.indexOf(CoordinateSequence)>-1){for(var i=n[0],a=n[1],s=new e(i),o=new Coordinate,u=new Coordinate,l=1;l<a.size();l++)if(a.getCoordinate(l,o),a.getCoordinate(l-1,u),s.countSegment(o,u),s.isOnSegment())return s.getLocation();return s.getLocation()}if(n[0]instanceof Coordinate&&n[1]instanceof Array){for(var i=n[0],a=n[1],s=new e(i),l=1;l<a.length;l++){var o=a[l],u=a[l-1];if(s.countSegment(o,u),s.isOnSegment())return s.getLocation()}return s.getLocation()}}}}]),e}(),CGAlgorithms=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"orientationIndex",value:function(e,t,n){return CGAlgorithmsDD.orientationIndex(e,t,n)}},{key:"signedArea",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(t[0]instanceof Array){var r=t[0];if(r.length<3)return 0;for(var i=0,a=r[0].x,s=1;s<r.length-1;s++){var o=r[s].x-a,u=r[s+1].y,l=r[s-1].y;i+=o*(l-u)}return i/2}if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateSequence)>-1){var r=t[0],c=r.size();if(3>c)return 0;var h=new Coordinate,g=new Coordinate,f=new Coordinate;r.getCoordinate(0,g),r.getCoordinate(1,f);var a=g.x;f.x-=a;for(var i=0,s=1;c-1>s;s++)h.y=g.y,g.x=f.x,g.y=f.y,r.getCoordinate(s+1,f),f.x-=a,i+=g.x*(h.y-f.y);return i/2}}}},{key:"distanceLineLine",value:function(t,n,r,i){if(t.equals(n))return e.distancePointLine(t,r,i);if(r.equals(i))return e.distancePointLine(i,t,n);var a=!1;if(Envelope.intersects(t,n,r,i)){var s=(n.x-t.x)*(i.y-r.y)-(n.y-t.y)*(i.x-r.x);if(0===s)a=!0;else{var o=(t.y-r.y)*(i.x-r.x)-(t.x-r.x)*(i.y-r.y),u=(t.y-r.y)*(n.x-t.x)-(t.x-r.x)*(n.y-t.y),l=u/s,c=o/s;(0>c||c>1||0>l||l>1)&&(a=!0)}}else a=!0;return a?MathUtil.min(e.distancePointLine(t,r,i),e.distancePointLine(n,r,i),e.distancePointLine(r,t,n),e.distancePointLine(i,t,n)):0}},{key:"isPointInRing",value:function(t,n){return e.locatePointInRing(t,n)!==Location.EXTERIOR}},{key:"isCCW",value:function t(n){var r=n.length-1;if(3>r)throw new IllegalArgumentException$1("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=n[0],a=0,s=1;r>=s;s++){var o=n[s];o.y>i.y&&(i=o,a=s)}var u=a;do u-=1,0>u&&(u=r);while(n[u].equals2D(i)&&u!==a);var l=a;do l=(l+1)%r;while(n[l].equals2D(i)&&l!==a);var c=n[u],h=n[l];if(c.equals2D(i)||h.equals2D(i)||c.equals2D(h))return!1;var g=e.computeOrientation(c,i,h),t=!1;return t=0===g?c.x>h.x:g>0}},{key:"locatePointInRing",value:function(e,t){return RayCrossingCounter.locatePointInRing(e,t)}},{key:"distancePointLinePerpendicular",value:function(e,t,n){var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),i=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(i)*Math.sqrt(r)}},{key:"computeOrientation",value:function(t,n,r){return e.orientationIndex(t,n,r)}},{key:"length",value:function(e){var t=e.size();if(1>=t)return 0;var n=0,r=new Coordinate;e.getCoordinate(0,r);for(var i=r.x,a=r.y,s=1;t>s;s++){e.getCoordinate(s,r);var o=r.x,u=r.y,l=o-i,c=u-a;n+=Math.sqrt(l*l+c*c),i=o,a=u}return n}},{key:"distancePointLine",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1];if(0===a.length)throw new IllegalArgumentException$1("Line array must contain at least one vertex");for(var s=i.distance(a[0]),o=0;o<a.length-1;o++){var u=e.distancePointLine(i,a[o],a[o+1]);s>u&&(s=u)}return s}if(3===n.length){var i=n[0],l=n[1],c=n[2];if(l.x===c.x&&l.y===c.y)return i.distance(l);var h=(c.x-l.x)*(c.x-l.x)+(c.y-l.y)*(c.y-l.y),g=((i.x-l.x)*(c.x-l.x)+(i.y-l.y)*(c.y-l.y))/h;if(0>=g)return i.distance(l);if(g>=1)return i.distance(c);var f=((l.y-i.y)*(c.x-l.x)-(l.x-i.x)*(c.y-l.y))/h;return Math.abs(f)*Math.sqrt(h)}}},{key:"isOnLine",value:function(e,t){for(var n=new RobustLineIntersector,r=1;r<t.length;r++){var i=t[r-1],a=t[r];if(n.computeIntersection(e,i,a),n.hasIntersection())return!0}return!1}}]),e}();CGAlgorithms.CLOCKWISE=-1,CGAlgorithms.RIGHT=CGAlgorithms.CLOCKWISE,CGAlgorithms.COUNTERCLOCKWISE=1,CGAlgorithms.LEFT=CGAlgorithms.COUNTERCLOCKWISE,CGAlgorithms.COLLINEAR=0,CGAlgorithms.STRAIGHT=CGAlgorithms.COLLINEAR;var Geometry=function(){function e(){_classCallCheck(this,e),this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.factory=i,this.SRID=i.getSRID()}}return _createClass(e,[{key:"isGeometryCollection",value:function(){return this.getSortIndex()===e.SORTINDEX_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this.factory}},{key:"getGeometryN",value:function(e){return this}},{key:"getArea",value:function(){return 0}},{key:"union",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return UnaryUnionOp.union(this);if(1===t.length){var r=t[0];if(this.isEmpty()||r.isEmpty()){if(this.isEmpty()&&r.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.UNION,this,r,this.factory);if(this.isEmpty())return r.copy();if(r.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(r),SnapIfNeededOverlayOp.overlayOp(this,r,OverlayOp.UNION)}}},{key:"isValid",value:function(){return IsValidOp.isValid(this)}},{key:"isRectangle",value:function(){return!1}},{key:"equals",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return null===i?!1:this.equalsTopo(i)}if(n[0]instanceof Object){var a=n[0];if(!(a instanceof e))return!1;var s=a;return this.equalsExact(s)}}}},{key:"equalsExact",value:function(e){return this===e||this.equalsExact(e,0)}},{key:"intersection",value:function(e){if(this.isEmpty()||e.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.INTERSECTION,this,e,this.factory);if(this.isGeometryCollection()){var t=e;return GeometryCollectionMapper.map(this,new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"map",value:function(e){return e.intersection(t)}},{key:"interfaces_",get:function(){return[MapOp]}}]),e}()))}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp.overlayOp(this,e,OverlayOp.INTERSECTION)}},{key:"covers",value:function(e){return this.getEnvelopeInternal().covers(e.getEnvelopeInternal())?this.isRectangle()?!0:this.relate(e).isCovers():!1}},{key:"intersects",value:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.isRectangle()?RectangleIntersects.intersects(this,e):e.isRectangle()?RectangleIntersects.intersects(e,this):this.relate(e).isIntersects():!1}},{key:"touches",value:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.relate(e).isTouches(this.getDimension(),e.getDimension()):!1}},{key:"geometryChanged",value:function(){this.apply(e.geometryChangedFilter)}},{key:"within",value:function(e){return e.contains(this)}},{key:"geometryChangedAction",value:function(){this.envelope=null}},{key:"buffer",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return BufferOp.bufferOp(this,r)}if(2===t.length){var r=t[0],i=t[1];return BufferOp.bufferOp(this,r,i)}if(3===t.length){var r=t[0],i=t[1],a=t[2];return BufferOp.bufferOp(this,r,i,a)}}},{key:"equalsNorm",value:function(e){return null===e?!1:this.norm().equalsExact(e.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0],i=r;return this.getSortIndex()!==i.getSortIndex()?this.getSortIndex()-i.getSortIndex():this.isEmpty()&&i.isEmpty()?0:this.isEmpty()?-1:i.isEmpty()?1:this.compareToSameClass(r)}if(2===t.length){var r=t[0],a=t[1],i=r;return this.getSortIndex()!==i.getSortIndex()?this.getSortIndex()-i.getSortIndex():this.isEmpty()&&i.isEmpty()?0:this.isEmpty()?-1:i.isEmpty()?1:this.compareToSameClass(r,a)}}},{key:"convexHull",value:function(){return new ConvexHull(this).getConvexHull()}},{key:"equalsTopo",value:function(e){return this.getEnvelopeInternal().equals(e.getEnvelopeInternal())?this.relate(e).isEquals(this.getDimension(),e.getDimension()):!1}},{key:"coveredBy",value:function(e){return e.covers(this)}},{key:"getUserData",value:function(){return this.userData}},{key:"getSRID",value:function(){return this.SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(this.getSortIndex()===e.SORTINDEX_GEOMETRYCOLLECTION)throw new IllegalArgumentException("This method does not support GeometryCollection arguments");
}},{key:"equal",value:function(e,t,n){return 0===n?e.equals(t):e.distance(t)<=n}},{key:"relate",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(r),RelateOp.relate(this,r)}if(2===t.length){var r=t[0],i=t[1];return this.relate(r).matches(i)}}},{key:"overlaps",value:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.relate(e).isOverlaps(this.getDimension(),e.getDimension()):!1}},{key:"norm",value:function(){var e=this.copy();return e.normalize(),e}},{key:"getPrecisionModel",value:function(){return this.factory.getPrecisionModel()}},{key:"getCentroid",value:function(){if(this.isEmpty())return this.factory.createPoint();var e=Centroid.getCentroid(this);return this.createPointFromInternalCoord(e,this)}},{key:"getEnvelopeInternal",value:function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),new Envelope(this.envelope)}},{key:"isEquivalentClass",value:function(e){return this.name===e.getClass().getName()}},{key:"clone",value:function t(){try{var t=_get(Object.getPrototypeOf(e.prototype),"clone",this).call(this);return null!==t.envelope&&(t.envelope=new Envelope(t.envelope)),t}catch(e){if(e instanceof CloneNotSupportedException)return Assert.shouldNeverReachHere(),null;throw e}finally{}}},{key:"setSRID",value:function(e){this.SRID=e}},{key:"getInteriorPoint",value:function(){if(this.isEmpty())return this.factory.createPoint();var e=null,t=this.getDimension();if(0===t){var n=new InteriorPointPoint(this);e=n.getInteriorPoint()}else if(1===t){var n=new InteriorPointLine(this);e=n.getInteriorPoint()}else{var n=new InteriorPointArea(this);e=n.getInteriorPoint()}return this.createPointFromInternalCoord(e,this)}},{key:"symDifference",value:function(e){if(this.isEmpty()||e.isEmpty()){if(this.isEmpty()&&e.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.SYMDIFFERENCE,this,e,this.factory);if(this.isEmpty())return e.copy();if(e.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp.overlayOp(this,e,OverlayOp.SYMDIFFERENCE)}},{key:"setUserData",value:function(e){this.userData=e}},{key:"toString",value:function(){return this.toText()}},{key:"createPointFromInternalCoord",value:function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)}},{key:"disjoint",value:function(e){return!this.intersects(e)}},{key:"crosses",value:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.relate(e).isCrosses(this.getDimension(),e.getDimension()):!1}},{key:"contains",value:function(e){return this.getEnvelopeInternal().contains(e.getEnvelopeInternal())?this.isRectangle()?RectangleContains.contains(this,e):this.relate(e).isContains():!1}},{key:"difference",value:function(e){return this.isEmpty()?OverlayOp.createEmptyResult(OverlayOp.DIFFERENCE,this,e,this.factory):e.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp.overlayOp(this,e,OverlayOp.DIFFERENCE))}},{key:"isSimple",value:function(){var e=new IsSimpleOp(this);return e.isSimple()}},{key:"compare",value:function(e,t){for(var n=e.iterator(),r=t.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),a=r.next(),s=i.compareTo(a);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0}},{key:"isWithinDistance",value:function(e,t){var n=this.getEnvelopeInternal().distance(e.getEnvelopeInternal());return n>t?!1:DistanceOp.isWithinDistance(this,e,t)}},{key:"distance",value:function(e){return DistanceOp.distance(this,e)}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getSortIndex()===e.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===e.SORTINDEX_MULTIPOINT||this.getSortIndex()===e.SORTINDEX_MULTILINESTRING||this.getSortIndex()===e.SORTINDEX_MULTIPOLYGON?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Clonable,Comparable,Serializable]}}],[{key:"hasNonEmptyElements",value:function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(e){for(var t=0;t<e.length;t++)if(null===e[t])return!0;return!1}}]),e}();Geometry.serialVersionUID=0x799ea46522854c00,Geometry.SORTINDEX_POINT=0,Geometry.SORTINDEX_MULTIPOINT=1,Geometry.SORTINDEX_LINESTRING=2,Geometry.SORTINDEX_LINEARRING=3,Geometry.SORTINDEX_MULTILINESTRING=4,Geometry.SORTINDEX_POLYGON=5,Geometry.SORTINDEX_MULTIPOLYGON=6,Geometry.SORTINDEX_GEOMETRYCOLLECTION=7,Geometry.geometryChangedFilter=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e){e.geometryChangedAction()}},{key:"interfaces_",get:function(){return[GeometryComponentFilter]}}]),e}());var CoordinateFilter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),BoundaryNodeRule=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInBoundary",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"Mod2BoundaryNodeRule",get:function(){return Mod2BoundaryNodeRule}},{key:"EndPointBoundaryNodeRule",get:function(){return EndPointBoundaryNodeRule}},{key:"MultiValentEndPointBoundaryNodeRule",get:function(){return MultiValentEndPointBoundaryNodeRule}},{key:"MonoValentEndPointBoundaryNodeRule",get:function(){return MonoValentEndPointBoundaryNodeRule}}]),e}(),Mod2BoundaryNodeRule=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInBoundary",value:function(e){return e%2===1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[BoundaryNodeRule]}}]),e}(),EndPointBoundaryNodeRule=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInBoundary",value:function(e){return e>0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[BoundaryNodeRule]}}]),e}(),MultiValentEndPointBoundaryNodeRule=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInBoundary",value:function(e){return e>1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[BoundaryNodeRule]}}]),e}(),MonoValentEndPointBoundaryNodeRule=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInBoundary",value:function(e){return 1===e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[BoundaryNodeRule]}}]),e}();BoundaryNodeRule.MOD2_BOUNDARY_RULE=new Mod2BoundaryNodeRule,BoundaryNodeRule.ENDPOINT_BOUNDARY_RULE=new EndPointBoundaryNodeRule,BoundaryNodeRule.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new MultiValentEndPointBoundaryNodeRule,BoundaryNodeRule.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new MonoValentEndPointBoundaryNodeRule,BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE=BoundaryNodeRule.MOD2_BOUNDARY_RULE,Iterator.prototype.hasNext=function(){},Iterator.prototype.next=function(){},Iterator.prototype.remove=function(){},Collection.prototype.add=function(){},Collection.prototype.addAll=function(){},Collection.prototype.isEmpty=function(){},Collection.prototype.iterator=function(){},Collection.prototype.size=function(){},Collection.prototype.toArray=function(){},Collection.prototype.remove=function(){},IndexOutOfBoundsException$1.prototype=new Error,IndexOutOfBoundsException$1.prototype.name="IndexOutOfBoundsException",List.prototype=new Collection,List.prototype.get=function(){},List.prototype.set=function(){},List.prototype.isEmpty=function(){},NoSuchElementException.prototype=new Error,NoSuchElementException.prototype.name="NoSuchElementException",OperationNotSupported.prototype=new Error,OperationNotSupported.prototype.name="OperationNotSupported";var ArrayList=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return e.array_=[],arguments[0]instanceof Collection&&e.addAll(arguments[0]),e}return _inherits(t,e),_createClass(t,[{key:"ensureCapacity",value:function(){}},{key:"interfaces_",get:function(){return[List,Collection]}}]),t}(List);ArrayList.prototype.add=function(e){return this.array_.push(e),!0},ArrayList.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},ArrayList.prototype.set=function(e,t){var n=this.array_[e];return this.array_[e]=t,n},ArrayList.prototype.iterator=function(){return new Iterator_(this)},ArrayList.prototype.get=function(e){if(0>e||e>=this.size())throw new IndexOutOfBoundsException$1;return this.array_[e]},ArrayList.prototype.isEmpty=function(){return 0===this.array_.length},ArrayList.prototype.size=function(){return this.array_.length},ArrayList.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;n>t;t++)e.push(this.array_[t]);return e},ArrayList.prototype.remove=function(e){for(var t=!1,n=0,r=this.array_.length;r>n;n++)if(this.array_[n]===e){this.array_.splice(n,1),t=!0;break}return t};var Iterator_=function(e){this.arrayList_=e,this.position_=0};Iterator_.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new NoSuchElementException;return this.arrayList_.get(this.position_++)},Iterator_.prototype.hasNext=function(){return this.position_<this.arrayList_.size()?!0:!1},Iterator_.prototype.set=function(e){return this.arrayList_.set(this.position_-1,e)},Iterator_.prototype.remove=function(){throw new OperationNotSupported};var CoordinateList=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];_classCallCheck(this,t);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),o=function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];return 0===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n))}.apply(void 0,r):1===r.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];s.ensureCapacity(r.length),s.add(r,!0)}.apply(void 0,r):2===r.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];s.ensureCapacity(r.length),s.add(r,i)}.apply(void 0,r):void 0};return e=o.apply(s,i),_possibleConstructorReturn(s,e)}return _inherits(t,e),_createClass(t,[{key:"getCoordinate",value:function(e){return this.get(e)}},{key:"addAll",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){for(var a=r[0],s=r[1],o=!1,u=a.iterator();u.hasNext();)this.add(u.next(),s),o=!0;return o}return(e=_get(Object.getPrototypeOf(t.prototype),"addAll",this)).call.apply(e,[this].concat(r))}},{key:"clone",value:function e(){for(var e=_get(Object.getPrototypeOf(t.prototype),"clone",this).call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e}},{key:"toCoordinateArray",value:function(){return this.toArray(t.coordArrayType)}},{key:"add",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];_get(Object.getPrototypeOf(t.prototype),"add",this).call(this,i)}else if(2===n.length){if(n[0]instanceof Array&&"boolean"==typeof n[1]){var i=n[0],a=n[1];return this.add(i,a,!0),!0}if(n[0]instanceof Coordinate&&"boolean"==typeof n[1]){var i=n[0],a=n[1];if(!a&&this.size()>=1){var s=this.get(this.size()-1);if(s.equals2D(i))return null}_get(Object.getPrototypeOf(t.prototype),"add",this).call(this,i)}else if(n[0]instanceof Object&&"boolean"==typeof n[1]){var o=n[0],a=n[1];return this.add(o,a),!0}}else if(3===n.length){if("boolean"==typeof n[2]&&n[0]instanceof Array&&"boolean"==typeof n[1]){var i=n[0],a=n[1],u=n[2];if(u)for(var l=0;l<i.length;l++)this.add(i[l],a);else for(var l=i.length-1;l>=0;l--)this.add(i[l],a);return!0}if("boolean"==typeof n[2]&&Number.isInteger(n[0])&&n[1]instanceof Coordinate){var c=n[0],i=n[1],a=n[2];if(!a){var h=this.size();if(h>0){if(c>0){var g=this.get(c-1);if(g.equals2D(i))return null}if(h>c){var f=this.get(c);if(f.equals2D(i))return null}}}_get(Object.getPrototypeOf(t.prototype),"add",this).call(this,c,i)}}else if(4===n.length){var i=n[0],a=n[1],y=n[2],d=n[3],v=1;y>d&&(v=-1);for(var l=y;l!==d;l+=v)this.add(i[l],a);return!0}}},{key:"closeRing",value:function(){this.size()>0&&this.add(new Coordinate(this.get(0)),!1)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(ArrayList);CoordinateList.coordArrayType=new Array(0);var CoordinateArrays=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isRing",value:function(e){return e.length<4?!1:e[0].equals2D(e[e.length-1])?!0:!1}},{key:"ptNotInList",value:function(t,n){for(var r=0;r<t.length;r++){var i=t[r];if(e.indexOf(i,n)<0)return i}return null}},{key:"scroll",value:function(t,n){var r=e.indexOf(n,t);if(0>r)return null;var i=new Array(t.length);System.arraycopy(t,r,i,0,t.length-r),System.arraycopy(t,0,i,t.length-r,r),System.arraycopy(i,0,t,0,t.length)}},{key:"equals",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){var r=t[0],i=t[1];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(!r[a].equals(i[a]))return!1;return!0}if(3===t.length){var r=t[0],i=t[1],s=t[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==s.compare(r[a],i[a]))return!1;return!0}}},{key:"intersection",value:function(e,t){for(var n=new CoordinateList,r=0;r<e.length;r++)t.intersects(e[r])&&n.add(e[r],!0);return n.toCoordinateArray()}},{key:"hasRepeatedPoints",value:function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){if(!e.hasRepeatedPoints(t))return t;var n=new CoordinateList(t,!1);return n.toCoordinateArray()}},{key:"reverse",value:function(e){for(var t=e.length-1,n=Math.trunc(t/2),r=0;n>=r;r++){var i=e[r];e[r]=e[t-r],e[t-r]=i}}},{key:"removeNull",value:function(e){for(var t=0,n=0;n<e.length;n++)null!==e[n]&&t++;var r=new Array(t);if(0===t)return r;for(var i=0,n=0;n<e.length;n++)null!==e[n]&&(r[i++]=e[n]);return r}},{key:"copyDeep",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){for(var r=t[0],i=new Array(r.length),a=0;a<r.length;a++)i[a]=new Coordinate(r[a]);return i}if(5===t.length)for(var s=t[0],o=t[1],u=t[2],l=t[3],c=t[4],a=0;c>a;a++)u[l+a]=new Coordinate(s[o+a])}},{key:"isEqualReversed",value:function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[e.length-n-1];if(0!==r.compareTo(i))return!1}return!0}},{key:"envelope",value:function(e){for(var t=new Envelope,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t}},{key:"toCoordinateArray",value:function(t){return t.toArray(e.coordArrayType)}},{key:"atLeastNCoordinatesOrNothing",value:function(e,t){return t.length>=e?t:[]}},{key:"indexOf",value:function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1}},{key:"increasingDirection",value:function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,r=e[t].compareTo(e[n]);if(0!==r)return r}return 1}},{key:"compare",value:function e(t,n){for(var r=0;r<t.length&&r<n.length;){var e=t[r].compareTo(n[r]);if(0!==e)return e;r++}return r<n.length?-1:r<t.length?1:0}},{key:"minCoordinate",value:function(e){for(var t=null,n=0;n<e.length;n++)(null===t||t.compareTo(e[n])>0)&&(t=e[n]);return t}},{key:"extract",value:function(e,t,n){t=MathUtil.clamp(t,0,e.length),n=MathUtil.clamp(n,-1,e.length);var r=n-t+1;0>n&&(r=0),t>=e.length&&(r=0),t>n&&(r=0);var i=new Array(r);if(0===r)return i;for(var a=0,s=t;n>=s;s++)i[a++]=e[s];return i}},{key:"ForwardComparator",get:function(){return ForwardComparator}},{key:"BidirectionalComparator",get:function(){return BidirectionalComparator}}]),e}(),ForwardComparator=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"compare",value:function(e,t){var n=e,r=t;return CoordinateArrays.compare(n,r)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparator]}}]),e}(),BidirectionalComparator=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"compare",value:function(t,n){var r=t,i=n;if(r.length<i.length)return-1;if(r.length>i.length)return 1;if(0===r.length)return 0;var a=CoordinateArrays.compare(r,i),s=e.isEqualReversed(r,i);return s?0:a}},{key:"OLDcompare",value:function(t,n){var r=t,i=n;if(r.length<i.length)return-1;if(r.length>i.length)return 1;if(0===r.length)return 0;for(var a=e.increasingDirection(r),s=e.increasingDirection(i),o=a>0?0:r.length-1,u=s>0?0:r.length-1,l=0;l<r.length;l++){var c=r[o].compareTo(i[u]);if(0!==c)return c;o+=a,u+=s}return 0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparator]}}]),e}();CoordinateArrays.coordArrayType=new Array(0),Map$1.prototype.get=function(){},Map$1.prototype.put=function(){},Map$1.prototype.size=function(){},Map$1.prototype.values=function(){},Map$1.prototype.entrySet=function(){},SortedMap.prototype=new Map$1,Set.prototype=new Collection,Set.prototype.contains=function(){},HashSet.prototype=new Set,HashSet.prototype.contains=function(e){for(var t=0,n=this.array_.length;n>t;t++){var r=this.array_[t];if(r===e)return!0}return!1},HashSet.prototype.add=function(e){return this.contains(e)?!1:(this.array_.push(e),!0)},HashSet.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},HashSet.prototype.remove=function(e){throw new javascript.util.OperationNotSupported},HashSet.prototype.size=function(){return this.array_.length},HashSet.prototype.isEmpty=function(){return 0===this.array_.length},HashSet.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;n>t;t++)e.push(this.array_[t]);return e},HashSet.prototype.iterator=function(){return new Iterator_$2(this)};var Iterator_$2=function(e){this.hashSet_=e,this.position_=0};Iterator_$2.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new NoSuchElementException;return this.hashSet_.array_[this.position_++]},Iterator_$2.prototype.hasNext=function(){return this.position_<this.hashSet_.size()?!0:!1},Iterator_$2.prototype.remove=function(){throw new OperationNotSupported};var BLACK=0,RED=1;TreeMap.prototype=new SortedMap,TreeMap.prototype.get=function(e){for(var t=this.root_;null!==t;){var n=e.compareTo(t.key);if(0>n)t=t.left;else{if(!(n>0))return t.value;t=t.right}}return null},TreeMap.prototype.put=function(e,t){if(null===this.root_)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:BLACK,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do if(n=i,r=e.compareTo(i.key),0>r)i=i.left;else{if(!(r>0)){var a=i.value;return i.value=t,a}i=i.right}while(null!==i);var s={key:e,left:null,right:null,value:t,parent:n,color:BLACK,getValue:function(){return this.value},getKey:function(){return this.key}};return 0>r?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},TreeMap.prototype.fixAfterInsertion=function(e){for(e.color=RED;null!=e&&e!=this.root_&&e.parent.color==RED;)if(parentOf(e)==leftOf(parentOf(parentOf(e)))){var t=rightOf(parentOf(parentOf(e)));colorOf(t)==RED?(setColor(parentOf(e),BLACK),setColor(t,BLACK),setColor(parentOf(parentOf(e)),RED),e=parentOf(parentOf(e))):(e==rightOf(parentOf(e))&&(e=parentOf(e),this.rotateLeft(e)),setColor(parentOf(e),BLACK),setColor(parentOf(parentOf(e)),RED),this.rotateRight(parentOf(parentOf(e))))}else{var t=leftOf(parentOf(parentOf(e)));colorOf(t)==RED?(setColor(parentOf(e),BLACK),setColor(t,BLACK),setColor(parentOf(parentOf(e)),RED),e=parentOf(parentOf(e))):(e==leftOf(parentOf(e))&&(e=parentOf(e),this.rotateRight(e)),setColor(parentOf(e),BLACK),setColor(parentOf(parentOf(e)),RED),this.rotateLeft(parentOf(parentOf(e))))}this.root_.color=BLACK},TreeMap.prototype.values=function(){var e=new ArrayList,t=this.getFirstEntry();if(null!==t)for(e.add(t.value);null!==(t=TreeMap.successor(t));)e.add(t.value);return e},TreeMap.prototype.entrySet=function(){var e=new HashSet,t=this.getFirstEntry();if(null!==t)for(e.add(t);null!==(t=TreeMap.successor(t));)e.add(t);return e},TreeMap.prototype.rotateLeft=function(e){if(null!=e){var t=e.right;e.right=t.left,null!=t.left&&(t.left.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.left==e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}},TreeMap.prototype.rotateRight=function(e){if(null!=e){var t=e.left;e.left=t.right,null!=t.right&&(t.right.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.right==e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}},TreeMap.prototype.getFirstEntry=function(){var e=this.root_;if(null!=e)for(;null!=e.left;)e=e.left;return e},TreeMap.successor=function(e){if(null===e)return null;if(null!==e.right){for(var t=e.right;null!==t.left;)t=t.left;return t}for(var t=e.parent,n=e;null!==t&&n===t.right;)n=t,t=t.parent;return t},TreeMap.prototype.size=function(){return this.size_};var Lineal=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();SortedSet.prototype=new Set,TreeSet.prototype=new SortedSet,TreeSet.prototype.contains=function(e){for(var t=0,n=this.array_.length;n>t;t++){var r=this.array_[t];if(0===r.compareTo(e))return!0}return!1},TreeSet.prototype.add=function(e){if(this.contains(e))return!1;for(var t=0,n=this.array_.length;n>t;t++){var r=this.array_[t];if(1===r.compareTo(e))return this.array_.splice(t,0,e),!0}return this.array_.push(e),!0},TreeSet.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},TreeSet.prototype.remove=function(e){throw new OperationNotSupported},TreeSet.prototype.size=function(){return this.array_.length},TreeSet.prototype.isEmpty=function(){return 0===this.array_.length},TreeSet.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;n>t;t++)e.push(this.array_[t]);return e},TreeSet.prototype.iterator=function(){return new Iterator_$1(this)};var Iterator_$1=function(e){this.treeSet_=e,this.position_=0};Iterator_$1.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new NoSuchElementException;return this.treeSet_.array_[this.position_++]},Iterator_$1.prototype.hasNext=function(){return this.position_<this.treeSet_.size()?!0:!1},Iterator_$1.prototype.remove=function(){throw new OperationNotSupported},Arrays.sort=function(){var e,t,n,r,i=arguments[0];if(1===arguments.length)return r=function(e,t){return e.compareTo(t)},void i.sort(r);if(2===arguments.length)n=arguments[1],r=function(e,t){return n.compare(e,t)},i.sort(r);else{if(3===arguments.length){t=i.slice(arguments[1],arguments[2]),t.sort();var a=i.slice(0,arguments[1]).concat(t,i.slice(arguments[2],i.length));for(i.splice(0,i.length),e=0;e<a.length;e++)i.push(a[e]);return}if(4===arguments.length){for(t=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(e,t){return n.compare(e,t)},t.sort(r),a=i.slice(0,arguments[1]).concat(t,i.slice(arguments[2],i.length)),i.splice(0,i.length),e=0;e<a.length;e++)i.push(a[e]);return}}},Arrays.asList=function(e){for(var t=new ArrayList,n=0,r=e.length;r>n;n++)t.add(e[n]);return t};var GeometryComponentFilter$1=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Dimension=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toDimensionSymbol",value:function(t){switch(t){case e.FALSE:return e.SYM_FALSE;case e.TRUE:return e.SYM_TRUE;case e.DONTCARE:return e.SYM_DONTCARE;case e.P:return e.SYM_P;case e.L:return e.SYM_L;case e.A:return e.SYM_A}throw new IllegalArgumentException$1("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(Character.toUpperCase(t)){case e.SYM_FALSE:return e.FALSE;case e.SYM_TRUE:return e.TRUE;case e.SYM_DONTCARE:return e.DONTCARE;case e.SYM_P:return e.P;case e.SYM_L:return e.L;case e.SYM_A:return e.A}throw new IllegalArgumentException$1("Unknown dimension symbol: "+t)}}]),e}();Dimension.P=0,Dimension.L=1,Dimension.A=2,Dimension.FALSE=-1,Dimension.TRUE=-2,Dimension.DONTCARE=-3,Dimension.SYM_FALSE="F",Dimension.SYM_TRUE="T",Dimension.SYM_DONTCARE="*",Dimension.SYM_P="0",Dimension.SYM_L="1",Dimension.SYM_A="2";var GeometryFilter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),CoordinateSequenceFilter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e,t){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),GeometryCollection=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.geometries=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,s));if(null===a&&(a=[]),t.hasNullElements(a))throw new IllegalArgumentException$1("geometries must not contain null elements");e.geometries=a}return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"computeEnvelopeInternal",value:function(){for(var e=new Envelope,t=0;t<this.geometries.length;t++)e.expandToInclude(this.geometries[t].getEnvelopeInternal());return e}},{key:"getGeometryN",value:function(e){return this.geometries[e]}},{key:"getSortIndex",value:function(){return Geometry.SORTINDEX_GEOMETRYCOLLECTION}},{key:"getCoordinates",value:function(){for(var e=new Array(this.getNumPoints()),t=-1,n=0;n<this.geometries.length;n++)for(var r=this.geometries[n].getCoordinates(),i=0;i<r.length;i++)t++,e[t]=r[i];return e}},{key:"getArea",value:function(){for(var e=0,t=0;t<this.geometries.length;t++)e+=this.geometries[t].getArea();return e}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];if(!this.isEquivalentClass(a))return!1;var o=a;if(this.geometries.length!==o.geometries.length)return!1;for(var u=0;u<this.geometries.length;u++)if(!this.geometries[u].equalsExact(o.geometries[u],s))return!1;return!0}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"normalize",value:function(){for(var e=0;e<this.geometries.length;e++)this.geometries[e].normalize();Arrays.sort(this.geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var e=Dimension.FALSE,t=0;t<this.geometries.length;t++)e=Math.max(e,this.geometries[t].getBoundaryDimension());return e}},{key:"getDimension",value:function(){for(var e=Dimension.FALSE,t=0;t<this.geometries.length;t++)e=Math.max(e,this.geometries[t].getDimension());return e}},{key:"getLength",value:function(){for(var e=0,t=0;t<this.geometries.length;t++)e+=this.geometries[t].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=0,t=0;t<this.geometries.length;t++)e+=this.geometries[t].getNumPoints();return e}},{key:"getNumGeometries",value:function(){return this.geometries.length}},{key:"reverse",value:function(){for(var e=this.geometries.length,t=new Array(e),n=0;n<this.geometries.length;n++)t[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(t)}},{key:"compareToSameClass",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0],i=new TreeSet(Arrays.asList(this.geometries)),a=new TreeSet(Arrays.asList(r.geometries));return this.compare(i,a)}if(2===t.length){for(var r=t[0],s=t[1],o=r,u=this.getNumGeometries(),l=o.getNumGeometries(),c=0;u>c&&l>c;){var h=this.getGeometryN(c),g=o.getGeometryN(c),f=h.compareToSameClass(g,s);if(0!==f)return f;c++}return u>c?1:l>c?-1:0}}},{key:"apply",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateFilter)>-1)for(var r=t[0],i=0;i<this.geometries.length;i++)this.geometries[i].apply(r);else if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateSequenceFilter)>-1){var r=t[0];if(0===this.geometries.length)return null;for(var i=0;i<this.geometries.length&&(this.geometries[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(GeometryFilter)>-1){var r=t[0];r.filter(this);for(var i=0;i<this.geometries.length;i++)this.geometries[i].apply(r)}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(GeometryComponentFilter$1)>-1){var r=t[0];r.filter(this);for(var i=0;i<this.geometries.length;i++)this.geometries[i].apply(r)}}},{key:"getBoundary",value:function(){return this.checkNotGeometryCollection(this),Assert.shouldNeverReachHere(),null}},{key:"clone",value:function(){var e=_get(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.geometries=new Array(this.geometries.length);for(var n=0;n<this.geometries.length;n++)e.geometries[n]=this.geometries[n].clone();return e}},{key:"getGeometryType",value:function(){return"GeometryCollection"}},{key:"copy",value:function(){for(var e=new Array(this.geometries.length),n=0;n<e.length;n++)e[n]=this.geometries[n].copy();return new t(e,this.factory)}},{key:"isEmpty",value:function(){for(var e=0;e<this.geometries.length;e++)if(!this.geometries[e].isEmpty())return!1;return!0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Geometry);GeometryCollection.serialVersionUID=-0x4f07bcb1f857d800;var MultiLineString=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length)var a=r[0],s=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,a,s));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"getSortIndex",value:function(){return Geometry.SORTINDEX_MULTILINESTRING}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];return this.isEquivalentClass(a)?_get(Object.getPrototypeOf(t.prototype),"equalsExact",this).call(this,a,s):!1}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Dimension.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var e=0;e<this.geometries.length;e++)if(!this.geometries[e].isClosed())return!1;return!0}},{key:"getDimension",value:function(){return 1}},{key:"reverse",value:function(){for(var e=this.geometries.length,t=new Array(e),n=0;n<this.geometries.length;n++)t[e-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(t)}},{key:"getBoundary",value:function(){return new BoundaryOp(this).getBoundary()}},{key:"getGeometryType",value:function(){return"MultiLineString"}},{key:"copy",value:function(){
for(var e=new Array(this.geometries.length),n=0;n<e.length;n++)e[n]=this.geometries[n].copy();return new t(e,this.factory)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Lineal]}}]),t}(GeometryCollection);MultiLineString.serialVersionUID=0x7155d2ab4afa8000;var BoundaryOp=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null;var a=function e(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];e.call(t,a,BoundaryNodeRule.MOD2_BOUNDARY_RULE)}else if(2===r.length){var a=r[0],s=r[1];t.geom=a,t.geomFact=a.getFactory(),t.bnRule=s}};return a.apply(this,r)}return _createClass(e,[{key:"boundaryMultiLineString",value:function(e){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return 1===t.length?this.geomFact.createPoint(t[0]):this.geomFact.createMultiPointFromCoords(t)}},{key:"getBoundary",value:function(){return this.geom instanceof LineString?this.boundaryLineString(this.geom):this.geom instanceof MultiLineString?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()}},{key:"boundaryLineString",value:function(e){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(e.isClosed()){var t=this.bnRule.isInBoundary(2);return t?e.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])}},{key:"getEmptyMultiPoint",value:function(){return this.geomFact.createMultiPoint()}},{key:"computeBoundaryCoordinates",value:function(e){var t=new ArrayList;this.endpointMap=new TreeMap;for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this.endpointMap.entrySet().iterator();i.hasNext();){var a=i.next(),s=a.getValue(),o=s.count;this.bnRule.isInBoundary(o)&&t.add(a.getKey())}return CoordinateArrays.toCoordinateArray(t)}},{key:"addEndpoint",value:function(e){var t=this.endpointMap.get(e);null===t&&(t=new Counter,this.endpointMap.put(e,t)),t.count++}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBoundary",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0],a=new e(i);return a.getBoundary()}if(2===n.length){var i=n[0],s=n[1],a=new e(i,s);return a.getBoundary()}}}]),e}(),Counter=function(){function e(){_classCallCheck(this,e),this.count=null}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),PrintStream=function e(){_classCallCheck(this,e)},StringReader=function e(){_classCallCheck(this,e)},DecimalFormat=function e(){_classCallCheck(this,e)},ByteArrayOutputStream=function e(){_classCallCheck(this,e)},IOException=function e(){_classCallCheck(this,e)},LineNumberReader=function e(){_classCallCheck(this,e)},StringUtil=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"chars",value:function(e,t){for(var n=new Array(t),r=0;t>r;r++)n[r]=e;return new String(n)}},{key:"getStackTrace",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0],a=new ByteArrayOutputStream,s=new PrintStream(a);return i.printStackTrace(s),a.toString()}if(2===n.length){for(var i=n[0],o=n[1],u="",l=new StringReader(e.getStackTrace(i)),c=new LineNumberReader(l),h=0;o>h;h++)try{u+=c.readLine()+e.NEWLINE}catch(e){if(!(e instanceof IOException))throw e;Assert.shouldNeverReachHere()}finally{}return u}}},{key:"split",value:function(e,t){for(var n=t.length,r=new ArrayList,i=""+e,a=i.indexOf(t);a>=0;){var s=i.substring(0,a);r.add(s),i=i.substring(a+n),a=i.indexOf(t)}i.length>0&&r.add(i);for(var o=new Array(r.size()),u=0;u<o.length;u++)o[u]=r.get(u);return o}},{key:"toString",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];return e.SIMPLE_ORDINATE_FORMAT.format(a)}return(t=_get(Object.getPrototypeOf(e),"toString",this)).call.apply(t,[this].concat(r))}},{key:"spaces",value:function(t){return e.chars(" ",t)}}]),e}();StringUtil.NEWLINE=System.getProperty("line.separator"),StringUtil.SIMPLE_ORDINATE_FORMAT=new DecimalFormat("0.#");var CoordinateSequences=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"copyCoord",value:function(e,t,n,r){for(var i=Math.min(e.getDimension(),n.getDimension()),a=0;i>a;a++)n.setOrdinate(r,a,e.getOrdinate(t,a))}},{key:"isRing",value:function(e){var t=e.size();return 0===t?!0:3>=t?!1:e.getOrdinate(0,CoordinateSequence.X)===e.getOrdinate(t-1,CoordinateSequence.X)&&e.getOrdinate(0,CoordinateSequence.Y)===e.getOrdinate(t-1,CoordinateSequence.Y)}},{key:"isEqual",value:function(e,t){var n=e.size(),r=t.size();if(n!==r)return!1;for(var i=Math.min(e.getDimension(),t.getDimension()),a=0;n>a;a++)for(var s=0;i>s;s++){var o=e.getOrdinate(a,s),u=t.getOrdinate(a,s);if(!(e.getOrdinate(a,s)===t.getOrdinate(a,s)||Double.isNaN(o)&&Double.isNaN(u)))return!1}return!0}},{key:"extend",value:function(t,n,r){var i=t.create(r,n.getDimension()),a=n.size();if(e.copy(n,0,i,0,a),a>0)for(var s=a;r>s;s++)e.copy(n,a-1,i,s,1);return i}},{key:"reverse",value:function(t){for(var n=t.size()-1,r=Math.trunc(n/2),i=0;r>=i;i++)e.swap(t,i,n-i)}},{key:"swap",value:function(e,t,n){if(t===n)return null;for(var r=0;r<e.getDimension();r++){var i=e.getOrdinate(t,r);e.setOrdinate(t,r,e.getOrdinate(n,r)),e.setOrdinate(n,r,i)}}},{key:"copy",value:function(t,n,r,i,a){for(var s=0;a>s;s++)e.copyCoord(t,n+s,r,i+s)}},{key:"toString",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0],s=a.size();if(0===s)return"()";var o=a.getDimension(),u=new StringBuffer;u.append("(");for(var l=0;s>l;l++){l>0&&u.append(" ");for(var c=0;o>c;c++)c>0&&u.append(","),u.append(StringUtil.toString(a.getOrdinate(l,c)))}return u.append(")"),u.toString()}return(t=_get(Object.getPrototypeOf(e),"toString",this)).call.apply(t,[this].concat(r))}},{key:"ensureValidRing",value:function(t,n){var r=n.size();if(0===r)return n;if(3>=r)return e.createClosedRing(t,n,4);var i=n.getOrdinate(0,CoordinateSequence.X)===n.getOrdinate(r-1,CoordinateSequence.X)&&n.getOrdinate(0,CoordinateSequence.Y)===n.getOrdinate(r-1,CoordinateSequence.Y);return i?n:e.createClosedRing(t,n,r+1)}},{key:"createClosedRing",value:function(t,n,r){var i=t.create(r,n.getDimension()),a=n.size();e.copy(n,0,i,0,a);for(var s=a;r>s;s++)e.copy(n,0,i,s,1);return i}}]),e}(),LineString=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.points=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,s));e.init(a)}return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new Envelope:this.points.expandEnvelope(new Envelope)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getSortIndex",value:function(){return Geometry.SORTINDEX_LINESTRING}},{key:"getCoordinates",value:function(){return this.points.toCoordinateArray()}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];if(!this.isEquivalentClass(a))return!1;var o=a;if(this.points.size()!==o.points.size())return!1;for(var u=0;u<this.points.size();u++)if(!this.equal(this.points.getCoordinate(u),o.points.getCoordinate(u),s))return!1;return!0}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"normalize",value:function(){for(var e=0;e<Math.trunc(this.points.size()/2);e++){var t=this.points.size()-1-e;if(!this.points.getCoordinate(e).equals(this.points.getCoordinate(t)))return this.points.getCoordinate(e).compareTo(this.points.getCoordinate(t))>0&&CoordinateSequences.reverse(this.points),null}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this.points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Dimension.FALSE:0}},{key:"isClosed",value:function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return CGAlgorithms.length(this.points)}},{key:"getNumPoints",value:function(){return this.points.size()}},{key:"reverse",value:function(){var e=this.points.clone();CoordinateSequences.reverse(e);var t=this.getFactory().createLineString(e);return t}},{key:"compareToSameClass",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){for(var r=t[0],i=r,a=0,s=0;a<this.points.size()&&s<i.points.size();){var o=this.points.getCoordinate(a).compareTo(i.points.getCoordinate(s));if(0!==o)return o;a++,s++}return a<this.points.size()?1:s<i.points.size()?-1:0}if(2===t.length){var r=t[0],u=t[1],i=r;return u.compare(this.points,i.points)}}},{key:"apply",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateFilter)>-1)for(var r=t[0],i=0;i<this.points.size();i++)r.filter(this.points.getCoordinate(i));else if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateSequenceFilter)>-1){var r=t[0];if(0===this.points.size())return null;for(var i=0;i<this.points.size()&&(r.filter(this.points,i),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(GeometryFilter)>-1){var r=t[0];r.filter(this)}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(GeometryComponentFilter$1)>-1){var r=t[0];r.filter(this)}}},{key:"getBoundary",value:function(){return new BoundaryOp(this).getBoundary()}},{key:"isEquivalentClass",value:function(e){return e instanceof t}},{key:"clone",value:function(){var e=_get(Object.getPrototypeOf(t.prototype),"clone",this).call(this);return e.points=this.points.clone(),e}},{key:"getCoordinateN",value:function(e){return this.points.getCoordinate(e)}},{key:"getGeometryType",value:function(){return"LineString"}},{key:"copy",value:function(){return new t(this.points.copy(),this.factory)}},{key:"getCoordinateSequence",value:function(){return this.points}},{key:"isEmpty",value:function(){return 0===this.points.size()}},{key:"init",value:function(e){if(null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),1===e.size())throw new IllegalArgumentException$1("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this.points=e}},{key:"isCoordinate",value:function(e){for(var t=0;t<this.points.size();t++)if(this.points.getCoordinate(t).equals(e))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(e){return this.getFactory().createPoint(this.points.getCoordinate(e))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Lineal]}}]),t}(Geometry);LineString.serialVersionUID=0x2b2b51ba435c8e00;var Puntal=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Point=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.coordinates=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,s));e.init(a)}return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new Envelope;var e=new Envelope;return e.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),e}},{key:"getSortIndex",value:function(){return Geometry.SORTINDEX_POINT}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];return this.isEquivalentClass(a)?this.isEmpty()&&a.isEmpty()?!0:this.isEmpty()!==a.isEmpty()?!1:this.equal(a.getCoordinate(),this.getCoordinate(),s):!1}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==this.coordinates.size()?this.coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return Dimension.FALSE}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"reverse",value:function(){return this.copy()}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0],i=r;return this.getCoordinate().compareTo(i.getCoordinate())}if(2===t.length){var r=t[0],a=t[1],i=r;return a.compare(this.coordinates,i.coordinates)}}},{key:"apply",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateFilter)>-1){var r=t[0];if(this.isEmpty())return null;r.filter(this.getCoordinate())}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateSequenceFilter)>-1){var r=t[0];if(this.isEmpty())return null;r.filter(this.coordinates,0),r.isGeometryChanged()&&this.geometryChanged()}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(GeometryFilter)>-1){var r=t[0];r.filter(this)}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(GeometryComponentFilter$1)>-1){var r=t[0];r.filter(this)}}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection(null)}},{key:"clone",value:function(){var e=_get(Object.getPrototypeOf(t.prototype),"clone",this).call(this);return e.coordinates=this.coordinates.clone(),e}},{key:"getGeometryType",value:function(){return"Point"}},{key:"copy",value:function(){return new t(this.coordinates.copy(),this.factory)}},{key:"getCoordinateSequence",value:function(){return this.coordinates}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===this.coordinates.size()}},{key:"init",value:function(e){null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),Assert.isTrue(e.size()<=1),this.coordinates=e}},{key:"isSimple",value:function(){return!0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Puntal]}}]),t}(Geometry);Point.serialVersionUID=0x44077bad161cbc00;var Polygonal=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Polygon=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.shell=null,e.holes=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(3===r.length){var a=r[0],s=r[1],o=r[2],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,o));if(null===a&&(a=e.getFactory().createLinearRing()),null===s&&(s=[]),t.hasNullElements(s))throw new IllegalArgumentException$1("holes must not contain null elements");if(a.isEmpty()&&t.hasNonEmptyElements(s))throw new IllegalArgumentException$1("shell is empty but holes are not");e.shell=a,e.holes=s}return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"computeEnvelopeInternal",value:function(){return this.shell.getEnvelopeInternal()}},{key:"getSortIndex",value:function(){return Geometry.SORTINDEX_POLYGON}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()),t=-1,n=this.shell.getCoordinates(),r=0;r<n.length;r++)t++,e[t]=n[r];for(var i=0;i<this.holes.length;i++)for(var a=this.holes[i].getCoordinates(),s=0;s<a.length;s++)t++,e[t]=a[s];return e}},{key:"getArea",value:function(){var e=0;e+=Math.abs(CGAlgorithms.signedArea(this.shell.getCoordinateSequence()));for(var t=0;t<this.holes.length;t++)e-=Math.abs(CGAlgorithms.signedArea(this.holes[t].getCoordinateSequence()));return e}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this.shell)return!1;if(5!==this.shell.getNumPoints())return!1;for(var e=this.shell.getCoordinateSequence(),t=this.getEnvelopeInternal(),n=0;5>n;n++){var r=e.getX(n);if(r!==t.getMinX()&&r!==t.getMaxX())return!1;var i=e.getY(n);if(i!==t.getMinY()&&i!==t.getMaxY())return!1}for(var a=e.getX(0),s=e.getY(0),n=1;4>=n;n++){var r=e.getX(n),i=e.getY(n),o=r!==a,u=i!==s;if(o===u)return!1;a=r,s=i}return!0}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];if(!this.isEquivalentClass(a))return!1;var o=a,u=this.shell,l=o.shell;if(!u.equalsExact(l,s))return!1;if(this.holes.length!==o.holes.length)return!1;for(var c=0;c<this.holes.length;c++)if(!this.holes[c].equalsExact(o.holes[c],s))return!1;return!0}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"normalize",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length){this.normalize(this.shell,!0);for(var r=0;r<this.holes.length;r++)this.normalize(this.holes[r],!1);Arrays.sort(this.holes)}else if(2===t.length){var i=t[0],a=t[1];if(i.isEmpty())return null;var s=new Array(i.getCoordinates().length-1);System.arraycopy(i.getCoordinates(),0,s,0,s.length);var o=CoordinateArrays.minCoordinate(i.getCoordinates());CoordinateArrays.scroll(s,o),System.arraycopy(s,0,i.getCoordinates(),0,s.length),i.getCoordinates()[s.length]=s[0],CGAlgorithms.isCCW(i.getCoordinates())===a&&CoordinateArrays.reverse(i.getCoordinates())}}},{key:"getCoordinate",value:function(){return this.shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this.holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var e=0;e+=this.shell.getLength();for(var t=0;t<this.holes.length;t++)e+=this.holes[t].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=this.shell.getNumPoints(),t=0;t<this.holes.length;t++)e+=this.holes[t].getNumPoints();return e}},{key:"reverse",value:function(){var e=this.copy();e.shell=this.shell.clone().reverse(),e.holes=new Array(this.holes.length);for(var t=0;t<this.holes.length;t++)e.holes[t]=this.holes[t].clone().reverse();return e}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"compareToSameClass",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0],i=this.shell,a=r.shell;return i.compareToSameClass(a)}if(2===t.length){var r=t[0],s=t[1],o=r,i=this.shell,a=o.shell,u=i.compareToSameClass(a,s);if(0!==u)return u;for(var l=this.getNumInteriorRing(),c=o.getNumInteriorRing(),h=0;l>h&&c>h;){var g=this.getInteriorRingN(h),f=o.getInteriorRingN(h),y=g.compareToSameClass(f,s);if(0!==y)return y;h++}return l>h?1:c>h?-1:0}}},{key:"apply",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateFilter)>-1){var r=t[0];this.shell.apply(r);for(var i=0;i<this.holes.length;i++)this.holes[i].apply(r)}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateSequenceFilter)>-1){var r=t[0];if(this.shell.apply(r),!r.isDone())for(var i=0;i<this.holes.length&&(this.holes[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(GeometryFilter)>-1){var r=t[0];r.filter(this)}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(GeometryComponentFilter$1)>-1){var r=t[0];r.filter(this),this.shell.apply(r);for(var i=0;i<this.holes.length;i++)this.holes[i].apply(r)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this.holes.length+1);e[0]=this.shell;for(var t=0;t<this.holes.length;t++)e[t+1]=this.holes[t];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)}},{key:"clone",value:function(){var e=_get(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.shell=this.shell.clone(),e.holes=new Array(this.holes.length);for(var n=0;n<this.holes.length;n++)e.holes[n]=this.holes[n].clone();return e}},{key:"getGeometryType",value:function(){return"Polygon"}},{key:"copy",value:function(){for(var e=this.shell.copy(),n=new Array(this.holes.length),r=0;r<n.length;r++)n[r]=this.holes[r].copy();return new t(e,n,this.factory)}},{key:"getExteriorRing",value:function(){return this.shell}},{key:"isEmpty",value:function(){return this.shell.isEmpty()}},{key:"getInteriorRingN",value:function(e){return this.holes[e]}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Polygonal]}}]),t}(Geometry);Polygon.serialVersionUID=-0x307ffefd8dc97200;var MultiPoint=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length)var a=r[0],s=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,a,s));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"getSortIndex",value:function(){return Geometry.SORTINDEX_MULTIPOINT}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];return this.isEquivalentClass(a)?_get(Object.getPrototypeOf(t.prototype),"equalsExact",this).call(this,a,s):!1}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"getCoordinate",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];return this.geometries[a].getCoordinate()}return(e=_get(Object.getPrototypeOf(t.prototype),"getCoordinate",this)).call.apply(e,[this].concat(r))}},{key:"getBoundaryDimension",value:function(){return Dimension.FALSE}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection(null)}},{key:"getGeometryType",value:function(){return"MultiPoint"}},{key:"copy",value:function(){for(var e=new Array(this.geometries.length),n=0;n<e.length;n++)e[n]=this.geometries[n].copy();return new t(e,this.factory)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Puntal]}}]),t}(GeometryCollection);MultiPoint.serialVersionUID=-0x6fb1ed4162e0fc00;var LinearRing=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];_classCallCheck(this,t);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),o=function e(){for(var r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];if(2===i.length){if(i[0]instanceof Coordinate&&i[1]instanceof GeometryFactory)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];e.call(s,a.getCoordinateSequenceFactory().create(i),a)}.apply(void 0,i);if(i[0].interfaces_&&i[0].interfaces_.indexOf(CoordinateSequence)>-1&&i[1]instanceof GeometryFactory)return function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var a=r[0],s=r[1],o=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,a,s));o.validateConstruction()}.apply(void 0,i)}};return e=o.apply(s,i),_possibleConstructorReturn(s,e)}return _inherits(t,e),_createClass(t,[{key:"getSortIndex",value:function(){return Geometry.SORTINDEX_LINEARRING}},{key:"getBoundaryDimension",value:function(){return Dimension.FALSE}},{key:"isClosed",value:function(){return this.isEmpty()?!0:_get(Object.getPrototypeOf(t.prototype),"isClosed",this).call(this)}},{key:"reverse",value:function(){var e=this.points.clone();CoordinateSequences.reverse(e);var t=this.getFactory().createLinearRing(e);return t}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!_get(Object.getPrototypeOf(t.prototype),"isClosed",this).call(this))throw new IllegalArgumentException$1("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new IllegalArgumentException$1("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return"LinearRing"}},{key:"copy",value:function(){return new t(this.points.copy(),this.factory)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(LineString);LinearRing.MINIMUM_VALID_SIZE=4,LinearRing.serialVersionUID=-0x3b229e262367a600;var MultiPolygon=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length)var a=r[0],s=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,a,s));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"getSortIndex",value:function(){return Geometry.SORTINDEX_MULTIPOLYGON}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];return this.isEquivalentClass(a)?_get(Object.getPrototypeOf(t.prototype),"equalsExact",this).call(this,a,s):!1}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getDimension",value:function(){return 2}},{key:"reverse",value:function(){for(var e=this.geometries.length,t=new Array(e),n=0;n<this.geometries.length;n++)t[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(t)}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new ArrayList,t=0;t<this.geometries.length;t++)for(var n=this.geometries[t],r=n.getBoundary(),i=0;i<r.getNumGeometries();i++)e.add(r.getGeometryN(i));var a=new Array(e.size());return this.getFactory().createMultiLineString(e.toArray(a))}},{key:"getGeometryType",value:function(){return"MultiPolygon"}},{key:"copy",value:function(){for(var e=new Array(this.geometries.length),n=0;n<e.length;n++)e[n]=this.geometries[n].copy();return new t(e,this.factory)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Polygonal]}}]),t}(GeometryCollection);MultiPolygon.serialVersionUID=-0x7a5aa1369171980;var GeometryEditor=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.factory=null,this.isUserDataCopied=!1;var a=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length);else if(1===n.length){var i=n[0];t.factory=i}};return a.apply(this,r)}return _createClass(e,[{key:"setCopyUserData",value:function(e){this.isUserDataCopied=e}},{key:"edit",value:function(e,t){if(null===e)return null;var n=this.editInternal(e,t);return this.isUserDataCopied&&n.setUserData(e.getUserData()),n}},{key:"editInternal",value:function(e,t){return null===this.factory&&(this.factory=e.getFactory()),e instanceof GeometryCollection?this.editGeometryCollection(e,t):e instanceof Polygon?this.editPolygon(e,t):e instanceof Point?t.edit(e,this.factory):e instanceof LineString?t.edit(e,this.factory):(Assert.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)}},{key:"editGeometryCollection",value:function(e,t){for(var n=t.edit(e,this.factory),r=new ArrayList,i=0;i<n.getNumGeometries();i++){var a=this.edit(n.getGeometryN(i),t);null===a||a.isEmpty()||r.add(a)}return n.getClass()===MultiPoint?this.factory.createMultiPoint(r.toArray([])):n.getClass()===MultiLineString?this.factory.createMultiLineString(r.toArray([])):n.getClass()===MultiPolygon?this.factory.createMultiPolygon(r.toArray([])):this.factory.createGeometryCollection(r.toArray([]))}},{key:"editPolygon",value:function(e,t){var n=t.edit(e,this.factory);if(null===n&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),t);if(null===r||r.isEmpty())return this.factory.createPolygon();for(var i=new ArrayList,a=0;a<n.getNumInteriorRing();a++){var s=this.edit(n.getInteriorRingN(a),t);null===s||s.isEmpty()||i.add(s)}return this.factory.createPolygon(r,i.toArray([]))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"GeometryEditorOperation",get:function(){return GeometryEditorOperation}},{key:"NoOpGeometryOperation",get:function(){return NoOpGeometryOperation}},{key:"CoordinateOperation",get:function(){return CoordinateOperation}},{key:"CoordinateSequenceOperation",get:function(){return CoordinateSequenceOperation$1}}]),e}(),GeometryEditorOperation=function e(){_classCallCheck(this,e)},NoOpGeometryOperation=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"edit",value:function(e,t){return e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryEditorOperation]}}]),e}(),CoordinateOperation=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"edit",value:function(e,t){if(e instanceof LinearRing)return t.createLinearRing(this.editCoordinates(e.getCoordinates(),e));if(e instanceof LineString)return t.createLineString(this.editCoordinates(e.getCoordinates(),e));if(e instanceof Point){var n=this.editCoordinates(e.getCoordinates(),e);return n.length>0?t.createPoint(n[0]):t.createPoint()}return e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryEditorOperation]}}]),e}(),CoordinateSequenceOperation$1=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"edit",value:function(e,t){return e instanceof LinearRing?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof LineString?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof Point?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryEditorOperation]}}]),e}(),CoordinateArraySequence=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.dimension=3,this.coordinates=null;var a=function e(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){if(r[0]instanceof Array){var a=r[0];e.call(t,a,3)}else if(Number.isInteger(r[0])){var s=r[0];t.coordinates=new Array(s);
for(var o=0;s>o;o++)t.coordinates[o]=new Coordinate}else if(r[0].interfaces_&&r[0].interfaces_.indexOf(CoordinateSequence)>-1){var u=r[0];if(null===u)return t.coordinates=new Array(0),null;t.dimension=u.getDimension(),t.coordinates=new Array(u.size());for(var o=0;o<t.coordinates.length;o++)t.coordinates[o]=u.getCoordinateCopy(o)}}else if(2===r.length)if(r[0]instanceof Array&&Number.isInteger(r[1])){var a=r[0],l=r[1];t.coordinates=a,t.dimension=l,null===a&&(t.coordinates=new Array(0))}else if(Number.isInteger(r[0])&&Number.isInteger(r[1])){var s=r[0],l=r[1];t.coordinates=new Array(s),t.dimension=l;for(var o=0;s>o;o++)t.coordinates[o]=new Coordinate}};return a.apply(this,r)}return _createClass(e,[{key:"setOrdinate",value:function(e,t,n){switch(t){case CoordinateSequence.X:this.coordinates[e].x=n;break;case CoordinateSequence.Y:this.coordinates[e].y=n;break;case CoordinateSequence.Z:this.coordinates[e].z=n;break;default:throw new IllegalArgumentException$1("invalid ordinateIndex")}}},{key:"size",value:function(){return this.coordinates.length}},{key:"getOrdinate",value:function(e,t){switch(t){case CoordinateSequence.X:return this.coordinates[e].x;case CoordinateSequence.Y:return this.coordinates[e].y;case CoordinateSequence.Z:return this.coordinates[e].z}return Double.NaN}},{key:"getCoordinate",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return this.coordinates[r]}if(2===t.length){var i=t[0],a=t[1];a.x=this.coordinates[i].x,a.y=this.coordinates[i].y,a.z=this.coordinates[i].z}}},{key:"getCoordinateCopy",value:function(e){return new Coordinate(this.coordinates[e])}},{key:"getDimension",value:function(){return this.dimension}},{key:"getX",value:function(e){return this.coordinates[e].x}},{key:"clone",value:function(){for(var t=new Array(this.size()),n=0;n<this.coordinates.length;n++)t[n]=this.coordinates[n].clone();return new e(t,this.dimension)}},{key:"expandEnvelope",value:function(e){for(var t=0;t<this.coordinates.length;t++)e.expandToInclude(this.coordinates[t]);return e}},{key:"copy",value:function(){for(var t=new Array(this.size()),n=0;n<this.coordinates.length;n++)t[n]=this.coordinates[n].copy();return new e(t,this.dimension)}},{key:"toString",value:function(){if(this.coordinates.length>0){var e=new StringBuffer(17*this.coordinates.length);e.append("("),e.append(this.coordinates[0]);for(var t=1;t<this.coordinates.length;t++)e.append(", "),e.append(this.coordinates[t]);return e.append(")"),e.toString()}return"()"}},{key:"getY",value:function(e){return this.coordinates[e].y}},{key:"toCoordinateArray",value:function(){return this.coordinates}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[CoordinateSequence,Serializable]}}]),e}();CoordinateArraySequence.serialVersionUID=-0xcb44a778db18e00;var CoordinateArraySequenceFactory=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"readResolve",value:function(){return e.instance()}},{key:"create",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(t[0]instanceof Array){var r=t[0];return new CoordinateArraySequence(r)}if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateSequence)>-1){var i=t[0];return new CoordinateArraySequence(i)}}else if(2===t.length){var a=t[0],s=t[1];return s>3&&(s=3),2>s?new CoordinateArraySequence(a):new CoordinateArraySequence(a,s)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[CoordinateSequenceFactory,Serializable]}}],[{key:"instance",value:function(){return e.instanceObject}}]),e}();CoordinateArraySequenceFactory.serialVersionUID=-0x38e49fa6cf6f2e00,CoordinateArraySequenceFactory.instanceObject=new CoordinateArraySequenceFactory,HashMap.prototype=new Map$1,HashMap.prototype.get=function(e){return this.map_.get(e)||null},HashMap.prototype.put=function(e,t){return this.map_.set(e,t),t},HashMap.prototype.values=function(){var e=new ArrayList;return Array.from(this.map_.values()).forEach(function(t){return e.add(t)}),e},HashMap.prototype.entrySet=function(){var e=new HashSet;return this.map_.entries().forEach(function(t){return e.add(t)}),e},HashMap.prototype.size=function(){return this.map_.size()};var PrecisionModel=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.modelType=null,this.scale=null;var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(0===r.length)t.modelType=e.FLOATING;else if(1===r.length)if(r[0]instanceof Type){var a=r[0];t.modelType=a,a===e.FIXED&&t.setScale(1)}else if("number"==typeof r[0]){var s=r[0];t.modelType=e.FIXED,t.setScale(s)}else if(r[0]instanceof e){var o=r[0];t.modelType=o.modelType,t.scale=o.scale}};return a.apply(this,r)}return _createClass(e,[{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.modelType===n.modelType&&this.scale===n.scale}},{key:"compareTo",value:function(e){var t=e,n=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return new Integer(n).compareTo(new Integer(r))}},{key:"getScale",value:function(){return this.scale}},{key:"isFloating",value:function(){return this.modelType===e.FLOATING||this.modelType===e.FLOATING_SINGLE}},{key:"getType",value:function(){return this.modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this.modelType===e.FLOATING?t="Floating":this.modelType===e.FLOATING_SINGLE?t="Floating-Single":this.modelType===e.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if("number"==typeof n[0]){var i=n[0];if(Double.isNaN(i))return i;if(this.modelType===e.FLOATING_SINGLE){var a=i;return a}return this.modelType===e.FIXED?Math.round(i*this.scale)/this.scale:i}if(n[0]instanceof Coordinate){var s=n[0];if(this.modelType===e.FLOATING)return null;s.x=this.makePrecise(s.x),s.y=this.makePrecise(s.y)}}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this.modelType===e.FLOATING?t=16:this.modelType===e.FLOATING_SINGLE?t=6:this.modelType===e.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(e){this.scale=Math.abs(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Serializable,Comparable]}}],[{key:"mostPrecise",value:function(e,t){return e.compareTo(t)>=0?e:t}},{key:"Type",get:function(){return Type}}]),e}(),Type=function(){function e(){_classCallCheck(this,e),this.name=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.name=i,e.nameToTypeMap.put(i,this)}}return _createClass(e,[{key:"readResolve",value:function(){return e.nameToTypeMap.get(this.name)}},{key:"toString",value:function(){return this.name}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Serializable]}}]),e}();Type.serialVersionUID=-552860263173159e4,Type.nameToTypeMap=new HashMap,PrecisionModel.serialVersionUID=0x6bee6404e9a25c00,PrecisionModel.FIXED=new Type("FIXED"),PrecisionModel.FLOATING=new Type("FLOATING"),PrecisionModel.FLOATING_SINGLE=new Type("FLOATING SINGLE"),PrecisionModel.maximumPreciseValue=9007199254740992;var GeometryFactory=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null;var a=function n(){for(var r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];if(0===i.length)n.call(t,new PrecisionModel,0);else if(1===i.length){if(i[0].interfaces_&&i[0].interfaces_.indexOf(CoordinateSequenceFactory)>-1){var s=i[0];n.call(t,new PrecisionModel,0,s)}else if(i[0]instanceof PrecisionModel){var o=i[0];n.call(t,o,0,e.getDefaultCoordinateSequenceFactory())}}else if(2===i.length){var o=i[0],u=i[1];n.call(t,o,u,e.getDefaultCoordinateSequenceFactory())}else if(3===i.length){var o=i[0],u=i[1],s=i[2];t.precisionModel=o,t.coordinateSequenceFactory=s,t.SRID=u}};return a.apply(this,r)}return _createClass(e,[{key:"toGeometry",value:function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new Coordinate(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new Coordinate(e.getMinX(),e.getMinY()),new Coordinate(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new Coordinate(e.getMinX(),e.getMinY()),new Coordinate(e.getMinX(),e.getMaxY()),new Coordinate(e.getMaxX(),e.getMaxY()),new Coordinate(e.getMaxX(),e.getMinY()),new Coordinate(e.getMinX(),e.getMinY())]),null)}},{key:"createLineString",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===t.length){if(t[0]instanceof Array){var r=t[0];return this.createLineString(null!==r?this.getCoordinateSequenceFactory().create(r):null)}if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateSequence)>-1){var r=t[0];return new LineString(r,this)}}}},{key:"createMultiLineString",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return new MultiLineString(null,this);if(1===t.length){var r=t[0];return new MultiLineString(r,this)}}},{key:"buildGeometry",value:function(t){for(var n=null,r=!1,i=!1,a=t.iterator();a.hasNext();){var s=a.next(),o=s.getClass();null===n&&(n=o),o!==n&&(r=!0),s.isGeometryCollectionOrDerived()&&(i=!0)}if(null===n)return this.createGeometryCollection();if(r||i)return this.createGeometryCollection(e.toGeometryArray(t));var u=t.iterator().next(),l=t.size()>1;if(l){if(u instanceof Polygon)return this.createMultiPolygon(e.toPolygonArray(t));if(u instanceof LineString)return this.createMultiLineString(e.toLineStringArray(t));if(u instanceof Point)return this.createMultiPoint(e.toPointArray(t));Assert.shouldNeverReachHere("Unhandled class: "+u.getClass().getName())}return u}},{key:"createMultiPointFromCoords",value:function(e){return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}},{key:"createPoint",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===t.length){if(t[0]instanceof Coordinate){var r=t[0];return this.createPoint(null!==r?this.getCoordinateSequenceFactory().create([r]):null)}if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateSequence)>-1){var i=t[0];return new Point(i,this)}}}},{key:"getCoordinateSequenceFactory",value:function(){return this.coordinateSequenceFactory}},{key:"createPolygon",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return new Polygon(null,null,this);if(1===t.length){if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateSequence)>-1){var r=t[0];return this.createPolygon(this.createLinearRing(r))}if(t[0]instanceof Array){var r=t[0];return this.createPolygon(this.createLinearRing(r))}if(t[0]instanceof LinearRing){var i=t[0];return this.createPolygon(i,null)}}else if(2===t.length){var i=t[0],a=t[1];return new Polygon(i,a,this)}}},{key:"getSRID",value:function(){return this.SRID}},{key:"createGeometryCollection",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return new GeometryCollection(null,this);if(1===t.length){var r=t[0];return new GeometryCollection(r,this)}}},{key:"createGeometry",value:function(e){var t=new GeometryEditor(this);return t.edit(e,new(function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"edit",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0];r[1];return this.coordinateSequenceFactory.create(a)}return(e=_get(Object.getPrototypeOf(t.prototype),"edit",this)).call.apply(e,[this].concat(r))}}]),t}(CoordinateSequenceOperation)))}},{key:"getPrecisionModel",value:function(){return this.precisionModel}},{key:"createLinearRing",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===t.length){if(t[0]instanceof Array){var r=t[0];return this.createLinearRing(null!==r?this.getCoordinateSequenceFactory().create(r):null)}if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateSequence)>-1){var r=t[0];return new LinearRing(r,this)}}}},{key:"createMultiPolygon",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return new MultiPolygon(null,this);if(1===t.length){var r=t[0];return new MultiPolygon(r,this)}}},{key:"createMultiPoint",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return new MultiPoint(null,this);if(1===t.length){if(t[0]instanceof Array){var r=t[0];return new MultiPoint(r,this)}if(t[0]instanceof Array){var i=t[0];return this.createMultiPoint(null!==i?this.getCoordinateSequenceFactory().create(i):null)}if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateSequence)>-1){var i=t[0];if(null===i)return this.createMultiPoint(new Array(0));for(var a=new Array(i.size()),s=0;s<i.size();s++){var o=this.getCoordinateSequenceFactory().create(1,i.getDimension());CoordinateSequences.copy(i,s,o,0,1),a[s]=this.createPoint(o)}return this.createMultiPoint(a)}}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Serializable]}}],[{key:"toMultiPolygonArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toGeometryArray",value:function(e){if(null===e)return null;var t=new Array(e.size());return e.toArray(t)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return CoordinateArraySequenceFactory.instance()}},{key:"toMultiLineStringArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toLineStringArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toMultiPointArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toLinearRingArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toPointArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toPolygonArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"createPointFromInternalCoord",value:function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)}}]),e}();GeometryFactory.serialVersionUID=-0x5ea75f2051eeb400;var GeometryTransformer=function(){function e(){_classCallCheck(this,e),this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"transformPoint",value:function(e,t){return this.factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))}},{key:"transformPolygon",value:function(e,t){var n=!0,r=this.transformLinearRing(e.getExteriorRing(),e);null!==r&&r instanceof LinearRing&&!r.isEmpty()||(n=!1);for(var i=new ArrayList,a=0;a<e.getNumInteriorRing();a++){var s=this.transformLinearRing(e.getInteriorRingN(a),e);null===s||s.isEmpty()||(s instanceof LinearRing||(n=!1),i.add(s))}if(n)return this.factory.createPolygon(r,i.toArray([]));var o=new ArrayList;return null!==r&&o.add(r),o.addAll(i),this.factory.buildGeometry(o)}},{key:"createCoordinateSequence",value:function(e){return this.factory.getCoordinateSequenceFactory().create(e)}},{key:"getInputGeometry",value:function(){return this.inputGeom}},{key:"transformMultiLineString",value:function(e,t){for(var n=new ArrayList,r=0;r<e.getNumGeometries();r++){var i=this.transformLineString(e.getGeometryN(r),e);null!==i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)}},{key:"transformCoordinates",value:function(e,t){return this.copy(e)}},{key:"transformLineString",value:function(e,t){return this.factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))}},{key:"transformMultiPoint",value:function(e,t){for(var n=new ArrayList,r=0;r<e.getNumGeometries();r++){var i=this.transformPoint(e.getGeometryN(r),e);null!==i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)}},{key:"transformMultiPolygon",value:function(e,t){for(var n=new ArrayList,r=0;r<e.getNumGeometries();r++){var i=this.transformPolygon(e.getGeometryN(r),e);null!==i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)}},{key:"copy",value:function(e){return e.clone()}},{key:"transformGeometryCollection",value:function(e,t){for(var n=new ArrayList,r=0;r<e.getNumGeometries();r++){var i=this.transform(e.getGeometryN(r));null!==i&&(this.pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(GeometryFactory.toGeometryArray(n)):this.factory.buildGeometry(n)}},{key:"transform",value:function(e){if(this.inputGeom=e,this.factory=e.getFactory(),e instanceof Point)return this.transformPoint(e,null);if(e instanceof MultiPoint)return this.transformMultiPoint(e,null);if(e instanceof LinearRing)return this.transformLinearRing(e,null);if(e instanceof LineString)return this.transformLineString(e,null);if(e instanceof MultiLineString)return this.transformMultiLineString(e,null);if(e instanceof Polygon)return this.transformPolygon(e,null);if(e instanceof MultiPolygon)return this.transformMultiPolygon(e,null);if(e instanceof GeometryCollection)return this.transformGeometryCollection(e,null);throw new IllegalArgumentException$1("Unknown Geometry subtype: "+e.getClass().getName())}},{key:"transformLinearRing",value:function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e);if(null===n)return this.factory.createLinearRing(null);var r=n.size();return r>0&&4>r&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),LineSegment=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.p0=null,this.p1=null;var a=function e(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(0===r.length)e.call(t,new Coordinate,new Coordinate);else if(1===r.length){var a=r[0];e.call(t,a.p0,a.p1)}else if(2===r.length){var s=r[0],o=r[1];t.p0=s,t.p1=o}else if(4===r.length){var u=r[0],l=r[1],c=r[2],h=r[3];e.call(t,new Coordinate(u,l),new Coordinate(c,h))}};return a.apply(this,r)}return _createClass(e,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0],a=CGAlgorithms.orientationIndex(this.p0,this.p1,i.p0),s=CGAlgorithms.orientationIndex(this.p0,this.p1,i.p1);return a>=0&&s>=0?Math.max(a,s):0>=a&&0>=s?Math.max(a,s):0}if(n[0]instanceof Coordinate){var o=n[0];return CGAlgorithms.orientationIndex(this.p0,this.p1,o)}}}},{key:"toGeometry",value:function(e){return e.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)}},{key:"intersection",value:function(e){var t=new RobustLineIntersector;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null}},{key:"project",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof Coordinate){var i=n[0];if(i.equals(this.p0)||i.equals(this.p1))return new Coordinate(i);var a=this.projectionFactor(i),s=new Coordinate;return s.x=this.p0.x+a*(this.p1.x-this.p0.x),s.y=this.p0.y+a*(this.p1.y-this.p0.y),s}if(n[0]instanceof e){var o=n[0],u=this.projectionFactor(o.p0),l=this.projectionFactor(o.p1);if(u>=1&&l>=1)return null;if(0>=u&&0>=l)return null;var c=this.project(o.p0);0>u&&(c=this.p0),u>1&&(c=this.p1);var h=this.project(o.p1);return 0>l&&(h=this.p0),l>1&&(h=this.p1),new e(c,h)}}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(e){return 0===e?this.p0:this.p1}},{key:"distancePerpendicular",value:function(e){return CGAlgorithms.distancePointLinePerpendicular(e,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return e.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=t*t+n*n;if(0>=r)return Double.NaN;var i=((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/r;return i}},{key:"closestPoints",value:function(e){var t=this.intersection(e);if(null!==t)return[t,t];var n=new Array(2),r=Double.MAX_VALUE,i=null,a=this.closestPoint(e.p0);r=a.distance(e.p0),n[0]=a,n[1]=e.p0;var s=this.closestPoint(e.p1);i=s.distance(e.p1),r>i&&(r=i,n[0]=s,n[1]=e.p1);var o=e.closestPoint(this.p0);i=o.distance(this.p0),r>i&&(r=i,n[0]=this.p0,n[1]=o);var u=e.closestPoint(this.p1);return i=u.distance(this.p1),r>i&&(r=i,n[0]=this.p1,n[1]=u),n}},{key:"closestPoint",value:function(e){var t=this.projectionFactor(e);if(t>0&&1>t)return this.project(e);var n=this.p0.distance(e),r=this.p1.distance(e);return r>n?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(e){var t=e,n=this.p0.compareTo(t.p0);return 0!==n?n:this.p1.compareTo(t.p1)}},{key:"reverse",value:function(){var e=this.p0;this.p0=this.p1,this.p1=e}},{key:"equalsTopo",value:function(e){return this.p0.equals(e.p0)&&this.p1.equals(e.p1)||this.p0.equals(e.p1)&&this.p1.equals(e.p0)}},{key:"lineIntersection",value:function(e){try{var t=HCoordinate.intersection(this.p0,this.p1,e.p0,e.p1);return t}catch(e){if(!(e instanceof NotRepresentableException))throw e}finally{}return null}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),r=this.p0.y+e*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,a=this.p1.y-this.p0.y,s=Math.sqrt(i*i+a*a),o=0,u=0;if(0!==t){if(0>=s)throw new IllegalStateException("Cannot compute offset from zero-length line segment");o=t*i/s,u=t*a/s}var l=n-u,c=r+o,h=new Coordinate(l,c);return h}},{key:"setCoordinates",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];this.setCoordinates(r.p0,r.p1)}else if(2===t.length){var i=t[0],a=t[1];this.p0.x=i.x,this.p0.y=i.y,this.p1.x=a.x,this.p1.y=a.y}}},{key:"segmentFraction",value:function(e){var t=this.projectionFactor(e);return 0>t?t=0:(t>1||Double.isNaN(t))&&(t=1),t}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"distance",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return CGAlgorithms.distanceLineLine(this.p0,this.p1,i.p0,i.p1)}if(n[0]instanceof Coordinate){var a=n[0];return CGAlgorithms.distancePointLine(a,this.p0,this.p1)}}}},{key:"pointAlong",value:function(e){var t=new Coordinate;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t}},{key:"hashCode",value:function(){var e=java.lang.Double.doubleToLongBits(this.p0.x);e^=31*java.lang.Double.doubleToLongBits(this.p0.y);var t=Math.trunc(e)^Math.trunc(e>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);n^=31*java.lang.Double.doubleToLongBits(this.p1.y);var r=Math.trunc(n)^Math.trunc(n>>32);return t^r}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable,Serializable]}}],[{key:"midPoint",value:function(e,t){return new Coordinate((e.x+t.x)/2,(e.y+t.y)/2)}}]),e}();LineSegment.serialVersionUID=0x2d2172135f411c00;var Densifier=function(){function e(){_classCallCheck(this,e),this.inputGeom=null,this.distanceTolerance=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.inputGeom=i}}return _createClass(e,[{key:"getResultGeometry",value:function(){return new DensifyTransformer(this.distanceTolerance).transform(this.inputGeom)}},{key:"setDistanceTolerance",value:function(e){if(0>=e)throw new IllegalArgumentException$1("Tolerance must be positive");this.distanceTolerance=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"densifyPoints",value:function(e,t,n){for(var r=new LineSegment,i=new CoordinateList,a=0;a<e.length-1;a++){r.p0=e[a],r.p1=e[a+1],i.add(r.p0,!1);var s=r.getLength(),o=Math.trunc(s/t)+1;if(o>1)for(var u=s/o,l=1;o>l;l++){var c=l*u/s,h=r.pointAlong(c);n.makePrecise(h),i.add(h,!1)}}return i.add(e[e.length-1],!1),i.toCoordinateArray()}},{key:"densify",value:function(t,n){var r=new e(t);return r.setDistanceTolerance(n),r.getResultGeometry()}},{key:"DensifyTransformer",get:function(){return DensifyTransformer}}]),e}(),DensifyTransformer=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.distanceTolerance=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];e.distanceTolerance=a}return e}return _inherits(t,e),_createClass(t,[{key:"transformMultiPolygon",value:function(e,n){var r=_get(Object.getPrototypeOf(t.prototype),"transformMultiPolygon",this).call(this,e,n);return this.createValidArea(r)}},{key:"transformPolygon",value:function(e,n){var r=_get(Object.getPrototypeOf(t.prototype),"transformPolygon",this).call(this,e,n);return n instanceof MultiPolygon?r:this.createValidArea(r)}},{key:"transformCoordinates",value:function(e,t){var n=e.toCoordinateArray(),r=Densifier.densifyPoints(n,this.distanceTolerance,t.getPrecisionModel());return t instanceof LineString&&1===r.length&&(r=new Array(0)),this.factory.getCoordinateSequenceFactory().create(r)}},{key:"createValidArea",value:function(e){return e.buffer(0)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(GeometryTransformer);EmptyStackException.prototype=new Error,EmptyStackException.prototype.name="EmptyStackException",Stack.prototype=new List,Stack.prototype.add=function(e){return this.array_.push(e),!0},Stack.prototype.get=function(e){if(0>e||e>=this.size())throw new IndexOutOfBoundsException;return this.array_[e]},Stack.prototype.push=function(e){return this.array_.push(e),e},Stack.prototype.pop=function(e){if(0===this.array_.length)throw new EmptyStackException;return this.array_.pop()},Stack.prototype.peek=function(){if(0===this.array_.length)throw new EmptyStackException;return this.array_[this.array_.length-1]},Stack.prototype.empty=function(){return 0===this.array_.length?!0:!1},Stack.prototype.isEmpty=function(){return this.empty()},Stack.prototype.search=function(e){return this.array_.indexOf(e)},Stack.prototype.size=function(){return this.array_.length},Stack.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;n>t;t++)e.push(this.array_[t]);return e};var Quadrant=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isNorthern",value:function(t){return t===e.NE||t===e.NW}},{key:"isOpposite",value:function(e,t){if(e===t)return!1;var n=(e-t+4)%4;return 2===n?!0:!1}},{key:"commonHalfPlane",value:function(e,t){if(e===t)return e;var n=(e-t+4)%4;if(2===n)return-1;var r=t>e?e:t,i=e>t?e:t;return 0===r&&3===i?3:r}},{key:"isInHalfPlane",value:function(t,n){return n===e.SE?t===e.SE||t===e.SW:t===n||t===n+1}},{key:"quadrant",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){if("number"==typeof n[0]&&"number"==typeof n[1]){var i=n[0],a=n[1];if(0===i&&0===a)throw new IllegalArgumentException$1("Cannot compute the quadrant for point ( "+i+", "+a+" )");return i>=0?a>=0?e.NE:e.SE:a>=0?e.NW:e.SW}if(n[0]instanceof Coordinate&&n[1]instanceof Coordinate){var s=n[0],o=n[1];if(o.x===s.x&&o.y===s.y)throw new IllegalArgumentException$1("Cannot compute the quadrant for two identical points "+s);return o.x>=s.x?o.y>=s.y?e.NE:e.SE:o.y>=s.y?e.NW:e.SW}}}}]),e}();Quadrant.NE=0,Quadrant.NW=1,Quadrant.SW=2,Quadrant.SE=3;var HalfEdge=function(){function e(){_classCallCheck(this,e),this._orig=null,this._sym=null,this._next=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this._orig=i}}return _createClass(e,[{key:"find",value:function(e){var t=this;do{if(null===t)return null;if(t.dest().equals2D(e))return t;t=t.oNext()}while(t!==this);return null}},{key:"dest",value:function(){return this._sym._orig}},{key:"oNext",value:function(){return this._sym._next}},{key:"insert",value:function(e){if(this.oNext()===this)return this.insertAfter(e),null;var t=this.compareTo(e),n=this;do{var r=n.oNext(),i=r.compareTo(e);if(i!==t||r===this)return n.insertAfter(e),null;n=r}while(n!==this);Assert.shouldNeverReachHere()}},{key:"insertAfter",value:function(e){Assert.equals(this._orig,e.orig());var t=this.oNext();this._sym.setNext(e),e.sym().setNext(t)}},{key:"degree",value:function e(){var e=0,t=this;do e++,t=t.oNext();while(t!==this);return e}},{key:"equals",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];return this._orig.equals2D(a)&&this._sym._orig.equals(s)}return(t=_get(Object.getPrototypeOf(e.prototype),"equals",this)).call.apply(t,[this].concat(r))}},{key:"deltaY",value:function(){return this._sym._orig.y-this._orig.y}},{key:"sym",value:function(){return this._sym}},{key:"prev",value:function(){return this._sym.next()._sym}},{key:"compareAngularDirection",value:function(e){var t=this.deltaX(),n=this.deltaY(),r=e.deltaX(),i=e.deltaY();if(t===r&&n===i)return 0;var a=Quadrant.quadrant(t,n),s=Quadrant.quadrant(r,i);return a>s?1:s>a?-1:CGAlgorithms.computeOrientation(e._orig,e.dest(),this.dest())}},{key:"prevNode",value:function(){for(var e=this;2===e.degree();)if(e=e.prev(),e===this)return null;return e}},{key:"compareTo",value:function(e){var t=e,n=this.compareAngularDirection(t);return n}},{key:"next",value:function(){return this._next}},{key:"setSym",value:function(e){this._sym=e}},{key:"orig",value:function(){return this._orig}},{key:"toString",value:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"}},{key:"setNext",value:function(e){this._next=e}},{key:"init",value:function(e){this.setSym(e),e.setSym(this),this.setNext(e),e.setNext(this)}},{key:"deltaX",value:function(){return this._sym._orig.x-this._orig.x}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"init",value:function(e,t){if(null!==e._sym||null!==t._sym||null!==e._next||null!==t._next)throw new IllegalStateException("Edges are already initialized");return e.init(t),e}},{key:"create",value:function(t,n){var r=new e(t),i=new e(n);return r.init(i),r}}]),e}(),MarkHalfEdge=function(e){function t(){_classCallCheck(this,t);
var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e._isMarked=!1;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length)var a=r[0],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,a));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"mark",value:function(){this._isMarked=!0}},{key:"setMark",value:function(e){this._isMarked=e}},{key:"isMarked",value:function(){return this._isMarked}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"setMarkBoth",value:function(e,t){e.setMark(t),e.sym().setMark(t)}},{key:"isMarked",value:function(e){return e.isMarked()}},{key:"setMark",value:function(e,t){e.setMark(t)}},{key:"markBoth",value:function(e){e.mark(),e.sym().mark()}},{key:"mark",value:function(e){e.mark()}}]),t}(HalfEdge),EdgeGraph=function(){function e(){_classCallCheck(this,e),this.vertexMap=new HashMap;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"insert",value:function(e,t,n){var r=this.create(e,t);null!==n?n.insert(r):this.vertexMap.put(e,r);var i=this.vertexMap.get(t);return null!==i?i.insert(r.sym()):this.vertexMap.put(t,r.sym()),r}},{key:"create",value:function(e,t){var n=this.createEdge(e),r=this.createEdge(t);return HalfEdge.init(n,r),n}},{key:"createEdge",value:function(e){return new HalfEdge(e)}},{key:"addEdge",value:function(t,n){if(!e.isValidEdge(t,n))return null;var r=this.vertexMap.get(t),i=null;if(null!==r&&(i=r.find(n)),null!==i)return i;var a=this.insert(t,n,r);return a}},{key:"getVertexEdges",value:function(){return this.vertexMap.values()}},{key:"findEdge",value:function(e,t){var n=this.vertexMap.get(e);return null===n?null:n.find(t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isValidEdge",value:function(e,t){var n=t.compareTo(e);return 0!==n}}]),e}(),DissolveHalfEdge=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e._isStart=!1;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length)var a=r[0],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,a));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"setStart",value:function(){this._isStart=!0}},{key:"isStart",value:function(){return this._isStart}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(MarkHalfEdge),DissolveEdgeGraph=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"createEdge",value:function(e){return new DissolveHalfEdge(e)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(EdgeGraph),LineDissolver=function(){function e(){_classCallCheck(this,e),this.result=null,this.factory=null,this.graph=null,this.lines=new ArrayList,this.nodeEdgeStack=new Stack,this.ringStartEdge=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length&&(this.graph=new DissolveEdgeGraph)}return _createClass(e,[{key:"addLine",value:function(e){this.lines.add(this.factory.createLineString(e.toCoordinateArray()))}},{key:"updateRingStartEdge",value:function(e){return e.isStart()||(e=e.sym(),e.isStart())?null===this.ringStartEdge?(this.ringStartEdge=e,null):void(e.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=e)):null}},{key:"getResult",value:function(){return null===this.result&&this.computeResult(),this.result}},{key:"process",value:function(e){var t=e.prevNode();null===t&&(t=e),this.stackEdges(t),this.buildLines()}},{key:"buildRing",value:function(e){var t=new CoordinateList,n=e;for(t.add(n.orig().copy(),!1);2===n.sym().degree();){var r=n.next();if(r===e)break;t.add(r.orig().copy(),!1),n=r}t.add(n.dest().copy(),!1),this.addLine(t)}},{key:"buildLine",value:function(e){var t=new CoordinateList,n=e;for(this.ringStartEdge=null,MarkHalfEdge.markBoth(n),t.add(n.orig().copy(),!1);2===n.sym().degree();){this.updateRingStartEdge(n);var r=n.next();if(r===e)return this.buildRing(this.ringStartEdge),null;t.add(r.orig().copy(),!1),n=r,MarkHalfEdge.markBoth(n)}t.add(n.dest().copy(),!1),this.stackEdges(n.sym()),this.addLine(t)}},{key:"stackEdges",value:function(e){var t=e;do MarkHalfEdge.isMarked(t)||this.nodeEdgeStack.add(t),t=t.oNext();while(t!==e)}},{key:"computeResult",value:function(){for(var e=this.graph.getVertexEdges(),t=e.iterator();t.hasNext();){var n=t.next();MarkHalfEdge.isMarked(n)||this.process(n)}this.result=this.factory.buildGeometry(this.lines)}},{key:"buildLines",value:function(){for(;!this.nodeEdgeStack.empty();){var e=this.nodeEdgeStack.pop();MarkHalfEdge.isMarked(e)||this.buildLine(e)}}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof Geometry){var r=t[0];r.apply(new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e){e instanceof LineString&&this.add(e)}},{key:"interfaces_",get:function(){return[GeometryComponentFilter$1]}}]),e}()))}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(Collection)>-1)for(var i=t[0],a=i.iterator();a.hasNext();){var s=a.next();this.add(s)}else if(t[0]instanceof LineString){var o=t[0];null===this.factory&&(this.factory=o.getFactory());for(var u=o.getCoordinateSequence(),l=!1,a=1;a<u.size();a++){var c=this.graph.addEdge(u.getCoordinate(a-1),u.getCoordinate(a));null!==c&&(l||(c.setStart(),l=!0))}}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"dissolve",value:function(t){var n=new e;return n.add(t),n.getResult()}}]),e}(),geometryTypes=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],GeoJSONParser=function(){function e(t){_classCallCheck(this,e),this.geometryFactory=t||new GeometryFactory}return _createClass(e,[{key:"read",value:function(e){var t=void 0;t="string"==typeof e?JSON.parse(e):e;var n=t.type;if(!parse[n])throw new Error("Unknown GeoJSON type: "+t.type);return-1!==geometryTypes.indexOf(n)?parse[n].apply(this,[t.coordinates]):"GeometryCollection"===n?parse[n].apply(this,[t.geometries]):this.parse[n].apply(this,[t])}},{key:"write",value:function(e){var t=e.getGeometryType();if(!extract[t])throw new Error("Geometry is not supported");return extract[t].apply(this,[e])}}]),e}(),parse={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var r=e.geometry.type;if(!this.parse[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=this.parse.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t={};if(e.features){t.features=[];for(var n=0;n<e.features.length;++n)t.features.push(this.read(e.features[n]))}return e.bbox&&(t.bbox=this.parse.bbox.apply(this,[e.bbox])),t},coordinates:function e(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new Coordinate(r[0],r[1]))}return e},bbox:function(e){return this.geometryFactory.createLinearRing([new Coordinate(e[0],e[1]),new Coordinate(e[2],e[1]),new Coordinate(e[2],e[3]),new Coordinate(e[0],e[3]),new Coordinate(e[0],e[1])])},Point:function(e){var t=new Coordinate(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=[],n=0;n<e.length;++n)t.push(parse.Point.apply(this,[e[n]]));return this.geometryFactory.createMultiPoint(t)},LineString:function(e){var t=parse.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=[],n=0;n<e.length;++n)t.push(parse.LineString.apply(this,[e[n]]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(e){for(var t=parse.coordinates.apply(this,[e[0]]),n=this.geometryFactory.createLinearRing(t),r=[],i=1;i<e.length;++i){var a=e[i],s=parse.coordinates.apply(this,[a]),o=this.geometryFactory.createLinearRing(s);r.push(o)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(parse.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(this.read(r))}return this.geometryFactory.createGeometryCollection(t)}},extract={coordinate:function(e){return[e.x,e.y]},Point:function(e){var t=extract.coordinate.apply(this,[e.getCoordinate()]);return{type:"Point",coordinates:t}},MultiPoint:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var r=e.geometries[n],i=extract.Point.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(e){for(var t=[],n=0;n<e.points.length;++n){var r=e.points[n];t.push(extract.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:t}},MultiLineString:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var r=e.geometries[n],i=extract.LineString.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(e){var t=[],n=extract.LineString.apply(this,[e.shell]);t.push(n.coordinates);for(var r=0;r<e.holes.length;++r){var i=e.holes[r],a=extract.LineString.apply(this,[i]);t.push(a.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var r=e.geometries[n],i=extract.Polygon.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var r=e.geometries[n],i=r.getGeometryType().slice(10);t.push(extract[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:t}}},GeoJSONReader=function(){function e(t){_classCallCheck(this,e),this.geometryFactory=t||new GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new GeoJSONParser(this.geometryFactory)}return _createClass(e,[{key:"read",value:function(e){var t=this.parser.read(e);return this.precisionModel.getType()===PrecisionModel.FIXED&&this.reducePrecision(t),t}},{key:"reducePrecision",value:function(e){var t,n;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(t=0,n=e.points.length;n>t;t++)this.precisionModel.makePrecise(e.points[t]);else if(e.geometries)for(t=0,n=e.geometries.length;n>t;t++)this.reducePrecision(e.geometries[t])}}]),e}(),GeoJSONWriter=function(){function e(){_classCallCheck(this,e),this.parser=new GeoJSONParser(this.geometryFactory)}return _createClass(e,[{key:"write",value:function(e){return this.parser.write(e)}}]),e}(),WKTReader=function(){function e(t){_classCallCheck(this,e),this.geometryFactory=t||new GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new WKTParser(this.geometryFactory)}return _createClass(e,[{key:"read",value:function(e){var t=this.parser.read(e);return this.precisionModel.getType()===PrecisionModel.FIXED&&this.reducePrecision(t),t}},{key:"reducePrecision",value:function(e){if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(var t=0,n=e.points.coordinates.length;n>t;t++)this.precisionModel.makePrecise(e.points.coordinates[t]);else if(e.geometries)for(var t=0,n=e.geometries.length;n>t;t++)this.reducePrecision(e.geometries[t])}}]),e}(),OL3Parser=function(){function e(t){_classCallCheck(this,e),this.geometryFactory=t||new GeometryFactory}return _createClass(e,[{key:"read",value:function(e){return e instanceof ol.geom.Point?this.convertFromPoint(e):e instanceof ol.geom.LineString?this.convertFromLineString(e):e instanceof ol.geom.LinearRing?this.convertFromLinearRing(e):e instanceof ol.geom.Polygon?this.convertFromPolygon(e):e instanceof ol.geom.MultiPoint?this.convertFromMultiPoint(e):e instanceof ol.geom.MultiLineString?this.convertFromMultiLineString(e):e instanceof ol.geom.MultiPolygon?this.convertFromMultiPolygon(e):e instanceof ol.geom.GeometryCollection?this.convertFromCollection(e):void 0}},{key:"convertFromPoint",value:function(e){var t=e.getCoordinates();return this.geometryFactory.createPoint(new Coordinate(t[0],t[1]))}},{key:"convertFromLineString",value:function(e){return this.geometryFactory.createLineString(e.getCoordinates().map(function(e){return new Coordinate(e[0],e[1])}))}},{key:"convertFromLinearRing",value:function(e){return this.geometryFactory.createLinearRing(e.getCoordinates().map(function(e){return new Coordinate(e[0],e[1])}))}},{key:"convertFromPolygon",value:function(e){for(var t=e.getLinearRings(),n=null,r=[],i=0;i<t.length;i++){var a=this.convertFromLinearRing(t[i]);0===i?n=a:r.push(a)}return this.geometryFactory.createPolygon(n,r)}},{key:"convertFromMultiPoint",value:function(e){var t=e.getPoints().map(function(e){return this.convertFromPoint(e)},this);return this.geometryFactory.createMultiPoint(t)}},{key:"convertFromMultiLineString",value:function(e){var t=e.getLineStrings().map(function(e){return this.convertFromLineString(e)},this);return this.geometryFactory.createMultiLineString(t)}},{key:"convertFromMultiPolygon",value:function(e){var t=e.getPolygons().map(function(e){return this.convertFromPolygon(e)},this);return this.geometryFactory.createMultiPolygon(t)}},{key:"convertFromCollection",value:function(e){var t=e.getGeometries().map(function(e){return this.read(e)},this);return this.geometryFactory.createGeometryCollection(t)}},{key:"write",value:function(e){return"Point"===e.getGeometryType()?this.convertToPoint(e.getCoordinate()):"LineString"===e.getGeometryType()?this.convertToLineString(e):"LinearRing"===e.getGeometryType()?this.convertToLinearRing(e):"Polygon"===e.getGeometryType()?this.convertToPolygon(e):"MultiPoint"===e.getGeometryType()?this.convertToMultiPoint(e):"MultiLineString"===e.getGeometryType()?this.convertToMultiLineString(e):"MultiPolygon"===e.getGeometryType()?this.convertToMultiPolygon(e):"GeometryCollection"===e.getGeometryType()?this.convertToCollection(e):void 0}},{key:"convertToPoint",value:function(e){return new ol.geom.Point([e.x,e.y])}},{key:"convertToLineString",value:function(e){var t=e.points.coordinates.map(p2c);return new ol.geom.LineString(t)}},{key:"convertToLinearRing",value:function(e){var t=e.points.coordinates.map(p2c);return new ol.geom.LinearRing(t)}},{key:"convertToPolygon",value:function(e){for(var t=[e.shell.points.coordinates.map(p2c)],n=0;n<e.holes.length;n++)t.push(e.holes[n].points.coordinates.map(p2c));return new ol.geom.Polygon(t)}},{key:"convertToMultiPoint",value:function(e){return new ol.geom.MultiPoint(e.getCoordinates().map(p2c))}},{key:"convertToMultiLineString",value:function(e){for(var t=[],n=0;n<e.geometries.length;n++)t.push(this.convertToLineString(e.geometries[n]).getCoordinates());return new ol.geom.MultiLineString(t)}},{key:"convertToMultiPolygon",value:function(e){for(var t=[],n=0;n<e.geometries.length;n++)t.push(this.convertToPolygon(e.geometries[n]).getCoordinates());return new ol.geom.MultiPolygon(t)}},{key:"convertToCollection",value:function(e){for(var t=[],n=0;n<e.geometries.length;n++){var r=e.geometries[n];t.push(this.write(r))}return new ol.geom.GeometryCollection(t)}}]),e}(),io={GeoJSONReader:GeoJSONReader,GeoJSONWriter:GeoJSONWriter,OL3Parser:OL3Parser,WKTReader:WKTReader,WKTWriter:WKTWriter},GeometryCollectionIterator=function(){function e(){_classCallCheck(this,e),this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.parent=i,this.atStart=!0,this.index=0,this.max=i.getNumGeometries()}}return _createClass(e,[{key:"next",value:function(){if(this.atStart)return this.atStart=!1,e.isAtomic(this.parent)&&this.index++,this.parent;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new NoSuchElementException;var t=this.parent.getGeometryN(this.index++);return t instanceof GeometryCollection?(this.subcollectionIterator=new e(t),this.subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new UnsupportedOperationException(this.getClass().getName())}},{key:"hasNext",value:function(){if(this.atStart)return!0;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return this.index>=this.max?!1:!0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Iterator]}}],[{key:"isAtomic",value:function(e){return!(e instanceof GeometryCollection)}}]),e}(),PointLocator=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.boundaryRule=BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null;var a=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length);else if(1===n.length){var i=n[0];if(null===i)throw new IllegalArgumentException$1("Rule must be non-null");t.boundaryRule=i}};return a.apply(this,r)}return _createClass(e,[{key:"locateInPolygonRing",value:function(e,t){return t.getEnvelopeInternal().intersects(e)?CGAlgorithms.locatePointInRing(e,t.getCoordinates()):Location.EXTERIOR}},{key:"intersects",value:function(e,t){return this.locate(e,t)!==Location.EXTERIOR}},{key:"updateLocationInfo",value:function(e){e===Location.INTERIOR&&(this.isIn=!0),e===Location.BOUNDARY&&this.numBoundaries++}},{key:"computeLocation",value:function(e,t){if(t instanceof Point&&this.updateLocationInfo(this.locate(e,t)),t instanceof LineString)this.updateLocationInfo(this.locate(e,t));else if(t instanceof Polygon)this.updateLocationInfo(this.locate(e,t));else if(t instanceof MultiLineString)for(var n=t,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locate(e,i))}else if(t instanceof MultiPolygon)for(var a=t,r=0;r<a.getNumGeometries();r++){var s=a.getGeometryN(r);this.updateLocationInfo(this.locate(e,s))}else if(t instanceof GeometryCollection)for(var o=new GeometryCollectionIterator(t);o.hasNext();){var u=o.next();u!==t&&this.computeLocation(e,u)}}},{key:"locate",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){if(t[0]instanceof Coordinate&&t[1]instanceof Polygon){var r=t[0],i=t[1];if(i.isEmpty())return Location.EXTERIOR;var a=i.getExteriorRing(),s=this.locateInPolygonRing(r,a);if(s===Location.EXTERIOR)return Location.EXTERIOR;if(s===Location.BOUNDARY)return Location.BOUNDARY;for(var o=0;o<i.getNumInteriorRing();o++){var u=i.getInteriorRingN(o),l=this.locateInPolygonRing(r,u);if(l===Location.INTERIOR)return Location.EXTERIOR;if(l===Location.BOUNDARY)return Location.BOUNDARY}return Location.INTERIOR}if(t[0]instanceof Coordinate&&t[1]instanceof LineString){var r=t[0],c=t[1];if(!c.getEnvelopeInternal().intersects(r))return Location.EXTERIOR;var h=c.getCoordinates();return c.isClosed()||!r.equals(h[0])&&!r.equals(h[h.length-1])?CGAlgorithms.isOnLine(r,h)?Location.INTERIOR:Location.EXTERIOR:Location.BOUNDARY}if(t[0]instanceof Coordinate&&t[1]instanceof Point){var r=t[0],g=t[1],f=g.getCoordinate();return f.equals2D(r)?Location.INTERIOR:Location.EXTERIOR}if(t[0]instanceof Coordinate&&t[1]instanceof Geometry){var r=t[0],y=t[1];return y.isEmpty()?Location.EXTERIOR:y instanceof LineString?this.locate(r,y):y instanceof Polygon?this.locate(r,y):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(r,y),this.boundaryRule.isInBoundary(this.numBoundaries)?Location.BOUNDARY:this.numBoundaries>0||this.isIn?Location.INTERIOR:Location.EXTERIOR)}}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Position=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"opposite",value:function(t){return t===e.LEFT?e.RIGHT:t===e.RIGHT?e.LEFT:t}}]),e}();Position.ON=0,Position.LEFT=1,Position.RIGHT=2;var MonotoneChain=function(){function e(){_classCallCheck(this,e),this.mce=null,this.chainIndex=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1];this.mce=i,this.chainIndex=a}}return _createClass(e,[{key:"computeIntersections",value:function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),SweepLineEvent=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null;var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];t.eventType=e.DELETE,t.xValue=a,t.insertEvent=s}else if(3===r.length){var o=r[0],a=r[1],u=r[2];t.eventType=e.INSERT,t.label=o,t.xValue=a,t.obj=u}};return a.apply(this,r)}return _createClass(e,[{key:"isDelete",value:function(){return this.eventType===e.DELETE}},{key:"setDeleteEventIndex",value:function(e){this.deleteEventIndex=e}},{key:"getObject",value:function(){return this.obj}},{key:"compareTo",value:function(e){var t=e;return this.xValue<t.xValue?-1:this.xValue>t.xValue?1:this.eventType<t.eventType?-1:this.eventType>t.eventType?1:0}},{key:"getInsertEvent",value:function(){return this.insertEvent}},{key:"isInsert",value:function(){return this.eventType===e.INSERT}},{key:"isSameLabel",value:function(e){return null===this.label?!1:this.label===e.label}},{key:"getDeleteEventIndex",value:function(){return this.deleteEventIndex}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable]}}]),e}();SweepLineEvent.INSERT=1,SweepLineEvent.DELETE=2;var EdgeSetIntersector=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Collections=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"reverseOrder",value:function(){return{compare:function(e,t){return t.compareTo(e)}}}},{key:"min",value:function(t){return e.sort(t),t.get(0)}},{key:"sort",value:function(e,t){var n=e.toArray();t?Arrays.sort(n,t):Arrays.sort(n);for(var r=e.iterator(),i=0,a=n.length;a>i;i++)r.next(),r.set(n[i])}}]),e}(),SegmentIntersector=function(){function e(){_classCallCheck(this,e),this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],a=n[1],s=n[2];this.li=i,this.includeProper=a,this.recordIsolated=s}}return _createClass(e,[{key:"isTrivialIntersection",value:function(t,n,r,i){if(t===r&&1===this.li.getIntersectionNum()){if(e.isAdjacentSegments(n,i))return!0;if(t.isClosed()){var a=t.getNumPoints()-1;if(0===n&&i===a||0===i&&n===a)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this.properIntersectionPoint}},{key:"setIsDoneIfProperInt",value:function(e){this.isDoneWhenProperInt=e}},{key:"hasProperInteriorIntersection",value:function(){return this.hasProperInterior}},{key:"isBoundaryPointInternal",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinate();if(e.isIntersection(i))return!0}return!1}},{key:"hasProperIntersection",value:function(){return this.hasProper}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return this._isDone}},{key:"isBoundaryPoint",value:function(e,t){return null===t?!1:this.isBoundaryPointInternal(e,t[0])?!0:this.isBoundaryPointInternal(e,t[1])?!0:!1}},{key:"setBoundaryNodes",value:function(e,t){this.bdyNodes=new Array(2),this.bdyNodes[0]=e,this.bdyNodes[1]=t}},{key:"addIntersections",value:function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],a=e.getCoordinates()[t+1],s=n.getCoordinates()[r],o=n.getCoordinates()[r+1];this.li.computeIntersection(i,a,s,o),this.li.hasIntersection()&&(this.recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,(this.includeProper||!this.li.isProper())&&(e.addIntersections(this.li,t,0),n.addIntersections(this.li,r,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isAdjacentSegments",value:function(e,t){return 1===Math.abs(e-t)}}]),e}(),SimpleMCSweepLineIntersector=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.events=new ArrayList,e.nOverlaps=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length,e}return _inherits(t,e),_createClass(t,[{key:"prepareEvents",value:function(){Collections.sort(this.events);for(var e=0;e<this.events.size();e++){var t=this.events.get(e);t.isDelete()&&t.getInsertEvent().setDeleteEventIndex(e)}}},{key:"computeIntersections",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];this.nOverlaps=0,this.prepareEvents();for(var i=0;i<this.events.size();i++){var a=this.events.get(i);if(a.isInsert()&&this.processOverlaps(i,a.getDeleteEventIndex(),a,r),r.isDone())break}}else if(3===t.length)if(t[2]instanceof SegmentIntersector&&t[0].interfaces_&&t[0].interfaces_.indexOf(List)>-1&&t[1].interfaces_&&t[1].interfaces_.indexOf(List)>-1){var s=t[0],o=t[1],r=t[2];this.addEdges(s,s),this.addEdges(o,o),this.computeIntersections(r)}else if("boolean"==typeof t[2]&&t[0].interfaces_&&t[0].interfaces_.indexOf(List)>-1&&t[1]instanceof SegmentIntersector){var u=t[0],r=t[1],l=t[2];l?this.addEdges(u,null):this.addEdges(u),this.computeIntersections(r)}}},{key:"addEdge",value:function(e,t){for(var n=e.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var a=new MonotoneChain(n,i),s=new SweepLineEvent(t,n.getMinX(i),a);this.events.add(s),this.events.add(new SweepLineEvent(n.getMaxX(i),s))}}},{key:"processOverlaps",value:function(e,t,n,r){for(var i=n.getObject(),a=e;t>a;a++){var s=this.events.get(a);if(s.isInsert()){var o=s.getObject();n.isSameLabel(s)||(i.computeIntersections(o,r),this.nOverlaps++)}}}},{key:"addEdges",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)for(var r=t[0],i=r.iterator();i.hasNext();){var a=i.next();this.addEdge(a,a)}else if(2===t.length)for(var r=t[0],s=t[1],i=r.iterator();i.hasNext();){var a=i.next();this.addEdge(a,s)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(EdgeSetIntersector),TopologyLocation=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.location=null;var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){if(r[0]instanceof Array){var a=r[0];t.init(a.length)}else if(Number.isInteger(r[0])){var s=r[0];t.init(1),t.location[Position.ON]=s}else if(r[0]instanceof e){var o=r[0];if(t.init(o.location.length),null!==o)for(var u=0;u<t.location.length;u++)t.location[u]=o.location[u]}}else if(3===r.length){var s=r[0],l=r[1],c=r[2];t.init(3),t.location[Position.ON]=s,t.location[Position.LEFT]=l,t.location[Position.RIGHT]=c}};return a.apply(this,r)}return _createClass(e,[{key:"setAllLocations",value:function(e){for(var t=0;t<this.location.length;t++)this.location[t]=e}},{key:"isNull",value:function(){for(var e=0;e<this.location.length;e++)if(this.location[e]!==Location.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(e){for(var t=0;t<this.location.length;t++)this.location[t]===Location.NONE&&(this.location[t]=e)}},{key:"isLine",value:function(){return 1===this.location.length}},{key:"merge",value:function(e){if(e.location.length>this.location.length){var t=new Array(3);t[Position.ON]=this.location[Position.ON],t[Position.LEFT]=Location.NONE,t[Position.RIGHT]=Location.NONE,this.location=t}for(var n=0;n<this.location.length;n++)this.location[n]===Location.NONE&&n<e.location.length&&(this.location[n]=e.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var e=this.location[Position.LEFT];this.location[Position.LEFT]=this.location[Position.RIGHT],this.location[Position.RIGHT]=e}},{key:"toString",value:function(){var e=new StringBuffer;return this.location.length>1&&e.append(Location.toLocationSymbol(this.location[Position.LEFT])),e.append(Location.toLocationSymbol(this.location[Position.ON])),this.location.length>1&&e.append(Location.toLocationSymbol(this.location[Position.RIGHT])),e.toString()}},{key:"setLocations",value:function(e,t,n){this.location[Position.ON]=e,this.location[Position.LEFT]=t,this.location[Position.RIGHT]=n}},{key:"get",value:function(e){return e<this.location.length?this.location[e]:Location.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var e=0;e<this.location.length;e++)if(this.location[e]===Location.NONE)return!0;return!1}},{key:"setLocation",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];this.setLocation(Position.ON,r)}else if(2===t.length){var i=t[0],r=t[1];this.location[i]=r}}},{key:"init",value:function(e){this.location=new Array(e),this.setAllLocations(Location.NONE)}},{key:"isEqualOnSide",value:function(e,t){return this.location[t]===e.location[t]}},{key:"allPositionsEqual",value:function(e){for(var t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Label=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.elt=new Array(2);var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){if(Number.isInteger(r[0])){var a=r[0];t.elt[0]=new TopologyLocation(a),t.elt[1]=new TopologyLocation(a)}else if(r[0]instanceof e){var s=r[0];t.elt[0]=new TopologyLocation(s.elt[0]),t.elt[1]=new TopologyLocation(s.elt[1])}}else if(2===r.length){var o=r[0],a=r[1];t.elt[0]=new TopologyLocation(Location.NONE),t.elt[1]=new TopologyLocation(Location.NONE),t.elt[o].setLocation(a)}else if(3===r.length){var a=r[0],u=r[1],l=r[2];t.elt[0]=new TopologyLocation(a,u,l),t.elt[1]=new TopologyLocation(a,u,l)}else if(4===r.length){var o=r[0],a=r[1],u=r[2],l=r[3];t.elt[0]=new TopologyLocation(Location.NONE,Location.NONE,Location.NONE),t.elt[1]=new TopologyLocation(Location.NONE,Location.NONE,Location.NONE),t.elt[o].setLocations(a,u,l)}};return a.apply(this,r)}return _createClass(e,[{key:"getGeometryCount",value:function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e}},{key:"setAllLocations",value:function(e,t){this.elt[e].setAllLocations(t)}},{key:"isNull",value:function(e){return this.elt[e].isNull()}},{key:"setAllLocationsIfNull",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];this.setAllLocationsIfNull(0,r),
this.setAllLocationsIfNull(1,r)}else if(2===t.length){var i=t[0],r=t[1];this.elt[i].setAllLocationsIfNull(r)}}},{key:"isLine",value:function(e){return this.elt[e].isLine()}},{key:"merge",value:function(e){for(var t=0;2>t;t++)null===this.elt[t]&&null!==e.elt[t]?this.elt[t]=new TopologyLocation(e.elt[t]):this.elt[t].merge(e.elt[t])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return this.elt[r].get(Position.ON)}if(2===t.length){var r=t[0],i=t[1];return this.elt[r].get(i)}}},{key:"toString",value:function(){var e=new StringBuffer;return null!==this.elt[0]&&(e.append("A:"),e.append(this.elt[0].toString())),null!==this.elt[1]&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()}},{key:"isArea",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===t.length){var r=t[0];return this.elt[r].isArea()}}},{key:"isAnyNull",value:function(e){return this.elt[e].isAnyNull()}},{key:"setLocation",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){var r=t[0],i=t[1];this.elt[r].setLocation(Position.ON,i)}else if(3===t.length){var r=t[0],a=t[1],i=t[2];this.elt[r].setLocation(a,i)}}},{key:"isEqualOnSide",value:function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)}},{key:"allPositionsEqual",value:function(e,t){return this.elt[e].allPositionsEqual(t)}},{key:"toLine",value:function(e){this.elt[e].isArea()&&(this.elt[e]=new TopologyLocation(this.elt[e].location[0]))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toLineLabel",value:function(t){for(var n=new e(Location.NONE),r=0;2>r;r++)n.setLocation(r,t.getLocation(r));return n}}]),e}(),ItemVisitor=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"visitItem",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),PointOnGeometryLocator=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"locate",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),IntervalRTreeNode$1=function(){function e(){_classCallCheck(this,e),this.min=Double.POSITIVE_INFINITY,this.max=Double.NEGATIVE_INFINITY}return _createClass(e,[{key:"getMin",value:function(){return this.min}},{key:"intersects",value:function(e,t){return this.min>t||this.max<e?!1:!0}},{key:"getMax",value:function(){return this.max}},{key:"toString",value:function(){return WKTWriter.toLineString(new Coordinate(this.min,0),new Coordinate(this.max,0))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"NodeComparator",get:function(){return NodeComparator}}]),e}(),NodeComparator=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"compare",value:function(e,t){var n=e,r=t,i=(n.min+n.max)/2,a=(r.min+r.max)/2;return a>i?-1:i>a?1:0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparator]}}]),e}(),IntervalRTreeLeafNode=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.item=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(3===r.length){var a=r[0],s=r[1],o=r[2];e.min=a,e.max=s,e.item=o}return e}return _inherits(t,e),_createClass(t,[{key:"query",value:function(e,t,n){return this.intersects(e,t)?void n.visitItem(this.item):null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(IntervalRTreeNode$1),IntervalRTreeBranchNode=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.node1=null,e.node2=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];e.node1=a,e.node2=s,e.buildExtent(e.node1,e.node2)}return e}return _inherits(t,e),_createClass(t,[{key:"buildExtent",value:function(e,t){this.min=Math.min(e.min,t.min),this.max=Math.max(e.max,t.max)}},{key:"query",value:function(e,t,n){return this.intersects(e,t)?(null!==this.node1&&this.node1.query(e,t,n),void(null!==this.node2&&this.node2.query(e,t,n))):null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(IntervalRTreeNode$1),SortedPackedIntervalRTree=function(){function e(){_classCallCheck(this,e),this.leaves=new ArrayList,this.root=null,this.level=0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"buildTree",value:function(){Collections.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var e=this.leaves,t=null,n=new ArrayList;;){if(this.buildLevel(e,n),1===n.size())return n.get(0);t=e,e=n,n=t}}},{key:"insert",value:function(e,t,n){if(null!==this.root)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new IntervalRTreeLeafNode(e,t,n))}},{key:"query",value:function(e,t,n){this.init(),this.root.query(e,t,n)}},{key:"buildRoot",value:function(){return null!==this.root?null:void(this.root=this.buildTree())}},{key:"printNode",value:function(e){System.out.println(WKTWriter.toLineString(new Coordinate(e.min,this.level),new Coordinate(e.max,this.level)))}},{key:"init",value:function(){return null!==this.root?null:void this.buildRoot()}},{key:"buildLevel",value:function(e,t){this.level++,t.clear();for(var n=0;n<e.size();n+=2){var r=e.get(n),i=n+1<e.size()?e.get(n):null;if(null===i)t.add(r);else{var a=new IntervalRTreeBranchNode(e.get(n),e.get(n+1));t.add(a)}}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),LinearComponentExtracter=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.lines=null,this.isForcedToLineString=!1;var a=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];t.lines=i}else if(2===n.length){var i=n[0],a=n[1];t.lines=i,t.isForcedToLineString=a}};return a.apply(this,r)}return _createClass(e,[{key:"filter",value:function(e){if(this.isForcedToLineString&&e instanceof LinearRing){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this.lines.add(t),null}e instanceof LineString&&this.lines.add(e)}},{key:"setForceToLineString",value:function(e){this.isForcedToLineString=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryComponentFilter$1]}}],[{key:"getGeometry",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];return i.getFactory().buildGeometry(e.getLines(i))}if(2===n.length){var i=n[0],a=n[1];return i.getFactory().buildGeometry(e.getLines(i,a))}}},{key:"getLines",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];return e.getLines(i,!1)}if(2===n.length){if(n[0].interfaces_&&n[0].interfaces_.indexOf(Collection)>-1&&n[1].interfaces_&&n[1].interfaces_.indexOf(Collection)>-1){for(var a=n[0],s=n[1],o=a.iterator();o.hasNext();){var u=o.next();e.getLines(u,s)}return s}if(n[0]instanceof Geometry&&"boolean"==typeof n[1]){var i=n[0],l=n[1],c=new ArrayList;return i.apply(new e(c,l)),c}if(n[0]instanceof Geometry&&n[1].interfaces_&&n[1].interfaces_.indexOf(Collection)>-1){var i=n[0],h=n[1];return i instanceof LineString?h.add(i):i.apply(new e(h)),h}}else if(3===n.length){if("boolean"==typeof n[2]&&n[0].interfaces_&&n[0].interfaces_.indexOf(Collection)>-1&&n[1].interfaces_&&n[1].interfaces_.indexOf(Collection)>-1){for(var a=n[0],g=n[1],l=n[2],o=a.iterator();o.hasNext();){var u=o.next();e.getLines(u,g,l)}return g}if("boolean"==typeof n[2]&&n[0]instanceof Geometry&&n[1].interfaces_&&n[1].interfaces_.indexOf(Collection)>-1){var i=n[0],f=n[1],l=n[2];return i.apply(new e(f,l)),f}}}}]),e}(),ArrayListVisitor=function(){function e(){_classCallCheck(this,e),this.items=new ArrayList;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"visitItem",value:function(e){this.items.add(e)}},{key:"getItems",value:function(){return this.items}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[ItemVisitor]}}]),e}(),IndexedPointInAreaLocator=function(){function e(){_classCallCheck(this,e),this.index=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];if(!(i.interfaces_&&i.interfaces_.indexOf(Polygonal)>-1))throw new IllegalArgumentException$1("Argument must be Polygonal");this.index=new IntervalIndexedGeometry(i)}}return _createClass(e,[{key:"locate",value:function(e){var t=new RayCrossingCounter(e),n=new SegmentVisitor(t);return this.index.query(e.y,e.y,n),t.getLocation()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[PointOnGeometryLocator]}}],[{key:"SegmentVisitor",get:function(){return SegmentVisitor}},{key:"IntervalIndexedGeometry",get:function(){return IntervalIndexedGeometry}}]),e}(),SegmentVisitor=function(){function e(){_classCallCheck(this,e),this.counter=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.counter=i}}return _createClass(e,[{key:"visitItem",value:function(e){var t=e;this.counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[ItemVisitor]}}]),e}(),IntervalIndexedGeometry=function(){function e(){_classCallCheck(this,e),this.index=new SortedPackedIntervalRTree;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.init(i)}}return _createClass(e,[{key:"init",value:function(e){for(var t=LinearComponentExtracter.getLines(e),n=t.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinates();this.addLine(i)}}},{key:"addLine",value:function(e){for(var t=1;t<e.length;t++){var n=new LineSegment(e[t-1],e[t]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this.index.insert(r,i,n)}}},{key:"query",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){var r=t[0],i=t[1],a=new ArrayListVisitor;return this.index.query(r,i,a),a.getItems()}if(3===t.length){var r=t[0],i=t[1],s=t[2];this.index.query(r,i,s)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),EdgeIntersection=function(){function e(){_classCallCheck(this,e),this.coord=null,this.segmentIndex=null,this.dist=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],a=n[1],s=n[2];this.coord=new Coordinate(i),this.segmentIndex=a,this.dist=s}}return _createClass(e,[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)}},{key:"compareTo",value:function(e){var t=e;return this.compare(t.segmentIndex,t.dist)}},{key:"isEndPoint",value:function(e){return 0===this.segmentIndex&&0===this.dist?!0:this.segmentIndex===e?!0:!1}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable]}}]),e}(),EdgeIntersectionList=function(){function e(){_classCallCheck(this,e),this.nodeMap=new TreeMap,this.edge=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.edge=i}}return _createClass(e,[{key:"print",value:function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(e){this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next(),i=this.createSplitEdge(n,r);e.add(i),n=r}}},{key:"addEndpoints",value:function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)}},{key:"createSplitEdge",value:function(e,t){var n=t.segmentIndex-e.segmentIndex+2,r=this.edge.pts[t.segmentIndex],i=t.dist>0||!t.coord.equals2D(r);i||n--;var a=new Array(n),s=0;a[s++]=new Coordinate(e.coord);for(var o=e.segmentIndex+1;o<=t.segmentIndex;o++)a[s++]=this.edge.pts[o];return i&&(a[s]=t.coord),new Edge(a,new Label(this.edge.label))}},{key:"add",value:function(e,t,n){var r=new EdgeIntersection(e,t,n),i=this.nodeMap.get(r);return null!==i?i:(this.nodeMap.put(r,r),r)}},{key:"isIntersection",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();if(n.coord.equals(e))return!0}return!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),MonotoneChainIndexer=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getChainStartIndices",value:function(t){var n=0,r=new ArrayList;r.add(new Integer(n));do{var i=this.findChainEnd(t,n);r.add(new Integer(i)),n=i}while(n<t.length-1);var a=e.toIntArray(r);return a}},{key:"findChainEnd",value:function(e,t){for(var n=Quadrant.quadrant(e[t],e[t+1]),r=t+1;r<e.length;){var i=Quadrant.quadrant(e[r-1],e[r]);if(i!==n)break;r++}return r-1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toIntArray",value:function(e){for(var t=new Array(e.size()),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t}}]),e}(),MonotoneChainEdge=function(){function e(){_classCallCheck(this,e),this.e=null,this.pts=null,this.startIndex=null,this.env1=new Envelope,this.env2=new Envelope;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.e=i,this.pts=i.getCoordinates();var a=new MonotoneChainIndexer;this.startIndex=a.getChainStartIndices(this.pts)}}return _createClass(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n}},{key:"getMinX",value:function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return n>t?t:n}},{key:"computeIntersectsForChain",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(4===t.length){var r=t[0],i=t[1],a=t[2],s=t[3];this.computeIntersectsForChain(this.startIndex[r],this.startIndex[r+1],i,i.startIndex[a],i.startIndex[a+1],s)}else if(6===t.length){var o=t[0],u=t[1],i=t[2],l=t[3],c=t[4],h=t[5],g=this.pts[o],f=this.pts[u],y=i.pts[l],d=i.pts[c];if(u-o===1&&c-l===1)return h.addIntersections(this.e,o,i.e,l),null;if(this.env1.init(g,f),this.env2.init(y,d),!this.env1.intersects(this.env2))return null;var v=Math.trunc((o+u)/2),m=Math.trunc((l+c)/2);v>o&&(m>l&&this.computeIntersectsForChain(o,v,i,l,m,h),c>m&&this.computeIntersectsForChain(o,v,i,m,c,h)),u>v&&(m>l&&this.computeIntersectsForChain(v,u,i,l,m,h),c>m&&this.computeIntersectsForChain(v,u,i,m,c,h))}}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(e,t){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<e.startIndex.length-1;r++)this.computeIntersectsForChain(n,e,r,t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Depth=function(){function e(){_classCallCheck(this,e),this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(0===n.length)for(var i=0;2>i;i++)for(var a=0;3>a;a++)this.depth[i][a]=e.NULL_VALUE}return _createClass(e,[{key:"getDepth",value:function(e,t){return this.depth[e][t]}},{key:"setDepth",value:function(e,t,n){this.depth[e][t]=n}},{key:"isNull",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(0===n.length){for(var i=0;2>i;i++)for(var a=0;3>a;a++)if(this.depth[i][a]!==e.NULL_VALUE)return!1;return!0}if(1===n.length){var s=n[0];return this.depth[s][1]===e.NULL_VALUE}if(2===n.length){var s=n[0],o=n[1];return this.depth[s][o]===e.NULL_VALUE}}},{key:"normalize",value:function(){for(var e=0;2>e;e++)if(!this.isNull(e)){var t=this.depth[e][1];this.depth[e][2]<t&&(t=this.depth[e][2]),0>t&&(t=0);for(var n=1;3>n;n++){var r=0;this.depth[e][n]>t&&(r=1),this.depth[e][n]=r}}}},{key:"getDelta",value:function(e){return this.depth[e][Position.RIGHT]-this.depth[e][Position.LEFT]}},{key:"getLocation",value:function(e,t){return this.depth[e][t]<=0?Location.EXTERIOR:Location.INTERIOR}},{key:"toString",value:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]}},{key:"add",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length)for(var i=n[0],a=0;2>a;a++)for(var s=1;3>s;s++){var o=i.getLocation(a,s);(o===Location.EXTERIOR||o===Location.INTERIOR)&&(this.isNull(a,s)?this.depth[a][s]=e.depthAtLocation(o):this.depth[a][s]+=e.depthAtLocation(o))}else if(3===n.length){var u=n[0],l=n[1],c=n[2];c===Location.INTERIOR&&this.depth[u][l]++}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"depthAtLocation",value:function(t){return t===Location.EXTERIOR?0:t===Location.INTERIOR?1:e.NULL_VALUE}}]),e}();Depth.NULL_VALUE=-1;var GraphComponent$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1;var a=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length);else if(1===n.length){var i=n[0];t.label=i}};return a.apply(this,r)}return _createClass(e,[{key:"setVisited",value:function(e){this._isVisited=e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(e){this.label=e}},{key:"getLabel",value:function(){return this.label}},{key:"setCovered",value:function(e){this._isCovered=e,this._isCoveredSet=!0}},{key:"updateIM",value:function(e){Assert.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Edge=function(e){function t(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,t);var a=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));a.pts=null,a.env=null,a.eiList=new EdgeIntersectionList(a),a.name=null,a.mce=null,a._isIsolated=!0,a.depth=new Depth,a.depthDelta=0;var s=function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return 1===n.length?function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.call(a,i,null)}.apply(void 0,n):2===n.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];a.pts=r,a.label=i}.apply(void 0,n):void 0};return e=s.apply(a,r),_possibleConstructorReturn(a,e)}return _inherits(t,e),_createClass(t,[{key:"getDepth",value:function(){return this.depth}},{key:"getCollapsedEdge",value:function(){var e=new Array(2);e[0]=this.pts[0],e[1]=this.pts[1];var n=new t(e,Label.toLineLabel(this.label));return n}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(e){this._isIsolated=e}},{key:"setName",value:function(e){this.name=e}},{key:"equals",value:function(e){if(!(e instanceof t))return!1;var n=e;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,a=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--a])||(i=!1),!r&&!i)return!1;return!0}},{key:"getCoordinate",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return this.pts.length>0?this.pts[0]:null;if(1===t.length){var r=t[0];return this.pts[r]}}},{key:"print",value:function(e){e.print("edge "+this.name+": "),e.print("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.print(","),e.print(this.pts[t].x+" "+this.pts[t].y);e.print(")  "+this.label+" "+this.depthDelta)}},{key:"computeIM",value:function(e){t.updateIM(this.label,e)}},{key:"isCollapsed",value:function(){return this.label.isArea()?3!==this.pts.length?!1:this.pts[0].equals(this.pts[2])?!0:!1:!1}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this.depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(e){e.print("edge "+this.name+": ");for(var t=this.pts.length-1;t>=0;t--)e.print(this.pts[t]+" ");e.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===this.mce&&(this.mce=new MonotoneChainEdge(this)),this.mce}},{key:"getEnvelope",value:function(){if(null===this.env){this.env=new Envelope;for(var e=0;e<this.pts.length;e++)this.env.expandToInclude(this.pts[e])}return this.env}},{key:"addIntersection",value:function(e,t,n,r){var i=new Coordinate(e.getIntersection(r)),a=t,s=e.getEdgeDistance(n,r),o=a+1;if(o<this.pts.length){var u=this.pts[o];i.equals2D(u)&&(a=o,s=0)}this.eiList.add(i,a,s)}},{key:"toString",value:function(){var e=new StringBuffer;e.append("edge "+this.name+": "),e.append("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.append(","),e.append(this.pts[t].x+" "+this.pts[t].y);return e.append(")  "+this.label+" "+this.depthDelta),e.toString()}},{key:"isPointwiseEqual",value:function(e){if(this.pts.length!==e.pts.length)return!1;for(var t=0;t<this.pts.length;t++)if(!this.pts[t].equals2D(e.pts[t]))return!1;return!0}},{key:"setDepthDelta",value:function(e){this.depthDelta=e}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"updateIM",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2!==r.length)return(e=_get(Object.getPrototypeOf(t),"updateIM",this)).call.apply(e,[this].concat(r));var a=r[0],s=r[1];s.setAtLeastIfValid(a.getLocation(0,Position.ON),a.getLocation(1,Position.ON),1),a.isArea()&&(s.setAtLeastIfValid(a.getLocation(0,Position.LEFT),a.getLocation(1,Position.LEFT),2),s.setAtLeastIfValid(a.getLocation(0,Position.RIGHT),a.getLocation(1,Position.RIGHT),2))}}]),t}(GraphComponent$1),Node$1=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.coord=null,e.edges=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];e.coord=a,e.edges=s,e.label=new Label(0,Location.NONE)}return e}return _inherits(t,e),_createClass(t,[{key:"isIncidentEdgeInResult",value:function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();){var t=e.next();if(t.getEdge().isInResult())return!0}return!1}},{key:"isIsolated",value:function(){return 1===this.label.getGeometryCount()}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.println("node "+this.coord+" lbl: "+this.label)}},{key:"computeIM",value:function(e){}},{key:"computeMergedLocation",value:function(e,t){var n=Location.NONE;if(n=this.label.getLocation(t),!e.isNull(t)){var r=e.getLocation(t);n!==Location.BOUNDARY&&(n=r)}return n}},{key:"setLabel",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"setLabel",this)).call.apply(e,[this].concat(r));var a=r[0],s=r[1];null===this.label?this.label=new Label(a,s):this.label.setLocation(a,s)}},{key:"getEdges",value:function(){return this.edges}},{key:"mergeLabel",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length)if(n[0]instanceof t){var i=n[0];this.mergeLabel(i.label)}else if(n[0]instanceof Label)for(var a=n[0],s=0;2>s;s++){var o=this.computeMergedLocation(a,s),u=this.label.getLocation(s);u===Location.NONE&&this.label.setLocation(s,o)}}},{key:"add",value:function(e){this.edges.insert(e),e.setNode(this)}},{key:"setLabelBoundary",value:function(e){if(null===this.label)return null;var t=Location.NONE;null!==this.label&&(t=this.label.getLocation(e));var n=null;switch(t){case Location.BOUNDARY:n=Location.INTERIOR;break;case Location.INTERIOR:n=Location.BOUNDARY;break;default:n=Location.BOUNDARY}this.label.setLocation(e,n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(GraphComponent$1),NodeMap=function(){function e(){_classCallCheck(this,e),this.nodeMap=new TreeMap,this.nodeFact=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.nodeFact=i}}return _createClass(e,[{key:"find",value:function(e){return this.nodeMap.get(e)}},{key:"addNode",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(t[0]instanceof Coordinate){var r=t[0],i=this.nodeMap.get(r);return null===i&&(i=this.nodeFact.createNode(r),this.nodeMap.put(r,i)),i}if(t[0]instanceof Node$1){var a=t[0],i=this.nodeMap.get(a.getCoordinate());return null===i?(this.nodeMap.put(a.getCoordinate(),a),a):(i.mergeLabel(a),i)}}}},{key:"print",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(e){for(var t=new ArrayList,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(e)===Location.BOUNDARY&&t.add(r)}return t}},{key:"add",value:function(e){var t=e.getCoordinate(),n=this.addNode(t);n.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),EdgeEnd=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null;var a=function e(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];t.edge=a}else if(3===r.length){var a=r[0],s=r[1],o=r[2];e.call(t,a,s,o,null)}else if(4===r.length){var a=r[0],s=r[1],o=r[2],u=r[3];e.call(t,a),t.init(s,o),t.label=u}};return a.apply(this,r)}return _createClass(e,[{key:"compareDirection",value:function(e){return this.dx===e.dx&&this.dy===e.dy?0:this.quadrant>e.quadrant?1:this.quadrant<e.quadrant?-1:CGAlgorithms.computeOrientation(e.p0,e.p1,this.p1)}},{key:"getDy",value:function(){return this.dy}},{key:"getCoordinate",value:function(){return this.p0}},{key:"setNode",value:function(e){this.node=e}},{key:"print",value:function(e){var t=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);e.print("  "+i+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label)}},{key:"compareTo",value:function(e){var t=e;return this.compareDirection(t)}},{key:"getDirectedCoordinate",value:function(){return this.p1}},{key:"getDx",value:function(){return this.dx}},{key:"getLabel",value:function(){return this.label}},{key:"getEdge",value:function(){return this.edge}},{key:"getQuadrant",value:function(){return this.quadrant}},{key:"getNode",value:function(){return this.node}},{key:"toString",value:function(){var e=Math.atan2(this.dy,this.dx),t=this.getClass().getName(),n=t.lastIndexOf("."),r=t.substring(n+1);return"  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label}},{key:"computeLabel",value:function(e){}},{key:"init",value:function(e,t){this.p0=e,this.p1=t,this.dx=t.x-e.x,this.dy=t.y-e.y,this.quadrant=Quadrant.quadrant(this.dx,this.dy),Assert.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable]}}]),e}(),TopologyException=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];_classCallCheck(this,t);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));s.pt=null;var o=function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];return 1===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var a=r[0];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,a))}.apply(void 0,r):2===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var a=r[0],s=r[1],o=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,t.msgWithCoord(a,s)));o.pt=new Coordinate(s)}.apply(void 0,r):void 0};return e=o.apply(s,i),_possibleConstructorReturn(s,e)}return _inherits(t,e),_createClass(t,[{key:"getCoordinate",value:function(){return this.pt}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"msgWithCoord",value:function(e,t){return null!==t?e+" [ "+t+" ]":e}}]),t}(RuntimeException),DirectedEdge=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e._isForward=null,e._isInResult=!1,e._isVisited=!1,e.sym=null,e.next=null,e.nextMin=null,e.edgeRing=null,e.minEdgeRing=null,e.depth=[0,-999,-999];for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,a));if(e._isForward=s,s)e.init(a.getCoordinate(0),a.getCoordinate(1));else{var o=a.getNumPoints()-1;e.init(a.getCoordinate(o),a.getCoordinate(o-1))}e.computeDirectedLabel()}return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"getNextMin",value:function(){return this.nextMin}},{key:"getDepth",value:function(e){return this.depth[e]}},{key:"setVisited",value:function(e){this._isVisited=e}},{key:"computeDirectedLabel",value:function(){this.label=new Label(this.edge.getLabel()),this._isForward||this.label.flip()}},{key:"getNext",value:function(){return this.next}},{key:"setDepth",value:function(e,t){if(-999!==this.depth[e]&&this.depth[e]!==t)throw new TopologyException("assigned depths do not match",this.getCoordinate());this.depth[e]=t}},{key:"isInteriorAreaEdge",value:function e(){for(var e=!0,t=0;2>t;t++)this.label.isArea(t)&&this.label.getLocation(t,Position.LEFT)===Location.INTERIOR&&this.label.getLocation(t,Position.RIGHT)===Location.INTERIOR||(e=!1);return e}},{key:"setNextMin",value:function(e){this.nextMin=e}},{key:"print",value:function(e){_get(Object.getPrototypeOf(t.prototype),"print",this).call(this,e),e.print(" "+this.depth[Position.LEFT]+"/"+this.depth[Position.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult");
}},{key:"setMinEdgeRing",value:function(e){this.minEdgeRing=e}},{key:"isLineEdge",value:function(){var e=this.label.isLine(0)||this.label.isLine(1),t=!this.label.isArea(0)||this.label.allPositionsEqual(0,Location.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,Location.EXTERIOR);return e&&t&&n}},{key:"setEdgeRing",value:function(e){this.edgeRing=e}},{key:"getMinEdgeRing",value:function(){return this.minEdgeRing}},{key:"getDepthDelta",value:function(){var e=this.edge.getDepthDelta();return this._isForward||(e=-e),e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"getSym",value:function(){return this.sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this.edge}},{key:"printEdge",value:function(e){this.print(e),e.print(" "),this._isForward?this.edge.print(e):this.edge.printReverse(e)}},{key:"setSym",value:function(e){this.sym=e}},{key:"setVisitedEdge",value:function(e){this.setVisited(e),this.sym.setVisited(e)}},{key:"setEdgeDepths",value:function(e,t){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;e===Position.LEFT&&(r=-1);var i=Position.opposite(e),a=n*r,s=t+a;this.setDepth(e,t),this.setDepth(i,s)}},{key:"getEdgeRing",value:function(){return this.edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(e){this.next=e}},{key:"isVisited",value:function(){return this._isVisited}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"depthFactor",value:function(e,t){return e===Location.EXTERIOR&&t===Location.INTERIOR?1:e===Location.INTERIOR&&t===Location.EXTERIOR?-1:0}}]),t}(EdgeEnd),NodeFactory=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"createNode",value:function(e){return new Node$1(e,null)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),PlanarGraph=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.edges=new ArrayList,this.nodes=null,this.edgeEndList=new ArrayList;var a=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length)t.nodes=new NodeMap(new NodeFactory);else if(1===n.length){var i=n[0];t.nodes=new NodeMap(i)}};return a.apply(this,r)}return _createClass(e,[{key:"printEdges",value:function(e){e.println("Edges:");for(var t=0;t<this.edges.size();t++){e.println("edge "+t+":");var n=this.edges.get(t);n.print(e),n.eiList.print(e)}}},{key:"find",value:function(e){return this.nodes.find(e)}},{key:"addNode",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(t[0]instanceof Node$1){var r=t[0];return this.nodes.addNode(r)}if(t[0]instanceof Coordinate){var i=t[0];return this.nodes.addNode(i)}}}},{key:"getNodeIterator",value:function(){return this.nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkResultDirectedEdges()}}},{key:"debugPrintln",value:function(e){System.out.println(e)}},{key:"isBoundaryNode",value:function(e,t){var n=this.nodes.find(t);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(e)===Location.BOUNDARY?!0:!1}},{key:"linkAllDirectedEdges",value:function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkAllDirectedEdges()}}},{key:"matchInSameDirection",value:function(e,t,n,r){return e.equals(n)&&CGAlgorithms.computeOrientation(e,t,r)===CGAlgorithms.COLLINEAR&&Quadrant.quadrant(e,t)===Quadrant.quadrant(n,r)?!0:!1}},{key:"getEdgeEnds",value:function(){return this.edgeEndList}},{key:"debugPrint",value:function(e){System.out.print(e)}},{key:"getEdgeIterator",value:function(){return this.edges.iterator()}},{key:"findEdgeInSameDirection",value:function(e,t){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(e,t,i[0],i[1]))return r;if(this.matchInSameDirection(e,t,i[i.length-1],i[i.length-2]))return r}return null}},{key:"insertEdge",value:function(e){this.edges.add(e)}},{key:"findEdgeEnd",value:function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null}},{key:"addEdges",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.edges.add(n);var r=new DirectedEdge(n,!0),i=new DirectedEdge(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}}},{key:"add",value:function(e){this.nodes.add(e),this.edgeEndList.add(e)}},{key:"getNodes",value:function(){return this.nodes.values()}},{key:"findEdge",value:function(e,t){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),i=r.getCoordinates();if(e.equals(i[0])&&t.equals(i[1]))return r}return null}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"linkResultDirectedEdges",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}}}]),e}(),GeometryGraph=function(e){function t(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,t);var a=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));a.parentGeom=null,a.lineEdgeMap=new HashMap,a.boundaryNodeRule=null,a.useBoundaryDeterminationRule=!0,a.argIndex=null,a.boundaryNodes=null,a._hasTooFewPoints=!1,a.invalidPoint=null,a.areaPtLocator=null,a.ptLocator=new PointLocator;var s=function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return 2===n.length?function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],s=n[1];e.call(a,i,s,BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE)}.apply(void 0,n):3===n.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],s=t[2];a.argIndex=r,a.parentGeom=i,a.boundaryNodeRule=s,null!==i&&a.add(i)}.apply(void 0,n):void 0};return e=s.apply(a,r),_possibleConstructorReturn(a,e)}return _inherits(t,e),_createClass(t,[{key:"insertBoundaryPoint",value:function(e,n){var r=this.nodes.addNode(n),i=r.getLabel(),a=1,s=Location.NONE;s=i.getLocation(e,Position.ON),s===Location.BOUNDARY&&a++;var o=t.determineBoundary(this.boundaryNodeRule,a);i.setLocation(e,o)}},{key:"computeSelfNodes",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){var r=t[0],i=t[1];return this.computeSelfNodes(r,i,!1)}if(3===t.length){var r=t[0],i=t[1],a=t[2],s=new SegmentIntersector(r,!0,!1);s.setIsDoneIfProperInt(a);var o=this.createEdgeSetIntersector(),u=this.parentGeom instanceof LinearRing||this.parentGeom instanceof Polygon||this.parentGeom instanceof MultiPolygon,l=i||!u;return o.computeIntersections(this.edges,s,l),this.addSelfIntersectionNodes(this.argIndex),s}}},{key:"computeSplitEdges",value:function(e){for(var t=this.edges.iterator();t.hasNext();){var n=t.next();n.eiList.addSplitEdges(e)}}},{key:"computeEdgeIntersections",value:function(e,t,n){var r=new SegmentIntersector(t,n,!0);r.setBoundaryNodes(this.getBoundaryNodes(),e.getBoundaryNodes());var i=this.createEdgeSetIntersector();return i.computeIntersections(this.edges,e.edges,r),r}},{key:"getGeometry",value:function(){return this.parentGeom}},{key:"getBoundaryNodeRule",value:function(){return this.boundaryNodeRule}},{key:"hasTooFewPoints",value:function(){return this._hasTooFewPoints}},{key:"addPoint",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof Point){var r=t[0],i=r.getCoordinate();this.insertPoint(this.argIndex,i,Location.INTERIOR)}else if(t[0]instanceof Coordinate){var a=t[0];this.insertPoint(this.argIndex,a,Location.INTERIOR)}}},{key:"addPolygon",value:function(e){this.addPolygonRing(e.getExteriorRing(),Location.EXTERIOR,Location.INTERIOR);for(var t=0;t<e.getNumInteriorRing();t++){var n=e.getInteriorRingN(t);this.addPolygonRing(n,Location.INTERIOR,Location.EXTERIOR)}}},{key:"addEdge",value:function(e){this.insertEdge(e);var t=e.getCoordinates();this.insertPoint(this.argIndex,t[0],Location.BOUNDARY),this.insertPoint(this.argIndex,t[t.length-1],Location.BOUNDARY)}},{key:"addLineString",value:function(e){var t=CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(t.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=t[0],null;var n=new Edge(t,new Label(this.argIndex,Location.INTERIOR));this.lineEdgeMap.put(e,n),this.insertEdge(n),Assert.isTrue(t.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,t[0]),this.insertBoundaryPoint(this.argIndex,t[t.length-1])}},{key:"getInvalidPoint",value:function(){return this.invalidPoint}},{key:"getBoundaryPoints",value:function(){for(var e=this.getBoundaryNodes(),t=new Array(e.size()),n=0,r=e.iterator();r.hasNext();){var i=r.next();t[n++]=i.getCoordinate().copy()}return t}},{key:"getBoundaryNodes",value:function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes}},{key:"addSelfIntersectionNode",value:function(e,t,n){return this.isBoundaryNode(e,t)?null:void(n===Location.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(e,t):this.insertPoint(e,t,n))}},{key:"addPolygonRing",value:function(e,t,n){if(e.isEmpty())return null;var r=CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=r[0],null;var i=t,a=n;CGAlgorithms.isCCW(r)&&(i=n,a=t);var s=new Edge(r,new Label(this.argIndex,Location.BOUNDARY,i,a));this.lineEdgeMap.put(e,s),this.insertEdge(s),this.insertPoint(this.argIndex,r[0],Location.BOUNDARY)}},{key:"insertPoint",value:function(e,t,n){var r=this.nodes.addNode(t),i=r.getLabel();null===i?r.label=new Label(e,n):i.setLocation(e,n)}},{key:"createEdgeSetIntersector",value:function(){return new SimpleMCSweepLineIntersector}},{key:"addSelfIntersectionNodes",value:function(e){for(var t=this.edges.iterator();t.hasNext();)for(var n=t.next(),r=n.getLabel().getLocation(e),i=n.eiList.iterator();i.hasNext();){var a=i.next();this.addSelfIntersectionNode(e,a.coord,r)}}},{key:"add",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"add",this)).call.apply(e,[this].concat(r));var a=r[0];if(a.isEmpty())return null;if(a instanceof MultiPolygon&&(this.useBoundaryDeterminationRule=!1),a instanceof Polygon)this.addPolygon(a);else if(a instanceof LineString)this.addLineString(a);else if(a instanceof Point)this.addPoint(a);else if(a instanceof MultiPoint)this.addCollection(a);else if(a instanceof MultiLineString)this.addCollection(a);else if(a instanceof MultiPolygon)this.addCollection(a);else{if(!(a instanceof GeometryCollection))throw new UnsupportedOperationException(a.getClass().getName());this.addCollection(a)}}},{key:"addCollection",value:function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}}},{key:"locate",value:function(e){return this.parentGeom.interfaces_&&this.parentGeom.interfaces_.indexOf(Polygonal)>-1&&this.parentGeom.getNumGeometries()>50?(null===this.areaPtLocator&&(this.areaPtLocator=new IndexedPointInAreaLocator(this.parentGeom)),this.areaPtLocator.locate(e)):this.ptLocator.locate(e,this.parentGeom)}},{key:"findEdge",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];return this.lineEdgeMap.get(a)}return(e=_get(Object.getPrototypeOf(t.prototype),"findEdge",this)).call.apply(e,[this].concat(r))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"determineBoundary",value:function(e,t){return e.isInBoundary(t)?Location.BOUNDARY:Location.INTERIOR}}]),t}(PlanarGraph),IsSimpleOp$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null;var a=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];t.inputGeom=i}else if(2===n.length){var i=n[0],a=n[1];t.inputGeom=i,t.isClosedEndpointsInInterior=!a.isInBoundary(2)}};return a.apply(this,r)}return _createClass(e,[{key:"isSimpleMultiPoint",value:function(e){if(e.isEmpty())return!0;for(var t=new TreeSet,n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n),i=r.getCoordinate();if(t.contains(i))return this.nonSimpleLocation=i,!1;t.add(i)}return!0}},{key:"isSimplePolygonal",value:function(e){for(var t=LinearComponentExtracter.getLines(e),n=t.iterator();n.hasNext();){var r=n.next();if(!this.isSimpleLinearGeometry(r))return!1}return!0}},{key:"hasClosedEndpointIntersection",value:function(e){for(var t=new TreeMap,n=e.getEdgeIterator();n.hasNext();){var r=n.next(),i=(r.getMaximumSegmentIndex(),r.isClosed()),a=r.getCoordinate(0);this.addEndpoint(t,a,i);var s=r.getCoordinate(r.getNumPoints()-1);this.addEndpoint(t,s,i)}for(var n=t.values().iterator();n.hasNext();){var o=n.next();if(o.isClosed&&2!==o.degree)return this.nonSimpleLocation=o.getCoordinate(),!0}return!1}},{key:"getNonSimpleLocation",value:function(){return this.nonSimpleLocation}},{key:"isSimpleLinearGeometry",value:function(e){if(e.isEmpty())return!0;var t=new GeometryGraph(0,e),n=new RobustLineIntersector,r=t.computeSelfNodes(n,!0);return r.hasIntersection()?r.hasProperIntersection()?(this.nonSimpleLocation=r.getProperIntersectionPoint(),!1):this.hasNonEndpointIntersection(t)?!1:this.isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(t)?!1:!0:!0}},{key:"hasNonEndpointIntersection",value:function(e){for(var t=e.getEdgeIterator();t.hasNext();)for(var n=t.next(),r=n.getMaximumSegmentIndex(),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var a=i.next();if(!a.isEndPoint(r))return this.nonSimpleLocation=a.getCoordinate(),!0}return!1}},{key:"addEndpoint",value:function(e,t,n){var r=e.get(t);null===r&&(r=new EndpointInfo(t),e.put(t,r)),r.addEndpoint(n)}},{key:"computeSimple",value:function(e){return this.nonSimpleLocation=null,e.isEmpty()?!0:e instanceof LineString?this.isSimpleLinearGeometry(e):e instanceof MultiLineString?this.isSimpleLinearGeometry(e):e instanceof MultiPoint?this.isSimpleMultiPoint(e):e.interfaces_&&e.interfaces_.indexOf(Polygonal)>-1?this.isSimplePolygonal(e):e instanceof GeometryCollection?this.isSimpleGeometryCollection(e):!0}},{key:"isSimple",value:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)}},{key:"isSimpleGeometryCollection",value:function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);if(!this.computeSimple(n))return!1}return!0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"EndpointInfo",get:function(){return EndpointInfo}}]),e}(),EndpointInfo=function(){function e(){_classCallCheck(this,e),this.pt=null,this.isClosed=null,this.degree=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.pt=i,this.isClosed=!1,this.degree=0}}return _createClass(e,[{key:"addEndpoint",value:function(e){this.degree++,this.isClosed|=e}},{key:"getCoordinate",value:function(){return this.pt}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),BufferParameters=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=e.CAP_ROUND,this.joinStyle=e.JOIN_ROUND,this.mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR;var a=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length);else if(1===n.length){var i=n[0];t.setQuadrantSegments(i)}else if(2===n.length){var i=n[0],a=n[1];t.setQuadrantSegments(i),t.setEndCapStyle(a)}else if(4===n.length){var i=n[0],a=n[1],s=n[2],o=n[3];t.setQuadrantSegments(i),t.setEndCapStyle(a),t.setJoinStyle(s),t.setMitreLimit(o)}};return a.apply(this,r)}return _createClass(e,[{key:"getEndCapStyle",value:function(){return this.endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=e.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=e.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),0>=t&&(this.quadrantSegments=1),this.joinStyle!==e.JOIN_ROUND&&(this.quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this.joinStyle}},{key:"setJoinStyle",value:function(e){this.joinStyle=e}},{key:"setSimplifyFactor",value:function(e){this.simplifyFactor=0>e?0:e}},{key:"getSimplifyFactor",value:function(){return this.simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this.quadrantSegments}},{key:"setEndCapStyle",value:function(e){this.endCapStyle=e}},{key:"getMitreLimit",value:function(){return this.mitreLimit}},{key:"setMitreLimit",value:function(e){this.mitreLimit=e}},{key:"setSingleSided",value:function(e){this._isSingleSided=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"bufferDistanceError",value:function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)}}]),e}();BufferParameters.CAP_ROUND=1,BufferParameters.CAP_FLAT=2,BufferParameters.CAP_SQUARE=3,BufferParameters.JOIN_ROUND=1,BufferParameters.JOIN_MITRE=2,BufferParameters.JOIN_BEVEL=3,BufferParameters.DEFAULT_QUADRANT_SEGMENTS=8,BufferParameters.DEFAULT_MITRE_LIMIT=5,BufferParameters.DEFAULT_SIMPLIFY_FACTOR=.01;var RightmostEdgeFinder=function(){function e(){_classCallCheck(this,e),this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getCoordinate",value:function(){return this.minCoord}},{key:"getRightmostSide",value:function(e,t){var n=this.getRightmostSideOfSegment(e,t);return 0>n&&(n=this.getRightmostSideOfSegment(e,t-1)),0>n&&(this.minCoord=null,this.checkForRightmostCoordinate(e)),n}},{key:"findRightmostEdgeAtVertex",value:function(){var e=this.minDe.getEdge().getCoordinates();Assert.isTrue(this.minIndex>0&&this.minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this.minIndex-1],n=e[this.minIndex+1],r=CGAlgorithms.computeOrientation(this.minCoord,n,t),i=!1;t.y<this.minCoord.y&&n.y<this.minCoord.y&&r===CGAlgorithms.COUNTERCLOCKWISE?i=!0:t.y>this.minCoord.y&&n.y>this.minCoord.y&&r===CGAlgorithms.CLOCKWISE&&(i=!0),i&&(this.minIndex=this.minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(e,t){var n=e.getEdge(),r=n.getCoordinates();if(0>t||t+1>=r.length)return-1;if(r[t].y===r[t+1].y)return-1;var i=Position.LEFT;return r[t].y<r[t+1].y&&(i=Position.RIGHT),i}},{key:"getEdge",value:function(){return this.orientedDe}},{key:"checkForRightmostCoordinate",value:function(e){for(var t=e.getEdge().getCoordinates(),n=0;n<t.length-1;n++)(null===this.minCoord||t[n].x>this.minCoord.x)&&(this.minDe=e,this.minIndex=n,this.minCoord=t[n])}},{key:"findRightmostEdgeAtNode",value:function(){var e=this.minDe.getNode(),t=e.getEdges();this.minDe=t.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.isForward()&&this.checkForRightmostCoordinate(n)}Assert.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var r=this.getRightmostSide(this.minDe,this.minIndex);r===Position.LEFT&&(this.orientedDe=this.minDe.getSym())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),LinkedList=function(){function e(){_classCallCheck(this,e),this.array_=[]}return _createClass(e,[{key:"addLast",value:function(e){this.array_.push(e)}},{key:"removeFirst",value:function(){return this.array_.shift()}},{key:"isEmpty",value:function(){return 0===this.array_.length}}]),e}(),BufferSubgraph=function(){function e(){_classCallCheck(this,e),this.finder=null,this.dirEdgeList=new ArrayList,this.nodes=new ArrayList,this.rightMostCoord=null,this.env=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length&&(this.finder=new RightmostEdgeFinder)}return _createClass(e,[{key:"clearVisitedEdges",value:function(){for(var e=this.dirEdgeList.iterator();e.hasNext();){var t=e.next();t.setVisited(!1)}}},{key:"getRightmostCoordinate",value:function(){return this.rightMostCoord}},{key:"computeNodeDepth",value:function(e){for(var t=null,n=e.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){t=r;break}}if(null===t)throw new TopologyException("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(t);for(var n=e.getEdges().iterator();n.hasNext();){var r=n.next();r.setVisited(!0),this.copySymDepths(r)}}},{key:"computeDepth",value:function(e){this.clearVisitedEdges();var t=this.finder.getEdge();t.getNode(),t.getLabel();t.setEdgeDepths(Position.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)}},{key:"create",value:function(e){this.addReachable(e),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var e=this.dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(Position.RIGHT)>=1&&t.getDepth(Position.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}}},{key:"computeDepths",value:function(e){var t=new HashSet,n=new LinkedList,r=e.getNode();for(n.addLast(r),t.add(r),e.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();t.add(i),this.computeNodeDepth(i);for(var a=i.getEdges().iterator();a.hasNext();){var s=a.next(),o=s.getSym();if(!o.isVisited()){var u=o.getNode();t.contains(u)||(n.addLast(u),t.add(u))}}}}},{key:"compareTo",value:function(e){var t=e;return this.rightMostCoord.x<t.rightMostCoord.x?-1:this.rightMostCoord.x>t.rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(null===this.env){for(var e=new Envelope,t=this.dirEdgeList.iterator();t.hasNext();)for(var n=t.next(),r=n.getEdge().getCoordinates(),i=0;i<r.length-1;i++)e.expandToInclude(r[i]);this.env=e}return this.env}},{key:"addReachable",value:function(e){var t=new Stack;for(t.add(e);!t.empty();){var n=t.pop();this.add(n,t)}}},{key:"copySymDepths",value:function(e){var t=e.getSym();t.setDepth(Position.LEFT,e.getDepth(Position.RIGHT)),t.setDepth(Position.RIGHT,e.getDepth(Position.LEFT))}},{key:"add",value:function(e,t){e.setVisited(!0),this.nodes.add(e);for(var n=e.getEdges().iterator();n.hasNext();){var r=n.next();this.dirEdgeList.add(r);var i=r.getSym(),a=i.getNode();a.isVisited()||t.push(a)}}},{key:"getNodes",value:function(){return this.nodes}},{key:"getDirectedEdges",value:function(){return this.dirEdgeList}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable]}}]),e}(),EdgeRing$1=function(){function e(){_classCallCheck(this,e),this.startDe=null,this.maxNodeDegree=-1,this.edges=new ArrayList,this.pts=new ArrayList,this.label=new Label(Location.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new ArrayList,this.geometryFactory=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1];this.geometryFactory=a,this.computePoints(i),this.computeRing()}}return _createClass(e,[{key:"computeRing",value:function(){if(null!==this.ring)return null;for(var e=new Array(this.pts.size()),t=0;t<this.pts.size();t++)e[t]=this.pts.get(t);this.ring=this.geometryFactory.createLinearRing(e),this._isHole=CGAlgorithms.isCCW(this.ring.getCoordinates())}},{key:"isIsolated",value:function(){return 1===this.label.getGeometryCount()}},{key:"computePoints",value:function(e){this.startDe=e;var t=e,n=!0;do{if(null===t)throw new TopologyException("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new TopologyException("Directed Edge visited twice during ring-building at "+t.getCoordinate());this.edges.add(t);var r=t.getLabel();Assert.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(t.getEdge(),t.isForward(),n),n=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this.startDe)}},{key:"getLinearRing",value:function(){return this.ring}},{key:"getCoordinate",value:function(e){return this.pts.get(e)}},{key:"computeMaxNodeDegree",value:function(){this.maxNodeDegree=0;var e=this.startDe;do{var t=e.getNode(),n=t.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),e=this.getNext(e)}while(e!==this.startDe);this.maxNodeDegree*=2}},{key:"addPoints",value:function(e,t,n){var r=e.getCoordinates();if(t){var i=1;n&&(i=0);for(var a=i;a<r.length;a++)this.pts.add(r[a])}else{var i=r.length-2;n&&(i=r.length-1);for(var a=i;a>=0;a--)this.pts.add(r[a])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var e=this.startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!==this.startDe)}},{key:"containsPoint",value:function(e){var t=this.getLinearRing(),n=t.getEnvelopeInternal();if(!n.contains(e))return!1;if(!CGAlgorithms.isPointInRing(e,t.getCoordinates()))return!1;for(var r=this.holes.iterator();r.hasNext();){var i=r.next();if(i.containsPoint(e))return!1}return!0}},{key:"addHole",value:function(e){this.holes.add(e)}},{key:"isShell",value:function(){return null===this.shell}},{key:"getLabel",value:function(){return this.label}},{key:"getEdges",value:function(){return this.edges}},{key:"getMaxNodeDegree",value:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree}},{key:"getShell",value:function(){return this.shell}},{key:"mergeLabel",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];this.mergeLabel(r,0),this.mergeLabel(r,1)}else if(2===t.length){var r=t[0],i=t[1],a=r.getLocation(i,Position.RIGHT);if(a===Location.NONE)return null;if(this.label.getLocation(i)===Location.NONE)return this.label.setLocation(i,a),null}}},{key:"setShell",value:function(e){this.shell=e,null!==e&&e.addHole(this)}},{key:"toPolygon",value:function(e){for(var t=new Array(this.holes.size()),n=0;n<this.holes.size();n++)t[n]=this.holes.get(n).getLinearRing();var r=e.createPolygon(this.getLinearRing(),t);return r}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),MinimalEdgeRing=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length)var a=r[0],s=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,a,s));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"setEdgeRing",value:function(e,t){e.setMinEdgeRing(t)}},{key:"getNext",value:function(e){return e.getNextMin()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(EdgeRing$1),MaximalEdgeRing=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length)var a=r[0],s=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,a,s));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"buildMinimalRings",value:function(){var e=new ArrayList,t=this.startDe;do{if(null===t.getMinEdgeRing()){var n=new MinimalEdgeRing(t,this.geometryFactory);e.add(n)}t=t.getNext()}while(t!==this.startDe);return e}},{key:"setEdgeRing",value:function(e,t){e.setEdgeRing(t)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var e=this.startDe;do{var t=e.getNode();t.getEdges().linkMinimalDirectedEdges(this),e=e.getNext()}while(e!==this.startDe)}},{key:"getNext",value:function(e){return e.getNext()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(EdgeRing$1),PolygonBuilder=function(){function e(){_classCallCheck(this,e),this.geometryFactory=null,this.shellList=new ArrayList;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.geometryFactory=i}}return _createClass(e,[{key:"sortShellsAndHoles",value:function(e,t,n){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):t.add(i)}}},{key:"computePolygons",value:function(e){for(var t=new ArrayList,n=e.iterator();n.hasNext();){var r=n.next(),i=r.toPolygon(this.geometryFactory);t.add(i)}return t}},{key:"placeFreeHoles",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,e);if(null===i)throw new TopologyException("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}}},{key:"buildMinimalEdgeRings",value:function(e,t,n){for(var r=new ArrayList,i=e.iterator();i.hasNext();){var a=i.next();if(a.getMaxNodeDegree()>2){a.linkDirectedEdgesForMinimalEdgeRings();var s=a.buildMinimalRings(),o=this.findShell(s);null!==o?(this.placePolygonHoles(o,s),t.add(o)):n.addAll(s)}else r.add(a)}return r}},{key:"containsPoint",value:function(e){for(var t=this.shellList.iterator();t.hasNext();){var n=t.next();if(n.containsPoint(e))return!0}return!1}},{key:"buildMaximalEdgeRings",value:function(e){for(var t=new ArrayList,n=e.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new MaximalEdgeRing(r,this.geometryFactory);t.add(i),i.setInResult()}}return t}},{key:"placePolygonHoles",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(e)}}},{key:"getPolygons",value:function(){var e=this.computePolygons(this.shellList);return e}},{key:"findEdgeRingContaining",value:function(e,t){for(var n=e.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),a=null,s=null,o=t.iterator();o.hasNext();){var u=o.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==a&&(s=a.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&CGAlgorithms.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===a||s.contains(c))&&(a=u)}return a}},{key:"findShell",value:function(e){for(var t=0,n=null,r=e.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,t++)}return Assert.isTrue(1>=t,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];this.add(r.getEdgeEnds(),r.getNodes())}else if(2===t.length){var i=t[0],a=t[1];PlanarGraph.linkResultDirectedEdges(a);var s=this.buildMaximalEdgeRings(i),o=new ArrayList,u=this.buildMinimalEdgeRings(s,this.shellList,o);this.sortShellsAndHoles(u,this.shellList,o),this.placeFreeHoles(this.shellList,o)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Boundable=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getBounds",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),ItemBoundable=function(){function e(){_classCallCheck(this,e),this.bounds=null,this.item=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1];this.bounds=i,this.item=a}}return _createClass(e,[{key:"getItem",value:function(){return this.item}},{key:"getBounds",value:function(){return this.bounds}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Boundable,Serializable];
}}]),e}(),PriorityQueue=function(){function e(){_classCallCheck(this,e),this._size=null,this.items=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length&&(this._size=0,this.items=new ArrayList,this.items.add(null))}return _createClass(e,[{key:"poll",value:function(){if(this.isEmpty())return null;var e=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),e}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(e){for(var t=null,n=this.items.get(e);2*e<=this._size&&(t=2*e,t!==this._size&&this.items.get(t+1).compareTo(this.items.get(t))<0&&t++,this.items.get(t).compareTo(n)<0);e=t)this.items.set(e,this.items.get(t));this.items.set(e,n)}},{key:"clear",value:function(){this._size=0,this.items.clear()}},{key:"isEmpty",value:function(){return 0===this._size}},{key:"add",value:function(e){this.items.add(null),this._size+=1;var t=this._size;for(this.items.set(0,e);e.compareTo(this.items.get(Math.trunc(t/2)))<0;t/=2)this.items.set(t,this.items.get(Math.trunc(t/2)));this.items.set(t,e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),SpatialIndex=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"insert",value:function(e,t){}},{key:"remove",value:function(e,t){}},{key:"query",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){t[0]}else if(2===t.length){t[0],t[1]}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),AbstractNode=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.childBoundables=new ArrayList,this.bounds=null,this.level=null;var a=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length);else if(1===n.length){var i=n[0];t.level=i}};return a.apply(this,r)}return _createClass(e,[{key:"getLevel",value:function(){return this.level}},{key:"size",value:function(){return this.childBoundables.size()}},{key:"getChildBoundables",value:function(){return this.childBoundables}},{key:"addChildBoundable",value:function(e){Assert.isTrue(null===this.bounds),this.childBoundables.add(e)}},{key:"isEmpty",value:function(){return this.childBoundables.isEmpty()}},{key:"getBounds",value:function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Boundable,Serializable]}}]),e}();AbstractNode.serialVersionUID=0x5a1e55ec41369800;var BoundablePair=function(){function e(){_classCallCheck(this,e),this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],a=n[1],s=n[2];this.boundable1=i,this.boundable2=a,this.itemDistance=s,this._distance=this.distance()}}return _createClass(e,[{key:"expandToQueue",value:function(t,n){var r=e.isComposite(this.boundable1),i=e.isComposite(this.boundable2);if(r&&i)return e.area(this.boundable1)>e.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,n),null):(this.expand(this.boundable2,this.boundable1,t,n),null);if(r)return this.expand(this.boundable1,this.boundable2,t,n),null;if(i)return this.expand(this.boundable2,this.boundable1,t,n),null;throw new IllegalArgumentException$1("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(e.isComposite(this.boundable1)||e.isComposite(this.boundable2))}},{key:"compareTo",value:function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0}},{key:"expand",value:function(t,n,r,i){for(var a=t.getChildBoundables(),s=a.iterator();s.hasNext();){var o=s.next(),u=new e(o,n,this.itemDistance);u.getDistance()<i&&r.add(u)}}},{key:"getBoundable",value:function(e){return 0===e?this.boundable1:this.boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable]}}],[{key:"area",value:function(e){return e.getBounds().getArea()}},{key:"isComposite",value:function(e){return e instanceof AbstractNode}}]),e}(),AbstractSTRtree=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.root=null,this.built=!1,this.itemBoundables=new ArrayList,this.nodeCapacity=null;var a=function n(){for(var r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];if(0===i.length)n.call(t,e.DEFAULT_NODE_CAPACITY);else if(1===i.length){var s=i[0];Assert.isTrue(s>1,"Node capacity must be greater than 1"),t.nodeCapacity=s}};return a.apply(this,r)}return _createClass(e,[{key:"getNodeCapacity",value:function(){return this.nodeCapacity}},{key:"lastNode",value:function(e){return e.get(e.size()-1)}},{key:"size",value:function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(0===n.length)return this.isEmpty()?0:(this.build(),this.size(this.root));if(1===n.length){for(var i=n[0],e=0,a=i.getChildBoundables().iterator();a.hasNext();){var s=a.next();s instanceof AbstractNode?e+=this.size(s):s instanceof ItemBoundable&&(e+=1)}return e}}},{key:"removeItem",value:function(e,t){for(var n=null,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof ItemBoundable&&i.getItem()===t&&(n=i)}return null!==n?(e.getChildBoundables().remove(n),!0):!1}},{key:"itemsTree",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length){this.build();var r=this.itemsTree(this.root);return null===r?new ArrayList:r}if(1===t.length){for(var i=t[0],a=new ArrayList,s=i.getChildBoundables().iterator();s.hasNext();){var o=s.next();if(o instanceof AbstractNode){var u=this.itemsTree(o);null!==u&&a.add(u)}else o instanceof ItemBoundable?a.add(o.getItem()):Assert.shouldNeverReachHere()}return a.size()<=0?null:a}}},{key:"insert",value:function(e,t){Assert.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new ItemBoundable(e,t))}},{key:"boundablesAtLevel",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0],i=new ArrayList;return this.boundablesAtLevel(r,this.root,i),i}if(3===t.length){var r=t[0],a=t[1],s=t[2];if(Assert.isTrue(r>-2),a.getLevel()===r)return s.add(a),null;for(var o=a.getChildBoundables().iterator();o.hasNext();){var u=o.next();u instanceof AbstractNode?this.boundablesAtLevel(r,u,s):(Assert.isTrue(u instanceof ItemBoundable),-1===r&&s.add(u))}return null}}},{key:"query",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];this.build();var i=new ArrayList;return this.isEmpty()?i:(this.getIntersectsOp().intersects(this.root.getBounds(),r)&&this.query(r,this.root,i),i)}if(2===t.length){var r=t[0],a=t[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),r)&&this.query(r,this.root,a)}else if(3===t.length)if(t[2].interfaces_&&t[2].interfaces_.indexOf(ItemVisitor)>-1&&t[0]instanceof Object&&t[1]instanceof AbstractNode)for(var r=t[0],s=t[1],a=t[2],o=s.getChildBoundables(),u=0;u<o.size();u++){var l=o.get(u);this.getIntersectsOp().intersects(l.getBounds(),r)&&(l instanceof AbstractNode?this.query(r,l,a):l instanceof ItemBoundable?a.visitItem(l.getItem()):Assert.shouldNeverReachHere())}else if(t[2].interfaces_&&t[2].interfaces_.indexOf(List)>-1&&t[0]instanceof Object&&t[1]instanceof AbstractNode)for(var r=t[0],s=t[1],c=t[2],o=s.getChildBoundables(),u=0;u<o.size();u++){var l=o.get(u);this.getIntersectsOp().intersects(l.getBounds(),r)&&(l instanceof AbstractNode?this.query(r,l,c):l instanceof ItemBoundable?c.add(l.getItem()):Assert.shouldNeverReachHere())}}},{key:"build",value:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))}},{key:"getRoot",value:function(){return this.build(),this.root}},{key:"remove",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){var r=t[0],i=t[1];return this.build(),this.getIntersectsOp().intersects(this.root.getBounds(),r)?this.remove(r,this.root,i):!1}if(3===t.length){var r=t[0],a=t[1],i=t[2],s=this.removeItem(a,i);if(s)return!0;for(var o=null,u=a.getChildBoundables().iterator();u.hasNext();){var l=u.next();if(this.getIntersectsOp().intersects(l.getBounds(),r)&&l instanceof AbstractNode&&(s=this.remove(r,l,i))){o=l;break}}return null!==o&&o.getChildBoundables().isEmpty()&&a.getChildBoundables().remove(o),s}}},{key:"createHigherLevels",value:function(e,t){Assert.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,t+1)}},{key:"depth",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(1===t.length){for(var r=t[0],i=0,a=r.getChildBoundables().iterator();a.hasNext();){var s=a.next();if(s instanceof AbstractNode){var o=this.depth(s);o>i&&(i=o)}}return i+1}}},{key:"createParentBoundables",value:function(e,t){Assert.isTrue(!e.isEmpty());var n=new ArrayList;n.add(this.createNode(t));var r=new ArrayList(e);Collections.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var a=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(t)),this.lastNode(n).addChildBoundable(a)}return n}},{key:"isEmpty",value:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Serializable]}}],[{key:"compareDoubles",value:function(e,t){return e>t?1:t>e?-1:0}},{key:"IntersectsOp",get:function(){return IntersectsOp$1}}]),e}(),IntersectsOp$1=function e(){_classCallCheck(this,e)};AbstractSTRtree.serialVersionUID=-0x35ef64c82d4c5400,AbstractSTRtree.DEFAULT_NODE_CAPACITY=10;var ItemDistance=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"distance",value:function(e,t){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),STRtree=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];_classCallCheck(this,t);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),o=function e(){for(var r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];return 0===i.length?function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];e.call(s,t.DEFAULT_NODE_CAPACITY)}.apply(void 0,i):1===i.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var a=r[0];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,a))}.apply(void 0,i):void 0};return e=o.apply(s,i),_possibleConstructorReturn(s,e)}return _inherits(t,e),_createClass(t,[{key:"createParentBoundablesFromVerticalSlices",value:function(e,t){Assert.isTrue(e.length>0);for(var n=new ArrayList,r=0;r<e.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(e[r],t));return n}},{key:"createNode",value:function(e){return new STRtreeNode(e)}},{key:"size",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length?_get(Object.getPrototypeOf(t.prototype),"size",this).call(this):(e=_get(Object.getPrototypeOf(t.prototype),"size",this)).call.apply(e,[this].concat(r))}},{key:"insert",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"insert",this)).call.apply(e,[this].concat(r));var a=r[0],s=r[1];return a.isNull()?null:void _get(Object.getPrototypeOf(t.prototype),"insert",this).call(this,a,s)}},{key:"getIntersectsOp",value:function(){return t.intersectsOp}},{key:"verticalSlices",value:function(e,t){for(var n=Math.trunc(Math.ceil(e.size()/t)),r=new Array(t),i=e.iterator(),a=0;t>a;a++){r[a]=new ArrayList;for(var s=0;i.hasNext()&&n>s;){var o=i.next();r[a].add(o),s++}}return r}},{key:"query",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];return _get(Object.getPrototypeOf(t.prototype),"query",this).call(this,i)}if(2===n.length){var i=n[0],a=n[1];_get(Object.getPrototypeOf(t.prototype),"query",this).call(this,i,a)}else if(3===n.length)if(n[2].interfaces_&&n[2].interfaces_.indexOf(ItemVisitor)>-1&&n[0]instanceof Object&&n[1]instanceof AbstractNode){var s=n[0],o=n[1],a=n[2];_get(Object.getPrototypeOf(t.prototype),"query",this).call(this,s,o,a)}else if(n[2].interfaces_&&n[2].interfaces_.indexOf(List)>-1&&n[0]instanceof Object&&n[1]instanceof AbstractNode){var s=n[0],o=n[1],u=n[2];_get(Object.getPrototypeOf(t.prototype),"query",this).call(this,s,o,u)}}},{key:"getComparator",value:function(){return t.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(e,n){return _get(Object.getPrototypeOf(t.prototype),"createParentBoundables",this).call(this,e,n)}},{key:"remove",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];return _get(Object.getPrototypeOf(t.prototype),"remove",this).call(this,a,s)}return(e=_get(Object.getPrototypeOf(t.prototype),"remove",this)).call.apply(e,[this].concat(r))}},{key:"depth",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length?_get(Object.getPrototypeOf(t.prototype),"depth",this).call(this):(e=_get(Object.getPrototypeOf(t.prototype),"depth",this)).call.apply(e,[this].concat(r))}},{key:"createParentBoundables",value:function(e,n){Assert.isTrue(!e.isEmpty());var r=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),i=new ArrayList(e);Collections.sort(i,t.xComparator);var a=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(a,n)}},{key:"nearestNeighbour",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0].interfaces_&&n[0].interfaces_.indexOf(ItemDistance)>-1){var i=n[0],a=new BoundablePair(this.getRoot(),this.getRoot(),i);return this.nearestNeighbour(a)}if(n[0]instanceof BoundablePair){var s=n[0];return this.nearestNeighbour(s,Double.POSITIVE_INFINITY)}}else if(2===n.length){if(n[0]instanceof t&&n[1].interfaces_&&n[1].interfaces_.indexOf(ItemDistance)>-1){var o=n[0],i=n[1],a=new BoundablePair(this.getRoot(),o.getRoot(),i);return this.nearestNeighbour(a)}if(n[0]instanceof BoundablePair&&"number"==typeof n[1]){var s=n[0],u=n[1],l=u,c=null,h=new PriorityQueue;for(h.add(s);!h.isEmpty()&&l>0;){var g=h.poll(),f=g.getDistance();if(f>=l)break;g.isLeaves()?(l=f,c=g):g.expandToQueue(h,l)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===n.length){var y=n[0],d=n[1],i=n[2],v=new ItemBoundable(y,d),a=new BoundablePair(this.getRoot(),v,i);return this.nearestNeighbour(a)[0]}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[SpatialIndex,Serializable]}}],[{key:"centreX",value:function(e){return t.avg(e.getMinX(),e.getMaxX())}},{key:"avg",value:function(e,t){return(e+t)/2}},{key:"centreY",value:function(e){return t.avg(e.getMinY(),e.getMaxY())}},{key:"STRtreeNode",get:function(){return STRtreeNode}}]),t}(AbstractSTRtree),STRtreeNode=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length)var a=r[0],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,a));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"computeBounds",value:function(){for(var e=null,t=this.getChildBoundables().iterator();t.hasNext();){var n=t.next();null===e?e=new Envelope(n.getBounds()):e.expandToInclude(n.getBounds())}return e}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(AbstractNode);STRtree.serialVersionUID=0x39920f7d5f261e0,STRtree.xComparator=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"compare",value:function(e,t){return STRtree.compareDoubles(STRtree.centreX(e.getBounds()),STRtree.centreX(t.getBounds()))}},{key:"interfaces_",get:function(){return[Comparator]}}]),e}()),STRtree.yComparator=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"compare",value:function(e,t){return STRtree.compareDoubles(STRtree.centreY(e.getBounds()),STRtree.centreY(t.getBounds()))}},{key:"interfaces_",get:function(){return[Comparator]}}]),e}()),STRtree.intersectsOp=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"intersects",value:function(e,t){return e.intersects(t)}},{key:"interfaces_",get:function(){return[IntersectsOp]}}]),e}()),STRtree.DEFAULT_NODE_CAPACITY=10;var SegmentPointComparator=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"relativeSign",value:function(e,t){return t>e?-1:e>t?1:0}},{key:"compare",value:function(t,n,r){if(n.equals2D(r))return 0;var i=e.relativeSign(n.x,r.x),a=e.relativeSign(n.y,r.y);switch(t){case 0:return e.compareValue(i,a);case 1:return e.compareValue(a,i);case 2:return e.compareValue(a,-i);case 3:return e.compareValue(-i,a);case 4:return e.compareValue(-i,-a);case 5:return e.compareValue(-a,-i);case 6:return e.compareValue(-a,i);case 7:return e.compareValue(i,-a)}return Assert.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(e,t){return 0>e?-1:e>0?1:0>t?-1:t>0?1:0}}]),e}(),SegmentNode=function(){function e(){_classCallCheck(this,e),this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(4===n.length){var i=n[0],a=n[1],s=n[2],o=n[3];this.segString=i,this.coord=new Coordinate(a),this.segmentIndex=s,this.segmentOctant=o,this._isInterior=!a.equals2D(i.getCoordinate(s))}}return _createClass(e,[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:SegmentPointComparator.compare(this.segmentOctant,this.coord,t.coord)}},{key:"isEndPoint",value:function(e){return 0!==this.segmentIndex||this._isInterior?this.segmentIndex===e?!0:!1:!0}},{key:"isInterior",value:function(){return this._isInterior}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable]}}]),e}(),SegmentNodeList=function(){function e(){_classCallCheck(this,e),this.nodeMap=new TreeMap,this.edge=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.edge=i}}return _createClass(e,[{key:"getSplitCoordinates",value:function(){var e=new CoordinateList;this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next();this.addEdgeCoordinates(n,r,e),n=r}return e.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var e=new ArrayList;this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var t=e.iterator();t.hasNext();){var n=t.next().intValue();this.add(this.edge.getCoordinate(n),n)}}},{key:"print",value:function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}}},{key:"findCollapsesFromExistingVertices",value:function(e){for(var t=0;t<this.edge.size()-2;t++){var n=this.edge.getCoordinate(t),r=(this.edge.getCoordinate(t+1),this.edge.getCoordinate(t+2));n.equals2D(r)&&e.add(new Integer(t+1))}}},{key:"addEdgeCoordinates",value:function(e,t,n){var r=t.segmentIndex-e.segmentIndex+2,i=this.edge.getCoordinate(t.segmentIndex),a=t.isInterior()||!t.coord.equals2D(i);a||r--;n.add(new Coordinate(e.coord),!1);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)n.add(this.edge.getCoordinate(s));a&&n.add(new Coordinate(t.coord))}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(e){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next(),i=this.createSplitEdge(n,r);e.add(i),n=r}}},{key:"findCollapseIndex",value:function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-e.segmentIndex;return t.isInterior()||r--,1===r?(n[0]=e.segmentIndex+1,!0):!1}},{key:"findCollapsesFromInsertedNodes",value:function(e){for(var t=new Array(1),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),a=this.findCollapseIndex(r,i,t);a&&e.add(new Integer(t[0])),r=i}}},{key:"getEdge",value:function(){return this.edge}},{key:"addEndpoints",value:function(){var e=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(e),e)}},{key:"createSplitEdge",value:function(e,t){var n=t.segmentIndex-e.segmentIndex+2,r=this.edge.getCoordinate(t.segmentIndex),i=t.isInterior()||!t.coord.equals2D(r);i||n--;var a=new Array(n),s=0;a[s++]=new Coordinate(e.coord);for(var o=e.segmentIndex+1;o<=t.segmentIndex;o++)a[s++]=this.edge.getCoordinate(o);return i&&(a[s]=new Coordinate(t.coord)),new NodedSegmentString(a,this.edge.getData())}},{key:"add",value:function(e,t){var n=new SegmentNode(this.edge,e,t,this.edge.getSegmentOctant(t)),r=this.nodeMap.get(n);return null!==r?(Assert.isTrue(r.coord.equals2D(e),"Found equal nodes with different coordinates"),r):(this.nodeMap.put(n,n),n)}},{key:"checkSplitEdgesCorrectness",value:function(e){var t=this.edge.getCoordinates(),n=e.get(0),r=n.getCoordinate(0);if(!r.equals2D(t[0]))throw new RuntimeException("bad split edge start point at "+r);var i=e.get(e.size()-1),a=i.getCoordinates(),s=a[a.length-1];if(!s.equals2D(t[t.length-1]))throw new RuntimeException("bad split edge end point at "+s)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Octant=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"octant",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){if("number"==typeof n[0]&&"number"==typeof n[1]){var i=n[0],a=n[1];if(0===i&&0===a)throw new IllegalArgumentException$1("Cannot compute the octant for point ( "+i+", "+a+" )");var s=Math.abs(i),o=Math.abs(a);return i>=0?a>=0?s>=o?0:1:s>=o?7:6:a>=0?s>=o?3:2:s>=o?4:5}if(n[0]instanceof Coordinate&&n[1]instanceof Coordinate){var u=n[0],l=n[1],c=l.x-u.x,h=l.y-u.y;if(0===c&&0===h)throw new IllegalArgumentException$1("Cannot compute the octant for two identical points "+u);return e.octant(c,h)}}}}]),e}(),SegmentString=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(e){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(e){}},{key:"getData",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),NodableSegmentString=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addIntersection",value:function(e,t){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[SegmentString]}}]),e}(),NodedSegmentString=function(){function e(){_classCallCheck(this,e),this.nodeList=new SegmentNodeList(this),this.pts=null,this.data=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1];this.pts=i,this.data=a}}return _createClass(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"size",value:function(){return this.pts.length}},{key:"getCoordinate",value:function(e){return this.pts[e]}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getSegmentOctant",value:function(e){return e===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))}},{key:"setData",value:function(e){this.data=e}},{key:"safeOctant",value:function(e,t){return e.equals2D(t)?0:Octant.octant(e,t)}},{key:"getData",value:function(){return this.data}},{key:"addIntersection",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){var r=t[0],i=t[1];this.addIntersectionNode(r,i)}else if(4===t.length){var a=t[0],i=t[1],s=(t[2],t[3]),o=new Coordinate(a.getIntersection(s));this.addIntersection(o,i)}}},{key:"toString",value:function(){return WKTWriter.toLineString(new CoordinateArraySequence(this.pts))}},{key:"getNodeList",value:function(){return this.nodeList}},{key:"addIntersectionNode",value:function(e,t){var n=t,r=n+1;if(r<this.pts.length){var i=this.pts[r];e.equals2D(i)&&(n=r)}var a=this.nodeList.add(e,n);return a}},{key:"addIntersections",value:function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[NodableSegmentString]}}],[{key:"getNodedSubstrings",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0],a=new ArrayList;return e.getNodedSubstrings(i,a),a}if(2===n.length)for(var i=n[0],s=n[1],o=i.iterator();o.hasNext();){var u=o.next();u.getNodeList().addSplitEdges(s)}}}]),e}(),MonotoneChainOverlapAction=function(){function e(){_classCallCheck(this,e),this.tempEnv1=new Envelope,this.tempEnv2=new Envelope,this.overlapSeg1=new LineSegment,this.overlapSeg2=new LineSegment}return _createClass(e,[{key:"overlap",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){t[0],t[1]}else if(4===t.length){var r=t[0],i=t[1],a=t[2],s=t[3];r.getLineSegment(i,this.overlapSeg1),a.getLineSegment(s,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),MonotoneChain$1=function(){function e(){_classCallCheck(this,e),this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(4===n.length){var i=n[0],a=n[1],s=n[2],o=n[3];this.pts=i,this.start=a,this.end=s,this.context=o}}return _createClass(e,[{key:"getLineSegment",value:function(e,t){t.p0=this.pts[e],t.p1=this.pts[e+1]}},{key:"computeSelect",value:function(e,t,n,r){var i=this.pts[t],a=this.pts[n];if(r.tempEnv1.init(i,a),n-t===1)return r.select(this,t),null;if(!e.intersects(r.tempEnv1))return null;var s=Math.trunc((t+n)/2);s>t&&this.computeSelect(e,t,s,r),n>s&&this.computeSelect(e,s,n,r)}},{key:"getCoordinates",value:function(){for(var e=new Array(this.end-this.start+1),t=0,n=this.start;n<=this.end;n++)e[t++]=this.pts[n];return e}},{key:"computeOverlaps",value:function(e,t){this.computeOverlapsInternal(this.start,this.end,e,e.start,e.end,t)}},{key:"setId",value:function(e){this.id=e}},{key:"select",value:function(e,t){this.computeSelect(e,this.start,this.end,t)}},{key:"getEnvelope",value:function(){if(null===this.env){var e=this.pts[this.start],t=this.pts[this.end];this.env=new Envelope(e,t)}return this.env}},{key:"getEndIndex",value:function(){return this.end}},{key:"getStartIndex",value:function(){return this.start}},{key:"getContext",value:function(){return this.context}},{key:"getId",value:function(){return this.id}},{key:"computeOverlapsInternal",value:function(e,t,n,r,i,a){var s=this.pts[e],o=this.pts[t],u=n.pts[r],l=n.pts[i];if(t-e===1&&i-r===1)return a.overlap(this,e,n,r),null;if(a.tempEnv1.init(s,o),a.tempEnv2.init(u,l),!a.tempEnv1.intersects(a.tempEnv2))return null;var c=Math.trunc((e+t)/2),h=Math.trunc((r+i)/2);c>e&&(h>r&&this.computeOverlapsInternal(e,c,n,r,h,a),i>h&&this.computeOverlapsInternal(e,c,n,h,i,a)),t>c&&(h>r&&this.computeOverlapsInternal(c,t,n,r,h,a),i>h&&this.computeOverlapsInternal(c,t,n,h,i,a))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),MonotoneChainBuilder=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getChainStartIndices",value:function(t){var n=0,r=new ArrayList;r.add(new Integer(n));do{var i=e.findChainEnd(t,n);r.add(new Integer(i)),n=i}while(n<t.length-1);var a=e.toIntArray(r);return a}},{key:"findChainEnd",value:function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var r=Quadrant.quadrant(e[n],e[n+1]),i=t+1;i<e.length;){if(!e[i-1].equals2D(e[i])){var a=Quadrant.quadrant(e[i-1],e[i]);if(a!==r)break}i++}return i-1}},{key:"getChains",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];return e.getChains(i,null)}if(2===n.length){for(var i=n[0],a=n[1],s=new ArrayList,o=e.getChainStartIndices(i),u=0;u<o.length-1;u++){var l=new MonotoneChain$1(i,o[u],o[u+1],a);s.add(l)}return s}}},{key:"toIntArray",value:function(e){for(var t=new Array(e.size()),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t}}]),e}(),Noder=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"computeNodes",value:function(e){}},{key:"getNodedSubstrings",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),SinglePassNoder=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.segInt=null;var a=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length);else if(1===n.length){var i=n[0];t.setSegmentIntersector(i)}};return a.apply(this,r)}return _createClass(e,[{key:"setSegmentIntersector",value:function(e){this.segInt=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Noder]}}]),e}(),MCIndexNoder=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];_classCallCheck(this,t);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));s.monoChains=new ArrayList,s.index=new STRtree,s.idCounter=0,s.nodedSegStrings=null,s.nOverlaps=0;var o=function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];return 0===r.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,r):1===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var a=r[0];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,a))}.apply(void 0,r):void 0};return e=o.apply(s,i),_possibleConstructorReturn(s,e)}return _inherits(t,e),_createClass(t,[{key:"getMonotoneChains",value:function(){return this.monoChains}},{key:"getNodedSubstrings",value:function(){return NodedSegmentString.getNodedSubstrings(this.nodedSegStrings)}},{key:"getIndex",value:function(){return this.index}},{key:"add",value:function(e){for(var t=MonotoneChainBuilder.getChains(e.getCoordinates(),e),n=t.iterator();n.hasNext();){var r=n.next();
r.setId(this.idCounter++),this.index.insert(r.getEnvelope(),r),this.monoChains.add(r)}}},{key:"computeNodes",value:function(e){this.nodedSegStrings=e;for(var t=e.iterator();t.hasNext();)this.add(t.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var e=new SegmentOverlapAction(this.segInt),t=this.monoChains.iterator();t.hasNext();)for(var n=t.next(),r=this.index.query(n.getEnvelope()),i=r.iterator();i.hasNext();){var a=i.next();if(a.getId()>n.getId()&&(n.computeOverlaps(a,e),this.nOverlaps++),this.segInt.isDone())return null}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"SegmentOverlapAction",get:function(){return SegmentOverlapAction}}]),t}(SinglePassNoder),SegmentOverlapAction=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.si=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];e.si=a}return e}return _inherits(t,e),_createClass(t,[{key:"overlap",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(4!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"overlap",this)).call.apply(e,[this].concat(r));var a=r[0],s=r[1],o=r[2],u=r[3],l=a.getContext(),c=o.getContext();this.si.processIntersections(l,s,c,u)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(MonotoneChainOverlapAction),BufferInputLineSimplifier=function(){function e(){_classCallCheck(this,e),this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=CGAlgorithms.COUNTERCLOCKWISE;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.inputLine=i}}return _createClass(e,[{key:"isDeletable",value:function(e,t,n,r){var i=this.inputLine[e],a=this.inputLine[t],s=this.inputLine[n];return this.isConcave(i,a,s)&&this.isShallow(i,a,s,r)?this.isShallowSampled(i,a,e,n,r):!1}},{key:"deleteShallowConcavities",value:function(){for(var t=1,n=(this.inputLine.length-1,this.findNextNonDeletedIndex(t)),r=this.findNextNonDeletedIndex(n),i=!1;r<this.inputLine.length;){var a=!1;this.isDeletable(t,n,r,this.distanceTol)&&(this.isDeleted[n]=e.DELETE,a=!0,i=!0),t=a?r:n,n=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(n)}return i}},{key:"isShallowConcavity",value:function(e,t,n,r){var i=CGAlgorithms.computeOrientation(e,t,n),a=i===this.angleOrientation;if(!a)return!1;var s=CGAlgorithms.distancePointLine(t,e,n);return r>s}},{key:"isShallowSampled",value:function(t,n,r,i,a){var s=Math.trunc((i-r)/e.NUM_PTS_TO_CHECK);0>=s&&(s=1);for(var o=r;i>o;o+=s)if(!this.isShallow(t,n,this.inputLine[o],a))return!1;return!0}},{key:"isConcave",value:function e(t,n,r){var i=CGAlgorithms.computeOrientation(t,n,r),e=i===this.angleOrientation;return e}},{key:"simplify",value:function(e){this.distanceTol=Math.abs(e),0>e&&(this.angleOrientation=CGAlgorithms.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length);var t=!1;do t=this.deleteShallowConcavities();while(t);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var n=t+1;n<this.inputLine.length&&this.isDeleted[n]===e.DELETE;)n++;return n}},{key:"isShallow",value:function(e,t,n,r){var i=CGAlgorithms.distancePointLine(t,e,n);return r>i}},{key:"collapseLine",value:function(){for(var t=new CoordinateList,n=0;n<this.inputLine.length;n++)this.isDeleted[n]!==e.DELETE&&t.add(this.inputLine[n]);return t.toCoordinateArray()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(t,n){var r=new e(t);return r.simplify(n)}}]),e}();BufferInputLineSimplifier.INIT=0,BufferInputLineSimplifier.DELETE=1,BufferInputLineSimplifier.KEEP=1,BufferInputLineSimplifier.NUM_PTS_TO_CHECK=10;var OffsetSegmentString=function(){function e(){_classCallCheck(this,e),this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length&&(this.ptList=new ArrayList)}return _createClass(e,[{key:"getCoordinates",value:function(){var t=this.ptList.toArray(e.COORDINATE_ARRAY_TYPE);return t}},{key:"setPrecisionModel",value:function(e){this.precisionModel=e}},{key:"addPt",value:function(e){var t=new Coordinate(e);return this.precisionModel.makePrecise(t),this.isRedundant(t)?null:void this.ptList.add(t)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(e,t){if(t)for(var n=0;n<e.length;n++)this.addPt(e[n]);else for(var n=e.length-1;n>=0;n--)this.addPt(e[n])}},{key:"isRedundant",value:function(e){if(this.ptList.size()<1)return!1;var t=this.ptList.get(this.ptList.size()-1),n=e.distance(t);return n<this.minimimVertexDistance?!0:!1}},{key:"toString",value:function(){var e=new GeometryFactory,t=e.createLineString(this.getCoordinates());return t.toString()}},{key:"closeRing",value:function(){if(this.ptList.size()<1)return null;var e=new Coordinate(this.ptList.get(0)),t=this.ptList.get(this.ptList.size()-1),n=null;return this.ptList.size()>=2&&(n=this.ptList.get(this.ptList.size()-2)),e.equals(t)?null:void this.ptList.add(e)}},{key:"setMinimumVertexDistance",value:function(e){this.minimimVertexDistance=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();OffsetSegmentString.COORDINATE_ARRAY_TYPE=new Array(0);var Angle$1=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toDegrees",value:function(e){return 180*e/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=e.PI_TIMES_2;for(;t<=-Math.PI;)t+=e.PI_TIMES_2;return t}},{key:"angle",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return Math.atan2(r.y,r.x)}if(2===t.length){var i=t[0],a=t[1],s=a.x-i.x,o=a.y-i.y;return Math.atan2(o,s)}}},{key:"isAcute",value:function(e,t,n){var r=e.x-t.x,i=e.y-t.y,a=n.x-t.x,s=n.y-t.y,o=r*a+i*s;return o>0}},{key:"isObtuse",value:function(e,t,n){var r=e.x-t.x,i=e.y-t.y,a=n.x-t.x,s=n.y-t.y,o=r*a+i*s;return 0>o}},{key:"interiorAngle",value:function(t,n,r){var i=e.angle(n,t),a=e.angle(n,r);return Math.abs(a-i)}},{key:"normalizePositive",value:function(t){if(0>t){for(;0>t;)t+=e.PI_TIMES_2;t>=e.PI_TIMES_2&&(t=0)}else{for(;t>=e.PI_TIMES_2;)t-=e.PI_TIMES_2;0>t&&(t=0)}return t}},{key:"angleBetween",value:function(t,n,r){var i=e.angle(n,t),a=e.angle(n,r);return e.diff(i,a)}},{key:"diff",value:function(e,t){var n=null;return n=t>e?t-e:e-t,n>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(e){return e*Math.PI/180}},{key:"getTurn",value:function(t,n){var r=Math.sin(n-t);return r>0?e.COUNTERCLOCKWISE:0>r?e.CLOCKWISE:e.NONE}},{key:"angleBetweenOriented",value:function(t,n,r){var i=e.angle(n,t),a=e.angle(n,r),s=a-i;return s<=-Math.PI?s+e.PI_TIMES_2:s>Math.PI?s-e.PI_TIMES_2:s}}]),e}();Angle$1.PI_TIMES_2=2*Math.PI,Angle$1.PI_OVER_2=Math.PI/2,Angle$1.PI_OVER_4=Math.PI/4,Angle$1.COUNTERCLOCKWISE=CGAlgorithms.COUNTERCLOCKWISE,Angle$1.CLOCKWISE=CGAlgorithms.CLOCKWISE,Angle$1.NONE=CGAlgorithms.COLLINEAR;var OffsetSegmentGenerator=function(){function e(){_classCallCheck(this,e),this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new LineSegment,this.seg1=new LineSegment,this.offset0=new LineSegment,this.offset1=new LineSegment,this.side=0,this._hasNarrowConcaveAngle=!1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],a=n[1],s=n[2];this.precisionModel=i,this.bufParams=a,this.li=new RobustLineIntersector,this.filletAngleQuantum=Math.PI/2/a.getQuadrantSegments(),a.getQuadrantSegments()>=8&&a.getJoinStyle()===BufferParameters.JOIN_ROUND&&(this.closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(s)}}return _createClass(e,[{key:"addNextSegment",value:function(e,t){if(this.s0=this.s1,this.s1=this.s2,this.s2=e,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=CGAlgorithms.computeOrientation(this.s0,this.s1,this.s2),r=n===CGAlgorithms.CLOCKWISE&&this.side===Position.LEFT||n===CGAlgorithms.COUNTERCLOCKWISE&&this.side===Position.RIGHT;0===n?this.addCollinear(t):r?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)}},{key:"addLineEndCap",value:function(e,t){var n=new LineSegment(e,t),r=new LineSegment;this.computeOffsetSegment(n,Position.LEFT,this.distance,r);var i=new LineSegment;this.computeOffsetSegment(n,Position.RIGHT,this.distance,i);var a=t.x-e.x,s=t.y-e.y,o=Math.atan2(s,a);switch(this.bufParams.getEndCapStyle()){case BufferParameters.CAP_ROUND:this.segList.addPt(r.p1),this.addFilletArc(t,o+Math.PI/2,o-Math.PI/2,CGAlgorithms.CLOCKWISE,this.distance),this.segList.addPt(i.p1);break;case BufferParameters.CAP_FLAT:this.segList.addPt(r.p1),this.segList.addPt(i.p1);break;case BufferParameters.CAP_SQUARE:var u=new Coordinate;u.x=Math.abs(this.distance)*Math.cos(o),u.y=Math.abs(this.distance)*Math.sin(o);var l=new Coordinate(r.p1.x+u.x,r.p1.y+u.y),c=new Coordinate(i.p1.x+u.x,i.p1.y+u.y);this.segList.addPt(l),this.segList.addPt(c)}}},{key:"getCoordinates",value:function(){var e=this.segList.getCoordinates();return e}},{key:"addMitreJoin",value:function(e,t,n,r){var i=!0,a=null;try{a=HCoordinate.intersection(t.p0,t.p1,n.p0,n.p1);var s=0>=r?1:a.distance(e)/Math.abs(r);s>this.bufParams.getMitreLimit()&&(i=!1)}catch(e){if(!(e instanceof NotRepresentableException))throw e;a=new Coordinate(0,0),i=!1}finally{}i?this.segList.addPt(a):this.addLimitedMitreJoin(t,n,r,this.bufParams.getMitreLimit())}},{key:"addFilletCorner",value:function(e,t,n,r,i){var a=t.x-e.x,s=t.y-e.y,o=Math.atan2(s,a),u=n.x-e.x,l=n.y-e.y,c=Math.atan2(l,u);r===CGAlgorithms.CLOCKWISE?c>=o&&(o+=2*Math.PI):o>=c&&(o-=2*Math.PI),this.segList.addPt(t),this.addFilletArc(e,o,c,r,i),this.segList.addPt(n)}},{key:"addOutsideTurn",value:function(t,n){return this.offset0.p1.distance(this.offset1.p0)<this.distance*e.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===BufferParameters.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===BufferParameters.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(n&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))}},{key:"createSquare",value:function(e){this.segList.addPt(new Coordinate(e.x+this.distance,e.y+this.distance)),this.segList.addPt(new Coordinate(e.x+this.distance,e.y-this.distance)),this.segList.addPt(new Coordinate(e.x-this.distance,e.y-this.distance)),this.segList.addPt(new Coordinate(e.x-this.distance,e.y+this.distance)),this.segList.closeRing()}},{key:"addSegments",value:function(e,t){this.segList.addPts(e,t)}},{key:"addFirstSegment",value:function(){this.segList.addPt(this.offset1.p0)}},{key:"addLastSegment",value:function(){this.segList.addPt(this.offset1.p1)}},{key:"initSideSegments",value:function(e,t,n){this.s1=e,this.s2=t,this.side=n,this.seg1.setCoordinates(e,t),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)}},{key:"addLimitedMitreJoin",value:function(e,t,n,r){var i=this.seg0.p1,a=Angle.angle(i,this.seg0.p0),s=(Angle.angle(i,this.seg1.p1),Angle.angleBetweenOriented(this.seg0.p0,i,this.seg1.p1)),o=s/2,u=Angle.normalize(a+o),l=Angle.normalize(u+Math.PI),c=r*n,h=c*Math.abs(Math.sin(o)),g=n-h,f=i.x+c*Math.cos(l),y=i.y+c*Math.sin(l),d=new Coordinate(f,y),v=new LineSegment(i,d),m=v.pointAlongOffset(1,g),p=v.pointAlongOffset(1,-g);this.side===Position.LEFT?(this.segList.addPt(m),this.segList.addPt(p)):(this.segList.addPt(p),this.segList.addPt(m))}},{key:"computeOffsetSegment",value:function(e,t,n,r){var i=t===Position.LEFT?1:-1,a=e.p1.x-e.p0.x,s=e.p1.y-e.p0.y,o=Math.sqrt(a*a+s*s),u=i*n*a/o,l=i*n*s/o;r.p0.x=e.p0.x-l,r.p0.y=e.p0.y+u,r.p1.x=e.p1.x-l,r.p1.y=e.p1.y+u}},{key:"addFilletArc",value:function(e,t,n,r,i){var a=r===CGAlgorithms.CLOCKWISE?-1:1,s=Math.abs(t-n),o=Math.trunc(s/this.filletAngleQuantum+.5);if(1>o)return null;var u=null,l=null;u=0,l=s/o;for(var c=u,h=new Coordinate;s>c;){var g=t+a*c;h.x=e.x+i*Math.cos(g),h.y=e.y+i*Math.sin(g),this.segList.addPt(h),c+=l}}},{key:"addInsideTurn",value:function(t,n){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*e.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var r=new Coordinate((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(r);var i=new Coordinate((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(i)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}}},{key:"createCircle",value:function(e){var t=new Coordinate(e.x+this.distance,e.y);this.segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this.distance),this.segList.closeRing()}},{key:"addBevelJoin",value:function(e,t){this.segList.addPt(e.p1),this.segList.addPt(t.p0)}},{key:"init",value:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new OffsetSegmentString,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*e.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(e){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var t=this.li.getIntersectionNum();t>=2&&(this.bufParams.getJoinStyle()===BufferParameters.JOIN_BEVEL||this.bufParams.getJoinStyle()===BufferParameters.JOIN_MITRE?(e&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,CGAlgorithms.CLOCKWISE,this.distance))}},{key:"closeRing",value:function(){this.segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR=80;var OffsetCurveBuilder=function(){function e(){_classCallCheck(this,e),this.distance=0,this.precisionModel=null,this.bufParams=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1];this.precisionModel=i,this.bufParams=a}}return _createClass(e,[{key:"getOffsetCurve",value:function(e,t){if(this.distance=t,0===t)return null;var n=0>t,r=Math.abs(t),i=this.getSegGen(r);e.length<=1?this.computePointCurve(e[0],i):this.computeOffsetCurve(e,n,i);var a=i.getCoordinates();return n&&CoordinateArrays.reverse(a),a}},{key:"computeSingleSidedBufferCurve",value:function(e,t,n){var r=this.simplifyTolerance(this.distance);if(t){n.addSegments(e,!0);var i=BufferInputLineSimplifier.simplify(e,-r),a=i.length-1;n.initSideSegments(i[a],i[a-1],Position.LEFT),n.addFirstSegment();for(var s=a-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(e,!1);var o=BufferInputLineSimplifier.simplify(e,r),u=o.length-1;n.initSideSegments(o[0],o[1],Position.LEFT),n.addFirstSegment();for(var s=2;u>=s;s++)n.addNextSegment(o[s],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(e,t,n){var r=this.simplifyTolerance(this.distance);t===Position.RIGHT&&(r=-r);var i=BufferInputLineSimplifier.simplify(e,r),a=i.length-1;n.initSideSegments(i[a-1],i[0],t);for(var s=1;a>=s;s++){var o=1!==s;n.addNextSegment(i[s],o)}n.closeRing()}},{key:"computeLineBufferCurve",value:function(e,t){var n=this.simplifyTolerance(this.distance),r=BufferInputLineSimplifier.simplify(e,n),i=r.length-1;t.initSideSegments(r[0],r[1],Position.LEFT);for(var a=2;i>=a;a++)t.addNextSegment(r[a],!0);t.addLastSegment(),t.addLineEndCap(r[i-1],r[i]);var s=BufferInputLineSimplifier.simplify(e,-n),o=s.length-1;t.initSideSegments(s[o],s[o-1],Position.LEFT);for(var a=o-2;a>=0;a--)t.addNextSegment(s[a],!0);t.addLastSegment(),t.addLineEndCap(s[1],s[0]),t.closeRing()}},{key:"computePointCurve",value:function(e,t){switch(this.bufParams.getEndCapStyle()){case BufferParameters.CAP_ROUND:t.createCircle(e);break;case BufferParameters.CAP_SQUARE:t.createSquare(e)}}},{key:"getLineCurve",value:function(e,t){if(this.distance=t,0>t&&!this.bufParams.isSingleSided())return null;if(0===t)return null;var n=Math.abs(t),r=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],r);else if(this.bufParams.isSingleSided()){var i=0>t;this.computeSingleSidedBufferCurve(e,i,r)}else this.computeLineBufferCurve(e,r);var a=r.getCoordinates();return a}},{key:"getBufferParameters",value:function(){return this.bufParams}},{key:"simplifyTolerance",value:function(e){return e*this.bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,n,r){if(this.distance=r,t.length<=2)return this.getLineCurve(t,r);if(0===r)return e.copyCoordinates(t);var i=this.getSegGen(r);return this.computeRingBufferCurve(t,n,i),i.getCoordinates()}},{key:"computeOffsetCurve",value:function(e,t,n){var r=this.simplifyTolerance(this.distance);if(t){var i=BufferInputLineSimplifier.simplify(e,-r),a=i.length-1;n.initSideSegments(i[a],i[a-1],Position.LEFT),n.addFirstSegment();for(var s=a-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var o=BufferInputLineSimplifier.simplify(e,r),u=o.length-1;n.initSideSegments(o[0],o[1],Position.LEFT),n.addFirstSegment();for(var s=2;u>=s;s++)n.addNextSegment(o[s],!0)}n.addLastSegment()}},{key:"getSegGen",value:function(e){return new OffsetSegmentGenerator(this.precisionModel,this.bufParams,e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"copyCoordinates",value:function(e){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=new Coordinate(e[n]);return t}}]),e}(),SubgraphDepthLocater=function(){function e(){_classCallCheck(this,e),this.subgraphs=null,this.seg=new LineSegment,this.cga=new CGAlgorithms;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.subgraphs=i}}return _createClass(e,[{key:"findStabbedSegments",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){for(var r=t[0],i=new ArrayList,a=this.subgraphs.iterator();a.hasNext();){var s=a.next(),o=s.getEnvelope();r.y<o.getMinY()||r.y>o.getMaxY()||this.findStabbedSegments(r,s.getDirectedEdges(),i)}return i}if(3===t.length)if(t[2].interfaces_&&t[2].interfaces_.indexOf(List)>-1&&t[0]instanceof Coordinate&&t[1]instanceof DirectedEdge)for(var r=t[0],u=t[1],l=t[2],c=u.getEdge().getCoordinates(),a=0;a<c.length-1;a++){this.seg.p0=c[a],this.seg.p1=c[a+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var h=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(h<r.x||this.seg.isHorizontal()||r.y<this.seg.p0.y||r.y>this.seg.p1.y||CGAlgorithms.computeOrientation(this.seg.p0,this.seg.p1,r)===CGAlgorithms.RIGHT)){var g=u.getDepth(Position.LEFT);this.seg.p0.equals(c[a])||(g=u.getDepth(Position.RIGHT));var f=new DepthSegment(this.seg,g);l.add(f)}}else if(t[2].interfaces_&&t[2].interfaces_.indexOf(List)>-1&&t[0]instanceof Coordinate&&t[1].interfaces_&&t[1].interfaces_.indexOf(List)>-1)for(var r=t[0],y=t[1],d=t[2],a=y.iterator();a.hasNext();){var v=a.next();v.isForward()&&this.findStabbedSegments(r,v,d)}}},{key:"getDepth",value:function(e){var t=this.findStabbedSegments(e);if(0===t.size())return 0;var n=Collections.min(t);return n.leftDepth}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"DepthSegment",get:function(){return DepthSegment}}]),e}(),DepthSegment=function(){function e(){_classCallCheck(this,e),this.upwardSeg=null,this.leftDepth=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1];this.upwardSeg=new LineSegment(i),this.leftDepth=a}}return _createClass(e,[{key:"compareTo",value:function(e){var t=e;if(this.upwardSeg.minX()>=t.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=t.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(t.upwardSeg);return 0!==n?n:(n=-1*t.upwardSeg.orientationIndex(this.upwardSeg),0!==n?n:this.upwardSeg.compareTo(t.upwardSeg))}},{key:"compareX",value:function(e,t){var n=e.p0.compareTo(t.p0);return 0!==n?n:e.p1.compareTo(t.p1)}},{key:"toString",value:function(){return this.upwardSeg.toString()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable]}}]),e}(),Triangle=function(){function e(){_classCallCheck(this,e),this.p0=null,this.p1=null,this.p2=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],a=n[1],s=n[2];this.p0=i,this.p1=a,this.p2=s}}return _createClass(e,[{key:"area",value:function(){return e.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return e.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(null===t)throw new IllegalArgumentException$1("Supplied point is null.");return e.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return e.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return e.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return e.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return e.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return e.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return e.inCentre(this.p0,this.p1,this.p2)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"area",value:function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)}},{key:"signedArea",value:function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2}},{key:"det",value:function(e,t,n,r){return e*r-t*n}},{key:"interpolateZ",value:function(e,t,n,r){var i=t.x,a=t.y,s=n.x-i,o=r.x-i,u=n.y-a,l=r.y-a,c=s*l-o*u,h=e.x-i,g=e.y-a,f=(l*h-o*g)/c,y=(-u*h+s*g)/c,d=t.z+f*(n.z-t.z)+y*(r.z-t.z);return d}},{key:"longestSideLength",value:function(e,t,n){var r=e.distance(t),i=t.distance(n),a=n.distance(e),s=r;return i>s&&(s=i),a>s&&(s=a),s}},{key:"isAcute",value:function(e,t,n){return Angle.isAcute(e,t,n)&&Angle.isAcute(t,n,e)&&Angle.isAcute(n,e,t)?!0:!1}},{key:"circumcentre",value:function(t,n,r){var i=r.x,a=r.y,s=t.x-i,o=t.y-a,u=n.x-i,l=n.y-a,c=2*e.det(s,o,u,l),h=e.det(o,s*s+o*o,l,u*u+l*l),g=e.det(s,s*s+o*o,u,u*u+l*l),f=i-h/c,y=a+g/c;return new Coordinate(f,y)}},{key:"perpendicularBisector",value:function(e,t){var n=t.x-e.x,r=t.y-e.y,i=new HCoordinate(e.x+n/2,e.y+r/2,1),a=new HCoordinate(e.x-r+n/2,e.y+n+r/2,1);return new HCoordinate(i,a)}},{key:"angleBisector",value:function(e,t,n){var r=t.distance(e),i=t.distance(n),a=r/(r+i),s=n.x-e.x,o=n.y-e.y,u=new Coordinate(e.x+a*s,e.y+a*o);return u}},{key:"area3D",value:function e(t,n,r){var i=n.x-t.x,a=n.y-t.y,s=n.z-t.z,o=r.x-t.x,u=r.y-t.y,l=r.z-t.z,c=a*l-s*u,h=s*o-i*l,g=i*u-a*o,f=c*c+h*h+g*g,e=Math.sqrt(f)/2;return e}},{key:"centroid",value:function(e,t,n){var r=(e.x+t.x+n.x)/3,i=(e.y+t.y+n.y)/3;return new Coordinate(r,i)}},{key:"inCentre",value:function(e,t,n){var r=t.distance(n),i=e.distance(n),a=e.distance(t),s=r+i+a,o=(r*e.x+i*t.x+a*n.x)/s,u=(r*e.y+i*t.y+a*n.y)/s;return new Coordinate(o,u)}}]),e}(),OffsetCurveSetBuilder=function(){function e(){_classCallCheck(this,e),this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new ArrayList;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],a=n[1],s=n[2];this.inputGeom=i,this.distance=a,this.curveBuilder=s}}return _createClass(e,[{key:"addPoint",value:function(e){if(this.distance<=0)return null;var t=e.getCoordinates(),n=this.curveBuilder.getLineCurve(t,this.distance);this.addCurve(n,Location.EXTERIOR,Location.INTERIOR)}},{key:"addPolygon",value:function(e){var t=this.distance,n=Position.LEFT;this.distance<0&&(t=-this.distance,n=Position.RIGHT);var r=e.getExteriorRing(),i=CoordinateArrays.removeRepeatedPoints(r.getCoordinates());if(this.distance<0&&this.isErodedCompletely(r,this.distance))return null;if(this.distance<=0&&i.length<3)return null;this.addPolygonRing(i,t,n,Location.EXTERIOR,Location.INTERIOR);for(var a=0;a<e.getNumInteriorRing();a++){var s=e.getInteriorRingN(a),o=CoordinateArrays.removeRepeatedPoints(s.getCoordinates());this.distance>0&&this.isErodedCompletely(s,-this.distance)||this.addPolygonRing(o,t,Position.opposite(n),Location.INTERIOR,Location.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(e,t){var n=new Triangle(e[0],e[1],e[2]),r=n.inCentre(),i=CGAlgorithms.distancePointLine(r,n.p0,n.p1);return i<Math.abs(t)}},{key:"addLineString",value:function(e){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var t=CoordinateArrays.removeRepeatedPoints(e.getCoordinates()),n=this.curveBuilder.getLineCurve(t,this.distance);this.addCurve(n,Location.EXTERIOR,Location.INTERIOR)}},{key:"addCurve",value:function(e,t,n){if(null===e||e.length<2)return null;var r=new NodedSegmentString(e,new Label(0,Location.BOUNDARY,t,n));this.curveList.add(r)}},{key:"getCurves",value:function(){return this.add(this.inputGeom),this.curveList}},{key:"addPolygonRing",value:function(e,t,n,r,i){if(0===t&&e.length<LinearRing.MINIMUM_VALID_SIZE)return null;var a=r,s=i;e.length>=LinearRing.MINIMUM_VALID_SIZE&&CGAlgorithms.isCCW(e)&&(a=i,s=r,n=Position.opposite(n));var o=this.curveBuilder.getRingCurve(e,n,t);this.addCurve(o,a,s)}},{key:"add",value:function(e){if(e.isEmpty())return null;if(e instanceof Polygon)this.addPolygon(e);else if(e instanceof LineString)this.addLineString(e);else if(e instanceof Point)this.addPoint(e);else if(e instanceof MultiPoint)this.addCollection(e);else if(e instanceof MultiLineString)this.addCollection(e);else if(e instanceof MultiPolygon)this.addCollection(e);else{if(!(e instanceof GeometryCollection))throw new UnsupportedOperationException(e.getClass().getName());this.addCollection(e)}}},{key:"isErodedCompletely",value:function(e,t){var n=e.getCoordinates();if(n.length<4)return 0>t;if(4===n.length)return this.isTriangleErodedCompletely(n,t);var r=e.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return 0>t&&2*Math.abs(t)>i?!0:!1}},{key:"addCollection",value:function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),SimplePointInAreaLocator=function(){function e(){_classCallCheck(this,e),this.geom=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.geom=i}}return _createClass(e,[{key:"locate",value:function(t){return e.locate(t,this.geom)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[PointOnGeometryLocator]}}],[{key:"isPointInRing",value:function(e,t){return t.getEnvelopeInternal().intersects(e)?CGAlgorithms.isPointInRing(e,t.getCoordinates()):!1}},{key:"containsPointInPolygon",value:function(t,n){if(n.isEmpty())return!1;var r=n.getExteriorRing();if(!e.isPointInRing(t,r))return!1;for(var i=0;i<n.getNumInteriorRing();i++){var a=n.getInteriorRingN(i);if(e.isPointInRing(t,a))return!1}return!0}},{key:"containsPoint",value:function(t,n){if(n instanceof Polygon)return e.containsPointInPolygon(t,n);if(n instanceof GeometryCollection)for(var r=new GeometryCollectionIterator(n);r.hasNext();){var i=r.next();if(i!==n&&e.containsPoint(t,i))return!0}return!1}},{key:"locate",value:function(t,n){return n.isEmpty()?Location.EXTERIOR:e.containsPoint(t,n)?Location.INTERIOR:Location.EXTERIOR}}]),e}(),EdgeEndStar=function(){function e(){_classCallCheck(this,e),this.edgeMap=new TreeMap,this.edgeList=null,this.ptInAreaLocation=[Location.NONE,Location.NONE];for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getNextCW",value:function(e){this.getEdges();var t=this.edgeList.indexOf(e),n=t-1;return 0===t&&(n=this.edgeList.size()-1),this.edgeList.get(n)}},{key:"propagateSideLabels",value:function(e){for(var t=Location.NONE,n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea(e)&&i.getLocation(e,Position.LEFT)!==Location.NONE&&(t=i.getLocation(e,Position.LEFT))}if(t===Location.NONE)return null;for(var a=t,n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();if(i.getLocation(e,Position.ON)===Location.NONE&&i.setLocation(e,Position.ON,a),i.isArea(e)){var s=i.getLocation(e,Position.LEFT),o=i.getLocation(e,Position.RIGHT);if(o!==Location.NONE){if(o!==a)throw new TopologyException("side location conflict",r.getCoordinate());s===Location.NONE&&Assert.shouldNeverReachHere("found single null side (at "+r.getCoordinate()+")"),a=s}else Assert.isTrue(i.getLocation(e,Position.LEFT)===Location.NONE,"found single null side"),i.setLocation(e,Position.RIGHT,a),i.setLocation(e,Position.LEFT,a)}}}},{key:"getCoordinate",value:function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()}},{key:"print",value:function(e){System.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}}},{key:"isAreaLabelsConsistent",value:function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,r=t.get(n).getLabel(),i=r.getLocation(e,Position.LEFT);Assert.isTrue(i!==Location.NONE,"Found unlabelled area edge");for(var a=i,s=this.iterator();s.hasNext();){var o=s.next(),u=o.getLabel();Assert.isTrue(u.isArea(e),"Found non-area edge");var l=u.getLocation(e,Position.LEFT),c=u.getLocation(e,Position.RIGHT);if(l===c)return!1;if(c!==a)return!1;a=l}return!0}},{key:"findIndex",value:function(e){this.iterator();for(var t=0;t<this.edgeList.size();t++){var n=this.edgeList.get(t);if(n===e)return t}return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===this.edgeList&&(this.edgeList=new ArrayList(this.edgeMap.values())),this.edgeList}},{key:"getLocation",value:function(e,t,n){return this.ptInAreaLocation[e]===Location.NONE&&(this.ptInAreaLocation[e]=SimplePointInAreaLocator.locate(t,n[e].getGeometry())),this.ptInAreaLocation[e]}},{key:"toString",value:function(){var e=new StringBuffer;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append("\n");for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append("\n")}return e.toString()}},{key:"computeEdgeEndLabels",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.computeLabel(e)}}},{key:"computeLabelling",value:function(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next(),i=r.getLabel(),a=0;2>a;a++)i.isLine(a)&&i.getLocation(a)===Location.BOUNDARY&&(t[a]=!0);
for(var n=this.iterator();n.hasNext();)for(var r=n.next(),i=r.getLabel(),a=0;2>a;a++)if(i.isAnyNull(a)){var s=Location.NONE;if(t[a])s=Location.EXTERIOR;else{var o=r.getCoordinate();s=this.getLocation(a,o,e)}i.setAllLocationsIfNull(a,s)}}},{key:"getDegree",value:function(){return this.edgeMap.size()}},{key:"insertEdgeEnd",value:function(e,t){this.edgeMap.put(e,t),this.edgeList=null}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),DirectedEdgeStar=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.resultAreaEdgeList=null,e.label=null,e.SCANNING_FOR_INCOMING=1,e.LINKING_TO_OUTGOING=2;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length,e}return _inherits(t,e),_createClass(t,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var e=null,t=null,n=this.SCANNING_FOR_INCOMING,r=0;r<this.resultAreaEdgeList.size();r++){var i=this.resultAreaEdgeList.get(r),a=i.getSym();if(i.getLabel().isArea())switch(null===e&&i.isInResult()&&(e=i),n){case this.SCANNING_FOR_INCOMING:if(!a.isInResult())continue;t=a,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!i.isInResult())continue;t.setNext(i),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(null===e)throw new TopologyException("no outgoing dirEdge found",this.getCoordinate());Assert.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),t.setNext(e)}}},{key:"insert",value:function(e){var t=e;this.insertEdgeEnd(t,t)}},{key:"getRightmostEdge",value:function(){var e=this.getEdges(),t=e.size();if(1>t)return null;var n=e.get(0);if(1===t)return n;var r=e.get(t-1),i=n.getQuadrant(),a=r.getQuadrant();if(Quadrant.isNorthern(i)&&Quadrant.isNorthern(a))return n;if(!Quadrant.isNorthern(i)&&!Quadrant.isNorthern(a))return r;return 0!==n.getDy()?n:0!==r.getDy()?r:(Assert.shouldNeverReachHere("found two horizontal edges incident on node"),null)}},{key:"print",value:function(e){System.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();e.print("out "),n.print(e),e.println(),e.print("in "),n.getSym().print(e),e.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new ArrayList;for(var e=this.iterator();e.hasNext();){var t=e.next();(t.isInResult()||t.getSym().isInResult())&&this.resultAreaEdgeList.add(t)}return this.resultAreaEdgeList}},{key:"updateLabelling",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next(),r=n.getLabel();r.setAllLocationsIfNull(0,e.getLocation(0)),r.setAllLocationsIfNull(1,e.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var e=null,t=null,n=this.edgeList.size()-1;n>=0;n--){var r=this.edgeList.get(n),i=r.getSym();null===t&&(t=i),null!==e&&i.setNext(e),e=r}t.setNext(e)}},{key:"computeDepths",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0],i=this.findIndex(r),a=(r.getLabel(),r.getDepth(Position.LEFT)),s=r.getDepth(Position.RIGHT),o=this.computeDepths(i+1,this.edgeList.size(),a),u=this.computeDepths(0,i,o);if(u!==s)throw new TopologyException("depth mismatch at "+r.getCoordinate())}else if(3===t.length){for(var l=t[0],c=t[1],h=t[2],g=h,f=l;c>f;f++){var y=this.edgeList.get(f);y.getLabel();y.setEdgeDepths(Position.RIGHT,g),g=y.getDepth(Position.LEFT)}return g}}},{key:"mergeSymLabels",value:function(){for(var e=this.iterator();e.hasNext();){var t=e.next(),n=t.getLabel();n.merge(t.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(e){for(var t=null,n=null,r=this.SCANNING_FOR_INCOMING,i=this.resultAreaEdgeList.size()-1;i>=0;i--){var a=this.resultAreaEdgeList.get(i),s=a.getSym();switch(null===t&&a.getEdgeRing()===e&&(t=a),r){case this.SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==e)continue;n=s,r=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(a.getEdgeRing()!==e)continue;n.setNextMin(a),r=this.SCANNING_FOR_INCOMING}}r===this.LINKING_TO_OUTGOING&&(Assert.isTrue(null!==t,"found null for first outgoing dirEdge"),Assert.isTrue(t.getEdgeRing()===e,"unable to link last incoming dirEdge"),n.setNextMin(t))}},{key:"getOutgoingDegree",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length){for(var r=0,i=this.iterator();i.hasNext();){var a=i.next();a.isInResult()&&r++}return r}if(1===t.length){for(var s=t[0],r=0,i=this.iterator();i.hasNext();){var a=i.next();a.getEdgeRing()===s&&r++}return r}}},{key:"getLabel",value:function(){return this.label}},{key:"findCoveredLineEdges",value:function(){for(var e=Location.NONE,t=this.iterator();t.hasNext();){var n=t.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){e=Location.INTERIOR;break}if(r.isInResult()){e=Location.EXTERIOR;break}}}if(e===Location.NONE)return null;for(var i=e,t=this.iterator();t.hasNext();){var n=t.next(),r=n.getSym();n.isLineEdge()?n.getEdge().setCovered(i===Location.INTERIOR):(n.isInResult()&&(i=Location.EXTERIOR),r.isInResult()&&(i=Location.INTERIOR))}}},{key:"computeLabelling",value:function(e){_get(Object.getPrototypeOf(t.prototype),"computeLabelling",this).call(this,e),this.label=new Label(Location.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next(),i=r.getEdge(),a=i.getLabel(),s=0;2>s;s++){var o=a.getLocation(s);(o===Location.INTERIOR||o===Location.BOUNDARY)&&this.label.setLocation(s,Location.INTERIOR)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(EdgeEndStar),OverlayNodeFactory=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"createNode",value:function(e){return new Node$1(e,new DirectedEdgeStar)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(NodeFactory),OrientedCoordinateArray=function(){function e(){_classCallCheck(this,e),this.pts=null,this._orientation=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.pts=i,this._orientation=e.orientation(i)}}return _createClass(e,[{key:"compareTo",value:function(t){var n=t,r=e.compareOriented(this.pts,this._orientation,n.pts,n._orientation);return r}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable]}}],[{key:"orientation",value:function(e){return 1===CoordinateArrays.increasingDirection(e)}},{key:"compareOriented",value:function(e,t,n,r){for(var i=t?1:-1,a=r?1:-1,s=t?e.length:-1,o=r?n.length:-1,u=t?0:e.length-1,l=r?0:n.length-1;;){var c=e[u].compareTo(n[l]);if(0!==c)return c;u+=i,l+=a;var h=u===s,g=l===o;if(h&&!g)return-1;if(!h&&g)return 1;if(h&&g)return 0}}}]),e}(),EdgeList=function(){function e(){_classCallCheck(this,e),this.edges=new ArrayList,this.ocaMap=new TreeMap;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"print",value:function(e){e.print("MULTILINESTRING ( ");for(var t=0;t<this.edges.size();t++){var n=this.edges.get(t);t>0&&e.print(","),e.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&e.print(","),e.print(r[i].x+" "+r[i].y);e.println(")")}e.print(")  ")}},{key:"addAll",value:function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next())}},{key:"findEdgeIndex",value:function(e){for(var t=0;t<this.edges.size();t++)if(this.edges.get(t).equals(e))return t;return-1}},{key:"iterator",value:function(){return this.edges.iterator()}},{key:"getEdges",value:function(){return this.edges}},{key:"get",value:function(e){return this.edges.get(e)}},{key:"findEqualEdge",value:function(e){var t=new OrientedCoordinateArray(e.getCoordinates()),n=this.ocaMap.get(t);return n}},{key:"add",value:function(e){this.edges.add(e);var t=new OrientedCoordinateArray(e.getCoordinates());this.ocaMap.put(t,e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),SegmentIntersector$1=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"processIntersections",value:function(e,t,n,r){}},{key:"isDone",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),IntersectionAdder=function(){function e(){_classCallCheck(this,e),this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.li=i}}return _createClass(e,[{key:"isTrivialIntersection",value:function(t,n,r,i){if(t===r&&1===this.li.getIntersectionNum()){if(e.isAdjacentSegments(n,i))return!0;if(t.isClosed()){var a=t.size()-1;if(0===n&&i===a||0===i&&n===a)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this.properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this.hasProperInterior}},{key:"getLineIntersector",value:function(){return this.li}},{key:"hasProperIntersection",value:function(){return this.hasProper}},{key:"processIntersections",value:function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],a=e.getCoordinates()[t+1],s=n.getCoordinates()[r],o=n.getCoordinates()[r+1];this.li.computeIntersection(i,a,s,o),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,e.addIntersections(this.li,t,0),n.addIntersections(this.li,r,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this.hasInterior}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[SegmentIntersector$1]}}],[{key:"isAdjacentSegments",value:function(e,t){return 1===Math.abs(e-t)}}]),e}(),BufferBuilder=function(){function e(){_classCallCheck(this,e),this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new EdgeList;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.bufParams=i}}return _createClass(e,[{key:"setWorkingPrecisionModel",value:function(e){this.workingPrecisionModel=e}},{key:"insertUniqueEdge",value:function(t){var n=this.edgeList.findEqualEdge(t);if(null!==n){var r=n.getLabel(),i=t.getLabel();n.isPointwiseEqual(t)||(i=new Label(t.getLabel()),i.flip()),r.merge(i);var a=e.depthDelta(i),s=n.getDepthDelta(),o=s+a;n.setDepthDelta(o)}else this.edgeList.add(t),t.setDepthDelta(e.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(e,t){for(var n=new ArrayList,r=e.iterator();r.hasNext();){var i=r.next(),a=i.getRightmostCoordinate(),s=new SubgraphDepthLocater(n),o=s.getDepth(a);i.computeDepth(o),i.findResultEdges(),n.add(i),t.add(i.getDirectedEdges(),i.getNodes())}}},{key:"createSubgraphs",value:function(e){for(var t=new ArrayList,n=e.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new BufferSubgraph;i.create(r),t.add(i)}}return Collections.sort(t,Collections.reverseOrder()),t}},{key:"createEmptyResultGeometry",value:function(){var e=this.geomFact.createPolygon();return e}},{key:"getNoder",value:function(e){if(null!==this.workingNoder)return this.workingNoder;var t=new MCIndexNoder,n=new RobustLineIntersector;return n.setPrecisionModel(e),t.setSegmentIntersector(new IntersectionAdder(n)),t}},{key:"buffer",value:function(e,t){var n=this.workingPrecisionModel;null===n&&(n=e.getPrecisionModel()),this.geomFact=e.getFactory();var r=new OffsetCurveBuilder(n,this.bufParams),i=new OffsetCurveSetBuilder(e,t,r),a=i.getCurves();if(a.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(a,n),this.graph=new PlanarGraph(new OverlayNodeFactory),this.graph.addEdges(this.edgeList.getEdges());var s=this.createSubgraphs(this.graph),o=new PolygonBuilder(this.geomFact);this.buildSubgraphs(s,o);var u=o.getPolygons();if(u.size()<=0)return this.createEmptyResultGeometry();var l=this.geomFact.buildGeometry(u);return l}},{key:"computeNodedEdges",value:function(e,t){var n=this.getNoder(t);n.computeNodes(e);for(var r=n.getNodedSubstrings(),i=r.iterator();i.hasNext();){var a=i.next(),s=a.getCoordinates();if(2!==s.length||!s[0].equals2D(s[1])){var o=a.getData(),u=new Edge(a.getCoordinates(),new Label(o));this.insertUniqueEdge(u)}}}},{key:"setNoder",value:function(e){this.workingNoder=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"depthDelta",value:function(e){var t=e.getLocation(0,Position.LEFT),n=e.getLocation(0,Position.RIGHT);return t===Location.INTERIOR&&n===Location.EXTERIOR?1:t===Location.EXTERIOR&&n===Location.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(e){for(var t=new GeometryFactory,n=new ArrayList;e.hasNext();){var r=e.next(),i=t.createLineString(r.getCoordinates());n.add(i)}return t.buildGeometry(n)}}]),e}(),ScaledNoder=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1;var a=function e(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];e.call(t,a,s,0,0)}else if(4===r.length){var a=r[0],s=r[1];r[2],r[3];t.noder=a,t.scaleFactor=s,t.isScaled=!t.isIntegerPrecision()}};return a.apply(this,r)}return _createClass(e,[{key:"rescale",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0].interfaces_&&t[0].interfaces_.indexOf(Collection)>-1)for(var r=t[0],i=r.iterator();i.hasNext();){var a=i.next();this.rescale(a.getCoordinates())}else if(t[0]instanceof Array){var s=t[0],o=null,u=null;2===s.length&&(o=new Coordinate(s[0]),u=new Coordinate(s[1]));for(var i=0;i<s.length;i++)s[i].x=s[i].x/this.scaleFactor+this.offsetX,s[i].y=s[i].y/this.scaleFactor+this.offsetY;2===s.length&&s[0].equals2D(s[1])&&System.out.println(s)}}},{key:"scale",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(t[0].interfaces_&&t[0].interfaces_.indexOf(Collection)>-1){for(var r=t[0],i=new ArrayList,a=r.iterator();a.hasNext();){var s=a.next();i.add(new NodedSegmentString(this.scale(s.getCoordinates()),s.getData()))}return i}if(t[0]instanceof Array){for(var o=t[0],u=new Array(o.length),a=0;a<o.length;a++)u[a]=new Coordinate(Math.round((o[a].x-this.offsetX)*this.scaleFactor),Math.round((o[a].y-this.offsetY)*this.scaleFactor),o[a].z);var l=CoordinateArrays.removeRepeatedPoints(u);return l}}}},{key:"isIntegerPrecision",value:function(){return 1===this.scaleFactor}},{key:"getNodedSubstrings",value:function(){var e=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(e),e}},{key:"computeNodes",value:function(e){var t=e;this.isScaled&&(t=this.scale(e)),this.noder.computeNodes(t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Noder]}}]),e}(),NodingValidator=function(){function e(){_classCallCheck(this,e),this.li=new RobustLineIntersector,this.segStrings=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.segStrings=i}}return _createClass(e,[{key:"checkEndPtVertexIntersections",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)for(var r=this.segStrings.iterator();r.hasNext();){var i=r.next(),a=i.getCoordinates();this.checkEndPtVertexIntersections(a[0],this.segStrings),this.checkEndPtVertexIntersections(a[a.length-1],this.segStrings)}else if(2===t.length)for(var s=t[0],o=t[1],r=o.iterator();r.hasNext();)for(var i=r.next(),a=i.getCoordinates(),u=1;u<a.length-1;u++)if(a[u].equals(s))throw new RuntimeException("found endpt/interior pt intersection at index "+u+" :pt "+s)}},{key:"checkInteriorIntersections",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)for(var r=this.segStrings.iterator();r.hasNext();)for(var i=r.next(),a=this.segStrings.iterator();a.hasNext();){var s=a.next();this.checkInteriorIntersections(i,s)}else if(2===t.length)for(var o=t[0],u=t[1],l=o.getCoordinates(),c=u.getCoordinates(),h=0;h<l.length-1;h++)for(var g=0;g<c.length-1;g++)this.checkInteriorIntersections(o,h,u,g);else if(4===t.length){var f=t[0],y=t[1],d=t[2],v=t[3];if(f===d&&y===v)return null;var m=f.getCoordinates()[y],p=f.getCoordinates()[y+1],C=d.getCoordinates()[v],k=d.getCoordinates()[v+1];if(this.li.computeIntersection(m,p,C,k),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,m,p)||this.hasInteriorIntersection(this.li,C,k)))throw new RuntimeException("found non-noded intersection at "+m+"-"+p+" and "+C+"-"+k)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)for(var r=this.segStrings.iterator();r.hasNext();){var i=r.next();this.checkCollapses(i)}else if(1===t.length)for(var a=t[0],s=a.getCoordinates(),r=0;r<s.length-2;r++)this.checkCollapse(s[r],s[r+1],s[r+2])}},{key:"hasInteriorIntersection",value:function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++){var i=e.getIntersection(r);if(!i.equals(t)&&!i.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(t,n,r){if(t.equals(r))throw new RuntimeException("found non-noded collapse at "+e.fact.createLineString([t,n,r]))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();NodingValidator.fact=new GeometryFactory;var HotPixel=function(){function e(){_classCallCheck(this,e),this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4),this.safeEnv=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],a=n[1],s=n[2];if(this.originalPt=i,this.pt=i,this.scaleFactor=a,this.li=s,0>=a)throw new IllegalArgumentException$1("Scale factor must be non-zero");1!==a&&(this.pt=new Coordinate(this.scale(i.x),this.scale(i.y)),this.p0Scaled=new Coordinate,this.p1Scaled=new Coordinate),this.initCorners(this.pt)}}return _createClass(e,[{key:"intersectsScaled",value:function(e,t){var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),i=Math.min(e.y,t.y),a=Math.max(e.y,t.y),s=this.maxx<n||this.minx>r||this.maxy<i||this.miny>a;if(s)return!1;var o=this.intersectsToleranceSquare(e,t);return Assert.isTrue(!(s&&o),"Found bad envelope test"),o}},{key:"initCorners",value:function(e){var t=.5;this.minx=e.x-t,this.maxx=e.x+t,this.miny=e.y-t,this.maxy=e.y+t,this.corner[0]=new Coordinate(this.maxx,this.maxy),this.corner[1]=new Coordinate(this.minx,this.maxy),this.corner[2]=new Coordinate(this.minx,this.miny),this.corner[3]=new Coordinate(this.maxx,this.miny)}},{key:"intersects",value:function(e,t){return 1===this.scaleFactor?this.intersectsScaled(e,t):(this.copyScaled(e,this.p0Scaled),this.copyScaled(t,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))}},{key:"scale",value:function(e){return Math.round(e*this.scaleFactor)}},{key:"getCoordinate",value:function(){return this.originalPt}},{key:"copyScaled",value:function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)}},{key:"getSafeEnvelope",value:function(){if(null===this.safeEnv){var t=e.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new Envelope(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv}},{key:"intersectsPixelClosure",value:function(e,t){return this.li.computeIntersection(e,t,this.corner[0],this.corner[1]),this.li.hasIntersection()?!0:(this.li.computeIntersection(e,t,this.corner[1],this.corner[2]),this.li.hasIntersection()?!0:(this.li.computeIntersection(e,t,this.corner[2],this.corner[3]),this.li.hasIntersection()?!0:(this.li.computeIntersection(e,t,this.corner[3],this.corner[0]),this.li.hasIntersection()?!0:!1)))}},{key:"intersectsToleranceSquare",value:function(e,t){var n=!1,r=!1;return this.li.computeIntersection(e,t,this.corner[0],this.corner[1]),this.li.isProper()?!0:(this.li.computeIntersection(e,t,this.corner[1],this.corner[2]),this.li.isProper()?!0:(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(e,t,this.corner[2],this.corner[3]),this.li.isProper()?!0:(this.li.hasIntersection()&&(r=!0),this.li.computeIntersection(e,t,this.corner[3],this.corner[0]),this.li.isProper()?!0:n&&r?!0:e.equals(this.pt)?!0:t.equals(this.pt)?!0:!1)))}},{key:"addSnappedNode",value:function(e,t){var n=e.getCoordinate(t),r=e.getCoordinate(t+1);return this.intersects(n,r)?(e.addIntersection(this.getCoordinate(),t),!0):!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();HotPixel.SAFE_ENV_EXPANSION_FACTOR=.75;var MonotoneChainSelectAction=function(){function e(){_classCallCheck(this,e),this.tempEnv1=new Envelope,this.selectedSegment=new LineSegment}return _createClass(e,[{key:"select",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){t[0]}else if(2===t.length){var r=t[0],i=t[1];r.getLineSegment(i,this.selectedSegment),this.select(this.selectedSegment)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),MCIndexPointSnapper=function(){function e(){_classCallCheck(this,e),this.index=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.index=i}}return _createClass(e,[{key:"snap",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return this.snap(r,null,-1)}if(3===t.length){var r=t[0],i=t[1],a=t[2],s=r.getSafeEnvelope(),o=new HotPixelSnapAction(r,i,a);return this.index.query(s,new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"visitItem",value:function(e){var t=e;t.select(s,o)}},{key:"interfaces_",get:function(){return[ItemVisitor]}}]),e}())),o.isNodeAdded()}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"HotPixelSnapAction",get:function(){return HotPixelSnapAction}}]),e}(),HotPixelSnapAction=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.hotPixel=null,e.parentEdge=null,e.hotPixelVertexIndex=null,e._isNodeAdded=!1;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(3===r.length){var a=r[0],s=r[1],o=r[2];e.hotPixel=a,e.parentEdge=s,e.hotPixelVertexIndex=o}return e}return _inherits(t,e),_createClass(t,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"select",this)).call.apply(e,[this].concat(r));var a=r[0],s=r[1],o=a.getContext();return null!==this.parentEdge&&o===this.parentEdge&&s===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(o,s))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(MonotoneChainSelectAction),InteriorIntersectionFinderAdder=function(){function e(){_classCallCheck(this,e),this.li=null,this.interiorIntersections=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.li=i,this.interiorIntersections=new ArrayList}}return _createClass(e,[{key:"processIntersections",value:function(e,t,n,r){if(e===n&&t===r)return null;var i=e.getCoordinates()[t],a=e.getCoordinates()[t+1],s=n.getCoordinates()[r],o=n.getCoordinates()[r+1];if(this.li.computeIntersection(i,a,s,o),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var u=0;u<this.li.getIntersectionNum();u++)this.interiorIntersections.add(this.li.getIntersection(u));e.addIntersections(this.li,t,0),n.addIntersections(this.li,r,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this.interiorIntersections}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[SegmentIntersector$1]}}]),e}(),MCIndexSnapRounder=function(){function e(){_classCallCheck(this,e),this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.pm=i,this.li=new RobustLineIntersector,this.li.setPrecisionModel(i),this.scaleFactor=i.getScale()}}return _createClass(e,[{key:"checkCorrectness",value:function(e){var t=NodedSegmentString.getNodedSubstrings(e),n=new NodingValidator(t);try{n.checkValid()}catch(e){if(!(e instanceof Exception))throw e;e.printStackTrace()}finally{}}},{key:"getNodedSubstrings",value:function(){return NodedSegmentString.getNodedSubstrings(this.nodedSegStrings)}},{key:"snapRound",value:function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)}},{key:"findInteriorIntersections",value:function(e,t){var n=new InteriorIntersectionFinderAdder(t);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(e),n.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0].interfaces_&&t[0].interfaces_.indexOf(Collection)>-1)for(var r=t[0],i=r.iterator();i.hasNext();){var a=i.next();this.computeVertexSnaps(a)}else if(t[0]instanceof NodedSegmentString)for(var s=t[0],o=s.getCoordinates(),u=0;u<o.length;u++){var l=new HotPixel(o[u],this.scaleFactor,this.li),c=this.pointSnapper.snap(l,s,u);c&&s.addIntersection(o[u],u)}}},{key:"computeNodes",value:function(e){this.nodedSegStrings=e,this.noder=new MCIndexNoder,this.pointSnapper=new MCIndexPointSnapper(this.noder.getIndex()),this.snapRound(e,this.li)}},{key:"computeIntersectionSnaps",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=new HotPixel(n,this.scaleFactor,this.li);this.pointSnapper.snap(r)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Noder]}}]),e}(),BufferOp$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.argGeom=null,this.distance=null,this.bufParams=new BufferParameters,this.resultGeometry=null,this.saveException=null;var a=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];t.argGeom=i}else if(2===n.length){var i=n[0],a=n[1];t.argGeom=i,t.bufParams=a}};return a.apply(this,r)}return _createClass(e,[{key:"bufferFixedPrecision",value:function(e){var t=new ScaledNoder(new MCIndexSnapRounder(new PrecisionModel(1)),e.getScale()),n=new BufferBuilder(this.bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this.resultGeometry=n.buffer(this.argGeom,this.distance)}},{key:"bufferReducedPrecision",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(0===n.length){for(var i=e.MAX_PRECISION_DIGITS;i>=0;i--){try{this.bufferReducedPrecision(i)}catch(e){if(!(e instanceof TopologyException))throw e;this.saveException=e}finally{}if(null!==this.resultGeometry)return null}throw this.saveException}if(1===n.length){var a=n[0],s=e.precisionScaleFactor(this.argGeom,this.distance,a),o=new PrecisionModel(s);this.bufferFixedPrecision(o)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),null!==this.resultGeometry)return null;var e=this.argGeom.getFactory().getPrecisionModel();e.getType()===PrecisionModel.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(e){this.bufParams.setQuadrantSegments(e)}},{key:"bufferOriginalPrecision",value:function(){try{var e=new BufferBuilder(this.bufParams);this.resultGeometry=e.buffer(this.argGeom,this.distance)}catch(e){if(!(e instanceof RuntimeException))throw e;this.saveException=e}finally{}}},{key:"getResultGeometry",value:function(e){return this.distance=e,this.computeGeometry(),this.resultGeometry}},{key:"setEndCapStyle",value:function(e){this.bufParams.setEndCapStyle(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"bufferOp",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1],s=new e(i),o=s.getResultGeometry(a);return o}if(3===n.length){if(Number.isInteger(n[2])&&n[0]instanceof Geometry&&"number"==typeof n[1]){var i=n[0],a=n[1],u=n[2],l=new e(i);l.setQuadrantSegments(u);var o=l.getResultGeometry(a);return o}if(n[2]instanceof BufferParameters&&n[0]instanceof Geometry&&"number"==typeof n[1]){var i=n[0],a=n[1],c=n[2],l=new e(i,c),o=l.getResultGeometry(a);return o}}else if(4===n.length){var i=n[0],a=n[1],u=n[2],h=n[3],l=new e(i);l.setQuadrantSegments(u),l.setEndCapStyle(h);var o=l.getResultGeometry(a);return o}}},{key:"precisionScaleFactor",value:function(e,t,n){var r=e.getEnvelopeInternal(),i=MathUtil.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),a=t>0?t:0,s=i+2*a,o=Math.trunc(Math.log(s)/Math.log(10)+1),u=n-o,l=Math.pow(10,u);return l}}]),e}();BufferOp$1.CAP_ROUND=BufferParameters.CAP_ROUND,BufferOp$1.CAP_BUTT=BufferParameters.CAP_FLAT,BufferOp$1.CAP_FLAT=BufferParameters.CAP_FLAT,BufferOp$1.CAP_SQUARE=BufferParameters.CAP_SQUARE,BufferOp$1.MAX_PRECISION_DIGITS=12;var PolygonExtracter=function(){function e(){_classCallCheck(this,e),this.comps=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.comps=i}}return _createClass(e,[{key:"filter",value:function(e){e instanceof Polygon&&this.comps.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryFilter]}}],[{key:"getPolygons",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];return e.getPolygons(i,new ArrayList)}if(2===n.length){var i=n[0],a=n[1];return i instanceof Polygon?a.add(i):i instanceof GeometryCollection&&i.apply(new e(a)),a}}}]),e}(),GeometryLocation=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.component=null,this.segIndex=null,this.pt=null;var a=function n(){for(var r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];if(2===i.length){var s=i[0],o=i[1];n.call(t,s,e.INSIDE_AREA,o)}else if(3===i.length){var s=i[0],u=i[1],o=i[2];t.component=s,t.segIndex=u,t.pt=o}};return a.apply(this,r)}return _createClass(e,[{key:"isInsideArea",value:function(){return this.segIndex===e.INSIDE_AREA}},{key:"getCoordinate",value:function(){return this.pt}},{key:"getGeometryComponent",value:function(){return this.component}},{key:"getSegmentIndex",value:function(){return this.segIndex}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();GeometryLocation.INSIDE_AREA=-1;var PointExtracter=function(){function e(){_classCallCheck(this,e),this.pts=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){
var i=n[0];this.pts=i}}return _createClass(e,[{key:"filter",value:function(e){e instanceof Point&&this.pts.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryFilter]}}],[{key:"getPoints",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];return i instanceof Point?Collections.singletonList(i):e.getPoints(i,new ArrayList)}if(2===n.length){var i=n[0],a=n[1];return i instanceof Point?a.add(i):i instanceof GeometryCollection&&i.apply(new e(a)),a}}}]),e}(),ConnectedElementLocationFilter=function(){function e(){_classCallCheck(this,e),this.locations=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.locations=i}}return _createClass(e,[{key:"filter",value:function(e){(e instanceof Point||e instanceof LineString||e instanceof Polygon)&&this.locations.add(new GeometryLocation(e,0,e.getCoordinate()))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryFilter]}}],[{key:"getLocations",value:function(t){var n=new ArrayList;return t.apply(new e(n)),n}}]),e}(),DistanceOp$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.geom=null,this.terminateDistance=0,this.ptLocator=new PointLocator,this.minDistanceLocation=null,this.minDistance=Double.MAX_VALUE;var a=function e(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];e.call(t,a,s,0)}else if(3===r.length){var a=r[0],s=r[1],o=r[2];t.geom=new Array(2),t.geom[0]=a,t.geom[1]=s,t.terminateDistance=o}};return a.apply(this,r)}return _createClass(e,[{key:"computeContainmentDistance",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length){var r=new Array(2);if(this.computeContainmentDistance(0,r),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,r)}else if(2===t.length){var i=t[0],a=t[1],s=1-i,o=PolygonExtracter.getPolygons(this.geom[i]);if(o.size()>0){var u=ConnectedElementLocationFilter.getLocations(this.geom[s]);if(this.computeContainmentDistance(u,o,a),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[s]=a[0],this.minDistanceLocation[i]=a[1],null}}else if(3===t.length)if(t[2]instanceof Array&&t[0].interfaces_&&t[0].interfaces_.indexOf(List)>-1&&t[1].interfaces_&&t[1].interfaces_.indexOf(List)>-1){for(var l=t[0],c=t[1],h=t[2],g=0;g<l.size();g++)for(var f=l.get(g),y=0;y<c.size();y++)if(this.computeContainmentDistance(f,c.get(y),h),this.minDistance<=this.terminateDistance)return null}else if(t[2]instanceof Array&&t[0]instanceof GeometryLocation&&t[1]instanceof Polygon){var d=t[0],v=t[1],m=t[2],p=d.getCoordinate();if(Location.EXTERIOR!==this.ptLocator.locate(p,v))return this.minDistance=0,m[0]=d,m[1]=new GeometryLocation(v,p),null}}},{key:"computeMinDistanceLinesPoints",value:function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),a=0;a<t.size();a++){var s=t.get(a);if(this.computeMinDistance(i,s,n),this.minDistance<=this.terminateDistance)return null}}},{key:"computeFacetDistance",value:function(){var e=new Array(2),t=LinearComponentExtracter.getLines(this.geom[0]),n=LinearComponentExtracter.getLines(this.geom[1]),r=PointExtracter.getPoints(this.geom[0]),i=PointExtracter.getPoints(this.geom[1]);return this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this.minDistance<=this.terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,i,e),this.updateMinDistance(e,!1),this.minDistance<=this.terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,r,e),this.updateMinDistance(e,!0),this.minDistance<=this.terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistancePoints(r,i,e),void this.updateMinDistance(e,!1))))}},{key:"nearestLocations",value:function(){return this.computeMinDistance(),this.minDistanceLocation}},{key:"updateMinDistance",value:function(e,t){return null===e[0]?null:void(t?(this.minDistanceLocation[0]=e[1],this.minDistanceLocation[1]=e[0]):(this.minDistanceLocation[0]=e[0],this.minDistanceLocation[1]=e[1]))}},{key:"nearestPoints",value:function(){this.computeMinDistance();var e=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return e}},{key:"computeMinDistance",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length){if(null!==this.minDistanceLocation)return null;if(this.minDistanceLocation=new Array(2),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance)return null;this.computeFacetDistance()}else if(3===t.length)if(t[2]instanceof Array&&t[0]instanceof LineString&&t[1]instanceof Point){var r=t[0],i=t[1],a=t[2];if(r.getEnvelopeInternal().distance(i.getEnvelopeInternal())>this.minDistance)return null;for(var s=r.getCoordinates(),o=i.getCoordinate(),u=0;u<s.length-1;u++){var l=CGAlgorithms.distancePointLine(o,s[u],s[u+1]);if(l<this.minDistance){this.minDistance=l;var c=new LineSegment(s[u],s[u+1]),h=c.closestPoint(o);a[0]=new GeometryLocation(r,u,h),a[1]=new GeometryLocation(i,0,o)}if(this.minDistance<=this.terminateDistance)return null}}else if(t[2]instanceof Array&&t[0]instanceof LineString&&t[1]instanceof LineString){var g=t[0],f=t[1],a=t[2];if(g.getEnvelopeInternal().distance(f.getEnvelopeInternal())>this.minDistance)return null;for(var s=g.getCoordinates(),y=f.getCoordinates(),u=0;u<s.length-1;u++)for(var d=0;d<y.length-1;d++){var l=CGAlgorithms.distanceLineLine(s[u],s[u+1],y[d],y[d+1]);if(l<this.minDistance){this.minDistance=l;var v=new LineSegment(s[u],s[u+1]),m=new LineSegment(y[d],y[d+1]),p=v.closestPoints(m);a[0]=new GeometryLocation(g,u,p[0]),a[1]=new GeometryLocation(f,d,p[1])}if(this.minDistance<=this.terminateDistance)return null}}}},{key:"computeMinDistancePoints",value:function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),a=0;a<t.size();a++){var s=t.get(a),o=i.getCoordinate().distance(s.getCoordinate());if(o<this.minDistance&&(this.minDistance=o,n[0]=new GeometryLocation(i,0,i.getCoordinate()),n[1]=new GeometryLocation(s,0,s.getCoordinate())),this.minDistance<=this.terminateDistance)return null}}},{key:"distance",value:function(){if(null===this.geom[0]||null===this.geom[1])throw new IllegalArgumentException$1("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)}},{key:"computeMinDistanceLines",value:function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),a=0;a<t.size();a++){var s=t.get(a);if(this.computeMinDistance(i,s,n),this.minDistance<=this.terminateDistance)return null}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"distance",value:function(t,n){var r=new e(t,n);return r.distance()}},{key:"isWithinDistance",value:function(t,n,r){var i=new e(t,n,r);return i.distance()<=r}},{key:"nearestPoints",value:function(t,n){var r=new e(t,n);return r.nearestPoints()}}]),e}(),EdgeString=function(){function e(){_classCallCheck(this,e),this.factory=null,this.directedEdges=new ArrayList,this.coordinates=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.factory=i}}return _createClass(e,[{key:"getCoordinates",value:function(){if(null===this.coordinates){for(var e=0,t=0,n=new CoordinateList,r=this.directedEdges.iterator();r.hasNext();){var i=r.next();i.getEdgeDirection()?e++:t++,n.add(i.getEdge().getLine().getCoordinates(),!1,i.getEdgeDirection())}this.coordinates=n.toCoordinateArray(),t>e&&CoordinateArrays.reverse(this.coordinates)}return this.coordinates}},{key:"toLineString",value:function(){return this.factory.createLineString(this.getCoordinates())}},{key:"add",value:function(e){this.directedEdges.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),GraphComponent=function(){function e(){_classCallCheck(this,e),this._isMarked=!1,this._isVisited=!1,this.data=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"setVisited",value:function(e){this._isVisited=e}},{key:"isMarked",value:function(){return this._isMarked}},{key:"setData",value:function(e){this.data=e}},{key:"getData",value:function(){return this.data}},{key:"setMarked",value:function(e){this._isMarked=e}},{key:"getContext",value:function(){return this.data}},{key:"isVisited",value:function(){return this._isVisited}},{key:"setContext",value:function(e){this.data=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getComponentWithVisitedState",value:function(e,t){for(;e.hasNext();){var n=e.next();if(n.isVisited()===t)return n}return null}},{key:"setVisited",value:function(e,t){for(;e.hasNext();){var n=e.next();n.setVisited(t)}}},{key:"setMarked",value:function(e,t){for(;e.hasNext();){var n=e.next();n.setMarked(t)}}}]),e}(),DirectedEdge$1=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.parentEdge=null,e.from=null,e.to=null,e.p0=null,e.p1=null,e.sym=null,e.edgeDirection=null,e.quadrant=null,e.angle=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(4===r.length){var a=r[0],s=r[1],o=r[2],u=r[3];e.from=a,e.to=s,e.edgeDirection=u,e.p0=a.getCoordinate(),e.p1=o;var l=e.p1.x-e.p0.x,c=e.p1.y-e.p0.y;e.quadrant=Quadrant.quadrant(l,c),e.angle=Math.atan2(c,l)}return e}return _inherits(t,e),_createClass(t,[{key:"isRemoved",value:function(){return null===this.parentEdge}},{key:"compareDirection",value:function(e){return this.quadrant>e.quadrant?1:this.quadrant<e.quadrant?-1:CGAlgorithms.computeOrientation(e.p0,e.p1,this.p1)}},{key:"getCoordinate",value:function(){return this.from.getCoordinate()}},{key:"print",value:function(e){var t=this.getClass().getName(),n=t.lastIndexOf("."),r=t.substring(n+1);e.print("  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)}},{key:"getDirectionPt",value:function(){return this.p1}},{key:"getAngle",value:function(){return this.angle}},{key:"compareTo",value:function(e){var t=e;return this.compareDirection(t)}},{key:"getFromNode",value:function(){return this.from}},{key:"getSym",value:function(){return this.sym}},{key:"setEdge",value:function(e){this.parentEdge=e}},{key:"remove",value:function(){this.sym=null,this.parentEdge=null}},{key:"getEdge",value:function(){return this.parentEdge}},{key:"getQuadrant",value:function(){return this.quadrant}},{key:"setSym",value:function(e){this.sym=e}},{key:"getToNode",value:function(){return this.to}},{key:"getEdgeDirection",value:function(){return this.edgeDirection}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Comparable]}}],[{key:"toEdges",value:function(e){for(var t=new ArrayList,n=e.iterator();n.hasNext();)t.add(n.next().parentEdge);return t}}]),t}(GraphComponent),LineMergeDirectedEdge=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(4===r.length)var a=r[0],s=r[1],o=r[2],u=r[3],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,a,s,o,u));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"getNext",value:function(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(Assert.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(DirectedEdge$1),Edge$1=function(e){function t(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,t);var a=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));a.dirEdge=null;var s=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return 0===t.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t):2===t.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];a.setDirectedEdges(r,i)}.apply(void 0,t):void 0};return e=s.apply(a,r),_possibleConstructorReturn(a,e)}return _inherits(t,e),_createClass(t,[{key:"isRemoved",value:function(){return null===this.dirEdge}},{key:"setDirectedEdges",value:function(e,t){this.dirEdge=[e,t],e.setEdge(this),t.setEdge(this),e.setSym(t),t.setSym(e),e.getFromNode().addOutEdge(e),t.getFromNode().addOutEdge(t)}},{key:"getDirEdge",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(Number.isInteger(t[0])){var r=t[0];return this.dirEdge[r]}if(t[0]instanceof Node){var i=t[0];return this.dirEdge[0].getFromNode()===i?this.dirEdge[0]:this.dirEdge[1].getFromNode()===i?this.dirEdge[1]:null}}}},{key:"remove",value:function(){this.dirEdge=null}},{key:"getOppositeNode",value:function(e){return this.dirEdge[0].getFromNode()===e?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===e?this.dirEdge[1].getToNode():null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(GraphComponent),DirectedEdgeStar$1=function(){function e(){_classCallCheck(this,e),this.outEdges=new ArrayList,this.sorted=!1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getNextEdge",value:function(e){var t=this.getIndex(e);return this.outEdges.get(this.getIndex(t+1))}},{key:"getCoordinate",value:function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()}},{key:"iterator",value:function(){return this.sortEdges(),this.outEdges.iterator()}},{key:"sortEdges",value:function(){this.sorted||(Collections.sort(this.outEdges),this.sorted=!0)}},{key:"remove",value:function(e){this.outEdges.remove(e)}},{key:"getEdges",value:function(){return this.sortEdges(),this.outEdges}},{key:"getNextCWEdge",value:function(e){var t=this.getIndex(e);return this.outEdges.get(this.getIndex(t-1))}},{key:"getIndex",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(t[0]instanceof Edge$1){var r=t[0];this.sortEdges();for(var i=0;i<this.outEdges.size();i++){var a=this.outEdges.get(i);if(a.getEdge()===r)return i}return-1}if(t[0]instanceof DirectedEdge$1){var s=t[0];this.sortEdges();for(var i=0;i<this.outEdges.size();i++){var a=this.outEdges.get(i);if(a===s)return i}return-1}if(Number.isInteger(t[0])){var o=t[0],u=o%this.outEdges.size();return 0>u&&(u+=this.outEdges.size()),u}}}},{key:"add",value:function(e){this.outEdges.add(e),this.sorted=!1}},{key:"getDegree",value:function(){return this.outEdges.size()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Node=function(e){function t(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,t);var a=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));a.pt=null,a.deStar=null;var s=function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return 1===n.length?function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.call(a,i,new DirectedEdgeStar$1)}.apply(void 0,n):2===n.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];a.pt=r,a.deStar=i}.apply(void 0,n):void 0};return e=s.apply(a,r),_possibleConstructorReturn(a,e)}return _inherits(t,e),_createClass(t,[{key:"isRemoved",value:function(){return null===this.pt}},{key:"addOutEdge",value:function(e){this.deStar.add(e)}},{key:"getCoordinate",value:function(){return this.pt}},{key:"getOutEdges",value:function(){return this.deStar}},{key:"remove",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)this.pt=null;else if(1===t.length){var r=t[0];this.deStar.remove(r)}}},{key:"getIndex",value:function(e){return this.deStar.getIndex(e)}},{key:"getDegree",value:function(){return this.deStar.getDegree()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"getEdgesBetween",value:function(e,t){var n=DirectedEdge$1.toEdges(e.getOutEdges().getEdges()),r=new HashSet(n),i=DirectedEdge$1.toEdges(t.getOutEdges().getEdges());return r.retainAll(i),r}}]),t}(GraphComponent),LineMergeEdge=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.line=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];e.line=a}return e}return _inherits(t,e),_createClass(t,[{key:"getLine",value:function(){return this.line}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Edge$1),NodeMap$1=function(){function e(){_classCallCheck(this,e),this.nodeMap=new TreeMap;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"find",value:function(e){return this.nodeMap.get(e)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"remove",value:function(e){return this.nodeMap.remove(e)}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"add",value:function(e){return this.nodeMap.put(e.getCoordinate(),e),e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),PlanarGraph$1=function(){function e(){_classCallCheck(this,e),this.edges=new HashSet,this.dirEdges=new HashSet,this.nodeMap=new NodeMap$1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"findNodesOfDegree",value:function(e){for(var t=new ArrayList,n=this.nodeIterator();n.hasNext();){var r=n.next();r.getDegree()===e&&t.add(r)}return t}},{key:"dirEdgeIterator",value:function(){return this.dirEdges.iterator()}},{key:"edgeIterator",value:function(){return this.edges.iterator()}},{key:"remove",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof Edge$1){var r=t[0];this.remove(r.getDirEdge(0)),this.remove(r.getDirEdge(1)),this.edges.remove(r),r.remove()}else if(t[0]instanceof DirectedEdge$1){var i=t[0],a=i.getSym();null!==a&&a.setSym(null),i.getFromNode().remove(i),i.remove(),this.dirEdges.remove(i)}else if(t[0]instanceof Node){for(var s=t[0],o=s.getOutEdges().getEdges(),u=o.iterator();u.hasNext();){var l=u.next(),a=l.getSym();null!==a&&this.remove(a),this.dirEdges.remove(l);var c=l.getEdge();null!==c&&this.edges.remove(c)}this.nodeMap.remove(s.getCoordinate()),s.remove()}}},{key:"findNode",value:function(e){return this.nodeMap.find(e)}},{key:"getEdges",value:function(){return this.edges}},{key:"nodeIterator",value:function(){return this.nodeMap.iterator()}},{key:"contains",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(t[0]instanceof Edge$1){var r=t[0];return this.edges.contains(r)}if(t[0]instanceof DirectedEdge$1){var i=t[0];return this.dirEdges.contains(i)}}}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof Node){var r=t[0];this.nodeMap.add(r)}else if(t[0]instanceof Edge$1){var i=t[0];this.edges.add(i),this.add(i.getDirEdge(0)),this.add(i.getDirEdge(1))}else if(t[0]instanceof DirectedEdge$1){var a=t[0];this.dirEdges.add(a)}}},{key:"getNodes",value:function(){return this.nodeMap.values()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),LineMergeGraph=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"addEdge",value:function(e){if(e.isEmpty())return null;var t=CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(t.length<=1)return null;var n=t[0],r=t[t.length-1],i=this.getNode(n),a=this.getNode(r),s=new LineMergeDirectedEdge(i,a,t[1],!0),o=new LineMergeDirectedEdge(a,i,t[t.length-2],!1),u=new LineMergeEdge(e);u.setDirectedEdges(s,o),this.add(u)}},{key:"getNode",value:function(e){var t=this.findNode(e);return null===t&&(t=new Node(e),this.add(t)),t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(PlanarGraph$1),LineMerger=function(){function e(){_classCallCheck(this,e),this.graph=new LineMergeGraph,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"buildEdgeStringsForUnprocessedNodes",value:function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();t.isMarked()||(Assert.isTrue(2===t.getDegree()),this.buildEdgeStringsStartingAt(t),t.setMarked(!0))}}},{key:"buildEdgeStringsForNonDegree2Nodes",value:function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();2!==t.getDegree()&&(this.buildEdgeStringsStartingAt(t),t.setMarked(!0))}}},{key:"buildEdgeStringsForObviousStartNodes",value:function(){this.buildEdgeStringsForNonDegree2Nodes()}},{key:"getMergedLineStrings",value:function(){return this.merge(),this.mergedLineStrings}},{key:"buildEdgeStringsStartingAt",value:function(e){for(var t=e.getOutEdges().iterator();t.hasNext();){var n=t.next();n.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(n))}}},{key:"merge",value:function(){if(null!==this.mergedLineStrings)return null;GraphComponent.setMarked(this.graph.nodeIterator(),!1),GraphComponent.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new ArrayList,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new ArrayList;for(var e=this.edgeStrings.iterator();e.hasNext();){var t=e.next();this.mergedLineStrings.add(t.toLineString())}}},{key:"buildEdgeStringStartingWith",value:function(e){var t=new EdgeString(this.factory),n=e;do t.add(n),n.getEdge().setMarked(!0),n=n.getNext();while(null!==n&&n!==e);return t}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof Geometry){var r=t[0];r.apply(new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e){e instanceof LineString&&this.add(e)}},{key:"interfaces_",get:function(){return[GeometryComponentFilter$1]}}]),e}()))}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(Collection)>-1){var i=t[0];this.mergedLineStrings=null;for(var a=i.iterator();a.hasNext();){var s=a.next();this.add(s)}}else if(t[0]instanceof LineString){var o=t[0];null===this.factory&&(this.factory=o.getFactory()),this.graph.addEdge(o)}}},{key:"buildEdgeStringsForIsolatedLoops",value:function(){this.buildEdgeStringsForUnprocessedNodes()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),BasicSegmentString=function(){function e(){_classCallCheck(this,e),this.pts=null,this.data=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1];this.pts=i,this.data=a}}return _createClass(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"size",value:function(){return this.pts.length}},{key:"getCoordinate",value:function(e){return this.pts[e]}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getSegmentOctant",value:function(e){return e===this.pts.length-1?-1:Octant.octant(this.getCoordinate(e),this.getCoordinate(e+1))}},{key:"setData",value:function(e){this.data=e}},{key:"getData",value:function(){return this.data}},{key:"toString",value:function(){return WKTWriter.toLineString(new CoordinateArraySequence(this.pts))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[SegmentString]}}]),e}(),InteriorIntersectionFinder=function(){function e(){_classCallCheck(this,e),this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new ArrayList,this.intersectionCount=0,this.keepIntersections=!0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.li=i,this.interiorIntersection=null}}return _createClass(e,[{key:"getInteriorIntersection",value:function(){return this.interiorIntersection}},{key:"setCheckEndSegmentsOnly",value:function(e){this.isCheckEndSegmentsOnly=e}},{key:"getIntersectionSegments",value:function(){return this.intSegments}},{key:"count",value:function(){return this.intersectionCount}},{key:"getIntersections",value:function(){return this.intersections}},{key:"setFindAllIntersections",value:function(e){this.findAllIntersections=e}},{key:"setKeepIntersections",value:function(e){this.keepIntersections=e}},{key:"processIntersections",value:function(e,t,n,r){if(!this.findAllIntersections&&this.hasIntersection())return null;if(e===n&&t===r)return null;if(this.isCheckEndSegmentsOnly){var i=this.isEndSegment(e,t)||this.isEndSegment(n,r);if(!i)return null}var a=e.getCoordinates()[t],s=e.getCoordinates()[t+1],o=n.getCoordinates()[r],u=n.getCoordinates()[r+1];this.li.computeIntersection(a,s,o,u),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4),this.intSegments[0]=a,this.intSegments[1]=s,this.intSegments[2]=o,this.intSegments[3]=u,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)}},{key:"isEndSegment",value:function(e,t){return 0===t?!0:t>=e.size()-2?!0:!1}},{key:"hasIntersection",value:function(){return null!==this.interiorIntersection}},{key:"isDone",value:function(){return this.findAllIntersections?!1:null!==this.interiorIntersection}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[SegmentIntersector$1]}}],[{key:"createAllIntersectionsFinder",value:function(t){var n=new e(t);return n.setFindAllIntersections(!0),n}},{key:"createAnyIntersectionFinder",value:function(t){return new e(t)}},{key:"createIntersectionCounter",value:function(t){var n=new e(t);return n.setFindAllIntersections(!0),n.setKeepIntersections(!1),n}}]),e}(),FastNodingValidator=function(){function e(){_classCallCheck(this,e),this.li=new RobustLineIntersector,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.segStrings=i}}return _createClass(e,[{key:"execute",value:function(){return null!==this.segInt?null:void this.checkInteriorIntersections()}},{key:"getIntersections",value:function(){return this.segInt.getIntersections()}},{key:"isValid",value:function(){return this.execute(),this._isValid}},{key:"setFindAllIntersections",value:function(e){this.findAllIntersections=e}},{key:"checkInteriorIntersections",value:function(){this._isValid=!0,this.segInt=new InteriorIntersectionFinder(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var e=new MCIndexNoder;return e.setSegmentIntersector(this.segInt),e.computeNodes(this.segStrings),this.segInt.hasIntersection()?(this._isValid=!1,null):void 0}},{key:"checkValid",value:function(){if(this.execute(),!this._isValid)throw new TopologyException(this.getErrorMessage(),this.segInt.getInteriorIntersection())}},{key:"getErrorMessage",value:function(){if(this._isValid)return"no intersections found";var e=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+WKTWriter.toLineString(e[0],e[1])+" and "+WKTWriter.toLineString(e[2],e[3])}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeIntersections",value:function(t){var n=new e(t);return n.setFindAllIntersections(!0),n.isValid(),n.getIntersections()}}]),e}(),EdgeNodingValidator=function(){function e(){_classCallCheck(this,e),this.nv=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.nv=new FastNodingValidator(e.toSegmentStrings(i))}}return _createClass(e,[{key:"checkValid",value:function(){this.nv.checkValid()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toSegmentStrings",value:function(e){for(var t=new ArrayList,n=e.iterator();n.hasNext();){var r=n.next();t.add(new BasicSegmentString(r.getCoordinates(),r))}return t}},{key:"checkValid",value:function(t){var n=new e(t);n.checkValid()}}]),e}(),LineBuilder=function(){function e(){_classCallCheck(this,e),this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new ArrayList,this.resultLineList=new ArrayList;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],a=n[1],s=n[2];this.op=i,this.geometryFactory=a,this.ptLocator=s}}return _createClass(e,[{key:"collectLines",value:function(e){for(var t=this.op.getGraph().getEdgeEnds().iterator();t.hasNext();){var n=t.next();this.collectLineEdge(n,e,this.lineEdgesList),this.collectBoundaryTouchEdge(n,e,this.lineEdgesList)}}},{key:"labelIsolatedLine",value:function(e,t){var n=this.ptLocator.locate(e.getCoordinate(),this.op.getArgGeometry(t));e.getLabel().setLocation(t,n)}},{key:"build",value:function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this.resultLineList}},{key:"collectLineEdge",value:function(e,t,n){var r=e.getLabel(),i=e.getEdge();e.isLineEdge()&&(e.isVisited()||!OverlayOp$1.isResultOfOp(r,t)||i.isCovered()||(n.add(i),e.setVisitedEdge(!0)))}},{key:"findCoveredLineEdges",value:function(){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().findCoveredLineEdges()}for(var n=this.op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getEdge();if(r.isLineEdge()&&!i.isCoveredSet()){var a=this.op.isCoveredByA(r.getCoordinate());i.setCovered(a)}}}},{key:"labelIsolatedLines",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}}},{key:"buildLines",value:function(e){for(var t=this.lineEdgesList.iterator();t.hasNext();){var n=t.next(),r=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(r),n.setInResult(!0)}}},{key:"collectBoundaryTouchEdge",value:function(e,t,n){var r=e.getLabel();return e.isLineEdge()?null:e.isVisited()?null:e.isInteriorAreaEdge()?null:e.getEdge().isInResult()?null:(Assert.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),void(OverlayOp$1.isResultOfOp(r,t)&&t===OverlayOp$1.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),PointBuilder=function(){function e(){_classCallCheck(this,e),this.op=null,this.geometryFactory=null,this.resultPointList=new ArrayList;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],a=n[1];n[2];this.op=i,this.geometryFactory=a}}return _createClass(e,[{key:"filterCoveredNodeToPoint",value:function(e){var t=e.getCoordinate();if(!this.op.isCoveredByLA(t)){var n=this.geometryFactory.createPoint(t);this.resultPointList.add(n)}}},{key:"extractNonCoveredResultNodes",value:function(e){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&e!==OverlayOp$1.INTERSECTION)){
var r=n.getLabel();OverlayOp$1.isResultOfOp(r,e)&&this.filterCoveredNodeToPoint(n)}}}},{key:"build",value:function(e){return this.extractNonCoveredResultNodes(e),this.resultPointList}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),GeometryGraphOperation=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.li=new RobustLineIntersector,this.resultPrecisionModel=null,this.arg=null;var a=function e(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];t.setComputationPrecision(a.getPrecisionModel()),t.arg=new Array(1),t.arg[0]=new GeometryGraph(0,a)}else if(2===r.length){var a=r[0],s=r[1];e.call(t,a,s,BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE)}else if(3===r.length){var a=r[0],s=r[1],o=r[2];a.getPrecisionModel().compareTo(s.getPrecisionModel())>=0?t.setComputationPrecision(a.getPrecisionModel()):t.setComputationPrecision(s.getPrecisionModel()),t.arg=new Array(2),t.arg[0]=new GeometryGraph(0,a,o),t.arg[1]=new GeometryGraph(1,s,o)}};return a.apply(this,r)}return _createClass(e,[{key:"getArgGeometry",value:function(e){return this.arg[e].getGeometry()}},{key:"setComputationPrecision",value:function(e){this.resultPrecisionModel=e,this.li.setPrecisionModel(this.resultPrecisionModel)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),OverlayOp$1=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.ptLocator=new PointLocator,e.geomFact=null,e.resultGeom=null,e.graph=null,e.edgeList=new EdgeList,e.resultPolyList=new ArrayList,e.resultLineList=new ArrayList,e.resultPointList=new ArrayList;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,a,s));e.graph=new PlanarGraph(new OverlayNodeFactory),e.geomFact=a.getFactory()}return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"insertUniqueEdge",value:function(e){var t=this.edgeList.findEqualEdge(e);if(null!==t){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new Label(e.getLabel()),r.flip());var i=t.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this.edgeList.add(e)}},{key:"getGraph",value:function(){return this.graph}},{key:"cancelDuplicateResultEdges",value:function(){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var t=e.next(),n=t.getSym();t.isInResult()&&n.isInResult()&&(t.setInResult(!1),n.setInResult(!1))}}},{key:"isCoveredByLA",value:function(e){return this.isCovered(e,this.resultLineList)?!0:this.isCovered(e,this.resultPolyList)?!0:!1}},{key:"computeGeometry",value:function(e,n,r,i){var a=new ArrayList;return a.addAll(e),a.addAll(n),a.addAll(r),a.isEmpty()?t.createEmptyResult(i,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(a)}},{key:"mergeSymLabels",value:function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().mergeSymLabels()}}},{key:"isCovered",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next(),i=this.ptLocator.locate(e,r);if(i!==Location.EXTERIOR)return!0}return!1}},{key:"replaceCollapsedEdges",value:function(){for(var e=new ArrayList,t=this.edgeList.iterator();t.hasNext();){var n=t.next();n.isCollapsed()&&(t.remove(),e.add(n.getCollapsedEdge()))}this.edgeList.addAll(e)}},{key:"updateNodeLabelling",value:function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next(),n=t.getEdges().getLabel();t.getLabel().merge(n)}}},{key:"getResultGeometry",value:function(e){return this.computeOverlay(e),this.resultGeom}},{key:"insertUniqueEdges",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.insertUniqueEdge(n)}}},{key:"computeOverlay",value:function(e){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var t=new ArrayList;this.arg[0].computeSplitEdges(t),this.arg[1].computeSplitEdges(t);this.insertUniqueEdges(t),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),EdgeNodingValidator.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(e),this.cancelDuplicateResultEdges();var n=new PolygonBuilder(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var r=new LineBuilder(this,this.geomFact,this.ptLocator);this.resultLineList=r.build(e);var i=new PointBuilder(this,this.geomFact,this.ptLocator);this.resultPointList=i.build(e),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,e)}},{key:"labelIncompleteNode",value:function(e,t){var n=this.ptLocator.locate(e.getCoordinate(),this.arg[t].getGeometry());e.getLabel().setLocation(t,n)}},{key:"copyPoints",value:function(e){for(var t=this.arg[e].getNodeIterator();t.hasNext();){var n=t.next(),r=this.graph.addNode(n.getCoordinate());r.setLabel(e,n.getLabel().getLocation(e))}}},{key:"findResultAreaEdges",value:function(e){for(var n=this.graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&t.isResultOfOp(i.getLocation(0,Position.RIGHT),i.getLocation(1,Position.RIGHT),e)&&r.setInResult(!0)}}},{key:"computeLabelsFromDepths",value:function(){for(var e=this.edgeList.iterator();e.hasNext();){var t=e.next(),n=t.getLabel(),r=t.getDepth();if(!r.isNull()){r.normalize();for(var i=0;2>i;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(Assert.isTrue(!r.isNull(i,Position.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Position.LEFT,r.getLocation(i,Position.LEFT)),Assert.isTrue(!r.isNull(i,Position.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Position.RIGHT,r.getLocation(i,Position.RIGHT))))}}}},{key:"computeLabelling",value:function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()}},{key:"labelIncompleteNodes",value:function(){for(var e=0,t=this.graph.getNodes().iterator();t.hasNext();){var n=t.next(),r=n.getLabel();n.isIsolated()&&(e++,r.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(r)}}},{key:"isCoveredByA",value:function(e){return this.isCovered(e,this.resultPolyList)?!0:!1}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(e,n,r){var i=new t(e,n),a=i.getResultGeometry(r);return a}},{key:"isResultOfOp",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1],s=i.getLocation(0),o=i.getLocation(1);return t.isResultOfOp(s,o,a)}if(3===n.length){var u=n[0],l=n[1],c=n[2];switch(u===Location.BOUNDARY&&(u=Location.INTERIOR),l===Location.BOUNDARY&&(l=Location.INTERIOR),c){case t.INTERSECTION:return u===Location.INTERIOR&&l===Location.INTERIOR;case t.UNION:return u===Location.INTERIOR||l===Location.INTERIOR;case t.DIFFERENCE:return u===Location.INTERIOR&&l!==Location.INTERIOR;case t.SYMDIFFERENCE:return u===Location.INTERIOR&&l!==Location.INTERIOR||u!==Location.INTERIOR&&l===Location.INTERIOR}return!1}}},{key:"createEmptyResult",value:function(e,n,r,i){var a=null;switch(t.resultDimension(e,n,r)){case-1:a=i.createGeometryCollection(new Array(0));break;case 0:a=i.createPoint();break;case 1:a=i.createLineString();break;case 2:a=i.createPolygon()}return a}},{key:"resultDimension",value:function e(n,r,i){var a=r.getDimension(),s=i.getDimension(),e=-1;switch(n){case t.INTERSECTION:e=Math.min(a,s);break;case t.UNION:e=Math.max(a,s);break;case t.DIFFERENCE:e=a;break;case t.SYMDIFFERENCE:e=Math.max(a,s)}return e}}]),t}(GeometryGraphOperation);OverlayOp$1.INTERSECTION=1,OverlayOp$1.UNION=2,OverlayOp$1.DIFFERENCE=3,OverlayOp$1.SYMDIFFERENCE=4;var PolygonizeDirectedEdge=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.edgeRing=null,e.next=null,e.label=-1;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(4===r.length)var a=r[0],s=r[1],o=r[2],u=r[3],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,a,s,o,u));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"getNext",value:function(){return this.next}},{key:"isInRing",value:function(){return null!==this.edgeRing}},{key:"setRing",value:function(e){this.edgeRing=e}},{key:"setLabel",value:function(e){this.label=e}},{key:"getLabel",value:function(){return this.label}},{key:"setNext",value:function(e){this.next=e}},{key:"getRing",value:function(){return this.edgeRing}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(DirectedEdge$1),PolygonizeEdge=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.line=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];e.line=a}return e}return _inherits(t,e),_createClass(t,[{key:"getLine",value:function(){return this.line}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Edge$1),EdgeRing=function(){function e(){_classCallCheck(this,e),this.factory=null,this.deList=new ArrayList,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.factory=i}}return _createClass(e,[{key:"isIncluded",value:function(){return this._isIncluded}},{key:"getCoordinates",value:function(){if(null===this.ringPts){for(var t=new CoordinateList,n=this.deList.iterator();n.hasNext();){var r=n.next(),i=r.getEdge();e.addEdge(i.getLine().getCoordinates(),r.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts}},{key:"isIncludedSet",value:function(){return this._isIncludedSet}},{key:"isValid",value:function(){return this.getCoordinates(),this.ringPts.length<=3?!1:(this.getRing(),this.ring.isValid())}},{key:"build",value:function(e){var t=e;do this.add(t),t.setRing(this),t=t.getNext(),Assert.isTrue(null!==t,"found null DE in ring"),Assert.isTrue(t===e||!t.isInRing(),"found DE already in ring");while(t!==e)}},{key:"isOuterHole",value:function(){return this._isHole?!this.hasShell():!1}},{key:"getPolygon",value:function(){var e=null;if(null!==this.holes){e=new Array(this.holes.size());for(var t=0;t<this.holes.size();t++)e[t]=this.holes.get(t)}var n=this.factory.createPolygon(this.ring,e);return n}},{key:"isHole",value:function(){return this._isHole}},{key:"isProcessed",value:function(){return this._isProcessed}},{key:"addHole",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length)if(n[0]instanceof LinearRing){var i=n[0];null===this.holes&&(this.holes=new ArrayList),this.holes.add(i)}else if(n[0]instanceof e){var a=n[0];a.setShell(this);var s=a.getRing();null===this.holes&&(this.holes=new ArrayList),this.holes.add(s)}}},{key:"setIncluded",value:function(e){this._isIncluded=e,this._isIncludedSet=!0}},{key:"getOuterHole",value:function(){if(this.isHole())return null;for(var e=0;e<this.deList.size();e++){var t=this.deList.get(e),n=t.getSym().getRing();if(n.isOuterHole())return n}return null}},{key:"computeHole",value:function(){var e=this.getRing();this._isHole=CGAlgorithms.isCCW(e.getCoordinates())}},{key:"hasShell",value:function(){return null!==this.shell}},{key:"isOuterShell",value:function(){return null!==this.getOuterHole()}},{key:"getLineString",value:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)}},{key:"toString",value:function(){return WKTWriter.toLineString(new CoordinateArraySequence(this.getCoordinates()))}},{key:"getShell",value:function(){return this.isHole()?this.shell:this}},{key:"add",value:function(e){this.deList.add(e)}},{key:"getRing",value:function(){if(null!==this.ring)return this.ring;this.getCoordinates(),this.ringPts.length<3&&System.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(e){if(!(e instanceof Exception))throw e;System.out.println(this.ringPts)}finally{}return this.ring}},{key:"updateIncluded",value:function(){if(this.isHole())return null;for(var e=0;e<this.deList.size();e++){var t=this.deList.get(e),n=t.getSym().getRing().getShell();if(null!==n&&n.isIncludedSet())return this.setIncluded(!n.isIncluded()),null}}},{key:"setShell",value:function(e){this.shell=e}},{key:"setProcessed",value:function(e){this._isProcessed=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"findDirEdgesInRing",value:function(e){var t=e,n=new ArrayList;do n.add(t),t=t.getNext(),Assert.isTrue(null!==t,"found null DE in ring"),Assert.isTrue(t===e||!t.isInRing(),"found DE already in ring");while(t!==e);return n}},{key:"addEdge",value:function(e,t,n){if(t)for(var r=0;r<e.length;r++)n.add(e[r],!1);else for(var r=e.length-1;r>=0;r--)n.add(e[r],!1)}},{key:"findEdgeRingContaining",value:function(e,t){for(var n=e.getRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),a=null,s=null,o=t.iterator();o.hasNext();){var u=o.next(),l=u.getRing(),c=l.getEnvelopeInternal();if(!c.equals(r)&&c.contains(r)){i=CoordinateArrays.ptNotInList(n.getCoordinates(),l.getCoordinates());var h=!1;CGAlgorithms.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===a||s.contains(c))&&(a=u,s=a.getRing().getEnvelopeInternal())}}return a}},{key:"EnvelopeComparator",get:function(){return EnvelopeComparator}}]),e}(),EnvelopeComparator=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"compare",value:function(e,t){var n=e,r=t;return n.getRing().getEnvelope().compareTo(r.getRing().getEnvelope())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparator]}}]),e}(),PolygonizeGraph=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.factory=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];e.factory=a}return e}return _inherits(t,e),_createClass(t,[{key:"findEdgeRing",value:function(e){var t=new EdgeRing(this.factory);return t.build(e),t}},{key:"computeDepthParity",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)for(;;){var r=null;if(null===r)return null;this.computeDepthParity(r)}else if(1===t.length){t[0]}}},{key:"computeNextCWEdges",value:function(){for(var e=this.nodeIterator();e.hasNext();){var n=e.next();t.computeNextCWEdges(n)}}},{key:"addEdge",value:function(e){if(e.isEmpty())return null;var t=CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(t.length<2)return null;var n=t[0],r=t[t.length-1],i=this.getNode(n),a=this.getNode(r),s=new PolygonizeDirectedEdge(i,a,t[1],!0),o=new PolygonizeDirectedEdge(a,i,t[t.length-2],!1),u=new PolygonizeEdge(e);u.setDirectedEdges(s,o),this.add(u)}},{key:"deleteCutEdges",value:function(){this.computeNextCWEdges(),t.findLabeledEdgeRings(this.dirEdges);for(var e=new ArrayList,n=this.dirEdges.iterator();n.hasNext();){var r=n.next();if(!r.isMarked()){var i=r.getSym();if(r.getLabel()===i.getLabel()){r.setMarked(!0),i.setMarked(!0);var a=r.getEdge();e.add(a.getLine())}}}return e}},{key:"getEdgeRings",value:function(){this.computeNextCWEdges(),t.label(this.dirEdges,-1);var e=t.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(e);for(var n=new ArrayList,r=this.dirEdges.iterator();r.hasNext();){var i=r.next();if(!i.isMarked()&&!i.isInRing()){var a=this.findEdgeRing(i);n.add(a)}}return n}},{key:"getNode",value:function(e){var t=this.findNode(e);return null===t&&(t=new Node(e),this.add(t)),t}},{key:"convertMaximalToMinimalEdgeRings",value:function(e){for(var n=e.iterator();n.hasNext();){var r=n.next(),i=r.getLabel(),a=t.findIntersectionNodes(r,i);if(null!==a)for(var s=a.iterator();s.hasNext();){var o=s.next();t.computeNextCCWEdges(o,i)}}}},{key:"deleteDangles",value:function(){for(var e=this.findNodesOfDegree(1),n=new HashSet,r=new Stack,i=e.iterator();i.hasNext();)r.push(i.next());for(;!r.isEmpty();){var a=r.pop();t.deleteAllEdges(a);for(var s=a.getOutEdges().getEdges(),i=s.iterator();i.hasNext();){var o=i.next();o.setMarked(!0);var u=o.getSym();null!==u&&u.setMarked(!0);var l=o.getEdge();n.add(l.getLine());var c=o.getToNode();1===t.getDegreeNonDeleted(c)&&r.push(c)}}return n}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"findLabeledEdgeRings",value:function(e){for(var n=new ArrayList,r=1,i=e.iterator();i.hasNext();){var a=i.next();if(!(a.isMarked()||a.getLabel()>=0)){n.add(a);var s=EdgeRing.findDirEdgesInRing(a);t.label(s,r),r++}}return n}},{key:"getDegreeNonDeleted",value:function(e){for(var t=e.getOutEdges().getEdges(),n=0,r=t.iterator();r.hasNext();){var i=r.next();i.isMarked()||n++}return n}},{key:"deleteAllEdges",value:function(e){for(var t=e.getOutEdges().getEdges(),n=t.iterator();n.hasNext();){var r=n.next();r.setMarked(!0);var i=r.getSym();null!==i&&i.setMarked(!0)}}},{key:"label",value:function(e,t){for(var n=e.iterator();n.hasNext();){var r=n.next();r.setLabel(t)}}},{key:"computeNextCWEdges",value:function(e){for(var t=e.getOutEdges(),n=null,r=null,i=t.getEdges().iterator();i.hasNext();){var a=i.next();if(!a.isMarked()){if(null===n&&(n=a),null!==r){var s=r.getSym();s.setNext(a)}r=a}}if(null!==r){var s=r.getSym();s.setNext(n)}}},{key:"computeNextCCWEdges",value:function(e,t){for(var n=e.getOutEdges(),r=null,i=null,a=n.getEdges(),s=a.size()-1;s>=0;s--){var o=a.get(s),u=o.getSym(),l=null;o.getLabel()===t&&(l=o);var c=null;u.getLabel()===t&&(c=u),(null!==l||null!==c)&&(null!==c&&(i=c),null!==l&&(null!==i&&(i.setNext(l),i=null),null===r&&(r=l)))}null!==i&&(Assert.isTrue(null!==r),i.setNext(r))}},{key:"getDegree",value:function(e,t){for(var n=e.getOutEdges().getEdges(),r=0,i=n.iterator();i.hasNext();){var a=i.next();a.getLabel()===t&&r++}return r}},{key:"findIntersectionNodes",value:function(e,n){var r=e,i=null;do{var a=r.getFromNode();t.getDegree(a,n)>1&&(null===i&&(i=new ArrayList),i.add(a)),r=r.getNext(),Assert.isTrue(null!==r,"found null DE in ring"),Assert.isTrue(r===e||!r.isInRing(),"found DE already in ring")}while(r!==e);return i}}]),t}(PlanarGraph$1),Polygonizer=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.lineStringAdder=new LineStringAdder(this),this.graph=null,this.dangles=new ArrayList,this.cutEdges=new ArrayList,this.invalidRingLines=new ArrayList,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null;var a=function e(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(0===r.length)e.call(t,!1);else if(1===r.length){var a=r[0];t.extractOnlyPolygonal=a}};return a.apply(this,r)}return _createClass(e,[{key:"getGeometry",value:function(){return null===this.geomFactory&&(this.geomFactory=new GeometryFactory),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(GeometryFactory.toGeometryArray(this.polyList))}},{key:"getInvalidRingLines",value:function(){return this.polygonize(),this.invalidRingLines}},{key:"findValidRings",value:function(e,t,n){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isValid()?t.add(i):n.add(i.getLineString())}}},{key:"polygonize",value:function(){if(null!==this.polyList)return null;if(this.polyList=new ArrayList,null===this.graph)return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),n=new ArrayList;this.invalidRingLines=new ArrayList,this.isCheckingRingsValid?this.findValidRings(t,n,this.invalidRingLines):n=t,this.findShellsAndHoles(n),e.assignHolesToShells(this.holeList,this.shellList),Collections.sort(this.shellList,new EdgeRing.EnvelopeComparator);var r=!0;this.extractOnlyPolygonal&&(e.findDisjointShells(this.shellList),r=!1),this.polyList=e.extractPolygons(this.shellList,r)}},{key:"getDangles",value:function(){return this.polygonize(),this.dangles}},{key:"getCutEdges",value:function(){return this.polygonize(),this.cutEdges}},{key:"getPolygons",value:function(){return this.polygonize(),this.polyList}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0].interfaces_&&t[0].interfaces_.indexOf(Collection)>-1)for(var r=t[0],i=r.iterator();i.hasNext();){var a=i.next();this.add(a)}else if(t[0]instanceof LineString){var s=t[0];this.geomFactory=s.getFactory(),null===this.graph&&(this.graph=new PolygonizeGraph(this.geomFactory)),this.graph.addEdge(s)}else if(t[0]instanceof Geometry){var o=t[0];o.apply(this.lineStringAdder)}}},{key:"setCheckRingsValid",value:function(e){this.isCheckingRingsValid=e}},{key:"findShellsAndHoles",value:function(e){this.holeList=new ArrayList,this.shellList=new ArrayList;for(var t=e.iterator();t.hasNext();){var n=t.next();n.computeHole(),n.isHole()?this.holeList.add(n):this.shellList.add(n)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"findOuterShells",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=n.getOuterHole();null===r||r.isProcessed()||(n.setIncluded(!0),r.setProcessed(!0))}}},{key:"extractPolygons",value:function(e,t){for(var n=new ArrayList,r=e.iterator();r.hasNext();){var i=r.next();(t||i.isIncluded())&&n.add(i.getPolygon())}return n}},{key:"assignHolesToShells",value:function(t,n){for(var r=t.iterator();r.hasNext();){var i=r.next();e.assignHoleToShell(i,n)}}},{key:"assignHoleToShell",value:function(e,t){var n=EdgeRing.findEdgeRingContaining(e,t);null!==n&&n.addHole(e)}},{key:"findDisjointShells",value:function(t){e.findOuterShells(t);var n=null;do{n=!1;for(var r=t.iterator();r.hasNext();){var i=r.next();i.isIncludedSet()||(i.updateIncluded(),i.isIncludedSet()||(n=!0))}}while(n)}},{key:"LineStringAdder",get:function(){return LineStringAdder}}]),e}(),LineStringAdder=function(){function e(){_classCallCheck(this,e),this.p=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.p=i}}return _createClass(e,[{key:"filter",value:function(e){e instanceof LineString&&this.p.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryComponentFilter$1]}}]),e}(),IntersectionMatrix=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.matrix=null;var a=function n(){for(var r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];if(0===i.length)t.matrix=Array(3).fill().map(function(){return Array(3)}),t.setAll(Dimension.FALSE);else if(1===i.length)if("string"==typeof i[0]){var s=i[0];n.call(t),t.set(s)}else if(i[0]instanceof e){var o=i[0];n.call(t),t.matrix[Location.INTERIOR][Location.INTERIOR]=o.matrix[Location.INTERIOR][Location.INTERIOR],t.matrix[Location.INTERIOR][Location.BOUNDARY]=o.matrix[Location.INTERIOR][Location.BOUNDARY],t.matrix[Location.INTERIOR][Location.EXTERIOR]=o.matrix[Location.INTERIOR][Location.EXTERIOR],t.matrix[Location.BOUNDARY][Location.INTERIOR]=o.matrix[Location.BOUNDARY][Location.INTERIOR],t.matrix[Location.BOUNDARY][Location.BOUNDARY]=o.matrix[Location.BOUNDARY][Location.BOUNDARY],t.matrix[Location.BOUNDARY][Location.EXTERIOR]=o.matrix[Location.BOUNDARY][Location.EXTERIOR],t.matrix[Location.EXTERIOR][Location.INTERIOR]=o.matrix[Location.EXTERIOR][Location.INTERIOR],t.matrix[Location.EXTERIOR][Location.BOUNDARY]=o.matrix[Location.EXTERIOR][Location.BOUNDARY],t.matrix[Location.EXTERIOR][Location.EXTERIOR]=o.matrix[Location.EXTERIOR][Location.EXTERIOR]}};return a.apply(this,r)}return _createClass(e,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){var t=e.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR])||e.isTrue(this.matrix[Location.INTERIOR][Location.BOUNDARY])||e.isTrue(this.matrix[Location.BOUNDARY][Location.INTERIOR])||e.isTrue(this.matrix[Location.BOUNDARY][Location.BOUNDARY]);return t&&this.matrix[Location.EXTERIOR][Location.INTERIOR]===Dimension.FALSE&&this.matrix[Location.EXTERIOR][Location.BOUNDARY]===Dimension.FALSE}},{key:"isCoveredBy",value:function(){var t=e.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR])||e.isTrue(this.matrix[Location.INTERIOR][Location.BOUNDARY])||e.isTrue(this.matrix[Location.BOUNDARY][Location.INTERIOR])||e.isTrue(this.matrix[Location.BOUNDARY][Location.BOUNDARY]);return t&&this.matrix[Location.INTERIOR][Location.EXTERIOR]===Dimension.FALSE&&this.matrix[Location.BOUNDARY][Location.EXTERIOR]===Dimension.FALSE}},{key:"set",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)for(var r=t[0],i=0;i<r.length;i++){var a=Math.trunc(i/3),s=i%3;this.matrix[a][s]=Dimension.toDimensionValue(r.charAt(i))}else if(3===t.length){var o=t[0],u=t[1],l=t[2];this.matrix[o][u]=l}}},{key:"isContains",value:function(){return e.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR])&&this.matrix[Location.EXTERIOR][Location.INTERIOR]===Dimension.FALSE&&this.matrix[Location.EXTERIOR][Location.BOUNDARY]===Dimension.FALSE}},{key:"setAtLeast",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)for(var r=t[0],i=0;i<r.length;i++){var a=Math.trunc(i/3),s=i%3;this.setAtLeast(a,s,Dimension.toDimensionValue(r.charAt(i)))}else if(3===t.length){var o=t[0],u=t[1],l=t[2];this.matrix[o][u]<l&&(this.matrix[o][u]=l)}}},{key:"setAtLeastIfValid",value:function(e,t,n){e>=0&&t>=0&&this.setAtLeast(e,t,n)}},{key:"isWithin",value:function(){return e.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR])&&this.matrix[Location.INTERIOR][Location.EXTERIOR]===Dimension.FALSE&&this.matrix[Location.BOUNDARY][Location.EXTERIOR]===Dimension.FALSE}},{key:"isTouches",value:function(t,n){return t>n?this.isTouches(n,t):t===Dimension.A&&n===Dimension.A||t===Dimension.L&&n===Dimension.L||t===Dimension.L&&n===Dimension.A||t===Dimension.P&&n===Dimension.A||t===Dimension.P&&n===Dimension.L?this.matrix[Location.INTERIOR][Location.INTERIOR]===Dimension.FALSE&&(e.isTrue(this.matrix[Location.INTERIOR][Location.BOUNDARY])||e.isTrue(this.matrix[Location.BOUNDARY][Location.INTERIOR])||e.isTrue(this.matrix[Location.BOUNDARY][Location.BOUNDARY])):!1}},{key:"isOverlaps",value:function(t,n){return t===Dimension.P&&n===Dimension.P||t===Dimension.A&&n===Dimension.A?e.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR])&&e.isTrue(this.matrix[Location.INTERIOR][Location.EXTERIOR])&&e.isTrue(this.matrix[Location.EXTERIOR][Location.INTERIOR]):t===Dimension.L&&n===Dimension.L?1===this.matrix[Location.INTERIOR][Location.INTERIOR]&&e.isTrue(this.matrix[Location.INTERIOR][Location.EXTERIOR])&&e.isTrue(this.matrix[Location.EXTERIOR][Location.INTERIOR]):!1}},{key:"isEquals",value:function(t,n){return t!==n?!1:e.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR])&&this.matrix[Location.INTERIOR][Location.EXTERIOR]===Dimension.FALSE&&this.matrix[Location.BOUNDARY][Location.EXTERIOR]===Dimension.FALSE&&this.matrix[Location.EXTERIOR][Location.INTERIOR]===Dimension.FALSE&&this.matrix[Location.EXTERIOR][Location.BOUNDARY]===Dimension.FALSE}},{key:"toString",value:function(){for(var e=new StringBuffer("123456789"),t=0;3>t;t++)for(var n=0;3>n;n++)e.setCharAt(3*t+n,Dimension.toDimensionSymbol(this.matrix[t][n]));return e.toString()}},{key:"setAll",value:function(e){for(var t=0;3>t;t++)for(var n=0;3>n;n++)this.matrix[t][n]=e}},{key:"get",value:function(e,t){return this.matrix[e][t]}},{key:"transpose",value:function(){var e=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=e,e=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=e,e=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=e,this}},{key:"matches",value:function(t){if(9!==t.length)throw new IllegalArgumentException$1("Should be length 9: "+t);for(var n=0;3>n;n++)for(var r=0;3>r;r++)if(!e.matches(this.matrix[n][r],t.charAt(3*n+r)))return!1;return!0}},{key:"add",value:function(e){for(var t=0;3>t;t++)for(var n=0;3>n;n++)this.setAtLeast(t,n,e.get(t,n))}},{key:"isDisjoint",value:function(){return this.matrix[Location.INTERIOR][Location.INTERIOR]===Dimension.FALSE&&this.matrix[Location.INTERIOR][Location.BOUNDARY]===Dimension.FALSE&&this.matrix[Location.BOUNDARY][Location.INTERIOR]===Dimension.FALSE&&this.matrix[Location.BOUNDARY][Location.BOUNDARY]===Dimension.FALSE}},{key:"isCrosses",value:function(t,n){return t===Dimension.P&&n===Dimension.L||t===Dimension.P&&n===Dimension.A||t===Dimension.L&&n===Dimension.A?e.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR])&&e.isTrue(this.matrix[Location.INTERIOR][Location.EXTERIOR]):t===Dimension.L&&n===Dimension.P||t===Dimension.A&&n===Dimension.P||t===Dimension.A&&n===Dimension.L?e.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR])&&e.isTrue(this.matrix[Location.EXTERIOR][Location.INTERIOR]):t===Dimension.L&&n===Dimension.L?0===this.matrix[Location.INTERIOR][Location.INTERIOR]:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Clonable]}}],[{key:"matches",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){if(Number.isInteger(n[0])&&"string"==typeof n[1]){var i=n[0],a=n[1];return a===Dimension.SYM_DONTCARE?!0:a===Dimension.SYM_TRUE&&(i>=0||i===Dimension.TRUE)?!0:a===Dimension.SYM_FALSE&&i===Dimension.FALSE?!0:a===Dimension.SYM_P&&i===Dimension.P?!0:a===Dimension.SYM_L&&i===Dimension.L?!0:a===Dimension.SYM_A&&i===Dimension.A?!0:!1}if("string"==typeof n[0]&&"string"==typeof n[1]){var s=n[0],o=n[1],u=new e(s);return u.matches(o)}}}},{key:"isTrue",value:function(e){return e>=0||e===Dimension.TRUE?!0:!1}}]),e}(),EdgeEndBuilder=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"createEdgeEndForNext",value:function(e,t,n,r){var i=n.segmentIndex+1;if(i>=e.getNumPoints()&&null===r)return null;var a=e.getCoordinate(i);null!==r&&r.segmentIndex===n.segmentIndex&&(a=r.coord);var s=new EdgeEnd(e,n.coord,a,new Label(e.getLabel()));t.add(s)}},{key:"createEdgeEndForPrev",value:function(e,t,n,r){var i=n.segmentIndex;if(0===n.dist){if(0===i)return null;i--}var a=e.getCoordinate(i);null!==r&&r.segmentIndex>=i&&(a=r.coord);var s=new Label(e.getLabel());s.flip();var o=new EdgeEnd(e,n.coord,a,s);t.add(o)}},{key:"computeEdgeEnds",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){for(var r=t[0],i=new ArrayList,a=r;a.hasNext();){var s=a.next();this.computeEdgeEnds(s,i)}return i}if(2===t.length){var o=t[0],u=t[1],l=o.getEdgeIntersectionList();l.addEndpoints();var c=l.iterator(),h=null,g=null;if(!c.hasNext())return null;var f=c.next();do h=g,g=f,f=null,c.hasNext()&&(f=c.next()),null!==g&&(this.createEdgeEndForPrev(o,u,g,h),this.createEdgeEndForNext(o,u,g,f));while(null!==g)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),EdgeEndBundle=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];_classCallCheck(this,t);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));
s.edgeEnds=new ArrayList;var o=function e(){for(var r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];return 1===i.length?function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.call(s,null,i)}.apply(void 0,i):2===i.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var a=(r[0],r[1]),s=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,a.getEdge(),a.getCoordinate(),a.getDirectedCoordinate(),new Label(a.getLabel())));s.insert(a)}.apply(void 0,i):void 0};return e=o.apply(s,i),_possibleConstructorReturn(s,e)}return _inherits(t,e),_createClass(t,[{key:"insert",value:function(e){this.edgeEnds.add(e)}},{key:"print",value:function(e){e.println("EdgeEndBundle--> Label: "+this.label);for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e),e.println()}}},{key:"iterator",value:function(){return this.edgeEnds.iterator()}},{key:"getEdgeEnds",value:function(){return this.edgeEnds}},{key:"computeLabelOn",value:function(e,t){for(var n=0,r=!1,i=this.iterator();i.hasNext();){var a=i.next(),s=a.getLabel().getLocation(e);s===Location.BOUNDARY&&n++,s===Location.INTERIOR&&(r=!0)}var s=Location.NONE;r&&(s=Location.INTERIOR),n>0&&(s=GeometryGraph.determineBoundary(t,n)),this.label.setLocation(e,s)}},{key:"computeLabelSide",value:function(e,t){for(var n=this.iterator();n.hasNext();){var r=n.next();if(r.getLabel().isArea()){var i=r.getLabel().getLocation(e,t);if(i===Location.INTERIOR)return this.label.setLocation(e,t,Location.INTERIOR),null;i===Location.EXTERIOR&&this.label.setLocation(e,t,Location.EXTERIOR)}}}},{key:"getLabel",value:function(){return this.label}},{key:"computeLabelSides",value:function(e){this.computeLabelSide(e,Position.LEFT),this.computeLabelSide(e,Position.RIGHT)}},{key:"updateIM",value:function(e){Edge.updateIM(this.label,e)}},{key:"computeLabel",value:function(e){for(var t=!1,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().isArea()&&(t=!0)}t?this.label=new Label(Location.NONE,Location.NONE,Location.NONE):this.label=new Label(Location.NONE);for(var i=0;2>i;i++)this.computeLabelOn(i,e),t&&this.computeLabelSides(i)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(EdgeEnd),EdgeEndBundleStar=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length,e}return _inherits(t,e),_createClass(t,[{key:"updateIM",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.updateIM(e)}}},{key:"insert",value:function(e){var t=this.edgeMap.get(e);null===t?(t=new EdgeEndBundle(e),this.insertEdgeEnd(e,t)):t.insert(e)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(EdgeEndStar),RelateNode=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length)var a=r[0],s=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,a,s));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"updateIMFromEdges",value:function(e){this.edges.updateIM(e)}},{key:"computeIM",value:function(e){e.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Node$1),RelateNodeFactory=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"createNode",value:function(e){return new RelateNode(e,new EdgeEndBundleStar)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(NodeFactory),RelateComputer=function(){function e(){_classCallCheck(this,e),this.li=new RobustLineIntersector,this.ptLocator=new PointLocator,this.arg=null,this.nodes=new NodeMap(new RelateNodeFactory),this.im=null,this.isolatedEdges=new ArrayList,this.invalidPoint=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.arg=i}}return _createClass(e,[{key:"insertEdgeEnds",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.nodes.add(n)}}},{key:"computeProperIntersectionIM",value:function(e,t){var n=this.arg[0].getGeometry().getDimension(),r=this.arg[1].getGeometry().getDimension(),i=e.hasProperIntersection(),a=e.hasProperInteriorIntersection();2===n&&2===r?i&&t.setAtLeast("212101212"):2===n&&1===r?(i&&t.setAtLeast("FFF0FFFF2"),a&&t.setAtLeast("1FFFFF1FF")):1===n&&2===r?(i&&t.setAtLeast("F0FFFFFF2"),a&&t.setAtLeast("1F1FFFFFF")):1===n&&1===r&&a&&t.setAtLeast("0FFFFFFFF")}},{key:"labelIsolatedEdges",value:function(e,t){for(var n=this.arg[e].getEdgeIterator();n.hasNext();){var r=n.next();r.isIsolated()&&(this.labelIsolatedEdge(r,t,this.arg[t].getGeometry()),this.isolatedEdges.add(r))}}},{key:"labelIsolatedEdge",value:function(e,t,n){if(n.getDimension()>0){var r=this.ptLocator.locate(e.getCoordinate(),n);e.getLabel().setAllLocations(t,r)}else e.getLabel().setAllLocations(t,Location.EXTERIOR)}},{key:"computeIM",value:function(){var e=new IntersectionMatrix;if(e.set(Location.EXTERIOR,Location.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(e),e;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var t=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(t,e);var n=new EdgeEndBuilder,r=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(r);var i=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(i),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(e),e}},{key:"labelNodeEdges",value:function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().computeLabelling(this.arg)}}},{key:"copyNodesAndLabels",value:function(e){for(var t=this.arg[e].getNodeIterator();t.hasNext();){var n=t.next(),r=this.nodes.addNode(n.getCoordinate());r.setLabel(e,n.getLabel().getLocation(e))}}},{key:"labelIntersectionNodes",value:function(e){for(var t=this.arg[e].getEdgeIterator();t.hasNext();)for(var n=t.next(),r=n.getLabel().getLocation(e),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var a=i.next(),s=this.nodes.find(a.coord);s.getLabel().isNull(e)&&(r===Location.BOUNDARY?s.setLabelBoundary(e):s.setLabel(e,Location.INTERIOR))}}},{key:"labelIsolatedNode",value:function(e,t){var n=this.ptLocator.locate(e.getCoordinate(),this.arg[t].getGeometry());e.getLabel().setAllLocations(t,n)}},{key:"computeIntersectionNodes",value:function(e){for(var t=this.arg[e].getEdgeIterator();t.hasNext();)for(var n=t.next(),r=n.getLabel().getLocation(e),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var a=i.next(),s=this.nodes.addNode(a.coord);r===Location.BOUNDARY?s.setLabelBoundary(e):s.getLabel().isNull(e)&&s.setLabel(e,Location.INTERIOR)}}},{key:"labelIsolatedNodes",value:function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next(),n=t.getLabel();Assert.isTrue(n.getGeometryCount()>0,"node with empty label found"),t.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(t,0):this.labelIsolatedNode(t,1))}}},{key:"updateIM",value:function(e){for(var t=this.isolatedEdges.iterator();t.hasNext();){var n=t.next();n.updateIM(e)}for(var r=this.nodes.iterator();r.hasNext();){var i=r.next();i.updateIM(e),i.updateIMFromEdges(e)}}},{key:"computeDisjointIM",value:function(e){var t=this.arg[0].getGeometry();t.isEmpty()||(e.set(Location.INTERIOR,Location.EXTERIOR,t.getDimension()),e.set(Location.BOUNDARY,Location.EXTERIOR,t.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(e.set(Location.EXTERIOR,Location.INTERIOR,n.getDimension()),e.set(Location.EXTERIOR,Location.BOUNDARY,n.getBoundaryDimension()))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),RelateOp$1=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];_classCallCheck(this,t);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));s._relate=null;var o=function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];return 2===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var a=r[0],s=r[1],o=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,a,s));o._relate=new RelateComputer(o.arg)}.apply(void 0,r):3===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var a=r[0],s=r[1],o=r[2],u=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,a,s,o));u._relate=new RelateComputer(u.arg)}.apply(void 0,r):void 0};return e=o.apply(s,i),_possibleConstructorReturn(s,e)}return _inherits(t,e),_createClass(t,[{key:"getIntersectionMatrix",value:function(){return this._relate.computeIM()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"relate",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1],s=new t(i,a),o=s.getIntersectionMatrix();return o}if(3===n.length){var i=n[0],a=n[1],u=n[2],s=new t(i,a,u),o=s.getIntersectionMatrix();return o}}}]),t}(GeometryGraphOperation),GeometryCombiner=function(){function e(){_classCallCheck(this,e),this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.geomFactory=e.extractFactory(i),this.inputGeoms=i}}return _createClass(e,[{key:"extractElements",value:function(e,t){if(null===e)return null;for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);this.skipEmpty&&r.isEmpty()||t.add(r)}}},{key:"combine",value:function(){for(var e=new ArrayList,t=this.inputGeoms.iterator();t.hasNext();){var n=t.next();this.extractElements(n,e)}return 0===e.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"combine",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0],a=new e(i);return a.combine()}if(2===n.length){var s=n[0],o=n[1],a=new e(e.createList(s,o));return a.combine()}if(3===n.length){var s=n[0],o=n[1],u=n[2],a=new e(e.createList(s,o,u));return a.combine()}}},{key:"extractFactory",value:function(e){return e.isEmpty()?null:e.iterator().next().getFactory()}},{key:"createList",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){var r=t[0],i=t[1],a=new ArrayList;return a.add(r),a.add(i),a}if(3===t.length){var r=t[0],i=t[1],s=t[2],a=new ArrayList;return a.add(r),a.add(i),a.add(s),a}}}]),e}(),CascadedPolygonUnion=function(){function e(){_classCallCheck(this,e),this.inputPolys=null,this.geomFactory=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.inputPolys=i,null===this.inputPolys&&(this.inputPolys=new ArrayList)}}return _createClass(e,[{key:"reduceToGeometries",value:function(e){for(var t=new ArrayList,n=e.iterator();n.hasNext();){var r=n.next(),i=null;r.interfaces_&&r.interfaces_.indexOf(List)>-1?i=this.unionTree(r):r instanceof Geometry&&(i=r),t.add(i)}return t}},{key:"extractByEnvelope",value:function(e,t,n){for(var r=new ArrayList,i=0;i<t.getNumGeometries();i++){var a=t.getGeometryN(i);a.getEnvelopeInternal().intersects(e)?r.add(a):n.add(a)}return this.geomFactory.buildGeometry(r)}},{key:"unionOptimized",value:function(e,t){var n=e.getEnvelopeInternal(),r=t.getEnvelopeInternal();if(!n.intersects(r)){var i=GeometryCombiner.combine(e,t);return i}if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var a=n.intersection(r);return this.unionUsingEnvelopeIntersection(e,t,a)}},{key:"union",value:function(){if(null===this.inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new STRtree(e.STRTREE_NODE_CAPACITY),n=this.inputPolys.iterator();n.hasNext();){var r=n.next();t.insert(r.getEnvelopeInternal(),r)}this.inputPolys=null;var i=t.itemsTree(),a=this.unionTree(i);return a}},{key:"binaryUnion",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];return this.binaryUnion(i,0,i.size())}if(3===n.length){var i=n[0],a=n[1],s=n[2];if(1>=s-a){var o=e.getGeometry(i,a);return this.unionSafe(o,null)}if(s-a===2)return this.unionSafe(e.getGeometry(i,a),e.getGeometry(i,a+1));var u=Math.trunc((s+a)/2),o=this.binaryUnion(i,a,u),l=this.binaryUnion(i,u,s);return this.unionSafe(o,l)}}},{key:"repeatedUnion",value:function(e){for(var t=null,n=e.iterator();n.hasNext();){var r=n.next();t=null===t?r.copy():t.union(r)}return t}},{key:"unionSafe",value:function(e,t){return null===e&&null===t?null:null===e?t.copy():null===t?e.copy():this.unionOptimized(e,t)}},{key:"unionActual",value:function(t,n){return e.restrictToPolygons(t.union(n))}},{key:"unionTree",value:function(e){var t=this.reduceToGeometries(e),n=this.binaryUnion(t);return n}},{key:"unionUsingEnvelopeIntersection",value:function(e,t,n){var r=new ArrayList,i=this.extractByEnvelope(n,e,r),a=this.extractByEnvelope(n,t,r),s=this.unionActual(i,a);r.add(s);var o=GeometryCombiner.combine(r);return o}},{key:"bufferUnion",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0],i=r.get(0).getFactory(),a=i.buildGeometry(r),s=a.buffer(0);return s}if(2===t.length){var o=t[0],u=t[1],i=o.getFactory(),a=i.createGeometryCollection([o,u]),s=a.buffer(0);return s}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"restrictToPolygons",value:function(e){if(e.interfaces_&&e.interfaces_.indexOf(Polygonal)>-1)return e;var t=PolygonExtracter.getPolygons(e);return 1===t.size()?t.get(0):e.getFactory().createMultiPolygon(GeometryFactory.toPolygonArray(t))}},{key:"getGeometry",value:function(e,t){return t>=e.size()?null:e.get(t)}},{key:"union",value:function(t){var n=new e(t);return n.union()}}]),e}();CascadedPolygonUnion.STRTREE_NODE_CAPACITY=4;var PointGeometryUnion=function(){function e(){_classCallCheck(this,e),this.pointGeom=null,this.otherGeom=null,this.geomFact=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1];this.pointGeom=i,this.otherGeom=a,this.geomFact=a.getFactory()}}return _createClass(e,[{key:"union",value:function(){for(var e=new PointLocator,t=new TreeSet,n=0;n<this.pointGeom.getNumGeometries();n++){var r=this.pointGeom.getGeometryN(n),i=r.getCoordinate(),a=e.locate(i,this.otherGeom);a===Location.EXTERIOR&&t.add(i)}if(0===t.size())return this.otherGeom;var s=null,o=CoordinateArrays.toCoordinateArray(t);return s=1===o.length?this.geomFact.createPoint(o[0]):this.geomFact.createMultiPointFromCoords(o),GeometryCombiner.combine(s,this.otherGeom)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"union",value:function(t,n){var r=new e(t,n);return r.union()}}]),e}(),LineStringSnapper=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.snapTolerance=0,this.srcPts=null,this.seg=new LineSegment,this.allowSnappingToSourceVertices=!1,this._isClosed=!1;var a=function n(){for(var r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];if(2===i.length)if(i[0]instanceof LineString&&"number"==typeof i[1]){var s=i[0],o=i[1];n.call(t,s.getCoordinates(),o)}else if(i[0]instanceof Array&&"number"==typeof i[1]){var u=i[0],o=i[1];t.srcPts=u,t._isClosed=e.isClosed(u),t.snapTolerance=o}};return a.apply(this,r)}return _createClass(e,[{key:"snapVertices",value:function(e,t){for(var n=this._isClosed?e.size()-1:e.size(),r=0;n>r;r++){var i=e.get(r),a=this.findSnapForVertex(i,t);null!==a&&(e.set(r,new Coordinate(a)),0===r&&this._isClosed&&e.set(e.size()-1,new Coordinate(a)))}}},{key:"findSnapForVertex",value:function(e,t){for(var n=0;n<t.length;n++){if(e.equals2D(t[n]))return null;if(e.distance(t[n])<this.snapTolerance)return t[n]}return null}},{key:"snapTo",value:function(e){var t=new CoordinateList(this.srcPts);this.snapVertices(t,e),this.snapSegments(t,e);var n=t.toCoordinateArray();return n}},{key:"snapSegments",value:function(e,t){if(0===t.length)return null;var n=t.length;t[0].equals2D(t[t.length-1])&&(n=t.length-1);for(var r=0;n>r;r++){var i=t[r],a=this.findSegmentIndexToSnap(i,e);a>=0&&e.add(a+1,new Coordinate(i),!1)}}},{key:"findSegmentIndexToSnap",value:function(e,t){for(var n=Double.MAX_VALUE,r=-1,i=0;i<t.size()-1;i++){if(this.seg.p0=t.get(i),this.seg.p1=t.get(i+1),this.seg.p0.equals2D(e)||this.seg.p1.equals2D(e)){if(this.allowSnappingToSourceVertices)continue;return-1}var a=this.seg.distance(e);a<this.snapTolerance&&n>a&&(n=a,r=i)}return r}},{key:"setAllowSnappingToSourceVertices",value:function(e){this.allowSnappingToSourceVertices=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isClosed",value:function(e){return e.length<=1?!1:e[0].equals2D(e[e.length-1])}}]),e}(),GeometrySnapper=function(){function e(){_classCallCheck(this,e),this.srcGeom=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.srcGeom=i}}return _createClass(e,[{key:"snapTo",value:function(e,t){var n=this.extractTargetCoordinates(e),r=new SnapTransformer(t,n);return r.transform(this.srcGeom)}},{key:"snapToSelf",value:function(e,t){var n=this.extractTargetCoordinates(this.srcGeom),r=new SnapTransformer(e,n,!0),i=r.transform(this.srcGeom),a=i;return t&&a.interfaces_&&a.interfaces_.indexOf(Polygonal)>-1&&(a=i.buffer(0)),a}},{key:"computeSnapTolerance",value:function(e){var t=this.computeMinimumSegmentLength(e),n=t/10;return n}},{key:"extractTargetCoordinates",value:function(e){for(var t=new TreeSet,n=e.getCoordinates(),r=0;r<n.length;r++)t.add(n[r]);return t.toArray(new Array(0))}},{key:"computeMinimumSegmentLength",value:function(e){for(var t=Double.MAX_VALUE,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);t>r&&(t=r)}return t}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"snap",value:function(t,n,r){var i=new Array(2),a=new e(t);i[0]=a.snapTo(n,r);var s=new e(n);return i[1]=s.snapTo(i[0],r),i}},{key:"computeOverlaySnapTolerance",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0],a=e.computeSizeBasedSnapTolerance(i),s=i.getPrecisionModel();if(s.getType()===PrecisionModel.FIXED){var o=1/s.getScale()*2/1.415;o>a&&(a=o)}return a}if(2===n.length){var u=n[0],l=n[1];return Math.min(e.computeOverlaySnapTolerance(u),e.computeOverlaySnapTolerance(l))}}},{key:"computeSizeBasedSnapTolerance",value:function(t){var n=t.getEnvelopeInternal(),r=Math.min(n.getHeight(),n.getWidth()),i=r*e.SNAP_PRECISION_FACTOR;return i}},{key:"snapToSelf",value:function(t,n,r){var i=new e(t);return i.snapToSelf(n,r)}}]),e}();GeometrySnapper.SNAP_PRECISION_FACTOR=1e-9;var SnapTransformer=function(e){function t(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,t);var a=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));a.snapTolerance=null,a.snapPts=null,a.isSelfSnap=!1;var s=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return 2===t.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];a.snapTolerance=r,a.snapPts=i}.apply(void 0,t):3===t.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],s=t[2];a.snapTolerance=r,a.snapPts=i,a.isSelfSnap=s}.apply(void 0,t):void 0};return e=s.apply(a,r),_possibleConstructorReturn(a,e)}return _inherits(t,e),_createClass(t,[{key:"snapLine",value:function(e,t){var n=new LineStringSnapper(e,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(t)}},{key:"transformCoordinates",value:function(e,t){var n=e.toCoordinateArray(),r=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(r)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(GeometryTransformer),CommonBits=function(){function e(){_classCallCheck(this,e),this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getCommon",value:function(){return Double.longBitsToDouble(this.commonBits)}},{key:"add",value:function(t){var n=Double.doubleToLongBits(t);if(this.isFirst)return this.commonBits=n,this.commonSignExp=e.signExpBits(this.commonBits),this.isFirst=!1,null;var r=e.signExpBits(n);return r!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=e.numCommonMostSigMantissaBits(this.commonBits,n),void(this.commonBits=e.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))}},{key:"toString",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0],s=Double.longBitsToDouble(a),o=Long.toBinaryString(a),u="0000000000000000000000000000000000000000000000000000000000000000"+o,l=u.substring(u.length-64),c=l.substring(0,1)+"  "+l.substring(1,12)+"(exp) "+l.substring(12)+" [ "+s+" ]";return c}return(t=_get(Object.getPrototypeOf(e.prototype),"toString",this)).call.apply(t,[this].concat(r))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBit",value:function(e,t){var n=1<<t;return 0!==(e&n)?1:0}},{key:"signExpBits",value:function(e){return e>>52}},{key:"zeroLowerBits",value:function(e,t){var n=(1<<t)-1,r=~n,i=e&r;return i}},{key:"numCommonMostSigMantissaBits",value:function(t,n){for(var r=0,i=52;i>=0;i--){if(e.getBit(t,i)!==e.getBit(n,i))return r;r++}return 52}}]),e}(),CommonBitsRemover=function(){function e(){_classCallCheck(this,e),this.commonCoord=null,this.ccFilter=new CommonCoordinateFilter;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"addCommonBits",value:function(e){var t=new Translater(this.commonCoord);e.apply(t),e.geometryChanged()}},{key:"removeCommonBits",value:function(e){if(0===this.commonCoord.x&&0===this.commonCoord.y)return e;var t=new Coordinate(this.commonCoord);t.x=-t.x,t.y=-t.y;var n=new Translater(t);return e.apply(n),e.geometryChanged(),e}},{key:"getCommonCoordinate",value:function(){return this.commonCoord}},{key:"add",value:function(e){e.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"CommonCoordinateFilter",get:function(){return CommonCoordinateFilter}},{key:"Translater",get:function(){return Translater}}]),e}(),CommonCoordinateFilter=function(){function e(){_classCallCheck(this,e),this.commonBitsX=new CommonBits,this.commonBitsY=new CommonBits}return _createClass(e,[{key:"filter",value:function(e){this.commonBitsX.add(e.x),this.commonBitsY.add(e.y)}},{key:"getCommonCoordinate",value:function(){return new Coordinate(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[CoordinateFilter]}}]),e}(),Translater=function(){function e(){_classCallCheck(this,e),this.trans=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.trans=i}}return _createClass(e,[{key:"filter",value:function(e,t){var n=e.getOrdinate(t,0)+this.trans.x,r=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,r)}},{key:"isDone",value:function(){return!1}},{key:"isGeometryChanged",value:function(){return!0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[CoordinateSequenceFilter]}}]),e}(),SnapOverlayOp=function(){function e(){_classCallCheck(this,e),this.geom=new Array(2),this.snapTolerance=null,this.cbr=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1];this.geom[0]=i,this.geom[1]=a,this.computeSnapTolerance()}}return _createClass(e,[{key:"selfSnap",value:function(e){var t=new GeometrySnapper(e),n=t.snapTo(e,this.snapTolerance);return n}},{key:"removeCommonBits",value:function(e){this.cbr=new CommonBitsRemover,this.cbr.add(e[0]),this.cbr.add(e[1]);var t=new Array(2);return t[0]=this.cbr.removeCommonBits(e[0].copy()),t[1]=this.cbr.removeCommonBits(e[1].copy()),t}},{key:"prepareResult",value:function(e){return this.cbr.addCommonBits(e),e}},{key:"getResultGeometry",value:function(e){var t=this.snap(this.geom),n=OverlayOp$1.overlayOp(t[0],t[1],e);return this.prepareResult(n)}},{key:"checkValid",value:function(e){e.isValid()||System.out.println("Snapped geometry is invalid")}},{key:"computeSnapTolerance",value:function(){this.snapTolerance=GeometrySnapper.computeOverlaySnapTolerance(this.geom[0],this.geom[1])}},{key:"snap",value:function(e){var t=this.removeCommonBits(e),n=GeometrySnapper.snap(t[0],t[1],this.snapTolerance);return n}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(t,n,r){var i=new e(t,n);return i.getResultGeometry(r)}},{key:"union",value:function(t,n){return e.overlayOp(t,n,OverlayOp$1.UNION)}},{key:"intersection",value:function(t,n){return e.overlayOp(t,n,OverlayOp$1.INTERSECTION)}},{key:"symDifference",value:function(t,n){return e.overlayOp(t,n,OverlayOp$1.SYMDIFFERENCE)}},{key:"difference",value:function(t,n){return e.overlayOp(t,n,OverlayOp$1.DIFFERENCE)}}]),e}(),SnapIfNeededOverlayOp$1=function(){function e(){_classCallCheck(this,e),this.geom=new Array(2);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1];this.geom[0]=i,this.geom[1]=a}}return _createClass(e,[{key:"getResultGeometry",value:function(e){var t=null,n=!1,r=null;try{t=OverlayOp$1.overlayOp(this.geom[0],this.geom[1],e);var i=!0;i&&(n=!0)}catch(e){if(!(e instanceof RuntimeException))throw e;r=e}finally{}if(!n)try{t=SnapOverlayOp.overlayOp(this.geom[0],this.geom[1],e)}catch(e){throw e instanceof RuntimeException?r:e}finally{}return t}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(t,n,r){var i=new e(t,n);return i.getResultGeometry(r)}},{key:"union",value:function(t,n){return e.overlayOp(t,n,OverlayOp$1.UNION)}},{key:"intersection",value:function(t,n){return e.overlayOp(t,n,OverlayOp$1.INTERSECTION)}},{key:"symDifference",value:function(t,n){return e.overlayOp(t,n,OverlayOp$1.SYMDIFFERENCE)}},{key:"difference",value:function(t,n){return e.overlayOp(t,n,OverlayOp$1.DIFFERENCE)}}]),e}(),GeometryExtracter=function(){function e(){_classCallCheck(this,e),this.clz=null,this.comps=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1];this.clz=i,this.comps=a}}return _createClass(e,[{key:"filter",value:function(t){(null===this.clz||e.isOfClass(t,this.clz))&&this.comps.add(t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryFilter]}}],[{key:"isOfClass",value:function(e,t){return t.isAssignableFrom(e.getClass())}},{key:"extract",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1];return e.extract(i,a,new ArrayList)}if(3===n.length){var i=n[0],a=n[1],s=n[2];return e.isOfClass(i,a)?s.add(i):i instanceof GeometryCollection&&i.apply(new e(a,s)),s}}}]),e}(),UnaryUnionOp$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.polygons=new ArrayList,this.lines=new ArrayList,this.points=new ArrayList,this.geomFact=null;var a=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0].interfaces_&&n[0].interfaces_.indexOf(Collection)>-1){var i=n[0];t.extract(i)}else if(n[0]instanceof Geometry){var a=n[0];t.extract(a)}}else if(2===n.length){var i=n[0],s=n[1];t.geomFact=s,t.extract(i)}};return a.apply(this,r)}return _createClass(e,[{key:"unionNoOpt",value:function(e){var t=this.geomFact.createPoint();return SnapIfNeededOverlayOp$1.overlayOp(e,t,OverlayOp$1.UNION)}},{key:"unionWithNull",value:function(e,t){return null===e&&null===t?null:null===t?e:null===e?t:e.union(t)}},{key:"extract",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0].interfaces_&&t[0].interfaces_.indexOf(Collection)>-1)for(var r=t[0],i=r.iterator();i.hasNext();){var a=i.next();this.extract(a)}else if(t[0]instanceof Geometry){var s=t[0];null===this.geomFact&&(this.geomFact=s.getFactory()),GeometryExtracter.extract(s,Polygon,this.polygons),GeometryExtracter.extract(s,LineString,this.lines),GeometryExtracter.extract(s,Point,this.points)}}},{key:"union",value:function e(){if(null===this.geomFact)return null;var t=null;if(this.points.size()>0){var n=this.geomFact.buildGeometry(this.points);t=this.unionNoOpt(n)}var r=null;if(this.lines.size()>0){var i=this.geomFact.buildGeometry(this.lines);r=this.unionNoOpt(i)}var a=null;this.polygons.size()>0&&(a=CascadedPolygonUnion.union(this.polygons));var s=this.unionWithNull(r,a),e=null;return e=null===t?s:null===s?t:PointGeometryUnion.union(t,s),null===e?this.geomFact.createGeometryCollection(null):e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"union",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0].interfaces_&&n[0].interfaces_.indexOf(Collection)>-1){var i=n[0],a=new e(i);return a.union()}if(n[0]instanceof Geometry){var s=n[0],a=new e(s);return a.union()}}else if(2===n.length){var i=n[0],o=n[1],a=new e(i,o);return a.union()}}}]),e}(),ConnectedInteriorTester=function(){function e(){_classCallCheck(this,e),this.geometryFactory=new GeometryFactory,this.geomGraph=null,this.disconnectedRingcoord=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.geomGraph=i}}return _createClass(e,[{key:"visitInteriorRing",value:function(t,n){var r=t.getCoordinates(),i=r[0],a=e.findDifferentPoint(r,i),s=n.findEdgeInSameDirection(i,a),o=n.findEdgeEnd(s),u=null;o.getLabel().getLocation(0,Position.RIGHT)===Location.INTERIOR?u=o:o.getSym().getLabel().getLocation(0,Position.RIGHT)===Location.INTERIOR&&(u=o.getSym()),Assert.isTrue(null!==u,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(u)}},{key:"visitShellInteriors",value:function(e,t){if(e instanceof Polygon){var n=e;this.visitInteriorRing(n.getExteriorRing(),t)}if(e instanceof MultiPolygon)for(var r=e,i=0;i<r.getNumGeometries();i++){var n=r.getGeometryN(i);this.visitInteriorRing(n.getExteriorRing(),t)}}},{key:"getCoordinate",value:function(){return this.disconnectedRingcoord}},{key:"setInteriorEdgesInResult",value:function(e){for(var t=e.getEdgeEnds().iterator();t.hasNext();){var n=t.next();n.getLabel().getLocation(0,Position.RIGHT)===Location.INTERIOR&&n.setInResult(!0)}}},{key:"visitLinkedDirectedEdges",
value:function(e){var t=e,n=e;do Assert.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),n=n.getNext();while(n!==t)}},{key:"buildEdgeRings",value:function(e){for(var t=new ArrayList,n=e.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&null===r.getEdgeRing()){var i=new MaximalEdgeRing(r,this.geometryFactory);i.linkDirectedEdgesForMinimalEdgeRings();var a=i.buildMinimalRings();t.addAll(a)}}return t}},{key:"hasUnvisitedShellEdge",value:function(e){for(var t=0;t<e.size();t++){var n=e.get(t);if(!n.isHole()){var r=n.getEdges(),i=r.get(0);if(i.getLabel().getLocation(0,Position.RIGHT)===Location.INTERIOR)for(var a=0;a<r.size();a++)if(i=r.get(a),!i.isVisited())return this.disconnectedRingcoord=i.getCoordinate(),!0}}return!1}},{key:"isInteriorsConnected",value:function(){var e=new ArrayList;this.geomGraph.computeSplitEdges(e);var t=new PlanarGraph(new OverlayNodeFactory);t.addEdges(e),this.setInteriorEdgesInResult(t),t.linkResultDirectedEdges();var n=this.buildEdgeRings(t.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),t),!this.hasUnvisitedShellEdge(n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"findDifferentPoint",value:function(e,t){for(var n=0;n<e.length;n++)if(!e[n].equals(t))return e[n];return null}}]),e}(),NodeBase=function(){function e(){_classCallCheck(this,e),this.items=new ArrayList,this.subnode=[null,null];for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"hasChildren",value:function(){for(var e=0;2>e;e++)if(null!==this.subnode[e])return!0;return!1}},{key:"isPrunable",value:function(){return!(this.hasChildren()||this.hasItems())}},{key:"addAllItems",value:function(e){e.addAll(this.items);for(var t=0;2>t;t++)null!==this.subnode[t]&&this.subnode[t].addAllItems(e);return e}},{key:"size",value:function(){for(var e=0,t=0;2>t;t++)null!==this.subnode[t]&&(e+=this.subnode[t].size());return e+this.items.size()}},{key:"addAllItemsFromOverlapping",value:function(e,t){return null===e||this.isSearchMatch(e)?(t.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(e,t),void(null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(e,t))):null}},{key:"hasItems",value:function(){return!this.items.isEmpty()}},{key:"remove",value:function(e,t){if(!this.isSearchMatch(e))return!1;for(var n=!1,r=0;2>r;r++)if(null!==this.subnode[r]&&(n=this.subnode[r].remove(e,t))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}return n?n:n=this.items.remove(t)}},{key:"getItems",value:function(){return this.items}},{key:"depth",value:function(){for(var e=0,t=0;2>t;t++)if(null!==this.subnode[t]){var n=this.subnode[t].depth();n>e&&(e=n)}return e+1}},{key:"nodeSize",value:function(){for(var e=0,t=0;2>t;t++)null!==this.subnode[t]&&(e+=this.subnode[t].nodeSize());return e+1}},{key:"add",value:function(e){this.items.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getSubnodeIndex",value:function(e,t){var n=-1;return e.min>=t&&(n=1),e.max<=t&&(n=0),n}}]),e}(),Interval=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.min=null,this.max=null;var a=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length)t.min=0,t.max=0;else if(1===n.length){var i=n[0];t.init(i.min,i.max)}else if(2===n.length){var a=n[0],s=n[1];t.init(a,s)}};return a.apply(this,r)}return _createClass(e,[{key:"expandToInclude",value:function(e){e.max>this.max&&(this.max=e.max),e.min<this.min&&(this.min=e.min)}},{key:"getWidth",value:function(){return this.max-this.min}},{key:"overlaps",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return this.overlaps(r.min,r.max)}if(2===t.length){var i=t[0],a=t[1];return this.min>a||this.max<i?!1:!0}}},{key:"getMin",value:function(){return this.min}},{key:"toString",value:function(){return"["+this.min+", "+this.max+"]"}},{key:"contains",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.contains(i.min,i.max)}if("number"==typeof n[0]){var a=n[0];return a>=this.min&&a<=this.max}}else if(2===n.length){var s=n[0],o=n[1];return s>=this.min&&o<=this.max}}},{key:"init",value:function(e,t){this.min=e,this.max=t,e>t&&(this.min=t,this.max=e)}},{key:"getMax",value:function(){return this.max}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),DoubleBits=function(){function e(){_classCallCheck(this,e),this.x=null,this.xBits=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.x=i,this.xBits=Double.doubleToLongBits(i)}}return _createClass(e,[{key:"numCommonMantissaBits",value:function(e){for(var t=0;52>t;t++){if(this.getBit(t)!==e.getBit(t))return t}return 52}},{key:"getExponent",value:function(){return this.biasedExponent()-e.EXPONENT_BIAS}},{key:"biasedExponent",value:function(){var e=Math.trunc(this.xBits>>52),t=2047&e;return t}},{key:"getDouble",value:function(){return Double.longBitsToDouble(this.xBits)}},{key:"zeroLowerBits",value:function(e){var t=(1<<e)-1,n=~t;this.xBits&=n}},{key:"toString",value:function(){var e=Long.toBinaryString(this.xBits),t="0000000000000000000000000000000000000000000000000000000000000000",n=t+e,r=n.substring(n.length-64),i=r.substring(0,1)+"  "+r.substring(1,12)+"("+this.getExponent()+") "+r.substring(12)+" [ "+this.x+" ]";return i}},{key:"getBit",value:function(e){var t=1<<e;return 0!==(this.xBits&t)?1:0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"exponent",value:function(t){var n=new e(t);return n.getExponent()}},{key:"toBinaryString",value:function(t){var n=new e(t);return n.toString()}},{key:"powerOf2",value:function(t){if(t>1023||-1022>t)throw new IllegalArgumentException$1("Exponent out of bounds");var n=t+e.EXPONENT_BIAS,r=n<<52;return Double.longBitsToDouble(r)}},{key:"truncateToPowerOfTwo",value:function(t){var n=new e(t);return n.zeroLowerBits(52),n.getDouble()}},{key:"maximumCommonMantissa",value:function(t,n){if(0===t||0===n)return 0;var r=new e(t),i=new e(n);if(r.getExponent()!==i.getExponent())return 0;var a=r.numCommonMantissaBits(i);return r.zeroLowerBits(64-(12+a)),r.getDouble()}}]),e}();DoubleBits.EXPONENT_BIAS=1023;var Key=function(){function e(){_classCallCheck(this,e),this.pt=0,this.level=0,this.interval=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.computeKey(i)}}return _createClass(e,[{key:"getInterval",value:function(){return this.interval}},{key:"getLevel",value:function(){return this.level}},{key:"computeKey",value:function(t){for(this.level=e.computeLevel(t),this.interval=new Interval,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)}},{key:"computeInterval",value:function(e,t){var n=DoubleBits.powerOf2(e);this.pt=Math.floor(t.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)}},{key:"getPoint",value:function(){return this.pt}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeLevel",value:function(e){var t=e.getWidth(),n=DoubleBits.exponent(t)+1;return n}}]),e}(),Node$2=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.interval=null,e.centre=null,e.level=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];e.interval=a,e.level=s,e.centre=(a.getMin()+a.getMax())/2}return e}return _inherits(t,e),_createClass(t,[{key:"getInterval",value:function(){return this.interval}},{key:"find",value:function(e){var n=t.getSubnodeIndex(e,this.centre);if(-1===n)return this;if(null!==this.subnode[n]){var r=this.subnode[n];return r.find(e)}return this}},{key:"insert",value:function(e){Assert.isTrue(null===this.interval||this.interval.contains(e.interval));var n=t.getSubnodeIndex(e.interval,this.centre);if(e.level===this.level-1)this.subnode[n]=e;else{var r=this.createSubnode(n);r.insert(e),this.subnode[n]=r}}},{key:"isSearchMatch",value:function(e){return e.overlaps(this.interval)}},{key:"getSubnode",value:function(e){return null===this.subnode[e]&&(this.subnode[e]=this.createSubnode(e)),this.subnode[e]}},{key:"getNode",value:function(e){var n=t.getSubnodeIndex(e,this.centre);if(-1!==n){var r=this.getSubnode(n);return r.getNode(e)}return this}},{key:"createSubnode",value:function(e){var n=0,r=0;switch(e){case 0:n=this.interval.getMin(),r=this.centre;break;case 1:n=this.centre,r=this.interval.getMax()}var i=new Interval(n,r),a=new t(i,this.level-1);return a}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"createNode",value:function(e){var n=new Key(e),r=new t(n.getInterval(),n.getLevel());return r}},{key:"createExpanded",value:function(e,n){var r=new Interval(n);null!==e&&r.expandToInclude(e.interval);var i=t.createNode(r);return null!==e&&i.insert(e),i}}]),t}(NodeBase),IntervalSize=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isZeroWidth",value:function(t,n){var r=n-t;if(0===r)return!0;var i=Math.max(Math.abs(t),Math.abs(n)),a=r/i,s=DoubleBits.exponent(a);return s<=e.MIN_BINARY_EXPONENT}}]),e}();IntervalSize.MIN_BINARY_EXPONENT=-50;var Root=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length,e}return _inherits(t,e),_createClass(t,[{key:"insert",value:function(e,n){var r=t.getSubnodeIndex(e,t.origin);if(-1===r)return this.add(n),null;var i=this.subnode[r];if(null===i||!i.getInterval().contains(e)){var a=Node$2.createExpanded(i,e);this.subnode[r]=a}this.insertContained(this.subnode[r],e,n)}},{key:"isSearchMatch",value:function(e){return!0}},{key:"insertContained",value:function(e,t,n){Assert.isTrue(e.getInterval().contains(t));var r=IntervalSize.isZeroWidth(t.getMin(),t.getMax()),i=null;i=r?e.find(t):e.getNode(t),i.add(n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(NodeBase);Root.origin=0;var Bintree=function(){function e(){_classCallCheck(this,e),this.root=null,this.minExtent=1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length&&(this.root=new Root)}return _createClass(e,[{key:"size",value:function(){return null!==this.root?this.root.size():0}},{key:"insert",value:function(t,n){this.collectStats(t);var r=e.ensureExtent(t,this.minExtent);this.root.insert(r,n)}},{key:"query",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if("number"==typeof t[0]){var r=t[0];return this.query(new Interval(r,r))}if(t[0]instanceof Interval){var i=t[0],a=new ArrayList;return this.query(i,a),a}}else if(2===t.length){var i=t[0],s=t[1];this.root.addAllItemsFromOverlapping(i,s)}}},{key:"iterator",value:function(){var e=new ArrayList;return this.root.addAllItems(e),e.iterator()}},{key:"remove",value:function(t,n){var r=e.ensureExtent(t,this.minExtent);return this.root.remove(r,n)}},{key:"collectStats",value:function(e){var t=e.getWidth();t<this.minExtent&&t>0&&(this.minExtent=t)}},{key:"depth",value:function(){return null!==this.root?this.root.depth():0}},{key:"nodeSize",value:function(){return null!==this.root?this.root.nodeSize():0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"ensureExtent",value:function(e,t){var n=e.getMin(),r=e.getMax();return n!==r?e:(n===r&&(n-=t/2,r=n+t/2),new Interval(n,r))}}]),e}(),PointInRing=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInside",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),MCPointInRing=function(){function e(){_classCallCheck(this,e),this.ring=null,this.tree=null,this.crossings=0,this.interval=new Interval;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.ring=i,this.buildIndex()}}return _createClass(e,[{key:"testLineSegment",value:function(e,t){var n=null,r=null,i=null,a=null,s=null,o=t.p0,u=t.p1;r=o.x-e.x,i=o.y-e.y,a=u.x-e.x,s=u.y-e.y,(i>0&&0>=s||s>0&&0>=i)&&(n=RobustDeterminant.signOfDet2x2(r,i,a,s)/(s-i),n>0&&this.crossings++)}},{key:"buildIndex",value:function(){this.tree=new Bintree;for(var e=CoordinateArrays.removeRepeatedPoints(this.ring.getCoordinates()),t=MonotoneChainBuilder.getChains(e),n=0;n<t.size();n++){var r=t.get(n),i=r.getEnvelope();this.interval.min=i.getMinY(),this.interval.max=i.getMaxY(),this.tree.insert(this.interval,r)}}},{key:"testMonotoneChain",value:function(e,t,n){n.select(e,t)}},{key:"isInside",value:function(e){this.crossings=0;var t=new Envelope(Double.NEGATIVE_INFINITY,Double.POSITIVE_INFINITY,e.y,e.y);this.interval.min=e.y,this.interval.max=e.y;for(var n=this.tree.query(this.interval),r=new MCSelecter(this,e),i=n.iterator();i.hasNext();){var a=i.next();this.testMonotoneChain(t,r,a)}return this.crossings%2===1?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[PointInRing]}}],[{key:"MCSelecter",get:function(){return MCSelecter}}]),e}(),MCSelecter=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.mcp=null,e.p=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];e.mcp=a,e.p=s}return e}return _inherits(t,e),_createClass(t,[{key:"select",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"select",this)).call.apply(e,[this].concat(r));var a=r[0];this.mcp.testLineSegment(this.p,a)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(MonotoneChainSelectAction),RelateNodeGraph=function(){function e(){_classCallCheck(this,e),this.nodes=new NodeMap(new RelateNodeFactory);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"insertEdgeEnds",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.nodes.add(n)}}},{key:"getNodeIterator",value:function(){return this.nodes.iterator()}},{key:"copyNodesAndLabels",value:function(e,t){for(var n=e.getNodeIterator();n.hasNext();){var r=n.next(),i=this.nodes.addNode(r.getCoordinate());i.setLabel(t,r.getLabel().getLocation(t))}}},{key:"build",value:function(e){this.computeIntersectionNodes(e,0),this.copyNodesAndLabels(e,0);var t=new EdgeEndBuilder,n=t.computeEdgeEnds(e.getEdgeIterator());this.insertEdgeEnds(n)}},{key:"computeIntersectionNodes",value:function(e,t){for(var n=e.getEdgeIterator();n.hasNext();)for(var r=n.next(),i=r.getLabel().getLocation(t),a=r.getEdgeIntersectionList().iterator();a.hasNext();){var s=a.next(),o=this.nodes.addNode(s.coord);i===Location.BOUNDARY?o.setLabelBoundary(t):o.getLabel().isNull(t)&&o.setLabel(t,Location.INTERIOR)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),ConsistentAreaTester=function(){function e(){_classCallCheck(this,e),this.li=new RobustLineIntersector,this.geomGraph=null,this.nodeGraph=new RelateNodeGraph,this.invalidPoint=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.geomGraph=i}}return _createClass(e,[{key:"isNodeEdgeAreaLabelsConsistent",value:function(){for(var e=this.nodeGraph.getNodeIterator();e.hasNext();){var t=e.next();if(!t.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=t.getCoordinate().copy(),!1}return!0}},{key:"getInvalidPoint",value:function(){return this.invalidPoint}},{key:"hasDuplicateRings",value:function(){for(var e=this.nodeGraph.getNodeIterator();e.hasNext();)for(var t=e.next(),n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdgeEnds().size()>1)return this.invalidPoint=r.getEdge().getCoordinate(0),!0}return!1}},{key:"isNodeConsistentArea",value:function(){var e=this.geomGraph.computeSelfNodes(this.li,!0,!0);return e.hasProperIntersection()?(this.invalidPoint=e.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),IndexedNestedRingTester=function(){function e(){_classCallCheck(this,e),this.graph=null,this.rings=new ArrayList,this.totalEnv=new Envelope,this.index=null,this.nestedPt=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.graph=i}}return _createClass(e,[{key:"buildIndex",value:function(){this.index=new STRtree;for(var e=0;e<this.rings.size();e++){var t=this.rings.get(e),n=t.getEnvelopeInternal();this.index.insert(n,t)}}},{key:"getNestedPoint",value:function(){return this.nestedPt}},{key:"isNonNested",value:function(){this.buildIndex();for(var e=0;e<this.rings.size();e++)for(var t=this.rings.get(e),n=t.getCoordinates(),r=this.index.query(t.getEnvelopeInternal()),i=0;i<r.size();i++){var a=r.get(i),s=a.getCoordinates();if(t!==a&&t.getEnvelopeInternal().intersects(a.getEnvelopeInternal())){var o=IsValidOp$1.findPtNotNode(n,a,this.graph);if(null!==o){var u=CGAlgorithms.isPointInRing(o,s);if(u)return this.nestedPt=o,!1}}}return!0}},{key:"add",value:function(e){this.rings.add(e),this.totalEnv.expandToInclude(e.getEnvelopeInternal())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),TopologyValidationError=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.errorType=null,this.pt=null;var a=function e(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];e.call(t,a,null)}else if(2===r.length){var a=r[0],s=r[1];t.errorType=a,null!==s&&(t.pt=s.copy())}};return a.apply(this,r)}return _createClass(e,[{key:"getErrorType",value:function(){return this.errorType}},{key:"getMessage",value:function(){return e.errMsg[this.errorType]}},{key:"getCoordinate",value:function(){return this.pt}},{key:"toString",value:function(){var e="";return null!==this.pt&&(e=" at or near point "+this.pt),this.getMessage()+e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();TopologyValidationError.ERROR=0,TopologyValidationError.REPEATED_POINT=1,TopologyValidationError.HOLE_OUTSIDE_SHELL=2,TopologyValidationError.NESTED_HOLES=3,TopologyValidationError.DISCONNECTED_INTERIOR=4,TopologyValidationError.SELF_INTERSECTION=5,TopologyValidationError.RING_SELF_INTERSECTION=6,TopologyValidationError.NESTED_SHELLS=7,TopologyValidationError.DUPLICATE_RINGS=8,TopologyValidationError.TOO_FEW_POINTS=9,TopologyValidationError.INVALID_COORDINATE=10,TopologyValidationError.RING_NOT_CLOSED=11,TopologyValidationError.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"];var IsValidOp$1=function(){function e(){_classCallCheck(this,e),this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.parentGeometry=i}}return _createClass(e,[{key:"checkInvalidCoordinates",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length)if(n[0]instanceof Array){for(var i=n[0],a=0;a<i.length;a++)if(!e.isValid(i[a]))return this.validErr=new TopologyValidationError(TopologyValidationError.INVALID_COORDINATE,i[a]),null}else if(n[0]instanceof Polygon){var s=n[0];if(this.checkInvalidCoordinates(s.getExteriorRing().getCoordinates()),null!==this.validErr)return null;for(var a=0;a<s.getNumInteriorRing();a++)if(this.checkInvalidCoordinates(s.getInteriorRingN(a).getCoordinates()),null!==this.validErr)return null}}},{key:"checkHolesNotNested",value:function(e,t){for(var n=new IndexedNestedRingTester(t),r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);n.add(i)}var a=n.isNonNested();a||(this.validErr=new TopologyValidationError(TopologyValidationError.NESTED_HOLES,n.getNestedPoint()))}},{key:"checkConsistentArea",value:function(e){var t=new ConsistentAreaTester(e),n=t.isNodeConsistentArea();return n?void(t.hasDuplicateRings()&&(this.validErr=new TopologyValidationError(TopologyValidationError.DUPLICATE_RINGS,t.getInvalidPoint()))):(this.validErr=new TopologyValidationError(TopologyValidationError.SELF_INTERSECTION,t.getInvalidPoint()),null)}},{key:"isValid",value:function(){return this.checkValid(this.parentGeometry),null===this.validErr}},{key:"checkShellInsideHole",value:function(t,n,r){var i=t.getCoordinates(),a=n.getCoordinates(),s=e.findPtNotNode(i,n,r);if(null!==s){var o=CGAlgorithms.isPointInRing(s,a);if(!o)return s}var u=e.findPtNotNode(a,t,r);if(null!==u){var l=CGAlgorithms.isPointInRing(u,i);return l?u:null}return Assert.shouldNeverReachHere("points in shell and hole appear to be equal"),null}},{key:"checkNoSelfIntersectingRings",value:function(e){for(var t=e.getEdgeIterator();t.hasNext();){var n=t.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this.validErr)return null}}},{key:"checkConnectedInteriors",value:function(e){var t=new ConnectedInteriorTester(e);t.isInteriorsConnected()||(this.validErr=new TopologyValidationError(TopologyValidationError.DISCONNECTED_INTERIOR,t.getCoordinate()))}},{key:"checkNoSelfIntersectingRing",value:function(e){for(var t=new TreeSet,n=!0,r=e.iterator();r.hasNext();){var i=r.next();if(n)n=!1;else{if(t.contains(i.coord))return this.validErr=new TopologyValidationError(TopologyValidationError.RING_SELF_INTERSECTION,i.coord),null;t.add(i.coord)}}}},{key:"checkHolesInShell",value:function(t,n){for(var r=t.getExteriorRing(),i=new MCPointInRing(r),a=0;a<t.getNumInteriorRing();a++){var s=t.getInteriorRingN(a),o=e.findPtNotNode(s.getCoordinates(),r,n);if(null===o)return null;var u=!i.isInside(o);if(u)return this.validErr=new TopologyValidationError(TopologyValidationError.HOLE_OUTSIDE_SHELL,o),null}}},{key:"checkTooFewPoints",value:function(e){return e.hasTooFewPoints()?(this.validErr=new TopologyValidationError(TopologyValidationError.TOO_FEW_POINTS,e.getInvalidPoint()),null):void 0}},{key:"getValidationError",value:function(){return this.checkValid(this.parentGeometry),this.validErr}},{key:"checkValid",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof Point){var r=t[0];this.checkInvalidCoordinates(r.getCoordinates())}else if(t[0]instanceof MultiPoint){var i=t[0];this.checkInvalidCoordinates(i.getCoordinates())}else if(t[0]instanceof LinearRing){var a=t[0];if(this.checkInvalidCoordinates(a.getCoordinates()),null!==this.validErr)return null;if(this.checkClosedRing(a),null!==this.validErr)return null;var s=new GeometryGraph(0,a);if(this.checkTooFewPoints(s),null!==this.validErr)return null;var o=new RobustLineIntersector;s.computeSelfNodes(o,!0,!0),this.checkNoSelfIntersectingRings(s)}else if(t[0]instanceof LineString){var u=t[0];if(this.checkInvalidCoordinates(u.getCoordinates()),null!==this.validErr)return null;var s=new GeometryGraph(0,u);this.checkTooFewPoints(s)}else if(t[0]instanceof Polygon){var l=t[0];if(this.checkInvalidCoordinates(l),null!==this.validErr)return null;if(this.checkClosedRings(l),null!==this.validErr)return null;var s=new GeometryGraph(0,l);if(this.checkTooFewPoints(s),null!==this.validErr)return null;if(this.checkConsistentArea(s),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(s),null!==this.validErr))return null;if(this.checkHolesInShell(l,s),null!==this.validErr)return null;if(this.checkHolesNotNested(l,s),null!==this.validErr)return null;this.checkConnectedInteriors(s)}else if(t[0]instanceof MultiPolygon){for(var c=t[0],h=0;h<c.getNumGeometries();h++){var g=c.getGeometryN(h);if(this.checkInvalidCoordinates(g),null!==this.validErr)return null;if(this.checkClosedRings(g),null!==this.validErr)return null}var s=new GeometryGraph(0,c);if(this.checkTooFewPoints(s),null!==this.validErr)return null;if(this.checkConsistentArea(s),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(s),null!==this.validErr))return null;for(var h=0;h<c.getNumGeometries();h++){var g=c.getGeometryN(h);if(this.checkHolesInShell(g,s),null!==this.validErr)return null}for(var h=0;h<c.getNumGeometries();h++){var g=c.getGeometryN(h);if(this.checkHolesNotNested(g,s),null!==this.validErr)return null}if(this.checkShellsNotNested(c,s),null!==this.validErr)return null;this.checkConnectedInteriors(s)}else if(t[0]instanceof GeometryCollection)for(var f=t[0],h=0;h<f.getNumGeometries();h++){var y=f.getGeometryN(h);if(this.checkValid(y),null!==this.validErr)return null}else if(t[0]instanceof Geometry){var d=t[0];if(this.validErr=null,d.isEmpty())return null;if(d instanceof Point)this.checkValid(d);else if(d instanceof MultiPoint)this.checkValid(d);else if(d instanceof LinearRing)this.checkValid(d);else if(d instanceof LineString)this.checkValid(d);else if(d instanceof Polygon)this.checkValid(d);else if(d instanceof MultiPolygon)this.checkValid(d);else{if(!(d instanceof GeometryCollection))throw new UnsupportedOperationException(d.getClass().getName());this.checkValid(d)}}}},{key:"setSelfTouchingRingFormingHoleValid",value:function(e){this.isSelfTouchingRingFormingHoleValid=e}},{key:"checkShellNotNested",value:function(t,n,r){var i=t.getCoordinates(),a=n.getExteriorRing(),s=a.getCoordinates(),o=e.findPtNotNode(i,a,r);if(null===o)return null;var u=CGAlgorithms.isPointInRing(o,s);if(!u)return null;if(n.getNumInteriorRing()<=0)return this.validErr=new TopologyValidationError(TopologyValidationError.NESTED_SHELLS,o),null;for(var l=null,c=0;c<n.getNumInteriorRing();c++){var h=n.getInteriorRingN(c);if(l=this.checkShellInsideHole(t,h,r),null===l)return null}this.validErr=new TopologyValidationError(TopologyValidationError.NESTED_SHELLS,l)}},{key:"checkClosedRings",value:function(e){if(this.checkClosedRing(e.getExteriorRing()),null!==this.validErr)return null;for(var t=0;t<e.getNumInteriorRing();t++)if(this.checkClosedRing(e.getInteriorRingN(t)),null!==this.validErr)return null}},{key:"checkClosedRing",value:function(e){if(!e.isClosed()){var t=null;e.getNumPoints()>=1&&(t=e.getCoordinateN(0)),this.validErr=new TopologyValidationError(TopologyValidationError.RING_NOT_CLOSED,t)}}},{key:"checkShellsNotNested",value:function(e,t){for(var n=0;n<e.getNumGeometries();n++)for(var r=e.getGeometryN(n),i=r.getExteriorRing(),a=0;a<e.getNumGeometries();a++)if(n!==a){var s=e.getGeometryN(a);if(this.checkShellNotNested(i,s,t),null!==this.validErr)return null}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"findPtNotNode",value:function(e,t,n){for(var r=n.findEdge(t),i=r.getEdgeIntersectionList(),a=0;a<e.length;a++){var s=e[a];if(!i.isIntersection(s))return s}return null}},{key:"isValid",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof Geometry){var i=n[0],a=new e(i);return a.isValid()}if(n[0]instanceof Coordinate){var s=n[0];return Double.isNaN(s.x)?!1:Double.isInfinite(s.x)?!1:Double.isNaN(s.y)?!1:Double.isInfinite(s.y)?!1:!0}}}}]),e}(),PrecisionReducerCoordinateOperation=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.targetPM=null,e.removeCollapsed=!0;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];e.targetPM=a,e.removeCollapsed=s}return e}return _inherits(t,e),_createClass(t,[{key:"editCoordinates",value:function(e,t){if(0===e.length)return null;for(var n=new Array(e.length),r=0;r<e.length;r++){var i=new Coordinate(e[r]);this.targetPM.makePrecise(i),n[r]=i}var a=new CoordinateList(n,!1),s=a.toCoordinateArray(),o=0;t instanceof LineString&&(o=2),t instanceof LinearRing&&(o=4);var u=n;return this.removeCollapsed&&(u=null),s.length<o?u:s}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(GeometryEditor.CoordinateOperation),GeometryPrecisionReducer=function(){function e(){_classCallCheck(this,e),this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.targetPM=i}}return _createClass(e,[{key:"fixPolygonalTopology",value:function(e){var t=e;this.changePrecisionModel||(t=this.changePM(e,this.targetPM));var n=t.buffer(0),r=n;return this.changePrecisionModel||(r=e.getFactory().createGeometry(n)),r}},{key:"reducePointwise",value:function(e){var t=null;if(this.changePrecisionModel){var n=this.createFactory(e.getFactory(),this.targetPM);t=new GeometryEditor(n)}else t=new GeometryEditor;var r=this.removeCollapsed;e.getDimension()>=2&&(r=!0);var i=t.edit(e,new PrecisionReducerCoordinateOperation(this.targetPM,r));return i}},{key:"changePM",value:function(e,t){var n=this.createEditor(e.getFactory(),t);return n.edit(e,new GeometryEditor.NoOpGeometryOperation)}},{key:"setRemoveCollapsedComponents",value:function(e){this.removeCollapsed=e}},{key:"createFactory",value:function(e,t){var n=new GeometryFactory(t,e.getSRID(),e.getCoordinateSequenceFactory());return n}},{key:"setChangePrecisionModel",value:function(e){this.changePrecisionModel=e}},{key:"reduce",value:function(e){var t=this.reducePointwise(e);return this.isPointwise?t:t.interfaces_&&t.interfaces_.indexOf(Polygonal)>-1?t.isValid()?t:this.fixPolygonalTopology(t):t}},{key:"setPointwise",value:function(e){this.isPointwise=e}},{key:"createEditor",value:function(e,t){if(e.getPrecisionModel()===t)return new GeometryEditor;var n=this.createFactory(e,t),r=new GeometryEditor(n);return r}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"reduce",value:function(t,n){var r=new e(n);return r.reduce(t)}},{key:"reducePointwise",value:function(t,n){var r=new e(n);return r.setPointwise(!0),r.reduce(t)}}]),e}(),DouglasPeuckerLineSimplifier=function(){function e(){_classCallCheck(this,e),this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new LineSegment;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.pts=i}}return _createClass(e,[{key:"simplifySection",value:function(e,t){if(e+1===t)return null;this.seg.p0=this.pts[e],this.seg.p1=this.pts[t];for(var n=-1,r=e,i=e+1;t>i;i++){var a=this.seg.distance(this.pts[i]);a>n&&(n=a,r=i)}if(n<=this.distanceTolerance)for(var i=e+1;t>i;i++)this.usePt[i]=!1;else this.simplifySection(e,r),this.simplifySection(r,t)}},{key:"setDistanceTolerance",value:function(e){this.distanceTolerance=e}},{key:"simplify",value:function(){this.usePt=new Array(this.pts.length);for(var e=0;e<this.pts.length;e++)this.usePt[e]=!0;this.simplifySection(0,this.pts.length-1);for(var t=new CoordinateList,e=0;e<this.pts.length;e++)this.usePt[e]&&t.add(new Coordinate(this.pts[e]));return t.toCoordinateArray()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(t,n){
var r=new e(t);return r.setDistanceTolerance(n),r.simplify()}}]),e}(),DouglasPeuckerSimplifier=function(){function e(){_classCallCheck(this,e),this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.inputGeom=i}}return _createClass(e,[{key:"setEnsureValid",value:function(e){this.isEnsureValidTopology=e}},{key:"getResultGeometry",value:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new DPTransformer(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)}},{key:"setDistanceTolerance",value:function(e){if(0>e)throw new IllegalArgumentException$1("Tolerance must be non-negative");this.distanceTolerance=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(t,n){var r=new e(t);return r.setDistanceTolerance(n),r.getResultGeometry()}},{key:"DPTransformer",get:function(){return DPTransformer}}]),e}(),DPTransformer=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.isEnsureValidTopology=!0,e.distanceTolerance=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];e.isEnsureValidTopology=a,e.distanceTolerance=s}return e}return _inherits(t,e),_createClass(t,[{key:"transformPolygon",value:function(e,n){if(e.isEmpty())return null;var r=_get(Object.getPrototypeOf(t.prototype),"transformPolygon",this).call(this,e,n);return n instanceof MultiPolygon?r:this.createValidArea(r)}},{key:"createValidArea",value:function(e){return this.isEnsureValidTopology?e.buffer(0):e}},{key:"transformCoordinates",value:function(e,t){var n=e.toCoordinateArray(),r=null;return r=0===n.length?new Array(0):DouglasPeuckerLineSimplifier.simplify(n,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(r)}},{key:"transformMultiPolygon",value:function(e,n){var r=_get(Object.getPrototypeOf(t.prototype),"transformMultiPolygon",this).call(this,e,n);return this.createValidArea(r)}},{key:"transformLinearRing",value:function(e,n){var r=n instanceof Polygon,i=_get(Object.getPrototypeOf(t.prototype),"transformLinearRing",this).call(this,e,n);return!r||i instanceof LinearRing?i:null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(GeometryTransformer),NodeBase$1=function(){function e(){_classCallCheck(this,e),this.items=new ArrayList,this.subnode=new Array(4);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"hasChildren",value:function(){for(var e=0;4>e;e++)if(null!==this.subnode[e])return!0;return!1}},{key:"isPrunable",value:function(){return!(this.hasChildren()||this.hasItems())}},{key:"addAllItems",value:function(e){e.addAll(this.items);for(var t=0;4>t;t++)null!==this.subnode[t]&&this.subnode[t].addAllItems(e);return e}},{key:"getNodeCount",value:function(){for(var e=0,t=0;4>t;t++)null!==this.subnode[t]&&(e+=this.subnode[t].size());return e+1}},{key:"size",value:function(){for(var e=0,t=0;4>t;t++)null!==this.subnode[t]&&(e+=this.subnode[t].size());return e+this.items.size()}},{key:"addAllItemsFromOverlapping",value:function(e,t){if(!this.isSearchMatch(e))return null;t.addAll(this.items);for(var n=0;4>n;n++)null!==this.subnode[n]&&this.subnode[n].addAllItemsFromOverlapping(e,t)}},{key:"visitItems",value:function(e,t){for(var n=this.items.iterator();n.hasNext();)t.visitItem(n.next())}},{key:"hasItems",value:function(){return!this.items.isEmpty()}},{key:"remove",value:function(e,t){if(!this.isSearchMatch(e))return!1;for(var n=!1,r=0;4>r;r++)if(null!==this.subnode[r]&&(n=this.subnode[r].remove(e,t))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}return n?n:n=this.items.remove(t)}},{key:"visit",value:function(e,t){if(!this.isSearchMatch(e))return null;this.visitItems(e,t);for(var n=0;4>n;n++)null!==this.subnode[n]&&this.subnode[n].visit(e,t)}},{key:"getItems",value:function(){return this.items}},{key:"depth",value:function(){for(var e=0,t=0;4>t;t++)if(null!==this.subnode[t]){var n=this.subnode[t].depth();n>e&&(e=n)}return e+1}},{key:"isEmpty",value:function e(){var e=!0;this.items.isEmpty()||(e=!1);for(var t=0;4>t;t++)null!==this.subnode[t]&&(this.subnode[t].isEmpty()||(e=!1));return e}},{key:"add",value:function(e){this.items.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Serializable]}}],[{key:"getSubnodeIndex",value:function(e,t,n){var r=-1;return e.getMinX()>=t&&(e.getMinY()>=n&&(r=3),e.getMaxY()<=n&&(r=1)),e.getMaxX()<=t&&(e.getMinY()>=n&&(r=2),e.getMaxY()<=n&&(r=0)),r}}]),e}(),Key$1=function(){function e(){_classCallCheck(this,e),this.pt=new Coordinate,this.level=0,this.env=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.computeKey(i)}}return _createClass(e,[{key:"getLevel",value:function(){return this.level}},{key:"computeKey",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];for(this.level=e.computeQuadLevel(i),this.env=new Envelope,this.computeKey(this.level,i);!this.env.contains(i);)this.level+=1,this.computeKey(this.level,i)}else if(2===n.length){var a=n[0],i=n[1],s=DoubleBits.powerOf2(a);this.pt.x=Math.floor(i.getMinX()/s)*s,this.pt.y=Math.floor(i.getMinY()/s)*s,this.env.init(this.pt.x,this.pt.x+s,this.pt.y,this.pt.y+s)}}},{key:"getEnvelope",value:function(){return this.env}},{key:"getCentre",value:function(){return new Coordinate((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)}},{key:"getPoint",value:function(){return this.pt}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeQuadLevel",value:function(e){var t=e.getWidth(),n=e.getHeight(),r=t>n?t:n,i=DoubleBits.exponent(r)+1;return i}}]),e}(),Node$3=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.env=null,e.centrex=null,e.centrey=null,e.level=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var a=r[0],s=r[1];e.env=a,e.level=s,e.centrex=(a.getMinX()+a.getMaxX())/2,e.centrey=(a.getMinY()+a.getMaxY())/2}return e}return _inherits(t,e),_createClass(t,[{key:"find",value:function(e){var n=t.getSubnodeIndex(e,this.centrex,this.centrey);if(-1===n)return this;if(null!==this.subnode[n]){var r=this.subnode[n];return r.find(e)}return this}},{key:"isSearchMatch",value:function(e){return this.env.intersects(e)}},{key:"getSubnode",value:function(e){return null===this.subnode[e]&&(this.subnode[e]=this.createSubnode(e)),this.subnode[e]}},{key:"getEnvelope",value:function(){return this.env}},{key:"getNode",value:function(e){var n=t.getSubnodeIndex(e,this.centrex,this.centrey);if(-1!==n){var r=this.getSubnode(n);return r.getNode(e)}return this}},{key:"createSubnode",value:function(e){var n=0,r=0,i=0,a=0;switch(e){case 0:n=this.env.getMinX(),r=this.centrex,i=this.env.getMinY(),a=this.centrey;break;case 1:n=this.centrex,r=this.env.getMaxX(),i=this.env.getMinY(),a=this.centrey;break;case 2:n=this.env.getMinX(),r=this.centrex,i=this.centrey,a=this.env.getMaxY();break;case 3:n=this.centrex,r=this.env.getMaxX(),i=this.centrey,a=this.env.getMaxY()}var s=new Envelope(n,r,i,a),o=new t(s,this.level-1);return o}},{key:"insertNode",value:function(e){Assert.isTrue(null===this.env||this.env.contains(e.env));var n=t.getSubnodeIndex(e.env,this.centrex,this.centrey);if(e.level===this.level-1)this.subnode[n]=e;else{var r=this.createSubnode(n);r.insertNode(e),this.subnode[n]=r}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"createNode",value:function(e){var n=new Key$1(e),r=new t(n.getEnvelope(),n.getLevel());return r}},{key:"createExpanded",value:function(e,n){var r=new Envelope(n);null!==e&&r.expandToInclude(e.env);var i=t.createNode(r);return null!==e&&i.insertNode(e),i}}]),t}(NodeBase$1),Root$1=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length,e}return _inherits(t,e),_createClass(t,[{key:"insert",value:function(e,n){var r=t.getSubnodeIndex(e,t.origin.x,t.origin.y);if(-1===r)return this.add(n),null;var i=this.subnode[r];if(null===i||!i.getEnvelope().contains(e)){var a=Node$3.createExpanded(i,e);this.subnode[r]=a}this.insertContained(this.subnode[r],e,n)}},{key:"isSearchMatch",value:function(e){return!0}},{key:"insertContained",value:function(e,t,n){Assert.isTrue(e.getEnvelope().contains(t));var r=IntervalSize.isZeroWidth(t.getMinX(),t.getMaxX()),i=IntervalSize.isZeroWidth(t.getMinY(),t.getMaxY()),a=null;a=r||i?e.find(t):e.getNode(t),a.add(n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(NodeBase$1);Root$1.origin=new Coordinate(0,0);var Quadtree=function(){function e(){_classCallCheck(this,e),this.root=null,this.minExtent=1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length&&(this.root=new Root$1)}return _createClass(e,[{key:"size",value:function(){return null!==this.root?this.root.size():0}},{key:"insert",value:function(t,n){this.collectStats(t);var r=e.ensureExtent(t,this.minExtent);this.root.insert(r,n)}},{key:"query",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0],i=new ArrayListVisitor;return this.query(r,i),i.getItems()}if(2===t.length){var r=t[0],a=t[1];this.root.visit(r,a)}}},{key:"queryAll",value:function(){var e=new ArrayList;return this.root.addAllItems(e),e}},{key:"remove",value:function(t,n){var r=e.ensureExtent(t,this.minExtent);return this.root.remove(r,n)}},{key:"collectStats",value:function(e){var t=e.getWidth();t<this.minExtent&&t>0&&(this.minExtent=t);var n=e.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n)}},{key:"depth",value:function(){return null!==this.root?this.root.depth():0}},{key:"isEmpty",value:function(){return null===this.root?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[SpatialIndex,Serializable]}}],[{key:"ensureExtent",value:function(e,t){var n=e.getMinX(),r=e.getMaxX(),i=e.getMinY(),a=e.getMaxY();return n!==r&&i!==a?e:(n===r&&(n-=t/2,r=n+t/2),i===a&&(i-=t/2,a=i+t/2),new Envelope(n,r,i,a))}}]),e}();Quadtree.serialVersionUID=-0x678b60c967a25400;var TaggedLineSegment=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];_classCallCheck(this,t);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));s.parent=null,s.index=null;var o=function e(){for(var r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];return 2===i.length?function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];e.call(s,i,a,null,-1)}.apply(void 0,i):4===i.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var a=r[0],s=r[1],o=r[2],u=r[3],l=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,a,s));l.parent=o,l.index=u}.apply(void 0,i):void 0};return e=o.apply(s,i),_possibleConstructorReturn(s,e)}return _inherits(t,e),_createClass(t,[{key:"getIndex",value:function(){return this.index}},{key:"getParent",value:function(){return this.parent}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(LineSegment),TaggedLineString=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.parentLine=null,this.segs=null,this.resultSegs=new ArrayList,this.minimumSize=null;var a=function e(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];e.call(t,a,2)}else if(2===r.length){var a=r[0],s=r[1];t.parentLine=a,t.minimumSize=s,t.init()}};return a.apply(this,r)}return _createClass(e,[{key:"addToResult",value:function(e){this.resultSegs.add(e)}},{key:"asLineString",value:function(){return this.parentLine.getFactory().createLineString(e.extractCoordinates(this.resultSegs))}},{key:"getResultSize",value:function(){var e=this.resultSegs.size();return 0===e?0:e+1}},{key:"getParent",value:function(){return this.parentLine}},{key:"getSegment",value:function(e){return this.segs[e]}},{key:"getParentCoordinates",value:function(){return this.parentLine.getCoordinates()}},{key:"getMinimumSize",value:function(){return this.minimumSize}},{key:"asLinearRing",value:function(){return this.parentLine.getFactory().createLinearRing(e.extractCoordinates(this.resultSegs))}},{key:"getSegments",value:function(){return this.segs}},{key:"init",value:function(){var e=this.parentLine.getCoordinates();this.segs=new Array(e.length-1);for(var t=0;t<e.length-1;t++){var n=new TaggedLineSegment(e[t],e[t+1],this.parentLine,t);this.segs[t]=n}}},{key:"getResultCoordinates",value:function(){return e.extractCoordinates(this.resultSegs)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"extractCoordinates",value:function(e){for(var t=new Array(e.size()+1),n=null,r=0;r<e.size();r++)n=e.get(r),t[r]=n.p0;return t[t.length-1]=n.p1,t}}]),e}(),LineSegmentIndex=function(){function e(){_classCallCheck(this,e),this.index=new Quadtree;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"remove",value:function(e){this.index.remove(new Envelope(e.p0,e.p1),e)}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof TaggedLineString)for(var r=t[0],i=r.getSegments(),a=0;a<i.length;a++){var s=i[a];this.add(s)}else if(t[0]instanceof LineSegment){var o=t[0];this.index.insert(new Envelope(o.p0,o.p1),o)}}},{key:"query",value:function(e){var t=new Envelope(e.p0,e.p1),n=new LineSegmentVisitor(e);this.index.query(t,n);var r=n.getItems();return r}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),LineSegmentVisitor=function(){function e(){_classCallCheck(this,e),this.querySeg=null,this.items=new ArrayList;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.querySeg=i}}return _createClass(e,[{key:"visitItem",value:function(e){var t=e;Envelope.intersects(t.p0,t.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(e)}},{key:"getItems",value:function(){return this.items}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[ItemVisitor]}}]),e}(),TaggedLineStringSimplifier=function(){function e(){_classCallCheck(this,e),this.li=new RobustLineIntersector,this.inputIndex=new LineSegmentIndex,this.outputIndex=new LineSegmentIndex,this.line=null,this.linePts=null,this.distanceTolerance=0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],a=n[1];this.inputIndex=i,this.outputIndex=a}}return _createClass(e,[{key:"flatten",value:function(e,t){var n=this.linePts[e],r=this.linePts[t],i=new LineSegment(n,r);return this.remove(this.line,e,t),this.outputIndex.add(i),i}},{key:"hasBadIntersection",value:function(e,t,n){return this.hasBadOutputIntersection(n)?!0:this.hasBadInputIntersection(e,t,n)?!0:!1}},{key:"setDistanceTolerance",value:function(e){this.distanceTolerance=e}},{key:"simplifySection",value:function(e,t,n){n+=1;var r=new Array(2);if(e+1===t){var i=this.line.getSegment(e);return this.line.addToResult(i),null}var a=!0;if(this.line.getResultSize()<this.line.getMinimumSize()){var s=n+1;s<this.line.getMinimumSize()&&(a=!1)}var o=new Array(1),u=this.findFurthestPoint(this.linePts,e,t,o);o[0]>this.distanceTolerance&&(a=!1);var l=new LineSegment;if(l.p0=this.linePts[e],l.p1=this.linePts[t],r[0]=e,r[1]=t,this.hasBadIntersection(this.line,r,l)&&(a=!1),a){var i=this.flatten(e,t);return this.line.addToResult(i),null}this.simplifySection(e,u,n),this.simplifySection(u,t,n)}},{key:"hasBadOutputIntersection",value:function(e){for(var t=this.outputIndex.query(e),n=t.iterator();n.hasNext();){var r=n.next();if(this.hasInteriorIntersection(r,e))return!0}return!1}},{key:"findFurthestPoint",value:function(e,t,n,r){var i=new LineSegment;i.p0=e[t],i.p1=e[n];for(var a=-1,s=t,o=t+1;n>o;o++){var u=e[o],l=i.distance(u);l>a&&(a=l,s=o)}return r[0]=a,s}},{key:"simplify",value:function(e){this.line=e,this.linePts=e.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)}},{key:"remove",value:function(e,t,n){for(var r=t;n>r;r++){var i=e.getSegment(r);this.inputIndex.remove(i)}}},{key:"hasInteriorIntersection",value:function(e,t){return this.li.computeIntersection(e.p0,e.p1,t.p0,t.p1),this.li.isInteriorIntersection()}},{key:"hasBadInputIntersection",value:function(t,n,r){for(var i=this.inputIndex.query(r),a=i.iterator();a.hasNext();){var s=a.next();if(this.hasInteriorIntersection(s,r)){if(e.isInLineSection(t,n,s))continue;return!0}}return!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isInLineSection",value:function(e,t,n){if(n.getParent()!==e.getParent())return!1;var r=n.getIndex();return r>=t[0]&&r<t[1]?!0:!1}}]),e}(),TaggedLinesSimplifier=function(){function e(){_classCallCheck(this,e),this.inputIndex=new LineSegmentIndex,this.outputIndex=new LineSegmentIndex,this.distanceTolerance=0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"setDistanceTolerance",value:function(e){this.distanceTolerance=e}},{key:"simplify",value:function(e){for(var t=e.iterator();t.hasNext();)this.inputIndex.add(t.next());for(var t=e.iterator();t.hasNext();){var n=new TaggedLineStringSimplifier(this.inputIndex,this.outputIndex);n.setDistanceTolerance(this.distanceTolerance),n.simplify(t.next())}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),TopologyPreservingSimplifier=function(){function e(){_classCallCheck(this,e),this.inputGeom=null,this.lineSimplifier=new TaggedLinesSimplifier,this.linestringMap=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.inputGeom=i}}return _createClass(e,[{key:"getResultGeometry",value:function(){if(this.inputGeom.isEmpty())return this.inputGeom.copy();this.linestringMap=new HashMap,this.inputGeom.apply(new LineStringMapBuilderFilter(this)),this.lineSimplifier.simplify(this.linestringMap.values());var e=new LineStringTransformer(this.linestringMap).transform(this.inputGeom);return e}},{key:"setDistanceTolerance",value:function(e){if(0>e)throw new IllegalArgumentException$1("Tolerance must be non-negative");this.lineSimplifier.setDistanceTolerance(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(t,n){var r=new e(t);return r.setDistanceTolerance(n),r.getResultGeometry()}},{key:"LineStringTransformer",get:function(){return LineStringTransformer}},{key:"LineStringMapBuilderFilter",get:function(){return LineStringMapBuilderFilter}}]),e}(),LineStringTransformer=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.linestringMap=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];e.linestringMap=a}return e}return _inherits(t,e),_createClass(t,[{key:"transformCoordinates",value:function(e,n){if(0===e.size())return null;if(n instanceof LineString){var r=this.linestringMap.get(n);return this.createCoordinateSequence(r.getResultCoordinates())}return _get(Object.getPrototypeOf(t.prototype),"transformCoordinates",this).call(this,e,n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(GeometryTransformer),LineStringMapBuilderFilter=function(){function e(){_classCallCheck(this,e),this.tps=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.tps=i}}return _createClass(e,[{key:"filter",value:function(e){if(e instanceof LineString){var t=e;if(t.isEmpty())return null;var n=t.isClosed()?4:2,r=new TaggedLineString(t,n);this.tps.linestringMap.put(t,r)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryComponentFilter$1]}}]),e}(),GeometryCollectionMapper$1=function(){function e(){_classCallCheck(this,e),this.mapOp=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.mapOp=i}}return _createClass(e,[{key:"map",value:function(e){for(var t=new ArrayList,n=0;n<e.getNumGeometries();n++){var r=this.mapOp.map(e.getGeometryN(n));r.isEmpty()||t.add(r)}return e.getFactory().createGeometryCollection(GeometryFactory.toGeometryArray(t))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"map",value:function(t,n){var r=new e(n);return r.map(t)}}]),e}(),InteriorPointArea$1=function(){function e(){_classCallCheck(this,e),this.factory=null,this.interiorPoint=null,this.maxWidth=0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.factory=i.getFactory(),this.add(i)}}return _createClass(e,[{key:"addPolygon",value:function(t){if(t.isEmpty())return null;var n=null,r=0,i=this.horizontalBisector(t);if(0===i.getLength())r=0,n=i.getCoordinate();else{var a=i.intersection(t),s=this.widestGeometry(a);r=s.getEnvelopeInternal().getWidth(),n=e.centre(s.getEnvelopeInternal())}(null===this.interiorPoint||r>this.maxWidth)&&(this.interiorPoint=n,this.maxWidth=r)}},{key:"getInteriorPoint",value:function(){return this.interiorPoint}},{key:"widestGeometry",value:function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof GeometryCollection){var i=n[0];if(i.isEmpty())return i;for(var e=i.getGeometryN(0),a=1;a<i.getNumGeometries();a++)i.getGeometryN(a).getEnvelopeInternal().getWidth()>e.getEnvelopeInternal().getWidth()&&(e=i.getGeometryN(a));return e}if(n[0]instanceof Geometry){var s=n[0];return s instanceof GeometryCollection?this.widestGeometry(s):s}}}},{key:"horizontalBisector",value:function(e){var t=e.getEnvelopeInternal(),n=SafeBisectorFinder.getBisectorY(e);return this.factory.createLineString([new Coordinate(t.getMinX(),n),new Coordinate(t.getMaxX(),n)])}},{key:"add",value:function(e){if(e instanceof Polygon)this.addPolygon(e);else if(e instanceof GeometryCollection)for(var t=e,n=0;n<t.getNumGeometries();n++)this.add(t.getGeometryN(n))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"centre",value:function(t){return new Coordinate(e.avg(t.getMinX(),t.getMaxX()),e.avg(t.getMinY(),t.getMaxY()))}},{key:"avg",value:function(e,t){return(e+t)/2}},{key:"SafeBisectorFinder",get:function(){return SafeBisectorFinder}}]),e}(),SafeBisectorFinder=function(){function e(){_classCallCheck(this,e),this.poly=null,this.centreY=null,this.hiY=Double.MAX_VALUE,this.loY=-Double.MAX_VALUE;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.poly=i,this.hiY=i.getEnvelopeInternal().getMaxY(),this.loY=i.getEnvelopeInternal().getMinY(),this.centreY=e.avg(this.loY,this.hiY)}}return _createClass(e,[{key:"updateInterval",value:function(e){e<=this.centreY?e>this.loY&&(this.loY=e):e>this.centreY&&e<this.hiY&&(this.hiY=e)}},{key:"getBisectorY",value:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));var n=e.avg(this.hiY,this.loY);return n}},{key:"process",value:function(e){for(var t=e.getCoordinateSequence(),n=0;n<t.size();n++){var r=t.getY(n);this.updateInterval(r)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBisectorY",value:function(t){var n=new e(t);return n.getBisectorY()}}]),e}(),InteriorPointLine$1=function(){function e(){_classCallCheck(this,e),this.centroid=null,this.minDistance=Double.MAX_VALUE,this.interiorPoint=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.centroid=i.getCentroid().getCoordinate(),this.addInterior(i),null===this.interiorPoint&&this.addEndpoints(i)}}return _createClass(e,[{key:"addEndpoints",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof Geometry){var r=t[0];if(r instanceof LineString)this.addEndpoints(r.getCoordinates());else if(r instanceof GeometryCollection)for(var i=r,a=0;a<i.getNumGeometries();a++)this.addEndpoints(i.getGeometryN(a))}else if(t[0]instanceof Array){var s=t[0];this.add(s[0]),this.add(s[s.length-1])}}},{key:"getInteriorPoint",value:function(){return this.interiorPoint}},{key:"addInterior",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof Geometry){var r=t[0];if(r instanceof LineString)this.addInterior(r.getCoordinates());else if(r instanceof GeometryCollection)for(var i=r,a=0;a<i.getNumGeometries();a++)this.addInterior(i.getGeometryN(a))}else if(t[0]instanceof Array)for(var s=t[0],a=1;a<s.length-1;a++)this.add(s[a])}},{key:"add",value:function(e){var t=e.distance(this.centroid);t<this.minDistance&&(this.interiorPoint=new Coordinate(e),this.minDistance=t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),UniqueCoordinateArrayFilter=function(){function e(){_classCallCheck(this,e),this.treeSet=new TreeSet,this.list=new ArrayList;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"filter",value:function(e){this.treeSet.contains(e)||(this.list.add(e),this.treeSet.add(e))}},{key:"getCoordinates",value:function(){var e=new Array(this.list.size());return this.list.toArray(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[CoordinateFilter]}}],[{key:"filterCoordinates",value:function(t){for(var n=new e,r=0;r<t.length;r++)n.filter(t[r]);return n.getCoordinates()}}]),e}(),ConvexHull$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.geomFactory=null,this.inputPts=null;var a=function n(){for(var r=arguments.length,i=Array(r),a=0;r>a;a++)i[a]=arguments[a];if(1===i.length){var s=i[0];n.call(t,e.extractCoordinates(s),s.getFactory())}else if(2===i.length){var o=i[0],u=i[1];t.inputPts=UniqueCoordinateArrayFilter.filterCoordinates(o),t.geomFactory=u}};return a.apply(this,r)}return _createClass(e,[{key:"preSort",value:function(e){for(var t=null,n=1;n<e.length;n++)(e[n].y<e[0].y||e[n].y===e[0].y&&e[n].x<e[0].x)&&(t=e[0],e[0]=e[n],e[n]=t);return Arrays.sort(e,1,e.length,new RadialComparator(e[0])),e}},{key:"computeOctRing",value:function(e){var t=this.computeOctPts(e),n=new CoordinateList;return n.add(t,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())}},{key:"lineOrPolygon",value:function(e){if(e=this.cleanRing(e),3===e.length)return this.geomFactory.createLineString([e[0],e[1]]);var t=this.geomFactory.createLinearRing(e);return this.geomFactory.createPolygon(t,null)}},{key:"cleanRing",value:function(e){Assert.equals(e[0],e[e.length-1]);for(var t=new ArrayList,n=null,r=0;r<=e.length-2;r++){var i=e[r],a=e[r+1];i.equals(a)||null!==n&&this.isBetween(n,i,a)||(t.add(i),n=i)}t.add(e[e.length-1]);var s=new Array(t.size());return t.toArray(s)}},{key:"isBetween",value:function(e,t,n){if(0!==CGAlgorithms.computeOrientation(e,t,n))return!1;if(e.x!==n.x){if(e.x<=t.x&&t.x<=n.x)return!0;if(n.x<=t.x&&t.x<=e.x)return!0}if(e.y!==n.y){if(e.y<=t.y&&t.y<=n.y)return!0;if(n.y<=t.y&&t.y<=e.y)return!0}return!1}},{key:"reduce",value:function(e){var t=this.computeOctRing(e);if(null===t)return e;for(var n=new TreeSet,r=0;r<t.length;r++)n.add(t[r]);for(var r=0;r<e.length;r++)CGAlgorithms.isPointInRing(e[r],t)||n.add(e[r]);var i=CoordinateArrays.toCoordinateArray(n);return i.length<3?this.padArray3(i):i}},{key:"getConvexHull",value:function(){if(0===this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1===this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2===this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var e=this.inputPts;this.inputPts.length>50&&(e=this.reduce(this.inputPts));var t=this.preSort(e),n=this.grahamScan(t),r=this.toCoordinateArray(n);return this.lineOrPolygon(r)}},{key:"padArray3",value:function(e){for(var t=new Array(3),n=0;n<t.length;n++)n<e.length?t[n]=e[n]:t[n]=e[0];return t}},{key:"computeOctPts",value:function(e){for(var t=new Array(8),n=0;n<t.length;n++)t[n]=e[0];for(var r=1;r<e.length;r++)e[r].x<t[0].x&&(t[0]=e[r]),e[r].x-e[r].y<t[1].x-t[1].y&&(t[1]=e[r]),e[r].y>t[2].y&&(t[2]=e[r]),e[r].x+e[r].y>t[3].x+t[3].y&&(t[3]=e[r]),e[r].x>t[4].x&&(t[4]=e[r]),e[r].x-e[r].y>t[5].x-t[5].y&&(t[5]=e[r]),e[r].y<t[6].y&&(t[6]=e[r]),e[r].x+e[r].y<t[7].x+t[7].y&&(t[7]=e[r]);return t}},{key:"toCoordinateArray",value:function(e){for(var t=new Array(e.size()),n=0;n<e.size();n++){var r=e.get(n);t[n]=r}return t}},{key:"grahamScan",value:function(e){var t=null,n=new Stack;t=n.push(e[0]),t=n.push(e[1]),t=n.push(e[2]);for(var r=3;r<e.length;r++){for(t=n.pop();!n.empty()&&CGAlgorithms.computeOrientation(n.peek(),t,e[r])>0;)t=n.pop();t=n.push(t),t=n.push(e[r])}return t=n.push(e[0]),n}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"extractCoordinates",value:function(e){var t=new UniqueCoordinateArrayFilter;return e.apply(t),t.getCoordinates()}},{key:"RadialComparator",get:function(){return RadialComparator}}]),e}(),RadialComparator=function(){function e(){_classCallCheck(this,e),this.origin=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.origin=i}}return _createClass(e,[{key:"compare",value:function(t,n){var r=t,i=n;return e.polarCompare(this.origin,r,i)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparator]}}],[{key:"polarCompare",value:function(e,t,n){var r=t.x-e.x,i=t.y-e.y,a=n.x-e.x,s=n.y-e.y,o=CGAlgorithms.computeOrientation(e,t,n);if(o===CGAlgorithms.COUNTERCLOCKWISE)return 1;if(o===CGAlgorithms.CLOCKWISE)return-1;var u=r*r+i*i,l=a*a+s*s;return l>u?-1:u>l?1:0}}]),e}(),Centroid$1=function(){function e(){_classCallCheck(this,e),this.areaBasePt=null,this.triangleCent3=new Coordinate,this.areasum2=0,this.cg3=new Coordinate,this.lineCentSum=new Coordinate,this.totalLength=0,this.ptCount=0,this.ptCentSum=new Coordinate;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.areaBasePt=null,this.add(i)}}return _createClass(e,[{key:"addPoint",value:function(e){this.ptCount+=1,this.ptCentSum.x+=e.x,this.ptCentSum.y+=e.y}},{key:"setBasePoint",value:function(e){null===this.areaBasePt&&(this.areaBasePt=e)}},{key:"addLineSegments",value:function(e){for(var t=0,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);if(0!==r){t+=r;var i=(e[n].x+e[n+1].x)/2;this.lineCentSum.x+=r*i;var a=(e[n].y+e[n+1].y)/2;this.lineCentSum.y+=r*a}}this.totalLength+=t,0===t&&e.length>0&&this.addPoint(e[0])}},{key:"addHole",value:function(e){for(var t=CGAlgorithms.isCCW(e),n=0;n<e.length-1;n++)this.addTriangle(this.areaBasePt,e[n],e[n+1],t);this.addLineSegments(e)}},{key:"getCentroid",value:function(){var e=new Coordinate;if(Math.abs(this.areasum2)>0)e.x=this.cg3.x/3/this.areasum2,e.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)e.x=this.lineCentSum.x/this.totalLength,e.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;e.x=this.ptCentSum.x/this.ptCount,e.y=this.ptCentSum.y/this.ptCount}return e;
}},{key:"addShell",value:function(e){e.length>0&&this.setBasePoint(e[0]);for(var t=!CGAlgorithms.isCCW(e),n=0;n<e.length-1;n++)this.addTriangle(this.areaBasePt,e[n],e[n+1],t);this.addLineSegments(e)}},{key:"addTriangle",value:function(t,n,r,i){var a=i?1:-1;e.centroid3(t,n,r,this.triangleCent3);var s=e.area2(t,n,r);this.cg3.x+=a*s*this.triangleCent3.x,this.cg3.y+=a*s*this.triangleCent3.y,this.areasum2+=a*s}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof Polygon){var r=t[0];this.addShell(r.getExteriorRing().getCoordinates());for(var i=0;i<r.getNumInteriorRing();i++)this.addHole(r.getInteriorRingN(i).getCoordinates())}else if(t[0]instanceof Geometry){var a=t[0];if(a.isEmpty())return null;if(a instanceof Point)this.addPoint(a.getCoordinate());else if(a instanceof LineString)this.addLineSegments(a.getCoordinates());else if(a instanceof Polygon){var s=a;this.add(s)}else if(a instanceof GeometryCollection)for(var o=a,i=0;i<o.getNumGeometries();i++)this.add(o.getGeometryN(i))}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"area2",value:function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}},{key:"centroid3",value:function(e,t,n,r){return r.x=e.x+t.x+n.x,r.y=e.y+t.y+n.y,null}},{key:"getCentroid",value:function(t){var n=new e(t);return n.getCentroid()}}]),e}(),InteriorPointPoint$1=function(){function e(){_classCallCheck(this,e),this.centroid=null,this.minDistance=Double.MAX_VALUE,this.interiorPoint=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.centroid=i.getCentroid().getCoordinate(),this.add(i)}}return _createClass(e,[{key:"getInteriorPoint",value:function(){return this.interiorPoint}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof Geometry){var r=t[0];if(r instanceof Point)this.add(r.getCoordinate());else if(r instanceof GeometryCollection)for(var i=r,a=0;a<i.getNumGeometries();a++)this.add(i.getGeometryN(a))}else if(t[0]instanceof Coordinate){var s=t[0],o=s.distance(this.centroid);o<this.minDistance&&(this.interiorPoint=new Coordinate(s),this.minDistance=o)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),RectangleContains$1=function(){function e(){_classCallCheck(this,e),this.rectEnv=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.rectEnv=i.getEnvelopeInternal()}}return _createClass(e,[{key:"isContainedInBoundary",value:function(e){if(e instanceof Polygon)return!1;if(e instanceof Point)return this.isPointContainedInBoundary(e);if(e instanceof LineString)return this.isLineStringContainedInBoundary(e);for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);if(!this.isContainedInBoundary(n))return!1}return!0}},{key:"isLineSegmentContainedInBoundary",value:function(e,t){if(e.equals(t))return this.isPointContainedInBoundary(e);if(e.x===t.x){if(e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX())return!0}else if(e.y===t.y&&(e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()))return!0;return!1}},{key:"isLineStringContainedInBoundary",value:function(e){for(var t=e.getCoordinateSequence(),n=new Coordinate,r=new Coordinate,i=0;i<t.size()-1;i++)if(t.getCoordinate(i,n),t.getCoordinate(i+1,r),!this.isLineSegmentContainedInBoundary(n,r))return!1;return!0}},{key:"isPointContainedInBoundary",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(t[0]instanceof Point){var r=t[0];return this.isPointContainedInBoundary(r.getCoordinate())}if(t[0]instanceof Coordinate){var i=t[0];return i.x===this.rectEnv.getMinX()||i.x===this.rectEnv.getMaxX()||i.y===this.rectEnv.getMinY()||i.y===this.rectEnv.getMaxY()}}}},{key:"contains",value:function(e){return this.rectEnv.contains(e.getEnvelopeInternal())?this.isContainedInBoundary(e)?!1:!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"contains",value:function(t,n){var r=new e(t);return r.contains(n)}}]),e}(),RectangleLineIntersector=function(){function e(){_classCallCheck(this,e),this.li=new RobustLineIntersector,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.rectEnv=i,this.diagUp0=new Coordinate(i.getMinX(),i.getMinY()),this.diagUp1=new Coordinate(i.getMaxX(),i.getMaxY()),this.diagDown0=new Coordinate(i.getMinX(),i.getMaxY()),this.diagDown1=new Coordinate(i.getMaxX(),i.getMinY())}}return _createClass(e,[{key:"intersects",value:function(e,t){var n=new Envelope(e,t);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(e))return!0;if(this.rectEnv.intersects(t))return!0;if(e.compareTo(t)>0){var r=e;e=t,t=r}var i=!1;return t.y>e.y&&(i=!0),i?this.li.computeIntersection(e,t,this.diagDown0,this.diagDown1):this.li.computeIntersection(e,t,this.diagUp0,this.diagUp1),this.li.hasIntersection()?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),ShortCircuitedGeometryVisitor=function(){function e(){_classCallCheck(this,e),this._isDone=!1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"applyTo",value:function(e){for(var t=0;t<e.getNumGeometries()&&!this._isDone;t++){var n=e.getGeometryN(t);if(n instanceof GeometryCollection)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),RectangleIntersects$1=function(){function e(){_classCallCheck(this,e),this.rectangle=null,this.rectEnv=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.rectangle=i,this.rectEnv=i.getEnvelopeInternal()}}return _createClass(e,[{key:"intersects",value:function(e){if(!this.rectEnv.intersects(e.getEnvelopeInternal()))return!1;var t=new EnvelopeIntersectsVisitor(this.rectEnv);if(t.applyTo(e),t.intersects())return!0;var n=new GeometryContainsPointVisitor(this.rectangle);if(n.applyTo(e),n.containsPoint())return!0;var r=new RectangleIntersectsSegmentVisitor(this.rectangle);return r.applyTo(e),r.intersects()?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"intersects",value:function(t,n){var r=new e(t);return r.intersects(n)}}]),e}(),EnvelopeIntersectsVisitor=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.rectEnv=null,e._intersects=!1;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];e.rectEnv=a}return e}return _inherits(t,e),_createClass(t,[{key:"isDone",value:function(){return this._intersects===!0}},{key:"visit",value:function(e){var t=e.getEnvelopeInternal();return this.rectEnv.intersects(t)?this.rectEnv.contains(t)?(this._intersects=!0,null):t.getMinX()>=this.rectEnv.getMinX()&&t.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):t.getMinY()>=this.rectEnv.getMinY()&&t.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null}},{key:"intersects",value:function(){return this._intersects}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(ShortCircuitedGeometryVisitor),GeometryContainsPointVisitor=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.rectSeq=null,e.rectEnv=null,e._containsPoint=!1;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];e.rectSeq=a.getExteriorRing().getCoordinateSequence(),e.rectEnv=a.getEnvelopeInternal()}return e}return _inherits(t,e),_createClass(t,[{key:"isDone",value:function(){return this._containsPoint===!0}},{key:"visit",value:function(e){if(!(e instanceof Polygon))return null;var t=e.getEnvelopeInternal();if(!this.rectEnv.intersects(t))return null;for(var n=new Coordinate,r=0;4>r;r++)if(this.rectSeq.getCoordinate(r,n),t.contains(n)&&SimplePointInAreaLocator.containsPointInPolygon(n,e))return this._containsPoint=!0,null}},{key:"containsPoint",value:function(){return this._containsPoint}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(ShortCircuitedGeometryVisitor),RectangleIntersectsSegmentVisitor=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.rectEnv=null,e.rectIntersector=null,e.hasIntersection=!1,e.p0=new Coordinate,e.p1=new Coordinate;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var a=r[0];e.rectEnv=a.getEnvelopeInternal(),e.rectIntersector=new RectangleLineIntersector(e.rectEnv)}return e}return _inherits(t,e),_createClass(t,[{key:"intersects",value:function(){return this.hasIntersection}},{key:"isDone",value:function(){return this.hasIntersection===!0}},{key:"visit",value:function(e){var t=e.getEnvelopeInternal();if(!this.rectEnv.intersects(t))return null;var n=LinearComponentExtracter.getLines(e);this.checkIntersectionWithLineStrings(n)}},{key:"checkIntersectionWithLineStrings",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}}},{key:"checkIntersectionWithSegments",value:function(e){for(var t=e.getCoordinateSequence(),n=1;n<t.size();n++)if(t.getCoordinate(n-1,this.p0),t.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(ShortCircuitedGeometryVisitor);!function(){patch()}();var jsts={version:"1.0.0-rc2 (f82025e)",densify:{Densifier:Densifier},dissolve:{LineDissolver:LineDissolver},geom:{Coordinate:Coordinate,GeometryFactory:GeometryFactory,Geometry:Geometry,Point:Point,LineString:LineString,Polygon:MultiPolygon,GeometryCollection:GeometryCollection,MultiPoint:MultiPoint,MultiLineString:MultiLineString,MultiPolygon:MultiPolygon},io:io,operation:{BoundaryOp:BoundaryOp,IsSimpleOp:IsSimpleOp$1,buffer:{BufferOp:BufferOp$1},distance:{DistanceOp:DistanceOp$1},linemerge:{LineMerger:LineMerger},overlay:{OverlayOp:OverlayOp$1},polygonize:{Polygonizer:Polygonizer},relate:{RelateOp:RelateOp$1},union:{CascadedPolygonUnion:CascadedPolygonUnion,UnaryUnionOp:UnaryUnionOp$1},valid:{IsValidOp:IsValidOp$1}},precision:{GeometryPrecisionReducer:GeometryPrecisionReducer},simplify:{DouglasPeuckerSimplifier:DouglasPeuckerSimplifier,TopologyPreservingSimplifier:TopologyPreservingSimplifier}};module.exports=jsts;
