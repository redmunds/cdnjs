"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iterator(){}function Collection(){}function IndexOutOfBoundsException$1(e){this.message=e||""}function List(){}function NoSuchElementException(e){this.message=e||""}function OperationNotSupported(e){this.message=e||""}function Map$1(){}function SortedMap(){}function Set(){}function HashSet(){this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}function TreeMap(){this.root_=null,this.size_=0}function SortedSet(){}function TreeSet(){this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}function Arrays(){}function HashMap(){this.map_=new Map}function p2c(e){return[e.x,e.y]}function EmptyStackException(e){this.message=e||""}function Stack(){this.array_=[]}function patch(){Geometry.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1},Geometry.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(null===e[t])return!0;return!1};var e={getFactory:function(){return this.factory},getGeometryN:function(e){return this},getArea:function(){return 0},union:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return UnaryUnionOp$1.union(e)}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];if(e.isEmpty()||a.isEmpty()){if(e.isEmpty()&&a.isEmpty())return OverlayOp$1.createEmptyResult(OverlayOp$1.UNION,e,a,e.factory);if(e.isEmpty())return a.copy();if(a.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(a),SnapIfNeededOverlayOp$1.overlayOp(e,a,OverlayOp$1.UNION)}.apply(void 0,n)}};return a.apply(this,n)},isValid:function(){return IsValidOp$1.isValid(this)},intersection:function(e){if(this.isEmpty()||e.isEmpty())return OverlayOp$1.createEmptyResult(OverlayOp$1.INTERSECTION,this,e,this.factory);if(this.isGeometryCollection()){var t=e;return GeometryCollectionMapper$1.map(this,new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"map",value:function(e){return e.intersection(t)}}]),e}()))}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp$1.overlayOp(this,e,OverlayOp$1.INTERSECTION)},intersects:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.isRectangle()?RectangleIntersects$1.intersects(this,e):e.isRectangle()?RectangleIntersects$1.intersects(e,this):this.relate(e).isIntersects():!1},buffer:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return BufferOp$1.bufferOp(e,a)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return BufferOp$1.bufferOp(e,a,i)}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];return BufferOp$1.bufferOp(e,a,i,o)}.apply(void 0,n)}};return a.apply(this,n)},convexHull:function(){return new ConvexHull$1(this).getConvexHull()},relate:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(a),RelateOp$1.relate(e,a)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return e.relate(a).matches(i)}.apply(void 0,n)}};return a.apply(this,n)},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var e=Centroid$1.getCentroid(this);return this.createPointFromInternalCoord(e,this)},isEquivalentClass:function(e){return this.getClass()===e.getClass()},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var e=null,t=this.getDimension();if(0===t){var n=new InteriorPointPoint$1(this);e=n.getInteriorPoint()}else if(1===t){var n=new InteriorPointLine$1(this);e=n.getInteriorPoint()}else{var n=new InteriorPointArea$1(this);e=n.getInteriorPoint()}return this.createPointFromInternalCoord(e,this)},symDifference:function(e){if(this.isEmpty()||e.isEmpty()){if(this.isEmpty()&&e.isEmpty())return OverlayOp$1.createEmptyResult(OverlayOp$1.SYMDIFFERENCE,this,e,this.factory);if(this.isEmpty())return e.copy();if(e.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp$1.overlayOp(this,e,OverlayOp$1.SYMDIFFERENCE)},createPointFromInternalCoord:function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)},disjoint:function(e){return!this.intersects(e)},toText:function(){var e=new WKTWriter$1;return e.write(this)},contains:function(e){return this.getEnvelopeInternal().contains(e.getEnvelopeInternal())?this.isRectangle()?RectangleContains$1.contains(this,e):this.relate(e).isContains():!1},difference:function(e){return this.isEmpty()?OverlayOp$1.createEmptyResult(OverlayOp$1.DIFFERENCE,this,e,this.factory):e.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp$1.overlayOp(this,e,OverlayOp$1.DIFFERENCE))},isSimple:function(){var e=new IsSimpleOp$1(this);return e.isSimple()},isWithinDistance:function(e,t){var n=this.getEnvelopeInternal().distance(e.getEnvelopeInternal());return n>t?!1:DistanceOp$1.isWithinDistance(this,e,t)},distance:function(e){return DistanceOp$1.distance(this,e)}};for(var t in e)Geometry.prototype[t]=e[t]}var _get=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(r)},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),NumberUtil=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"equalsWithTolerance",value:function(e,t,n){return Math.abs(e-t)<=n}}]),e}(),IllegalArgumentException$1=function t(){_classCallCheck(this,t)},Double=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"isNaN",value:function(e){return Number.isNaN(e)}},{key:"doubleToLongBits",value:function(e){return e}},{key:"longBitsToDouble",value:function(e){return e}},{key:"isInfinite",value:function(e){return!Number.isFinite(e)}}]),e}(),Comparable=function n(){_classCallCheck(this,n)},Clonable=function r(){_classCallCheck(this,r)},Comparator=function a(){_classCallCheck(this,a)},Serializable=function i(){_classCallCheck(this,i)},RuntimeException=function o(){_classCallCheck(this,o)},AssertionFailedException=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 0:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n))}.apply(void 0,r);case 1:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,i))}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(RuntimeException),Assert=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"shouldNeverReachHere",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];e.shouldNeverReachHere(null)}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];throw new AssertionFailedException("Should never reach here"+(null!==r?": "+r:""))}.apply(void 0,n)}};return a.apply(this,n)}},{key:"isTrue",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];e.isTrue(a,null)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1];if(!r)throw null===a?new AssertionFailedException:new AssertionFailedException(a)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"equals",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];e.equals(a,i,null)}.apply(void 0,n);case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=t[2];if(!a.equals(r))throw new AssertionFailedException("Expected "+r+" but encountered "+a+(null!==i?": "+i:""))}.apply(void 0,n)}};return a.apply(this,n)}}]),e}(),Coordinate=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.x=null,t.y=null,t.z=null}();var i=function o(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];o.call(t,0,0)}.apply(void 0,r);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];o.call(t,a.x,a.y,a.z)}.apply(void 0,r);case 2:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],s=r[1];o.call(t,i,s,e.NULL_ORDINATE)}.apply(void 0,r);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];t.x=a,t.y=i,t.z=o}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"setOrdinate",value:function(t,n){switch(t){case e.X:this.x=n;break;case e.Y:this.y=n;break;case e.Z:this.z=n;break;default:throw new IllegalArgumentException$1("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.x!==a.x?!1:e.y!==a.y?!1:!0}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return NumberUtil.equalsWithTolerance(e.x,a.x,i)&&NumberUtil.equalsWithTolerance(e.y,a.y,i)?!0:!1}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getOrdinate",value:function(t){switch(t){case e.X:return this.x;case e.Y:return this.y;case e.Z:return this.z}throw new IllegalArgumentException$1("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||Double.isNaN(this.z)&&Double.isNaN(e.z))}},{key:"equals",value:function(t){return t instanceof e?this.equals2D(t):!1}},{key:"equalInZ",value:function(e,t){return NumberUtil.equalsWithTolerance(this.z,e.z,t)}},{key:"compareTo",value:function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}},{key:"clone",value:function(){try{var t=_get(Object.getPrototypeOf(e.prototype),"clone",this).call(this);return t}catch(n){if(n instanceof CloneNotSupportedException)return Assert.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw n}finally{}}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.z+")"}},{key:"distance3D",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return Math.sqrt(t*t+n*n+r*r)}},{key:"distance",value:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}},{key:"hashCode",value:function(){var t=17;return t=37*t+e.hashCode(this.x),t=37*t+e.hashCode(this.y)}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.z}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable,Clonable,Serializable]}}],[{key:"hashCode",value:function(){for(var t,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(1===r.length){var i=r[0],o=Double.doubleToLongBits(i);return Math.trunc(o^o>>>32)}return(t=_get(Object.getPrototypeOf(e),"hashCode",this)).call.apply(t,[this].concat(r))}},{key:"DimensionalComparator",get:function(){return DimensionalComparator}}]),e}(),DimensionalComparator=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.dimensionsToTest=2}();var i=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];o.call(t,2)}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];if(2!==a&&3!==a)throw new IllegalArgumentException$1("only 2 or 3 dimensions may be specified");t.dimensionsToTest=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"compare",value:function(t,n){var r=t,a=n,i=e.compare(r.x,a.x);if(0!==i)return i;var o=e.compare(r.y,a.y);if(0!==o)return o;if(this.dimensionsToTest<=2)return 0;var s=e.compare(r.z,a.z);return s}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparator]}}],[{key:"compare",value:function(e,t){return t>e?-1:e>t?1:Double.isNaN(e)?Double.isNaN(t)?0:-1:Double.isNaN(t)?1:0}}]),e}();Coordinate.serialVersionUID=0x5cbf2c235c7e5800,Coordinate.NULL_ORDINATE=Double.NaN,Coordinate.X=0,Coordinate.Y=1,Coordinate.Z=2;var CoordinateSequence=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"setOrdinate",value:function(e,t,n){}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(e,t){}},{key:"getCoordinate",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0]}.apply(void 0,t);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0],t[1]}.apply(void 0,t)}};return r.apply(this,t)}},{key:"getCoordinateCopy",value:function(e){}},{key:"getDimension",value:function(){}},{key:"getX",value:function(e){}},{key:"clone",value:function(){}},{key:"expandEnvelope",value:function(e){}},{key:"copy",value:function(){}},{key:"getY",value:function(e){}},{key:"toCoordinateArray",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Clonable]}}]),e}();CoordinateSequence.X=0,CoordinateSequence.Y=1,CoordinateSequence.Z=2,CoordinateSequence.M=3;var CoordinateSequenceFactory=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"create",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:if(t[0]instanceof Array)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0]}.apply(void 0,t);if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateSequence)>-1)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0]}.apply(void 0,t);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0],t[1]}.apply(void 0,t)}};return r.apply(this,t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Location=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toLocationSymbol",value:function(t){switch(t){case e.EXTERIOR:return"e";case e.BOUNDARY:return"b";case e.INTERIOR:return"i";case e.NONE:return"-"}throw new IllegalArgumentException$1("Unknown location value: "+t)}}]),e}();Location.INTERIOR=0,Location.BOUNDARY=1,Location.EXTERIOR=2,Location.NONE=-1;var MathUtil=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"log10",value:function(t){var n=Math.log(t);return Double.isInfinite(n)?n:Double.isNaN(n)?n:n/e.LOG_10}},{key:"min",value:function t(e,n,r,a){var t=e;return t>n&&(t=n),t>r&&(t=r),t>a&&(t=a),t}},{key:"clamp",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 3:if("number"==typeof t[2]&&"number"==typeof t[0]&&"number"==typeof t[1])return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=t[2];return a>r?a:r>i?i:r}.apply(void 0,t);if(Number.isInteger(t[2])&&Number.isInteger(t[0])&&Number.isInteger(t[1]))return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=t[2];return a>r?a:r>i?i:r}.apply(void 0,t)}};return r.apply(this,t)}},{key:"wrap",value:function(e,t){return 0>e?t- -e%t:e%t}},{key:"max",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=t[2],o=r;return a>o&&(o=a),i>o&&(o=i),o}.apply(void 0,t);case 4:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=t[2],o=t[3],s=r;return a>s&&(s=a),i>s&&(s=i),o>s&&(s=o),s}.apply(void 0,t)}};return r.apply(this,t)}},{key:"average",value:function(e,t){return(e+t)/2}}]),e}();MathUtil.LOG_10=Math.log(10);var StringBuffer=function(){function e(t){_classCallCheck(this,e),this.str=t}return _createClass(e,[{key:"append",value:function(e){this.str+=e}},{key:"setCharAt",value:function(e,t){return this.str.substr(0,e)+t+this.str.substr(e+1)}},{key:"toString",value:function(){return this.str}}]),e}(),Integer=function(){function e(t){_classCallCheck(this,e),this.value=t}return _createClass(e,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(e){return this.value<e?-1:this.value>e?1:0}}],[{key:"isNaN",value:function(e){return Number.isNaN(e)}}]),e}(),Character=function s(){_classCallCheck(this,s)};Character.isWhitespace=function(e){return 32>=e&&e>=0||127==e},Character.toUpperCase=function(e){return e.toUpperCase()};var DD=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.hi=0,t.lo=0}();var i=function o(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.init(0)}.apply(void 0,r);case 1:if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.init(a)}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.init(a)}.apply(void 0,r);if("string"==typeof r[0])return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];o.call(t,e.parse(i))}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.init(a,i)}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"le",value:function(e){return this.hi<e.hi||this.hi===e.hi&&this.lo<=e.lo}},{key:"extractSignificantDigits",value:function(t,n){var r=this.abs(),a=e.magnitude(r.hi),i=e.TEN.pow(a);r=r.divide(i),r.gt(e.TEN)?(r=r.divide(e.TEN),a+=1):r.lt(e.ONE)&&(r=r.multiply(e.TEN),a-=1);for(var o=a+1,s=new StringBuffer,u=e.MAX_PRINT_DIGITS-1,l=0;u>=l;l++){t&&l===o&&s.append(".");var c=Math.trunc(r.hi);if(0>c)break;var g=!1,h=0;c>9?(g=!0,h="9"):h="0"+c,s.append(h),r=r.subtract(e.valueOf(c)).multiply(e.TEN),g&&r.selfAdd(e.TEN);var f=!0,y=e.magnitude(r.hi);if(0>y&&Math.abs(y)>=u-l&&(f=!1),!f)break}return n[0]=a,s.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this.hi+this.lo}},{key:"subtract",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.add(a.negate())}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.add(-a)}.apply(void 0,r)}};return i.apply(this,r)}},{key:"equals",value:function(){for(var t,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(1===r.length){var i=r[0];return this.hi===i.hi&&this.lo===i.lo}return(t=_get(Object.getPrototypeOf(e.prototype),"equals",this)).call.apply(t,[this].concat(r))}},{key:"isZero",value:function(){return 0===this.hi&&0===this.lo}},{key:"selfSubtract",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.isNaN()?t:t.selfAdd(-a.hi,-a.lo)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.isNaN()?t:t.selfAdd(-a,0)}.apply(void 0,r)}};return i.apply(this,r)}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(e){return this.le(e)?this:e}},{key:"selfDivide",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.selfDivide(a.hi,a.lo)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.selfDivide(a,0)}.apply(void 0,r);case 2:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=null,u=null,l=null,c=null,g=null,h=null,f=null,y=null;return g=t.hi/i,h=e.SPLIT*g,s=h-g,y=e.SPLIT*i,s=h-s,u=g-s,l=y-i,f=g*i,l=y-l,c=i-l,y=s*l-f+s*c+u*l+u*c,h=(t.hi-f-y+t.lo-g*o)/i,y=g+h,t.hi=y,t.lo=g-y+h,t}.apply(void 0,r)}};return i.apply(this,r)}},{key:"dump",value:function(){return"DD<"+this.hi+", "+this.lo+">"}},{key:"divide",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],o=null,s=null,u=null,l=null,c=null,g=null,h=null,f=null;c=t.hi/i.hi,g=e.SPLIT*c,o=g-c,f=e.SPLIT*i.hi,o=g-o,s=c-o,u=f-i.hi,h=c*i.hi,u=f-u,l=i.hi-u,f=o*u-h+o*l+s*u+s*l,g=(t.hi-h-f+t.lo-c*i.lo)/i.hi,f=c+g;var y=f,v=c-f+g;return new e(y,v)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];return Double.isNaN(i)?e.createNaN():e.copy(t).selfDivide(i,0)}.apply(void 0,r)}};return i.apply(this,r)}},{key:"ge",value:function(e){return this.hi>e.hi||this.hi===e.hi&&this.lo>=e.lo}},{key:"pow",value:function(t){if(0===t)return e.valueOf(1);var n=new e(this),r=e.valueOf(1),a=Math.abs(t);if(a>1)for(;a>0;)a%2===1&&r.selfMultiply(n),a/=2,a>0&&(n=n.sqr());else r=n;return 0>t?r.reciprocal():r}},{key:"ceil",value:function(){if(this.isNaN())return e.NaN;var t=Math.ceil(this.hi),n=0;return t===this.hi&&(n=Math.ceil(this.lo)),new e(t,n)}},{key:"compareTo",value:function(e){var t=e;return this.hi<t.hi?-1:this.hi>t.hi?1:this.lo<t.lo?-1:this.lo>t.lo?1:0}},{key:"rint",value:function(){if(this.isNaN())return this;var e=this.add(.5);return e.floor()}},{key:"setValue",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.init(a),t}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.init(a),t}.apply(void 0,r)}};return i.apply(this,r)}},{key:"max",value:function(e){return this.ge(e)?this:e}},{key:"sqrt",value:function(){if(this.isZero())return e.valueOf(0);if(this.isNegative())return e.NaN;var t=1/Math.sqrt(this.hi),n=this.hi*t,r=e.valueOf(n),a=this.subtract(r.sqr()),i=a.hi*(.5*t);return r.add(i)}},{key:"selfAdd",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.selfAdd(a.hi,a.lo)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=null,o=null,s=null,u=null,l=null,c=null;return s=t.hi+a,l=s-t.hi,u=s-l,u=a-l+(t.hi-u),c=u+t.lo,i=s+c,o=c+(s-i),t.hi=i+o,t.lo=o+(i-t.hi),t}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=null,s=null,u=null,l=null,c=null,g=null,h=null,f=null;c=t.hi+a,u=t.lo+i,h=c-t.hi,f=u-t.lo,g=c-h,l=u-f,g=a-h+(t.hi-g),l=i-f+(t.lo-l),h=g+u,o=c+h,s=h+(c-o),h=l+s;var y=o+h,v=h+(o-y);return t.hi=y,t.lo=v,t}.apply(void 0,r)}};return i.apply(this,r)}},{key:"selfMultiply",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.selfMultiply(a.hi,a.lo)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.selfMultiply(a,0)}.apply(void 0,r);case 2:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=null,u=null,l=null,c=null,g=null,h=null;g=e.SPLIT*t.hi,s=g-t.hi,h=e.SPLIT*i,s=g-s,u=t.hi-s,l=h-i,g=t.hi*i,l=h-l,c=i-l,h=s*l-g+s*c+u*l+u*c+(t.hi*o+t.lo*i);var f=g+h;s=g-f;var y=h+s;return t.hi=f,t.lo=y,t}.apply(void 0,r)}};return i.apply(this,r)}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return e.NaN;var t=Math.floor(this.hi),n=0;return t===this.hi&&(n=Math.floor(this.lo)),new e(t,n)}},{key:"negate",value:function(){return this.isNaN()?this:new e(-this.hi,-this.lo)}},{key:"clone",value:function(){try{return _get(Object.getPrototypeOf(e.prototype),"clone",this).call(this)}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}finally{}}},{key:"multiply",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];return i.isNaN()?e.createNaN():e.copy(t).selfMultiply(i)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];return Double.isNaN(i)?e.createNaN():e.copy(t).selfMultiply(i,0)}.apply(void 0,r)}};return i.apply(this,r)}},{key:"isNaN",value:function(){return Double.isNaN(this.hi)}},{key:"intValue",value:function(){return Math.trunc(this.hi)}},{key:"toString",value:function(){var t=e.magnitude(this.hi);return t>=-3&&20>=t?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1),r=this.extractSignificantDigits(!0,n),a=n[0]+1,i=r;if("."===r.charAt(0))i="0"+r;else if(0>a)i="0."+e.stringOfChar("0",-a)+r;else if(-1===r.indexOf(".")){var o=a-r.length,s=e.stringOfChar("0",o);i=r+s+".0"}return this.isNegative()?"-"+i:i}},{key:"reciprocal",value:function(){var t=null,n=null,r=null,a=null,i=null,o=null,s=null,u=null;i=1/this.hi,o=e.SPLIT*i,t=o-i,u=e.SPLIT*this.hi,t=o-t,n=i-t,r=u-this.hi,s=i*this.hi,r=u-r,a=this.hi-r,u=t*r-s+t*a+n*r+n*a,o=(1-s-u-i*this.lo)/this.hi;var l=i+o,c=i-l+o;return new e(l,c)}},{key:"toSciNotation",value:function(){if(this.isZero())return e.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1),r=this.extractSignificantDigits(!1,n),a=e.SCI_NOT_EXPONENT_CHAR+n[0];if("0"===r.charAt(0))throw new IllegalStateException("Found leading zero: "+r);var i="";r.length>1&&(i=r.substring(1));var o=r.charAt(0)+"."+i;return this.isNegative()?"-"+o+a:o+a}},{key:"abs",value:function(){return this.isNaN()?e.NaN:this.isNegative()?this.negate():new e(this)}},{key:"isPositive",value:function(){return this.hi>0||0===this.hi&&this.lo>0}},{key:"lt",value:function(e){
return this.hi<e.hi||this.hi===e.hi&&this.lo<e.lo}},{key:"add",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];return e.copy(t).selfAdd(i)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];return e.copy(t).selfAdd(i)}.apply(void 0,r)}};return i.apply(this,r)}},{key:"init",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.hi=a,t.lo=0}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.hi=a.hi,t.lo=a.lo}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.hi=a,t.lo=i}.apply(void 0,r)}};return i.apply(this,r)}},{key:"gt",value:function(e){return this.hi>e.hi||this.hi===e.hi&&this.lo>e.lo}},{key:"isNegative",value:function(){return this.hi<0||0===this.hi&&this.lo<0}},{key:"trunc",value:function(){return this.isNaN()?e.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Serializable,Comparable,Clonable]}}],[{key:"sqr",value:function(t){return e.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if("string"==typeof n[0])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.parse(a)}.apply(void 0,n);if("number"==typeof n[0])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return new e(a)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"sqrt",value:function(t){return e.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var n=0,r=t.length;Character.isWhitespace(t.charAt(n));)n++;var a=!1;if(r>n){var i=t.charAt(n);("-"===i||"+"===i)&&(n++,"-"===i&&(a=!0))}for(var o=new e,s=0,u=0,l=0;;){if(n>=r)break;var c=t.charAt(n);if(n++,Character.isDigit(c)){var g=c-"0";o.selfMultiply(e.TEN),o.selfAdd(g),s++}else{if("."!==c){if("e"===c||"E"===c){var h=t.substring(n);try{l=Integer.parseInt(h)}catch(f){throw f instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+h+" in string "+t):f}finally{}break}throw new NumberFormatException("Unexpected character '"+c+"' at position "+n+" in string "+t)}u=s}}var y=o,v=s-u-l;if(0===v)y=o;else if(v>0){var m=e.TEN.pow(v);y=o.divide(m)}else if(0>v){var m=e.TEN.pow(-v);y=o.multiply(m)}return a?y.negate():y}},{key:"createNaN",value:function(){return new e(Double.NaN,Double.NaN)}},{key:"copy",value:function(t){return new e(t)}},{key:"magnitude",value:function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),r=Math.trunc(Math.floor(n)),a=Math.pow(10,r);return t>=10*a&&(r+=1),r}},{key:"stringOfChar",value:function(e,t){for(var n=new StringBuffer,r=0;t>r;r++)n.append(e);return n.toString()}}]),e}();DD.PI=new DD(3.141592653589793,1.2246467991473532e-16),DD.TWO_PI=new DD(6.283185307179586,2.4492935982947064e-16),DD.PI_2=new DD(1.5707963267948966,6.123233995736766e-17),DD.E=new DD(2.718281828459045,1.4456468917292502e-16),DD.NaN=new DD(Double.NaN,Double.NaN),DD.EPS=1.23259516440783e-32,DD.SPLIT=134217729,DD.MAX_PRINT_DIGITS=32,DD.TEN=DD.valueOf(10),DD.ONE=DD.valueOf(1),DD.SCI_NOT_EXPONENT_CHAR="E",DD.SCI_NOT_ZERO="0.0E0";var CGAlgorithmsDD=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"orientationIndex",value:function(t,n,r){var a=e.orientationIndexFilter(t,n,r);if(1>=a)return a;var i=DD.valueOf(n.x).selfAdd(-t.x),o=DD.valueOf(n.y).selfAdd(-t.y),s=DD.valueOf(r.x).selfAdd(-n.x),u=DD.valueOf(r.y).selfAdd(-n.y);return i.selfMultiply(u).selfSubtract(o.selfMultiply(s)).signum()}},{key:"signOfDet2x2",value:function(e,t,n,r){var a=e.multiply(r).selfSubtract(t.multiply(n));return a.signum()}},{key:"intersection",value:function(e,t,n,r){var a=DD.valueOf(r.y).selfSubtract(n.y).selfMultiply(DD.valueOf(t.x).selfSubtract(e.x)),i=DD.valueOf(r.x).selfSubtract(n.x).selfMultiply(DD.valueOf(t.y).selfSubtract(e.y)),o=a.subtract(i),s=DD.valueOf(r.x).selfSubtract(n.x).selfMultiply(DD.valueOf(e.y).selfSubtract(n.y)),u=DD.valueOf(r.y).selfSubtract(n.y).selfMultiply(DD.valueOf(e.x).selfSubtract(n.x)),l=s.subtract(u),c=l.selfDivide(o).doubleValue(),g=DD.valueOf(e.x).selfAdd(DD.valueOf(t.x).selfSubtract(e.x).selfMultiply(c)).doubleValue(),h=DD.valueOf(t.x).selfSubtract(e.x).selfMultiply(DD.valueOf(e.y).selfSubtract(n.y)),f=DD.valueOf(t.y).selfSubtract(e.y).selfMultiply(DD.valueOf(e.x).selfSubtract(n.x)),y=h.subtract(f),v=y.selfDivide(o).doubleValue(),m=DD.valueOf(n.y).selfAdd(DD.valueOf(r.y).selfSubtract(n.y).selfMultiply(v)).doubleValue();return new Coordinate(g,m)}},{key:"orientationIndexFilter",value:function(t,n,r){var a=null,i=(t.x-r.x)*(n.y-r.y),o=(t.y-r.y)*(n.x-r.x),s=i-o;if(i>0){if(0>=o)return e.signum(s);a=i+o}else{if(!(0>i))return e.signum(s);if(o>=0)return e.signum(s);a=-i-o}var u=e.DP_SAFE_EPSILON*a;return s>=u||-s>=u?e.signum(s):2}},{key:"signum",value:function(e){return e>0?1:0>e?-1:0}}]),e}();CGAlgorithmsDD.DP_SAFE_EPSILON=1e-15;var Exception=function u(){_classCallCheck(this,u)},NotRepresentableException=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 0:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,"Projective point not representable on the Cartesian plane."))}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Exception),System=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"arraycopy",value:function(e,t,n,r,a){for(var i=0,o=t;t+a>o;o++)n[r+i]=e[o],i++}},{key:"getProperty",value:function(e){return{"line.separator":"\n"}[e]}}]),e}(),HCoordinate=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.x=null,t.y=null,t.w=null}();var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.x=0,t.y=0,t.w=1}.apply(void 0,r);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.x=a.x,t.y=a.y,t.w=1}.apply(void 0,r);case 2:if("number"==typeof r[0]&&"number"==typeof r[1])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.x=a,t.y=i,t.w=1}.apply(void 0,r);if(r[0]instanceof e&&r[1]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.x=a.y*i.w-i.y*a.w,t.y=i.x*a.w-a.x*i.w,t.w=a.x*i.y-i.x*a.y}.apply(void 0,r);if(r[0]instanceof Coordinate&&r[1]instanceof Coordinate)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.x=a.y-i.y,t.y=i.x-a.x,t.w=a.x*i.y-i.x*a.y}.apply(void 0,r);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];t.x=a,t.y=i,t.w=o}.apply(void 0,r);case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=n[3],u=a.y-i.y,l=i.x-a.x,c=a.x*i.y-i.x*a.y,g=o.y-s.y,h=s.x-o.x,f=o.x*s.y-s.x*o.y;t.x=l*f-h*c,t.y=g*c-u*f,t.w=u*h-g*l}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"getY",value:function(){var e=this.y/this.w;if(Double.isNaN(e)||Double.isInfinite(e))throw new NotRepresentableException;return e}},{key:"getX",value:function(){var e=this.x/this.w;if(Double.isNaN(e)||Double.isInfinite(e))throw new NotRepresentableException;return e}},{key:"getCoordinate",value:function(){var e=new Coordinate;return e.x=this.getX(),e.y=this.getY(),e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"intersection",value:function(e,t,n,r){var a=e.y-t.y,i=t.x-e.x,o=e.x*t.y-t.x*e.y,s=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=i*l-u*o,g=s*o-a*l,h=a*u-s*i,f=c/h,y=g/h;if(Double.isNaN(f)||Double.isInfinite(f)||Double.isNaN(y)||Double.isInfinite(y))throw new NotRepresentableException;return new Coordinate(f,y)}}]),e}(),Envelope=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.minx=null,t.maxx=null,t.miny=null,t.maxy=null}();var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.init()}.apply(void 0,r);case 1:if(r[0]instanceof Coordinate)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.init(a.x,a.x,a.y,a.y)}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.init(a)}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.init(a.x,i.x,a.y,i.y)}.apply(void 0,r);case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=n[3];t.init(a,i,o,s)}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.isNull()?n.isNull():this.maxx===n.getMaxX()&&this.maxy===n.getMaxY()&&this.minx===n.getMinX()&&this.miny===n.getMinY()}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new e;var n=this.minx>t.minx?this.minx:t.minx,r=this.miny>t.miny?this.miny:t.miny,a=this.maxx<t.maxx?this.maxx:t.maxx,i=this.maxy<t.maxy?this.maxy:t.maxy;return new e(n,a,r,i)}},{key:"isNull",value:function(){return this.maxx<this.minx}},{key:"getMaxX",value:function(){return this.maxx}},{key:"covers",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof Coordinate)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.covers(a.x,a.y)}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.isNull()||a.isNull()?!1:a.getMinX()>=t.minx&&a.getMaxX()<=t.maxx&&a.getMinY()>=t.miny&&a.getMaxY()<=t.maxy}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return t.isNull()?!1:a>=t.minx&&a<=t.maxx&&i>=t.miny&&i<=t.maxy}.apply(void 0,r)}};return i.apply(this,r)}},{key:"intersects",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.isNull()||a.isNull()?!1:!(a.minx>t.maxx||a.maxx<t.minx||a.miny>t.maxy||a.maxy<t.miny)}.apply(void 0,r);if(r[0]instanceof Coordinate)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.intersects(a.x,a.y)}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return t.isNull()?!1:!(a>t.maxx||a<t.minx||i>t.maxy||i<t.miny)}.apply(void 0,r)}};return i.apply(this,r)}},{key:"getMinY",value:function(){return this.miny}},{key:"getMinX",value:function(){return this.minx}},{key:"expandToInclude",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof Coordinate)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.expandToInclude(a.x,a.y)}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return a.isNull()?null:void(t.isNull()?(t.minx=a.getMinX(),t.maxx=a.getMaxX(),t.miny=a.getMinY(),t.maxy=a.getMaxY()):(a.minx<t.minx&&(t.minx=a.minx),a.maxx>t.maxx&&(t.maxx=a.maxx),a.miny<t.miny&&(t.miny=a.miny),a.maxy>t.maxy&&(t.maxy=a.maxy)))}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.isNull()?(t.minx=a,t.maxx=a,t.miny=i,t.maxy=i):(a<t.minx&&(t.minx=a),a>t.maxx&&(t.maxx=a),i<t.miny&&(t.miny=i),i>t.maxy&&(t.maxy=i))}.apply(void 0,r)}};return i.apply(this,r)}},{key:"minExtent",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return t>e?e:t}},{key:"getWidth",value:function(){return this.isNull()?0:this.maxx-this.minx}},{key:"compareTo",value:function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this.minx<t.minx?-1:this.minx>t.minx?1:this.miny<t.miny?-1:this.miny>t.miny?1:this.maxx<t.maxx?-1:this.maxx>t.maxx?1:this.maxy<t.maxy?-1:this.maxy>t.maxy?1:0}},{key:"translate",value:function(e,t){return this.isNull()?null:void this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)}},{key:"toString",value:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"}},{key:"setToNull",value:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1}},{key:"getHeight",value:function(){return this.isNull()?0:this.maxy-this.miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t}},{key:"expandBy",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];e.expandBy(a,a)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return e.isNull()?null:(e.minx-=a,e.maxx+=a,e.miny-=i,e.maxy+=i,void((e.minx>e.maxx||e.miny>e.maxy)&&e.setToNull()))}.apply(void 0,n)}};return a.apply(this,n)}},{key:"contains",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.covers(a)}.apply(void 0,r);if(r[0]instanceof Coordinate)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.covers(a)}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return t.covers(a,i)}.apply(void 0,r)}};return i.apply(this,r)}},{key:"centre",value:function(){return this.isNull()?null:new Coordinate((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.setToNull()}.apply(void 0,r);case 1:if(r[0]instanceof Coordinate)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.init(a.x,a.x,a.y,a.y)}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.minx=a.minx,t.maxx=a.maxx,t.miny=a.miny,t.maxy=a.maxy}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.init(a.x,i.x,a.y,i.y)}.apply(void 0,r);case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=n[3];i>a?(t.minx=a,t.maxx=i):(t.minx=i,t.maxx=a),s>o?(t.miny=o,t.maxy=s):(t.miny=s,t.maxy=o)}.apply(void 0,r)}};return i.apply(this,r)}},{key:"getMaxY",value:function(){return this.maxy}},{key:"distance",value:function(e){if(this.intersects(e))return 0;var t=0;this.maxx<e.minx?t=e.minx-this.maxx:this.minx>e.maxx&&(t=this.minx-e.maxx);var n=0;return this.maxy<e.miny?n=e.miny-this.maxy:this.miny>e.maxy&&(n=this.miny-e.maxy),0===t?n:0===n?t:Math.sqrt(t*t+n*n)}},{key:"hashCode",value:function(){var e=17;return e=37*e+Coordinate.hashCode(this.minx),e=37*e+Coordinate.hashCode(this.maxx),e=37*e+Coordinate.hashCode(this.miny),e=37*e+Coordinate.hashCode(this.maxy)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable,Serializable]}}],[{key:"intersects",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=t[2];return i.x>=(r.x<a.x?r.x:a.x)&&i.x<=(r.x>a.x?r.x:a.x)&&i.y>=(r.y<a.y?r.y:a.y)&&i.y<=(r.y>a.y?r.y:a.y)?!0:!1}.apply(void 0,t);case 4:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=t[2],o=t[3],s=Math.min(i.x,o.x),u=Math.max(i.x,o.x),l=Math.min(r.x,a.x),c=Math.max(r.x,a.x);return l>u?!1:s>c?!1:(s=Math.min(i.y,o.y),u=Math.max(i.y,o.y),l=Math.min(r.y,a.y),c=Math.max(r.y,a.y),l>u?!1:s>c?!1:!0)}.apply(void 0,t)}};return r.apply(this,t)}}]),e}();Envelope.serialVersionUID=0x51845cd552189800;var WKTParser=function(){function e(t){_classCallCheck(this,e),this.geometryFactory=t||new GeometryFactory,this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/}}return _createClass(e,[{key:"read",value:function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var a=this.regExes.typeStr.exec(e);if(-1!==e.search("EMPTY")&&(a=this.regExes.emptyTypeStr.exec(e),a[2]=void 0),a&&(n=a[1].toLowerCase(),r=a[2],this.parse[n]&&(t=this.parse[n].apply(this,[r]))),void 0===t)throw new Error("Could not parse WKT "+e);return t}},{key:"write",value:function(e){return this.extractGeometry(e)}},{key:"extractGeometry",value:function(e){var t=e.getGeometryType().toLowerCase();if(!this.extract[t])return null;var n,r=t.toUpperCase();return n=e.isEmpty()?r+" EMPTY":r+"("+this.extract[t].apply(this,[e])+")"}},{key:"extract",get:function(){return{coordinate:function(e){return e.x+" "+e.y},point:function(e){return this.extract.coordinate.call(this,e.coordinates.coordinates[0])},multipoint:function(e){for(var t=[],n=0,r=e.geometries.length;r>n;++n)t.push("("+this.extract.point.apply(this,[e.geometries[n]])+")");return t.join(",")},linestring:function(e){for(var t=[],n=0,r=e.points.coordinates.length;r>n;++n)t.push(this.extract.coordinate.apply(this,[e.points.coordinates[n]]));return t.join(",")},linearring:function(e){for(var t=[],n=0,r=e.points.coordinates.length;r>n;++n)t.push(this.extract.coordinate.apply(this,[e.points.coordinates[n]]));return t.join(",")},multilinestring:function(e){for(var t=[],n=0,r=e.geometries.length;r>n;++n)t.push("("+this.extract.linestring.apply(this,[e.geometries[n]])+")");return t.join(",")},polygon:function(e){var t=[];t.push("("+this.extract.linestring.apply(this,[e.shell])+")");for(var n=0,r=e.holes.length;r>n;++n)t.push("("+this.extract.linestring.apply(this,[e.holes[n]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],n=0,r=e.geometries.length;r>n;++n)t.push("("+this.extract.polygon.apply(this,[e.geometries[n]])+")");return t.join(",")},geometrycollection:function(e){for(var t=[],n=0,r=e.geometries.length;r>n;++n)t.push(this.extractGeometry.apply(this,[e.geometries[n]]));return t.join(",")}}}},{key:"parse",get:function(){return{point:function(e){if(void 0===e)return this.geometryFactory.createPoint();var t=e.trim().split(this.regExes.spaces);return this.geometryFactory.createPoint(new Coordinate(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){if(void 0===e)return this.geometryFactory.createMultiPoint();for(var t,n=e.trim().split(","),r=[],a=0,i=n.length;i>a;++a)t=n[a].replace(this.regExes.trimParens,"$1"),r.push(this.parse.point.apply(this,[t]));return this.geometryFactory.createMultiPoint(r)},linestring:function(e){if(void 0===e)return this.geometryFactory.createLineString();for(var t,n=e.trim().split(","),r=[],a=0,i=n.length;i>a;++a)t=n[a].trim().split(this.regExes.spaces),r.push(new Coordinate(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLineString(r)},linearring:function(e){if(void 0===e)return this.geometryFactory.createLinearRing();for(var t,n=e.trim().split(","),r=[],a=0,i=n.length;i>a;++a)t=n[a].trim().split(this.regExes.spaces),r.push(new Coordinate(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(e){if(void 0===e)return this.geometryFactory.createMultiLineString();for(var t,n=e.trim().split(this.regExes.parenComma),r=[],a=0,i=n.length;i>a;++a)t=n[a].replace(this.regExes.trimParens,"$1"),r.push(this.parse.linestring.apply(this,[t]));return this.geometryFactory.createMultiLineString(r)},polygon:function(e){if(void 0===e)return this.geometryFactory.createPolygon();for(var t,n,r,a,i=e.trim().split(this.regExes.parenComma),o=[],s=0,u=i.length;u>s;++s)t=i[s].replace(this.regExes.trimParens,"$1"),n=this.parse.linestring.apply(this,[t]),r=this.geometryFactory.createLinearRing(n.points),0===s?a=r:o.push(r);return this.geometryFactory.createPolygon(a,o)},multipolygon:function(e){if(void 0===e)return this.geometryFactory.createMultiPolygon();for(var t,n=e.trim().split(this.regExes.doubleParenComma),r=[],a=0,i=n.length;i>a;++a)t=n[a].replace(this.regExes.trimParens,"$1"),r.push(this.parse.polygon.apply(this,[t]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var n=t.trim().split("|"),r=[],a=0,i=n.length;i>a;++a)r.push(e.prototype.read.apply(this,[n[a]]));return this.geometryFactory.createGeometryCollection(r)}}}}]),e}(),WKTWriter$1=function(){function e(t){_classCallCheck(this,e),this.parser=new WKTParser(t)}return _createClass(e,[{key:"write",value:function(e){return this.parser.write(e)}},{key:"toLineString",value:function(e,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"}}]),e}(),LineIntersector=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.result=null,t.inputLines=Array(2).fill().map(function(){return Array(2)}),t.intPt=new Array(2),t.intLineIndex=null,t._isProper=null,t.pa=null,t.pb=null,t.precisionModel=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.intPt[0]=new Coordinate,t.intPt[1]=new Coordinate,t.pa=t.intPt[0],t.pb=t.intPt[1],t.result=0}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getIndexAlongSegment",value:function(e,t){return this.computeIntLineIndex(),this.intLineIndex[e][t]}},{key:"getTopologySummary",value:function(){var e=new StringBuffer;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()}},{key:"computeIntersection",value:function(e,t,n,r){this.inputLines[0][0]=e,this.inputLines[0][1]=t,this.inputLines[1][0]=n,this.inputLines[1][1]=r,this.result=this.computeIntersect(e,t,n,r)}},{key:"getIntersectionNum",value:function(){return this.result}},{key:"computeIntLineIndex",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];null===e.intLineIndex&&(e.intLineIndex=Array(2).fill().map(function(){return Array(2)}),e.computeIntLineIndex(0),e.computeIntLineIndex(1))}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=e.getEdgeDistance(a,0),o=e.getEdgeDistance(a,1);i>o?(e.intLineIndex[a][0]=0,e.intLineIndex[a][1]=1):(e.intLineIndex[a][0]=1,e.intLineIndex[a][1]=0)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(e){this.precisionModel=e}},{key:"isInteriorIntersection",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.isInteriorIntersection(0)?!0:e.isInteriorIntersection(1)?!0:!1}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=0;i<e.result;i++)if(!e.intPt[i].equals2D(e.inputLines[a][0])&&!e.intPt[i].equals2D(e.inputLines[a][1]))return!0;return!1}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getIntersection",value:function(e){return this.intPt[e]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this.result!==e.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,n){var r=e.computeEdgeDistance(this.intPt[n],this.inputLines[t][0],this.inputLines[t][1]);return r}},{key:"isCollinear",value:function(){return this.result===e.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return WKTWriter$1.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+WKTWriter$1.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(e,t){return this.inputLines[e][t]}},{key:"isIntersection",value:function(e){for(var t=0;t<this.result;t++)if(this.intPt[t].equals2D(e))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(e,t){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[e][t]]}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeEdgeDistance",value:function(e,t,n){var r=Math.abs(n.x-t.x),a=Math.abs(n.y-t.y),i=-1;if(e.equals(t))i=0;else if(e.equals(n))i=r>a?r:a;else{var o=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);i=r>a?o:s,0!==i||e.equals(t)||(i=Math.max(o,s))}return Assert.isTrue(!(0===i&&!e.equals(t)),"Bad distance calculation"),i}},{key:"nonRobustComputeEdgeDistance",value:function(e,t,n){var r=e.x-t.x,a=e.y-t.y,i=Math.sqrt(r*r+a*a);return Assert.isTrue(!(0===i&&!e.equals(t)),"Invalid distance calculation"),i}}]),e}();LineIntersector.DONT_INTERSECT=0,LineIntersector.DO_INTERSECT=1,LineIntersector.COLLINEAR=2,LineIntersector.NO_INTERSECTION=0,LineIntersector.POINT_INTERSECTION=1,LineIntersector.COLLINEAR_INTERSECTION=2;var RobustLineIntersector=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),o=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"isInSegmentEnvelopes",value:function(e){var t=new Envelope(this.inputLines[0][0],this.inputLines[0][1]),n=new Envelope(this.inputLines[1][0],this.inputLines[1][1]);return t.contains(e)&&n.contains(e)}},{key:"computeIntersection",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(3!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"computeIntersection",this)).call.apply(e,[this].concat(r));var i=r[0],o=r[1],s=r[2];return this._isProper=!1,Envelope.intersects(o,s,i)&&0===CGAlgorithms.orientationIndex(o,s,i)&&0===CGAlgorithms.orientationIndex(s,o,i)?(this._isProper=!0,(i.equals(o)||i.equals(s))&&(this._isProper=!1),this.result=LineIntersector.POINT_INTERSECTION,null):void(this.result=LineIntersector.NO_INTERSECTION)}},{key:"normalizeToMinimum",value:function(e,t,n,r,a){a.x=this.smallestInAbsValue(e.x,t.x,n.x,r.x),a.y=this.smallestInAbsValue(e.y,t.y,n.y,r.y),e.x-=a.x,e.y-=a.y,t.x-=a.x,t.y-=a.y,n.x-=a.x,n.y-=a.y,r.x-=a.x,r.y-=a.y}},{key:"safeHCoordinateIntersection",value:function(e,n,r,a){var i=null;try{i=HCoordinate.intersection(e,n,r,a)}catch(o){if(!(o instanceof NotRepresentableException))throw o;i=t.nearestEndpoint(e,n,r,a)}finally{}return i}},{key:"intersection",value:function(e,n,r,a){var i=this.intersectionWithNormalization(e,n,r,a);return this.isInSegmentEnvelopes(i)||(i=new Coordinate(t.nearestEndpoint(e,n,r,a))),null!==this.precisionModel&&this.precisionModel.makePrecise(i),i}},{key:"smallestInAbsValue",value:function(e,t,n,r){var a=e,i=Math.abs(a);return Math.abs(t)<i&&(a=t,i=Math.abs(t)),Math.abs(n)<i&&(a=n,i=Math.abs(n)),Math.abs(r)<i&&(a=r),a}},{key:"checkDD",value:function(e,t,n,r,a){var i=CGAlgorithmsDD.intersection(e,t,n,r),o=this.isInSegmentEnvelopes(i);System.out.println("DD in env = "+o+"  --------------------- "+i),a.distance(i)>1e-4&&System.out.println("Distance = "+a.distance(i))}},{key:"intersectionWithNormalization",value:function(e,t,n,r){var a=new Coordinate(e),i=new Coordinate(t),o=new Coordinate(n),s=new Coordinate(r),u=new Coordinate;this.normalizeToEnvCentre(a,i,o,s,u);var l=this.safeHCoordinateIntersection(a,i,o,s);return l.x+=u.x,l.y+=u.y,l}},{key:"computeCollinearIntersection",value:function(e,t,n,r){var a=Envelope.intersects(e,t,n),i=Envelope.intersects(e,t,r),o=Envelope.intersects(n,r,e),s=Envelope.intersects(n,r,t);return a&&i?(this.intPt[0]=n,this.intPt[1]=r,LineIntersector.COLLINEAR_INTERSECTION):o&&s?(this.intPt[0]=e,this.intPt[1]=t,LineIntersector.COLLINEAR_INTERSECTION):a&&o?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||i||s?LineIntersector.COLLINEAR_INTERSECTION:LineIntersector.POINT_INTERSECTION):a&&s?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||i||o?LineIntersector.COLLINEAR_INTERSECTION:LineIntersector.POINT_INTERSECTION):i&&o?(this.intPt[0]=r,
this.intPt[1]=e,!r.equals(e)||a||s?LineIntersector.COLLINEAR_INTERSECTION:LineIntersector.POINT_INTERSECTION):i&&s?(this.intPt[0]=r,this.intPt[1]=t,!r.equals(t)||a||o?LineIntersector.COLLINEAR_INTERSECTION:LineIntersector.POINT_INTERSECTION):LineIntersector.NO_INTERSECTION}},{key:"normalizeToEnvCentre",value:function(e,t,n,r,a){var i=e.x<t.x?e.x:t.x,o=e.y<t.y?e.y:t.y,s=e.x>t.x?e.x:t.x,u=e.y>t.y?e.y:t.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,g=n.x>r.x?n.x:r.x,h=n.y>r.y?n.y:r.y,f=i>l?i:l,y=g>s?s:g,v=o>c?o:c,m=h>u?u:h,p=(f+y)/2,d=(v+m)/2;a.x=p,a.y=d,e.x-=a.x,e.y-=a.y,t.x-=a.x,t.y-=a.y,n.x-=a.x,n.y-=a.y,r.x-=a.x,r.y-=a.y}},{key:"computeIntersect",value:function(e,t,n,r){if(this._isProper=!1,!Envelope.intersects(e,t,n,r))return LineIntersector.NO_INTERSECTION;var a=CGAlgorithms.orientationIndex(e,t,n),i=CGAlgorithms.orientationIndex(e,t,r);if(a>0&&i>0||0>a&&0>i)return LineIntersector.NO_INTERSECTION;var o=CGAlgorithms.orientationIndex(n,r,e),s=CGAlgorithms.orientationIndex(n,r,t);if(o>0&&s>0||0>o&&0>s)return LineIntersector.NO_INTERSECTION;var u=0===a&&0===i&&0===o&&0===s;return u?this.computeCollinearIntersection(e,t,n,r):(0===a||0===i||0===o||0===s?(this._isProper=!1,e.equals2D(n)||e.equals2D(r)?this.intPt[0]=e:t.equals2D(n)||t.equals2D(r)?this.intPt[0]=t:0===a?this.intPt[0]=new Coordinate(n):0===i?this.intPt[0]=new Coordinate(r):0===o?this.intPt[0]=new Coordinate(e):0===s&&(this.intPt[0]=new Coordinate(t))):(this._isProper=!0,this.intPt[0]=this.intersection(e,t,n,r)),LineIntersector.POINT_INTERSECTION)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"nearestEndpoint",value:function(e,t,n,r){var a=e,i=CGAlgorithms.distancePointLine(e,n,r),o=CGAlgorithms.distancePointLine(t,n,r);return i>o&&(i=o,a=t),o=CGAlgorithms.distancePointLine(n,e,t),i>o&&(i=o,a=n),o=CGAlgorithms.distancePointLine(r,e,t),i>o&&(i=o,a=r),a}}]),t}(LineIntersector),RobustDeterminant=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"orientationIndex",value:function(t,n,r){var a=n.x-t.x,i=n.y-t.y,o=r.x-n.x,s=r.y-n.y;return e.signOfDet2x2(a,i,o,s)}},{key:"signOfDet2x2",value:function(e,t,n,r){var a=null,i=null,o=null,s=0;if(a=1,0===e||0===r)return 0===t||0===n?0:t>0?n>0?-a:a:n>0?a:-a;if(0===t||0===n)return r>0?e>0?a:-a:e>0?-a:a;if(t>0?r>0?r>=t||(a=-a,i=e,e=n,n=i,i=t,t=r,r=i):-r>=t?(a=-a,n=-n,r=-r):(i=e,e=-n,n=i,i=t,t=-r,r=i):r>0?r>=-t?(a=-a,e=-e,t=-t):(i=-e,e=n,n=i,i=-t,t=r,r=i):t>=r?(e=-e,t=-t,n=-n,r=-r):(a=-a,i=-e,e=-n,n=i,i=-t,t=-r,r=i),e>0){if(!(n>0))return a;if(!(n>=e))return a}else{if(n>0)return-a;if(!(e>=n))return-a;a=-a,e=-e,n=-n}for(;;){if(s+=1,o=Math.floor(n/e),n-=o*e,r-=o*t,0>r)return-a;if(r>t)return a;if(e>n+n){if(r+r>t)return a}else{if(t>r+r)return-a;n=e-n,r=t-r,a=-a}if(0===r)return 0===n?0:-a;if(0===n)return a;if(o=Math.floor(e/n),e-=o*n,t-=o*r,0>t)return a;if(t>r)return-a;if(n>e+e){if(t+t>r)return-a}else{if(r>t+t)return a;e=n-e,t=r-t,a=-a}if(0===t)return 0===e?0:a;if(0===e)return-a}}}]),e}(),RayCrossingCounter=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.p=null,t.crossingCount=0,t.isPointOnSegment=!1}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.p=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"countSegment",value:function(e,t){if(e.x<this.p.x&&t.x<this.p.x)return null;if(this.p.x===t.x&&this.p.y===t.y)return this.isPointOnSegment=!0,null;if(e.y===this.p.y&&t.y===this.p.y){var n=e.x,r=t.x;return n>r&&(n=t.x,r=e.x),this.p.x>=n&&this.p.x<=r&&(this.isPointOnSegment=!0),null}if(e.y>this.p.y&&t.y<=this.p.y||t.y>this.p.y&&e.y<=this.p.y){var a=e.x-this.p.x,i=e.y-this.p.y,o=t.x-this.p.x,s=t.y-this.p.y,u=RobustDeterminant.signOfDet2x2(a,i,o,s);if(0===u)return this.isPointOnSegment=!0,null;i>s&&(u=-u),u>0&&this.crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==Location.EXTERIOR}},{key:"getLocation",value:function(){return this.isPointOnSegment?Location.BOUNDARY:this.crossingCount%2===1?Location.INTERIOR:Location.EXTERIOR}},{key:"isOnSegment",value:function(){return this.isPointOnSegment}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"locatePointInRing",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:if(n[0]instanceof Coordinate&&n[1].interfaces_&&n[1].interfaces_.indexOf(CoordinateSequence)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=n[1],o=new e(a),s=new Coordinate,u=new Coordinate,l=1;l<i.size();l++)if(i.getCoordinate(l,s),i.getCoordinate(l-1,u),o.countSegment(s,u),o.isOnSegment())return o.getLocation();return o.getLocation()}.apply(void 0,n);if(n[0]instanceof Coordinate&&n[1]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=n[1],o=new e(a),s=1;s<i.length;s++){var u=i[s],l=i[s-1];if(o.countSegment(u,l),o.isOnSegment())return o.getLocation()}return o.getLocation()}.apply(void 0,n)}};return a.apply(this,n)}}]),e}(),CGAlgorithms=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];_classCallCheck(this,e);var a=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return a.apply(this,n)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"orientationIndex",value:function(e,t,n){return CGAlgorithmsDD.orientationIndex(e,t,n)}},{key:"signedArea",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:if(t[0]instanceof Array)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];if(r.length<3)return 0;for(var a=0,i=r[0].x,o=1;o<r.length-1;o++){var s=r[o].x-i,u=r[o+1].y,l=r[o-1].y;a+=s*(l-u)}return a/2}.apply(void 0,t);if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateSequence)>-1)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=r.size();if(3>a)return 0;var i=new Coordinate,o=new Coordinate,s=new Coordinate;r.getCoordinate(0,o),r.getCoordinate(1,s);var u=o.x;s.x-=u;for(var l=0,c=1;a-1>c;c++)i.y=o.y,o.x=s.x,o.y=s.y,r.getCoordinate(c+1,s),s.x-=u,l+=o.x*(i.y-s.y);return l/2}.apply(void 0,t)}};return r.apply(this,t)}},{key:"distanceLineLine",value:function(t,n,r,a){if(t.equals(n))return e.distancePointLine(t,r,a);if(r.equals(a))return e.distancePointLine(a,t,n);var i=!1;if(Envelope.intersects(t,n,r,a)){var o=(n.x-t.x)*(a.y-r.y)-(n.y-t.y)*(a.x-r.x);if(0===o)i=!0;else{var s=(t.y-r.y)*(a.x-r.x)-(t.x-r.x)*(a.y-r.y),u=(t.y-r.y)*(n.x-t.x)-(t.x-r.x)*(n.y-t.y),l=u/o,c=s/o;(0>c||c>1||0>l||l>1)&&(i=!0)}}else i=!0;return i?MathUtil.min(e.distancePointLine(t,r,a),e.distancePointLine(n,r,a),e.distancePointLine(r,t,n),e.distancePointLine(a,t,n)):0}},{key:"isPointInRing",value:function(t,n){return e.locatePointInRing(t,n)!==Location.EXTERIOR}},{key:"isCCW",value:function t(n){var r=n.length-1;if(3>r)throw new IllegalArgumentException$1("Ring has fewer than 4 points, so orientation cannot be determined");for(var a=n[0],i=0,o=1;r>=o;o++){var s=n[o];s.y>a.y&&(a=s,i=o)}var u=i;do u-=1,0>u&&(u=r);while(n[u].equals2D(a)&&u!==i);var l=i;do l=(l+1)%r;while(n[l].equals2D(a)&&l!==i);var c=n[u],g=n[l];if(c.equals2D(a)||g.equals2D(a)||c.equals2D(g))return!1;var h=e.computeOrientation(c,a,g),t=!1;return t=0===h?c.x>g.x:h>0}},{key:"locatePointInRing",value:function(e,t){return RayCrossingCounter.locatePointInRing(e,t)}},{key:"distancePointLinePerpendicular",value:function(e,t,n){var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),a=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(a)*Math.sqrt(r)}},{key:"computeOrientation",value:function(t,n,r){return e.orientationIndex(t,n,r)}},{key:"length",value:function(e){var t=e.size();if(1>=t)return 0;var n=0,r=new Coordinate;e.getCoordinate(0,r);for(var a=r.x,i=r.y,o=1;t>o;o++){e.getCoordinate(o,r);var s=r.x,u=r.y,l=s-a,c=u-i;n+=Math.sqrt(l*l+c*c),a=s,i=u}return n}},{key:"distancePointLine",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];if(0===i.length)throw new IllegalArgumentException$1("Line array must contain at least one vertex");for(var o=a.distance(i[0]),s=0;s<i.length-1;s++){var u=e.distancePointLine(a,i[s],i[s+1]);o>u&&(o=u)}return o}.apply(void 0,n);case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=t[2];if(a.x===i.x&&a.y===i.y)return r.distance(a);var o=(i.x-a.x)*(i.x-a.x)+(i.y-a.y)*(i.y-a.y),s=((r.x-a.x)*(i.x-a.x)+(r.y-a.y)*(i.y-a.y))/o;if(0>=s)return r.distance(a);if(s>=1)return r.distance(i);var u=((a.y-r.y)*(i.x-a.x)-(a.x-r.x)*(i.y-a.y))/o;return Math.abs(u)*Math.sqrt(o)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"isOnLine",value:function(e,t){for(var n=new RobustLineIntersector,r=1;r<t.length;r++){var a=t[r-1],i=t[r];if(n.computeIntersection(e,a,i),n.hasIntersection())return!0}return!1}}]),e}();CGAlgorithms.CLOCKWISE=-1,CGAlgorithms.RIGHT=CGAlgorithms.CLOCKWISE,CGAlgorithms.COUNTERCLOCKWISE=1,CGAlgorithms.LEFT=CGAlgorithms.COUNTERCLOCKWISE,CGAlgorithms.COLLINEAR=0,CGAlgorithms.STRAIGHT=CGAlgorithms.COLLINEAR;var Geometry=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.envelope=null,t.factory=null,t.SRID=null,t.userData=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.factory=a,t.SRID=a.getSRID()}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"isGeometryCollection",value:function(){return this.getSortIndex()===e.SORTINDEX_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this.factory}},{key:"getGeometryN",value:function(e){return this}},{key:"getArea",value:function(){return 0}},{key:"union",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return UnaryUnionOp.union(e)}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];if(e.isEmpty()||a.isEmpty()){if(e.isEmpty()&&a.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.UNION,e,a,e.factory);if(e.isEmpty())return a.copy();if(a.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(a),SnapIfNeededOverlayOp.overlayOp(e,a,OverlayOp.UNION)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"isValid",value:function(){return IsValidOp.isValid(this)}},{key:"isRectangle",value:function(){return!1}},{key:"equals",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return null===a?!1:t.equalsTopo(a)}.apply(void 0,r);if(r[0]instanceof Object)return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];if(!(i instanceof e))return!1;var o=i;return t.equalsExact(o)}.apply(void 0,r)}};return i.apply(this,r)}},{key:"equalsExact",value:function(e){return this===e||this.equalsExact(e,0)}},{key:"intersection",value:function(e){if(this.isEmpty()||e.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.INTERSECTION,this,e,this.factory);if(this.isGeometryCollection()){var t=e;return GeometryCollectionMapper.map(this,new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"map",value:function(e){return e.intersection(t)}}]),e}()))}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp.overlayOp(this,e,OverlayOp.INTERSECTION)}},{key:"covers",value:function(e){return this.getEnvelopeInternal().covers(e.getEnvelopeInternal())?this.isRectangle()?!0:this.relate(e).isCovers():!1}},{key:"intersects",value:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.isRectangle()?RectangleIntersects.intersects(this,e):e.isRectangle()?RectangleIntersects.intersects(e,this):this.relate(e).isIntersects():!1}},{key:"touches",value:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.relate(e).isTouches(this.getDimension(),e.getDimension()):!1}},{key:"geometryChanged",value:function(){this.apply(e.geometryChangedFilter)}},{key:"within",value:function(e){return e.contains(this)}},{key:"geometryChangedAction",value:function(){this.envelope=null}},{key:"buffer",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return BufferOp.bufferOp(e,a)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return BufferOp.bufferOp(e,a,i)}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];return BufferOp.bufferOp(e,a,i,o)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"equalsNorm",value:function(e){return null===e?!1:this.norm().equalsExact(e.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=a;return e.getSortIndex()!==i.getSortIndex()?e.getSortIndex()-i.getSortIndex():e.isEmpty()&&i.isEmpty()?0:e.isEmpty()?-1:i.isEmpty()?1:e.compareToSameClass(a)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=a;return e.getSortIndex()!==o.getSortIndex()?e.getSortIndex()-o.getSortIndex():e.isEmpty()&&o.isEmpty()?0:e.isEmpty()?-1:o.isEmpty()?1:e.compareToSameClass(a,i)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"convexHull",value:function(){return new ConvexHull(this).getConvexHull()}},{key:"equalsTopo",value:function(e){return this.getEnvelopeInternal().equals(e.getEnvelopeInternal())?this.relate(e).isEquals(this.getDimension(),e.getDimension()):!1}},{key:"coveredBy",value:function(e){return e.covers(this)}},{key:"getUserData",value:function(){return this.userData}},{key:"getSRID",value:function(){return this.SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(this.getSortIndex()===e.SORTINDEX_GEOMETRYCOLLECTION)throw new IllegalArgumentException("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(e,t,n){return 0===n?e.equals(t):e.distance(t)<=n}},{key:"relate",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(a),RelateOp.relate(e,a)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return e.relate(a).matches(i)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"overlaps",value:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.relate(e).isOverlaps(this.getDimension(),e.getDimension()):!1}},{key:"norm",value:function(){var e=this.copy();return e.normalize(),e}},{key:"getPrecisionModel",value:function(){return this.factory.getPrecisionModel()}},{key:"getCentroid",value:function(){if(this.isEmpty())return this.factory.createPoint();var e=Centroid.getCentroid(this);return this.createPointFromInternalCoord(e,this)}},{key:"getEnvelopeInternal",value:function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),new Envelope(this.envelope)}},{key:"isEquivalentClass",value:function(e){return this.name===e.getClass().getName()}},{key:"clone",value:function t(){try{var t=_get(Object.getPrototypeOf(e.prototype),"clone",this).call(this);return null!==t.envelope&&(t.envelope=new Envelope(t.envelope)),t}catch(n){if(n instanceof CloneNotSupportedException)return Assert.shouldNeverReachHere(),null;throw n}finally{}}},{key:"setSRID",value:function(e){this.SRID=e}},{key:"getInteriorPoint",value:function(){if(this.isEmpty())return this.factory.createPoint();var e=null,t=this.getDimension();if(0===t){var n=new InteriorPointPoint(this);e=n.getInteriorPoint()}else if(1===t){var n=new InteriorPointLine(this);e=n.getInteriorPoint()}else{var n=new InteriorPointArea(this);e=n.getInteriorPoint()}return this.createPointFromInternalCoord(e,this)}},{key:"symDifference",value:function(e){if(this.isEmpty()||e.isEmpty()){if(this.isEmpty()&&e.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.SYMDIFFERENCE,this,e,this.factory);if(this.isEmpty())return e.copy();if(e.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp.overlayOp(this,e,OverlayOp.SYMDIFFERENCE)}},{key:"setUserData",value:function(e){this.userData=e}},{key:"toString",value:function(){return this.toText()}},{key:"createPointFromInternalCoord",value:function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)}},{key:"disjoint",value:function(e){return!this.intersects(e)}},{key:"toText",value:function(){var e=new WKTWriter;return e.write(this)}},{key:"crosses",value:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.relate(e).isCrosses(this.getDimension(),e.getDimension()):!1}},{key:"contains",value:function(e){return this.getEnvelopeInternal().contains(e.getEnvelopeInternal())?this.isRectangle()?RectangleContains.contains(this,e):this.relate(e).isContains():!1}},{key:"difference",value:function(e){return this.isEmpty()?OverlayOp.createEmptyResult(OverlayOp.DIFFERENCE,this,e,this.factory):e.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp.overlayOp(this,e,OverlayOp.DIFFERENCE))}},{key:"isSimple",value:function(){var e=new IsSimpleOp(this);return e.isSimple()}},{key:"compare",value:function(e,t){for(var n=e.iterator(),r=t.iterator();n.hasNext()&&r.hasNext();){var a=n.next(),i=r.next(),o=a.compareTo(i);if(0!==o)return o}return n.hasNext()?1:r.hasNext()?-1:0}},{key:"isWithinDistance",value:function(e,t){var n=this.getEnvelopeInternal().distance(e.getEnvelopeInternal());return n>t?!1:DistanceOp.isWithinDistance(this,e,t)}},{key:"distance",value:function(e){return DistanceOp.distance(this,e)}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getSortIndex()===e.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===e.SORTINDEX_MULTIPOINT||this.getSortIndex()===e.SORTINDEX_MULTILINESTRING||this.getSortIndex()===e.SORTINDEX_MULTIPOLYGON?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Clonable,Comparable,Serializable]}}],[{key:"hasNonEmptyElements",value:function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(e){for(var t=0;t<e.length;t++)if(null===e[t])return!0;return!1}}]),e}();Geometry.serialVersionUID=0x799ea46522854c00,Geometry.SORTINDEX_POINT=0,Geometry.SORTINDEX_MULTIPOINT=1,Geometry.SORTINDEX_LINESTRING=2,Geometry.SORTINDEX_LINEARRING=3,Geometry.SORTINDEX_MULTILINESTRING=4,Geometry.SORTINDEX_POLYGON=5,Geometry.SORTINDEX_MULTIPOLYGON=6,Geometry.SORTINDEX_GEOMETRYCOLLECTION=7,Geometry.geometryChangedFilter=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e){e.geometryChangedAction()}}]),e}());var CoordinateFilter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),BoundaryNodeRule=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInBoundary",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"Mod2BoundaryNodeRule",get:function(){return Mod2BoundaryNodeRule}},{key:"EndPointBoundaryNodeRule",get:function(){return EndPointBoundaryNodeRule}},{key:"MultiValentEndPointBoundaryNodeRule",get:function(){return MultiValentEndPointBoundaryNodeRule}},{key:"MonoValentEndPointBoundaryNodeRule",get:function(){return MonoValentEndPointBoundaryNodeRule}}]),e}(),Mod2BoundaryNodeRule=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInBoundary",value:function(e){return e%2===1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[BoundaryNodeRule]}}]),e}(),EndPointBoundaryNodeRule=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInBoundary",value:function(e){return e>0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[BoundaryNodeRule]}}]),e}(),MultiValentEndPointBoundaryNodeRule=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInBoundary",value:function(e){return e>1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[BoundaryNodeRule]}}]),e}(),MonoValentEndPointBoundaryNodeRule=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInBoundary",value:function(e){return 1===e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[BoundaryNodeRule]}}]),e}();BoundaryNodeRule.MOD2_BOUNDARY_RULE=new Mod2BoundaryNodeRule,BoundaryNodeRule.ENDPOINT_BOUNDARY_RULE=new EndPointBoundaryNodeRule,BoundaryNodeRule.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new MultiValentEndPointBoundaryNodeRule,BoundaryNodeRule.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new MonoValentEndPointBoundaryNodeRule,BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE=BoundaryNodeRule.MOD2_BOUNDARY_RULE,Iterator.prototype.hasNext=function(){},Iterator.prototype.next=function(){},Iterator.prototype.remove=function(){},Collection.prototype.add=function(){},Collection.prototype.addAll=function(){},Collection.prototype.isEmpty=function(){},Collection.prototype.iterator=function(){},Collection.prototype.size=function(){},Collection.prototype.toArray=function(){},Collection.prototype.remove=function(){},IndexOutOfBoundsException$1.prototype=new Error,IndexOutOfBoundsException$1.prototype.name="IndexOutOfBoundsException",List.prototype=new Collection,List.prototype.get=function(){},List.prototype.set=function(){},List.prototype.isEmpty=function(){},NoSuchElementException.prototype=new Error,NoSuchElementException.prototype.name="NoSuchElementException",OperationNotSupported.prototype=new Error,OperationNotSupported.prototype.name="OperationNotSupported";var ArrayList=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return e.array_=[],arguments[0]instanceof Collection&&e.addAll(arguments[0]),e}return _inherits(t,e),_createClass(t,[{key:"ensureCapacity",value:function(){}},{key:"interfaces_",get:function(){return[List,Collection]}}]),t}(List);ArrayList.prototype.add=function(e){return this.array_.push(e),!0},ArrayList.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},ArrayList.prototype.set=function(e,t){var n=this.array_[e];return this.array_[e]=t,n},ArrayList.prototype.iterator=function(){return new Iterator_(this)},ArrayList.prototype.get=function(e){if(0>e||e>=this.size())throw new IndexOutOfBoundsException$1;return this.array_[e]},ArrayList.prototype.isEmpty=function(){return 0===this.array_.length},ArrayList.prototype.size=function(){return this.array_.length},ArrayList.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;n>t;t++)e.push(this.array_[t]);return e},ArrayList.prototype.remove=function(e){for(var t=!1,n=0,r=this.array_.length;r>n;n++)if(this.array_[n]===e){this.array_.splice(n,1),t=!0;break}return t};var Iterator_=function(e){this.arrayList_=e,this.position_=0};Iterator_.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new NoSuchElementException;return this.arrayList_.get(this.position_++)},Iterator_.prototype.hasNext=function(){return this.position_<this.arrayList_.size()?!0:!1},Iterator_.prototype.set=function(e){return this.arrayList_.set(this.position_-1,e)},Iterator_.prototype.remove=function(){throw new OperationNotSupported};var CoordinateList=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 0:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n))}.apply(void 0,r);case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];o.ensureCapacity(r.length),o.add(r,!0)}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1];o.ensureCapacity(r.length),o.add(r,a)}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"getCoordinate",value:function(e){return this.get(e)}},{key:"addAll",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(2===r.length){for(var i=r[0],o=r[1],s=!1,u=i.iterator();u.hasNext();)this.add(u.next(),o),s=!0;return s}return(e=_get(Object.getPrototypeOf(t.prototype),"addAll",this)).call.apply(e,[this].concat(r))}},{key:"clone",value:function n(){for(var n=_get(Object.getPrototypeOf(t.prototype),"clone",this).call(this),e=0;e<this.size();e++)n.add(e,this.get(e).copy());return n}},{key:"toCoordinateArray",value:function(){return this.toArray(t.coordArrayType)}},{key:"add",value:function(){for(var e=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];_get(Object.getPrototypeOf(t.prototype),"add",e).call(e,i)}.apply(void 0,r);case 2:if(r[0]instanceof Array&&"boolean"==typeof r[1])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return e.add(a,i,!0),!0}.apply(void 0,r);if(r[0]instanceof Coordinate&&"boolean"==typeof r[1])return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],o=r[1];if(!o&&e.size()>=1){var s=e.get(e.size()-1);if(s.equals2D(i))return null}_get(Object.getPrototypeOf(t.prototype),"add",e).call(e,i)}.apply(void 0,r);if(r[0]instanceof Object&&"boolean"==typeof r[1])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return e.add(a,i),!0}.apply(void 0,r);case 3:if("boolean"==typeof r[2]&&r[0]instanceof Array&&"boolean"==typeof r[1])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];if(o)for(var s=0;s<a.length;s++)e.add(a[s],i);else for(var s=a.length-1;s>=0;s--)e.add(a[s],i);return!0}.apply(void 0,r);if("boolean"==typeof r[2]&&Number.isInteger(r[0])&&r[1]instanceof Coordinate)return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=r[2];if(!s){var u=e.size();if(u>0){if(i>0){var l=e.get(i-1);if(l.equals2D(o))return null}if(u>i){var c=e.get(i);if(c.equals2D(o))return null}}}_get(Object.getPrototypeOf(t.prototype),"add",e).call(e,i,o)}.apply(void 0,r);case 4:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=n[3],u=1;o>s&&(u=-1);for(var l=o;l!==s;l+=u)e.add(a[l],i);return!0}.apply(void 0,r)}};return i.apply(this,r)}},{key:"closeRing",value:function(){this.size()>0&&this.add(new Coordinate(this.get(0)),!1)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(ArrayList);CoordinateList.coordArrayType=new Array(0);var CoordinateArrays=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isRing",value:function(e){return e.length<4?!1:e[0].equals2D(e[e.length-1])?!0:!1}},{key:"ptNotInList",value:function(t,n){for(var r=0;r<t.length;r++){var a=t[r];if(e.indexOf(a,n)<0)return a}return null}},{key:"scroll",value:function(t,n){var r=e.indexOf(n,t);if(0>r)return null;var a=new Array(t.length);System.arraycopy(t,r,a,0,t.length-r),System.arraycopy(t,0,a,t.length-r,r),System.arraycopy(a,0,t,0,t.length)}},{key:"equals",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1];if(r===a)return!0;if(null===r||null===a)return!1;if(r.length!==a.length)return!1;for(var i=0;i<r.length;i++)if(!r[i].equals(a[i]))return!1;return!0}.apply(void 0,t);case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=t[2];if(r===a)return!0;if(null===r||null===a)return!1;if(r.length!==a.length)return!1;for(var o=0;o<r.length;o++)if(0!==i.compare(r[o],a[o]))return!1;return!0}.apply(void 0,t)}};return r.apply(this,t)}},{key:"intersection",value:function(e,t){for(var n=new CoordinateList,r=0;r<e.length;r++)t.intersects(e[r])&&n.add(e[r],!0);return n.toCoordinateArray()}},{key:"hasRepeatedPoints",value:function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){if(!e.hasRepeatedPoints(t))return t;var n=new CoordinateList(t,!1);return n.toCoordinateArray()}},{key:"reverse",value:function(e){for(var t=e.length-1,n=Math.trunc(t/2),r=0;n>=r;r++){var a=e[r];e[r]=e[t-r],e[t-r]=a}}},{key:"removeNull",value:function(e){
for(var t=0,n=0;n<e.length;n++)null!==e[n]&&t++;var r=new Array(t);if(0===t)return r;for(var a=0,n=0;n<e.length;n++)null!==e[n]&&(r[a++]=e[n]);return r}},{key:"copyDeep",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];for(var r=t[0],a=new Array(r.length),i=0;i<r.length;i++)a[i]=new Coordinate(r[i]);return a}.apply(void 0,t);case 5:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];for(var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],u=0;s>u;u++)i[o+u]=new Coordinate(r[a+u])}.apply(void 0,t)}};return r.apply(this,t)}},{key:"isEqualReversed",value:function(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=t[e.length-n-1];if(0!==r.compareTo(a))return!1}return!0}},{key:"envelope",value:function(e){for(var t=new Envelope,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t}},{key:"toCoordinateArray",value:function(t){return t.toArray(e.coordArrayType)}},{key:"atLeastNCoordinatesOrNothing",value:function(e,t){return t.length>=e?t:[]}},{key:"indexOf",value:function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1}},{key:"increasingDirection",value:function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,r=e[t].compareTo(e[n]);if(0!==r)return r}return 1}},{key:"compare",value:function t(e,n){for(var r=0;r<e.length&&r<n.length;){var t=e[r].compareTo(n[r]);if(0!==t)return t;r++}return r<n.length?-1:r<e.length?1:0}},{key:"minCoordinate",value:function(e){for(var t=null,n=0;n<e.length;n++)(null===t||t.compareTo(e[n])>0)&&(t=e[n]);return t}},{key:"extract",value:function(e,t,n){t=MathUtil.clamp(t,0,e.length),n=MathUtil.clamp(n,-1,e.length);var r=n-t+1;0>n&&(r=0),t>=e.length&&(r=0),t>n&&(r=0);var a=new Array(r);if(0===r)return a;for(var i=0,o=t;n>=o;o++)a[i++]=e[o];return a}},{key:"ForwardComparator",get:function(){return ForwardComparator}},{key:"BidirectionalComparator",get:function(){return BidirectionalComparator}}]),e}(),ForwardComparator=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"compare",value:function(e,t){var n=e,r=t;return CoordinateArrays.compare(n,r)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparator]}}]),e}(),BidirectionalComparator=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"compare",value:function(t,n){var r=t,a=n;if(r.length<a.length)return-1;if(r.length>a.length)return 1;if(0===r.length)return 0;var i=CoordinateArrays.compare(r,a),o=e.isEqualReversed(r,a);return o?0:i}},{key:"OLDcompare",value:function(t,n){var r=t,a=n;if(r.length<a.length)return-1;if(r.length>a.length)return 1;if(0===r.length)return 0;for(var i=e.increasingDirection(r),o=e.increasingDirection(a),s=i>0?0:r.length-1,u=o>0?0:r.length-1,l=0;l<r.length;l++){var c=r[s].compareTo(a[u]);if(0!==c)return c;s+=i,u+=o}return 0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparator]}}]),e}();CoordinateArrays.coordArrayType=new Array(0),Map$1.prototype.get=function(){},Map$1.prototype.put=function(){},Map$1.prototype.size=function(){},Map$1.prototype.values=function(){},Map$1.prototype.entrySet=function(){},SortedMap.prototype=new Map$1,Set.prototype=new Collection,Set.prototype.contains=function(){},HashSet.prototype=new Set,HashSet.prototype.contains=function(e){for(var t=0,n=this.array_.length;n>t;t++){var r=this.array_[t];if(r===e)return!0}return!1},HashSet.prototype.add=function(e){return this.contains(e)?!1:(this.array_.push(e),!0)},HashSet.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},HashSet.prototype.remove=function(e){throw new javascript.util.OperationNotSupported},HashSet.prototype.size=function(){return this.array_.length},HashSet.prototype.isEmpty=function(){return 0===this.array_.length},HashSet.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;n>t;t++)e.push(this.array_[t]);return e},HashSet.prototype.iterator=function(){return new Iterator_$2(this)};var Iterator_$2=function(e){this.hashSet_=e,this.position_=0};Iterator_$2.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new NoSuchElementException;return this.hashSet_.array_[this.position_++]},Iterator_$2.prototype.hasNext=function(){return this.position_<this.hashSet_.size()?!0:!1},Iterator_$2.prototype.remove=function(){throw new OperationNotSupported};var BLACK=0,RED=1,colorOf=function(e){return null==e?BLACK:e.color},parentOf=function(e){return null==e?null:e.parent},setColor=function(e,t){null!==e&&(e.color=t)},leftOf=function(e){return null==e?null:e.left},rightOf=function(e){return null==e?null:e.right};TreeMap.prototype=new SortedMap,TreeMap.prototype.get=function(e){for(var t=this.root_;null!==t;){var n=e.compareTo(t.key);if(0>n)t=t.left;else{if(!(n>0))return t.value;t=t.right}}return null},TreeMap.prototype.put=function(e,t){if(null===this.root_)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:BLACK,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,a=this.root_;do if(n=a,r=e.compareTo(a.key),0>r)a=a.left;else{if(!(r>0)){var i=a.value;return a.value=t,i}a=a.right}while(null!==a);var o={key:e,left:null,right:null,value:t,parent:n,color:BLACK,getValue:function(){return this.value},getKey:function(){return this.key}};return 0>r?n.left=o:n.right=o,this.fixAfterInsertion(o),this.size_++,null},TreeMap.prototype.fixAfterInsertion=function(e){for(e.color=RED;null!=e&&e!=this.root_&&e.parent.color==RED;)if(parentOf(e)==leftOf(parentOf(parentOf(e)))){var t=rightOf(parentOf(parentOf(e)));colorOf(t)==RED?(setColor(parentOf(e),BLACK),setColor(t,BLACK),setColor(parentOf(parentOf(e)),RED),e=parentOf(parentOf(e))):(e==rightOf(parentOf(e))&&(e=parentOf(e),this.rotateLeft(e)),setColor(parentOf(e),BLACK),setColor(parentOf(parentOf(e)),RED),this.rotateRight(parentOf(parentOf(e))))}else{var t=leftOf(parentOf(parentOf(e)));colorOf(t)==RED?(setColor(parentOf(e),BLACK),setColor(t,BLACK),setColor(parentOf(parentOf(e)),RED),e=parentOf(parentOf(e))):(e==leftOf(parentOf(e))&&(e=parentOf(e),this.rotateRight(e)),setColor(parentOf(e),BLACK),setColor(parentOf(parentOf(e)),RED),this.rotateLeft(parentOf(parentOf(e))))}this.root_.color=BLACK},TreeMap.prototype.values=function(){var e=new ArrayList,t=this.getFirstEntry();if(null!==t)for(e.add(t.value);null!==(t=TreeMap.successor(t));)e.add(t.value);return e},TreeMap.prototype.entrySet=function(){var e=new HashSet,t=this.getFirstEntry();if(null!==t)for(e.add(t);null!==(t=TreeMap.successor(t));)e.add(t);return e},TreeMap.prototype.rotateLeft=function(e){if(null!=e){var t=e.right;e.right=t.left,null!=t.left&&(t.left.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.left==e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}},TreeMap.prototype.rotateRight=function(e){if(null!=e){var t=e.left;e.left=t.right,null!=t.right&&(t.right.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.right==e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}},TreeMap.prototype.getFirstEntry=function(){var e=this.root_;if(null!=e)for(;null!=e.left;)e=e.left;return e},TreeMap.successor=function(e){if(null===e)return null;if(null!==e.right){for(var t=e.right;null!==t.left;)t=t.left;return t}for(var t=e.parent,n=e;null!==t&&n===t.right;)n=t,t=t.parent;return t},TreeMap.prototype.size=function(){return this.size_};var Lineal=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();SortedSet.prototype=new Set,TreeSet.prototype=new SortedSet,TreeSet.prototype.contains=function(e){for(var t=0,n=this.array_.length;n>t;t++){var r=this.array_[t];if(0===r.compareTo(e))return!0}return!1},TreeSet.prototype.add=function(e){if(this.contains(e))return!1;for(var t=0,n=this.array_.length;n>t;t++){var r=this.array_[t];if(1===r.compareTo(e))return this.array_.splice(t,0,e),!0}return this.array_.push(e),!0},TreeSet.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},TreeSet.prototype.remove=function(e){throw new OperationNotSupported},TreeSet.prototype.size=function(){return this.array_.length},TreeSet.prototype.isEmpty=function(){return 0===this.array_.length},TreeSet.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;n>t;t++)e.push(this.array_[t]);return e},TreeSet.prototype.iterator=function(){return new Iterator_$1(this)};var Iterator_$1=function(e){this.treeSet_=e,this.position_=0};Iterator_$1.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new NoSuchElementException;return this.treeSet_.array_[this.position_++]},Iterator_$1.prototype.hasNext=function(){return this.position_<this.treeSet_.size()?!0:!1},Iterator_$1.prototype.remove=function(){throw new OperationNotSupported},Arrays.sort=function(){var e,t,n,r,a=arguments[0];if(1===arguments.length)return r=function(e,t){return e.compareTo(t)},void a.sort(r);if(2===arguments.length)n=arguments[1],r=function(e,t){return n.compare(e,t)},a.sort(r);else{if(3===arguments.length){t=a.slice(arguments[1],arguments[2]),t.sort();var i=a.slice(0,arguments[1]).concat(t,a.slice(arguments[2],a.length));for(a.splice(0,a.length),e=0;e<i.length;e++)a.push(i[e]);return}if(4===arguments.length){for(t=a.slice(arguments[1],arguments[2]),n=arguments[3],r=function(e,t){return n.compare(e,t)},t.sort(r),i=a.slice(0,arguments[1]).concat(t,a.slice(arguments[2],a.length)),a.splice(0,a.length),e=0;e<i.length;e++)a.push(i[e]);return}}},Arrays.asList=function(e){for(var t=new ArrayList,n=0,r=e.length;r>n;n++)t.add(e[n]);return t};var GeometryComponentFilter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Dimension=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toDimensionSymbol",value:function(t){switch(t){case e.FALSE:return e.SYM_FALSE;case e.TRUE:return e.SYM_TRUE;case e.DONTCARE:return e.SYM_DONTCARE;case e.P:return e.SYM_P;case e.L:return e.SYM_L;case e.A:return e.SYM_A}throw new IllegalArgumentException$1("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(Character.toUpperCase(t)){case e.SYM_FALSE:return e.FALSE;case e.SYM_TRUE:return e.TRUE;case e.SYM_DONTCARE:return e.DONTCARE;case e.SYM_P:return e.P;case e.SYM_L:return e.L;case e.SYM_A:return e.A}throw new IllegalArgumentException$1("Unknown dimension symbol: "+t)}}]),e}();Dimension.P=0,Dimension.L=1,Dimension.A=2,Dimension.FALSE=-1,Dimension.TRUE=-2,Dimension.DONTCARE=-3,Dimension.SYM_FALSE="F",Dimension.SYM_TRUE="T",Dimension.SYM_DONTCARE="*",Dimension.SYM_P="0",Dimension.SYM_L="1",Dimension.SYM_A="2";var GeometryFilter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),CoordinateSequenceFilter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e,t){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),GeometryCollection=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){o.geometries=null}();var s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 2:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,o));if(null===i&&(i=[]),t.hasNullElements(i))throw new IllegalArgumentException$1("geometries must not contain null elements");s.geometries=i}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"computeEnvelopeInternal",value:function(){for(var e=new Envelope,t=0;t<this.geometries.length;t++)e.expandToInclude(this.geometries[t].getEnvelopeInternal());return e}},{key:"getGeometryN",value:function(e){return this.geometries[e]}},{key:"getSortIndex",value:function(){return Geometry.SORTINDEX_GEOMETRYCOLLECTION}},{key:"getCoordinates",value:function(){for(var e=new Array(this.getNumPoints()),t=-1,n=0;n<this.geometries.length;n++)for(var r=this.geometries[n].getCoordinates(),a=0;a<r.length;a++)t++,e[t]=r[a];return e}},{key:"getArea",value:function(){for(var e=0,t=0;t<this.geometries.length;t++)e+=this.geometries[t].getArea();return e}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(2===r.length){var i=r[0],o=r[1];if(!this.isEquivalentClass(i))return!1;var s=i;if(this.geometries.length!==s.geometries.length)return!1;for(var u=0;u<this.geometries.length;u++)if(!this.geometries[u].equalsExact(s.geometries[u],o))return!1;return!0}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"normalize",value:function(){for(var e=0;e<this.geometries.length;e++)this.geometries[e].normalize();Arrays.sort(this.geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var e=Dimension.FALSE,t=0;t<this.geometries.length;t++)e=Math.max(e,this.geometries[t].getBoundaryDimension());return e}},{key:"getDimension",value:function(){for(var e=Dimension.FALSE,t=0;t<this.geometries.length;t++)e=Math.max(e,this.geometries[t].getDimension());return e}},{key:"getLength",value:function(){for(var e=0,t=0;t<this.geometries.length;t++)e+=this.geometries[t].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=0,t=0;t<this.geometries.length;t++)e+=this.geometries[t].getNumPoints();return e}},{key:"getNumGeometries",value:function(){return this.geometries.length}},{key:"reverse",value:function(){for(var e=this.geometries.length,t=new Array(e),n=0;n<this.geometries.length;n++)t[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(t)}},{key:"compareToSameClass",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=new TreeSet(Arrays.asList(e.geometries)),o=new TreeSet(Arrays.asList(a.geometries));return e.compare(i,o)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=n[1],o=a,s=e.getNumGeometries(),u=o.getNumGeometries(),l=0;s>l&&u>l;){var c=e.getGeometryN(l),g=o.getGeometryN(l),h=c.compareToSameClass(g,i);if(0!==h)return h;l++}return s>l?1:u>l?-1:0}.apply(void 0,n)}};return a.apply(this,n)}},{key:"apply",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(CoordinateFilter)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=0;i<e.geometries.length;i++)e.geometries[i].apply(a)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(CoordinateSequenceFilter)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];if(0===e.geometries.length)return null;for(var i=0;i<e.geometries.length&&(e.geometries[i].apply(a),!a.isDone());i++);a.isGeometryChanged()&&e.geometryChanged()}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(GeometryFilter)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];a.filter(e);for(var i=0;i<e.geometries.length;i++)e.geometries[i].apply(a)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(GeometryComponentFilter)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];a.filter(e);for(var i=0;i<e.geometries.length;i++)e.geometries[i].apply(a)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getBoundary",value:function(){return this.checkNotGeometryCollection(this),Assert.shouldNeverReachHere(),null}},{key:"clone",value:function(){var e=_get(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.geometries=new Array(this.geometries.length);for(var n=0;n<this.geometries.length;n++)e.geometries[n]=this.geometries[n].clone();return e}},{key:"getGeometryType",value:function(){return"GeometryCollection"}},{key:"copy",value:function(){for(var e=new Array(this.geometries.length),n=0;n<e.length;n++)e[n]=this.geometries[n].copy();return new t(e,this.factory)}},{key:"isEmpty",value:function(){for(var e=0;e<this.geometries.length;e++)if(!this.geometries[e].isEmpty())return!1;return!0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Geometry);GeometryCollection.serialVersionUID=-0x4f07bcb1f857d800;var MultiLineString=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 2:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0],o=r[1];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,i,o))}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"getSortIndex",value:function(){return Geometry.SORTINDEX_MULTILINESTRING}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(2===r.length){var i=r[0],o=r[1];return this.isEquivalentClass(i)?_get(Object.getPrototypeOf(t.prototype),"equalsExact",this).call(this,i,o):!1}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Dimension.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var e=0;e<this.geometries.length;e++)if(!this.geometries[e].isClosed())return!1;return!0}},{key:"getDimension",value:function(){return 1}},{key:"reverse",value:function(){for(var e=this.geometries.length,t=new Array(e),n=0;n<this.geometries.length;n++)t[e-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(t)}},{key:"getBoundary",value:function(){return new BoundaryOp(this).getBoundary()}},{key:"getGeometryType",value:function(){return"MultiLineString"}},{key:"copy",value:function(){for(var e=new Array(this.geometries.length),n=0;n<e.length;n++)e[n]=this.geometries[n].copy();return new t(e,this.factory)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Lineal]}}]),t}(GeometryCollection);MultiLineString.serialVersionUID=0x7155d2ab4afa8000;var BoundaryOp=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.geom=null,t.geomFact=null,t.bnRule=null,t.endpointMap=null}();var i=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];o.call(t,a,BoundaryNodeRule.MOD2_BOUNDARY_RULE)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.geom=a,t.geomFact=a.getFactory(),t.bnRule=i}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"boundaryMultiLineString",value:function(e){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return 1===t.length?this.geomFact.createPoint(t[0]):this.geomFact.createMultiPointFromCoords(t)}},{key:"getBoundary",value:function(){return this.geom instanceof LineString?this.boundaryLineString(this.geom):this.geom instanceof MultiLineString?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()}},{key:"boundaryLineString",value:function(e){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(e.isClosed()){var t=this.bnRule.isInBoundary(2);return t?e.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])}},{key:"getEmptyMultiPoint",value:function(){return this.geomFact.createMultiPoint()}},{key:"computeBoundaryCoordinates",value:function(e){var t=new ArrayList;this.endpointMap=new TreeMap;for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var a=this.endpointMap.entrySet().iterator();a.hasNext();){var i=a.next(),o=i.getValue(),s=o.count;this.bnRule.isInBoundary(s)&&t.add(i.getKey())}return CoordinateArrays.toCoordinateArray(t)}},{key:"addEndpoint",value:function(e){var t=this.endpointMap.get(e);null===t&&(t=new Counter,this.endpointMap.put(e,t)),t.count++}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBoundary",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=new e(a);return i.getBoundary()}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=new e(a,i);return o.getBoundary()}.apply(void 0,n)}};return a.apply(this,n)}}]),e}(),Counter=function(){function e(){var t=this;_classCallCheck(this,e),function(){t.count=null}()}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),PrintStream=function l(){_classCallCheck(this,l)},StringReader=function c(){_classCallCheck(this,c)},DecimalFormat=function g(){_classCallCheck(this,g)},ByteArrayOutputStream=function h(){_classCallCheck(this,h)},IOException=function f(){_classCallCheck(this,f)},LineNumberReader=function y(){_classCallCheck(this,y)},StringUtil=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"chars",value:function(e,t){for(var n=new Array(t),r=0;t>r;r++)n[r]=e;return new String(n)}},{key:"getStackTrace",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=new ByteArrayOutputStream,i=new PrintStream(a);return r.printStackTrace(i),a.toString()}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=n[1],o="",s=new StringReader(e.getStackTrace(a)),u=new LineNumberReader(s),l=0;i>l;l++)try{o+=u.readLine()+e.NEWLINE}catch(c){if(!(c instanceof IOException))throw c;Assert.shouldNeverReachHere()}finally{}return o}.apply(void 0,n)}};return a.apply(this,n)}},{key:"split",value:function(e,t){for(var n=t.length,r=new ArrayList,a=""+e,i=a.indexOf(t);i>=0;){var o=a.substring(0,i);r.add(o),a=a.substring(i+n),i=a.indexOf(t)}a.length>0&&r.add(a);for(var s=new Array(r.size()),u=0;u<s.length;u++)s[u]=r.get(u);return s}},{key:"toString",value:function(){for(var t,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(1===r.length){var i=r[0];return e.SIMPLE_ORDINATE_FORMAT.format(i)}return(t=_get(Object.getPrototypeOf(e),"toString",this)).call.apply(t,[this].concat(r))}},{key:"spaces",value:function(t){return e.chars(" ",t)}}]),e}();StringUtil.NEWLINE=System.getProperty("line.separator"),StringUtil.SIMPLE_ORDINATE_FORMAT=new DecimalFormat("0.#");var CoordinateSequences=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"copyCoord",value:function(e,t,n,r){for(var a=Math.min(e.getDimension(),n.getDimension()),i=0;a>i;i++)n.setOrdinate(r,i,e.getOrdinate(t,i))}},{key:"isRing",value:function(e){var t=e.size();return 0===t?!0:3>=t?!1:e.getOrdinate(0,CoordinateSequence.X)===e.getOrdinate(t-1,CoordinateSequence.X)&&e.getOrdinate(0,CoordinateSequence.Y)===e.getOrdinate(t-1,CoordinateSequence.Y)}},{key:"isEqual",value:function(e,t){var n=e.size(),r=t.size();if(n!==r)return!1;for(var a=Math.min(e.getDimension(),t.getDimension()),i=0;n>i;i++)for(var o=0;a>o;o++){var s=e.getOrdinate(i,o),u=t.getOrdinate(i,o);if(!(e.getOrdinate(i,o)===t.getOrdinate(i,o)||Double.isNaN(s)&&Double.isNaN(u)))return!1}return!0}},{key:"extend",value:function(t,n,r){var a=t.create(r,n.getDimension()),i=n.size();if(e.copy(n,0,a,0,i),i>0)for(var o=i;r>o;o++)e.copy(n,i-1,a,o,1);return a}},{key:"reverse",value:function(t){for(var n=t.size()-1,r=Math.trunc(n/2),a=0;r>=a;a++)e.swap(t,a,n-a)}},{key:"swap",value:function(e,t,n){if(t===n)return null;for(var r=0;r<e.getDimension();r++){var a=e.getOrdinate(t,r);e.setOrdinate(t,r,e.getOrdinate(n,r)),e.setOrdinate(n,r,a)}}},{key:"copy",value:function(t,n,r,a,i){for(var o=0;i>o;o++)e.copyCoord(t,n+o,r,a+o)}},{key:"toString",value:function(){for(var t,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(1===r.length){var i=r[0],o=i.size();if(0===o)return"()";var s=i.getDimension(),u=new StringBuffer;u.append("(");for(var l=0;o>l;l++){l>0&&u.append(" ");for(var c=0;s>c;c++)c>0&&u.append(","),u.append(StringUtil.toString(i.getOrdinate(l,c)))}return u.append(")"),u.toString()}return(t=_get(Object.getPrototypeOf(e),"toString",this)).call.apply(t,[this].concat(r))}},{key:"ensureValidRing",value:function(t,n){var r=n.size();if(0===r)return n;if(3>=r)return e.createClosedRing(t,n,4);var a=n.getOrdinate(0,CoordinateSequence.X)===n.getOrdinate(r-1,CoordinateSequence.X)&&n.getOrdinate(0,CoordinateSequence.Y)===n.getOrdinate(r-1,CoordinateSequence.Y);return a?n:e.createClosedRing(t,n,r+1)}},{key:"createClosedRing",value:function(t,n,r){var a=t.create(r,n.getDimension()),i=n.size();e.copy(n,0,a,0,i);for(var o=i;r>o;o++)e.copy(n,0,a,o,1);return a}}]),e}(),LineString=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){o.points=null}();var s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 2:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,o));s.init(i)}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new Envelope:this.points.expandEnvelope(new Envelope)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getSortIndex",value:function(){return Geometry.SORTINDEX_LINESTRING}},{key:"getCoordinates",value:function(){return this.points.toCoordinateArray()}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(2===r.length){var i=r[0],o=r[1];if(!this.isEquivalentClass(i))return!1;var s=i;if(this.points.size()!==s.points.size())return!1;for(var u=0;u<this.points.size();u++)if(!this.equal(this.points.getCoordinate(u),s.points.getCoordinate(u),o))return!1;return!0}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"normalize",value:function(){for(var e=0;e<Math.trunc(this.points.size()/2);e++){var t=this.points.size()-1-e;if(!this.points.getCoordinate(e).equals(this.points.getCoordinate(t)))return this.points.getCoordinate(e).compareTo(this.points.getCoordinate(t))>0&&CoordinateSequences.reverse(this.points),null}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this.points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Dimension.FALSE:0}},{key:"isClosed",value:function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return CGAlgorithms.length(this.points)}},{key:"getNumPoints",value:function(){return this.points.size()}},{key:"reverse",value:function(){var e=this.points.clone();CoordinateSequences.reverse(e);var t=this.getFactory().createLineString(e);return t}},{key:"compareToSameClass",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=a,o=0,s=0;o<e.points.size()&&s<i.points.size();){var u=e.points.getCoordinate(o).compareTo(i.points.getCoordinate(s));if(0!==u)return u;o++,s++}return o<e.points.size()?1:s<i.points.size()?-1:0}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=a;return i.compare(e.points,o.points)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"apply",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(CoordinateFilter)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=0;i<e.points.size();i++)a.filter(e.points.getCoordinate(i))}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(CoordinateSequenceFilter)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];if(0===e.points.size())return null;for(var i=0;i<e.points.size()&&(a.filter(e.points,i),!a.isDone());i++);a.isGeometryChanged()&&e.geometryChanged()}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(GeometryFilter)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];a.filter(e)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(GeometryComponentFilter)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];a.filter(e)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getBoundary",value:function(){return new BoundaryOp(this).getBoundary()}},{key:"isEquivalentClass",value:function(e){return e instanceof t}},{key:"clone",value:function(){var e=_get(Object.getPrototypeOf(t.prototype),"clone",this).call(this);return e.points=this.points.clone(),e}},{key:"getCoordinateN",value:function(e){return this.points.getCoordinate(e)}},{key:"getGeometryType",value:function(){return"LineString";
}},{key:"copy",value:function(){return new t(this.points.copy(),this.factory)}},{key:"getCoordinateSequence",value:function(){return this.points}},{key:"isEmpty",value:function(){return 0===this.points.size()}},{key:"init",value:function(e){if(null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),1===e.size())throw new IllegalArgumentException$1("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this.points=e}},{key:"isCoordinate",value:function(e){for(var t=0;t<this.points.size();t++)if(this.points.getCoordinate(t).equals(e))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(e){return this.getFactory().createPoint(this.points.getCoordinate(e))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Lineal]}}]),t}(Geometry);LineString.serialVersionUID=0x2b2b51ba435c8e00;var Puntal=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Point=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){o.coordinates=null}();var s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 2:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,o));s.init(i)}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new Envelope;var e=new Envelope;return e.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),e}},{key:"getSortIndex",value:function(){return Geometry.SORTINDEX_POINT}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(2===r.length){var i=r[0],o=r[1];return this.isEquivalentClass(i)?this.isEmpty()&&i.isEmpty()?!0:this.isEmpty()!==i.isEmpty()?!1:this.equal(i.getCoordinate(),this.getCoordinate(),o):!1}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==this.coordinates.size()?this.coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return Dimension.FALSE}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"reverse",value:function(){return this.copy()}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=a;return e.getCoordinate().compareTo(i.getCoordinate())}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=a;return i.compare(e.coordinates,o.coordinates)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"apply",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(CoordinateFilter)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.isEmpty()?null:void a.filter(e.getCoordinate())}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(CoordinateSequenceFilter)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.isEmpty()?null:(a.filter(e.coordinates,0),void(a.isGeometryChanged()&&e.geometryChanged()))}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(GeometryFilter)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];a.filter(e)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(GeometryComponentFilter)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];a.filter(e)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection(null)}},{key:"clone",value:function(){var e=_get(Object.getPrototypeOf(t.prototype),"clone",this).call(this);return e.coordinates=this.coordinates.clone(),e}},{key:"getGeometryType",value:function(){return"Point"}},{key:"copy",value:function(){return new t(this.coordinates.copy(),this.factory)}},{key:"getCoordinateSequence",value:function(){return this.coordinates}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===this.coordinates.size()}},{key:"init",value:function(e){null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),Assert.isTrue(e.size()<=1),this.coordinates=e}},{key:"isSimple",value:function(){return!0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Puntal]}}]),t}(Geometry);Point.serialVersionUID=0x44077bad161cbc00;var Polygonal=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Polygon=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){o.shell=null,o.holes=null}();var s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 3:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=r[2],u=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,s));if(null===i&&(i=u.getFactory().createLinearRing()),null===o&&(o=[]),t.hasNullElements(o))throw new IllegalArgumentException$1("holes must not contain null elements");if(i.isEmpty()&&t.hasNonEmptyElements(o))throw new IllegalArgumentException$1("shell is empty but holes are not");u.shell=i,u.holes=o}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"computeEnvelopeInternal",value:function(){return this.shell.getEnvelopeInternal()}},{key:"getSortIndex",value:function(){return Geometry.SORTINDEX_POLYGON}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()),t=-1,n=this.shell.getCoordinates(),r=0;r<n.length;r++)t++,e[t]=n[r];for(var a=0;a<this.holes.length;a++)for(var i=this.holes[a].getCoordinates(),o=0;o<i.length;o++)t++,e[t]=i[o];return e}},{key:"getArea",value:function(){var e=0;e+=Math.abs(CGAlgorithms.signedArea(this.shell.getCoordinateSequence()));for(var t=0;t<this.holes.length;t++)e-=Math.abs(CGAlgorithms.signedArea(this.holes[t].getCoordinateSequence()));return e}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this.shell)return!1;if(5!==this.shell.getNumPoints())return!1;for(var e=this.shell.getCoordinateSequence(),t=this.getEnvelopeInternal(),n=0;5>n;n++){var r=e.getX(n);if(r!==t.getMinX()&&r!==t.getMaxX())return!1;var a=e.getY(n);if(a!==t.getMinY()&&a!==t.getMaxY())return!1}for(var i=e.getX(0),o=e.getY(0),n=1;4>=n;n++){var r=e.getX(n),a=e.getY(n),s=r!==i,u=a!==o;if(s===u)return!1;i=r,o=a}return!0}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(2===r.length){var i=r[0],o=r[1];if(!this.isEquivalentClass(i))return!1;var s=i,u=this.shell,l=s.shell;if(!u.equalsExact(l,o))return!1;if(this.holes.length!==s.holes.length)return!1;for(var c=0;c<this.holes.length;c++)if(!this.holes[c].equalsExact(s.holes[c],o))return!1;return!0}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"normalize",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];e.normalize(e.shell,!0);for(var a=0;a<e.holes.length;a++)e.normalize(e.holes[a],!1);Arrays.sort(e.holes)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1];if(r.isEmpty())return null;var i=new Array(r.getCoordinates().length-1);System.arraycopy(r.getCoordinates(),0,i,0,i.length);var o=CoordinateArrays.minCoordinate(r.getCoordinates());CoordinateArrays.scroll(i,o),System.arraycopy(i,0,r.getCoordinates(),0,i.length),r.getCoordinates()[i.length]=i[0],CGAlgorithms.isCCW(r.getCoordinates())===a&&CoordinateArrays.reverse(r.getCoordinates())}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getCoordinate",value:function(){return this.shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this.holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var e=0;e+=this.shell.getLength();for(var t=0;t<this.holes.length;t++)e+=this.holes[t].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=this.shell.getNumPoints(),t=0;t<this.holes.length;t++)e+=this.holes[t].getNumPoints();return e}},{key:"reverse",value:function(){var e=this.copy();e.shell=this.shell.clone().reverse(),e.holes=new Array(this.holes.length);for(var t=0;t<this.holes.length;t++)e.holes[t]=this.holes[t].clone().reverse();return e}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"compareToSameClass",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=e.shell,o=a.shell;return i.compareToSameClass(o)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=a,s=e.shell,u=o.shell,l=s.compareToSameClass(u,i);if(0!==l)return l;for(var c=e.getNumInteriorRing(),g=o.getNumInteriorRing(),h=0;c>h&&g>h;){var f=e.getInteriorRingN(h),y=o.getInteriorRingN(h),v=f.compareToSameClass(y,i);if(0!==v)return v;h++}return c>h?1:g>h?-1:0}.apply(void 0,n)}};return a.apply(this,n)}},{key:"apply",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(CoordinateFilter)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];e.shell.apply(a);for(var i=0;i<e.holes.length;i++)e.holes[i].apply(a)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(CoordinateSequenceFilter)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];if(e.shell.apply(a),!a.isDone())for(var i=0;i<e.holes.length&&(e.holes[i].apply(a),!a.isDone());i++);a.isGeometryChanged()&&e.geometryChanged()}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(GeometryFilter)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];a.filter(e)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(GeometryComponentFilter)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];a.filter(e),e.shell.apply(a);for(var i=0;i<e.holes.length;i++)e.holes[i].apply(a)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this.holes.length+1);e[0]=this.shell;for(var t=0;t<this.holes.length;t++)e[t+1]=this.holes[t];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)}},{key:"clone",value:function(){var e=_get(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.shell=this.shell.clone(),e.holes=new Array(this.holes.length);for(var n=0;n<this.holes.length;n++)e.holes[n]=this.holes[n].clone();return e}},{key:"getGeometryType",value:function(){return"Polygon"}},{key:"copy",value:function(){for(var e=this.shell.copy(),n=new Array(this.holes.length),r=0;r<n.length;r++)n[r]=this.holes[r].copy();return new t(e,n,this.factory)}},{key:"getExteriorRing",value:function(){return this.shell}},{key:"isEmpty",value:function(){return this.shell.isEmpty()}},{key:"getInteriorRingN",value:function(e){return this.holes[e]}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Polygonal]}}]),t}(Geometry);Polygon.serialVersionUID=-0x307ffefd8dc97200;var MultiPoint=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 2:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0],o=r[1];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,i,o))}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"getSortIndex",value:function(){return Geometry.SORTINDEX_MULTIPOINT}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(2===r.length){var i=r[0],o=r[1];return this.isEquivalentClass(i)?_get(Object.getPrototypeOf(t.prototype),"equalsExact",this).call(this,i,o):!1}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"getCoordinate",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(1===r.length){var i=r[0];return this.geometries[i].getCoordinate()}return(e=_get(Object.getPrototypeOf(t.prototype),"getCoordinate",this)).call.apply(e,[this].concat(r))}},{key:"getBoundaryDimension",value:function(){return Dimension.FALSE}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection(null)}},{key:"getGeometryType",value:function(){return"MultiPoint"}},{key:"copy",value:function(){for(var e=new Array(this.geometries.length),n=0;n<e.length;n++)e[n]=this.geometries[n].copy();return new t(e,this.factory)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Puntal]}}]),t}(GeometryCollection);MultiPoint.serialVersionUID=-0x6fb1ed4162e0fc00;var LinearRing=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),s=function u(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 2:if(r[0]instanceof Coordinate&&r[1]instanceof GeometryFactory)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1];u.call(o,a.getCoordinateSequenceFactory().create(r),a)}.apply(void 0,r);if(r[0].interfaces_&&r[0].interfaces_.indexOf(CoordinateSequence)>-1&&r[1]instanceof GeometryFactory)return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,i,o));s.validateConstruction()}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"getSortIndex",value:function(){return Geometry.SORTINDEX_LINEARRING}},{key:"getBoundaryDimension",value:function(){return Dimension.FALSE}},{key:"isClosed",value:function(){return this.isEmpty()?!0:_get(Object.getPrototypeOf(t.prototype),"isClosed",this).call(this)}},{key:"reverse",value:function(){var e=this.points.clone();CoordinateSequences.reverse(e);var t=this.getFactory().createLinearRing(e);return t}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!_get(Object.getPrototypeOf(t.prototype),"isClosed",this).call(this))throw new IllegalArgumentException$1("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new IllegalArgumentException$1("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return"LinearRing"}},{key:"copy",value:function(){return new t(this.points.copy(),this.factory)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(LineString);LinearRing.MINIMUM_VALID_SIZE=4,LinearRing.serialVersionUID=-0x3b229e262367a600;var MultiPolygon=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 2:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0],o=r[1];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,i,o))}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"getSortIndex",value:function(){return Geometry.SORTINDEX_MULTIPOLYGON}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(2===r.length){var i=r[0],o=r[1];return this.isEquivalentClass(i)?_get(Object.getPrototypeOf(t.prototype),"equalsExact",this).call(this,i,o):!1}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getDimension",value:function(){return 2}},{key:"reverse",value:function(){for(var e=this.geometries.length,t=new Array(e),n=0;n<this.geometries.length;n++)t[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(t)}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new ArrayList,t=0;t<this.geometries.length;t++)for(var n=this.geometries[t],r=n.getBoundary(),a=0;a<r.getNumGeometries();a++)e.add(r.getGeometryN(a));var i=new Array(e.size());return this.getFactory().createMultiLineString(e.toArray(i))}},{key:"getGeometryType",value:function(){return"MultiPolygon"}},{key:"copy",value:function(){for(var e=new Array(this.geometries.length),n=0;n<e.length;n++)e[n]=this.geometries[n].copy();return new t(e,this.factory)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Polygonal]}}]),t}(GeometryCollection);MultiPolygon.serialVersionUID=-0x7a5aa1369171980;var GeometryEditor=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.factory=null,t.isUserDataCopied=!1}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.factory=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"setCopyUserData",value:function(e){this.isUserDataCopied=e}},{key:"edit",value:function(e,t){if(null===e)return null;var n=this.editInternal(e,t);return this.isUserDataCopied&&n.setUserData(e.getUserData()),n}},{key:"editInternal",value:function(e,t){return null===this.factory&&(this.factory=e.getFactory()),e instanceof GeometryCollection?this.editGeometryCollection(e,t):e instanceof Polygon?this.editPolygon(e,t):e instanceof Point?t.edit(e,this.factory):e instanceof LineString?t.edit(e,this.factory):(Assert.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)}},{key:"editGeometryCollection",value:function(e,t){for(var n=t.edit(e,this.factory),r=new ArrayList,a=0;a<n.getNumGeometries();a++){var i=this.edit(n.getGeometryN(a),t);null===i||i.isEmpty()||r.add(i)}return n.getClass()===MultiPoint?this.factory.createMultiPoint(r.toArray([])):n.getClass()===MultiLineString?this.factory.createMultiLineString(r.toArray([])):n.getClass()===MultiPolygon?this.factory.createMultiPolygon(r.toArray([])):this.factory.createGeometryCollection(r.toArray([]))}},{key:"editPolygon",value:function(e,t){var n=t.edit(e,this.factory);if(null===n&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),t);if(null===r||r.isEmpty())return this.factory.createPolygon();for(var a=new ArrayList,i=0;i<n.getNumInteriorRing();i++){var o=this.edit(n.getInteriorRingN(i),t);null===o||o.isEmpty()||a.add(o)}return this.factory.createPolygon(r,a.toArray([]))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"NoOpGeometryOperation",get:function(){return NoOpGeometryOperation}},{key:"CoordinateOperation",get:function(){return CoordinateOperation}},{key:"CoordinateSequenceOperation",get:function(){return CoordinateSequenceOperation$1}}]),e}(),NoOpGeometryOperation=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"edit",value:function(e,t){return e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryEditorOperation]}}]),e}(),CoordinateOperation=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"edit",value:function(e,t){if(e instanceof LinearRing)return t.createLinearRing(this.edit(e.getCoordinates(),e));if(e instanceof LineString)return t.createLineString(this.edit(e.getCoordinates(),e));if(e instanceof Point){var n=this.edit(e.getCoordinates(),e);return n.length>0?t.createPoint(n[0]):t.createPoint()}return e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryEditorOperation]}}]),e}(),CoordinateSequenceOperation$1=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"edit",value:function(e,t){return e instanceof LinearRing?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof LineString?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof Point?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryEditorOperation]}}]),e}(),CoordinateArraySequence=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.dimension=3,t.coordinates=null}();var i=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof Array)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];o.call(t,a,3)}.apply(void 0,n);if(Number.isInteger(n[0]))return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.coordinates=new Array(a);for(var i=0;a>i;i++)t.coordinates[i]=new Coordinate}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(CoordinateSequence)>-1)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];if(null===a)return t.coordinates=new Array(0),null;t.dimension=a.getDimension(),t.coordinates=new Array(a.size());for(var i=0;i<t.coordinates.length;i++)t.coordinates[i]=a.getCoordinateCopy(i)}.apply(void 0,n);case 2:if(n[0]instanceof Array&&Number.isInteger(n[1]))return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.coordinates=a,t.dimension=i,null===a&&(t.coordinates=new Array(0))}.apply(void 0,n);if(Number.isInteger(n[0])&&Number.isInteger(n[1]))return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.coordinates=new Array(a),t.dimension=i;for(var o=0;a>o;o++)t.coordinates[o]=new Coordinate}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"setOrdinate",value:function(e,t,n){switch(t){case CoordinateSequence.X:this.coordinates[e].x=n;break;case CoordinateSequence.Y:this.coordinates[e].y=n;break;case CoordinateSequence.Z:this.coordinates[e].z=n;break;default:throw new IllegalArgumentException$1("invalid ordinateIndex")}}},{key:"size",value:function(){return this.coordinates.length}},{key:"getOrdinate",value:function(e,t){switch(t){case CoordinateSequence.X:return this.coordinates[e].x;case CoordinateSequence.Y:return this.coordinates[e].y;case CoordinateSequence.Z:return this.coordinates[e].z}return Double.NaN}},{key:"getCoordinate",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.coordinates[a]}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];i.x=e.coordinates[a].x,i.y=e.coordinates[a].y,i.z=e.coordinates[a].z}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getCoordinateCopy",value:function(e){return new Coordinate(this.coordinates[e])}},{key:"getDimension",value:function(){return this.dimension}},{key:"getX",value:function(e){return this.coordinates[e].x}},{key:"clone",value:function(){for(var t=new Array(this.size()),n=0;n<this.coordinates.length;n++)t[n]=this.coordinates[n].clone();return new e(t,this.dimension)}},{key:"expandEnvelope",value:function(e){for(var t=0;t<this.coordinates.length;t++)e.expandToInclude(this.coordinates[t]);return e}},{key:"copy",value:function(){for(var t=new Array(this.size()),n=0;n<this.coordinates.length;n++)t[n]=this.coordinates[n].copy();return new e(t,this.dimension)}},{key:"toString",value:function(){if(this.coordinates.length>0){var e=new StringBuffer(17*this.coordinates.length);e.append("("),e.append(this.coordinates[0]);for(var t=1;t<this.coordinates.length;t++)e.append(", "),e.append(this.coordinates[t]);return e.append(")"),e.toString()}return"()"}},{key:"getY",value:function(e){return this.coordinates[e].y}},{key:"toCoordinateArray",value:function(){return this.coordinates}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[CoordinateSequence,Serializable]}}]),e}();CoordinateArraySequence.serialVersionUID=-0xcb44a778db18e00;var CoordinateArraySequenceFactory=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];_classCallCheck(this,e);var a=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return a.apply(this,n)}return _createClass(e,[{key:"readResolve",value:function(){return e.instance()}},{key:"create",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:if(t[0]instanceof Array)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];return new CoordinateArraySequence(r)}.apply(void 0,t);if(t[0].interfaces_&&t[0].interfaces_.indexOf(CoordinateSequence)>-1)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];return new CoordinateArraySequence(r)}.apply(void 0,t);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1];return a>3&&(a=3),2>a?new CoordinateArraySequence(r):new CoordinateArraySequence(r,a)}.apply(void 0,t)}};return r.apply(this,t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[CoordinateSequenceFactory,Serializable]}}],[{key:"instance",value:function(){return e.instanceObject}}]),e}();CoordinateArraySequenceFactory.serialVersionUID=-0x38e49fa6cf6f2e00,CoordinateArraySequenceFactory.instanceObject=new CoordinateArraySequenceFactory,HashMap.prototype=new Map$1,HashMap.prototype.get=function(e){return this.map_.get(e)||null},HashMap.prototype.put=function(e,t){return this.map_.set(e,t),t},HashMap.prototype.values=function(){var e=new ArrayList;return Array.from(this.map_.values()).forEach(function(t){return e.add(t)}),e},HashMap.prototype.entrySet=function(){var e=new HashSet;return this.map_.entries().forEach(function(t){return e.add(t)}),e},HashMap.prototype.size=function(){return this.map_.size()};var PrecisionModel=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.modelType=null,t.scale=null}();var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 0:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];t.modelType=e.FLOATING}.apply(void 0,r);case 1:if(r[0]instanceof Type)return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];t.modelType=i,i===e.FIXED&&t.setScale(1)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];t.modelType=e.FIXED,t.setScale(i)}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.modelType=a.modelType,t.scale=a.scale}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.modelType===n.modelType&&this.scale===n.scale}},{key:"compareTo",value:function(e){var t=e,n=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return new Integer(n).compareTo(new Integer(r))}},{key:"getScale",value:function(){return this.scale}},{key:"isFloating",value:function(){return this.modelType===e.FLOATING||this.modelType===e.FLOATING_SINGLE}},{key:"getType",value:function(){return this.modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this.modelType===e.FLOATING?t="Floating":this.modelType===e.FLOATING_SINGLE?t="Floating-Single":this.modelType===e.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if("number"==typeof r[0])return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];if(Double.isNaN(i))return i;if(t.modelType===e.FLOATING_SINGLE){var o=i;return o}return t.modelType===e.FIXED?Math.round(i*t.scale)/t.scale:i;
}.apply(void 0,r);if(r[0]instanceof Coordinate)return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];return t.modelType===e.FLOATING?null:(i.x=t.makePrecise(i.x),void(i.y=t.makePrecise(i.y)))}.apply(void 0,r)}};return i.apply(this,r)}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this.modelType===e.FLOATING?t=16:this.modelType===e.FLOATING_SINGLE?t=6:this.modelType===e.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(e){this.scale=Math.abs(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Serializable,Comparable]}}],[{key:"mostPrecise",value:function(e,t){return e.compareTo(t)>=0?e:t}},{key:"Type",get:function(){return Type}}]),e}(),Type=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.name=null}();var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];t.name=i,e.nameToTypeMap.put(i,t)}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"readResolve",value:function(){return e.nameToTypeMap.get(this.name)}},{key:"toString",value:function(){return this.name}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Serializable]}}]),e}();Type.serialVersionUID=-552860263173159e4,Type.nameToTypeMap=new HashMap,PrecisionModel.serialVersionUID=0x6bee6404e9a25c00,PrecisionModel.FIXED=new Type("FIXED"),PrecisionModel.FLOATING=new Type("FLOATING"),PrecisionModel.FLOATING_SINGLE=new Type("FLOATING SINGLE"),PrecisionModel.maximumPreciseValue=9007199254740992;var GeometryFactory=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.precisionModel=null,t.coordinateSequenceFactory=null,t.SRID=null}();var i=function o(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];o.call(t,new PrecisionModel,0)}.apply(void 0,r);case 1:if(r[0].interfaces_&&r[0].interfaces_.indexOf(CoordinateSequenceFactory)>-1)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];o.call(t,new PrecisionModel,0,a)}.apply(void 0,r);if(r[0]instanceof PrecisionModel)return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];o.call(t,i,0,e.getDefaultCoordinateSequenceFactory())}.apply(void 0,r);case 2:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],s=r[1];o.call(t,i,s,e.getDefaultCoordinateSequenceFactory())}.apply(void 0,r);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];t.precisionModel=a,t.coordinateSequenceFactory=o,t.SRID=i}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"toGeometry",value:function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new Coordinate(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new Coordinate(e.getMinX(),e.getMinY()),new Coordinate(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new Coordinate(e.getMinX(),e.getMinY()),new Coordinate(e.getMinX(),e.getMaxY()),new Coordinate(e.getMaxX(),e.getMaxY()),new Coordinate(e.getMaxX(),e.getMinY()),new Coordinate(e.getMinX(),e.getMinY())]),null)}},{key:"createLineString",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.createLineString(e.getCoordinateSequenceFactory().create([]))}.apply(void 0,n);case 1:if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.createLineString(null!==a?e.getCoordinateSequenceFactory().create(a):null)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(CoordinateSequence)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return new LineString(a,e)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"createMultiLineString",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return new MultiLineString(null,e)}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return new MultiLineString(a,e)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"buildGeometry",value:function(t){for(var n=null,r=!1,a=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===n&&(n=s),s!==n&&(r=!0),o.isGeometryCollectionOrDerived()&&(a=!0)}if(null===n)return this.createGeometryCollection();if(r||a)return this.createGeometryCollection(e.toGeometryArray(t));var u=t.iterator().next(),l=t.size()>1;if(l){if(u instanceof Polygon)return this.createMultiPolygon(e.toPolygonArray(t));if(u instanceof LineString)return this.createMultiLineString(e.toLineStringArray(t));if(u instanceof Point)return this.createMultiPoint(e.toPointArray(t));Assert.shouldNeverReachHere("Unhandled class: "+u.getClass().getName())}return u}},{key:"createMultiPointFromCoords",value:function(e){return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}},{key:"createPoint",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.createPoint(e.getCoordinateSequenceFactory().create([]))}.apply(void 0,n);case 1:if(n[0]instanceof Coordinate)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.createPoint(null!==a?e.getCoordinateSequenceFactory().create([a]):null)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(CoordinateSequence)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return new Point(a,e)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getCoordinateSequenceFactory",value:function(){return this.coordinateSequenceFactory}},{key:"createPolygon",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return new Polygon(null,null,e)}.apply(void 0,n);case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(CoordinateSequence)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.createPolygon(e.createLinearRing(a))}.apply(void 0,n);if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.createPolygon(e.createLinearRing(a))}.apply(void 0,n);if(n[0]instanceof LinearRing)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.createPolygon(a,null)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return new Polygon(a,i,e)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getSRID",value:function(){return this.SRID}},{key:"createGeometryCollection",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return new GeometryCollection(null,e)}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return new GeometryCollection(a,e)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"createGeometry",value:function(e){var t=new GeometryEditor(this);return t.edit(e,new(function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"edit",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(2===r.length){var i=r[0];r[1];return this.coordinateSequenceFactory.create(i)}return(e=_get(Object.getPrototypeOf(t.prototype),"edit",this)).call.apply(e,[this].concat(r))}}]),t}(CoordinateSequenceOperation)))}},{key:"getPrecisionModel",value:function(){return this.precisionModel}},{key:"createLinearRing",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.createLinearRing(e.getCoordinateSequenceFactory().create([]))}.apply(void 0,n);case 1:if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.createLinearRing(null!==a?e.getCoordinateSequenceFactory().create(a):null)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(CoordinateSequence)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return new LinearRing(a,e)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"createMultiPolygon",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return new MultiPolygon(null,e)}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return new MultiPolygon(a,e)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"createMultiPoint",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return new MultiPoint(null,e)}.apply(void 0,n);case 1:if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return new MultiPoint(a,e)}.apply(void 0,n);if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.createMultiPoint(null!==a?e.getCoordinateSequenceFactory().create(a):null)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(CoordinateSequence)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];if(null===a)return e.createMultiPoint(new Array(0));for(var i=new Array(a.size()),o=0;o<a.size();o++){var s=e.getCoordinateSequenceFactory().create(1,a.getDimension());CoordinateSequences.copy(a,o,s,0,1),i[o]=e.createPoint(s)}return e.createMultiPoint(i)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Serializable]}}],[{key:"toMultiPolygonArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toGeometryArray",value:function(e){if(null===e)return null;var t=new Array(e.size());return e.toArray(t)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return CoordinateArraySequenceFactory.instance()}},{key:"toMultiLineStringArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toLineStringArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toMultiPointArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toLinearRingArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toPointArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toPolygonArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"createPointFromInternalCoord",value:function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)}}]),e}();GeometryFactory.serialVersionUID=-0x5ea75f2051eeb400;var geometryTypes=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],GeoJSONParser=function(){function e(t){_classCallCheck(this,e),this.geometryFactory=t||new GeometryFactory}return _createClass(e,[{key:"read",value:function(e){var t;t="string"==typeof e?JSON.parse(e):e;var n=t.type;if(!parse[n])throw new Error("Unknown GeoJSON type: "+t.type);return-1!==geometryTypes.indexOf(n)?parse[n].apply(this,[t.coordinates]):"GeometryCollection"===n?parse[n].apply(this,[t.geometries]):this.parse[n].apply(this,[t])}},{key:"write",value:function(e){var t=e.getGeometryType();if(!extract[t])throw new Error("Geometry is not supported");return extract[t].apply(this,[e])}}]),e}(),parse={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var r=e.geometry.type;if(!this.parse[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=this.parse.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t={};if(e.features){t.features=[];for(var n=0;n<e.features.length;++n)t.features.push(this.read(e.features[n]))}return e.bbox&&(t.bbox=this.parse.bbox.apply(this,[e.bbox])),t},coordinates:function v(e){for(var v=[],t=0;t<e.length;++t){var n=e[t];v.push(new Coordinate(n[0],n[1]))}return v},bbox:function(e){return this.geometryFactory.createLinearRing([new Coordinate(e[0],e[1]),new Coordinate(e[2],e[1]),new Coordinate(e[2],e[3]),new Coordinate(e[0],e[3]),new Coordinate(e[0],e[1])])},Point:function(e){var t=new Coordinate(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=[],n=0;n<e.length;++n)t.push(parse.Point.apply(this,[e[n]]));return this.geometryFactory.createMultiPoint(t)},LineString:function(e){var t=parse.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=[],n=0;n<e.length;++n)t.push(parse.LineString.apply(this,[e[n]]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(e){for(var t=parse.coordinates.apply(this,[e[0]]),n=this.geometryFactory.createLinearRing(t),r=[],a=1;a<e.length;++a){var i=e[a],o=parse.coordinates.apply(this,[i]),s=this.geometryFactory.createLinearRing(o);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(parse.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(this.read(r))}return this.geometryFactory.createGeometryCollection(t)}},extract={coordinate:function(e){return[e.x,e.y]},Point:function(e){var t=extract.coordinate.apply(this,[e.getCoordinate()]);return{type:"Point",coordinates:t}},MultiPoint:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var r=e.geometries[n],a=extract.Point.apply(this,[r]);t.push(a.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(e){for(var t=[],n=0;n<e.points.length;++n){var r=e.points[n];t.push(extract.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:t}},MultiLineString:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var r=e.geometries[n],a=extract.LineString.apply(this,[r]);t.push(a.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(e){var t=[],n=extract.LineString.apply(this,[e.shell]);t.push(n.coordinates);for(var r=0;r<e.holes.length;++r){var a=e.holes[r],i=extract.LineString.apply(this,[a]);t.push(i.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var r=e.geometries[n],a=extract.Polygon.apply(this,[r]);t.push(a.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var r=e.geometries[n],a=r.getGeometryType().slice(10);t.push(extract[a].apply(this,[r]))}return{type:"GeometryCollection",geometries:t}}},GeoJSONReader=function(){function e(t){_classCallCheck(this,e),this.geometryFactory=t||new GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new GeoJSONParser(this.geometryFactory)}return _createClass(e,[{key:"read",value:function(e){var t=this.parser.read(e);return this.precisionModel.getType()===PrecisionModel.FIXED&&this.reducePrecision(t),t}},{key:"reducePrecision",value:function(e){var t,n;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(t=0,n=e.points.length;n>t;t++)this.precisionModel.makePrecise(e.points[t]);else if(e.geometries)for(t=0,n=e.geometries.length;n>t;t++)this.reducePrecision(e.geometries[t])}}]),e}(),GeoJSONWriter=function(){function e(){_classCallCheck(this,e),this.parser=new GeoJSONParser(this.geometryFactory)}return _createClass(e,[{key:"write",value:function(e){return this.parser.write(e)}}]),e}(),WKTReader=function(){function e(t){_classCallCheck(this,e),this.geometryFactory=t||new GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new WKTParser(this.geometryFactory)}return _createClass(e,[{key:"read",value:function(e){var t=this.parser.read(e);return this.precisionModel.getType()===PrecisionModel.FIXED&&this.reducePrecision(t),t}},{key:"reducePrecision",value:function(e){var t,n;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(t=0,n=e.points.coordinates.length;n>t;t++)this.precisionModel.makePrecise(e.points.coordinates[t]);else if(e.geometries)for(t=0,n=e.geometries.length;n>t;t++)this.reducePrecision(e.geometries[t])}}]),e}(),olParser=function(){function e(t){_classCallCheck(this,e),this.geometryFactory=t||new GeometryFactory}return _createClass(e,[{key:"read",value:function(e){return e instanceof ol.geom.Point?this.convertFromPoint(e):e instanceof ol.geom.LineString?this.convertFromLineString(e):e instanceof ol.geom.LinearRing?this.convertFromLinearRing(e):e instanceof ol.geom.Polygon?this.convertFromPolygon(e):e instanceof ol.geom.MultiPoint?this.convertFromMultiPoint(e):e instanceof ol.geom.MultiLineString?this.convertFromMultiLineString(e):e instanceof ol.geom.MultiPolygon?this.convertFromMultiPolygon(e):e instanceof ol.geom.GeometryCollection?this.convertFromCollection(e):void 0}},{key:"convertFromPoint",value:function(e){var t=e.getCoordinates();return this.geometryFactory.createPoint(new Coordinate(t[0],t[1]))}},{key:"convertFromLineString",value:function(e){return this.geometryFactory.createLineString(e.getCoordinates().map(function(e){return new Coordinate(e[0],e[1])}))}},{key:"convertFromLinearRing",value:function(e){return this.geometryFactory.createLinearRing(e.getCoordinates().map(function(e){return new Coordinate(e[0],e[1])}))}},{key:"convertFromPolygon",value:function(e){for(var t=e.getLinearRings(),n=null,r=[],a=0;a<t.length;a++){var i=this.convertFromLinearRing(t[a]);0===a?n=i:r.push(i)}return this.geometryFactory.createPolygon(n,r)}},{key:"convertFromMultiPoint",value:function(e){var t=e.getPoints().map(function(e){return this.convertFromPoint(e)},this);return this.geometryFactory.createMultiPoint(t)}},{key:"convertFromMultiLineString",value:function(e){var t=e.getLineStrings().map(function(e){return this.convertFromLineString(e)},this);return this.geometryFactory.createMultiLineString(t)}},{key:"convertFromMultiPolygon",value:function(e){var t=e.getPolygons().map(function(e){return this.convertFromPolygon(e)},this);return this.geometryFactory.createMultiPolygon(t)}},{key:"convertFromCollection",value:function(e){var t=e.getGeometries().map(function(e){return this.read(e)},this);return this.geometryFactory.createGeometryCollection(t)}},{key:"write",value:function(e){return"Point"===e.getGeometryType()?this.convertToPoint(e.getCoordinate()):"LineString"===e.getGeometryType()?this.convertToLineString(e):"LinearRing"===e.getGeometryType()?this.convertToLinearRing(e):"Polygon"===e.getGeometryType()?this.convertToPolygon(e):"MultiPoint"===e.getGeometryType()?this.convertToMultiPoint(e):"MultiLineString"===e.getGeometryType()?this.convertToMultiLineString(e):"MultiPolygon"===e.getGeometryType()?this.convertToMultiPolygon(e):"GeometryCollection"===e.getGeometryType()?this.convertToCollection(e):void 0}},{key:"convertToPoint",value:function(e){return new ol.geom.Point([e.x,e.y])}},{key:"convertToLineString",value:function(e){var t=e.points.coordinates.map(p2c);return new ol.geom.LineString(t)}},{key:"convertToLinearRing",value:function(e){var t=e.points.coordinates.map(p2c);return new ol.geom.LinearRing(t)}},{key:"convertToPolygon",value:function(e){for(var t=[e.shell.points.coordinates.map(p2c)],n=0;n<e.holes.length;n++)t.push(e.holes[n].points.coordinates.map(p2c));return new ol.geom.Polygon(t)}},{key:"convertToMultiPoint",value:function(e){return new ol.geom.MultiPoint(e.getCoordinates().map(p2c))}},{key:"convertToMultiLineString",value:function(e){for(var t=[],n=0;n<e.geometries.length;n++)t.push(this.convertToLineString(e.geometries[n]).getCoordinates());return new ol.geom.MultiLineString(t)}},{key:"convertToMultiPolygon",value:function(e){for(var t=[],n=0;n<e.geometries.length;n++)t.push(this.convertToPolygon(e.geometries[n]).getCoordinates());return new ol.geom.MultiPolygon(t)}},{key:"convertToCollection",value:function(e){for(var t=[],n=0;n<e.geometries.length;n++){var r=e.geometries[n];t.push(this.write(r))}return new ol.geom.GeometryCollection(t)}}]),e}(),GeometryCollectionMapper$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.mapOp=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.mapOp=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"map",value:function(e){for(var t=new ArrayList,n=0;n<e.getNumGeometries();n++){var r=this.mapOp.map(e.getGeometryN(n));r.isEmpty()||t.add(r)}return e.getFactory().createGeometryCollection(GeometryFactory.toGeometryArray(t))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"map",value:function(t,n){var r=new e(n);return r.map(t)}}]),e}(),Position=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"opposite",value:function(t){return t===e.LEFT?e.RIGHT:t===e.RIGHT?e.LEFT:t}}]),e}();Position.ON=0,Position.LEFT=1,Position.RIGHT=2;var TopologyException=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){o.pt=null}();var s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 1:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,i))}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,t.msgWithCoord(i,o)));s.pt=new Coordinate(o)}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"getCoordinate",value:function(){return this.pt}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"msgWithCoord",value:function(e,t){return null!==t?e+" [ "+t+" ]":e}}]),t}(RuntimeException),TopologyLocation=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.location=null}();var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof Array)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.init(a.length)}.apply(void 0,r);if(Number.isInteger(r[0]))return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.init(1),t.location[Position.ON]=a}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];if(t.init(a.location.length),null!==a)for(var i=0;i<t.location.length;i++)t.location[i]=a.location[i]}.apply(void 0,r);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];t.init(3),t.location[Position.ON]=a,t.location[Position.LEFT]=i,t.location[Position.RIGHT]=o}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"setAllLocations",value:function(e){for(var t=0;t<this.location.length;t++)this.location[t]=e}},{key:"isNull",value:function(){for(var e=0;e<this.location.length;e++)if(this.location[e]!==Location.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(e){for(var t=0;t<this.location.length;t++)this.location[t]===Location.NONE&&(this.location[t]=e)}},{key:"isLine",value:function(){return 1===this.location.length}},{key:"merge",value:function(e){if(e.location.length>this.location.length){var t=new Array(3);t[Position.ON]=this.location[Position.ON],t[Position.LEFT]=Location.NONE,t[Position.RIGHT]=Location.NONE,this.location=t}for(var n=0;n<this.location.length;n++)this.location[n]===Location.NONE&&n<e.location.length&&(this.location[n]=e.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var e=this.location[Position.LEFT];this.location[Position.LEFT]=this.location[Position.RIGHT],this.location[Position.RIGHT]=e}},{key:"toString",value:function(){var e=new StringBuffer;return this.location.length>1&&e.append(Location.toLocationSymbol(this.location[Position.LEFT])),e.append(Location.toLocationSymbol(this.location[Position.ON])),this.location.length>1&&e.append(Location.toLocationSymbol(this.location[Position.RIGHT])),e.toString()}},{key:"setLocations",value:function(e,t,n){this.location[Position.ON]=e,this.location[Position.LEFT]=t,this.location[Position.RIGHT]=n}},{key:"get",value:function(e){return e<this.location.length?this.location[e]:Location.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var e=0;e<this.location.length;e++)if(this.location[e]===Location.NONE)return!0;return!1}},{key:"setLocation",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];e.setLocation(Position.ON,a)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];e.location[a]=i}.apply(void 0,n)}};return a.apply(this,n)}},{key:"init",value:function(e){this.location=new Array(e),this.setAllLocations(Location.NONE)}},{key:"isEqualOnSide",value:function(e,t){return this.location[t]===e.location[t]}},{key:"allPositionsEqual",value:function(e){for(var t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Label=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.elt=new Array(2)}();var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(Number.isInteger(r[0]))return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.elt[0]=new TopologyLocation(a),t.elt[1]=new TopologyLocation(a)}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.elt[0]=new TopologyLocation(a.elt[0]),t.elt[1]=new TopologyLocation(a.elt[1])}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.elt[0]=new TopologyLocation(Location.NONE),t.elt[1]=new TopologyLocation(Location.NONE),t.elt[a].setLocation(i)}.apply(void 0,r);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];t.elt[0]=new TopologyLocation(a,i,o),t.elt[1]=new TopologyLocation(a,i,o)}.apply(void 0,r);case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=n[3];t.elt[0]=new TopologyLocation(Location.NONE,Location.NONE,Location.NONE),t.elt[1]=new TopologyLocation(Location.NONE,Location.NONE,Location.NONE),t.elt[a].setLocations(i,o,s)}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"getGeometryCount",value:function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e}},{key:"setAllLocations",value:function(e,t){this.elt[e].setAllLocations(t)}},{key:"isNull",value:function(e){return this.elt[e].isNull()}},{key:"setAllLocationsIfNull",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];e.setAllLocationsIfNull(0,a),e.setAllLocationsIfNull(1,a)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];e.elt[a].setAllLocationsIfNull(i)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"isLine",value:function(e){return this.elt[e].isLine()}},{key:"merge",value:function(e){for(var t=0;2>t;t++)null===this.elt[t]&&null!==e.elt[t]?this.elt[t]=new TopologyLocation(e.elt[t]):this.elt[t].merge(e.elt[t])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.elt[a].get(Position.ON)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return e.elt[a].get(i)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"toString",value:function(){var e=new StringBuffer;return null!==this.elt[0]&&(e.append("A:"),e.append(this.elt[0].toString())),null!==this.elt[1]&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()}},{key:"isArea",value:function(){
for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.elt[0].isArea()||e.elt[1].isArea()}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.elt[a].isArea()}.apply(void 0,n)}};return a.apply(this,n)}},{key:"isAnyNull",value:function(e){return this.elt[e].isAnyNull()}},{key:"setLocation",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];e.elt[a].setLocation(Position.ON,i)}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];e.elt[a].setLocation(i,o)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"isEqualOnSide",value:function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)}},{key:"allPositionsEqual",value:function(e,t){return this.elt[e].allPositionsEqual(t)}},{key:"toLine",value:function(e){this.elt[e].isArea()&&(this.elt[e]=new TopologyLocation(this.elt[e].location[0]))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toLineLabel",value:function(t){for(var n=new e(Location.NONE),r=0;2>r;r++)n.setLocation(r,t.getLocation(r));return n}}]),e}(),EdgeRing=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.startDe=null,t.maxNodeDegree=-1,t.edges=new ArrayList,t.pts=new ArrayList,t.label=new Label(Location.NONE),t.ring=null,t._isHole=null,t.shell=null,t.holes=new ArrayList,t.geometryFactory=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.geometryFactory=i,t.computePoints(a),t.computeRing()}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"computeRing",value:function(){if(null!==this.ring)return null;for(var e=new Array(this.pts.size()),t=0;t<this.pts.size();t++)e[t]=this.pts.get(t);this.ring=this.geometryFactory.createLinearRing(e),this._isHole=CGAlgorithms.isCCW(this.ring.getCoordinates())}},{key:"isIsolated",value:function(){return 1===this.label.getGeometryCount()}},{key:"computePoints",value:function(e){this.startDe=e;var t=e,n=!0;do{if(null===t)throw new TopologyException("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new TopologyException("Directed Edge visited twice during ring-building at "+t.getCoordinate());this.edges.add(t);var r=t.getLabel();Assert.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(t.getEdge(),t.isForward(),n),n=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this.startDe)}},{key:"getLinearRing",value:function(){return this.ring}},{key:"getCoordinate",value:function(e){return this.pts.get(e)}},{key:"computeMaxNodeDegree",value:function(){this.maxNodeDegree=0;var e=this.startDe;do{var t=e.getNode(),n=t.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),e=this.getNext(e)}while(e!==this.startDe);this.maxNodeDegree*=2}},{key:"addPoints",value:function(e,t,n){var r=e.getCoordinates();if(t){var a=1;n&&(a=0);for(var i=a;i<r.length;i++)this.pts.add(r[i])}else{var a=r.length-2;n&&(a=r.length-1);for(var i=a;i>=0;i--)this.pts.add(r[i])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var e=this.startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!==this.startDe)}},{key:"containsPoint",value:function(e){var t=this.getLinearRing(),n=t.getEnvelopeInternal();if(!n.contains(e))return!1;if(!CGAlgorithms.isPointInRing(e,t.getCoordinates()))return!1;for(var r=this.holes.iterator();r.hasNext();){var a=r.next();if(a.containsPoint(e))return!1}return!0}},{key:"addHole",value:function(e){this.holes.add(e)}},{key:"isShell",value:function(){return null===this.shell}},{key:"getLabel",value:function(){return this.label}},{key:"getEdges",value:function(){return this.edges}},{key:"getMaxNodeDegree",value:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree}},{key:"getShell",value:function(){return this.shell}},{key:"mergeLabel",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];e.mergeLabel(a,0),e.mergeLabel(a,1)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=a.getLocation(i,Position.RIGHT);return o===Location.NONE?null:e.label.getLocation(i)===Location.NONE?(e.label.setLocation(i,o),null):void 0}.apply(void 0,n)}};return a.apply(this,n)}},{key:"setShell",value:function(e){this.shell=e,null!==e&&e.addHole(this)}},{key:"toPolygon",value:function(e){for(var t=new Array(this.holes.size()),n=0;n<this.holes.size();n++)t[n]=this.holes.get(n).getLinearRing();var r=e.createPolygon(this.getLinearRing(),t);return r}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),MinimalEdgeRing=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 2:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0],o=r[1];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,i,o))}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"setEdgeRing",value:function(e,t){e.setMinEdgeRing(t)}},{key:"getNext",value:function(e){return e.getNextMin()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(EdgeRing),MaximalEdgeRing=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 2:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0],o=r[1];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,i,o))}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"buildMinimalRings",value:function(){var e=new ArrayList,t=this.startDe;do{if(null===t.getMinEdgeRing()){var n=new MinimalEdgeRing(t,this.geometryFactory);e.add(n)}t=t.getNext()}while(t!==this.startDe);return e}},{key:"setEdgeRing",value:function(e,t){e.setEdgeRing(t)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var e=this.startDe;do{var t=e.getNode();t.getEdges().linkMinimalDirectedEdges(this),e=e.getNext()}while(e!==this.startDe)}},{key:"getNext",value:function(e){return e.getNext()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(EdgeRing),PointOnGeometryLocator=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"locate",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),GeometryCollectionIterator=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.parent=null,t.atStart=null,t.max=null,t.index=null,t.subcollectionIterator=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.parent=a,t.atStart=!0,t.index=0,t.max=a.getNumGeometries()}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"next",value:function(){if(this.atStart)return this.atStart=!1,e.isAtomic(this.parent)&&this.index++,this.parent;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new NoSuchElementException;var t=this.parent.getGeometryN(this.index++);return t instanceof GeometryCollection?(this.subcollectionIterator=new e(t),this.subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new UnsupportedOperationException(this.getClass().getName())}},{key:"hasNext",value:function(){if(this.atStart)return!0;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return this.index>=this.max?!1:!0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Iterator]}}],[{key:"isAtomic",value:function(e){return!(e instanceof GeometryCollection)}}]),e}(),SimplePointInAreaLocator=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.geom=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.geom=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"locate",value:function(t){return e.locate(t,this.geom)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[PointOnGeometryLocator]}}],[{key:"isPointInRing",value:function(e,t){return t.getEnvelopeInternal().intersects(e)?CGAlgorithms.isPointInRing(e,t.getCoordinates()):!1}},{key:"containsPointInPolygon",value:function(t,n){if(n.isEmpty())return!1;var r=n.getExteriorRing();if(!e.isPointInRing(t,r))return!1;for(var a=0;a<n.getNumInteriorRing();a++){var i=n.getInteriorRingN(a);if(e.isPointInRing(t,i))return!1}return!0}},{key:"containsPoint",value:function(t,n){if(n instanceof Polygon)return e.containsPointInPolygon(t,n);if(n instanceof GeometryCollection)for(var r=new GeometryCollectionIterator(n);r.hasNext();){var a=r.next();if(a!==n&&e.containsPoint(t,a))return!0}return!1}},{key:"locate",value:function(t,n){return n.isEmpty()?Location.EXTERIOR:e.containsPoint(t,n)?Location.INTERIOR:Location.EXTERIOR}}]),e}(),EdgeEndStar=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.edgeMap=new TreeMap,t.edgeList=null,t.ptInAreaLocation=[Location.NONE,Location.NONE]}();var i=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return i.apply(this,r)}return _createClass(e,[{key:"getNextCW",value:function(e){this.getEdges();var t=this.edgeList.indexOf(e),n=t-1;return 0===t&&(n=this.edgeList.size()-1),this.edgeList.get(n)}},{key:"propagateSideLabels",value:function(e){for(var t=Location.NONE,n=this.iterator();n.hasNext();){var r=n.next(),a=r.getLabel();a.isArea(e)&&a.getLocation(e,Position.LEFT)!==Location.NONE&&(t=a.getLocation(e,Position.LEFT))}if(t===Location.NONE)return null;for(var i=t,n=this.iterator();n.hasNext();){var r=n.next(),a=r.getLabel();if(a.getLocation(e,Position.ON)===Location.NONE&&a.setLocation(e,Position.ON,i),a.isArea(e)){var o=a.getLocation(e,Position.LEFT),s=a.getLocation(e,Position.RIGHT);if(s!==Location.NONE){if(s!==i)throw new TopologyException("side location conflict",r.getCoordinate());o===Location.NONE&&Assert.shouldNeverReachHere("found single null side (at "+r.getCoordinate()+")"),i=o}else Assert.isTrue(a.getLocation(e,Position.LEFT)===Location.NONE,"found single null side"),a.setLocation(e,Position.RIGHT,i),a.setLocation(e,Position.LEFT,i)}}}},{key:"getCoordinate",value:function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()}},{key:"print",value:function(e){System.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}}},{key:"isAreaLabelsConsistent",value:function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,r=t.get(n).getLabel(),a=r.getLocation(e,Position.LEFT);Assert.isTrue(a!==Location.NONE,"Found unlabelled area edge");for(var i=a,o=this.iterator();o.hasNext();){var s=o.next(),u=s.getLabel();Assert.isTrue(u.isArea(e),"Found non-area edge");var l=u.getLocation(e,Position.LEFT),c=u.getLocation(e,Position.RIGHT);if(l===c)return!1;if(c!==i)return!1;i=l}return!0}},{key:"findIndex",value:function(e){this.iterator();for(var t=0;t<this.edgeList.size();t++){var n=this.edgeList.get(t);if(n===e)return t}return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===this.edgeList&&(this.edgeList=new ArrayList(this.edgeMap.values())),this.edgeList}},{key:"getLocation",value:function(e,t,n){return this.ptInAreaLocation[e]===Location.NONE&&(this.ptInAreaLocation[e]=SimplePointInAreaLocator.locate(t,n[e].getGeometry())),this.ptInAreaLocation[e]}},{key:"toString",value:function(){var e=new StringBuffer;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append("\n");for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append("\n")}return e.toString()}},{key:"computeEdgeEndLabels",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.computeLabel(e)}}},{key:"computeLabelling",value:function(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next(),a=r.getLabel(),i=0;2>i;i++)a.isLine(i)&&a.getLocation(i)===Location.BOUNDARY&&(t[i]=!0);for(var n=this.iterator();n.hasNext();)for(var r=n.next(),a=r.getLabel(),i=0;2>i;i++)if(a.isAnyNull(i)){var o=Location.NONE;if(t[i])o=Location.EXTERIOR;else{var s=r.getCoordinate();o=this.getLocation(i,s,e)}a.setAllLocationsIfNull(i,o)}}},{key:"getDegree",value:function(){return this.edgeMap.size()}},{key:"insertEdgeEnd",value:function(e,t){this.edgeMap.put(e,t),this.edgeList=null}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Quadrant=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isNorthern",value:function(t){return t===e.NE||t===e.NW}},{key:"isOpposite",value:function(e,t){if(e===t)return!1;var n=(e-t+4)%4;return 2===n?!0:!1}},{key:"commonHalfPlane",value:function(e,t){if(e===t)return e;var n=(e-t+4)%4;if(2===n)return-1;var r=t>e?e:t,a=e>t?e:t;return 0===r&&3===a?3:r}},{key:"isInHalfPlane",value:function(t,n){return n===e.SE?t===e.SE||t===e.SW:t===n||t===n+1}},{key:"quadrant",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:if("number"==typeof n[0]&&"number"==typeof n[1])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];if(0===a&&0===i)throw new IllegalArgumentException$1("Cannot compute the quadrant for point ( "+a+", "+i+" )");return a>=0?i>=0?e.NE:e.SE:i>=0?e.NW:e.SW}.apply(void 0,n);if(n[0]instanceof Coordinate&&n[1]instanceof Coordinate)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];if(i.x===a.x&&i.y===a.y)throw new IllegalArgumentException$1("Cannot compute the quadrant for two identical points "+a);return i.x>=a.x?i.y>=a.y?e.NE:e.SE:i.y>=a.y?e.NW:e.SW}.apply(void 0,n)}};return a.apply(this,n)}}]),e}();Quadrant.NE=0,Quadrant.NW=1,Quadrant.SW=2,Quadrant.SE=3;var DirectedEdgeStar=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){i.resultAreaEdgeList=null,i.label=null,i.SCANNING_FOR_INCOMING=1,i.LINKING_TO_OUTGOING=2}();var o=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var e=null,t=null,n=this.SCANNING_FOR_INCOMING,r=0;r<this.resultAreaEdgeList.size();r++){var a=this.resultAreaEdgeList.get(r),i=a.getSym();if(a.getLabel().isArea())switch(null===e&&a.isInResult()&&(e=a),n){case this.SCANNING_FOR_INCOMING:if(!i.isInResult())continue;t=i,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!a.isInResult())continue;t.setNext(a),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(null===e)throw new TopologyException("no outgoing dirEdge found",this.getCoordinate());Assert.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),t.setNext(e)}}},{key:"insert",value:function(e){var t=e;this.insertEdgeEnd(t,t)}},{key:"getRightmostEdge",value:function(){var e=this.getEdges(),t=e.size();if(1>t)return null;var n=e.get(0);if(1===t)return n;var r=e.get(t-1),a=n.getQuadrant(),i=r.getQuadrant();if(Quadrant.isNorthern(a)&&Quadrant.isNorthern(i))return n;if(!Quadrant.isNorthern(a)&&!Quadrant.isNorthern(i))return r;return 0!==n.getDy()?n:0!==r.getDy()?r:(Assert.shouldNeverReachHere("found two horizontal edges incident on node"),null)}},{key:"print",value:function(e){System.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();e.print("out "),n.print(e),e.println(),e.print("in "),n.getSym().print(e),e.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new ArrayList;for(var e=this.iterator();e.hasNext();){var t=e.next();(t.isInResult()||t.getSym().isInResult())&&this.resultAreaEdgeList.add(t)}return this.resultAreaEdgeList}},{key:"updateLabelling",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next(),r=n.getLabel();r.setAllLocationsIfNull(0,e.getLocation(0)),r.setAllLocationsIfNull(1,e.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var e=null,t=null,n=this.edgeList.size()-1;n>=0;n--){var r=this.edgeList.get(n),a=r.getSym();null===t&&(t=a),null!==e&&a.setNext(e),e=r}t.setNext(e)}},{key:"computeDepths",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=e.findIndex(a),o=(a.getLabel(),a.getDepth(Position.LEFT)),s=a.getDepth(Position.RIGHT),u=e.computeDepths(i+1,e.edgeList.size(),o),l=e.computeDepths(0,i,u);if(l!==s)throw new TopologyException("depth mismatch at "+a.getCoordinate())}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=n[1],o=n[2],s=o,u=a;i>u;u++){var l=e.edgeList.get(u);l.getLabel();l.setEdgeDepths(Position.RIGHT,s),s=l.getDepth(Position.LEFT)}return s}.apply(void 0,n)}};return a.apply(this,n)}},{key:"mergeSymLabels",value:function(){for(var e=this.iterator();e.hasNext();){var t=e.next(),n=t.getLabel();n.merge(t.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(e){for(var t=null,n=null,r=this.SCANNING_FOR_INCOMING,a=this.resultAreaEdgeList.size()-1;a>=0;a--){var i=this.resultAreaEdgeList.get(a),o=i.getSym();switch(null===t&&i.getEdgeRing()===e&&(t=i),r){case this.SCANNING_FOR_INCOMING:if(o.getEdgeRing()!==e)continue;n=o,r=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(i.getEdgeRing()!==e)continue;n.setNextMin(i),r=this.SCANNING_FOR_INCOMING}}r===this.LINKING_TO_OUTGOING&&(Assert.isTrue(null!==t,"found null for first outgoing dirEdge"),Assert.isTrue(t.getEdgeRing()===e,"unable to link last incoming dirEdge"),n.setNextMin(t))}},{key:"getOutgoingDegree",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=0,i=e.iterator();i.hasNext();){var o=i.next();o.isInResult()&&a++}return a}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=0,o=e.iterator();o.hasNext();){var s=o.next();s.getEdgeRing()===a&&i++}return i}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getLabel",value:function(){return this.label}},{key:"findCoveredLineEdges",value:function(){for(var e=Location.NONE,t=this.iterator();t.hasNext();){var n=t.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){e=Location.INTERIOR;break}if(r.isInResult()){e=Location.EXTERIOR;break}}}if(e===Location.NONE)return null;for(var a=e,t=this.iterator();t.hasNext();){var n=t.next(),r=n.getSym();n.isLineEdge()?n.getEdge().setCovered(a===Location.INTERIOR):(n.isInResult()&&(a=Location.EXTERIOR),r.isInResult()&&(a=Location.INTERIOR))}}},{key:"computeLabelling",value:function(e){_get(Object.getPrototypeOf(t.prototype),"computeLabelling",this).call(this,e),this.label=new Label(Location.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next(),a=r.getEdge(),i=a.getLabel(),o=0;2>o;o++){var s=i.getLocation(o);(s===Location.INTERIOR||s===Location.BOUNDARY)&&this.label.setLocation(o,Location.INTERIOR)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(EdgeEndStar),GraphComponent=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.label=null,t._isInResult=!1,t._isCovered=!1,t._isCoveredSet=!1,t._isVisited=!1}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.label=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"setVisited",value:function(e){this._isVisited=e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(e){this.label=e}},{key:"getLabel",value:function(){return this.label}},{key:"setCovered",value:function(e){this._isCovered=e,this._isCoveredSet=!0}},{key:"updateIM",value:function(e){Assert.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Node=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){i.coord=null,i.edges=null}();var o=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1];i.coord=r,i.edges=a,i.label=new Label(0,Location.NONE)}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"isIncidentEdgeInResult",value:function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();){var t=e.next();if(t.getEdge().isInResult())return!0}return!1}},{key:"isIsolated",value:function(){return 1===this.label.getGeometryCount()}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.println("node "+this.coord+" lbl: "+this.label)}},{key:"computeIM",value:function(e){}},{key:"computeMergedLocation",value:function(e,t){var n=Location.NONE;if(n=this.label.getLocation(t),!e.isNull(t)){var r=e.getLocation(t);n!==Location.BOUNDARY&&(n=r)}return n}},{key:"setLabel",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(2!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"setLabel",this)).call.apply(e,[this].concat(r));var i=r[0],o=r[1];null===this.label?this.label=new Label(i,o):this.label.setLocation(i,o)}},{key:"getEdges",value:function(){return this.edges}},{key:"mergeLabel",value:function(){for(var e=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof t)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];e.mergeLabel(a.label)}.apply(void 0,r);if(r[0]instanceof Label)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=0;2>i;i++){var o=e.computeMergedLocation(a,i),s=e.label.getLocation(i);s===Location.NONE&&e.label.setLocation(i,o)}}.apply(void 0,r)}};return i.apply(this,r)}},{key:"add",value:function(e){this.edges.insert(e),e.setNode(this)}},{key:"setLabelBoundary",value:function(e){if(null===this.label)return null;var t=Location.NONE;null!==this.label&&(t=this.label.getLocation(e));var n=null;switch(t){case Location.BOUNDARY:n=Location.INTERIOR;break;case Location.INTERIOR:n=Location.BOUNDARY;break;default:n=Location.BOUNDARY}this.label.setLocation(e,n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(GraphComponent),NodeFactory=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"createNode",value:function(e){return new Node(e,null)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),OverlayNodeFactory=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"createNode",value:function(e){return new Node(e,new DirectedEdgeStar)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(NodeFactory),NodeMap=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.nodeMap=new TreeMap,t.nodeFact=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.nodeFact=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"find",value:function(e){return this.nodeMap.get(e)}},{key:"addNode",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof Coordinate)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=e.nodeMap.get(a);return null===i&&(i=e.nodeFact.createNode(a),e.nodeMap.put(a,i)),i}.apply(void 0,n);if(n[0]instanceof Node)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=e.nodeMap.get(a.getCoordinate());return null===i?(e.nodeMap.put(a.getCoordinate(),a),a):(i.mergeLabel(a),i)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"print",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(e){for(var t=new ArrayList,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(e)===Location.BOUNDARY&&t.add(r)}return t}},{key:"add",value:function(e){var t=e.getCoordinate(),n=this.addNode(t);n.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),EdgeEnd=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.edge=null,t.label=null,t.node=null,t.p0=null,t.p1=null,t.dx=null,t.dy=null,t.quadrant=null}();var i=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.edge=a}.apply(void 0,n);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],s=n[2];o.call(t,a,i,s,null)}.apply(void 0,n);case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],s=n[2],u=n[3];o.call(t,a),t.init(i,s),t.label=u}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"compareDirection",value:function(e){return this.dx===e.dx&&this.dy===e.dy?0:this.quadrant>e.quadrant?1:this.quadrant<e.quadrant?-1:CGAlgorithms.computeOrientation(e.p0,e.p1,this.p1)}},{key:"getDy",value:function(){return this.dy}},{key:"getCoordinate",value:function(){return this.p0}},{key:"setNode",value:function(e){this.node=e}},{key:"print",value:function(e){var t=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),r=n.lastIndexOf("."),a=n.substring(r+1);e.print("  "+a+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label)}},{key:"compareTo",value:function(e){var t=e;return this.compareDirection(t)}},{key:"getDirectedCoordinate",value:function(){return this.p1}},{key:"getDx",value:function(){return this.dx}},{key:"getLabel",value:function(){return this.label}},{key:"getEdge",value:function(){return this.edge}},{key:"getQuadrant",value:function(){return this.quadrant}},{key:"getNode",value:function(){return this.node}},{key:"toString",value:function(){var e=Math.atan2(this.dy,this.dx),t=this.getClass().getName(),n=t.lastIndexOf("."),r=t.substring(n+1);return"  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label}},{key:"computeLabel",value:function(e){}},{key:"init",value:function(e,t){this.p0=e,this.p1=t,this.dx=t.x-e.x,this.dy=t.y-e.y,this.quadrant=Quadrant.quadrant(this.dx,this.dy),Assert.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable]}}]),e}(),DirectedEdge=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){o._isForward=null,o._isInResult=!1,o._isVisited=!1,o.sym=null,o.next=null,o.nextMin=null,o.edgeRing=null,o.minEdgeRing=null,o.depth=[0,-999,-999]}();var s=function(){
for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 2:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,i));if(s._isForward=o,o)s.init(i.getCoordinate(0),i.getCoordinate(1));else{var u=i.getNumPoints()-1;s.init(i.getCoordinate(u),i.getCoordinate(u-1))}s.computeDirectedLabel()}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"getNextMin",value:function(){return this.nextMin}},{key:"getDepth",value:function(e){return this.depth[e]}},{key:"setVisited",value:function(e){this._isVisited=e}},{key:"computeDirectedLabel",value:function(){this.label=new Label(this.edge.getLabel()),this._isForward||this.label.flip()}},{key:"getNext",value:function(){return this.next}},{key:"setDepth",value:function(e,t){if(-999!==this.depth[e]&&this.depth[e]!==t)throw new TopologyException("assigned depths do not match",this.getCoordinate());this.depth[e]=t}},{key:"isInteriorAreaEdge",value:function n(){for(var n=!0,e=0;2>e;e++)this.label.isArea(e)&&this.label.getLocation(e,Position.LEFT)===Location.INTERIOR&&this.label.getLocation(e,Position.RIGHT)===Location.INTERIOR||(n=!1);return n}},{key:"setNextMin",value:function(e){this.nextMin=e}},{key:"print",value:function(e){_get(Object.getPrototypeOf(t.prototype),"print",this).call(this,e),e.print(" "+this.depth[Position.LEFT]+"/"+this.depth[Position.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")}},{key:"setMinEdgeRing",value:function(e){this.minEdgeRing=e}},{key:"isLineEdge",value:function(){var e=this.label.isLine(0)||this.label.isLine(1),t=!this.label.isArea(0)||this.label.allPositionsEqual(0,Location.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,Location.EXTERIOR);return e&&t&&n}},{key:"setEdgeRing",value:function(e){this.edgeRing=e}},{key:"getMinEdgeRing",value:function(){return this.minEdgeRing}},{key:"getDepthDelta",value:function(){var e=this.edge.getDepthDelta();return this._isForward||(e=-e),e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"getSym",value:function(){return this.sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this.edge}},{key:"printEdge",value:function(e){this.print(e),e.print(" "),this._isForward?this.edge.print(e):this.edge.printReverse(e)}},{key:"setSym",value:function(e){this.sym=e}},{key:"setVisitedEdge",value:function(e){this.setVisited(e),this.sym.setVisited(e)}},{key:"setEdgeDepths",value:function(e,t){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;e===Position.LEFT&&(r=-1);var a=Position.opposite(e),i=n*r,o=t+i;this.setDepth(e,t),this.setDepth(a,o)}},{key:"getEdgeRing",value:function(){return this.edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(e){this.next=e}},{key:"isVisited",value:function(){return this._isVisited}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"depthFactor",value:function(e,t){return e===Location.EXTERIOR&&t===Location.INTERIOR?1:e===Location.INTERIOR&&t===Location.EXTERIOR?-1:0}}]),t}(EdgeEnd),PlanarGraph=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.edges=new ArrayList,t.nodes=null,t.edgeEndList=new ArrayList}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.nodes=new NodeMap(new NodeFactory)}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.nodes=new NodeMap(a)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"printEdges",value:function(e){e.println("Edges:");for(var t=0;t<this.edges.size();t++){e.println("edge "+t+":");var n=this.edges.get(t);n.print(e),n.eiList.print(e)}}},{key:"find",value:function(e){return this.nodes.find(e)}},{key:"addNode",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof Node)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.nodes.addNode(a)}.apply(void 0,n);if(n[0]instanceof Coordinate)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.nodes.addNode(a)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getNodeIterator",value:function(){return this.nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkResultDirectedEdges()}}},{key:"debugPrintln",value:function(e){System.out.println(e)}},{key:"isBoundaryNode",value:function(e,t){var n=this.nodes.find(t);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(e)===Location.BOUNDARY?!0:!1}},{key:"linkAllDirectedEdges",value:function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkAllDirectedEdges()}}},{key:"matchInSameDirection",value:function(e,t,n,r){return e.equals(n)&&CGAlgorithms.computeOrientation(e,t,r)===CGAlgorithms.COLLINEAR&&Quadrant.quadrant(e,t)===Quadrant.quadrant(n,r)?!0:!1}},{key:"getEdgeEnds",value:function(){return this.edgeEndList}},{key:"debugPrint",value:function(e){System.out.print(e)}},{key:"getEdgeIterator",value:function(){return this.edges.iterator()}},{key:"findEdgeInSameDirection",value:function(e,t){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),a=r.getCoordinates();if(this.matchInSameDirection(e,t,a[0],a[1]))return r;if(this.matchInSameDirection(e,t,a[a.length-1],a[a.length-2]))return r}return null}},{key:"insertEdge",value:function(e){this.edges.add(e)}},{key:"findEdgeEnd",value:function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null}},{key:"addEdges",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.edges.add(n);var r=new DirectedEdge(n,!0),a=new DirectedEdge(n,!1);r.setSym(a),a.setSym(r),this.add(r),this.add(a)}}},{key:"add",value:function(e){this.nodes.add(e),this.edgeEndList.add(e)}},{key:"getNodes",value:function(){return this.nodes.values()}},{key:"findEdge",value:function(e,t){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),a=r.getCoordinates();if(e.equals(a[0])&&t.equals(a[1]))return r}return null}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"linkResultDirectedEdges",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}}}]),e}(),ConnectedInteriorTester=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.geometryFactory=new GeometryFactory,t.geomGraph=null,t.disconnectedRingcoord=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.geomGraph=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"visitInteriorRing",value:function(t,n){var r=t.getCoordinates(),a=r[0],i=e.findDifferentPoint(r,a),o=n.findEdgeInSameDirection(a,i),s=n.findEdgeEnd(o),u=null;s.getLabel().getLocation(0,Position.RIGHT)===Location.INTERIOR?u=s:s.getSym().getLabel().getLocation(0,Position.RIGHT)===Location.INTERIOR&&(u=s.getSym()),Assert.isTrue(null!==u,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(u)}},{key:"visitShellInteriors",value:function(e,t){if(e instanceof Polygon){var n=e;this.visitInteriorRing(n.getExteriorRing(),t)}if(e instanceof MultiPolygon)for(var r=e,a=0;a<r.getNumGeometries();a++){var n=r.getGeometryN(a);this.visitInteriorRing(n.getExteriorRing(),t)}}},{key:"getCoordinate",value:function(){return this.disconnectedRingcoord}},{key:"setInteriorEdgesInResult",value:function(e){for(var t=e.getEdgeEnds().iterator();t.hasNext();){var n=t.next();n.getLabel().getLocation(0,Position.RIGHT)===Location.INTERIOR&&n.setInResult(!0)}}},{key:"visitLinkedDirectedEdges",value:function(e){var t=e,n=e;do Assert.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),n=n.getNext();while(n!==t)}},{key:"buildEdgeRings",value:function(e){for(var t=new ArrayList,n=e.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&null===r.getEdgeRing()){var a=new MaximalEdgeRing(r,this.geometryFactory);a.linkDirectedEdgesForMinimalEdgeRings();var i=a.buildMinimalRings();t.addAll(i)}}return t}},{key:"hasUnvisitedShellEdge",value:function(e){for(var t=0;t<e.size();t++){var n=e.get(t);if(!n.isHole()){var r=n.getEdges(),a=r.get(0);if(a.getLabel().getLocation(0,Position.RIGHT)===Location.INTERIOR)for(var i=0;i<r.size();i++)if(a=r.get(i),!a.isVisited())return this.disconnectedRingcoord=a.getCoordinate(),!0}}return!1}},{key:"isInteriorsConnected",value:function(){var e=new ArrayList;this.geomGraph.computeSplitEdges(e);var t=new PlanarGraph(new OverlayNodeFactory);t.addEdges(e),this.setInteriorEdgesInResult(t),t.linkResultDirectedEdges();var n=this.buildEdgeRings(t.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),t),!this.hasUnvisitedShellEdge(n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"findDifferentPoint",value:function(e,t){for(var n=0;n<e.length;n++)if(!e[n].equals(t))return e[n];return null}}]),e}(),LineSegment=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.p0=null,t.p1=null}();var i=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];o.call(t,new Coordinate,new Coordinate)}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];o.call(t,a.p0,a.p1)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.p0=a,t.p1=i}.apply(void 0,n);case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],s=n[2],u=n[3];o.call(t,new Coordinate(a,i),new Coordinate(s,u))}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=CGAlgorithms.orientationIndex(t.p0,t.p1,a.p0),o=CGAlgorithms.orientationIndex(t.p0,t.p1,a.p1);return i>=0&&o>=0?Math.max(i,o):0>=i&&0>=o?Math.max(i,o):0}.apply(void 0,r);if(r[0]instanceof Coordinate)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return CGAlgorithms.orientationIndex(t.p0,t.p1,a)}.apply(void 0,r)}};return i.apply(this,r)}},{key:"toGeometry",value:function(e){return e.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)}},{key:"intersection",value:function(e){var t=new RobustLineIntersector;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null}},{key:"project",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof Coordinate)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];if(a.equals(t.p0)||a.equals(t.p1))return new Coordinate(a);var i=t.projectionFactor(a),o=new Coordinate;return o.x=t.p0.x+i*(t.p1.x-t.p0.x),o.y=t.p0.y+i*(t.p1.y-t.p0.y),o}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],o=t.projectionFactor(i.p0),s=t.projectionFactor(i.p1);if(o>=1&&s>=1)return null;if(0>=o&&0>=s)return null;var u=t.project(i.p0);0>o&&(u=t.p0),o>1&&(u=t.p1);var l=t.project(i.p1);return 0>s&&(l=t.p0),s>1&&(l=t.p1),new e(u,l)}.apply(void 0,r)}};return i.apply(this,r)}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(e){return 0===e?this.p0:this.p1}},{key:"distancePerpendicular",value:function(e){return CGAlgorithms.distancePointLinePerpendicular(e,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return e.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=t*t+n*n;if(0>=r)return Double.NaN;var a=((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/r;return a}},{key:"closestPoints",value:function(e){var t=this.intersection(e);if(null!==t)return[t,t];var n=new Array(2),r=Double.MAX_VALUE,a=null,i=this.closestPoint(e.p0);r=i.distance(e.p0),n[0]=i,n[1]=e.p0;var o=this.closestPoint(e.p1);a=o.distance(e.p1),r>a&&(r=a,n[0]=o,n[1]=e.p1);var s=e.closestPoint(this.p0);a=s.distance(this.p0),r>a&&(r=a,n[0]=this.p0,n[1]=s);var u=e.closestPoint(this.p1);return a=u.distance(this.p1),r>a&&(r=a,n[0]=this.p1,n[1]=u),n}},{key:"closestPoint",value:function(e){var t=this.projectionFactor(e);if(t>0&&1>t)return this.project(e);var n=this.p0.distance(e),r=this.p1.distance(e);return r>n?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(e){var t=e,n=this.p0.compareTo(t.p0);return 0!==n?n:this.p1.compareTo(t.p1)}},{key:"reverse",value:function(){var e=this.p0;this.p0=this.p1,this.p1=e}},{key:"equalsTopo",value:function(e){return this.p0.equals(e.p0)&&this.p1.equals(e.p1)||this.p0.equals(e.p1)&&this.p1.equals(e.p0)}},{key:"lineIntersection",value:function(e){try{var t=HCoordinate.intersection(this.p0,this.p1,e.p0,e.p1);return t}catch(n){if(!(n instanceof NotRepresentableException))throw n}finally{}return null}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),r=this.p0.y+e*(this.p1.y-this.p0.y),a=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,o=Math.sqrt(a*a+i*i),s=0,u=0;if(0!==t){if(0>=o)throw new IllegalStateException("Cannot compute offset from zero-length line segment");s=t*a/o,u=t*i/o}var l=n-u,c=r+s,g=new Coordinate(l,c);return g}},{key:"setCoordinates",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];e.setCoordinates(a.p0,a.p1)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];e.p0.x=a.x,e.p0.y=a.y,e.p1.x=i.x,e.p1.y=i.y}.apply(void 0,n)}};return a.apply(this,n)}},{key:"segmentFraction",value:function(e){var t=this.projectionFactor(e);return 0>t?t=0:(t>1||Double.isNaN(t))&&(t=1),t}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"distance",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return CGAlgorithms.distanceLineLine(t.p0,t.p1,a.p0,a.p1)}.apply(void 0,r);if(r[0]instanceof Coordinate)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return CGAlgorithms.distancePointLine(a,t.p0,t.p1)}.apply(void 0,r)}};return i.apply(this,r)}},{key:"pointAlong",value:function(e){var t=new Coordinate;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t}},{key:"hashCode",value:function(){var e=java.lang.Double.doubleToLongBits(this.p0.x);e^=31*java.lang.Double.doubleToLongBits(this.p0.y);var t=Math.trunc(e)^Math.trunc(e>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);n^=31*java.lang.Double.doubleToLongBits(this.p1.y);var r=Math.trunc(n)^Math.trunc(n>>32);return t^r}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable,Serializable]}}],[{key:"midPoint",value:function(e,t){return new Coordinate((e.x+t.x)/2,(e.y+t.y)/2)}}]),e}();LineSegment.serialVersionUID=0x2d2172135f411c00;var MonotoneChainSelectAction=function(){function e(){var t=this;_classCallCheck(this,e),function(){t.tempEnv1=new Envelope,t.selectedSegment=new LineSegment}()}return _createClass(e,[{key:"select",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0]}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];a.getLineSegment(i,e.selectedSegment),e.select(e.selectedSegment)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),NodeBase=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.items=new ArrayList,t.subnode=[null,null]}();var i=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return i.apply(this,r)}return _createClass(e,[{key:"hasChildren",value:function(){for(var e=0;2>e;e++)if(null!==this.subnode[e])return!0;return!1}},{key:"isPrunable",value:function(){return!(this.hasChildren()||this.hasItems())}},{key:"addAllItems",value:function(e){e.addAll(this.items);for(var t=0;2>t;t++)null!==this.subnode[t]&&this.subnode[t].addAllItems(e);return e}},{key:"size",value:function(){for(var e=0,t=0;2>t;t++)null!==this.subnode[t]&&(e+=this.subnode[t].size());return e+this.items.size()}},{key:"addAllItemsFromOverlapping",value:function(e,t){return null===e||this.isSearchMatch(e)?(t.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(e,t),void(null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(e,t))):null}},{key:"hasItems",value:function(){return!this.items.isEmpty()}},{key:"remove",value:function(e,t){if(!this.isSearchMatch(e))return!1;for(var n=!1,r=0;2>r;r++)if(null!==this.subnode[r]&&(n=this.subnode[r].remove(e,t))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}return n?n:n=this.items.remove(t)}},{key:"getItems",value:function(){return this.items}},{key:"depth",value:function(){for(var e=0,t=0;2>t;t++)if(null!==this.subnode[t]){var n=this.subnode[t].depth();n>e&&(e=n)}return e+1}},{key:"nodeSize",value:function(){for(var e=0,t=0;2>t;t++)null!==this.subnode[t]&&(e+=this.subnode[t].nodeSize());return e+1}},{key:"add",value:function(e){this.items.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getSubnodeIndex",value:function(e,t){var n=-1;return e.min>=t&&(n=1),e.max<=t&&(n=0),n}}]),e}(),Interval=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.min=null,t.max=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.min=0,t.max=0}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.init(a.min,a.max)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.init(a,i)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"expandToInclude",value:function(e){e.max>this.max&&(this.max=e.max),e.min<this.min&&(this.min=e.min)}},{key:"getWidth",value:function(){return this.max-this.min}},{key:"overlaps",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.overlaps(a.min,a.max)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return e.min>i||e.max<a?!1:!0}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getMin",value:function(){return this.min}},{key:"toString",value:function(){return"["+this.min+", "+this.max+"]"}},{key:"contains",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.contains(a.min,a.max)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return a>=t.min&&a<=t.max}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return a>=t.min&&i<=t.max}.apply(void 0,r)}};return i.apply(this,r)}},{key:"init",value:function(e,t){this.min=e,this.max=t,e>t&&(this.min=t,this.max=e)}},{key:"getMax",value:function(){return this.max}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),DoubleBits=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.x=null,t.xBits=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.x=a,t.xBits=Double.doubleToLongBits(a)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"numCommonMantissaBits",value:function(e){for(var t=0;52>t;t++){if(this.getBit(t)!==e.getBit(t))return t}return 52}},{key:"getExponent",value:function(){return this.biasedExponent()-e.EXPONENT_BIAS}},{key:"biasedExponent",value:function(){var e=Math.trunc(this.xBits>>52),t=2047&e;return t}},{key:"getDouble",value:function(){return Double.longBitsToDouble(this.xBits)}},{key:"zeroLowerBits",value:function(e){var t=(1<<e)-1,n=~t;this.xBits&=n}},{key:"toString",value:function(){var e=Long.toBinaryString(this.xBits),t="0000000000000000000000000000000000000000000000000000000000000000",n=t+e,r=n.substring(n.length-64),a=r.substring(0,1)+"  "+r.substring(1,12)+"("+this.getExponent()+") "+r.substring(12)+" [ "+this.x+" ]";return a}},{key:"getBit",value:function(e){var t=1<<e;return 0!==(this.xBits&t)?1:0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"exponent",value:function(t){var n=new e(t);return n.getExponent()}},{key:"toBinaryString",value:function(t){var n=new e(t);return n.toString()}},{key:"powerOf2",value:function(t){if(t>1023||-1022>t)throw new IllegalArgumentException$1("Exponent out of bounds");var n=t+e.EXPONENT_BIAS,r=n<<52;return Double.longBitsToDouble(r)}},{key:"truncateToPowerOfTwo",value:function(t){var n=new e(t);return n.zeroLowerBits(52),n.getDouble()}},{key:"maximumCommonMantissa",value:function(t,n){if(0===t||0===n)return 0;var r=new e(t),a=new e(n);if(r.getExponent()!==a.getExponent())return 0;var i=r.numCommonMantissaBits(a);return r.zeroLowerBits(64-(12+i)),r.getDouble()}}]),e}();DoubleBits.EXPONENT_BIAS=1023;var Key=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.pt=0,t.level=0,t.interval=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.computeKey(a)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getInterval",value:function(){return this.interval}},{key:"getLevel",value:function(){return this.level}},{key:"computeKey",value:function(t){for(this.level=e.computeLevel(t),this.interval=new Interval,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)}},{key:"computeInterval",value:function(e,t){var n=DoubleBits.powerOf2(e);this.pt=Math.floor(t.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)}},{key:"getPoint",value:function(){return this.pt}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeLevel",value:function(e){var t=e.getWidth(),n=DoubleBits.exponent(t)+1;return n}}]),e}(),Node$1=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){i.interval=null,i.centre=null,i.level=null}();var o=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1];i.interval=r,i.level=a,i.centre=(r.getMin()+r.getMax())/2}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"getInterval",value:function(){return this.interval}},{key:"find",value:function(e){var n=t.getSubnodeIndex(e,this.centre);if(-1===n)return this;if(null!==this.subnode[n]){var r=this.subnode[n];return r.find(e)}return this}},{key:"insert",value:function(e){Assert.isTrue(null===this.interval||this.interval.contains(e.interval));var n=t.getSubnodeIndex(e.interval,this.centre);if(e.level===this.level-1)this.subnode[n]=e;else{var r=this.createSubnode(n);r.insert(e),this.subnode[n]=r}}},{key:"isSearchMatch",value:function(e){return e.overlaps(this.interval)}},{key:"getSubnode",value:function(e){return null===this.subnode[e]&&(this.subnode[e]=this.createSubnode(e)),this.subnode[e]}},{key:"getNode",value:function(e){var n=t.getSubnodeIndex(e,this.centre);if(-1!==n){var r=this.getSubnode(n);return r.getNode(e)}return this}},{key:"createSubnode",value:function(e){var n=0,r=0;switch(e){case 0:n=this.interval.getMin(),r=this.centre;break;case 1:n=this.centre,r=this.interval.getMax()}var a=new Interval(n,r),i=new t(a,this.level-1);return i}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"createNode",value:function(e){var n=new Key(e),r=new t(n.getInterval(),n.getLevel());return r}},{key:"createExpanded",value:function(e,n){var r=new Interval(n);null!==e&&r.expandToInclude(e.interval);var a=t.createNode(r);return null!==e&&a.insert(e),a}}]),t}(NodeBase),IntervalSize=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isZeroWidth",value:function(t,n){var r=n-t;if(0===r)return!0;var a=Math.max(Math.abs(t),Math.abs(n)),i=r/a,o=DoubleBits.exponent(i);return o<=e.MIN_BINARY_EXPONENT}}]),e}();IntervalSize.MIN_BINARY_EXPONENT=-50;var Root=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),o=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"insert",value:function(e,n){var r=t.getSubnodeIndex(e,t.origin);if(-1===r)return this.add(n),null;var a=this.subnode[r];if(null===a||!a.getInterval().contains(e)){var i=Node$1.createExpanded(a,e);this.subnode[r]=i}this.insertContained(this.subnode[r],e,n)}},{key:"isSearchMatch",value:function(e){return!0}},{key:"insertContained",value:function(e,t,n){Assert.isTrue(e.getInterval().contains(t));var r=IntervalSize.isZeroWidth(t.getMin(),t.getMax()),a=null;a=r?e.find(t):e.getNode(t),a.add(n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(NodeBase);Root.origin=0;var Bintree=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.root=null,t.minExtent=1}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.root=new Root}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"size",value:function(){return null!==this.root?this.root.size():0}},{key:"insert",value:function(t,n){this.collectStats(t);var r=e.ensureExtent(t,this.minExtent);this.root.insert(r,n)}},{key:"query",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if("number"==typeof n[0])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.query(new Interval(a,a))}.apply(void 0,n);if(n[0]instanceof Interval)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=new ArrayList;return e.query(a,i),i}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];e.root.addAllItemsFromOverlapping(a,i)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"iterator",value:function(){var e=new ArrayList;return this.root.addAllItems(e),e.iterator()}},{key:"remove",value:function(t,n){var r=e.ensureExtent(t,this.minExtent);return this.root.remove(r,n)}},{key:"collectStats",value:function(e){var t=e.getWidth();t<this.minExtent&&t>0&&(this.minExtent=t)}},{key:"depth",value:function(){return null!==this.root?this.root.depth():0}},{key:"nodeSize",value:function(){return null!==this.root?this.root.nodeSize():0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"ensureExtent",value:function(e,t){var n=e.getMin(),r=e.getMax();return n!==r?e:(n===r&&(n-=t/2,r=n+t/2),new Interval(n,r))}}]),e}(),MonotoneChain=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];
_classCallCheck(this,e),function(){t.pts=null,t.start=null,t.end=null,t.env=null,t.context=null,t.id=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=n[3];t.pts=a,t.start=i,t.end=o,t.context=s}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getLineSegment",value:function(e,t){t.p0=this.pts[e],t.p1=this.pts[e+1]}},{key:"computeSelect",value:function(e,t,n,r){var a=this.pts[t],i=this.pts[n];if(r.tempEnv1.init(a,i),n-t===1)return r.select(this,t),null;if(!e.intersects(r.tempEnv1))return null;var o=Math.trunc((t+n)/2);o>t&&this.computeSelect(e,t,o,r),n>o&&this.computeSelect(e,o,n,r)}},{key:"getCoordinates",value:function(){for(var e=new Array(this.end-this.start+1),t=0,n=this.start;n<=this.end;n++)e[t++]=this.pts[n];return e}},{key:"computeOverlaps",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];e.computeOverlaps(e.start,e.end,a,a.start,a.end,i)}.apply(void 0,n);case 6:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=n[3],u=n[4],l=n[5],c=e.pts[a],g=e.pts[i],h=o.pts[s],f=o.pts[u];if(i-a===1&&u-s===1)return l.overlap(e,a,o,s),null;if(l.tempEnv1.init(c,g),l.tempEnv2.init(h,f),!l.tempEnv1.intersects(l.tempEnv2))return null;var y=Math.trunc((a+i)/2),v=Math.trunc((s+u)/2);y>a&&(v>s&&e.computeOverlaps(a,y,o,s,v,l),u>v&&e.computeOverlaps(a,y,o,v,u,l)),i>y&&(v>s&&e.computeOverlaps(y,i,o,s,v,l),u>v&&e.computeOverlaps(y,i,o,v,u,l))}.apply(void 0,n)}};return a.apply(this,n)}},{key:"setId",value:function(e){this.id=e}},{key:"select",value:function(e,t){this.computeSelect(e,this.start,this.end,t)}},{key:"getEnvelope",value:function(){if(null===this.env){var e=this.pts[this.start],t=this.pts[this.end];this.env=new Envelope(e,t)}return this.env}},{key:"getEndIndex",value:function(){return this.end}},{key:"getStartIndex",value:function(){return this.start}},{key:"getContext",value:function(){return this.context}},{key:"getId",value:function(){return this.id}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),MonotoneChainBuilder=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];_classCallCheck(this,e);var a=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return a.apply(this,n)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getChainStartIndices",value:function(t){var n=0,r=new ArrayList;r.add(new Integer(n));do{var a=e.findChainEnd(t,n);r.add(new Integer(a)),n=a}while(n<t.length-1);var i=e.toIntArray(r);return i}},{key:"findChainEnd",value:function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var r=Quadrant.quadrant(e[n],e[n+1]),a=t+1;a<e.length;){if(!e[a-1].equals2D(e[a])){var i=Quadrant.quadrant(e[a-1],e[a]);if(i!==r)break}a++}return a-1}},{key:"getChains",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.getChains(a,null)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=n[1],o=new ArrayList,s=e.getChainStartIndices(a),u=0;u<s.length-1;u++){var l=new MonotoneChain(a,s[u],s[u+1],i);o.add(l)}return o}.apply(void 0,n)}};return a.apply(this,n)}},{key:"toIntArray",value:function(e){for(var t=new Array(e.size()),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t}}]),e}(),PointInRing=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInside",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),MCPointInRing=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.ring=null,t.tree=null,t.crossings=0,t.interval=new Interval}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.ring=a,t.buildIndex()}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"testLineSegment",value:function(e,t){var n=null,r=null,a=null,i=null,o=null,s=t.p0,u=t.p1;r=s.x-e.x,a=s.y-e.y,i=u.x-e.x,o=u.y-e.y,(a>0&&0>=o||o>0&&0>=a)&&(n=RobustDeterminant.signOfDet2x2(r,a,i,o)/(o-a),n>0&&this.crossings++)}},{key:"buildIndex",value:function(){this.tree=new Bintree;for(var e=CoordinateArrays.removeRepeatedPoints(this.ring.getCoordinates()),t=MonotoneChainBuilder.getChains(e),n=0;n<t.size();n++){var r=t.get(n),a=r.getEnvelope();this.interval.min=a.getMinY(),this.interval.max=a.getMaxY(),this.tree.insert(this.interval,r)}}},{key:"testMonotoneChain",value:function(e,t,n){n.select(e,t)}},{key:"isInside",value:function(e){this.crossings=0;var t=new Envelope(Double.NEGATIVE_INFINITY,Double.POSITIVE_INFINITY,e.y,e.y);this.interval.min=e.y,this.interval.max=e.y;for(var n=this.tree.query(this.interval),r=new MCSelecter(this,e),a=n.iterator();a.hasNext();){var i=a.next();this.testMonotoneChain(t,r,i)}return this.crossings%2===1?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[PointInRing]}}],[{key:"MCSelecter",get:function(){return MCSelecter}}]),e}(),MCSelecter=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){i.mcp=null,i.p=null}();var o=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1];i.mcp=r,i.p=a}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"select",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(1!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"select",this)).call.apply(e,[this].concat(r));var i=r[0];this.mcp.testLineSegment(this.p,i)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(MonotoneChainSelectAction),PointLocator=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.boundaryRule=BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,t.isIn=null,t.numBoundaries=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];if(null===a)throw new IllegalArgumentException$1("Rule must be non-null");t.boundaryRule=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"locateInPolygonRing",value:function(e,t){return t.getEnvelopeInternal().intersects(e)?CGAlgorithms.locatePointInRing(e,t.getCoordinates()):Location.EXTERIOR}},{key:"intersects",value:function(e,t){return this.locate(e,t)!==Location.EXTERIOR}},{key:"updateLocationInfo",value:function(e){e===Location.INTERIOR&&(this.isIn=!0),e===Location.BOUNDARY&&this.numBoundaries++}},{key:"computeLocation",value:function(e,t){if(t instanceof Point&&this.updateLocationInfo(this.locate(e,t)),t instanceof LineString)this.updateLocationInfo(this.locate(e,t));else if(t instanceof Polygon)this.updateLocationInfo(this.locate(e,t));else if(t instanceof MultiLineString)for(var n=t,r=0;r<n.getNumGeometries();r++){var a=n.getGeometryN(r);this.updateLocationInfo(this.locate(e,a))}else if(t instanceof MultiPolygon)for(var i=t,r=0;r<i.getNumGeometries();r++){var o=i.getGeometryN(r);this.updateLocationInfo(this.locate(e,o))}else if(t instanceof GeometryCollection)for(var s=new GeometryCollectionIterator(t);s.hasNext();){var u=s.next();u!==t&&this.computeLocation(e,u)}}},{key:"locate",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:if(n[0]instanceof Coordinate&&n[1]instanceof Polygon)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];if(i.isEmpty())return Location.EXTERIOR;var o=i.getExteriorRing(),s=e.locateInPolygonRing(a,o);if(s===Location.EXTERIOR)return Location.EXTERIOR;if(s===Location.BOUNDARY)return Location.BOUNDARY;for(var u=0;u<i.getNumInteriorRing();u++){var l=i.getInteriorRingN(u),c=e.locateInPolygonRing(a,l);if(c===Location.INTERIOR)return Location.EXTERIOR;if(c===Location.BOUNDARY)return Location.BOUNDARY}return Location.INTERIOR}.apply(void 0,n);if(n[0]instanceof Coordinate&&n[1]instanceof LineString)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1];if(!a.getEnvelopeInternal().intersects(r))return Location.EXTERIOR;var i=a.getCoordinates();return a.isClosed()||!r.equals(i[0])&&!r.equals(i[i.length-1])?CGAlgorithms.isOnLine(r,i)?Location.INTERIOR:Location.EXTERIOR:Location.BOUNDARY}.apply(void 0,n);if(n[0]instanceof Coordinate&&n[1]instanceof Point)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=a.getCoordinate();return i.equals2D(r)?Location.INTERIOR:Location.EXTERIOR}.apply(void 0,n);if(n[0]instanceof Coordinate&&n[1]instanceof Geometry)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return i.isEmpty()?Location.EXTERIOR:i instanceof LineString?e.locate(a,i):i instanceof Polygon?e.locate(a,i):(e.isIn=!1,e.numBoundaries=0,e.computeLocation(a,i),e.boundaryRule.isInBoundary(e.numBoundaries)?Location.BOUNDARY:e.numBoundaries>0||e.isIn?Location.INTERIOR:Location.EXTERIOR)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),MonotoneChain$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.mce=null,t.chainIndex=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.mce=a,t.chainIndex=i}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"computeIntersections",value:function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),SweepLineEvent=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.label=null,t.xValue=null,t.eventType=null,t.insertEvent=null,t.deleteEventIndex=null,t.obj=null}();var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 2:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],o=r[1];t.eventType=e.DELETE,t.xValue=i,t.insertEvent=o}.apply(void 0,r);case 3:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=r[2];t.eventType=e.INSERT,t.label=i,t.xValue=o,t.obj=s}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"isDelete",value:function(){return this.eventType===e.DELETE}},{key:"setDeleteEventIndex",value:function(e){this.deleteEventIndex=e}},{key:"getObject",value:function(){return this.obj}},{key:"compareTo",value:function(e){var t=e;return this.xValue<t.xValue?-1:this.xValue>t.xValue?1:this.eventType<t.eventType?-1:this.eventType>t.eventType?1:0}},{key:"getInsertEvent",value:function(){return this.insertEvent}},{key:"isInsert",value:function(){return this.eventType===e.INSERT}},{key:"isSameLabel",value:function(e){return null===this.label?!1:this.label===e.label}},{key:"getDeleteEventIndex",value:function(){return this.deleteEventIndex}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable]}}]),e}();SweepLineEvent.INSERT=1,SweepLineEvent.DELETE=2;var EdgeSetIntersector=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];_classCallCheck(this,e);var a=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return a.apply(this,n)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Collections=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"reverseOrder",value:function(){return{compare:function(e,t){return t.compareTo(e)}}}},{key:"min",value:function(t){return e.sort(t),t.get(0)}},{key:"sort",value:function(e,t){var n=e.toArray();t?Arrays.sort(n,t):Arrays.sort(n);for(var r=e.iterator(),a=0,i=n.length;i>a;a++)r.next(),r.set(n[a])}}]),e}(),SegmentIntersector=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t._hasIntersection=!1,t.hasProper=!1,t.hasProperInterior=!1,t.properIntersectionPoint=null,t.li=null,t.includeProper=null,t.recordIsolated=null,t.isSelfIntersection=null,t.numIntersections=0,t.numTests=0,t.bdyNodes=null,t._isDone=!1,t.isDoneWhenProperInt=!1}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];t.li=a,t.includeProper=i,t.recordIsolated=o}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"isTrivialIntersection",value:function(t,n,r,a){if(t===r&&1===this.li.getIntersectionNum()){if(e.isAdjacentSegments(n,a))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===n&&a===i||0===a&&n===i)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this.properIntersectionPoint}},{key:"setIsDoneIfProperInt",value:function(e){this.isDoneWhenProperInt=e}},{key:"hasProperInteriorIntersection",value:function(){return this.hasProperInterior}},{key:"isBoundaryPointInternal",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next(),a=r.getCoordinate();if(e.isIntersection(a))return!0}return!1}},{key:"hasProperIntersection",value:function(){return this.hasProper}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return this._isDone}},{key:"isBoundaryPoint",value:function(e,t){return null===t?!1:this.isBoundaryPointInternal(e,t[0])?!0:this.isBoundaryPointInternal(e,t[1])?!0:!1}},{key:"setBoundaryNodes",value:function(e,t){this.bdyNodes=new Array(2),this.bdyNodes[0]=e,this.bdyNodes[1]=t}},{key:"addIntersections",value:function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var a=e.getCoordinates()[t],i=e.getCoordinates()[t+1],o=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this.li.computeIntersection(a,i,o,s),this.li.hasIntersection()&&(this.recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,(this.includeProper||!this.li.isProper())&&(e.addIntersections(this.li,t,0),n.addIntersections(this.li,r,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isAdjacentSegments",value:function(e,t){return 1===Math.abs(e-t)}}]),e}(),SimpleMCSweepLineIntersector=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){i.events=new ArrayList,i.nOverlaps=null}();var o=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"prepareEvents",value:function(){Collections.sort(this.events);for(var e=0;e<this.events.size();e++){var t=this.events.get(e);t.isDelete()&&t.getInsertEvent().setDeleteEventIndex(e)}}},{key:"computeIntersections",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];e.nOverlaps=0,e.prepareEvents();for(var i=0;i<e.events.size();i++){var o=e.events.get(i);if(o.isInsert()&&e.processOverlaps(i,o.getDeleteEventIndex(),o,a),a.isDone())break}}.apply(void 0,n);case 3:if(n[2]instanceof SegmentIntersector&&n[0].interfaces_&&n[0].interfaces_.indexOf(List)>-1&&n[1].interfaces_&&n[1].interfaces_.indexOf(List)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];e.addEdges(a,a),e.addEdges(i,i),e.computeIntersections(o)}.apply(void 0,n);if("boolean"==typeof n[2]&&n[0].interfaces_&&n[0].interfaces_.indexOf(List)>-1&&n[1]instanceof SegmentIntersector)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];o?e.addEdges(a,null):e.addEdges(a),e.computeIntersections(i)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"addEdge",value:function(e,t){for(var n=e.getMonotoneChainEdge(),r=n.getStartIndexes(),a=0;a<r.length-1;a++){var i=new MonotoneChain$1(n,a),o=new SweepLineEvent(t,n.getMinX(a),i);this.events.add(o),this.events.add(new SweepLineEvent(n.getMaxX(a),o))}}},{key:"processOverlaps",value:function(e,t,n,r){for(var a=n.getObject(),i=e;t>i;i++){var o=this.events.get(i);if(o.isInsert()){var s=o.getObject();n.isSameLabel(o)||(a.computeIntersections(s,r),this.nOverlaps++)}}}},{key:"addEdges",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=a.iterator();i.hasNext();){var o=i.next();e.addEdge(o,o)}}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=n[1],o=a.iterator();o.hasNext();){var s=o.next();e.addEdge(s,i)}}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(EdgeSetIntersector),ItemVisitor=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"visitItem",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),IntervalRTreeNode$1=function(){function e(){var t=this;_classCallCheck(this,e),function(){t.min=Double.POSITIVE_INFINITY,t.max=Double.NEGATIVE_INFINITY}()}return _createClass(e,[{key:"getMin",value:function(){return this.min}},{key:"intersects",value:function(e,t){return this.min>t||this.max<e?!1:!0}},{key:"getMax",value:function(){return this.max}},{key:"toString",value:function(){return WKTWriter$1.toLineString(new Coordinate(this.min,0),new Coordinate(this.max,0))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"NodeComparator",get:function(){return NodeComparator}}]),e}(),NodeComparator=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"compare",value:function(e,t){var n=e,r=t,a=(n.min+n.max)/2,i=(r.min+r.max)/2;return i>a?-1:a>i?1:0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparator]}}]),e}(),IntervalRTreeLeafNode=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){i.item=null}();var o=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2];i.min=r,i.max=a,i.item=o}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"query",value:function(e,t,n){return this.intersects(e,t)?void n.visitItem(this.item):null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(IntervalRTreeNode$1),IntervalRTreeBranchNode=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){i.node1=null,i.node2=null}();var o=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1];i.node1=r,i.node2=a,i.buildExtent(i.node1,i.node2)}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"buildExtent",value:function(e,t){this.min=Math.min(e.min,t.min),this.max=Math.max(e.max,t.max)}},{key:"query",value:function(e,t,n){return this.intersects(e,t)?(null!==this.node1&&this.node1.query(e,t,n),void(null!==this.node2&&this.node2.query(e,t,n))):null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(IntervalRTreeNode$1),SortedPackedIntervalRTree=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.leaves=new ArrayList,t.root=null,t.level=0}();var i=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return i.apply(this,r)}return _createClass(e,[{key:"buildTree",value:function(){Collections.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var e=this.leaves,t=null,n=new ArrayList;;){if(this.buildLevel(e,n),1===n.size())return n.get(0);t=e,e=n,n=t}}},{key:"insert",value:function(e,t,n){if(null!==this.root)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new IntervalRTreeLeafNode(e,t,n))}},{key:"query",value:function(e,t,n){this.init(),this.root.query(e,t,n)}},{key:"buildRoot",value:function(){return null!==this.root?null:void(this.root=this.buildTree())}},{key:"printNode",value:function(e){System.out.println(WKTWriter$1.toLineString(new Coordinate(e.min,this.level),new Coordinate(e.max,this.level)))}},{key:"init",value:function(){return null!==this.root?null:void this.buildRoot()}},{key:"buildLevel",value:function(e,t){this.level++,t.clear();for(var n=0;n<e.size();n+=2){var r=e.get(n),a=n+1<e.size()?e.get(n):null;if(null===a)t.add(r);else{var i=new IntervalRTreeBranchNode(e.get(n),e.get(n+1));t.add(i)}}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),LinearComponentExtracter=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.lines=null,t.isForcedToLineString=!1}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.lines=a}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.lines=a,t.isForcedToLineString=i}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"filter",value:function(e){if(this.isForcedToLineString&&e instanceof LinearRing){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this.lines.add(t),null}e instanceof LineString&&this.lines.add(e)}},{key:"setForceToLineString",value:function(e){this.isForcedToLineString=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryComponentFilter]}}],[{key:"getGeometry",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return a.getFactory().buildGeometry(e.getLines(a))}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return a.getFactory().buildGeometry(e.getLines(a,i))}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getLines",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.getLines(a,!1)}.apply(void 0,n);case 2:if(n[0].interfaces_&&n[0].interfaces_.indexOf(Collection)>-1&&n[1].interfaces_&&n[1].interfaces_.indexOf(Collection)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=n[1],o=a.iterator();o.hasNext();){var s=o.next();e.getLines(s,i)}return i}.apply(void 0,n);if(n[0]instanceof Geometry&&"boolean"==typeof n[1])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=new ArrayList;return a.apply(new e(o,i)),o}.apply(void 0,n);if(n[0]instanceof Geometry&&n[1].interfaces_&&n[1].interfaces_.indexOf(Collection)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return a instanceof LineString?i.add(a):a.apply(new e(i)),i}.apply(void 0,n);case 3:if("boolean"==typeof n[2]&&n[0].interfaces_&&n[0].interfaces_.indexOf(Collection)>-1&&n[1].interfaces_&&n[1].interfaces_.indexOf(Collection)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=n[1],o=n[2],s=a.iterator();s.hasNext();){var u=s.next();e.getLines(u,i,o)}return i}.apply(void 0,n);if("boolean"==typeof n[2]&&n[0]instanceof Geometry&&n[1].interfaces_&&n[1].interfaces_.indexOf(Collection)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];return a.apply(new e(i,o)),i}.apply(void 0,n)}};return a.apply(this,n)}}]),e}(),ArrayListVisitor=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.items=new ArrayList}();var i=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return i.apply(this,r)}return _createClass(e,[{key:"visitItem",value:function(e){this.items.add(e)}},{key:"getItems",value:function(){return this.items}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[ItemVisitor]}}]),e}(),IndexedPointInAreaLocator=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.index=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];if(!(a.interfaces_&&a.interfaces_.indexOf(Polygonal)>-1))throw new IllegalArgumentException$1("Argument must be Polygonal");t.index=new IntervalIndexedGeometry(a)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"locate",value:function(e){var t=new RayCrossingCounter(e),n=new SegmentVisitor(t);return this.index.query(e.y,e.y,n),t.getLocation()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[PointOnGeometryLocator]}}],[{key:"SegmentVisitor",get:function(){return SegmentVisitor}},{key:"IntervalIndexedGeometry",get:function(){return IntervalIndexedGeometry}}]),e}(),SegmentVisitor=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.counter=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.counter=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"visitItem",value:function(e){var t=e;this.counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[ItemVisitor]}}]),e}(),IntervalIndexedGeometry=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.index=new SortedPackedIntervalRTree}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.init(a)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"init",value:function(e){for(var t=LinearComponentExtracter.getLines(e),n=t.iterator();n.hasNext();){var r=n.next(),a=r.getCoordinates();this.addLine(a)}}},{key:"addLine",value:function(e){for(var t=1;t<e.length;t++){var n=new LineSegment(e[t-1],e[t]),r=Math.min(n.p0.y,n.p1.y),a=Math.max(n.p0.y,n.p1.y);this.index.insert(r,a,n)}}},{key:"query",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=new ArrayListVisitor;return e.index.query(a,i,o),o.getItems()}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];e.index.query(a,i,o)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),EdgeIntersection=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.coord=null,t.segmentIndex=null,t.dist=null}();var i=function(){
for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];t.coord=new Coordinate(a),t.segmentIndex=i,t.dist=o}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)}},{key:"compareTo",value:function(e){var t=e;return this.compare(t.segmentIndex,t.dist)}},{key:"isEndPoint",value:function(e){return 0===this.segmentIndex&&0===this.dist?!0:this.segmentIndex===e?!0:!1}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable]}}]),e}(),EdgeIntersectionList=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.nodeMap=new TreeMap,t.edge=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.edge=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"print",value:function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(e){this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next(),a=this.createSplitEdge(n,r);e.add(a),n=r}}},{key:"addEndpoints",value:function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)}},{key:"createSplitEdge",value:function(e,t){var n=t.segmentIndex-e.segmentIndex+2,r=this.edge.pts[t.segmentIndex],a=t.dist>0||!t.coord.equals2D(r);a||n--;var i=new Array(n),o=0;i[o++]=new Coordinate(e.coord);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)i[o++]=this.edge.pts[s];return a&&(i[o]=t.coord),new Edge(i,new Label(this.edge.label))}},{key:"add",value:function(e,t,n){var r=new EdgeIntersection(e,t,n),a=this.nodeMap.get(r);return null!==a?a:(this.nodeMap.put(r,r),r)}},{key:"isIntersection",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();if(n.coord.equals(e))return!0}return!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),MonotoneChainIndexer=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];_classCallCheck(this,e);var a=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return a.apply(this,n)}return _createClass(e,[{key:"getChainStartIndices",value:function(t){var n=0,r=new ArrayList;r.add(new Integer(n));do{var a=this.findChainEnd(t,n);r.add(new Integer(a)),n=a}while(n<t.length-1);var i=e.toIntArray(r);return i}},{key:"findChainEnd",value:function(e,t){for(var n=Quadrant.quadrant(e[t],e[t+1]),r=t+1;r<e.length;){var a=Quadrant.quadrant(e[r-1],e[r]);if(a!==n)break;r++}return r-1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toIntArray",value:function(e){for(var t=new Array(e.size()),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t}}]),e}(),MonotoneChainEdge=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.e=null,t.pts=null,t.startIndex=null,t.env1=new Envelope,t.env2=new Envelope}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.e=a,t.pts=a.getCoordinates();var i=new MonotoneChainIndexer;t.startIndex=i.getChainStartIndices(t.pts)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n}},{key:"getMinX",value:function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return n>t?t:n}},{key:"computeIntersectsForChain",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 4:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=n[3];e.computeIntersectsForChain(e.startIndex[a],e.startIndex[a+1],i,i.startIndex[o],i.startIndex[o+1],s)}.apply(void 0,n);case 6:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=n[3],u=n[4],l=n[5],c=e.pts[a],g=e.pts[i],h=o.pts[s],f=o.pts[u];if(i-a===1&&u-s===1)return l.addIntersections(e.e,a,o.e,s),null;if(e.env1.init(c,g),e.env2.init(h,f),!e.env1.intersects(e.env2))return null;var y=Math.trunc((a+i)/2),v=Math.trunc((s+u)/2);y>a&&(v>s&&e.computeIntersectsForChain(a,y,o,s,v,l),u>v&&e.computeIntersectsForChain(a,y,o,v,u,l)),i>y&&(v>s&&e.computeIntersectsForChain(y,i,o,s,v,l),u>v&&e.computeIntersectsForChain(y,i,o,v,u,l))}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(e,t){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<e.startIndex.length-1;r++)this.computeIntersectsForChain(n,e,r,t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Depth=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.depth=Array(2).fill().map(function(){return Array(3)})}();var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 0:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];for(var i=0;2>i;i++)for(var o=0;3>o;o++)t.depth[i][o]=e.NULL_VALUE}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"getDepth",value:function(e,t){return this.depth[e][t]}},{key:"setDepth",value:function(e,t,n){this.depth[e][t]=n}},{key:"isNull",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 0:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];for(var i=0;2>i;i++)for(var o=0;3>o;o++)if(t.depth[i][o]!==e.NULL_VALUE)return!1;return!0}.apply(void 0,r);case 1:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];return t.depth[i][1]===e.NULL_VALUE}.apply(void 0,r);case 2:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],o=r[1];return t.depth[i][o]===e.NULL_VALUE}.apply(void 0,r)}};return i.apply(this,r)}},{key:"normalize",value:function(){for(var e=0;2>e;e++)if(!this.isNull(e)){var t=this.depth[e][1];this.depth[e][2]<t&&(t=this.depth[e][2]),0>t&&(t=0);for(var n=1;3>n;n++){var r=0;this.depth[e][n]>t&&(r=1),this.depth[e][n]=r}}}},{key:"getDelta",value:function(e){return this.depth[e][Position.RIGHT]-this.depth[e][Position.LEFT]}},{key:"getLocation",value:function(e,t){return this.depth[e][t]<=0?Location.EXTERIOR:Location.INTERIOR}},{key:"toString",value:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]}},{key:"add",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];for(var i=r[0],o=0;2>o;o++)for(var s=1;3>s;s++){var u=i.getLocation(o,s);(u===Location.EXTERIOR||u===Location.INTERIOR)&&(t.isNull(o,s)?t.depth[o][s]=e.depthAtLocation(u):t.depth[o][s]+=e.depthAtLocation(u))}}.apply(void 0,r);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];o===Location.INTERIOR&&t.depth[a][i]++}.apply(void 0,r)}};return i.apply(this,r)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"depthAtLocation",value:function(t){return t===Location.EXTERIOR?0:t===Location.INTERIOR?1:e.NULL_VALUE}}]),e}();Depth.NULL_VALUE=-1;var Edge=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){i.pts=null,i.env=null,i.eiList=new EdgeIntersectionList(i),i.name=null,i.mce=null,i._isIsolated=!0,i.depth=new Depth,i.depthDelta=0}();var o=function s(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];s.call(i,r,null)}.apply(void 0,t);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1];i.pts=r,i.label=a}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"getDepth",value:function(){return this.depth}},{key:"getCollapsedEdge",value:function(){var e=new Array(2);e[0]=this.pts[0],e[1]=this.pts[1];var n=new t(e,Label.toLineLabel(this.label));return n}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(e){this._isIsolated=e}},{key:"setName",value:function(e){this.name=e}},{key:"equals",value:function(e){if(!(e instanceof t))return!1;var n=e;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,a=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(n.pts[o])||(r=!1),this.pts[o].equals2D(n.pts[--i])||(a=!1),!r&&!a)return!1;return!0}},{key:"getCoordinate",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.pts.length>0?e.pts[0]:null}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.pts[a]}.apply(void 0,n)}};return a.apply(this,n)}},{key:"print",value:function(e){e.print("edge "+this.name+": "),e.print("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.print(","),e.print(this.pts[t].x+" "+this.pts[t].y);e.print(")  "+this.label+" "+this.depthDelta)}},{key:"computeIM",value:function(e){t.updateIM(this.label,e)}},{key:"isCollapsed",value:function(){return this.label.isArea()?3!==this.pts.length?!1:this.pts[0].equals(this.pts[2])?!0:!1:!1}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this.depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(e){e.print("edge "+this.name+": ");for(var t=this.pts.length-1;t>=0;t--)e.print(this.pts[t]+" ");e.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===this.mce&&(this.mce=new MonotoneChainEdge(this)),this.mce}},{key:"getEnvelope",value:function(){if(null===this.env){this.env=new Envelope;for(var e=0;e<this.pts.length;e++)this.env.expandToInclude(this.pts[e])}return this.env}},{key:"addIntersection",value:function(e,t,n,r){var a=new Coordinate(e.getIntersection(r)),i=t,o=e.getEdgeDistance(n,r),s=i+1;if(s<this.pts.length){var u=this.pts[s];a.equals2D(u)&&(i=s,o=0)}this.eiList.add(a,i,o)}},{key:"toString",value:function(){var e=new StringBuffer;e.append("edge "+this.name+": "),e.append("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.append(","),e.append(this.pts[t].x+" "+this.pts[t].y);return e.append(")  "+this.label+" "+this.depthDelta),e.toString()}},{key:"isPointwiseEqual",value:function(e){if(this.pts.length!==e.pts.length)return!1;for(var t=0;t<this.pts.length;t++)if(!this.pts[t].equals2D(e.pts[t]))return!1;return!0}},{key:"setDepthDelta",value:function(e){this.depthDelta=e}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"updateIM",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(2!==r.length)return(e=_get(Object.getPrototypeOf(t),"updateIM",this)).call.apply(e,[this].concat(r));var i=r[0],o=r[1];o.setAtLeastIfValid(i.getLocation(0,Position.ON),i.getLocation(1,Position.ON),1),i.isArea()&&(o.setAtLeastIfValid(i.getLocation(0,Position.LEFT),i.getLocation(1,Position.LEFT),2),o.setAtLeastIfValid(i.getLocation(0,Position.RIGHT),i.getLocation(1,Position.RIGHT),2))}}]),t}(GraphComponent),GeometryGraph=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){i.parentGeom=null,i.lineEdgeMap=new HashMap,i.boundaryNodeRule=null,i.useBoundaryDeterminationRule=!0,i.argIndex=null,i.boundaryNodes=null,i._hasTooFewPoints=!1,i.invalidPoint=null,i.areaPtLocator=null,i.ptLocator=new PointLocator}();var o=function s(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1];s.call(i,r,a,BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE)}.apply(void 0,t);case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2];i.argIndex=r,i.parentGeom=a,i.boundaryNodeRule=o,null!==a&&i.add(a)}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"insertBoundaryPoint",value:function(e,n){var r=this.nodes.addNode(n),a=r.getLabel(),i=1,o=Location.NONE;o=a.getLocation(e,Position.ON),o===Location.BOUNDARY&&i++;var s=t.determineBoundary(this.boundaryNodeRule,i);a.setLocation(e,s)}},{key:"computeSelfNodes",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return e.computeSelfNodes(a,i,!1)}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=new SegmentIntersector(a,!0,!1);s.setIsDoneIfProperInt(o);var u=e.createEdgeSetIntersector(),l=e.parentGeom instanceof LinearRing||e.parentGeom instanceof Polygon||e.parentGeom instanceof MultiPolygon,c=i||!l;return u.computeIntersections(e.edges,s,c),e.addSelfIntersectionNodes(e.argIndex),s}.apply(void 0,n)}};return a.apply(this,n)}},{key:"computeSplitEdges",value:function(e){for(var t=this.edges.iterator();t.hasNext();){var n=t.next();n.eiList.addSplitEdges(e)}}},{key:"computeEdgeIntersections",value:function(e,t,n){var r=new SegmentIntersector(t,n,!0);r.setBoundaryNodes(this.getBoundaryNodes(),e.getBoundaryNodes());var a=this.createEdgeSetIntersector();return a.computeIntersections(this.edges,e.edges,r),r}},{key:"getGeometry",value:function(){return this.parentGeom}},{key:"getBoundaryNodeRule",value:function(){return this.boundaryNodeRule}},{key:"hasTooFewPoints",value:function(){return this._hasTooFewPoints}},{key:"addPoint",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof Point)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=a.getCoordinate();e.insertPoint(e.argIndex,i,Location.INTERIOR)}.apply(void 0,n);if(n[0]instanceof Coordinate)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];e.insertPoint(e.argIndex,a,Location.INTERIOR)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"addPolygon",value:function(e){this.addPolygonRing(e.getExteriorRing(),Location.EXTERIOR,Location.INTERIOR);for(var t=0;t<e.getNumInteriorRing();t++){var n=e.getInteriorRingN(t);this.addPolygonRing(n,Location.INTERIOR,Location.EXTERIOR)}}},{key:"addEdge",value:function(e){this.insertEdge(e);var t=e.getCoordinates();this.insertPoint(this.argIndex,t[0],Location.BOUNDARY),this.insertPoint(this.argIndex,t[t.length-1],Location.BOUNDARY)}},{key:"addLineString",value:function(e){var t=CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(t.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=t[0],null;var n=new Edge(t,new Label(this.argIndex,Location.INTERIOR));this.lineEdgeMap.put(e,n),this.insertEdge(n),Assert.isTrue(t.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,t[0]),this.insertBoundaryPoint(this.argIndex,t[t.length-1])}},{key:"getInvalidPoint",value:function(){return this.invalidPoint}},{key:"getBoundaryPoints",value:function(){for(var e=this.getBoundaryNodes(),t=new Array(e.size()),n=0,r=e.iterator();r.hasNext();){var a=r.next();t[n++]=a.getCoordinate().copy()}return t}},{key:"getBoundaryNodes",value:function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes}},{key:"addSelfIntersectionNode",value:function(e,t,n){return this.isBoundaryNode(e,t)?null:void(n===Location.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(e,t):this.insertPoint(e,t,n))}},{key:"addPolygonRing",value:function(e,t,n){if(e.isEmpty())return null;var r=CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=r[0],null;var a=t,i=n;CGAlgorithms.isCCW(r)&&(a=n,i=t);var o=new Edge(r,new Label(this.argIndex,Location.BOUNDARY,a,i));this.lineEdgeMap.put(e,o),this.insertEdge(o),this.insertPoint(this.argIndex,r[0],Location.BOUNDARY)}},{key:"insertPoint",value:function(e,t,n){var r=this.nodes.addNode(t),a=r.getLabel();null===a?r.label=new Label(e,n):a.setLocation(e,n)}},{key:"createEdgeSetIntersector",value:function(){return new SimpleMCSweepLineIntersector}},{key:"addSelfIntersectionNodes",value:function(e){for(var t=this.edges.iterator();t.hasNext();)for(var n=t.next(),r=n.getLabel().getLocation(e),a=n.eiList.iterator();a.hasNext();){var i=a.next();this.addSelfIntersectionNode(e,i.coord,r)}}},{key:"add",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(1!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"add",this)).call.apply(e,[this].concat(r));var i=r[0];if(i.isEmpty())return null;if(i instanceof MultiPolygon&&(this.useBoundaryDeterminationRule=!1),i instanceof Polygon)this.addPolygon(i);else if(i instanceof LineString)this.addLineString(i);else if(i instanceof Point)this.addPoint(i);else if(i instanceof MultiPoint)this.addCollection(i);else if(i instanceof MultiLineString)this.addCollection(i);else if(i instanceof MultiPolygon)this.addCollection(i);else{if(!(i instanceof GeometryCollection))throw new UnsupportedOperationException(i.getClass().getName());this.addCollection(i)}}},{key:"addCollection",value:function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}}},{key:"locate",value:function(e){return this.parentGeom.interfaces_&&this.parentGeom.interfaces_.indexOf(Polygonal)>-1&&this.parentGeom.getNumGeometries()>50?(null===this.areaPtLocator&&(this.areaPtLocator=new IndexedPointInAreaLocator(this.parentGeom)),this.areaPtLocator.locate(e)):this.ptLocator.locate(e,this.parentGeom)}},{key:"findEdge",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(1===r.length){var i=r[0];return this.lineEdgeMap.get(i)}return(e=_get(Object.getPrototypeOf(t.prototype),"findEdge",this)).call.apply(e,[this].concat(r))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"determineBoundary",value:function(e,t){return e.isInBoundary(t)?Location.BOUNDARY:Location.INTERIOR}}]),t}(PlanarGraph),EdgeEndBuilder=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];_classCallCheck(this,e);var a=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return a.apply(this,n)}return _createClass(e,[{key:"createEdgeEndForNext",value:function(e,t,n,r){var a=n.segmentIndex+1;if(a>=e.getNumPoints()&&null===r)return null;var i=e.getCoordinate(a);null!==r&&r.segmentIndex===n.segmentIndex&&(i=r.coord);var o=new EdgeEnd(e,n.coord,i,new Label(e.getLabel()));t.add(o)}},{key:"createEdgeEndForPrev",value:function(e,t,n,r){var a=n.segmentIndex;if(0===n.dist){if(0===a)return null;a--}var i=e.getCoordinate(a);null!==r&&r.segmentIndex>=a&&(i=r.coord);var o=new Label(e.getLabel());o.flip();var s=new EdgeEnd(e,n.coord,i,o);t.add(s)}},{key:"computeEdgeEnds",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=new ArrayList,o=a;o.hasNext();){var s=o.next();e.computeEdgeEnds(s,i)}return i}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=a.getEdgeIntersectionList();o.addEndpoints();var s=o.iterator(),u=null,l=null;if(!s.hasNext())return null;var c=s.next();do u=l,l=c,c=null,s.hasNext()&&(c=s.next()),null!==l&&(e.createEdgeEndForPrev(a,i,l,u),e.createEdgeEndForNext(a,i,l,c));while(null!==l)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),EdgeEndBundle=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){o.edgeEnds=new ArrayList}();var s=function u(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];u.call(o,null,r)}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=(r[0],r[1]),o=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,i.getEdge(),i.getCoordinate(),i.getDirectedCoordinate(),new Label(i.getLabel())));o.insert(i)}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"insert",value:function(e){this.edgeEnds.add(e)}},{key:"print",value:function(e){e.println("EdgeEndBundle--> Label: "+this.label);for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e),e.println()}}},{key:"iterator",value:function(){return this.edgeEnds.iterator()}},{key:"getEdgeEnds",value:function(){return this.edgeEnds}},{key:"computeLabelOn",value:function(e,t){for(var n=0,r=!1,a=this.iterator();a.hasNext();){var i=a.next(),o=i.getLabel().getLocation(e);o===Location.BOUNDARY&&n++,o===Location.INTERIOR&&(r=!0)}var o=Location.NONE;r&&(o=Location.INTERIOR),n>0&&(o=GeometryGraph.determineBoundary(t,n)),this.label.setLocation(e,o)}},{key:"computeLabelSide",value:function(e,t){for(var n=this.iterator();n.hasNext();){var r=n.next();if(r.getLabel().isArea()){var a=r.getLabel().getLocation(e,t);if(a===Location.INTERIOR)return this.label.setLocation(e,t,Location.INTERIOR),null;a===Location.EXTERIOR&&this.label.setLocation(e,t,Location.EXTERIOR)}}}},{key:"getLabel",value:function(){return this.label}},{key:"computeLabelSides",value:function(e){this.computeLabelSide(e,Position.LEFT),this.computeLabelSide(e,Position.RIGHT)}},{key:"updateIM",value:function(e){Edge.updateIM(this.label,e)}},{key:"computeLabel",value:function(e){for(var t=!1,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().isArea()&&(t=!0)}t?this.label=new Label(Location.NONE,Location.NONE,Location.NONE):this.label=new Label(Location.NONE);for(var a=0;2>a;a++)this.computeLabelOn(a,e),t&&this.computeLabelSides(a)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(EdgeEnd),EdgeEndBundleStar=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),o=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"updateIM",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.updateIM(e)}}},{key:"insert",value:function(e){var t=this.edgeMap.get(e);null===t?(t=new EdgeEndBundle(e),this.insertEdgeEnd(e,t)):t.insert(e)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(EdgeEndStar),RelateNode=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 2:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0],o=r[1];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,i,o))}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"updateIMFromEdges",value:function(e){this.edges.updateIM(e)}},{key:"computeIM",value:function(e){e.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Node),RelateNodeFactory=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"createNode",value:function(e){return new RelateNode(e,new EdgeEndBundleStar)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(NodeFactory),RelateNodeGraph=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.nodes=new NodeMap(new RelateNodeFactory)}();var i=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return i.apply(this,r)}return _createClass(e,[{key:"insertEdgeEnds",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.nodes.add(n)}}},{key:"getNodeIterator",value:function(){return this.nodes.iterator()}},{key:"copyNodesAndLabels",value:function(e,t){for(var n=e.getNodeIterator();n.hasNext();){var r=n.next(),a=this.nodes.addNode(r.getCoordinate());a.setLabel(t,r.getLabel().getLocation(t))}}},{key:"build",value:function(e){this.computeIntersectionNodes(e,0),this.copyNodesAndLabels(e,0);var t=new EdgeEndBuilder,n=t.computeEdgeEnds(e.getEdgeIterator());this.insertEdgeEnds(n)}},{key:"computeIntersectionNodes",value:function(e,t){for(var n=e.getEdgeIterator();n.hasNext();)for(var r=n.next(),a=r.getLabel().getLocation(t),i=r.getEdgeIntersectionList().iterator();i.hasNext();){var o=i.next(),s=this.nodes.addNode(o.coord);a===Location.BOUNDARY?s.setLabelBoundary(t):s.getLabel().isNull(t)&&s.setLabel(t,Location.INTERIOR)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),ConsistentAreaTester=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.li=new RobustLineIntersector,t.geomGraph=null,t.nodeGraph=new RelateNodeGraph,t.invalidPoint=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.geomGraph=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"isNodeEdgeAreaLabelsConsistent",value:function(){for(var e=this.nodeGraph.getNodeIterator();e.hasNext();){var t=e.next();if(!t.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=t.getCoordinate().copy(),!1}return!0}},{key:"getInvalidPoint",value:function(){return this.invalidPoint}},{key:"hasDuplicateRings",value:function(){for(var e=this.nodeGraph.getNodeIterator();e.hasNext();)for(var t=e.next(),n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdgeEnds().size()>1)return this.invalidPoint=r.getEdge().getCoordinate(0),!0}return!1}},{key:"isNodeConsistentArea",value:function(){var e=this.geomGraph.computeSelfNodes(this.li,!0,!0);return e.hasProperIntersection()?(this.invalidPoint=e.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Boundable=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getBounds",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),ItemBoundable=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.bounds=null,t.item=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.bounds=a,t.item=i}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getItem",value:function(){return this.item}},{key:"getBounds",value:function(){return this.bounds}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Boundable,Serializable]}}]),e}(),PriorityQueue=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t._size=null,t.items=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t._size=0,t.items=new ArrayList,t.items.add(null)}.apply(void 0,n)}};return i.apply(this,r);
}return _createClass(e,[{key:"poll",value:function(){if(this.isEmpty())return null;var e=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),e}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(e){for(var t=null,n=this.items.get(e);2*e<=this._size&&(t=2*e,t!==this._size&&this.items.get(t+1).compareTo(this.items.get(t))<0&&t++,this.items.get(t).compareTo(n)<0);e=t)this.items.set(e,this.items.get(t));this.items.set(e,n)}},{key:"clear",value:function(){this._size=0,this.items.clear()}},{key:"isEmpty",value:function(){return 0===this._size}},{key:"add",value:function(e){this.items.add(null),this._size+=1;var t=this._size;for(this.items.set(0,e);e.compareTo(this.items.get(Math.trunc(t/2)))<0;t/=2)this.items.set(t,this.items.get(Math.trunc(t/2)));this.items.set(t,e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),SpatialIndex=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"insert",value:function(e,t){}},{key:"remove",value:function(e,t){}},{key:"query",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0]}.apply(void 0,t);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0],t[1]}.apply(void 0,t)}};return r.apply(this,t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),AbstractNode=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.childBoundables=new ArrayList,t.bounds=null,t.level=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.level=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getLevel",value:function(){return this.level}},{key:"size",value:function(){return this.childBoundables.size()}},{key:"getChildBoundables",value:function(){return this.childBoundables}},{key:"addChildBoundable",value:function(e){Assert.isTrue(null===this.bounds),this.childBoundables.add(e)}},{key:"isEmpty",value:function(){return this.childBoundables.isEmpty()}},{key:"getBounds",value:function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Boundable,Serializable]}}]),e}();AbstractNode.serialVersionUID=0x5a1e55ec41369800;var BoundablePair=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.boundable1=null,t.boundable2=null,t._distance=null,t.itemDistance=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];t.boundable1=a,t.boundable2=i,t.itemDistance=o,t._distance=t.distance()}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"expandToQueue",value:function(t,n){var r=e.isComposite(this.boundable1),a=e.isComposite(this.boundable2);if(r&&a)return e.area(this.boundable1)>e.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,n),null):(this.expand(this.boundable2,this.boundable1,t,n),null);if(r)return this.expand(this.boundable1,this.boundable2,t,n),null;if(a)return this.expand(this.boundable2,this.boundable1,t,n),null;throw new IllegalArgumentException$1("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(e.isComposite(this.boundable1)||e.isComposite(this.boundable2))}},{key:"compareTo",value:function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0}},{key:"expand",value:function(t,n,r,a){for(var i=t.getChildBoundables(),o=i.iterator();o.hasNext();){var s=o.next(),u=new e(s,n,this.itemDistance);u.getDistance()<a&&r.add(u)}}},{key:"getBoundable",value:function(e){return 0===e?this.boundable1:this.boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable]}}],[{key:"area",value:function(e){return e.getBounds().getArea()}},{key:"isComposite",value:function(e){return e instanceof AbstractNode}}]),e}(),AbstractSTRtree=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.root=null,t.built=!1,t.itemBoundables=new ArrayList,t.nodeCapacity=null}();var i=function o(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 0:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];o.call(t,e.DEFAULT_NODE_CAPACITY)}.apply(void 0,r);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];Assert.isTrue(a>1,"Node capacity must be greater than 1"),t.nodeCapacity=a}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"getNodeCapacity",value:function(){return this.nodeCapacity}},{key:"lastNode",value:function(e){return e.get(e.size()-1)}},{key:"size",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.isEmpty()?0:(e.build(),e.size(e.root))}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=0,o=a.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof AbstractNode?i+=e.size(s):s instanceof ItemBoundable&&(i+=1)}return i}.apply(void 0,n)}};return a.apply(this,n)}},{key:"removeItem",value:function(e,t){for(var n=null,r=e.getChildBoundables().iterator();r.hasNext();){var a=r.next();a instanceof ItemBoundable&&a.getItem()===t&&(n=a)}return null!==n?(e.getChildBoundables().remove(n),!0):!1}},{key:"itemsTree",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];e.build();var a=e.itemsTree(e.root);return null===a?new ArrayList:a}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=new ArrayList,o=a.getChildBoundables().iterator();o.hasNext();){var s=o.next();if(s instanceof AbstractNode){var u=e.itemsTree(s);null!==u&&i.add(u)}else s instanceof ItemBoundable?i.add(s.getItem()):Assert.shouldNeverReachHere()}return i.size()<=0?null:i}.apply(void 0,n)}};return a.apply(this,n)}},{key:"insert",value:function(e,t){Assert.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new ItemBoundable(e,t))}},{key:"boundablesAtLevel",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=new ArrayList;return e.boundablesAtLevel(a,e.root,i),i}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];if(Assert.isTrue(a>-2),i.getLevel()===a)return o.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var u=s.next();u instanceof AbstractNode?e.boundablesAtLevel(a,u,o):(Assert.isTrue(u instanceof ItemBoundable),-1===a&&o.add(u))}return null}.apply(void 0,n)}};return a.apply(this,n)}},{key:"query",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];e.build();var i=new ArrayList;return e.isEmpty()?i:(e.getIntersectsOp().intersects(e.root.getBounds(),a)&&e.query(a,e.root,i),i)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return e.build(),e.isEmpty()?null:void(e.getIntersectsOp().intersects(e.root.getBounds(),a)&&e.query(a,e.root,i))}.apply(void 0,n);case 3:if(n[2].interfaces_&&n[2].interfaces_.indexOf(ItemVisitor)>-1&&n[0]instanceof Object&&n[1]instanceof AbstractNode)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=n[1],o=n[2],s=i.getChildBoundables(),u=0;u<s.size();u++){var l=s.get(u);e.getIntersectsOp().intersects(l.getBounds(),a)&&(l instanceof AbstractNode?e.query(a,l,o):l instanceof ItemBoundable?o.visitItem(l.getItem()):Assert.shouldNeverReachHere())}}.apply(void 0,n);if(n[2].interfaces_&&n[2].interfaces_.indexOf(List)>-1&&n[0]instanceof Object&&n[1]instanceof AbstractNode)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=n[1],o=n[2],s=i.getChildBoundables(),u=0;u<s.size();u++){var l=s.get(u);e.getIntersectsOp().intersects(l.getBounds(),a)&&(l instanceof AbstractNode?e.query(a,l,o):l instanceof ItemBoundable?o.add(l.getItem()):Assert.shouldNeverReachHere())}}.apply(void 0,n)}};return a.apply(this,n)}},{key:"build",value:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))}},{key:"getRoot",value:function(){return this.build(),this.root}},{key:"remove",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return e.build(),e.getIntersectsOp().intersects(e.root.getBounds(),a)?e.remove(a,e.root,i):!1}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=e.removeItem(i,o);if(s)return!0;for(var u=null,l=i.getChildBoundables().iterator();l.hasNext();){var c=l.next();if(e.getIntersectsOp().intersects(c.getBounds(),a)&&c instanceof AbstractNode&&(s=e.remove(a,c,o))){u=c;break}}return null!==u&&u.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(u),s}.apply(void 0,n)}};return a.apply(this,n)}},{key:"createHigherLevels",value:function(e,t){Assert.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,t+1)}},{key:"depth",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.isEmpty()?0:(e.build(),e.depth(e.root))}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=0,o=a.getChildBoundables().iterator();o.hasNext();){var s=o.next();if(s instanceof AbstractNode){var u=e.depth(s);u>i&&(i=u)}}return i+1}.apply(void 0,n)}};return a.apply(this,n)}},{key:"createParentBoundables",value:function(e,t){Assert.isTrue(!e.isEmpty());var n=new ArrayList;n.add(this.createNode(t));var r=new ArrayList(e);Collections.sort(r,this.getComparator());for(var a=r.iterator();a.hasNext();){var i=a.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(t)),this.lastNode(n).addChildBoundable(i)}return n}},{key:"isEmpty",value:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Serializable]}}],[{key:"compareDoubles",value:function(e,t){return e>t?1:t>e?-1:0}},{key:"IntersectsOp",get:function(){return IntersectsOp$1}}]),e}(),IntersectsOp$1=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"intersects",value:function(e,t){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();AbstractSTRtree.serialVersionUID=-0x35ef64c82d4c5400,AbstractSTRtree.DEFAULT_NODE_CAPACITY=10;var ItemDistance=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"distance",value:function(e,t){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),STRtree=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),s=function u(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];u.call(o,t.DEFAULT_NODE_CAPACITY)}.apply(void 0,r);case 1:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,i))}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"createParentBoundablesFromVerticalSlices",value:function(e,t){Assert.isTrue(e.length>0);for(var n=new ArrayList,r=0;r<e.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(e[r],t));return n}},{key:"createNode",value:function(e){return new STRtreeNode(e)}},{key:"size",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];return 0===r.length?_get(Object.getPrototypeOf(t.prototype),"size",this).call(this):(e=_get(Object.getPrototypeOf(t.prototype),"size",this)).call.apply(e,[this].concat(r))}},{key:"insert",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(2!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"insert",this)).call.apply(e,[this].concat(r));var i=r[0],o=r[1];return i.isNull()?null:void _get(Object.getPrototypeOf(t.prototype),"insert",this).call(this,i,o)}},{key:"getIntersectsOp",value:function(){return t.intersectsOp}},{key:"verticalSlices",value:function(e,t){for(var n=Math.trunc(Math.ceil(e.size()/t)),r=new Array(t),a=e.iterator(),i=0;t>i;i++){r[i]=new ArrayList;for(var o=0;a.hasNext()&&n>o;){var s=a.next();r[i].add(s),o++}}return r}},{key:"query",value:function(){for(var e=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];return _get(Object.getPrototypeOf(t.prototype),"query",e).call(e,i)}.apply(void 0,r);case 2:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],o=r[1];_get(Object.getPrototypeOf(t.prototype),"query",e).call(e,i,o)}.apply(void 0,r);case 3:if(r[2].interfaces_&&r[2].interfaces_.indexOf(ItemVisitor)>-1&&r[0]instanceof Object&&r[1]instanceof AbstractNode)return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=r[2];_get(Object.getPrototypeOf(t.prototype),"query",e).call(e,i,o,s)}.apply(void 0,r);if(r[2].interfaces_&&r[2].interfaces_.indexOf(List)>-1&&r[0]instanceof Object&&r[1]instanceof AbstractNode)return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=r[2];_get(Object.getPrototypeOf(t.prototype),"query",e).call(e,i,o,s)}.apply(void 0,r)}};return i.apply(this,r)}},{key:"getComparator",value:function(){return t.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(e,n){return _get(Object.getPrototypeOf(t.prototype),"createParentBoundables",this).call(this,e,n)}},{key:"remove",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(2===r.length){var i=r[0],o=r[1];return _get(Object.getPrototypeOf(t.prototype),"remove",this).call(this,i,o)}return(e=_get(Object.getPrototypeOf(t.prototype),"remove",this)).call.apply(e,[this].concat(r))}},{key:"depth",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];return 0===r.length?_get(Object.getPrototypeOf(t.prototype),"depth",this).call(this):(e=_get(Object.getPrototypeOf(t.prototype),"depth",this)).call.apply(e,[this].concat(r))}},{key:"createParentBoundables",value:function(e,n){Assert.isTrue(!e.isEmpty());var r=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),a=new ArrayList(e);Collections.sort(a,t.xComparator);var i=this.verticalSlices(a,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(i,n)}},{key:"nearestNeighbour",value:function(){for(var e=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0].interfaces_&&r[0].interfaces_.indexOf(ItemDistance)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=new BoundablePair(e.getRoot(),e.getRoot(),a);return e.nearestNeighbour(i)}.apply(void 0,r);if(r[0]instanceof BoundablePair)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.nearestNeighbour(a,Double.POSITIVE_INFINITY)}.apply(void 0,r);case 2:if(r[0]instanceof t&&r[1].interfaces_&&r[1].interfaces_.indexOf(ItemDistance)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=new BoundablePair(e.getRoot(),a.getRoot(),i);return e.nearestNeighbour(o)}.apply(void 0,r);if(r[0]instanceof BoundablePair&&"number"==typeof r[1])return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=a,o=null,s=new PriorityQueue;for(s.add(r);!s.isEmpty()&&i>0;){var u=s.poll(),l=u.getDistance();if(l>=i)break;u.isLeaves()?(i=l,o=u):u.expandToQueue(s,i)}return[o.getBoundable(0).getItem(),o.getBoundable(1).getItem()]}.apply(void 0,r);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=new ItemBoundable(a,i),u=new BoundablePair(e.getRoot(),s,o);return e.nearestNeighbour(u)[0]}.apply(void 0,r)}};return i.apply(this,r)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[SpatialIndex,Serializable]}}],[{key:"centreX",value:function(e){return t.avg(e.getMinX(),e.getMaxX())}},{key:"avg",value:function(e,t){return(e+t)/2}},{key:"centreY",value:function(e){return t.avg(e.getMinY(),e.getMaxY())}},{key:"STRtreeNode",get:function(){return STRtreeNode}}]),t}(AbstractSTRtree),STRtreeNode=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 1:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,i))}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"computeBounds",value:function(){for(var e=null,t=this.getChildBoundables().iterator();t.hasNext();){var n=t.next();null===e?e=new Envelope(n.getBounds()):e.expandToInclude(n.getBounds())}return e}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(AbstractNode);STRtree.serialVersionUID=0x39920f7d5f261e0,STRtree.xComparator=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"compare",value:function(e,t){return STRtree.compareDoubles(STRtree.centreX(e.getBounds()),STRtree.centreX(t.getBounds()))}},{key:"interfaces_",get:function(){return[Comparator]}}]),e}()),STRtree.yComparator=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"compare",value:function(e,t){return STRtree.compareDoubles(STRtree.centreY(e.getBounds()),STRtree.centreY(t.getBounds()))}},{key:"interfaces_",get:function(){return[Comparator]}}]),e}()),STRtree.intersectsOp=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"intersects",value:function(e,t){return e.intersects(t)}},{key:"interfaces_",get:function(){return[IntersectsOp]}}]),e}()),STRtree.DEFAULT_NODE_CAPACITY=10;var IndexedNestedRingTester=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.graph=null,t.rings=new ArrayList,t.totalEnv=new Envelope,t.index=null,t.nestedPt=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.graph=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"buildIndex",value:function(){this.index=new STRtree;for(var e=0;e<this.rings.size();e++){var t=this.rings.get(e),n=t.getEnvelopeInternal();this.index.insert(n,t)}}},{key:"getNestedPoint",value:function(){return this.nestedPt}},{key:"isNonNested",value:function(){this.buildIndex();for(var e=0;e<this.rings.size();e++)for(var t=this.rings.get(e),n=t.getCoordinates(),r=this.index.query(t.getEnvelopeInternal()),a=0;a<r.size();a++){var i=r.get(a),o=i.getCoordinates();if(t!==i&&t.getEnvelopeInternal().intersects(i.getEnvelopeInternal())){var s=IsValidOp$1.findPtNotNode(n,i,this.graph);if(null!==s){var u=CGAlgorithms.isPointInRing(s,o);if(u)return this.nestedPt=s,!1}}}return!0}},{key:"add",value:function(e){this.rings.add(e),this.totalEnv.expandToInclude(e.getEnvelopeInternal())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),TopologyValidationError=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.errorType=null,t.pt=null}();var i=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];o.call(t,a,null)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.errorType=a,null!==i&&(t.pt=i.copy())}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getErrorType",value:function(){return this.errorType}},{key:"getMessage",value:function(){return e.errMsg[this.errorType]}},{key:"getCoordinate",value:function(){return this.pt}},{key:"toString",value:function(){var e="";return null!==this.pt&&(e=" at or near point "+this.pt),this.getMessage()+e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();TopologyValidationError.ERROR=0,TopologyValidationError.REPEATED_POINT=1,TopologyValidationError.HOLE_OUTSIDE_SHELL=2,TopologyValidationError.NESTED_HOLES=3,TopologyValidationError.DISCONNECTED_INTERIOR=4,TopologyValidationError.SELF_INTERSECTION=5,TopologyValidationError.RING_SELF_INTERSECTION=6,TopologyValidationError.NESTED_SHELLS=7,TopologyValidationError.DUPLICATE_RINGS=8,TopologyValidationError.TOO_FEW_POINTS=9,TopologyValidationError.INVALID_COORDINATE=10,TopologyValidationError.RING_NOT_CLOSED=11,TopologyValidationError.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"];var IsValidOp$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.parentGeometry=null,t.isSelfTouchingRingFormingHoleValid=!1,t.validErr=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.parentGeometry=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"checkInvalidCoordinates",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:if(r[0]instanceof Array)return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];for(var i=r[0],o=0;o<i.length;o++)if(!e.isValid(i[o]))return t.validErr=new TopologyValidationError(TopologyValidationError.INVALID_COORDINATE,i[o]),null}.apply(void 0,r);if(r[0]instanceof Polygon)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];if(t.checkInvalidCoordinates(a.getExteriorRing().getCoordinates()),null!==t.validErr)return null;for(var i=0;i<a.getNumInteriorRing();i++)if(t.checkInvalidCoordinates(a.getInteriorRingN(i).getCoordinates()),null!==t.validErr)return null}.apply(void 0,r)}};return i.apply(this,r)}},{key:"checkHolesNotNested",value:function(e,t){for(var n=new IndexedNestedRingTester(t),r=0;r<e.getNumInteriorRing();r++){var a=e.getInteriorRingN(r);n.add(a)}var i=n.isNonNested();i||(this.validErr=new TopologyValidationError(TopologyValidationError.NESTED_HOLES,n.getNestedPoint()))}},{key:"checkConsistentArea",value:function(e){var t=new ConsistentAreaTester(e),n=t.isNodeConsistentArea();return n?void(t.hasDuplicateRings()&&(this.validErr=new TopologyValidationError(TopologyValidationError.DUPLICATE_RINGS,t.getInvalidPoint()))):(this.validErr=new TopologyValidationError(TopologyValidationError.SELF_INTERSECTION,t.getInvalidPoint()),null)}},{key:"isValid",value:function(){return this.checkValid(this.parentGeometry),null===this.validErr}},{key:"checkShellInsideHole",value:function(t,n,r){var a=t.getCoordinates(),i=n.getCoordinates(),o=e.findPtNotNode(a,n,r);if(null!==o){var s=CGAlgorithms.isPointInRing(o,i);if(!s)return o}var u=e.findPtNotNode(i,t,r);if(null!==u){var l=CGAlgorithms.isPointInRing(u,a);return l?u:null}return Assert.shouldNeverReachHere("points in shell and hole appear to be equal"),null}},{key:"checkNoSelfIntersectingRings",value:function(e){for(var t=e.getEdgeIterator();t.hasNext();){var n=t.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this.validErr)return null}}},{key:"checkConnectedInteriors",value:function(e){var t=new ConnectedInteriorTester(e);t.isInteriorsConnected()||(this.validErr=new TopologyValidationError(TopologyValidationError.DISCONNECTED_INTERIOR,t.getCoordinate()))}},{key:"checkNoSelfIntersectingRing",value:function(e){for(var t=new TreeSet,n=!0,r=e.iterator();r.hasNext();){var a=r.next();if(n)n=!1;else{if(t.contains(a.coord))return this.validErr=new TopologyValidationError(TopologyValidationError.RING_SELF_INTERSECTION,a.coord),null;t.add(a.coord)}}}},{key:"checkHolesInShell",value:function(t,n){for(var r=t.getExteriorRing(),a=new MCPointInRing(r),i=0;i<t.getNumInteriorRing();i++){var o=t.getInteriorRingN(i),s=e.findPtNotNode(o.getCoordinates(),r,n);if(null===s)return null;var u=!a.isInside(s);if(u)return this.validErr=new TopologyValidationError(TopologyValidationError.HOLE_OUTSIDE_SHELL,s),null}}},{key:"checkTooFewPoints",value:function(e){return e.hasTooFewPoints()?(this.validErr=new TopologyValidationError(TopologyValidationError.TOO_FEW_POINTS,e.getInvalidPoint()),null):void 0}},{key:"getValidationError",value:function(){return this.checkValid(this.parentGeometry),this.validErr}},{key:"checkValid",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof Point)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];e.checkInvalidCoordinates(a.getCoordinates())}.apply(void 0,n);if(n[0]instanceof MultiPoint)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];e.checkInvalidCoordinates(a.getCoordinates())}.apply(void 0,n);if(n[0]instanceof LinearRing)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];if(e.checkInvalidCoordinates(a.getCoordinates()),null!==e.validErr)return null;if(e.checkClosedRing(a),null!==e.validErr)return null;var i=new GeometryGraph(0,a);if(e.checkTooFewPoints(i),null!==e.validErr)return null;var o=new RobustLineIntersector;i.computeSelfNodes(o,!0,!0),e.checkNoSelfIntersectingRings(i)}.apply(void 0,n);if(n[0]instanceof LineString)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];if(e.checkInvalidCoordinates(a.getCoordinates()),null!==e.validErr)return null;var i=new GeometryGraph(0,a);e.checkTooFewPoints(i)}.apply(void 0,n);if(n[0]instanceof Polygon)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];if(e.checkInvalidCoordinates(a),null!==e.validErr)return null;if(e.checkClosedRings(a),null!==e.validErr)return null;var i=new GeometryGraph(0,a);return e.checkTooFewPoints(i),null!==e.validErr?null:(e.checkConsistentArea(i),null!==e.validErr?null:e.isSelfTouchingRingFormingHoleValid||(e.checkNoSelfIntersectingRings(i),null===e.validErr)?(e.checkHolesInShell(a,i),null!==e.validErr?null:(e.checkHolesNotNested(a,i),null!==e.validErr?null:void e.checkConnectedInteriors(i))):null)}.apply(void 0,n);if(n[0]instanceof MultiPolygon)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=0;i<a.getNumGeometries();i++){var o=a.getGeometryN(i);if(e.checkInvalidCoordinates(o),null!==e.validErr)return null;if(e.checkClosedRings(o),null!==e.validErr)return null}var s=new GeometryGraph(0,a);if(e.checkTooFewPoints(s),null!==e.validErr)return null;if(e.checkConsistentArea(s),null!==e.validErr)return null;if(!e.isSelfTouchingRingFormingHoleValid&&(e.checkNoSelfIntersectingRings(s),null!==e.validErr))return null;for(var i=0;i<a.getNumGeometries();i++){var o=a.getGeometryN(i);if(e.checkHolesInShell(o,s),null!==e.validErr)return null}for(var i=0;i<a.getNumGeometries();i++){var o=a.getGeometryN(i);if(e.checkHolesNotNested(o,s),null!==e.validErr)return null}return e.checkShellsNotNested(a,s),null!==e.validErr?null:void e.checkConnectedInteriors(s)}.apply(void 0,n);if(n[0]instanceof GeometryCollection)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=0;i<a.getNumGeometries();i++){var o=a.getGeometryN(i);if(e.checkValid(o),null!==e.validErr)return null}}.apply(void 0,n);if(n[0]instanceof Geometry)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];if(e.validErr=null,a.isEmpty())return null;if(a instanceof Point)e.checkValid(a);else if(a instanceof MultiPoint)e.checkValid(a);else if(a instanceof LinearRing)e.checkValid(a);else if(a instanceof LineString)e.checkValid(a);else if(a instanceof Polygon)e.checkValid(a);else if(a instanceof MultiPolygon)e.checkValid(a);else{
if(!(a instanceof GeometryCollection))throw new UnsupportedOperationException(a.getClass().getName());e.checkValid(a)}}.apply(void 0,n)}};return a.apply(this,n)}},{key:"setSelfTouchingRingFormingHoleValid",value:function(e){this.isSelfTouchingRingFormingHoleValid=e}},{key:"checkShellNotNested",value:function(t,n,r){var a=t.getCoordinates(),i=n.getExteriorRing(),o=i.getCoordinates(),s=e.findPtNotNode(a,i,r);if(null===s)return null;var u=CGAlgorithms.isPointInRing(s,o);if(!u)return null;if(n.getNumInteriorRing()<=0)return this.validErr=new TopologyValidationError(TopologyValidationError.NESTED_SHELLS,s),null;for(var l=null,c=0;c<n.getNumInteriorRing();c++){var g=n.getInteriorRingN(c);if(l=this.checkShellInsideHole(t,g,r),null===l)return null}this.validErr=new TopologyValidationError(TopologyValidationError.NESTED_SHELLS,l)}},{key:"checkClosedRings",value:function(e){if(this.checkClosedRing(e.getExteriorRing()),null!==this.validErr)return null;for(var t=0;t<e.getNumInteriorRing();t++)if(this.checkClosedRing(e.getInteriorRingN(t)),null!==this.validErr)return null}},{key:"checkClosedRing",value:function(e){if(!e.isClosed()){var t=null;e.getNumPoints()>=1&&(t=e.getCoordinateN(0)),this.validErr=new TopologyValidationError(TopologyValidationError.RING_NOT_CLOSED,t)}}},{key:"checkShellsNotNested",value:function(e,t){for(var n=0;n<e.getNumGeometries();n++)for(var r=e.getGeometryN(n),a=r.getExteriorRing(),i=0;i<e.getNumGeometries();i++)if(n!==i){var o=e.getGeometryN(i);if(this.checkShellNotNested(a,o,t),null!==this.validErr)return null}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"findPtNotNode",value:function(e,t,n){for(var r=n.findEdge(t),a=r.getEdgeIntersectionList(),i=0;i<e.length;i++){var o=e[i];if(!a.isIntersection(o))return o}return null}},{key:"isValid",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof Geometry)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=new e(a);return i.isValid()}.apply(void 0,n);if(n[0]instanceof Coordinate)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];return Double.isNaN(r.x)?!1:Double.isInfinite(r.x)?!1:Double.isNaN(r.y)?!1:Double.isInfinite(r.y)?!1:!0}.apply(void 0,n)}};return a.apply(this,n)}}]),e}(),InteriorPointArea$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.factory=null,t.interiorPoint=null,t.maxWidth=0}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.factory=a.getFactory(),t.add(a)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"addPolygon",value:function(t){if(t.isEmpty())return null;var n=null,r=0,a=this.horizontalBisector(t);if(0===a.getLength())r=0,n=a.getCoordinate();else{var i=a.intersection(t),o=this.widestGeometry(i);r=o.getEnvelopeInternal().getWidth(),n=e.centre(o.getEnvelopeInternal())}(null===this.interiorPoint||r>this.maxWidth)&&(this.interiorPoint=n,this.maxWidth=r)}},{key:"getInteriorPoint",value:function(){return this.interiorPoint}},{key:"widestGeometry",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof GeometryCollection)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];if(r.isEmpty())return r;for(var a=r.getGeometryN(0),i=1;i<r.getNumGeometries();i++)r.getGeometryN(i).getEnvelopeInternal().getWidth()>a.getEnvelopeInternal().getWidth()&&(a=r.getGeometryN(i));return a}.apply(void 0,n);if(n[0]instanceof Geometry)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return a instanceof GeometryCollection?e.widestGeometry(a):a}.apply(void 0,n)}};return a.apply(this,n)}},{key:"horizontalBisector",value:function(e){var t=e.getEnvelopeInternal(),n=SafeBisectorFinder.getBisectorY(e);return this.factory.createLineString([new Coordinate(t.getMinX(),n),new Coordinate(t.getMaxX(),n)])}},{key:"add",value:function(e){if(e instanceof Polygon)this.addPolygon(e);else if(e instanceof GeometryCollection)for(var t=e,n=0;n<t.getNumGeometries();n++)this.add(t.getGeometryN(n))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"centre",value:function(t){return new Coordinate(e.avg(t.getMinX(),t.getMaxX()),e.avg(t.getMinY(),t.getMaxY()))}},{key:"avg",value:function(e,t){return(e+t)/2}},{key:"SafeBisectorFinder",get:function(){return SafeBisectorFinder}}]),e}(),SafeBisectorFinder=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.poly=null,t.centreY=null,t.hiY=Double.MAX_VALUE,t.loY=-Double.MAX_VALUE}();var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];t.poly=i,t.hiY=i.getEnvelopeInternal().getMaxY(),t.loY=i.getEnvelopeInternal().getMinY(),t.centreY=e.avg(t.loY,t.hiY)}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"updateInterval",value:function(e){e<=this.centreY?e>this.loY&&(this.loY=e):e>this.centreY&&e<this.hiY&&(this.hiY=e)}},{key:"getBisectorY",value:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));var n=e.avg(this.hiY,this.loY);return n}},{key:"process",value:function(e){for(var t=e.getCoordinateSequence(),n=0;n<t.size();n++){var r=t.getY(n);this.updateInterval(r)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBisectorY",value:function(t){var n=new e(t);return n.getBisectorY()}}]),e}(),GeometryCombiner=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.geomFactory=null,t.skipEmpty=!1,t.inputGeoms=null}();var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];t.geomFactory=e.extractFactory(i),t.inputGeoms=i}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"extractElements",value:function(e,t){if(null===e)return null;for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);this.skipEmpty&&r.isEmpty()||t.add(r)}}},{key:"combine",value:function(){for(var e=new ArrayList,t=this.inputGeoms.iterator();t.hasNext();){var n=t.next();this.extractElements(n,e)}return 0===e.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"combine",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=new e(a);return i.combine()}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=new e(e.createList(a,i));return o.combine()}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=new e(e.createList(a,i,o));return s.combine()}.apply(void 0,n)}};return a.apply(this,n)}},{key:"extractFactory",value:function(e){return e.isEmpty()?null:e.iterator().next().getFactory()}},{key:"createList",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=new ArrayList;return i.add(r),i.add(a),i}.apply(void 0,t);case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=t[2],o=new ArrayList;return o.add(r),o.add(a),o.add(i),o}.apply(void 0,t)}};return r.apply(this,t)}}]),e}(),PointGeometryUnion=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.pointGeom=null,t.otherGeom=null,t.geomFact=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.pointGeom=a,t.otherGeom=i,t.geomFact=i.getFactory()}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"union",value:function(){for(var e=new PointLocator,t=new TreeSet,n=0;n<this.pointGeom.getNumGeometries();n++){var r=this.pointGeom.getGeometryN(n),a=r.getCoordinate(),i=e.locate(a,this.otherGeom);i===Location.EXTERIOR&&t.add(a)}if(0===t.size())return this.otherGeom;var o=null,s=CoordinateArrays.toCoordinateArray(t);return o=1===s.length?this.geomFact.createPoint(s[0]):this.geomFact.createMultiPointFromCoords(s),GeometryCombiner.combine(o,this.otherGeom)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"union",value:function(t,n){var r=new e(t,n);return r.union()}}]),e}(),GeometryTransformer=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.inputGeom=null,t.factory=null,t.pruneEmptyGeometry=!0,t.preserveGeometryCollectionType=!0,t.preserveCollections=!1,t.preserveType=!1}();var i=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return i.apply(this,r)}return _createClass(e,[{key:"transformPoint",value:function(e,t){return this.factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))}},{key:"transformPolygon",value:function(e,t){var n=!0,r=this.transformLinearRing(e.getExteriorRing(),e);null!==r&&r instanceof LinearRing&&!r.isEmpty()||(n=!1);for(var a=new ArrayList,i=0;i<e.getNumInteriorRing();i++){var o=this.transformLinearRing(e.getInteriorRingN(i),e);null===o||o.isEmpty()||(o instanceof LinearRing||(n=!1),a.add(o))}if(n)return this.factory.createPolygon(r,a.toArray([]));var s=new ArrayList;return null!==r&&s.add(r),s.addAll(a),this.factory.buildGeometry(s)}},{key:"createCoordinateSequence",value:function(e){return this.factory.getCoordinateSequenceFactory().create(e)}},{key:"getInputGeometry",value:function(){return this.inputGeom}},{key:"transformMultiLineString",value:function(e,t){for(var n=new ArrayList,r=0;r<e.getNumGeometries();r++){var a=this.transformLineString(e.getGeometryN(r),e);null!==a&&(a.isEmpty()||n.add(a))}return this.factory.buildGeometry(n)}},{key:"transformCoordinates",value:function(e,t){return this.copy(e)}},{key:"transformLineString",value:function(e,t){return this.factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))}},{key:"transformMultiPoint",value:function(e,t){for(var n=new ArrayList,r=0;r<e.getNumGeometries();r++){var a=this.transformPoint(e.getGeometryN(r),e);null!==a&&(a.isEmpty()||n.add(a))}return this.factory.buildGeometry(n)}},{key:"transformMultiPolygon",value:function(e,t){for(var n=new ArrayList,r=0;r<e.getNumGeometries();r++){var a=this.transformPolygon(e.getGeometryN(r),e);null!==a&&(a.isEmpty()||n.add(a))}return this.factory.buildGeometry(n)}},{key:"copy",value:function(e){return e.clone()}},{key:"transformGeometryCollection",value:function(e,t){for(var n=new ArrayList,r=0;r<e.getNumGeometries();r++){var a=this.transform(e.getGeometryN(r));null!==a&&(this.pruneEmptyGeometry&&a.isEmpty()||n.add(a))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(GeometryFactory.toGeometryArray(n)):this.factory.buildGeometry(n)}},{key:"transform",value:function(e){if(this.inputGeom=e,this.factory=e.getFactory(),e instanceof Point)return this.transformPoint(e,null);if(e instanceof MultiPoint)return this.transformMultiPoint(e,null);if(e instanceof LinearRing)return this.transformLinearRing(e,null);if(e instanceof LineString)return this.transformLineString(e,null);if(e instanceof MultiLineString)return this.transformMultiLineString(e,null);if(e instanceof Polygon)return this.transformPolygon(e,null);if(e instanceof MultiPolygon)return this.transformMultiPolygon(e,null);if(e instanceof GeometryCollection)return this.transformGeometryCollection(e,null);throw new IllegalArgumentException$1("Unknown Geometry subtype: "+e.getClass().getName())}},{key:"transformLinearRing",value:function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e);if(null===n)return this.factory.createLinearRing(null);var r=n.size();return r>0&&4>r&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),LineStringSnapper=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.snapTolerance=0,t.srcPts=null,t.seg=new LineSegment,t.allowSnappingToSourceVertices=!1,t._isClosed=!1}();var i=function o(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 2:if(r[0]instanceof LineString&&"number"==typeof r[1])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];o.call(t,a.getCoordinates(),i)}.apply(void 0,r);if(r[0]instanceof Array&&"number"==typeof r[1])return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],o=r[1];t.srcPts=i,t._isClosed=e.isClosed(i),t.snapTolerance=o}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"snapVertices",value:function(e,t){for(var n=this._isClosed?e.size()-1:e.size(),r=0;n>r;r++){var a=e.get(r),i=this.findSnapForVertex(a,t);null!==i&&(e.set(r,new Coordinate(i)),0===r&&this._isClosed&&e.set(e.size()-1,new Coordinate(i)))}}},{key:"findSnapForVertex",value:function(e,t){for(var n=0;n<t.length;n++){if(e.equals2D(t[n]))return null;if(e.distance(t[n])<this.snapTolerance)return t[n]}return null}},{key:"snapTo",value:function(e){var t=new CoordinateList(this.srcPts);this.snapVertices(t,e),this.snapSegments(t,e);var n=t.toCoordinateArray();return n}},{key:"snapSegments",value:function(e,t){if(0===t.length)return null;var n=t.length;t[0].equals2D(t[t.length-1])&&(n=t.length-1);for(var r=0;n>r;r++){var a=t[r],i=this.findSegmentIndexToSnap(a,e);i>=0&&e.add(i+1,new Coordinate(a),!1)}}},{key:"findSegmentIndexToSnap",value:function(e,t){for(var n=Double.MAX_VALUE,r=-1,a=0;a<t.size()-1;a++){if(this.seg.p0=t.get(a),this.seg.p1=t.get(a+1),this.seg.p0.equals2D(e)||this.seg.p1.equals2D(e)){if(this.allowSnappingToSourceVertices)continue;return-1}var i=this.seg.distance(e);i<this.snapTolerance&&n>i&&(n=i,r=a)}return r}},{key:"setAllowSnappingToSourceVertices",value:function(e){this.allowSnappingToSourceVertices=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isClosed",value:function(e){return e.length<=1?!1:e[0].equals2D(e[e.length-1])}}]),e}(),GeometrySnapper=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.srcGeom=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.srcGeom=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"snapTo",value:function(e,t){var n=this.extractTargetCoordinates(e),r=new SnapTransformer(t,n);return r.transform(this.srcGeom)}},{key:"snapToSelf",value:function(e,t){var n=this.extractTargetCoordinates(this.srcGeom),r=new SnapTransformer(e,n,!0),a=r.transform(this.srcGeom),i=a;return t&&i.interfaces_&&i.interfaces_.indexOf(Polygonal)>-1&&(i=a.buffer(0)),i}},{key:"computeSnapTolerance",value:function(e){var t=this.computeMinimumSegmentLength(e),n=t/10;return n}},{key:"extractTargetCoordinates",value:function(e){for(var t=new TreeSet,n=e.getCoordinates(),r=0;r<n.length;r++)t.add(n[r]);return t.toArray(new Array(0))}},{key:"computeMinimumSegmentLength",value:function(e){for(var t=Double.MAX_VALUE,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);t>r&&(t=r)}return t}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"snap",value:function(t,n,r){var a=new Array(2),i=new e(t);a[0]=i.snapTo(n,r);var o=new e(n);return a[1]=o.snapTo(a[0],r),a}},{key:"computeOverlaySnapTolerance",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=e.computeSizeBasedSnapTolerance(a),o=a.getPrecisionModel();if(o.getType()===PrecisionModel.FIXED){var s=1/o.getScale()*2/1.415;s>i&&(i=s)}return i}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return Math.min(e.computeOverlaySnapTolerance(a),e.computeOverlaySnapTolerance(i))}.apply(void 0,n)}};return a.apply(this,n)}},{key:"computeSizeBasedSnapTolerance",value:function(t){var n=t.getEnvelopeInternal(),r=Math.min(n.getHeight(),n.getWidth()),a=r*e.SNAP_PRECISION_FACTOR;return a}},{key:"snapToSelf",value:function(t,n,r){var a=new e(t);return a.snapToSelf(n,r)}}]),e}();GeometrySnapper.SNAP_PRECISION_FACTOR=1e-9;var SnapTransformer=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){i.snapTolerance=null,i.snapPts=null,i.isSelfSnap=!1}();var o=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1];i.snapTolerance=r,i.snapPts=a}.apply(void 0,t);case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2];i.snapTolerance=r,i.snapPts=a,i.isSelfSnap=o}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"snapLine",value:function(e,t){var n=new LineStringSnapper(e,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(t)}},{key:"transformCoordinates",value:function(e,t){var n=e.toCoordinateArray(),r=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(r)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(GeometryTransformer),CommonBits=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.isFirst=!0,t.commonMantissaBitsCount=53,t.commonBits=0,t.commonSignExp=null}();var i=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return i.apply(this,r)}return _createClass(e,[{key:"getCommon",value:function(){return Double.longBitsToDouble(this.commonBits)}},{key:"add",value:function(t){var n=Double.doubleToLongBits(t);if(this.isFirst)return this.commonBits=n,this.commonSignExp=e.signExpBits(this.commonBits),this.isFirst=!1,null;var r=e.signExpBits(n);return r!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=e.numCommonMostSigMantissaBits(this.commonBits,n),void(this.commonBits=e.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))}},{key:"toString",value:function(){for(var t,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(1===r.length){var i=r[0],o=Double.longBitsToDouble(i),s=Long.toBinaryString(i),u="0000000000000000000000000000000000000000000000000000000000000000"+s,l=u.substring(u.length-64),c=l.substring(0,1)+"  "+l.substring(1,12)+"(exp) "+l.substring(12)+" [ "+o+" ]";return c}return(t=_get(Object.getPrototypeOf(e.prototype),"toString",this)).call.apply(t,[this].concat(r))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBit",value:function(e,t){var n=1<<t;return 0!==(e&n)?1:0}},{key:"signExpBits",value:function(e){return e>>52}},{key:"zeroLowerBits",value:function(e,t){var n=(1<<t)-1,r=~n,a=e&r;return a}},{key:"numCommonMostSigMantissaBits",value:function(t,n){for(var r=0,a=52;a>=0;a--){if(e.getBit(t,a)!==e.getBit(n,a))return r;r++}return 52}}]),e}(),CommonBitsRemover=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.commonCoord=null,t.ccFilter=new CommonCoordinateFilter}();var i=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return i.apply(this,r)}return _createClass(e,[{key:"addCommonBits",value:function(e){var t=new Translater(this.commonCoord);e.apply(t),e.geometryChanged()}},{key:"removeCommonBits",value:function(e){if(0===this.commonCoord.x&&0===this.commonCoord.y)return e;var t=new Coordinate(this.commonCoord);t.x=-t.x,t.y=-t.y;var n=new Translater(t);return e.apply(n),e.geometryChanged(),e}},{key:"getCommonCoordinate",value:function(){return this.commonCoord}},{key:"add",value:function(e){e.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"CommonCoordinateFilter",get:function(){return CommonCoordinateFilter}},{key:"Translater",get:function(){return Translater}}]),e}(),CommonCoordinateFilter=function(){function e(){var t=this;_classCallCheck(this,e),function(){t.commonBitsX=new CommonBits,t.commonBitsY=new CommonBits}()}return _createClass(e,[{key:"filter",value:function(e){this.commonBitsX.add(e.x),this.commonBitsY.add(e.y)}},{key:"getCommonCoordinate",value:function(){return new Coordinate(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[CoordinateFilter]}}]),e}(),Translater=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.trans=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.trans=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"filter",value:function(e,t){var n=e.getOrdinate(t,0)+this.trans.x,r=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,r)}},{key:"isDone",value:function(){return!1}},{key:"isGeometryChanged",value:function(){return!0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[CoordinateSequenceFilter]}}]),e}(),Octant=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];_classCallCheck(this,e);var a=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return a.apply(this,n)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"octant",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:if("number"==typeof n[0]&&"number"==typeof n[1])return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1];if(0===r&&0===a)throw new IllegalArgumentException$1("Cannot compute the octant for point ( "+r+", "+a+" )");var i=Math.abs(r),o=Math.abs(a);return r>=0?a>=0?i>=o?0:1:i>=o?7:6:a>=0?i>=o?3:2:i>=o?4:5}.apply(void 0,n);if(n[0]instanceof Coordinate&&n[1]instanceof Coordinate)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=i.x-a.x,s=i.y-a.y;if(0===o&&0===s)throw new IllegalArgumentException$1("Cannot compute the octant for two identical points "+a);return e.octant(o,s)}.apply(void 0,n)}};return a.apply(this,n)}}]),e}(),SegmentString=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(e){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(e){}},{key:"getData",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),BasicSegmentString=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.pts=null,t.data=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.pts=a,t.data=i}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"size",value:function(){return this.pts.length}},{key:"getCoordinate",value:function(e){return this.pts[e]}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getSegmentOctant",value:function(e){return e===this.pts.length-1?-1:Octant.octant(this.getCoordinate(e),this.getCoordinate(e+1))}},{key:"setData",value:function(e){this.data=e}},{key:"getData",value:function(){return this.data}},{key:"toString",value:function(){return WKTWriter$1.toLineString(new CoordinateArraySequence(this.pts))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[SegmentString]}}]),e}(),SegmentPointComparator=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"relativeSign",value:function(e,t){return t>e?-1:e>t?1:0}},{key:"compare",value:function(t,n,r){if(n.equals2D(r))return 0;var a=e.relativeSign(n.x,r.x),i=e.relativeSign(n.y,r.y);switch(t){case 0:return e.compareValue(a,i);case 1:return e.compareValue(i,a);case 2:return e.compareValue(i,-a);case 3:return e.compareValue(-a,i);case 4:return e.compareValue(-a,-i);case 5:return e.compareValue(-i,-a);case 6:return e.compareValue(-i,a);case 7:return e.compareValue(a,-i)}return Assert.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(e,t){return 0>e?-1:e>0?1:0>t?-1:t>0?1:0}}]),e}(),SegmentNode=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.segString=null,t.coord=null,t.segmentIndex=null,t.segmentOctant=null,t._isInterior=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=n[3];t.segString=a,t.coord=new Coordinate(i),t.segmentIndex=o,t.segmentOctant=s,t._isInterior=!i.equals2D(a.getCoordinate(o))}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:SegmentPointComparator.compare(this.segmentOctant,this.coord,t.coord)}},{key:"isEndPoint",value:function(e){return 0!==this.segmentIndex||this._isInterior?this.segmentIndex===e?!0:!1:!0}},{key:"isInterior",value:function(){return this._isInterior}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable]}}]),e}(),SegmentNodeList=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.nodeMap=new TreeMap,t.edge=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.edge=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getSplitCoordinates",value:function(){var e=new CoordinateList;this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next();this.addEdgeCoordinates(n,r,e),n=r}return e.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var e=new ArrayList;this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var t=e.iterator();t.hasNext();){var n=t.next().intValue();this.add(this.edge.getCoordinate(n),n)}}},{key:"print",value:function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}}},{key:"findCollapsesFromExistingVertices",value:function(e){for(var t=0;t<this.edge.size()-2;t++){var n=this.edge.getCoordinate(t),r=(this.edge.getCoordinate(t+1),this.edge.getCoordinate(t+2));n.equals2D(r)&&e.add(new Integer(t+1))}}},{key:"addEdgeCoordinates",value:function(e,t,n){var r=t.segmentIndex-e.segmentIndex+2,a=this.edge.getCoordinate(t.segmentIndex),i=t.isInterior()||!t.coord.equals2D(a);i||r--;n.add(new Coordinate(e.coord),!1);for(var o=e.segmentIndex+1;o<=t.segmentIndex;o++)n.add(this.edge.getCoordinate(o));i&&n.add(new Coordinate(t.coord))}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(e){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next(),a=this.createSplitEdge(n,r);e.add(a),n=r}}},{key:"findCollapseIndex",value:function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-e.segmentIndex;return t.isInterior()||r--,1===r?(n[0]=e.segmentIndex+1,!0):!1}},{key:"findCollapsesFromInsertedNodes",value:function(e){for(var t=new Array(1),n=this.iterator(),r=n.next();n.hasNext();){var a=n.next(),i=this.findCollapseIndex(r,a,t);i&&e.add(new Integer(t[0])),r=a}}},{key:"getEdge",value:function(){return this.edge}},{key:"addEndpoints",value:function(){var e=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(e),e)}},{key:"createSplitEdge",value:function(e,t){var n=t.segmentIndex-e.segmentIndex+2,r=this.edge.getCoordinate(t.segmentIndex),a=t.isInterior()||!t.coord.equals2D(r);a||n--;var i=new Array(n),o=0;i[o++]=new Coordinate(e.coord);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)i[o++]=this.edge.getCoordinate(s);return a&&(i[o]=new Coordinate(t.coord)),
new NodedSegmentString(i,this.edge.getData())}},{key:"add",value:function(e,t){var n=new SegmentNode(this.edge,e,t,this.edge.getSegmentOctant(t)),r=this.nodeMap.get(n);return null!==r?(Assert.isTrue(r.coord.equals2D(e),"Found equal nodes with different coordinates"),r):(this.nodeMap.put(n,n),n)}},{key:"checkSplitEdgesCorrectness",value:function(e){var t=this.edge.getCoordinates(),n=e.get(0),r=n.getCoordinate(0);if(!r.equals2D(t[0]))throw new RuntimeException("bad split edge start point at "+r);var a=e.get(e.size()-1),i=a.getCoordinates(),o=i[i.length-1];if(!o.equals2D(t[t.length-1]))throw new RuntimeException("bad split edge end point at "+o)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),NodableSegmentString=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addIntersection",value:function(e,t){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[SegmentString]}}]),e}(),NodedSegmentString=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.nodeList=new SegmentNodeList(t),t.pts=null,t.data=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.pts=a,t.data=i}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"size",value:function(){return this.pts.length}},{key:"getCoordinate",value:function(e){return this.pts[e]}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getSegmentOctant",value:function(e){return e===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))}},{key:"setData",value:function(e){this.data=e}},{key:"safeOctant",value:function(e,t){return e.equals2D(t)?0:Octant.octant(e,t)}},{key:"getData",value:function(){return this.data}},{key:"addIntersection",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];e.addIntersectionNode(a,i)}.apply(void 0,n);case 4:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=(n[2],n[3]),s=new Coordinate(a.getIntersection(o));e.addIntersection(s,i)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"toString",value:function(){return WKTWriter$1.toLineString(new CoordinateArraySequence(this.pts))}},{key:"getNodeList",value:function(){return this.nodeList}},{key:"addIntersectionNode",value:function(e,t){var n=t,r=n+1;if(r<this.pts.length){var a=this.pts[r];e.equals2D(a)&&(n=r)}var i=this.nodeList.add(e,n);return i}},{key:"addIntersections",value:function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[NodableSegmentString]}}],[{key:"getNodedSubstrings",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=new ArrayList;return e.getNodedSubstrings(a,i),i}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];for(var r=t[0],a=t[1],i=r.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(a)}}.apply(void 0,n)}};return a.apply(this,n)}}]),e}(),MonotoneChainOverlapAction=function(){function e(){var t=this;_classCallCheck(this,e),function(){t.tempEnv1=new Envelope,t.tempEnv2=new Envelope,t.overlapSeg1=new LineSegment,t.overlapSeg2=new LineSegment}()}return _createClass(e,[{key:"overlap",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0],t[1]}.apply(void 0,n);case 4:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=n[3];a.getLineSegment(i,e.overlapSeg1),o.getLineSegment(s,e.overlapSeg2),e.overlap(e.overlapSeg1,e.overlapSeg2)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Noder=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"computeNodes",value:function(e){}},{key:"getNodedSubstrings",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),SinglePassNoder=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.segInt=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.setSegmentIntersector(a)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"setSegmentIntersector",value:function(e){this.segInt=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Noder]}}]),e}(),MCIndexNoder=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){o.monoChains=new ArrayList,o.index=new STRtree,o.idCounter=0,o.nodedSegStrings=null,o.nOverlaps=0}();var s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,r);case 1:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,i))}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"getMonotoneChains",value:function(){return this.monoChains}},{key:"getNodedSubstrings",value:function(){return NodedSegmentString.getNodedSubstrings(this.nodedSegStrings)}},{key:"getIndex",value:function(){return this.index}},{key:"add",value:function(e){for(var t=MonotoneChainBuilder.getChains(e.getCoordinates(),e),n=t.iterator();n.hasNext();){var r=n.next();r.setId(this.idCounter++),this.index.insert(r.getEnvelope(),r),this.monoChains.add(r)}}},{key:"computeNodes",value:function(e){this.nodedSegStrings=e;for(var t=e.iterator();t.hasNext();)this.add(t.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var e=new SegmentOverlapAction(this.segInt),t=this.monoChains.iterator();t.hasNext();)for(var n=t.next(),r=this.index.query(n.getEnvelope()),a=r.iterator();a.hasNext();){var i=a.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,e),this.nOverlaps++),this.segInt.isDone())return null}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"SegmentOverlapAction",get:function(){return SegmentOverlapAction}}]),t}(SinglePassNoder),SegmentOverlapAction=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){i.si=null}();var o=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];i.si=r}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"overlap",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(4!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"overlap",this)).call.apply(e,[this].concat(r));var i=r[0],o=r[1],s=r[2],u=r[3],l=i.getContext(),c=s.getContext();this.si.processIntersections(l,o,c,u)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(MonotoneChainOverlapAction),SegmentIntersector$1=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"processIntersections",value:function(e,t,n,r){}},{key:"isDone",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),InteriorIntersectionFinder=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.findAllIntersections=!1,t.isCheckEndSegmentsOnly=!1,t.li=null,t.interiorIntersection=null,t.intSegments=null,t.intersections=new ArrayList,t.intersectionCount=0,t.keepIntersections=!0}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.li=a,t.interiorIntersection=null}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getInteriorIntersection",value:function(){return this.interiorIntersection}},{key:"setCheckEndSegmentsOnly",value:function(e){this.isCheckEndSegmentsOnly=e}},{key:"getIntersectionSegments",value:function(){return this.intSegments}},{key:"count",value:function(){return this.intersectionCount}},{key:"getIntersections",value:function(){return this.intersections}},{key:"setFindAllIntersections",value:function(e){this.findAllIntersections=e}},{key:"setKeepIntersections",value:function(e){this.keepIntersections=e}},{key:"processIntersections",value:function(e,t,n,r){if(!this.findAllIntersections&&this.hasIntersection())return null;if(e===n&&t===r)return null;if(this.isCheckEndSegmentsOnly){var a=this.isEndSegment(e,t)||this.isEndSegment(n,r);if(!a)return null}var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],s=n.getCoordinates()[r],u=n.getCoordinates()[r+1];this.li.computeIntersection(i,o,s,u),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4),this.intSegments[0]=i,this.intSegments[1]=o,this.intSegments[2]=s,this.intSegments[3]=u,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)}},{key:"isEndSegment",value:function(e,t){return 0===t?!0:t>=e.size()-2?!0:!1}},{key:"hasIntersection",value:function(){return null!==this.interiorIntersection}},{key:"isDone",value:function(){return this.findAllIntersections?!1:null!==this.interiorIntersection}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[SegmentIntersector$1]}}],[{key:"createAllIntersectionsFinder",value:function(t){var n=new e(t);return n.setFindAllIntersections(!0),n}},{key:"createAnyIntersectionFinder",value:function(t){return new e(t)}},{key:"createIntersectionCounter",value:function(t){var n=new e(t);return n.setFindAllIntersections(!0),n.setKeepIntersections(!1),n}}]),e}(),FastNodingValidator=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.li=new RobustLineIntersector,t.segStrings=null,t.findAllIntersections=!1,t.segInt=null,t._isValid=!0}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.segStrings=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"execute",value:function(){return null!==this.segInt?null:void this.checkInteriorIntersections()}},{key:"getIntersections",value:function(){return this.segInt.getIntersections()}},{key:"isValid",value:function(){return this.execute(),this._isValid}},{key:"setFindAllIntersections",value:function(e){this.findAllIntersections=e}},{key:"checkInteriorIntersections",value:function(){this._isValid=!0,this.segInt=new InteriorIntersectionFinder(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var e=new MCIndexNoder;return e.setSegmentIntersector(this.segInt),e.computeNodes(this.segStrings),this.segInt.hasIntersection()?(this._isValid=!1,null):void 0}},{key:"checkValid",value:function(){if(this.execute(),!this._isValid)throw new TopologyException(this.getErrorMessage(),this.segInt.getInteriorIntersection())}},{key:"getErrorMessage",value:function(){if(this._isValid)return"no intersections found";var e=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+WKTWriter$1.toLineString(e[0],e[1])+" and "+WKTWriter$1.toLineString(e[2],e[3])}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeIntersections",value:function(t){var n=new e(t);return n.setFindAllIntersections(!0),n.isValid(),n.getIntersections()}}]),e}(),EdgeNodingValidator=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.nv=null}();var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];t.nv=new FastNodingValidator(e.toSegmentStrings(i))}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"checkValid",value:function(){this.nv.checkValid()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toSegmentStrings",value:function(e){for(var t=new ArrayList,n=e.iterator();n.hasNext();){var r=n.next();t.add(new BasicSegmentString(r.getCoordinates(),r))}return t}},{key:"checkValid",value:function(t){var n=new e(t);n.checkValid()}}]),e}(),PolygonBuilder=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.geometryFactory=null,t.shellList=new ArrayList}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.geometryFactory=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"sortShellsAndHoles",value:function(e,t,n){for(var r=e.iterator();r.hasNext();){var a=r.next();a.isHole()?n.add(a):t.add(a)}}},{key:"computePolygons",value:function(e){for(var t=new ArrayList,n=e.iterator();n.hasNext();){var r=n.next(),a=r.toPolygon(this.geometryFactory);t.add(a)}return t}},{key:"placeFreeHoles",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var a=this.findEdgeRingContaining(r,e);if(null===a)throw new TopologyException("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(a)}}}},{key:"buildMinimalEdgeRings",value:function(e,t,n){for(var r=new ArrayList,a=e.iterator();a.hasNext();){var i=a.next();if(i.getMaxNodeDegree()>2){i.linkDirectedEdgesForMinimalEdgeRings();var o=i.buildMinimalRings(),s=this.findShell(o);null!==s?(this.placePolygonHoles(s,o),t.add(s)):n.addAll(o)}else r.add(i)}return r}},{key:"containsPoint",value:function(e){for(var t=this.shellList.iterator();t.hasNext();){var n=t.next();if(n.containsPoint(e))return!0}return!1}},{key:"buildMaximalEdgeRings",value:function(e){for(var t=new ArrayList,n=e.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var a=new MaximalEdgeRing(r,this.geometryFactory);t.add(a),a.setInResult()}}return t}},{key:"placePolygonHoles",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(e)}}},{key:"getPolygons",value:function(){var e=this.computePolygons(this.shellList);return e}},{key:"findEdgeRingContaining",value:function(e,t){for(var n=e.getLinearRing(),r=n.getEnvelopeInternal(),a=n.getCoordinateN(0),i=null,o=null,s=t.iterator();s.hasNext();){var u=s.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==i&&(o=i.getLinearRing().getEnvelopeInternal());var g=!1;c.contains(r)&&CGAlgorithms.isPointInRing(a,l.getCoordinates())&&(g=!0),g&&(null===i||o.contains(c))&&(i=u)}return i}},{key:"findShell",value:function(e){for(var t=0,n=null,r=e.iterator();r.hasNext();){var a=r.next();a.isHole()||(n=a,t++)}return Assert.isTrue(1>=t,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];e.add(a.getEdgeEnds(),a.getNodes())}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];PlanarGraph.linkResultDirectedEdges(i);var o=e.buildMaximalEdgeRings(a),s=new ArrayList,u=e.buildMinimalEdgeRings(o,e.shellList,s);e.sortShellsAndHoles(u,e.shellList,s),e.placeFreeHoles(e.shellList,s)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),LineBuilder=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.op=null,t.geometryFactory=null,t.ptLocator=null,t.lineEdgesList=new ArrayList,t.resultLineList=new ArrayList}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];t.op=a,t.geometryFactory=i,t.ptLocator=o}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"collectLines",value:function(e){for(var t=this.op.getGraph().getEdgeEnds().iterator();t.hasNext();){var n=t.next();this.collectLineEdge(n,e,this.lineEdgesList),this.collectBoundaryTouchEdge(n,e,this.lineEdgesList)}}},{key:"labelIsolatedLine",value:function(e,t){var n=this.ptLocator.locate(e.getCoordinate(),this.op.getArgGeometry(t));e.getLabel().setLocation(t,n)}},{key:"build",value:function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this.resultLineList}},{key:"collectLineEdge",value:function(e,t,n){var r=e.getLabel(),a=e.getEdge();e.isLineEdge()&&(e.isVisited()||!OverlayOp$1.isResultOfOp(r,t)||a.isCovered()||(n.add(a),e.setVisitedEdge(!0)))}},{key:"findCoveredLineEdges",value:function(){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().findCoveredLineEdges()}for(var n=this.op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next(),a=r.getEdge();if(r.isLineEdge()&&!a.isCoveredSet()){var i=this.op.isCoveredByA(r.getCoordinate());a.setCovered(i)}}}},{key:"labelIsolatedLines",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}}},{key:"buildLines",value:function(e){for(var t=this.lineEdgesList.iterator();t.hasNext();){var n=t.next(),r=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(r),n.setInResult(!0)}}},{key:"collectBoundaryTouchEdge",value:function(e,t,n){var r=e.getLabel();return e.isLineEdge()?null:e.isVisited()?null:e.isInteriorAreaEdge()?null:e.getEdge().isInResult()?null:(Assert.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),void(OverlayOp$1.isResultOfOp(r,t)&&t===OverlayOp$1.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),PointBuilder=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.op=null,t.geometryFactory=null,t.resultPointList=new ArrayList}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];n[2];t.op=a,t.geometryFactory=i}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"filterCoveredNodeToPoint",value:function(e){var t=e.getCoordinate();if(!this.op.isCoveredByLA(t)){var n=this.geometryFactory.createPoint(t);this.resultPointList.add(n)}}},{key:"extractNonCoveredResultNodes",value:function(e){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&e!==OverlayOp$1.INTERSECTION)){var r=n.getLabel();OverlayOp$1.isResultOfOp(r,e)&&this.filterCoveredNodeToPoint(n)}}}},{key:"build",value:function(e){return this.extractNonCoveredResultNodes(e),this.resultPointList}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),GeometryGraphOperation=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.li=new RobustLineIntersector,t.resultPrecisionModel=null,t.arg=null}();var i=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.setComputationPrecision(a.getPrecisionModel()),t.arg=new Array(1),t.arg[0]=new GeometryGraph(0,a)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];o.call(t,a,i,BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE)}.apply(void 0,n);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];a.getPrecisionModel().compareTo(i.getPrecisionModel())>=0?t.setComputationPrecision(a.getPrecisionModel()):t.setComputationPrecision(i.getPrecisionModel()),t.arg=new Array(2),t.arg[0]=new GeometryGraph(0,a,o),t.arg[1]=new GeometryGraph(1,i,o)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getArgGeometry",value:function(e){return this.arg[e].getGeometry()}},{key:"setComputationPrecision",value:function(e){this.resultPrecisionModel=e,this.li.setPrecisionModel(this.resultPrecisionModel)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),OrientedCoordinateArray=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.pts=null,t._orientation=null}();var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];t.pts=i,t._orientation=e.orientation(i)}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"compareTo",value:function(t){var n=t,r=e.compareOriented(this.pts,this._orientation,n.pts,n._orientation);return r}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable]}}],[{key:"orientation",value:function(e){return 1===CoordinateArrays.increasingDirection(e)}},{key:"compareOriented",value:function(e,t,n,r){for(var a=t?1:-1,i=r?1:-1,o=t?e.length:-1,s=r?n.length:-1,u=t?0:e.length-1,l=r?0:n.length-1;;){var c=e[u].compareTo(n[l]);if(0!==c)return c;u+=a,l+=i;var g=u===o,h=l===s;if(g&&!h)return-1;if(!g&&h)return 1;if(g&&h)return 0}}}]),e}(),EdgeList=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.edges=new ArrayList,t.ocaMap=new TreeMap}();var i=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return i.apply(this,r)}return _createClass(e,[{key:"print",value:function(e){e.print("MULTILINESTRING ( ");for(var t=0;t<this.edges.size();t++){var n=this.edges.get(t);t>0&&e.print(","),e.print("(");for(var r=n.getCoordinates(),a=0;a<r.length;a++)a>0&&e.print(","),e.print(r[a].x+" "+r[a].y);e.println(")")}e.print(")  ")}},{key:"addAll",value:function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next())}},{key:"findEdgeIndex",value:function(e){for(var t=0;t<this.edges.size();t++)if(this.edges.get(t).equals(e))return t;return-1}},{key:"iterator",value:function(){return this.edges.iterator()}},{key:"getEdges",value:function(){return this.edges}},{key:"get",value:function(e){return this.edges.get(e)}},{key:"findEqualEdge",value:function(e){var t=new OrientedCoordinateArray(e.getCoordinates()),n=this.ocaMap.get(t);return n}},{key:"add",value:function(e){this.edges.add(e);var t=new OrientedCoordinateArray(e.getCoordinates());this.ocaMap.put(t,e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),OverlayOp$1=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){o.ptLocator=new PointLocator,o.geomFact=null,o.resultGeom=null,o.graph=null,o.edgeList=new EdgeList,o.resultPolyList=new ArrayList,o.resultLineList=new ArrayList,o.resultPointList=new ArrayList}();var s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 2:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,i,o));s.graph=new PlanarGraph(new OverlayNodeFactory),s.geomFact=i.getFactory()}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"insertUniqueEdge",value:function(e){var t=this.edgeList.findEqualEdge(e);if(null!==t){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new Label(e.getLabel()),r.flip());var a=t.getDepth();a.isNull()&&a.add(n),a.add(r),n.merge(r)}else this.edgeList.add(e)}},{key:"getGraph",value:function(){return this.graph}},{key:"cancelDuplicateResultEdges",value:function(){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var t=e.next(),n=t.getSym();t.isInResult()&&n.isInResult()&&(t.setInResult(!1),n.setInResult(!1))}}},{key:"isCoveredByLA",value:function(e){return this.isCovered(e,this.resultLineList)?!0:this.isCovered(e,this.resultPolyList)?!0:!1}},{key:"computeGeometry",value:function(e,n,r,a){var i=new ArrayList;return i.addAll(e),i.addAll(n),i.addAll(r),i.isEmpty()?t.createEmptyResult(a,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(i)}},{key:"mergeSymLabels",value:function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().mergeSymLabels()}}},{key:"isCovered",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next(),a=this.ptLocator.locate(e,r);if(a!==Location.EXTERIOR)return!0}return!1}},{key:"replaceCollapsedEdges",value:function(){for(var e=new ArrayList,t=this.edgeList.iterator();t.hasNext();){var n=t.next();n.isCollapsed()&&(t.remove(),e.add(n.getCollapsedEdge()))}this.edgeList.addAll(e)}},{key:"updateNodeLabelling",value:function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next(),n=t.getEdges().getLabel();t.getLabel().merge(n)}}},{key:"getResultGeometry",value:function(e){return this.computeOverlay(e),this.resultGeom}},{key:"insertUniqueEdges",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.insertUniqueEdge(n)}}},{key:"computeOverlay",value:function(e){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var t=new ArrayList;this.arg[0].computeSplitEdges(t),this.arg[1].computeSplitEdges(t);this.insertUniqueEdges(t),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),EdgeNodingValidator.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(e),this.cancelDuplicateResultEdges();var n=new PolygonBuilder(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var r=new LineBuilder(this,this.geomFact,this.ptLocator);this.resultLineList=r.build(e);var a=new PointBuilder(this,this.geomFact,this.ptLocator);this.resultPointList=a.build(e),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,e)}},{key:"labelIncompleteNode",value:function(e,t){var n=this.ptLocator.locate(e.getCoordinate(),this.arg[t].getGeometry());e.getLabel().setLocation(t,n)}},{key:"copyPoints",value:function(e){for(var t=this.arg[e].getNodeIterator();t.hasNext();){var n=t.next(),r=this.graph.addNode(n.getCoordinate());r.setLabel(e,n.getLabel().getLocation(e))}}},{key:"findResultAreaEdges",value:function(e){for(var n=this.graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),a=r.getLabel();a.isArea()&&!r.isInteriorAreaEdge()&&t.isResultOfOp(a.getLocation(0,Position.RIGHT),a.getLocation(1,Position.RIGHT),e)&&r.setInResult(!0)}}},{key:"computeLabelsFromDepths",value:function(){for(var e=this.edgeList.iterator();e.hasNext();){var t=e.next(),n=t.getLabel(),r=t.getDepth();if(!r.isNull()){r.normalize();for(var a=0;2>a;a++)n.isNull(a)||!n.isArea()||r.isNull(a)||(0===r.getDelta(a)?n.toLine(a):(Assert.isTrue(!r.isNull(a,Position.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(a,Position.LEFT,r.getLocation(a,Position.LEFT)),Assert.isTrue(!r.isNull(a,Position.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(a,Position.RIGHT,r.getLocation(a,Position.RIGHT))))}}}},{key:"computeLabelling",value:function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()}},{key:"labelIncompleteNodes",value:function(){for(var e=0,t=this.graph.getNodes().iterator();t.hasNext();){var n=t.next(),r=n.getLabel();n.isIsolated()&&(e++,r.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(r)}}},{key:"isCoveredByA",value:function(e){return this.isCovered(e,this.resultPolyList)?!0:!1}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(e,n,r){var a=new t(e,n),i=a.getResultGeometry(r);return i}},{key:"isResultOfOp",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=a.getLocation(0),s=a.getLocation(1);return t.isResultOfOp(o,s,i)}.apply(void 0,n);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];switch(a===Location.BOUNDARY&&(a=Location.INTERIOR),i===Location.BOUNDARY&&(i=Location.INTERIOR),o){case t.INTERSECTION:return a===Location.INTERIOR&&i===Location.INTERIOR;case t.UNION:return a===Location.INTERIOR||i===Location.INTERIOR;case t.DIFFERENCE:return a===Location.INTERIOR&&i!==Location.INTERIOR;
case t.SYMDIFFERENCE:return a===Location.INTERIOR&&i!==Location.INTERIOR||a!==Location.INTERIOR&&i===Location.INTERIOR}return!1}.apply(void 0,n)}};return a.apply(this,n)}},{key:"createEmptyResult",value:function(e,n,r,a){var i=null;switch(t.resultDimension(e,n,r)){case-1:i=a.createGeometryCollection(new Array(0));break;case 0:i=a.createPoint();break;case 1:i=a.createLineString();break;case 2:i=a.createPolygon()}return i}},{key:"resultDimension",value:function n(e,r,a){var i=r.getDimension(),o=a.getDimension(),n=-1;switch(e){case t.INTERSECTION:n=Math.min(i,o);break;case t.UNION:n=Math.max(i,o);break;case t.DIFFERENCE:n=i;break;case t.SYMDIFFERENCE:n=Math.max(i,o)}return n}}]),t}(GeometryGraphOperation);OverlayOp$1.INTERSECTION=1,OverlayOp$1.UNION=2,OverlayOp$1.DIFFERENCE=3,OverlayOp$1.SYMDIFFERENCE=4;var SnapOverlayOp=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.geom=new Array(2),t.snapTolerance=null,t.cbr=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.geom[0]=a,t.geom[1]=i,t.computeSnapTolerance()}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"selfSnap",value:function(e){var t=new GeometrySnapper(e),n=t.snapTo(e,this.snapTolerance);return n}},{key:"removeCommonBits",value:function(e){this.cbr=new CommonBitsRemover,this.cbr.add(e[0]),this.cbr.add(e[1]);var t=new Array(2);return t[0]=this.cbr.removeCommonBits(e[0].copy()),t[1]=this.cbr.removeCommonBits(e[1].copy()),t}},{key:"prepareResult",value:function(e){return this.cbr.addCommonBits(e),e}},{key:"getResultGeometry",value:function(e){var t=this.snap(this.geom),n=OverlayOp$1.overlayOp(t[0],t[1],e);return this.prepareResult(n)}},{key:"checkValid",value:function(e){e.isValid()||System.out.println("Snapped geometry is invalid")}},{key:"computeSnapTolerance",value:function(){this.snapTolerance=GeometrySnapper.computeOverlaySnapTolerance(this.geom[0],this.geom[1])}},{key:"snap",value:function(e){var t=this.removeCommonBits(e),n=GeometrySnapper.snap(t[0],t[1],this.snapTolerance);return n}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(t,n,r){var a=new e(t,n);return a.getResultGeometry(r)}},{key:"union",value:function(t,n){return e.overlayOp(t,n,OverlayOp$1.UNION)}},{key:"intersection",value:function(t,n){return e.overlayOp(t,n,OverlayOp$1.INTERSECTION)}},{key:"symDifference",value:function(t,n){return e.overlayOp(t,n,OverlayOp$1.SYMDIFFERENCE)}},{key:"difference",value:function(t,n){return e.overlayOp(t,n,OverlayOp$1.DIFFERENCE)}}]),e}(),SnapIfNeededOverlayOp$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.geom=new Array(2)}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.geom[0]=a,t.geom[1]=i}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getResultGeometry",value:function(e){var t=null,n=!1,r=null;try{t=OverlayOp$1.overlayOp(this.geom[0],this.geom[1],e);var a=!0;a&&(n=!0)}catch(i){if(!(i instanceof RuntimeException))throw i;r=i}finally{}if(!n)try{t=SnapOverlayOp.overlayOp(this.geom[0],this.geom[1],e)}catch(i){throw i instanceof RuntimeException?r:i}finally{}return t}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(t,n,r){var a=new e(t,n);return a.getResultGeometry(r)}},{key:"union",value:function(t,n){return e.overlayOp(t,n,OverlayOp$1.UNION)}},{key:"intersection",value:function(t,n){return e.overlayOp(t,n,OverlayOp$1.INTERSECTION)}},{key:"symDifference",value:function(t,n){return e.overlayOp(t,n,OverlayOp$1.SYMDIFFERENCE)}},{key:"difference",value:function(t,n){return e.overlayOp(t,n,OverlayOp$1.DIFFERENCE)}}]),e}(),GeometryExtracter=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.clz=null,t.comps=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.clz=a,t.comps=i}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"filter",value:function(t){(null===this.clz||e.isOfClass(t,this.clz))&&this.comps.add(t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryFilter]}}],[{key:"isOfClass",value:function(e,t){return t.isAssignableFrom(e.getClass())}},{key:"extract",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return e.extract(a,i,new ArrayList)}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];return e.isOfClass(a,i)?o.add(a):a instanceof GeometryCollection&&a.apply(new e(i,o)),o}.apply(void 0,n)}};return a.apply(this,n)}}]),e}(),PolygonExtracter=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.comps=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.comps=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"filter",value:function(e){e instanceof Polygon&&this.comps.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryFilter]}}],[{key:"getPolygons",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.getPolygons(a,new ArrayList)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return a instanceof Polygon?i.add(a):a instanceof GeometryCollection&&a.apply(new e(i)),i}.apply(void 0,n)}};return a.apply(this,n)}}]),e}(),CascadedPolygonUnion=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.inputPolys=null,t.geomFactory=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.inputPolys=a,null===t.inputPolys&&(t.inputPolys=new ArrayList)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"reduceToGeometries",value:function(e){for(var t=new ArrayList,n=e.iterator();n.hasNext();){var r=n.next(),a=null;r.interfaces_&&r.interfaces_.indexOf(List)>-1?a=this.unionTree(r):r instanceof Geometry&&(a=r),t.add(a)}return t}},{key:"extractByEnvelope",value:function(e,t,n){for(var r=new ArrayList,a=0;a<t.getNumGeometries();a++){var i=t.getGeometryN(a);i.getEnvelopeInternal().intersects(e)?r.add(i):n.add(i)}return this.geomFactory.buildGeometry(r)}},{key:"unionOptimized",value:function(e,t){var n=e.getEnvelopeInternal(),r=t.getEnvelopeInternal();if(!n.intersects(r)){var a=GeometryCombiner.combine(e,t);return a}if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(e,t,i)}},{key:"union",value:function(){if(null===this.inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new STRtree(e.STRTREE_NODE_CAPACITY),n=this.inputPolys.iterator();n.hasNext();){var r=n.next();t.insert(r.getEnvelopeInternal(),r)}this.inputPolys=null;var a=t.itemsTree(),i=this.unionTree(a);return i}},{key:"binaryUnion",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];return t.binaryUnion(a,0,a.size())}.apply(void 0,r);case 3:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=r[2];if(1>=s-o){var u=e.getGeometry(i,o);return t.unionSafe(u,null)}if(s-o===2)return t.unionSafe(e.getGeometry(i,o),e.getGeometry(i,o+1));var l=Math.trunc((s+o)/2),u=t.binaryUnion(i,o,l),c=t.binaryUnion(i,l,s);return t.unionSafe(u,c)}.apply(void 0,r)}};return i.apply(this,r)}},{key:"repeatedUnion",value:function(e){for(var t=null,n=e.iterator();n.hasNext();){var r=n.next();t=null===t?r.copy():t.union(r)}return t}},{key:"unionSafe",value:function(e,t){return null===e&&null===t?null:null===e?t.copy():null===t?e.copy():this.unionOptimized(e,t)}},{key:"unionActual",value:function(t,n){return e.restrictToPolygons(t.union(n))}},{key:"unionTree",value:function(e){var t=this.reduceToGeometries(e),n=this.binaryUnion(t);return n}},{key:"unionUsingEnvelopeIntersection",value:function(e,t,n){var r=new ArrayList,a=this.extractByEnvelope(n,e,r),i=this.extractByEnvelope(n,t,r),o=this.unionActual(a,i);r.add(o);var s=GeometryCombiner.combine(r);return s}},{key:"bufferUnion",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=r.get(0).getFactory(),i=a.buildGeometry(r),o=i.buffer(0);return o}.apply(void 0,t);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=r.getFactory(),o=i.createGeometryCollection([r,a]),s=o.buffer(0);return s}.apply(void 0,t)}};return r.apply(this,t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"restrictToPolygons",value:function(e){if(e.interfaces_&&e.interfaces_.indexOf(Polygonal)>-1)return e;var t=PolygonExtracter.getPolygons(e);return 1===t.size()?t.get(0):e.getFactory().createMultiPolygon(GeometryFactory.toPolygonArray(t))}},{key:"getGeometry",value:function(e,t){return t>=e.size()?null:e.get(t)}},{key:"union",value:function(t){var n=new e(t);return n.union()}}]),e}();CascadedPolygonUnion.STRTREE_NODE_CAPACITY=4;var UnaryUnionOp$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.polygons=new ArrayList,t.lines=new ArrayList,t.points=new ArrayList,t.geomFact=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(Collection)>-1)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.extract(a)}.apply(void 0,n);if(n[0]instanceof Geometry)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.extract(a)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.geomFact=i,t.extract(a)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"unionNoOpt",value:function(e){var t=this.geomFact.createPoint();return SnapIfNeededOverlayOp$1.overlayOp(e,t,OverlayOp$1.UNION)}},{key:"unionWithNull",value:function(e,t){return null===e&&null===t?null:null===t?e:null===e?t:e.union(t)}},{key:"extract",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(Collection)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=a.iterator();i.hasNext();){var o=i.next();e.extract(o)}}.apply(void 0,n);if(n[0]instanceof Geometry)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];null===e.geomFact&&(e.geomFact=a.getFactory()),GeometryExtracter.extract(a,Polygon,e.polygons),GeometryExtracter.extract(a,LineString,e.lines),GeometryExtracter.extract(a,Point,e.points)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"union",value:function t(){if(null===this.geomFact)return null;var e=null;if(this.points.size()>0){var n=this.geomFact.buildGeometry(this.points);e=this.unionNoOpt(n)}var r=null;if(this.lines.size()>0){var a=this.geomFact.buildGeometry(this.lines);r=this.unionNoOpt(a)}var i=null;this.polygons.size()>0&&(i=CascadedPolygonUnion.union(this.polygons));var o=this.unionWithNull(r,i),t=null;return t=null===e?o:null===o?e:PointGeometryUnion.union(e,o),null===t?this.geomFact.createGeometryCollection(null):t}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"union",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(Collection)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=new e(a);return i.union()}.apply(void 0,n);if(n[0]instanceof Geometry)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=new e(a);return i.union()}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=new e(a,i);return o.union()}.apply(void 0,n)}};return a.apply(this,n)}}]),e}(),InteriorPointLine$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.centroid=null,t.minDistance=Double.MAX_VALUE,t.interiorPoint=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.centroid=a.getCentroid().getCoordinate(),t.addInterior(a),null===t.interiorPoint&&t.addEndpoints(a)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"addEndpoints",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof Geometry)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];if(a instanceof LineString)e.addEndpoints(a.getCoordinates());else if(a instanceof GeometryCollection)for(var i=a,o=0;o<i.getNumGeometries();o++)e.addEndpoints(i.getGeometryN(o))}.apply(void 0,n);if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];e.add(a[0]),e.add(a[a.length-1])}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getInteriorPoint",value:function(){return this.interiorPoint}},{key:"addInterior",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof Geometry)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];if(a instanceof LineString)e.addInterior(a.getCoordinates());else if(a instanceof GeometryCollection)for(var i=a,o=0;o<i.getNumGeometries();o++)e.addInterior(i.getGeometryN(o))}.apply(void 0,n);if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=1;i<a.length-1;i++)e.add(a[i])}.apply(void 0,n)}};return a.apply(this,n)}},{key:"add",value:function(e){var t=e.distance(this.centroid);t<this.minDistance&&(this.interiorPoint=new Coordinate(e),this.minDistance=t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),IsSimpleOp$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.inputGeom=null,t.isClosedEndpointsInInterior=!0,t.nonSimpleLocation=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.inputGeom=a}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.inputGeom=a,t.isClosedEndpointsInInterior=!i.isInBoundary(2)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"isSimpleMultiPoint",value:function(e){if(e.isEmpty())return!0;for(var t=new TreeSet,n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n),a=r.getCoordinate();if(t.contains(a))return this.nonSimpleLocation=a,!1;t.add(a)}return!0}},{key:"isSimplePolygonal",value:function(e){for(var t=LinearComponentExtracter.getLines(e),n=t.iterator();n.hasNext();){var r=n.next();if(!this.isSimpleLinearGeometry(r))return!1}return!0}},{key:"hasClosedEndpointIntersection",value:function(e){for(var t=new TreeMap,n=e.getEdgeIterator();n.hasNext();){var r=n.next(),a=(r.getMaximumSegmentIndex(),r.isClosed()),i=r.getCoordinate(0);this.addEndpoint(t,i,a);var o=r.getCoordinate(r.getNumPoints()-1);this.addEndpoint(t,o,a)}for(var n=t.values().iterator();n.hasNext();){var s=n.next();if(s.isClosed&&2!==s.degree)return this.nonSimpleLocation=s.getCoordinate(),!0}return!1}},{key:"getNonSimpleLocation",value:function(){return this.nonSimpleLocation}},{key:"isSimpleLinearGeometry",value:function(e){if(e.isEmpty())return!0;var t=new GeometryGraph(0,e),n=new RobustLineIntersector,r=t.computeSelfNodes(n,!0);return r.hasIntersection()?r.hasProperIntersection()?(this.nonSimpleLocation=r.getProperIntersectionPoint(),!1):this.hasNonEndpointIntersection(t)?!1:this.isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(t)?!1:!0:!0}},{key:"hasNonEndpointIntersection",value:function(e){for(var t=e.getEdgeIterator();t.hasNext();)for(var n=t.next(),r=n.getMaximumSegmentIndex(),a=n.getEdgeIntersectionList().iterator();a.hasNext();){var i=a.next();if(!i.isEndPoint(r))return this.nonSimpleLocation=i.getCoordinate(),!0}return!1}},{key:"addEndpoint",value:function(e,t,n){var r=e.get(t);null===r&&(r=new EndpointInfo(t),e.put(t,r)),r.addEndpoint(n)}},{key:"computeSimple",value:function(e){return this.nonSimpleLocation=null,e.isEmpty()?!0:e instanceof LineString?this.isSimpleLinearGeometry(e):e instanceof MultiLineString?this.isSimpleLinearGeometry(e):e instanceof MultiPoint?this.isSimpleMultiPoint(e):e.interfaces_&&e.interfaces_.indexOf(Polygonal)>-1?this.isSimplePolygonal(e):e instanceof GeometryCollection?this.isSimpleGeometryCollection(e):!0}},{key:"isSimple",value:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)}},{key:"isSimpleGeometryCollection",value:function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);if(!this.computeSimple(n))return!1}return!0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"EndpointInfo",get:function(){return EndpointInfo}}]),e}(),EndpointInfo=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.pt=null,t.isClosed=null,t.degree=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.pt=a,t.isClosed=!1,t.degree=0}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"addEndpoint",value:function(e){this.degree++,this.isClosed|=e}},{key:"getCoordinate",value:function(){return this.pt}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),BufferParameters=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,t.endCapStyle=e.CAP_ROUND,t.joinStyle=e.JOIN_ROUND,t.mitreLimit=e.DEFAULT_MITRE_LIMIT,t._isSingleSided=!1,t.simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.setQuadrantSegments(a)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.setQuadrantSegments(a),t.setEndCapStyle(i)}.apply(void 0,n);case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=n[3];t.setQuadrantSegments(a),t.setEndCapStyle(i),t.setJoinStyle(o),t.setMitreLimit(s)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getEndCapStyle",value:function(){return this.endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=e.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=e.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),0>=t&&(this.quadrantSegments=1),this.joinStyle!==e.JOIN_ROUND&&(this.quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this.joinStyle}},{key:"setJoinStyle",value:function(e){this.joinStyle=e}},{key:"setSimplifyFactor",value:function(e){this.simplifyFactor=0>e?0:e}},{key:"getSimplifyFactor",value:function(){return this.simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this.quadrantSegments}},{key:"setEndCapStyle",value:function(e){this.endCapStyle=e}},{key:"getMitreLimit",value:function(){return this.mitreLimit}},{key:"setMitreLimit",value:function(e){this.mitreLimit=e}},{key:"setSingleSided",value:function(e){this._isSingleSided=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"bufferDistanceError",value:function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)}}]),e}();BufferParameters.CAP_ROUND=1,BufferParameters.CAP_FLAT=2,BufferParameters.CAP_SQUARE=3,BufferParameters.JOIN_ROUND=1,BufferParameters.JOIN_MITRE=2,BufferParameters.JOIN_BEVEL=3,BufferParameters.DEFAULT_QUADRANT_SEGMENTS=8,BufferParameters.DEFAULT_MITRE_LIMIT=5,BufferParameters.DEFAULT_SIMPLIFY_FACTOR=.01,EmptyStackException.prototype=new Error,EmptyStackException.prototype.name="EmptyStackException",Stack.prototype=new List,Stack.prototype.add=function(e){return this.array_.push(e),!0},Stack.prototype.get=function(e){if(0>e||e>=this.size())throw new IndexOutOfBoundsException;return this.array_[e]},Stack.prototype.push=function(e){return this.array_.push(e),e},Stack.prototype.pop=function(e){if(0===this.array_.length)throw new EmptyStackException;return this.array_.pop()},Stack.prototype.peek=function(){if(0===this.array_.length)throw new EmptyStackException;return this.array_[this.array_.length-1]},Stack.prototype.empty=function(){return 0===this.array_.length?!0:!1},Stack.prototype.isEmpty=function(){return this.empty()},Stack.prototype.search=function(e){return this.array_.indexOf(e)},Stack.prototype.size=function(){return this.array_.length},Stack.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;n>t;t++)e.push(this.array_[t]);return e},module.exports=Stack;var RightmostEdgeFinder=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.minIndex=-1,t.minCoord=null,t.minDe=null,t.orientedDe=null}();var i=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return i.apply(this,r)}return _createClass(e,[{key:"getCoordinate",value:function(){return this.minCoord}},{key:"getRightmostSide",value:function(e,t){var n=this.getRightmostSideOfSegment(e,t);return 0>n&&(n=this.getRightmostSideOfSegment(e,t-1)),0>n&&(this.minCoord=null,this.checkForRightmostCoordinate(e)),n}},{key:"findRightmostEdgeAtVertex",value:function(){var e=this.minDe.getEdge().getCoordinates();Assert.isTrue(this.minIndex>0&&this.minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this.minIndex-1],n=e[this.minIndex+1],r=CGAlgorithms.computeOrientation(this.minCoord,n,t),a=!1;t.y<this.minCoord.y&&n.y<this.minCoord.y&&r===CGAlgorithms.COUNTERCLOCKWISE?a=!0:t.y>this.minCoord.y&&n.y>this.minCoord.y&&r===CGAlgorithms.CLOCKWISE&&(a=!0),a&&(this.minIndex=this.minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(e,t){var n=e.getEdge(),r=n.getCoordinates();if(0>t||t+1>=r.length)return-1;if(r[t].y===r[t+1].y)return-1;var a=Position.LEFT;return r[t].y<r[t+1].y&&(a=Position.RIGHT),a}},{key:"getEdge",value:function(){return this.orientedDe}},{key:"checkForRightmostCoordinate",value:function(e){for(var t=e.getEdge().getCoordinates(),n=0;n<t.length-1;n++)(null===this.minCoord||t[n].x>this.minCoord.x)&&(this.minDe=e,this.minIndex=n,this.minCoord=t[n])}},{key:"findRightmostEdgeAtNode",value:function(){var e=this.minDe.getNode(),t=e.getEdges();this.minDe=t.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.isForward()&&this.checkForRightmostCoordinate(n)}Assert.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var r=this.getRightmostSide(this.minDe,this.minIndex);r===Position.LEFT&&(this.orientedDe=this.minDe.getSym())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),LinkedList=function(){function e(){_classCallCheck(this,e),this.array_=[]}return _createClass(e,[{key:"addLast",value:function(e){this.array_.push(e)}},{key:"removeFirst",value:function(){return this.array_.shift()}},{key:"isEmpty",value:function(){return 0===this.array_.length}}]),e}(),BufferSubgraph=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.finder=null,t.dirEdgeList=new ArrayList,t.nodes=new ArrayList,t.rightMostCoord=null,t.env=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.finder=new RightmostEdgeFinder}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"clearVisitedEdges",value:function(){for(var e=this.dirEdgeList.iterator();e.hasNext();){var t=e.next();t.setVisited(!1)}}},{key:"getRightmostCoordinate",value:function(){return this.rightMostCoord}},{key:"computeNodeDepth",value:function(e){for(var t=null,n=e.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){t=r;break}}if(null===t)throw new TopologyException("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(t);for(var n=e.getEdges().iterator();n.hasNext();){var r=n.next();r.setVisited(!0),this.copySymDepths(r)}}},{key:"computeDepth",value:function(e){this.clearVisitedEdges();var t=this.finder.getEdge();t.getNode(),t.getLabel();t.setEdgeDepths(Position.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)}},{key:"create",value:function(e){this.addReachable(e),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var e=this.dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(Position.RIGHT)>=1&&t.getDepth(Position.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}}},{key:"computeDepths",value:function(e){var t=new HashSet,n=new LinkedList,r=e.getNode();for(n.addLast(r),t.add(r),e.setVisited(!0);!n.isEmpty();){var a=n.removeFirst();t.add(a),this.computeNodeDepth(a);for(var i=a.getEdges().iterator();i.hasNext();){var o=i.next(),s=o.getSym();if(!s.isVisited()){var u=s.getNode();t.contains(u)||(n.addLast(u),t.add(u))}}}}},{key:"compareTo",value:function(e){var t=e;return this.rightMostCoord.x<t.rightMostCoord.x?-1:this.rightMostCoord.x>t.rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(null===this.env){for(var e=new Envelope,t=this.dirEdgeList.iterator();t.hasNext();)for(var n=t.next(),r=n.getEdge().getCoordinates(),a=0;a<r.length-1;a++)e.expandToInclude(r[a]);this.env=e}return this.env}},{key:"addReachable",value:function(e){var t=new Stack;for(t.add(e);!t.empty();){var n=t.pop();this.add(n,t)}}},{key:"copySymDepths",value:function(e){var t=e.getSym();t.setDepth(Position.LEFT,e.getDepth(Position.RIGHT)),t.setDepth(Position.RIGHT,e.getDepth(Position.LEFT))}},{key:"add",value:function(e,t){e.setVisited(!0),this.nodes.add(e);for(var n=e.getEdges().iterator();n.hasNext();){var r=n.next();this.dirEdgeList.add(r);var a=r.getSym(),i=a.getNode();i.isVisited()||t.push(i)}}},{key:"getNodes",value:function(){return this.nodes}},{key:"getDirectedEdges",value:function(){return this.dirEdgeList}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable]}}]),e}(),BufferInputLineSimplifier=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.inputLine=null,t.distanceTol=null,t.isDeleted=null,t.angleOrientation=CGAlgorithms.COUNTERCLOCKWISE}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.inputLine=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"isDeletable",value:function(e,t,n,r){var a=this.inputLine[e],i=this.inputLine[t],o=this.inputLine[n];return this.isConcave(a,i,o)&&this.isShallow(a,i,o,r)?this.isShallowSampled(a,i,e,n,r):!1}},{key:"deleteShallowConcavities",value:function(){for(var t=1,n=(this.inputLine.length-1,this.findNextNonDeletedIndex(t)),r=this.findNextNonDeletedIndex(n),a=!1;r<this.inputLine.length;){var i=!1;this.isDeletable(t,n,r,this.distanceTol)&&(this.isDeleted[n]=e.DELETE,i=!0,a=!0),t=i?r:n,n=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(n)}return a}},{key:"isShallowConcavity",value:function(e,t,n,r){var a=CGAlgorithms.computeOrientation(e,t,n),i=a===this.angleOrientation;if(!i)return!1;var o=CGAlgorithms.distancePointLine(t,e,n);return r>o}},{key:"isShallowSampled",value:function(t,n,r,a,i){var o=Math.trunc((a-r)/e.NUM_PTS_TO_CHECK);0>=o&&(o=1);for(var s=r;a>s;s+=o)if(!this.isShallow(t,n,this.inputLine[s],i))return!1;
return!0}},{key:"isConcave",value:function t(e,n,r){var a=CGAlgorithms.computeOrientation(e,n,r),t=a===this.angleOrientation;return t}},{key:"simplify",value:function(e){this.distanceTol=Math.abs(e),0>e&&(this.angleOrientation=CGAlgorithms.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length);var t=!1;do t=this.deleteShallowConcavities();while(t);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var n=t+1;n<this.inputLine.length&&this.isDeleted[n]===e.DELETE;)n++;return n}},{key:"isShallow",value:function(e,t,n,r){var a=CGAlgorithms.distancePointLine(t,e,n);return r>a}},{key:"collapseLine",value:function(){for(var t=new CoordinateList,n=0;n<this.inputLine.length;n++)this.isDeleted[n]!==e.DELETE&&t.add(this.inputLine[n]);return t.toCoordinateArray()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(t,n){var r=new e(t);return r.simplify(n)}}]),e}();BufferInputLineSimplifier.INIT=0,BufferInputLineSimplifier.DELETE=1,BufferInputLineSimplifier.KEEP=1,BufferInputLineSimplifier.NUM_PTS_TO_CHECK=10;var OffsetSegmentString=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.ptList=null,t.precisionModel=null,t.minimimVertexDistance=0}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.ptList=new ArrayList}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getCoordinates",value:function(){var t=this.ptList.toArray(e.COORDINATE_ARRAY_TYPE);return t}},{key:"setPrecisionModel",value:function(e){this.precisionModel=e}},{key:"addPt",value:function(e){var t=new Coordinate(e);return this.precisionModel.makePrecise(t),this.isRedundant(t)?null:void this.ptList.add(t)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(e,t){if(t)for(var n=0;n<e.length;n++)this.addPt(e[n]);else for(var n=e.length-1;n>=0;n--)this.addPt(e[n])}},{key:"isRedundant",value:function(e){if(this.ptList.size()<1)return!1;var t=this.ptList.get(this.ptList.size()-1),n=e.distance(t);return n<this.minimimVertexDistance?!0:!1}},{key:"toString",value:function(){var e=new GeometryFactory,t=e.createLineString(this.getCoordinates());return t.toString()}},{key:"closeRing",value:function(){if(this.ptList.size()<1)return null;var e=new Coordinate(this.ptList.get(0)),t=this.ptList.get(this.ptList.size()-1),n=null;return this.ptList.size()>=2&&(n=this.ptList.get(this.ptList.size()-2)),e.equals(t)?null:void this.ptList.add(e)}},{key:"setMinimumVertexDistance",value:function(e){this.minimimVertexDistance=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();OffsetSegmentString.COORDINATE_ARRAY_TYPE=new Array(0);var Angle$1=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toDegrees",value:function(e){return 180*e/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=e.PI_TIMES_2;for(;t<=-Math.PI;)t+=e.PI_TIMES_2;return t}},{key:"angle",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];return Math.atan2(r.y,r.x)}.apply(void 0,t);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=a.x-r.x,o=a.y-r.y;return Math.atan2(o,i)}.apply(void 0,t)}};return r.apply(this,t)}},{key:"isAcute",value:function(e,t,n){var r=e.x-t.x,a=e.y-t.y,i=n.x-t.x,o=n.y-t.y,s=r*i+a*o;return s>0}},{key:"isObtuse",value:function(e,t,n){var r=e.x-t.x,a=e.y-t.y,i=n.x-t.x,o=n.y-t.y,s=r*i+a*o;return 0>s}},{key:"interiorAngle",value:function(t,n,r){var a=e.angle(n,t),i=e.angle(n,r);return Math.abs(i-a)}},{key:"normalizePositive",value:function(t){if(0>t){for(;0>t;)t+=e.PI_TIMES_2;t>=e.PI_TIMES_2&&(t=0)}else{for(;t>=e.PI_TIMES_2;)t-=e.PI_TIMES_2;0>t&&(t=0)}return t}},{key:"angleBetween",value:function(t,n,r){var a=e.angle(n,t),i=e.angle(n,r);return e.diff(a,i)}},{key:"diff",value:function(e,t){var n=null;return n=t>e?t-e:e-t,n>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(e){return e*Math.PI/180}},{key:"getTurn",value:function(t,n){var r=Math.sin(n-t);return r>0?e.COUNTERCLOCKWISE:0>r?e.CLOCKWISE:e.NONE}},{key:"angleBetweenOriented",value:function(t,n,r){var a=e.angle(n,t),i=e.angle(n,r),o=i-a;return o<=-Math.PI?o+e.PI_TIMES_2:o>Math.PI?o-e.PI_TIMES_2:o}}]),e}();Angle$1.PI_TIMES_2=2*Math.PI,Angle$1.PI_OVER_2=Math.PI/2,Angle$1.PI_OVER_4=Math.PI/4,Angle$1.COUNTERCLOCKWISE=CGAlgorithms.COUNTERCLOCKWISE,Angle$1.CLOCKWISE=CGAlgorithms.CLOCKWISE,Angle$1.NONE=CGAlgorithms.COLLINEAR;var OffsetSegmentGenerator=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.maxCurveSegmentError=0,t.filletAngleQuantum=null,t.closingSegLengthFactor=1,t.segList=null,t.distance=0,t.precisionModel=null,t.bufParams=null,t.li=null,t.s0=null,t.s1=null,t.s2=null,t.seg0=new LineSegment,t.seg1=new LineSegment,t.offset0=new LineSegment,t.offset1=new LineSegment,t.side=0,t._hasNarrowConcaveAngle=!1}();var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 3:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=r[2];t.precisionModel=i,t.bufParams=o,t.li=new RobustLineIntersector,t.filletAngleQuantum=Math.PI/2/o.getQuadrantSegments(),o.getQuadrantSegments()>=8&&o.getJoinStyle()===BufferParameters.JOIN_ROUND&&(t.closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),t.init(s)}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"addNextSegment",value:function(e,t){if(this.s0=this.s1,this.s1=this.s2,this.s2=e,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=CGAlgorithms.computeOrientation(this.s0,this.s1,this.s2),r=n===CGAlgorithms.CLOCKWISE&&this.side===Position.LEFT||n===CGAlgorithms.COUNTERCLOCKWISE&&this.side===Position.RIGHT;0===n?this.addCollinear(t):r?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)}},{key:"addLineEndCap",value:function(e,t){var n=new LineSegment(e,t),r=new LineSegment;this.computeOffsetSegment(n,Position.LEFT,this.distance,r);var a=new LineSegment;this.computeOffsetSegment(n,Position.RIGHT,this.distance,a);var i=t.x-e.x,o=t.y-e.y,s=Math.atan2(o,i);switch(this.bufParams.getEndCapStyle()){case BufferParameters.CAP_ROUND:this.segList.addPt(r.p1),this.addFilletArc(t,s+Math.PI/2,s-Math.PI/2,CGAlgorithms.CLOCKWISE,this.distance),this.segList.addPt(a.p1);break;case BufferParameters.CAP_FLAT:this.segList.addPt(r.p1),this.segList.addPt(a.p1);break;case BufferParameters.CAP_SQUARE:var u=new Coordinate;u.x=Math.abs(this.distance)*Math.cos(s),u.y=Math.abs(this.distance)*Math.sin(s);var l=new Coordinate(r.p1.x+u.x,r.p1.y+u.y),c=new Coordinate(a.p1.x+u.x,a.p1.y+u.y);this.segList.addPt(l),this.segList.addPt(c)}}},{key:"getCoordinates",value:function(){var e=this.segList.getCoordinates();return e}},{key:"addMitreJoin",value:function(e,t,n,r){var a=!0,i=null;try{i=HCoordinate.intersection(t.p0,t.p1,n.p0,n.p1);var o=0>=r?1:i.distance(e)/Math.abs(r);o>this.bufParams.getMitreLimit()&&(a=!1)}catch(s){if(!(s instanceof NotRepresentableException))throw s;i=new Coordinate(0,0),a=!1}finally{}a?this.segList.addPt(i):this.addLimitedMitreJoin(t,n,r,this.bufParams.getMitreLimit())}},{key:"addFilletCorner",value:function(e,t,n,r,a){var i=t.x-e.x,o=t.y-e.y,s=Math.atan2(o,i),u=n.x-e.x,l=n.y-e.y,c=Math.atan2(l,u);r===CGAlgorithms.CLOCKWISE?c>=s&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this.segList.addPt(t),this.addFilletArc(e,s,c,r,a),this.segList.addPt(n)}},{key:"addOutsideTurn",value:function(t,n){return this.offset0.p1.distance(this.offset1.p0)<this.distance*e.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===BufferParameters.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===BufferParameters.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(n&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))}},{key:"createSquare",value:function(e){this.segList.addPt(new Coordinate(e.x+this.distance,e.y+this.distance)),this.segList.addPt(new Coordinate(e.x+this.distance,e.y-this.distance)),this.segList.addPt(new Coordinate(e.x-this.distance,e.y-this.distance)),this.segList.addPt(new Coordinate(e.x-this.distance,e.y+this.distance)),this.segList.closeRing()}},{key:"addSegments",value:function(e,t){this.segList.addPts(e,t)}},{key:"addFirstSegment",value:function(){this.segList.addPt(this.offset1.p0)}},{key:"addLastSegment",value:function(){this.segList.addPt(this.offset1.p1)}},{key:"initSideSegments",value:function(e,t,n){this.s1=e,this.s2=t,this.side=n,this.seg1.setCoordinates(e,t),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)}},{key:"addLimitedMitreJoin",value:function(e,t,n,r){var a=this.seg0.p1,i=Angle.angle(a,this.seg0.p0),o=(Angle.angle(a,this.seg1.p1),Angle.angleBetweenOriented(this.seg0.p0,a,this.seg1.p1)),s=o/2,u=Angle.normalize(i+s),l=Angle.normalize(u+Math.PI),c=r*n,g=c*Math.abs(Math.sin(s)),h=n-g,f=a.x+c*Math.cos(l),y=a.y+c*Math.sin(l),v=new Coordinate(f,y),m=new LineSegment(a,v),p=m.pointAlongOffset(1,h),d=m.pointAlongOffset(1,-h);this.side===Position.LEFT?(this.segList.addPt(p),this.segList.addPt(d)):(this.segList.addPt(d),this.segList.addPt(p))}},{key:"computeOffsetSegment",value:function(e,t,n,r){var a=t===Position.LEFT?1:-1,i=e.p1.x-e.p0.x,o=e.p1.y-e.p0.y,s=Math.sqrt(i*i+o*o),u=a*n*i/s,l=a*n*o/s;r.p0.x=e.p0.x-l,r.p0.y=e.p0.y+u,r.p1.x=e.p1.x-l,r.p1.y=e.p1.y+u}},{key:"addFilletArc",value:function(e,t,n,r,a){var i=r===CGAlgorithms.CLOCKWISE?-1:1,o=Math.abs(t-n),s=Math.trunc(o/this.filletAngleQuantum+.5);if(1>s)return null;var u=null,l=null;u=0,l=o/s;for(var c=u,g=new Coordinate;o>c;){var h=t+i*c;g.x=e.x+a*Math.cos(h),g.y=e.y+a*Math.sin(h),this.segList.addPt(g),c+=l}}},{key:"addInsideTurn",value:function(t,n){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*e.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var r=new Coordinate((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(r);var a=new Coordinate((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(a)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}}},{key:"createCircle",value:function(e){var t=new Coordinate(e.x+this.distance,e.y);this.segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this.distance),this.segList.closeRing()}},{key:"addBevelJoin",value:function(e,t){this.segList.addPt(e.p1),this.segList.addPt(t.p0)}},{key:"init",value:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new OffsetSegmentString,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*e.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(e){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var t=this.li.getIntersectionNum();t>=2&&(this.bufParams.getJoinStyle()===BufferParameters.JOIN_BEVEL||this.bufParams.getJoinStyle()===BufferParameters.JOIN_MITRE?(e&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,CGAlgorithms.CLOCKWISE,this.distance))}},{key:"closeRing",value:function(){this.segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR=80;var OffsetCurveBuilder=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.distance=0,t.precisionModel=null,t.bufParams=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.precisionModel=a,t.bufParams=i}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getOffsetCurve",value:function(e,t){if(this.distance=t,0===t)return null;var n=0>t,r=Math.abs(t),a=this.getSegGen(r);e.length<=1?this.computePointCurve(e[0],a):this.computeOffsetCurve(e,n,a);var i=a.getCoordinates();return n&&CoordinateArrays.reverse(i),i}},{key:"computeSingleSidedBufferCurve",value:function(e,t,n){var r=this.simplifyTolerance(this.distance);if(t){n.addSegments(e,!0);var a=BufferInputLineSimplifier.simplify(e,-r),i=a.length-1;n.initSideSegments(a[i],a[i-1],Position.LEFT),n.addFirstSegment();for(var o=i-2;o>=0;o--)n.addNextSegment(a[o],!0)}else{n.addSegments(e,!1);var s=BufferInputLineSimplifier.simplify(e,r),u=s.length-1;n.initSideSegments(s[0],s[1],Position.LEFT),n.addFirstSegment();for(var o=2;u>=o;o++)n.addNextSegment(s[o],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(e,t,n){var r=this.simplifyTolerance(this.distance);t===Position.RIGHT&&(r=-r);var a=BufferInputLineSimplifier.simplify(e,r),i=a.length-1;n.initSideSegments(a[i-1],a[0],t);for(var o=1;i>=o;o++){var s=1!==o;n.addNextSegment(a[o],s)}n.closeRing()}},{key:"computeLineBufferCurve",value:function(e,t){var n=this.simplifyTolerance(this.distance),r=BufferInputLineSimplifier.simplify(e,n),a=r.length-1;t.initSideSegments(r[0],r[1],Position.LEFT);for(var i=2;a>=i;i++)t.addNextSegment(r[i],!0);t.addLastSegment(),t.addLineEndCap(r[a-1],r[a]);var o=BufferInputLineSimplifier.simplify(e,-n),s=o.length-1;t.initSideSegments(o[s],o[s-1],Position.LEFT);for(var i=s-2;i>=0;i--)t.addNextSegment(o[i],!0);t.addLastSegment(),t.addLineEndCap(o[1],o[0]),t.closeRing()}},{key:"computePointCurve",value:function(e,t){switch(this.bufParams.getEndCapStyle()){case BufferParameters.CAP_ROUND:t.createCircle(e);break;case BufferParameters.CAP_SQUARE:t.createSquare(e)}}},{key:"getLineCurve",value:function(e,t){if(this.distance=t,0>t&&!this.bufParams.isSingleSided())return null;if(0===t)return null;var n=Math.abs(t),r=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],r);else if(this.bufParams.isSingleSided()){var a=0>t;this.computeSingleSidedBufferCurve(e,a,r)}else this.computeLineBufferCurve(e,r);var i=r.getCoordinates();return i}},{key:"getBufferParameters",value:function(){return this.bufParams}},{key:"simplifyTolerance",value:function(e){return e*this.bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,n,r){if(this.distance=r,t.length<=2)return this.getLineCurve(t,r);if(0===r)return e.copyCoordinates(t);var a=this.getSegGen(r);return this.computeRingBufferCurve(t,n,a),a.getCoordinates()}},{key:"computeOffsetCurve",value:function(e,t,n){var r=this.simplifyTolerance(this.distance);if(t){var a=BufferInputLineSimplifier.simplify(e,-r),i=a.length-1;n.initSideSegments(a[i],a[i-1],Position.LEFT),n.addFirstSegment();for(var o=i-2;o>=0;o--)n.addNextSegment(a[o],!0)}else{var s=BufferInputLineSimplifier.simplify(e,r),u=s.length-1;n.initSideSegments(s[0],s[1],Position.LEFT),n.addFirstSegment();for(var o=2;u>=o;o++)n.addNextSegment(s[o],!0)}n.addLastSegment()}},{key:"getSegGen",value:function(e){return new OffsetSegmentGenerator(this.precisionModel,this.bufParams,e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"copyCoordinates",value:function(e){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=new Coordinate(e[n]);return t}}]),e}(),SubgraphDepthLocater=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.subgraphs=null,t.seg=new LineSegment,t.cga=new CGAlgorithms}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.subgraphs=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"findStabbedSegments",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=new ArrayList,o=e.subgraphs.iterator();o.hasNext();){var s=o.next(),u=s.getEnvelope();a.y<u.getMinY()||a.y>u.getMaxY()||e.findStabbedSegments(a,s.getDirectedEdges(),i)}return i}.apply(void 0,n);case 3:if(n[2].interfaces_&&n[2].interfaces_.indexOf(List)>-1&&n[0]instanceof Coordinate&&n[1]instanceof DirectedEdge)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=n[1],o=n[2],s=i.getEdge().getCoordinates(),u=0;u<s.length-1;u++){e.seg.p0=s[u],e.seg.p1=s[u+1],e.seg.p0.y>e.seg.p1.y&&e.seg.reverse();var l=Math.max(e.seg.p0.x,e.seg.p1.x);if(!(l<a.x||e.seg.isHorizontal()||a.y<e.seg.p0.y||a.y>e.seg.p1.y||CGAlgorithms.computeOrientation(e.seg.p0,e.seg.p1,a)===CGAlgorithms.RIGHT)){var c=i.getDepth(Position.LEFT);e.seg.p0.equals(s[u])||(c=i.getDepth(Position.RIGHT));var g=new DepthSegment(e.seg,c);o.add(g)}}}.apply(void 0,n);if(n[2].interfaces_&&n[2].interfaces_.indexOf(List)>-1&&n[0]instanceof Coordinate&&n[1].interfaces_&&n[1].interfaces_.indexOf(List)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=n[1],o=n[2],s=i.iterator();s.hasNext();){var u=s.next();u.isForward()&&e.findStabbedSegments(a,u,o)}}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getDepth",value:function(e){var t=this.findStabbedSegments(e);if(0===t.size())return 0;var n=Collections.min(t);return n.leftDepth}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"DepthSegment",get:function(){return DepthSegment}}]),e}(),DepthSegment=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.upwardSeg=null,t.leftDepth=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.upwardSeg=new LineSegment(a),t.leftDepth=i}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"compareTo",value:function(e){var t=e;if(this.upwardSeg.minX()>=t.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=t.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(t.upwardSeg);return 0!==n?n:(n=-1*t.upwardSeg.orientationIndex(this.upwardSeg),0!==n?n:this.upwardSeg.compareTo(t.upwardSeg))}},{key:"compareX",value:function(e,t){var n=e.p0.compareTo(t.p0);return 0!==n?n:e.p1.compareTo(t.p1)}},{key:"toString",value:function(){return this.upwardSeg.toString()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparable]}}]),e}(),Triangle=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.p0=null,t.p1=null,t.p2=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];t.p0=a,t.p1=i,t.p2=o}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"area",value:function(){return e.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return e.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(null===t)throw new IllegalArgumentException$1("Supplied point is null.");return e.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return e.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return e.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return e.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return e.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return e.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return e.inCentre(this.p0,this.p1,this.p2)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"area",value:function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)}},{key:"signedArea",value:function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2}},{key:"det",value:function(e,t,n,r){return e*r-t*n}},{key:"interpolateZ",value:function(e,t,n,r){var a=t.x,i=t.y,o=n.x-a,s=r.x-a,u=n.y-i,l=r.y-i,c=o*l-s*u,g=e.x-a,h=e.y-i,f=(l*g-s*h)/c,y=(-u*g+o*h)/c,v=t.z+f*(n.z-t.z)+y*(r.z-t.z);return v}},{key:"longestSideLength",value:function(e,t,n){var r=e.distance(t),a=t.distance(n),i=n.distance(e),o=r;return a>o&&(o=a),i>o&&(o=i),o}},{key:"isAcute",value:function(e,t,n){return Angle.isAcute(e,t,n)&&Angle.isAcute(t,n,e)&&Angle.isAcute(n,e,t)?!0:!1}},{key:"circumcentre",value:function(t,n,r){var a=r.x,i=r.y,o=t.x-a,s=t.y-i,u=n.x-a,l=n.y-i,c=2*e.det(o,s,u,l),g=e.det(s,o*o+s*s,l,u*u+l*l),h=e.det(o,o*o+s*s,u,u*u+l*l),f=a-g/c,y=i+h/c;return new Coordinate(f,y)}},{key:"perpendicularBisector",value:function(e,t){var n=t.x-e.x,r=t.y-e.y,a=new HCoordinate(e.x+n/2,e.y+r/2,1),i=new HCoordinate(e.x-r+n/2,e.y+n+r/2,1);return new HCoordinate(a,i)}},{key:"angleBisector",value:function(e,t,n){var r=t.distance(e),a=t.distance(n),i=r/(r+a),o=n.x-e.x,s=n.y-e.y,u=new Coordinate(e.x+i*o,e.y+i*s);return u}},{key:"area3D",value:function t(e,n,r){var a=n.x-e.x,i=n.y-e.y,o=n.z-e.z,s=r.x-e.x,u=r.y-e.y,l=r.z-e.z,c=i*l-o*u,g=o*s-a*l,h=a*u-i*s,f=c*c+g*g+h*h,t=Math.sqrt(f)/2;return t}},{key:"centroid",value:function(e,t,n){var r=(e.x+t.x+n.x)/3,a=(e.y+t.y+n.y)/3;return new Coordinate(r,a)}},{key:"inCentre",value:function(e,t,n){var r=t.distance(n),a=e.distance(n),i=e.distance(t),o=r+a+i,s=(r*e.x+a*t.x+i*n.x)/o,u=(r*e.y+a*t.y+i*n.y)/o;return new Coordinate(s,u)}}]),e}(),OffsetCurveSetBuilder=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.inputGeom=null,t.distance=null,t.curveBuilder=null,t.curveList=new ArrayList}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];t.inputGeom=a,t.distance=i,t.curveBuilder=o}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"addPoint",value:function(e){if(this.distance<=0)return null;var t=e.getCoordinates(),n=this.curveBuilder.getLineCurve(t,this.distance);this.addCurve(n,Location.EXTERIOR,Location.INTERIOR)}},{key:"addPolygon",value:function(e){var t=this.distance,n=Position.LEFT;this.distance<0&&(t=-this.distance,n=Position.RIGHT);var r=e.getExteriorRing(),a=CoordinateArrays.removeRepeatedPoints(r.getCoordinates());if(this.distance<0&&this.isErodedCompletely(r,this.distance))return null;if(this.distance<=0&&a.length<3)return null;this.addPolygonRing(a,t,n,Location.EXTERIOR,Location.INTERIOR);for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),s=CoordinateArrays.removeRepeatedPoints(o.getCoordinates());this.distance>0&&this.isErodedCompletely(o,-this.distance)||this.addPolygonRing(s,t,Position.opposite(n),Location.INTERIOR,Location.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(e,t){var n=new Triangle(e[0],e[1],e[2]),r=n.inCentre(),a=CGAlgorithms.distancePointLine(r,n.p0,n.p1);return a<Math.abs(t)}},{key:"addLineString",value:function(e){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var t=CoordinateArrays.removeRepeatedPoints(e.getCoordinates()),n=this.curveBuilder.getLineCurve(t,this.distance);this.addCurve(n,Location.EXTERIOR,Location.INTERIOR)}},{key:"addCurve",value:function(e,t,n){if(null===e||e.length<2)return null;var r=new NodedSegmentString(e,new Label(0,Location.BOUNDARY,t,n));this.curveList.add(r)}},{key:"getCurves",value:function(){return this.add(this.inputGeom),this.curveList}},{key:"addPolygonRing",value:function(e,t,n,r,a){if(0===t&&e.length<LinearRing.MINIMUM_VALID_SIZE)return null;var i=r,o=a;e.length>=LinearRing.MINIMUM_VALID_SIZE&&CGAlgorithms.isCCW(e)&&(i=a,o=r,n=Position.opposite(n));var s=this.curveBuilder.getRingCurve(e,n,t);this.addCurve(s,i,o)}},{key:"add",value:function(e){if(e.isEmpty())return null;if(e instanceof Polygon)this.addPolygon(e);else if(e instanceof LineString)this.addLineString(e);else if(e instanceof Point)this.addPoint(e);else if(e instanceof MultiPoint)this.addCollection(e);else if(e instanceof MultiLineString)this.addCollection(e);else if(e instanceof MultiPolygon)this.addCollection(e);else{if(!(e instanceof GeometryCollection))throw new UnsupportedOperationException(e.getClass().getName());this.addCollection(e)}}},{key:"isErodedCompletely",value:function(e,t){var n=e.getCoordinates();if(n.length<4)return 0>t;if(4===n.length)return this.isTriangleErodedCompletely(n,t);var r=e.getEnvelopeInternal(),a=Math.min(r.getHeight(),r.getWidth());return 0>t&&2*Math.abs(t)>a?!0:!1}},{key:"addCollection",value:function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),IntersectionAdder=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t._hasIntersection=!1,t.hasProper=!1,t.hasProperInterior=!1,t.hasInterior=!1,t.properIntersectionPoint=null,t.li=null,t.isSelfIntersection=null,t.numIntersections=0,t.numInteriorIntersections=0,t.numProperIntersections=0,t.numTests=0}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.li=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"isTrivialIntersection",value:function(t,n,r,a){if(t===r&&1===this.li.getIntersectionNum()){if(e.isAdjacentSegments(n,a))return!0;if(t.isClosed()){var i=t.size()-1;if(0===n&&a===i||0===a&&n===i)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this.properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this.hasProperInterior}},{key:"getLineIntersector",value:function(){return this.li}},{key:"hasProperIntersection",value:function(){return this.hasProper}},{key:"processIntersections",value:function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var a=e.getCoordinates()[t],i=e.getCoordinates()[t+1],o=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this.li.computeIntersection(a,i,o,s),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,e.addIntersections(this.li,t,0),n.addIntersections(this.li,r,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this.hasInterior}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[SegmentIntersector$1]}}],[{key:"isAdjacentSegments",value:function(e,t){return 1===Math.abs(e-t)}}]),e}(),BufferBuilder=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.bufParams=null,t.workingPrecisionModel=null,t.workingNoder=null,t.geomFact=null,t.graph=null,t.edgeList=new EdgeList}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.bufParams=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"setWorkingPrecisionModel",value:function(e){this.workingPrecisionModel=e}},{key:"insertUniqueEdge",value:function(t){var n=this.edgeList.findEqualEdge(t);if(null!==n){var r=n.getLabel(),a=t.getLabel();n.isPointwiseEqual(t)||(a=new Label(t.getLabel()),a.flip()),r.merge(a);var i=e.depthDelta(a),o=n.getDepthDelta(),s=o+i;n.setDepthDelta(s)}else this.edgeList.add(t),t.setDepthDelta(e.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(e,t){for(var n=new ArrayList,r=e.iterator();r.hasNext();){var a=r.next(),i=a.getRightmostCoordinate(),o=new SubgraphDepthLocater(n),s=o.getDepth(i);a.computeDepth(s),a.findResultEdges(),n.add(a),t.add(a.getDirectedEdges(),a.getNodes())}}},{key:"createSubgraphs",value:function(e){for(var t=new ArrayList,n=e.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var a=new BufferSubgraph;a.create(r),t.add(a)}}return Collections.sort(t,Collections.reverseOrder()),t}},{key:"createEmptyResultGeometry",value:function(){var e=this.geomFact.createPolygon();return e}},{key:"getNoder",value:function(e){if(null!==this.workingNoder)return this.workingNoder;var t=new MCIndexNoder,n=new RobustLineIntersector;return n.setPrecisionModel(e),t.setSegmentIntersector(new IntersectionAdder(n)),t}},{key:"buffer",value:function(e,t){var n=this.workingPrecisionModel;null===n&&(n=e.getPrecisionModel()),this.geomFact=e.getFactory();var r=new OffsetCurveBuilder(n,this.bufParams),a=new OffsetCurveSetBuilder(e,t,r),i=a.getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this.graph=new PlanarGraph(new OverlayNodeFactory),this.graph.addEdges(this.edgeList.getEdges());var o=this.createSubgraphs(this.graph),s=new PolygonBuilder(this.geomFact);this.buildSubgraphs(o,s);var u=s.getPolygons();if(u.size()<=0)return this.createEmptyResultGeometry();var l=this.geomFact.buildGeometry(u);return l}},{key:"computeNodedEdges",value:function(e,t){var n=this.getNoder(t);n.computeNodes(e);for(var r=n.getNodedSubstrings(),a=r.iterator();a.hasNext();){var i=a.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),u=new Edge(i.getCoordinates(),new Label(s));this.insertUniqueEdge(u)}}}},{key:"setNoder",value:function(e){this.workingNoder=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[];
}}],[{key:"depthDelta",value:function(e){var t=e.getLocation(0,Position.LEFT),n=e.getLocation(0,Position.RIGHT);return t===Location.INTERIOR&&n===Location.EXTERIOR?1:t===Location.EXTERIOR&&n===Location.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(e){for(var t=new GeometryFactory,n=new ArrayList;e.hasNext();){var r=e.next(),a=t.createLineString(r.getCoordinates());n.add(a)}return t.buildGeometry(n)}}]),e}(),ScaledNoder=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.noder=null,t.scaleFactor=null,t.offsetX=null,t.offsetY=null,t.isScaled=!1}();var i=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];o.call(t,a,i,0,0)}.apply(void 0,n);case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];n[2],n[3];t.noder=a,t.scaleFactor=i,t.isScaled=!t.isIntegerPrecision()}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"rescale",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(Collection)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=a.iterator();i.hasNext();){var o=i.next();e.rescale(o.getCoordinates())}}.apply(void 0,n);if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=null,o=null;2===a.length&&(i=new Coordinate(a[0]),o=new Coordinate(a[1]));for(var s=0;s<a.length;s++)a[s].x=a[s].x/e.scaleFactor+e.offsetX,a[s].y=a[s].y/e.scaleFactor+e.offsetY;2===a.length&&a[0].equals2D(a[1])&&System.out.println(a)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"scale",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(Collection)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=new ArrayList,o=a.iterator();o.hasNext();){var s=o.next();i.add(new NodedSegmentString(e.scale(s.getCoordinates()),s.getData()))}return i}.apply(void 0,n);if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=new Array(a.length),o=0;o<a.length;o++)i[o]=new Coordinate(Math.round((a[o].x-e.offsetX)*e.scaleFactor),Math.round((a[o].y-e.offsetY)*e.scaleFactor),a[o].z);var s=CoordinateArrays.removeRepeatedPoints(i);return s}.apply(void 0,n)}};return a.apply(this,n)}},{key:"isIntegerPrecision",value:function(){return 1===this.scaleFactor}},{key:"getNodedSubstrings",value:function(){var e=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(e),e}},{key:"computeNodes",value:function(e){var t=e;this.isScaled&&(t=this.scale(e)),this.noder.computeNodes(t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Noder]}}]),e}(),NodingValidator=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.li=new RobustLineIntersector,t.segStrings=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.segStrings=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"checkEndPtVertexIntersections",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=e.segStrings.iterator();a.hasNext();){var i=a.next(),o=i.getCoordinates();e.checkEndPtVertexIntersections(o[0],e.segStrings),e.checkEndPtVertexIntersections(o[o.length-1],e.segStrings)}}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];for(var r=t[0],a=t[1],i=a.iterator();i.hasNext();)for(var o=i.next(),s=o.getCoordinates(),u=1;u<s.length-1;u++)if(s[u].equals(r))throw new RuntimeException("found endpt/interior pt intersection at index "+u+" :pt "+r)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"checkInteriorIntersections",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=e.segStrings.iterator();a.hasNext();)for(var i=a.next(),o=e.segStrings.iterator();o.hasNext();){var s=o.next();e.checkInteriorIntersections(i,s)}}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=n[1],o=a.getCoordinates(),s=i.getCoordinates(),u=0;u<o.length-1;u++)for(var l=0;l<s.length-1;l++)e.checkInteriorIntersections(a,u,i,l)}.apply(void 0,n);case 4:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=n[3];if(a===o&&i===s)return null;var u=a.getCoordinates()[i],l=a.getCoordinates()[i+1],c=o.getCoordinates()[s],g=o.getCoordinates()[s+1];if(e.li.computeIntersection(u,l,c,g),e.li.hasIntersection()&&(e.li.isProper()||e.hasInteriorIntersection(e.li,u,l)||e.hasInteriorIntersection(e.li,c,g)))throw new RuntimeException("found non-noded intersection at "+u+"-"+l+" and "+c+"-"+g)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=e.segStrings.iterator();a.hasNext();){var i=a.next();e.checkCollapses(i)}}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=a.getCoordinates(),o=0;o<i.length-2;o++)e.checkCollapse(i[o],i[o+1],i[o+2])}.apply(void 0,n)}};return a.apply(this,n)}},{key:"hasInteriorIntersection",value:function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++){var a=e.getIntersection(r);if(!a.equals(t)&&!a.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(t,n,r){if(t.equals(r))throw new RuntimeException("found non-noded collapse at "+e.fact.createLineString([t,n,r]))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();NodingValidator.fact=new GeometryFactory;var HotPixel=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.li=null,t.pt=null,t.originalPt=null,t.ptScaled=null,t.p0Scaled=null,t.p1Scaled=null,t.scaleFactor=null,t.minx=null,t.maxx=null,t.miny=null,t.maxy=null,t.corner=new Array(4),t.safeEnv=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];if(t.originalPt=a,t.pt=a,t.scaleFactor=i,t.li=o,0>=i)throw new IllegalArgumentException$1("Scale factor must be non-zero");1!==i&&(t.pt=new Coordinate(t.scale(a.x),t.scale(a.y)),t.p0Scaled=new Coordinate,t.p1Scaled=new Coordinate),t.initCorners(t.pt)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"intersectsScaled",value:function(e,t){var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),a=Math.min(e.y,t.y),i=Math.max(e.y,t.y),o=this.maxx<n||this.minx>r||this.maxy<a||this.miny>i;if(o)return!1;var s=this.intersectsToleranceSquare(e,t);return Assert.isTrue(!(o&&s),"Found bad envelope test"),s}},{key:"initCorners",value:function(e){var t=.5;this.minx=e.x-t,this.maxx=e.x+t,this.miny=e.y-t,this.maxy=e.y+t,this.corner[0]=new Coordinate(this.maxx,this.maxy),this.corner[1]=new Coordinate(this.minx,this.maxy),this.corner[2]=new Coordinate(this.minx,this.miny),this.corner[3]=new Coordinate(this.maxx,this.miny)}},{key:"intersects",value:function(e,t){return 1===this.scaleFactor?this.intersectsScaled(e,t):(this.copyScaled(e,this.p0Scaled),this.copyScaled(t,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))}},{key:"scale",value:function(e){return Math.round(e*this.scaleFactor)}},{key:"getCoordinate",value:function(){return this.originalPt}},{key:"copyScaled",value:function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)}},{key:"getSafeEnvelope",value:function(){if(null===this.safeEnv){var t=e.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new Envelope(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv}},{key:"intersectsPixelClosure",value:function(e,t){return this.li.computeIntersection(e,t,this.corner[0],this.corner[1]),this.li.hasIntersection()?!0:(this.li.computeIntersection(e,t,this.corner[1],this.corner[2]),this.li.hasIntersection()?!0:(this.li.computeIntersection(e,t,this.corner[2],this.corner[3]),this.li.hasIntersection()?!0:(this.li.computeIntersection(e,t,this.corner[3],this.corner[0]),this.li.hasIntersection()?!0:!1)))}},{key:"intersectsToleranceSquare",value:function(e,t){var n=!1,r=!1;return this.li.computeIntersection(e,t,this.corner[0],this.corner[1]),this.li.isProper()?!0:(this.li.computeIntersection(e,t,this.corner[1],this.corner[2]),this.li.isProper()?!0:(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(e,t,this.corner[2],this.corner[3]),this.li.isProper()?!0:(this.li.hasIntersection()&&(r=!0),this.li.computeIntersection(e,t,this.corner[3],this.corner[0]),this.li.isProper()?!0:n&&r?!0:e.equals(this.pt)?!0:t.equals(this.pt)?!0:!1)))}},{key:"addSnappedNode",value:function(e,t){var n=e.getCoordinate(t),r=e.getCoordinate(t+1);return this.intersects(n,r)?(e.addIntersection(this.getCoordinate(),t),!0):!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();HotPixel.SAFE_ENV_EXPANSION_FACTOR=.75;var MCIndexPointSnapper=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.index=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.index=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"snap",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.snap(a,null,-1)}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=a.getSafeEnvelope(),u=new HotPixelSnapAction(a,i,o);return e.index.query(s,new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"visitItem",value:function(e){var t=e;t.select(s,u)}},{key:"interfaces_",get:function(){return[ItemVisitor]}}]),e}())),u.isNodeAdded()}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"HotPixelSnapAction",get:function(){return HotPixelSnapAction}}]),e}(),HotPixelSnapAction=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){i.hotPixel=null,i.parentEdge=null,i.hotPixelVertexIndex=null,i._isNodeAdded=!1}();var o=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2];i.hotPixel=r,i.parentEdge=a,i.hotPixelVertexIndex=o}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];if(2!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"select",this)).call.apply(e,[this].concat(r));var i=r[0],o=r[1],s=i.getContext();return null!==this.parentEdge&&s===this.parentEdge&&o===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(s,o))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(MonotoneChainSelectAction),InteriorIntersectionFinderAdder=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.li=null,t.interiorIntersections=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.li=a,t.interiorIntersections=new ArrayList}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"processIntersections",value:function(e,t,n,r){if(e===n&&t===r)return null;var a=e.getCoordinates()[t],i=e.getCoordinates()[t+1],o=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this.li.computeIntersection(a,i,o,s),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var u=0;u<this.li.getIntersectionNum();u++)this.interiorIntersections.add(this.li.getIntersection(u));e.addIntersections(this.li,t,0),n.addIntersections(this.li,r,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this.interiorIntersections}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[SegmentIntersector$1]}}]),e}(),MCIndexSnapRounder=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.pm=null,t.li=null,t.scaleFactor=null,t.noder=null,t.pointSnapper=null,t.nodedSegStrings=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.pm=a,t.li=new RobustLineIntersector,t.li.setPrecisionModel(a),t.scaleFactor=a.getScale()}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"checkCorrectness",value:function(e){var t=NodedSegmentString.getNodedSubstrings(e),n=new NodingValidator(t);try{n.checkValid()}catch(r){if(!(r instanceof Exception))throw r;r.printStackTrace()}finally{}}},{key:"getNodedSubstrings",value:function(){return NodedSegmentString.getNodedSubstrings(this.nodedSegStrings)}},{key:"snapRound",value:function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)}},{key:"findInteriorIntersections",value:function(e,t){var n=new InteriorIntersectionFinderAdder(t);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(e),n.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(Collection)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=a.iterator();i.hasNext();){var o=i.next();e.computeVertexSnaps(o)}}.apply(void 0,n);if(n[0]instanceof NodedSegmentString)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=a.getCoordinates(),o=0;o<i.length;o++){var s=new HotPixel(i[o],e.scaleFactor,e.li),u=e.pointSnapper.snap(s,a,o);u&&a.addIntersection(i[o],o)}}.apply(void 0,n)}};return a.apply(this,n)}},{key:"computeNodes",value:function(e){this.nodedSegStrings=e,this.noder=new MCIndexNoder,this.pointSnapper=new MCIndexPointSnapper(this.noder.getIndex()),this.snapRound(e,this.li)}},{key:"computeIntersectionSnaps",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=new HotPixel(n,this.scaleFactor,this.li);this.pointSnapper.snap(r)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Noder]}}]),e}(),BufferOp$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.argGeom=null,t.distance=null,t.bufParams=new BufferParameters,t.resultGeometry=null,t.saveException=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.argGeom=a}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.argGeom=a,t.bufParams=i}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"bufferFixedPrecision",value:function(e){var t=new ScaledNoder(new MCIndexSnapRounder(new PrecisionModel(1)),e.getScale()),n=new BufferBuilder(this.bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this.resultGeometry=n.buffer(this.argGeom,this.distance)}},{key:"bufferReducedPrecision",value:function(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 0:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];for(var i=e.MAX_PRECISION_DIGITS;i>=0;i--){try{t.bufferReducedPrecision(i)}catch(o){if(!(o instanceof TopologyException))throw o;t.saveException=o}finally{}if(null!==t.resultGeometry)return null}throw t.saveException}.apply(void 0,r);case 1:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],o=e.precisionScaleFactor(t.argGeom,t.distance,i),s=new PrecisionModel(o);t.bufferFixedPrecision(s)}.apply(void 0,r)}};return i.apply(this,r)}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),null!==this.resultGeometry)return null;var e=this.argGeom.getFactory().getPrecisionModel();e.getType()===PrecisionModel.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(e){this.bufParams.setQuadrantSegments(e)}},{key:"bufferOriginalPrecision",value:function(){try{var e=new BufferBuilder(this.bufParams);this.resultGeometry=e.buffer(this.argGeom,this.distance)}catch(t){if(!(t instanceof RuntimeException))throw t;this.saveException=t}finally{}}},{key:"getResultGeometry",value:function(e){return this.distance=e,this.computeGeometry(),this.resultGeometry}},{key:"setEndCapStyle",value:function(e){this.bufParams.setEndCapStyle(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"bufferOp",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=new e(a),s=o.getResultGeometry(i);return s}.apply(void 0,n);case 3:if(Number.isInteger(n[2])&&n[0]instanceof Geometry&&"number"==typeof n[1])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=new e(a);s.setQuadrantSegments(o);var u=s.getResultGeometry(i);return u}.apply(void 0,n);if(n[2]instanceof BufferParameters&&n[0]instanceof Geometry&&"number"==typeof n[1])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=new e(a,o),u=s.getResultGeometry(i);return u}.apply(void 0,n);case 4:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=n[3],u=new e(a);u.setQuadrantSegments(o),u.setEndCapStyle(s);var l=u.getResultGeometry(i);return l}.apply(void 0,n)}};return a.apply(this,n)}},{key:"precisionScaleFactor",value:function(e,t,n){var r=e.getEnvelopeInternal(),a=MathUtil.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),i=t>0?t:0,o=a+2*i,s=Math.trunc(Math.log(o)/Math.log(10)+1),u=n-s,l=Math.pow(10,u);return l}}]),e}();BufferOp$1.CAP_ROUND=BufferParameters.CAP_ROUND,BufferOp$1.CAP_BUTT=BufferParameters.CAP_FLAT,BufferOp$1.CAP_FLAT=BufferParameters.CAP_FLAT,BufferOp$1.CAP_SQUARE=BufferParameters.CAP_SQUARE,BufferOp$1.MAX_PRECISION_DIGITS=12;var UniqueCoordinateArrayFilter=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.treeSet=new TreeSet,t.list=new ArrayList}();var i=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return i.apply(this,r)}return _createClass(e,[{key:"filter",value:function(e){this.treeSet.contains(e)||(this.list.add(e),this.treeSet.add(e))}},{key:"getCoordinates",value:function(){var e=new Array(this.list.size());return this.list.toArray(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[CoordinateFilter]}}],[{key:"filterCoordinates",value:function(t){for(var n=new e,r=0;r<t.length;r++)n.filter(t[r]);return n.getCoordinates()}}]),e}(),ConvexHull$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.geomFactory=null,t.inputPts=null}();var i=function o(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0];o.call(t,e.extractCoordinates(i),i.getFactory())}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];t.inputPts=UniqueCoordinateArrayFilter.filterCoordinates(a),t.geomFactory=i}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"preSort",value:function(e){for(var t=null,n=1;n<e.length;n++)(e[n].y<e[0].y||e[n].y===e[0].y&&e[n].x<e[0].x)&&(t=e[0],e[0]=e[n],e[n]=t);return Arrays.sort(e,1,e.length,new RadialComparator(e[0])),e}},{key:"computeOctRing",value:function(e){var t=this.computeOctPts(e),n=new CoordinateList;return n.add(t,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())}},{key:"lineOrPolygon",value:function(e){if(e=this.cleanRing(e),3===e.length)return this.geomFactory.createLineString([e[0],e[1]]);var t=this.geomFactory.createLinearRing(e);return this.geomFactory.createPolygon(t,null)}},{key:"cleanRing",value:function(e){Assert.equals(e[0],e[e.length-1]);for(var t=new ArrayList,n=null,r=0;r<=e.length-2;r++){var a=e[r],i=e[r+1];a.equals(i)||null!==n&&this.isBetween(n,a,i)||(t.add(a),n=a)}t.add(e[e.length-1]);var o=new Array(t.size());return t.toArray(o)}},{key:"isBetween",value:function(e,t,n){if(0!==CGAlgorithms.computeOrientation(e,t,n))return!1;if(e.x!==n.x){if(e.x<=t.x&&t.x<=n.x)return!0;if(n.x<=t.x&&t.x<=e.x)return!0}if(e.y!==n.y){if(e.y<=t.y&&t.y<=n.y)return!0;if(n.y<=t.y&&t.y<=e.y)return!0}return!1}},{key:"reduce",value:function(e){var t=this.computeOctRing(e);if(null===t)return e;for(var n=new TreeSet,r=0;r<t.length;r++)n.add(t[r]);for(var r=0;r<e.length;r++)CGAlgorithms.isPointInRing(e[r],t)||n.add(e[r]);var a=CoordinateArrays.toCoordinateArray(n);return a.length<3?this.padArray3(a):a}},{key:"getConvexHull",value:function(){if(0===this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1===this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2===this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var e=this.inputPts;this.inputPts.length>50&&(e=this.reduce(this.inputPts));var t=this.preSort(e),n=this.grahamScan(t),r=this.toCoordinateArray(n);return this.lineOrPolygon(r)}},{key:"padArray3",value:function(e){for(var t=new Array(3),n=0;n<t.length;n++)n<e.length?t[n]=e[n]:t[n]=e[0];return t}},{key:"computeOctPts",value:function(e){for(var t=new Array(8),n=0;n<t.length;n++)t[n]=e[0];for(var r=1;r<e.length;r++)e[r].x<t[0].x&&(t[0]=e[r]),e[r].x-e[r].y<t[1].x-t[1].y&&(t[1]=e[r]),e[r].y>t[2].y&&(t[2]=e[r]),e[r].x+e[r].y>t[3].x+t[3].y&&(t[3]=e[r]),e[r].x>t[4].x&&(t[4]=e[r]),e[r].x-e[r].y>t[5].x-t[5].y&&(t[5]=e[r]),e[r].y<t[6].y&&(t[6]=e[r]),e[r].x+e[r].y<t[7].x+t[7].y&&(t[7]=e[r]);return t}},{key:"toCoordinateArray",value:function(e){for(var t=new Array(e.size()),n=0;n<e.size();n++){var r=e.get(n);t[n]=r}return t}},{key:"grahamScan",value:function(e){var t=null,n=new Stack;t=n.push(e[0]),t=n.push(e[1]),t=n.push(e[2]);for(var r=3;r<e.length;r++){for(t=n.pop();!n.empty()&&CGAlgorithms.computeOrientation(n.peek(),t,e[r])>0;)t=n.pop();t=n.push(t),t=n.push(e[r])}return t=n.push(e[0]),n}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"extractCoordinates",value:function(e){var t=new UniqueCoordinateArrayFilter;return e.apply(t),t.getCoordinates()}},{key:"RadialComparator",get:function(){return RadialComparator}}]),e}(),RadialComparator=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.origin=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.origin=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"compare",value:function(t,n){var r=t,a=n;return e.polarCompare(this.origin,r,a)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Comparator]}}],[{key:"polarCompare",value:function(e,t,n){var r=t.x-e.x,a=t.y-e.y,i=n.x-e.x,o=n.y-e.y,s=CGAlgorithms.computeOrientation(e,t,n);if(s===CGAlgorithms.COUNTERCLOCKWISE)return 1;if(s===CGAlgorithms.CLOCKWISE)return-1;var u=r*r+a*a,l=i*i+o*o;return l>u?-1:u>l?1:0}}]),e}(),Centroid$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.areaBasePt=null,t.triangleCent3=new Coordinate,t.areasum2=0,t.cg3=new Coordinate,t.lineCentSum=new Coordinate,t.totalLength=0,t.ptCount=0,t.ptCentSum=new Coordinate}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.areaBasePt=null,t.add(a)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"addPoint",value:function(e){this.ptCount+=1,this.ptCentSum.x+=e.x,this.ptCentSum.y+=e.y}},{key:"setBasePoint",value:function(e){null===this.areaBasePt&&(this.areaBasePt=e)}},{key:"addLineSegments",value:function(e){for(var t=0,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);if(0!==r){t+=r;var a=(e[n].x+e[n+1].x)/2;this.lineCentSum.x+=r*a;var i=(e[n].y+e[n+1].y)/2;this.lineCentSum.y+=r*i}}this.totalLength+=t,0===t&&e.length>0&&this.addPoint(e[0])}},{key:"addHole",value:function(e){for(var t=CGAlgorithms.isCCW(e),n=0;n<e.length-1;n++)this.addTriangle(this.areaBasePt,e[n],e[n+1],t);this.addLineSegments(e)}},{key:"getCentroid",value:function(){var e=new Coordinate;if(Math.abs(this.areasum2)>0)e.x=this.cg3.x/3/this.areasum2,e.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)e.x=this.lineCentSum.x/this.totalLength,e.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;e.x=this.ptCentSum.x/this.ptCount,e.y=this.ptCentSum.y/this.ptCount}return e}},{key:"addShell",value:function(e){e.length>0&&this.setBasePoint(e[0]);for(var t=!CGAlgorithms.isCCW(e),n=0;n<e.length-1;n++)this.addTriangle(this.areaBasePt,e[n],e[n+1],t);this.addLineSegments(e)}},{key:"addTriangle",value:function(t,n,r,a){var i=a?1:-1;e.centroid3(t,n,r,this.triangleCent3);var o=e.area2(t,n,r);this.cg3.x+=i*o*this.triangleCent3.x,this.cg3.y+=i*o*this.triangleCent3.y,this.areasum2+=i*o}},{key:"add",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof Polygon)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];e.addShell(a.getExteriorRing().getCoordinates());for(var i=0;i<a.getNumInteriorRing();i++)e.addHole(a.getInteriorRingN(i).getCoordinates())}.apply(void 0,n);if(n[0]instanceof Geometry)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];if(a.isEmpty())return null;if(a instanceof Point)e.addPoint(a.getCoordinate());else if(a instanceof LineString)e.addLineSegments(a.getCoordinates());else if(a instanceof Polygon){var i=a;e.add(i)}else if(a instanceof GeometryCollection)for(var o=a,s=0;s<o.getNumGeometries();s++)e.add(o.getGeometryN(s))}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"area2",value:function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}},{key:"centroid3",value:function(e,t,n,r){return r.x=e.x+t.x+n.x,r.y=e.y+t.y+n.y,null}},{key:"getCentroid",value:function(t){var n=new e(t);return n.getCentroid()}}]),e}(),IntersectionMatrix=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.matrix=null}();var i=function o(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.matrix=Array(3).fill().map(function(){return Array(3)}),t.setAll(Dimension.FALSE)}.apply(void 0,r);case 1:if("string"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];o.call(t),t.set(a)}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];o.call(t),t.matrix[Location.INTERIOR][Location.INTERIOR]=a.matrix[Location.INTERIOR][Location.INTERIOR],t.matrix[Location.INTERIOR][Location.BOUNDARY]=a.matrix[Location.INTERIOR][Location.BOUNDARY],t.matrix[Location.INTERIOR][Location.EXTERIOR]=a.matrix[Location.INTERIOR][Location.EXTERIOR],t.matrix[Location.BOUNDARY][Location.INTERIOR]=a.matrix[Location.BOUNDARY][Location.INTERIOR],t.matrix[Location.BOUNDARY][Location.BOUNDARY]=a.matrix[Location.BOUNDARY][Location.BOUNDARY],t.matrix[Location.BOUNDARY][Location.EXTERIOR]=a.matrix[Location.BOUNDARY][Location.EXTERIOR],t.matrix[Location.EXTERIOR][Location.INTERIOR]=a.matrix[Location.EXTERIOR][Location.INTERIOR],t.matrix[Location.EXTERIOR][Location.BOUNDARY]=a.matrix[Location.EXTERIOR][Location.BOUNDARY],t.matrix[Location.EXTERIOR][Location.EXTERIOR]=a.matrix[Location.EXTERIOR][Location.EXTERIOR]}.apply(void 0,r)}
};return i.apply(this,r)}return _createClass(e,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){var t=e.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR])||e.isTrue(this.matrix[Location.INTERIOR][Location.BOUNDARY])||e.isTrue(this.matrix[Location.BOUNDARY][Location.INTERIOR])||e.isTrue(this.matrix[Location.BOUNDARY][Location.BOUNDARY]);return t&&this.matrix[Location.EXTERIOR][Location.INTERIOR]===Dimension.FALSE&&this.matrix[Location.EXTERIOR][Location.BOUNDARY]===Dimension.FALSE}},{key:"isCoveredBy",value:function(){var t=e.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR])||e.isTrue(this.matrix[Location.INTERIOR][Location.BOUNDARY])||e.isTrue(this.matrix[Location.BOUNDARY][Location.INTERIOR])||e.isTrue(this.matrix[Location.BOUNDARY][Location.BOUNDARY]);return t&&this.matrix[Location.INTERIOR][Location.EXTERIOR]===Dimension.FALSE&&this.matrix[Location.BOUNDARY][Location.EXTERIOR]===Dimension.FALSE}},{key:"set",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=0;i<a.length;i++){var o=Math.trunc(i/3),s=i%3;e.matrix[o][s]=Dimension.toDimensionValue(a.charAt(i))}}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];e.matrix[a][i]=o}.apply(void 0,n)}};return a.apply(this,n)}},{key:"isContains",value:function(){return e.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR])&&this.matrix[Location.EXTERIOR][Location.INTERIOR]===Dimension.FALSE&&this.matrix[Location.EXTERIOR][Location.BOUNDARY]===Dimension.FALSE}},{key:"setAtLeast",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=0;i<a.length;i++){var o=Math.trunc(i/3),s=i%3;e.setAtLeast(o,s,Dimension.toDimensionValue(a.charAt(i)))}}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];e.matrix[a][i]<o&&(e.matrix[a][i]=o)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"setAtLeastIfValid",value:function(e,t,n){e>=0&&t>=0&&this.setAtLeast(e,t,n)}},{key:"isWithin",value:function(){return e.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR])&&this.matrix[Location.INTERIOR][Location.EXTERIOR]===Dimension.FALSE&&this.matrix[Location.BOUNDARY][Location.EXTERIOR]===Dimension.FALSE}},{key:"isTouches",value:function(t,n){return t>n?this.isTouches(n,t):t===Dimension.A&&n===Dimension.A||t===Dimension.L&&n===Dimension.L||t===Dimension.L&&n===Dimension.A||t===Dimension.P&&n===Dimension.A||t===Dimension.P&&n===Dimension.L?this.matrix[Location.INTERIOR][Location.INTERIOR]===Dimension.FALSE&&(e.isTrue(this.matrix[Location.INTERIOR][Location.BOUNDARY])||e.isTrue(this.matrix[Location.BOUNDARY][Location.INTERIOR])||e.isTrue(this.matrix[Location.BOUNDARY][Location.BOUNDARY])):!1}},{key:"isOverlaps",value:function(t,n){return t===Dimension.P&&n===Dimension.P||t===Dimension.A&&n===Dimension.A?e.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR])&&e.isTrue(this.matrix[Location.INTERIOR][Location.EXTERIOR])&&e.isTrue(this.matrix[Location.EXTERIOR][Location.INTERIOR]):t===Dimension.L&&n===Dimension.L?1===this.matrix[Location.INTERIOR][Location.INTERIOR]&&e.isTrue(this.matrix[Location.INTERIOR][Location.EXTERIOR])&&e.isTrue(this.matrix[Location.EXTERIOR][Location.INTERIOR]):!1}},{key:"isEquals",value:function(t,n){return t!==n?!1:e.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR])&&this.matrix[Location.INTERIOR][Location.EXTERIOR]===Dimension.FALSE&&this.matrix[Location.BOUNDARY][Location.EXTERIOR]===Dimension.FALSE&&this.matrix[Location.EXTERIOR][Location.INTERIOR]===Dimension.FALSE&&this.matrix[Location.EXTERIOR][Location.BOUNDARY]===Dimension.FALSE}},{key:"toString",value:function(){for(var e=new StringBuffer("123456789"),t=0;3>t;t++)for(var n=0;3>n;n++)e.setCharAt(3*t+n,Dimension.toDimensionSymbol(this.matrix[t][n]));return e.toString()}},{key:"setAll",value:function(e){for(var t=0;3>t;t++)for(var n=0;3>n;n++)this.matrix[t][n]=e}},{key:"get",value:function(e,t){return this.matrix[e][t]}},{key:"transpose",value:function(){var e=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=e,e=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=e,e=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=e,this}},{key:"matches",value:function(t){if(9!==t.length)throw new IllegalArgumentException$1("Should be length 9: "+t);for(var n=0;3>n;n++)for(var r=0;3>r;r++)if(!e.matches(this.matrix[n][r],t.charAt(3*n+r)))return!1;return!0}},{key:"add",value:function(e){for(var t=0;3>t;t++)for(var n=0;3>n;n++)this.setAtLeast(t,n,e.get(t,n))}},{key:"isDisjoint",value:function(){return this.matrix[Location.INTERIOR][Location.INTERIOR]===Dimension.FALSE&&this.matrix[Location.INTERIOR][Location.BOUNDARY]===Dimension.FALSE&&this.matrix[Location.BOUNDARY][Location.INTERIOR]===Dimension.FALSE&&this.matrix[Location.BOUNDARY][Location.BOUNDARY]===Dimension.FALSE}},{key:"isCrosses",value:function(t,n){return t===Dimension.P&&n===Dimension.L||t===Dimension.P&&n===Dimension.A||t===Dimension.L&&n===Dimension.A?e.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR])&&e.isTrue(this.matrix[Location.INTERIOR][Location.EXTERIOR]):t===Dimension.L&&n===Dimension.P||t===Dimension.A&&n===Dimension.P||t===Dimension.A&&n===Dimension.L?e.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR])&&e.isTrue(this.matrix[Location.EXTERIOR][Location.INTERIOR]):t===Dimension.L&&n===Dimension.L?0===this.matrix[Location.INTERIOR][Location.INTERIOR]:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Clonable]}}],[{key:"matches",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:if(Number.isInteger(n[0])&&"string"==typeof n[1])return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],a=t[1];return a===Dimension.SYM_DONTCARE?!0:a===Dimension.SYM_TRUE&&(r>=0||r===Dimension.TRUE)?!0:a===Dimension.SYM_FALSE&&r===Dimension.FALSE?!0:a===Dimension.SYM_P&&r===Dimension.P?!0:a===Dimension.SYM_L&&r===Dimension.L?!0:a===Dimension.SYM_A&&r===Dimension.A?!0:!1}.apply(void 0,n);if("string"==typeof n[0]&&"string"==typeof n[1])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=new e(a);return o.matches(i)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"isTrue",value:function(e){return e>=0||e===Dimension.TRUE?!0:!1}}]),e}(),RelateComputer=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.li=new RobustLineIntersector,t.ptLocator=new PointLocator,t.arg=null,t.nodes=new NodeMap(new RelateNodeFactory),t.im=null,t.isolatedEdges=new ArrayList,t.invalidPoint=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.arg=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"insertEdgeEnds",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.nodes.add(n)}}},{key:"computeProperIntersectionIM",value:function(e,t){var n=this.arg[0].getGeometry().getDimension(),r=this.arg[1].getGeometry().getDimension(),a=e.hasProperIntersection(),i=e.hasProperInteriorIntersection();2===n&&2===r?a&&t.setAtLeast("212101212"):2===n&&1===r?(a&&t.setAtLeast("FFF0FFFF2"),i&&t.setAtLeast("1FFFFF1FF")):1===n&&2===r?(a&&t.setAtLeast("F0FFFFFF2"),i&&t.setAtLeast("1F1FFFFFF")):1===n&&1===r&&i&&t.setAtLeast("0FFFFFFFF")}},{key:"labelIsolatedEdges",value:function(e,t){for(var n=this.arg[e].getEdgeIterator();n.hasNext();){var r=n.next();r.isIsolated()&&(this.labelIsolatedEdge(r,t,this.arg[t].getGeometry()),this.isolatedEdges.add(r))}}},{key:"labelIsolatedEdge",value:function(e,t,n){if(n.getDimension()>0){var r=this.ptLocator.locate(e.getCoordinate(),n);e.getLabel().setAllLocations(t,r)}else e.getLabel().setAllLocations(t,Location.EXTERIOR)}},{key:"computeIM",value:function(){var e=new IntersectionMatrix;if(e.set(Location.EXTERIOR,Location.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(e),e;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var t=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(t,e);var n=new EdgeEndBuilder,r=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(r);var a=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(a),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(e),e}},{key:"labelNodeEdges",value:function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().computeLabelling(this.arg)}}},{key:"copyNodesAndLabels",value:function(e){for(var t=this.arg[e].getNodeIterator();t.hasNext();){var n=t.next(),r=this.nodes.addNode(n.getCoordinate());r.setLabel(e,n.getLabel().getLocation(e))}}},{key:"labelIntersectionNodes",value:function(e){for(var t=this.arg[e].getEdgeIterator();t.hasNext();)for(var n=t.next(),r=n.getLabel().getLocation(e),a=n.getEdgeIntersectionList().iterator();a.hasNext();){var i=a.next(),o=this.nodes.find(i.coord);o.getLabel().isNull(e)&&(r===Location.BOUNDARY?o.setLabelBoundary(e):o.setLabel(e,Location.INTERIOR))}}},{key:"labelIsolatedNode",value:function(e,t){var n=this.ptLocator.locate(e.getCoordinate(),this.arg[t].getGeometry());e.getLabel().setAllLocations(t,n)}},{key:"computeIntersectionNodes",value:function(e){for(var t=this.arg[e].getEdgeIterator();t.hasNext();)for(var n=t.next(),r=n.getLabel().getLocation(e),a=n.getEdgeIntersectionList().iterator();a.hasNext();){var i=a.next(),o=this.nodes.addNode(i.coord);r===Location.BOUNDARY?o.setLabelBoundary(e):o.getLabel().isNull(e)&&o.setLabel(e,Location.INTERIOR)}}},{key:"labelIsolatedNodes",value:function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next(),n=t.getLabel();Assert.isTrue(n.getGeometryCount()>0,"node with empty label found"),t.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(t,0):this.labelIsolatedNode(t,1))}}},{key:"updateIM",value:function(e){for(var t=this.isolatedEdges.iterator();t.hasNext();){var n=t.next();n.updateIM(e)}for(var r=this.nodes.iterator();r.hasNext();){var a=r.next();a.updateIM(e),a.updateIMFromEdges(e)}}},{key:"computeDisjointIM",value:function(e){var t=this.arg[0].getGeometry();t.isEmpty()||(e.set(Location.INTERIOR,Location.EXTERIOR,t.getDimension()),e.set(Location.BOUNDARY,Location.EXTERIOR,t.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(e.set(Location.EXTERIOR,Location.INTERIOR,n.getDimension()),e.set(Location.EXTERIOR,Location.BOUNDARY,n.getBoundaryDimension()))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),RelateOp$1=function(e){function t(){for(var e,n=this,r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){o._relate=null}();var s=function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];switch(r.length){case 2:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,i,o));s._relate=new RelateComputer(s.arg)}.apply(void 0,r);case 3:return function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];var i=r[0],o=r[1],s=r[2],u=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,i,o,s));u._relate=new RelateComputer(u.arg)}.apply(void 0,r)}};return e=s.apply(o,a),_possibleConstructorReturn(o,e)}return _inherits(t,e),_createClass(t,[{key:"getIntersectionMatrix",value:function(){return this._relate.computeIM()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"relate",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=new t(a,i),s=o.getIntersectionMatrix();return s}.apply(void 0,n);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=new t(a,i,o),u=s.getIntersectionMatrix();return u}.apply(void 0,n)}};return a.apply(this,n)}}]),t}(GeometryGraphOperation),InteriorPointPoint$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.centroid=null,t.minDistance=Double.MAX_VALUE,t.interiorPoint=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.centroid=a.getCentroid().getCoordinate(),t.add(a)}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"getInteriorPoint",value:function(){return this.interiorPoint}},{key:"add",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof Geometry)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];if(a instanceof Point)e.add(a.getCoordinate());else if(a instanceof GeometryCollection)for(var i=a,o=0;o<i.getNumGeometries();o++)e.add(i.getGeometryN(o))}.apply(void 0,n);if(n[0]instanceof Coordinate)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=a.distance(e.centroid);i<e.minDistance&&(e.interiorPoint=new Coordinate(a),e.minDistance=i)}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),GeometryLocation=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.component=null,t.segIndex=null,t.pt=null}();var i=function o(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];switch(r.length){case 2:return function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];var i=r[0],s=r[1];o.call(t,i,e.INSIDE_AREA,s)}.apply(void 0,r);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];t.component=a,t.segIndex=i,t.pt=o}.apply(void 0,r)}};return i.apply(this,r)}return _createClass(e,[{key:"isInsideArea",value:function(){return this.segIndex===e.INSIDE_AREA}},{key:"getCoordinate",value:function(){return this.pt}},{key:"getGeometryComponent",value:function(){return this.component}},{key:"getSegmentIndex",value:function(){return this.segIndex}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();GeometryLocation.INSIDE_AREA=-1;var PointExtracter=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.pts=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.pts=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"filter",value:function(e){e instanceof Point&&this.pts.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryFilter]}}],[{key:"getPoints",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return a instanceof Point?Collections.singletonList(a):e.getPoints(a,new ArrayList)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];return a instanceof Point?i.add(a):a instanceof GeometryCollection&&a.apply(new e(i)),i}.apply(void 0,n)}};return a.apply(this,n)}}]),e}(),ConnectedElementLocationFilter=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.locations=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.locations=a}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"filter",value:function(e){(e instanceof Point||e instanceof LineString||e instanceof Polygon)&&this.locations.add(new GeometryLocation(e,0,e.getCoordinate()))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryFilter]}}],[{key:"getLocations",value:function(t){var n=new ArrayList;return t.apply(new e(n)),n}}]),e}(),DistanceOp$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.geom=null,t.terminateDistance=0,t.ptLocator=new PointLocator,t.minDistanceLocation=null,t.minDistance=Double.MAX_VALUE}();var i=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1];o.call(t,a,i,0)}.apply(void 0,n);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];t.geom=new Array(2),t.geom[0]=a,t.geom[1]=i,t.terminateDistance=o}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"computeContainmentDistance",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=new Array(2);return e.computeContainmentDistance(0,a),e.minDistance<=e.terminateDistance?null:void e.computeContainmentDistance(1,a)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=1-a,s=PolygonExtracter.getPolygons(e.geom[a]);if(s.size()>0){var u=ConnectedElementLocationFilter.getLocations(e.geom[o]);if(e.computeContainmentDistance(u,s,i),e.minDistance<=e.terminateDistance)return e.minDistanceLocation[o]=i[0],e.minDistanceLocation[a]=i[1],null}}.apply(void 0,n);case 3:if(n[2]instanceof Array&&n[0].interfaces_&&n[0].interfaces_.indexOf(List)>-1&&n[1].interfaces_&&n[1].interfaces_.indexOf(List)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var a=n[0],i=n[1],o=n[2],s=0;s<a.size();s++)for(var u=a.get(s),l=0;l<i.size();l++)if(e.computeContainmentDistance(u,i.get(l),o),e.minDistance<=e.terminateDistance)return null}.apply(void 0,n);if(n[2]instanceof Array&&n[0]instanceof GeometryLocation&&n[1]instanceof Polygon)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=a.getCoordinate();return Location.EXTERIOR!==e.ptLocator.locate(s,i)?(e.minDistance=0,o[0]=a,o[1]=new GeometryLocation(i,s),null):void 0}.apply(void 0,n)}};return a.apply(this,n)}},{key:"computeMinDistanceLinesPoints",value:function(e,t,n){for(var r=0;r<e.size();r++)for(var a=e.get(r),i=0;i<t.size();i++){var o=t.get(i);if(this.computeMinDistance(a,o,n),this.minDistance<=this.terminateDistance)return null}}},{key:"computeFacetDistance",value:function(){var e=new Array(2),t=LinearComponentExtracter.getLines(this.geom[0]),n=LinearComponentExtracter.getLines(this.geom[1]),r=PointExtracter.getPoints(this.geom[0]),a=PointExtracter.getPoints(this.geom[1]);return this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this.minDistance<=this.terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,a,e),this.updateMinDistance(e,!1),this.minDistance<=this.terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,r,e),this.updateMinDistance(e,!0),this.minDistance<=this.terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistancePoints(r,a,e),void this.updateMinDistance(e,!1))))}},{key:"nearestLocations",value:function(){return this.computeMinDistance(),this.minDistanceLocation}},{key:"updateMinDistance",value:function(e,t){return null===e[0]?null:void(t?(this.minDistanceLocation[0]=e[1],this.minDistanceLocation[1]=e[0]):(this.minDistanceLocation[0]=e[0],this.minDistanceLocation[1]=e[1]))}},{key:"nearestPoints",value:function(){this.computeMinDistance();var e=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return e}},{key:"computeMinDistance",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return null!==e.minDistanceLocation?null:(e.minDistanceLocation=new Array(2),e.computeContainmentDistance(),e.minDistance<=e.terminateDistance?null:void e.computeFacetDistance())}.apply(void 0,n);case 3:if(n[2]instanceof Array&&n[0]instanceof LineString&&n[1]instanceof Point)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];if(a.getEnvelopeInternal().distance(i.getEnvelopeInternal())>e.minDistance)return null;for(var s=a.getCoordinates(),u=i.getCoordinate(),l=0;l<s.length-1;l++){var c=CGAlgorithms.distancePointLine(u,s[l],s[l+1]);if(c<e.minDistance){e.minDistance=c;var g=new LineSegment(s[l],s[l+1]),h=g.closestPoint(u);o[0]=new GeometryLocation(a,l,h),o[1]=new GeometryLocation(i,0,u)}if(e.minDistance<=e.terminateDistance)return null}}.apply(void 0,n);if(n[2]instanceof Array&&n[0]instanceof LineString&&n[1]instanceof LineString)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2];if(a.getEnvelopeInternal().distance(i.getEnvelopeInternal())>e.minDistance)return null;for(var s=a.getCoordinates(),u=i.getCoordinates(),l=0;l<s.length-1;l++)for(var c=0;c<u.length-1;c++){var g=CGAlgorithms.distanceLineLine(s[l],s[l+1],u[c],u[c+1]);if(g<e.minDistance){e.minDistance=g;var h=new LineSegment(s[l],s[l+1]),f=new LineSegment(u[c],u[c+1]),y=h.closestPoints(f);o[0]=new GeometryLocation(a,l,y[0]),o[1]=new GeometryLocation(i,c,y[1])}if(e.minDistance<=e.terminateDistance)return null}}.apply(void 0,n)}};return a.apply(this,n)}},{key:"computeMinDistancePoints",value:function(e,t,n){for(var r=0;r<e.size();r++)for(var a=e.get(r),i=0;i<t.size();i++){var o=t.get(i),s=a.getCoordinate().distance(o.getCoordinate());if(s<this.minDistance&&(this.minDistance=s,n[0]=new GeometryLocation(a,0,a.getCoordinate()),n[1]=new GeometryLocation(o,0,o.getCoordinate())),this.minDistance<=this.terminateDistance)return null}}},{key:"distance",value:function(){if(null===this.geom[0]||null===this.geom[1])throw new IllegalArgumentException$1("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)}},{key:"computeMinDistanceLines",value:function(e,t,n){for(var r=0;r<e.size();r++)for(var a=e.get(r),i=0;i<t.size();i++){var o=t.get(i);if(this.computeMinDistance(a,o,n),this.minDistance<=this.terminateDistance)return null}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"distance",value:function(t,n){var r=new e(t,n);return r.distance()}},{key:"isWithinDistance",value:function(t,n,r){var a=new e(t,n,r);return a.distance()<=r}},{key:"nearestPoints",value:function(t,n){var r=new e(t,n);return r.nearestPoints()}}]),e}(),RectangleContains$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.rectEnv=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.rectEnv=a.getEnvelopeInternal()}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"isContainedInBoundary",value:function(e){if(e instanceof Polygon)return!1;if(e instanceof Point)return this.isPointContainedInBoundary(e);if(e instanceof LineString)return this.isLineStringContainedInBoundary(e);for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);if(!this.isContainedInBoundary(n))return!1}return!0}},{key:"isLineSegmentContainedInBoundary",value:function(e,t){if(e.equals(t))return this.isPointContainedInBoundary(e);if(e.x===t.x){if(e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX())return!0}else if(e.y===t.y&&(e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()))return!0;return!1}},{key:"isLineStringContainedInBoundary",value:function(e){for(var t=e.getCoordinateSequence(),n=new Coordinate,r=new Coordinate,a=0;a<t.size()-1;a++)if(t.getCoordinate(a,n),t.getCoordinate(a+1,r),!this.isLineSegmentContainedInBoundary(n,r))return!1;return!0}},{key:"isPointContainedInBoundary",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof Point)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return e.isPointContainedInBoundary(a.getCoordinate())}.apply(void 0,n);if(n[0]instanceof Coordinate)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0];return a.x===e.rectEnv.getMinX()||a.x===e.rectEnv.getMaxX()||a.y===e.rectEnv.getMinY()||a.y===e.rectEnv.getMaxY()}.apply(void 0,n)}};return a.apply(this,n)}},{key:"contains",value:function(e){return this.rectEnv.contains(e.getEnvelopeInternal())?this.isContainedInBoundary(e)?!1:!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"contains",value:function(t,n){var r=new e(t);return r.contains(n)}}]),e}(),RectangleLineIntersector=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.li=new RobustLineIntersector,t.rectEnv=null,t.diagUp0=null,t.diagUp1=null,t.diagDown0=null,t.diagDown1=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.rectEnv=a,t.diagUp0=new Coordinate(a.getMinX(),a.getMinY()),t.diagUp1=new Coordinate(a.getMaxX(),a.getMaxY()),t.diagDown0=new Coordinate(a.getMinX(),a.getMaxY()),t.diagDown1=new Coordinate(a.getMaxX(),a.getMinY())}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"intersects",value:function(e,t){var n=new Envelope(e,t);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(e))return!0;if(this.rectEnv.intersects(t))return!0;if(e.compareTo(t)>0){var r=e;e=t,t=r}var a=!1;return t.y>e.y&&(a=!0),a?this.li.computeIntersection(e,t,this.diagDown0,this.diagDown1):this.li.computeIntersection(e,t,this.diagUp0,this.diagUp1),this.li.hasIntersection()?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),ShortCircuitedGeometryVisitor=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t._isDone=!1}();var i=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return i.apply(this,r)}return _createClass(e,[{key:"applyTo",value:function(e){for(var t=0;t<e.getNumGeometries()&&!this._isDone;t++){var n=e.getGeometryN(t);if(n instanceof GeometryCollection)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),RectangleIntersects$1=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,e),function(){t.rectangle=null,t.rectEnv=null}();var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var a=n[0];t.rectangle=a,t.rectEnv=a.getEnvelopeInternal()}.apply(void 0,n)}};return i.apply(this,r)}return _createClass(e,[{key:"intersects",value:function(e){if(!this.rectEnv.intersects(e.getEnvelopeInternal()))return!1;var t=new EnvelopeIntersectsVisitor(this.rectEnv);if(t.applyTo(e),t.intersects())return!0;var n=new GeometryContainsPointVisitor(this.rectangle);if(n.applyTo(e),n.containsPoint())return!0;var r=new RectangleIntersectsSegmentVisitor(this.rectangle);return r.applyTo(e),r.intersects()?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"intersects",value:function(t,n){var r=new e(t);return r.intersects(n)}}]),e}(),EnvelopeIntersectsVisitor=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){i.rectEnv=null,i._intersects=!1}();var o=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];i.rectEnv=r}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"isDone",value:function(){return this._intersects===!0}},{key:"visit",value:function(e){var t=e.getEnvelopeInternal();return this.rectEnv.intersects(t)?this.rectEnv.contains(t)?(this._intersects=!0,null):t.getMinX()>=this.rectEnv.getMinX()&&t.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):t.getMinY()>=this.rectEnv.getMinY()&&t.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null}},{key:"intersects",value:function(){return this._intersects}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(ShortCircuitedGeometryVisitor),GeometryContainsPointVisitor=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){i.rectSeq=null,
i.rectEnv=null,i._containsPoint=!1}();var o=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];i.rectSeq=r.getExteriorRing().getCoordinateSequence(),i.rectEnv=r.getEnvelopeInternal()}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"isDone",value:function(){return this._containsPoint===!0}},{key:"visit",value:function(e){if(!(e instanceof Polygon))return null;var t=e.getEnvelopeInternal();if(!this.rectEnv.intersects(t))return null;for(var n=new Coordinate,r=0;4>r;r++)if(this.rectSeq.getCoordinate(r,n),t.contains(n)&&SimplePointInAreaLocator.containsPointInPolygon(n,e))return this._containsPoint=!0,null}},{key:"containsPoint",value:function(){return this._containsPoint}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(ShortCircuitedGeometryVisitor),RectangleIntersectsSegmentVisitor=function(e){function t(){for(var e,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));!function(){i.rectEnv=null,i.rectIntersector=null,i.hasIntersection=!1,i.p0=new Coordinate,i.p1=new Coordinate}();var o=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];i.rectEnv=r.getEnvelopeInternal(),i.rectIntersector=new RectangleLineIntersector(i.rectEnv)}.apply(void 0,t)}};return e=o.apply(i,r),_possibleConstructorReturn(i,e)}return _inherits(t,e),_createClass(t,[{key:"intersects",value:function(){return this.hasIntersection}},{key:"isDone",value:function(){return this.hasIntersection===!0}},{key:"visit",value:function(e){var t=e.getEnvelopeInternal();if(!this.rectEnv.intersects(t))return null;var n=LinearComponentExtracter.getLines(e);this.checkIntersectionWithLineStrings(n)}},{key:"checkIntersectionWithLineStrings",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}}},{key:"checkIntersectionWithSegments",value:function(e){for(var t=e.getCoordinateSequence(),n=1;n<t.size();n++)if(t.getCoordinate(n-1,this.p0),t.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(ShortCircuitedGeometryVisitor);!function(){patch()}();var jsts={geom:{Coordinate:Coordinate,GeometryFactory:GeometryFactory,Geometry:Geometry,Point:Point,LineString:LineString,Polygon:MultiPolygon,GeometryCollection:GeometryCollection,MultiPoint:MultiPoint,MultiLineString:MultiLineString,MultiPolygon:MultiPolygon},io:{GeoJSONReader:GeoJSONReader,GeoJSONWriter:GeoJSONWriter,WKTReader:WKTReader,WKTWriter:WKTWriter$1,olParser:olParser}};module.exports=jsts;
