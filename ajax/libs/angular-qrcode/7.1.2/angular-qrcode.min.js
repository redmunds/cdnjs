"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="monospaced.qrcode"),angular.module("monospaced.qrcode",[]).directive("qrcode",["$window",function(e){var o=!!e.CanvasRenderingContext2D,r={L:"Low",M:"Medium",Q:"Quartile",H:"High"},n=function(e,o,r,n,t){for(var i=0;i<r;i++)for(var a=0;a<r;a++){var d=Math.ceil((a+1)*n)-Math.floor(a*n),c=Math.ceil((i+1)*n)-Math.floor(i*n);e.fillStyle=o.isDark(i,a)?t.foreground:t.background,e.fillRect(Math.round(a*n),Math.round(i*n),d,c)}};return{restrict:"E",template:'<canvas class="qrcode"></canvas>',link:function(e,t,i){var a,d,c,f,u,s,l,g,v,h=t[0],m=t.find("canvas"),p=m[0],b=o?p.getContext("2d"):null,M="download"in i,k=i.href,q=M||k?document.createElement("a"):"",w=/^\s+|\s+$/g,$={foreground:"#000",background:"#fff"},C=function(e){$.foreground=e||$.foreground},x=function(e){$.background=e||$.background},L=function(e){d=Math.max(1,Math.min(parseInt(e,10),40))||5},D=function(e){c=e in r?e:"M"},y=function(e){if(e){f=e.replace(w,""),g=qrcode(d,c),g.addData(f);try{g.make()}catch(e){return void(a=e.message)}a=!1,s=g.getModuleCount()}},H=function(e){u=parseInt(e,10)||2*s,l=u/s,p.width=p.height=u},R=function(){if(g){if(a)return q&&(q.removeAttribute("download"),q.title="",q.href="#_"),o||(h.innerHTML='<img src width="'+u+'"height="'+u+'"class="qrcode">'),void e.$emit("qrcode:error",a);if(M&&(h.download="qrcode.png",h.title="Download QR code"),o){if(n(b,g,s,l,$),M)return void(h.href=p.toDataURL("image/png"))}else if(h.innerHTML=g.createImgTag(l,0),v=t.find("img"),v.addClass("qrcode"),M)return void(h.href=v[0].src);k&&(h.href=k)}};q&&(q.className="qrcode-link",m.wrap(q),h=h.firstChild),C(i.color),x(i.background),L(i.version),D(i.errorCorrectionLevel),H(i.size),i.$observe("version",function(e){e&&(L(e),y(f),H(u),R())}),i.$observe("errorCorrectionLevel",function(e){e&&(D(e),y(f),H(u),R())}),i.$observe("data",function(e){e&&(y(e),H(u),R())}),i.$observe("size",function(e){e&&(H(e),R())}),i.$observe("color",function(e){e&&(C(e),R())}),i.$observe("background",function(e){e&&(x(e),R())}),i.$observe("href",function(e){e&&(k=e,R())})}}}]);
//# sourceMappingURL=angular-qrcode.min.js.map