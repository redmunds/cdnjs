!function($){$.Mosaic=function(t,e){var i,a=this;a.el=t,a.$el=$(t),a.$el.data("Mosaic",a);var s;a.init=function(){a.options=i=$.extend({},$.Mosaic.defaults,e),$(a.el).addClass("mosaic"),a.fit(),i.refitOnResize&&$(window).on("resize",null,null,function(){a.fit()})},a.getItems=function(){return $("> div, > a, > img",a.el)},a.getItemAtIndex=function(t){return!!a.getItems()[t]&&$(a.getItems()[t])},a.getItemsSubset=function(t,e){var i=a.getItems();return!(t>i.length)&&(t+e>i.length&&(e=i.length-t),i.slice(t,t+e))},a.isLastItemsSubset=function(t,e){var i=a.getItems();return t>i.length||t+e>i.length},a.getItemAspectRatio=function(t){return $(t).data("aspect-ratio")?$(t).data("aspect-ratio"):$(t).attr("width")&&$(t).attr("height")?$(t).attr("width")/$(t).attr("height"):i.defaultAspectRatio},a.getItemWidthForGivenHeight=function(t,e){return e*a.getItemAspectRatio(t)},a.getItemHeightForGivenWidth=function(t,e){return e/a.getItemAspectRatio(t)},a.setItemSizeByGivenHeight=function(t,e){var s=Math.floor(a.getItemWidthForGivenHeight(t,e));if($(t).css("height",Math.floor(e)).css("width",s),i.highResImagesWidthThreshold)if(s>i.highResImagesWidthThreshold){var r=$(t).data("high-res-background-image-url");r&&!$(t).data("low-res-background-image-url")&&($(t).data("low-res-background-image-url",$(t).css("background-image")),$(t).css("background-image",'url("'+r+'")'),$(t).addClass("highRes"));var o=$(t).data("high-res-image-src");o&&!$(t).data("low-res-image-src")&&($(t).data("low-res-image-src",$(t).attr("src")),$(t).attr("src",o),$(t).addClass("highRes"))}else{var n=$(t).data("low-res-background-image-url");n&&($(t).css("background-image",n),$(t).data("low-res-background-image-url",!1),$(t).removeClass("highRes"));var c=$(t).data("low-res-image-src");c&&($(t).attr("src",c),$(t).data("low-res-image-src",!1),$(t).removeClass("highRes"))}return s},a.calculateHeightToFit=function(t){var e=0;return t.each(function(){e+=parseFloat(a.getItemAspectRatio(this))}),s/e},a.retrieveBaseWidth=function(){s=$(a.el).width()},a.fit=function(){a.retrieveBaseWidth();for(var t,e,s=1,r=0,o=!1;;){if(t=a.getItemsSubset(r,s),a.isLastItemsSubset(r,s)){t.length&&a.fitItems(t);break}e=a.calculateHeightToFit(t),e>i.maxRowHeight?s++:(a.fitItems(t),r+=s,s=1,o=!0)}o||a.fitItems(a.getItems())},a.fitItems=function(t){var e=a.calculateHeightToFit(t);if(e>i.maxRowHeight)switch(i.maxRowHeightPolicy){case"skip":return;case"crop":e=i.maxRowHeight;break;case"oversize":}var r=0;t.each(function(){r+=a.setItemSizeByGivenHeight(this,e)}),r<s&&t.last().css("width",t.last().width()+(s-r))},a.init()},$.Mosaic.defaults={maxRowHeight:400,refitOnResize:!0,defaultAspectRatio:1,maxRowHeightPolicy:"oversize",highResImagesWidthThreshold:350},$.fn.Mosaic=function(options,params){return this.each(function(){var me=$(this).data("Mosaic");(typeof options).match("object|undefined")?new $.Mosaic(this,options):eval("me."+options)(params)})}}(jQuery);
//# sourceMappingURL=jquery.mosaic.min.js.map