(function(a){a.sceditor=function(i,n){var o=this;var D=a(i);var w=i;var k=null;var J=null;var v=null;var u=null;var r=null;var g=null;var h=false;var q=[];var d=null;var j=[];var l=null;var E=null;var B,c,f,b,G,t,y,p,C,A,e,x,s,I,H,m,F,z;o.commands={bold:{execCommand:"bold",tooltip:"Bold"},italic:{execCommand:"italic",tooltip:"Italic"},underline:{execCommand:"underline",tooltip:"Underline"},strike:{execCommand:"strikethrough",tooltip:"Strikethrough"},subscript:{execCommand:"subscript",tooltip:"Subscript"},superscript:{execCommand:"superscript",tooltip:"Superscript"},left:{execCommand:"justifyleft",tooltip:"Align left"},center:{execCommand:"justifycenter",tooltip:"Center"},right:{execCommand:"justifyright",tooltip:"Align right"},justify:{execCommand:"justifyfull",tooltip:"Justify"},font:{execFunction:function(L){var O=o.options.fonts.split(",");var N=a("<span />");var K=function(P){o.execCommand("fontname",a(this).data("sceditor-font"));c();o.focus();P.preventDefault()};for(var M=0;M<O.length;M++){N.append(a('<a class="sceditor-font-option" href="#"><font face="'+O[M]+'">'+O[M]+"</font></a>").data("sceditor-font",O[M]).click(K))}f(L,"font-picker",N)},tooltip:"Font Name"},size:{execFunction:function(L){var N=a("<span />");var K=function(O){o.execCommand("fontsize",a(this).data("sceditor-fontsize"));c();o.focus();O.preventDefault()};for(var M=1;M<=7;M++){N.append(a('<a class="sceditor-fontsize-option" href="#"><font size="'+M+'">'+M+"</font></a>").data("sceditor-fontsize",M).click(K))}f(L,"fontsize-picker",N)},tooltip:"Font Size"},color:{execFunction:function(M){var L={r:255,g:255,b:255};var R=a("<span />");var P=o.options.colors?o.options.colors.split("|"):new Array(21);var Q=[];var T=0;for(var O=0;O<P.length;++O){var K=(typeof P[O]!="undefined")?P[O].split(","):new Array(21);Q[T++]='<div class="sceditor-color-column">';for(var S=0;S<K.length;++S){var N=(typeof K[S]!="undefined")?K[S]:"#"+L.r.toString(16)+L.g.toString(16)+L.b.toString(16);Q[T++]='<a href="#" class="sceditor-color-option" style="background-color: '+N+'"></a>';if(S%5===0){L={r:L.r,g:L.g-51,b:255}}else{L={r:L.r,g:L.g,b:L.b-51}}}Q[T++]="</div>";if(O%5===0){L={r:L.r-51,g:255,b:255}}else{L={r:L.r,g:255,b:255}}}R.append(Q.join("")).find("a").click(function(U){o.execCommand("forecolor",a(this).css("background-color"));c();o.focus();U.preventDefault()});f(M,"color-picker",R)},tooltip:"Font Color"},removeformat:{execCommand:"removeformat",tooltip:"Remove Formatting"},cut:{execCommand:"cut",tooltip:"Cut",errorMessage:"Your browser dose not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{execCommand:"copy",tooltip:"Copy",errorMessage:"Your browser dose not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{execCommand:"paste",tooltip:"Paste",errorMessage:"Your browser dose not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{execFunction:function(K){var L=a('<form><div><label for="txt">Paste your text inside the followingbox:</label> <textarea cols="20" rows="7" id="txt"></textarea></div></form>').submit(function(){return false});L.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(M){b(a(this).parent("form").find("#txt").val());c();o.focus();M.preventDefault()}));f(K,"pastetext",L)},tooltip:"Paste Text"},bulletlist:{execCommand:"insertunorderedlist",tooltip:"Bullet list"},orderedlist:{execCommand:"insertorderedlist",tooltip:"Numbered list"},undo:{execCommand:"undo",tooltip:"Undo"},redo:{execCommand:"redo",tooltip:"Redo"},table:{execFunction:function(K){var L=a('<form><div><label for="rows">Rows:</label><input type="text" id="rows" value="2" /></div><div><label for="cols">Cols:</label><input type="text" id="cols" value="2" /></div></form>').submit(function(){return false});L.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(Q){var O=a(this).parent("form").find("#rows").val()-0;var P=a(this).parent("form").find("#cols").val()-0;var N="<table>";for(var R=0;R<O;R++){N+="<tr>";for(var M=0;M<P;M++){if(a.browser.msie){N+="<td></td>"}else{N+='<td><br class="sceditor-ignore" /></td>'}}N+="</tr>"}N+="</table>";G(N);c();o.focus();Q.preventDefault()}));f(K,"inserttable",L)},tooltip:"Insert a table"},horizontalrule:{execCommand:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{execFunction:function(K){G("<code>","<br /></code>")},tooltip:"Code"},image:{execFunction:function(K){var L=a('<form><div><label for="link">URL:</label> <input type="text" id="image" value="http://" /></div><div><label for="width">Width (optional):</label> <input type="text" id="width" size="2" /></div><div><label for="height">Height (optional):</label> <input type="text" id="height" size="2" /></div></form>').submit(function(){return false});L.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(Q){var N=a(this).parent("form");var R=N.find("#image").val();var O="";var P,M;if((P=N.find("#width").val())!==""){O+=' width="'+P+'"'}if((M=N.find("#height").val())!==""){O+=' height="'+M+'"'}if(R!==""&&R!=="http://"){G("<img"+O+' src="'+R+'" />')}c();o.focus();Q.preventDefault()}));f(K,"insertimage",L)},tooltip:"Insert an image"},email:{execFunction:function(K){var L=a('<form><div><label for="email">E-mail:</label> <input type="text" id="email" value="" /></div></form>').submit(function(){return false});L.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(M){var N=a(this).parent("form").find("#email").val();if(N!==""){o.focus();if(y().type=="None"||y().type=="Caret"){G('<a href="mailto:'+N+'">'+N+"</a>")}else{o.execCommand("createlink","mailto:"+N)}}c();o.focus();M.preventDefault()}));f(K,"insertemail",L)},tooltip:"Insert an email"},link:{execFunction:function(K){var L=a('<form><div><label for="link">URL:</label> <input type="text" id="link" value="http://" /></div></form>').submit(function(){return false});L.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(M){var N=a(this).parent("form").find("#link").val();if(N!==""&&N!=="http://"){o.focus();if(y().type=="None"||y().type=="Caret"){G('<a href="'+N+'">'+N+"</a>")}else{o.execCommand("createlink",N)}}c();o.focus();M.preventDefault()}));f(K,"insertlink",L)},tooltip:"Insert a link"},unlink:{execCommand:"unlink",tooltip:"Unlink"},quote:{execFunction:function(K){G("<blockquote>","<br /></blockquote>")},tooltip:"Insert a Quote"},emoticon:{execFunction:function(M){var O=a("<div />");var K=a("<div />");var L=function(Q,P){K.append(a("<img />",{src:P,alt:Q,click:function(R){G('<img src="'+a(this).attr("src")+'" data-sceditor-emoticon="'+a(this).attr("alt")+'" />');c();o.focus();R.preventDefault()}}));if(K.children().length>3){O.append(K);K=a("<div />")}};a.each(o.options.emoticons.dropdown,L);if(K.children().length>0){O.append(K)}if(typeof o.options.emoticons.more!=="undefined"){var N=a('<a class="sceditor-more">More</a>').click(function(){var P=a.extend({},o.options.emoticons.dropdown,o.options.emoticons.more);O=a("<div />");K=a("<div />");a.each(P,L);if(K.children().length>0){O.append(K)}f(M,"insertemoticon",O)});O.append(N)}f(M,"insertemoticon",O)},keyPress:function(M){var K=null,N=-1;if(u.contentWindow&&u.contentWindow.getSelection){K=u.contentWindow.getSelection().getRangeAt(0)}if(K===null||!K.startContainer){return}if(E===null){E=a.extend({},o.options.emoticons.more,o.options.emoticons.dropdown)}if(l===null){l=0;a.each(E,function(P,O){if(P.length>l){l=P.length}})}var L=K.startContainer.textContent.substr(0,K.startOffset)+String.fromCharCode(M.which)+K.startContainer.textContent.substr(K.startOffset,l);a.each(E,function(P,O){if((N=L.indexOf(P))>-1){K=K.cloneRange();K.setStart(K.startContainer,N);K.setEnd(K.startContainer,N+(P.length-1));K.deleteContents();var Q=z().createElement("div");Q.innerHTML='<img src="'+O+'" data-sceditor-emoticon="'+P+'" />';Q=Q.children[0];K.insertNode(Q);K=K.cloneRange();K.setStartAfter(Q);u.contentWindow.getSelection().removeAllRanges();u.contentWindow.getSelection().addRange(K);M.preventDefault();M.stopPropagation();return false}})},tooltip:"Insert an emoticon"},youtube:{execFunction:function(K){var L=a('<form><div><label for="link">Video URL:</label> <input type="text" id="link" value="http://" /></div></form>').submit(function(){return false});L.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(M){var N=a(this).parent("form").find("#link").val();if(N!==""&&N!=="http://"){N=N.replace(/^[^v]+v.(.{11}).*/,"$1");G('<iframe width="560" height="315" src="http://www.youtube.com/embed/'+N+'" data-youtube-id="'+N+'" frameborder="0" allowfullscreen></iframe>')}c();o.focus();M.preventDefault()}));f(K,"insertlink",L)},tooltip:"Insert a YouTube video"},date:{execFunction:function(M){var L=new Date();var N=L.getYear();var O=L.getMonth();var K=L.getDate();if(N<2000){N=1900+N}if(O<10){O="0"+O}if(K<10){K="0"+K}G("<span>"+N+"-"+O+"-"+K+"</span>")},tooltip:"Insert current date"},time:{execFunction:function(M){var L=new Date();var K=L.getHours();var O=L.getMinutes();var N=L.getSeconds();if(K<10){K="0"+K}if(O<10){O="0"+O}if(N<10){N="0"+N}G("<span>"+K+":"+O+":"+N+"</span>")},tooltip:"Insert current time"},print:{execCommand:"print",tooltip:"Print"},source:{execFunction:function(K){o.toggleTextMode()},tooltip:"View source"}};B=function(){D.data("sceditor",o);o.options=a.extend({},a.sceditor.defaultOptions,n);if(o.options.height!==null){D.height(o.options.height)}if(o.options.width!==null){D.width(o.options.width)}k=a("<div />",{"class":"sceditor-container",height:D.outerHeight(),width:D.outerWidth()});D.after(k);I();s();H();D.parents("form").submit(o.updateFormTextareaValue);a(document).click(m);var K=D.hide().val();if(o.options.getTextHandler){K=o.options.getTextHandler(K)}o.setWysiwygEditorValue(K);F()};s=function(){var L,M;var K=D.height()-(o.options.toolbarContainer===null?J.outerHeight():0);var N=D.width();r=a("<textarea></textarea>",{height:K,width:N}).hide();v=a("<iframe></iframe>",{frameborder:0,height:K,width:N});if(window.location.protocol==="https:"){v.attr("src","javascript:false")}k.append(v).append(r);u=v[0];L=v.height();M=v.width();v.height(L+((L-v.outerHeight(true))/2));v.width(M+((M-v.outerWidth(true))/2));L=r.height();M=r.width();r.height(L+((L-r.outerHeight(true))/2));r.width(M+((M-r.outerWidth(true))/2));z().designMode="On";z().open();z().write('<html><head><link rel="stylesheet" type="text/css" href="'+o.options.style+'" /></head><body></body></html>');z().close();a(z()).find("body").keypress(e);a(z()).keypress(e);a(z()).mousedown(x);a(z()).bind("beforedeactivate keypress",A)};I=function(){var M=function(R){C(a(this),o.commands[a(this).data("sceditor-command")]);R.preventDefault()};J=a('<div class="sceditor-toolbar" />');var L=o.options.toolbar.split("|");for(var O=0;O<L.length;O++){var Q=a('<div class="sceditor-group" />');var P=L[O].split(",");for(var K=0;K<P.length;K++){if(!o.commands.hasOwnProperty(P[K])){continue}var N=a('<a class="sceditor-button sceditor-button-'+P[K]+' " unselectable="on"><div /></a>');if(o.commands[P[K]].hasOwnProperty("tooltip")){N.attr("title",o.commands[P[K]].tooltip)}N.data("sceditor-command",P[K]);N.click(M);Q.append(N)}J.append(Q)}if(o.options.toolbarContainer===null){k.append(J)}else{a(o.options.toolbarContainer).append(J)}};H=function(){a.each(o.commands,function(L,K){if(typeof K.keyPress!="undefined"){q.push(K.keyPress)}})};F=function(){var K=a.extend({},o.options.emoticons.more,o.options.emoticons.dropdown);a.each(K,function(N,L){var M=document.createElement("img");M.src=L;j.push(M)})};f=function(L,N,M){if(g!==null){c()}var K=L.position();g=a('<div class="sceditor-dropdown sceditor-'+N+'" />').css({top:K.top,left:K.left}).append(M);k.after(g);h=true;g.click(function(O){O.stopPropagation()})};m=function(){if(!h){c()}h=false};c=function(){if(g!==null){g.remove();g=null}};z=function(){if(u.contentDocument){return u.contentDocument}if(u.contentWindow&&u.contentWindow.document){return u.contentWindow.document}if(u.document){return u.document}return null};G=function(L,N){o.focus();if(a(t()).is("code")||a(t()).parents("code").length!==0){return}if(typeof N!=="undefined"){L=L+o.getWysiwygSelectedHtml()+N}if(z().getSelection){var K=y();var M=z().createElement("div");M.innerHTML=L;M=M.children[0];K.deleteContents();K.insertNode(M);K=K.cloneRange();K.setStartAfter(M);u.contentWindow.getSelection().removeAllRanges();u.contentWindow.getSelection().addRange(K)}else{if(z().selection&&z().selection.createRange){z().selection.createRange().pasteHTML(L)}else{o.execCommand("insertHtml",L)}}d=null};b=function(K){K=K.replace(/&/g,"&amp;");K=K.replace(/</g,"&lt;");K=K.replace(/>/g,"&gt;");K=K.replace(/ /g,"&nbsp;");K=K.replace(/\r\n|\r/g,"\n");K=K.replace(/\n/g,"<br />");G(K)};y=function(){var K;if(u.contentWindow&&u.contentWindow.getSelection){K=u.contentWindow.getSelection()}else{if(z().selection){K=z().selection}}if(K.getRangeAt){return K.getRangeAt(0)}else{if(K.createRange){return K.createRange()}}return null};o.getWysiwygSelectedHtml=function(){var L=y();if(L===null){return""}if(document.selection&&document.selection.createRange){if(typeof L.htmlText!="undefined"){return L.htmlText}else{if(L.length>=1){return L.item(0).outerHTML}}}if(window.XMLSerializer){var K="";a(L.cloneContents().childNodes).each(function(){K+=new XMLSerializer().serializeToString(this)});return K}};t=function(){var K=y();if(K===null){return null}if(document.selection&&document.selection.createRange){return K.parentElement()}if(window.getSelection){return K.commonAncestorContainer}};o.getWysiwygEditorValue=function(L){var K=v.contents().find("body").html();if(L!==false&&o.options.getHtmlHandler){K=o.options.getHtmlHandler(K,v.contents().find("body"))}return K};o.getTextareaValue=function(K){var L=r.val();if(K!==false&&o.options.getTextHandler){L=o.options.getTextHandler(L)}return L};o.setWysiwygEditorValue=function(K){z().body.innerHTML=p(K)};o.setTextareaValue=function(K){r.val(K)};o.updateFormTextareaValue=function(){if(r.is(":visible")){D.val(o.getTextareaValue(false))}else{D.val(o.getWysiwygEditorValue())}};p=function(K){var L=a.extend({},o.options.emoticons.more,o.options.emoticons.dropdown);a.each(L,function(N,M){var O=N.replace(/[\$\?\[\]\.\*\(\)\|]/g,"\\$&").replace("<","&lt;").replace(">","&gt;")+"(?=([^\\<\\>]*?<(?!/code)|[^\\<\\>]*?$))";K=K.replace(new RegExp(O,"g"),'<img src="'+M+'" data-sceditor-emoticon="'+N+'" />')});return K};o.toggleTextMode=function(){if(r.is(":visible")){o.setWysiwygEditorValue(o.getTextareaValue())}else{o.setTextareaValue(o.getWysiwygEditorValue())}d=null;r.toggle();v.toggle()};C=function(K,L){if(L.hasOwnProperty("execFunction")){L.execFunction(K)}else{o.execCommand(L.execCommand,L.hasOwnProperty("execParam")?L.execParam:null)}};o.focus=function(){u.contentWindow.focus();if(d!==null){if(window.document.createRange){window.getSelection().addRange(d)}else{if(window.document.selection){d.select()}}}};A=function(){if(!a.browser.msie){return}d=y()};o.execCommand=function(N,M){var K=false;o.focus();if(a(t()).is("code")||a(t()).parents("code").length!==0){return}if(z()){try{K=z().execCommand(N,false,M)}catch(L){}}if(!K&&typeof o.commands[N]!="undefined"&&typeof o.commands[N].errorMessage!="undefined"){alert(o.commands[N].errorMessage)}};e=function(L){c();if(a(t()).is("code")||a(t()).parents("code").length!==0){return}var K=q.length;while(K--){q[K](L)}};x=function(K){c()};B()};a.sceditor.defaultOptions={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,paste,pastetext|bulletlist,orderedlist|undo,redo|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|print,source",style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:null,emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png",":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,getHtmlHandler:null,getTextHandler:null,toolbarContainer:null};a.fn.sceditor=function(b){return this.each(function(){(new a.sceditor(this,b))})}})(jQuery);(function(a){a.sceditorBBCodePlugin=function(e,m){var c=this;var l,g,h,i,d,k,f;c.bbcodes={b:{styles:{"font-weight":["bold","bolder","401","700","800","900"]},format:"[b]{0}[/b]",html:"<strong>{0}</strong>"},i:{styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:"<em>{0}</em>"},u:{styles:{"text-decoration":["underline"]},format:"[u]{0}[/u]",html:"<u>{0}</u>"},s:{styles:{"text-decoration":["line-through"]},format:"[s]{0}[/s]",html:"<s>{0}</s>"},sub:{tags:{sub:null},format:"[sub]{0}[/sub]",html:"<sub>{0}</sub>"},sup:{tags:{sup:null},format:"[sup]{0}[/sup]",html:"<sup>{0}</sup>"},left:{styles:{"text-align":["left"]},format:"[left]{0}[/left]",html:'<div style="text-align: left">{0}</div>'},center:{styles:{"text-align":["center"]},format:"[center]{0}[/center]",html:'<div style="text-align: center">{0}</div>'},right:{styles:{"text-align":["right"]},format:"[right]{0}[/right]",html:'<div style="text-align: right">{0}</div>'},justify:{styles:{"text-align":["justify"]},format:"[justify]{0}[/justify]",html:'<div style="text-align: justify">{0}</div>'},font:{styles:{"font-family":null},format:function(n,o){if(n.css("font-family")==c.options.defaultFont){return o}return"[font="+f(n.css("font-family"))+"]"+o+"[/font]"},html:function(o,n,p){return'<font face="'+n.defaultAttr+'">'+p+"</font>"}},size:{styles:{"font-size":null},format:function(o,p){var q=o.css("fontSize");var n=1;if(q==c.options.defaultSize){return p}if(q.indexOf("px")>-1){q=q.replace("px","")-0;if(q>12){n=2}if(q>15){n=3}if(q>17){n=4}if(q>23){n=5}if(q>31){n=6}if(q>47){n=7}}else{n=q}return"[size="+n+"]"+p+"[/size]"},html:function(o,n,p){return'<font size="'+n.defaultAttr+'">'+p+"</font>"}},color:{styles:{color:null},format:function(o,p){var n=g(o.css("color"));if(n==c.options.defaultColor){return p}return"[color="+n+"]"+p+"[/color]"},html:function(o,n,p){return'<font color="'+n.defaultAttr+'">'+p+"</font>"}},ul:{tags:{ul:null},format:"[ul]{0}[/ul]",html:"<ul>{0}</ul>"},list:{html:"<ul>{0}</ul>"},ol:{tags:{ol:null},format:"[ol]{0}[/ol]",html:"<ol>{0}</ol>"},li:{tags:{li:null},format:"[li]{0}[/li]",html:"<li>{0}</li>"},"*":{html:"<li>{0}</li>"},table:{tags:{table:null},format:"[table]{0}[/table]",html:"<table>{0}</table>"},tr:{tags:{tr:null},format:"[tr]{0}[/tr]",html:"<tr>{0}</tr>"},th:{tags:{th:null},format:"[th]{0}[/th]",html:"<th>{0}</th>"},td:{tags:{td:null},format:"[td]{0}[/td]",html:'<td>{0}<br class="sceditor-ignore" /></td>'},emoticon:{tags:{img:{src:null,"data-sceditor-emoticon":null}},format:function(n,o){return n.attr("data-sceditor-emoticon")+o},html:"{0}"},horizontalrule:{tags:{hr:null},format:"[hr]{0}",html:"<hr />"},img:{tags:{img:{src:null}},format:function(n,o){if(typeof n.attr("data-sceditor-emoticon")!="undefined"){return o}var p="="+a(n).width()+"x"+a(n).height();return"[img"+p+"]"+n.attr("src")+"[/img]"},html:function(o,n,p){var r="";if(typeof n.width!="undefined"){r+=' width="'+n.width+'"'}if(typeof n.height!="undefined"){r+=' height="'+n.height+'"'}if(typeof n.defaultAttr!=="undefined"){var q=n.defaultAttr.split(/x/i);r=' width="'+q[0]+'" height="'+(q.length===2?q[1]:q[0])+'"'}return"<img "+r+' src="'+p+'" />'}},url:{tags:{a:{href:null}},format:function(n,o){if(n.attr("href").substr(0,7)=="mailto:"){return"[email="+n.attr("href").substr(7)+"]"+o+"[/email]"}return"[url="+encodeURI(n.attr("href")).replace("=","%3D")+"]"+o+"[/url]"},html:function(o,n,p){if(typeof n.defaultAttr==="undefined"){n.defaultAttr=p}return'<a href="'+n.defaultAttr+'">'+p+"</a>"}},email:{html:function(o,n,p){if(typeof n.defaultAttr==="undefined"){n.defaultAttr=p}return'<a href="mailto:'+n.defaultAttr+'">'+p+"</a>"}},quote:{tags:{blockquote:null},format:function(o,p){var n="";if(a(o).children("cite:first").length==1){n="="+a(o).children("cite:first").text();p="";a(o).children("cite:first").remove();a(o).contents().each(function(){p+=k(a(this))})}return"[quote"+n+"]"+p+"[/quote]"},html:function(o,n,p){if(typeof n.defaultAttr!=="undefined"){p="<cite>"+n.defaultAttr+"</cite>"+p}return"<blockquote>"+p+"</blockquote>"}},code:{tags:{code:null},format:"[code]{0}[/code]",html:"<code>{0}</code>"},youtube:{tags:{iframe:{"data-youtube-id":null}},format:function(n,o){if(!n.attr("data-youtube-id")){return o}return"[youtube]"+n.attr("data-youtube-id")+"[/youtube]"},html:'<iframe width="560" height="315" src="http://www.youtube.com/embed/{0}" data-youtube-id="{0}" frameborder="0" allowfullscreen></iframe>'}};var j={};var b={};l=function(){c.options=a.extend({},a.sceditor.defaultOptions,a.sceditorBBCodePlugin.defaultOptions,m);c.buildBbcodeCache();(new a.sceditor(e,a.extend({},c.options,{getHtmlHandler:c.getHtmlHandler,getTextHandler:c.getTextHandler})))};g=function(p){var o;function n(q){q=parseInt(q,10);if(isNaN(q)){return"00"}q=Math.max(0,Math.min(q,255)).toString(16);return q.length<2?"0"+q:q}if((o=p.match(/rgb\((\d+),\s*?(\d+),\s*?(\d+)\)/i))){return"#"+n(o[1])+n(o[2]-0)+n(o[3]-0)}return p};c.buildBbcodeCache=function(){a.each(c.bbcodes,function(n,o){if(typeof c.bbcodes[n].tags!="undefined"){a.each(c.bbcodes[n].tags,function(p,q){j[p]=(j[p]||{});j[p][n]=q})}if(typeof c.bbcodes[n].styles!="undefined"){a.each(c.bbcodes[n].styles,function(q,p){b[q]=(b[q]||{});b[q][n]=p})}})};h=function(o,p){var n;a.each(b,function(r,q){if(o.get(0).nodeName.toLowerCase()=="a"&&(r=="color"||r=="text-decoration")){return}else{if(o.get(0).nodeName.toLowerCase()=="code"&&(r=="font-family")){return}}n=o.css(r);if(o.parent().css(r)==n){return}a.each(q,function(t,s){if(s===null||a.inArray(n.toString(),s)>-1){if(a.isFunction(c.bbcodes[t].format)){p=c.bbcodes[t].format(o,p)}else{p=d(c.bbcodes[t].format,p)}}})});return p};i=function(o,p){var n=o.get(0).nodeName.toLowerCase();if(typeof j[n]!="undefined"){a.each(j[n],function(r,s){var q=false;if(s===null){q=true}else{a.each(s,function(u,t){if(typeof o.attr(u)==="undefined"){return}if(t!==null&&a.inArray(o.attr(u),t)<0){return}q=true;return false})}if(!q){return}if(a.isFunction(c.bbcodes[r].format)){p=c.bbcodes[r].format(o,p)}else{p=d(c.bbcodes[r].format,p)}})}if(n=="br"||n=="div"||n=="p"){p+="\n"}return p};d=function(){var n=arguments;return n[0].replace(/\{(\d+)\}/g,function(p,o){return typeof n[0-o+1]!="undefined"?n[0-o+1]:"{"+o+"}"})};f=function(n){return n.replace(/^["']+/,"").replace(/["']+$/,"")};c.getHtmlHandler=function(n,o){return k(a(o))};k=function(o){var n="";if(typeof o.get(0)==="undefined"){return""}if(o.get(0).nodeName.toLowerCase()!=="iframe"){if(o.get(0).nodeType===3){return o.get(0).nodeValue}else{if(o.is("code")){n=o.text()}else{if(o.contents().length>0){a.each(o.contents(),function(){n+=k(a(this))})}}}}if(!o.is("code")){n=h(o,n)}n=i(o,n);return n};c.getTextHandler=function(r){var q=/\[([^\[\s=]*?)(?:([^\[]*?))?\]((?:[\s\S(?!=\[\\\1)](?!\[\1))*?)\[\/(\1)\]/g;var o=/(\S+)=((?:(?:(["'])(?:\\\3|[^\3])*?\3))|(?:[^'"\s]+))/g;var n;var p=function(x,t,s,v){var u={};if(typeof s!="undefined"){var w;s=a.trim(s);if(s.charAt(0)=="="&&(s.split("=").length-1)<=1){u.defaultAttr=f(s.substr(1))}else{if(s.charAt(0)=="="){s="defaultAttr"+s}while((w=o.exec(s))){u[w[1].toLowerCase()]=f(w[2])}}}if(typeof c.bbcodes[t]=="undefined"){return x}if(typeof c.bbcodes[t].html==="function"){return c.bbcodes[t].html(t,u,v)}else{return d(c.bbcodes[t].html,v)}};r=r.replace(/&/g,"&amp;");r=r.replace(/</g,"&lt;");r=r.replace(/>/g,"&gt;");r=r.replace(/\r/g,"");r=r.replace(/(\[\/?(?:left|center|right|justify)\])\n/g,"$1");r=r.replace(/\n/g,"<br />");while(r!=n){n=r;r=r.replace(q,p)}r=r.replace(/\[hr\]/gi,"<hr>");return r.replace(/ {2}(?=([^<\>]*?<|[^<\>]*?$))/g," &nbsp;")};l()};a.sceditorBBCodePlugin.defaultOptions={defaultSize:13,defaultColor:"#111111",defaultFont:"Verdana, Arial, Helvetica, sans-serif"};a.fn.sceditorBBCodePlugin=function(b){return this.each(function(){(new a.sceditorBBCodePlugin(this,b))})}})(jQuery);