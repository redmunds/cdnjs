/*! task.js - 0.0.2 - clientside/minified */
var task=function(e){function t(r){if(n[r])return n[r].exports;var s=n[r]={exports:{},id:r,loaded:!1};return e[r].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var s=n(1),i=r(s),o=n(2),a=r(o),u=n(3),l=r(u),c={maxWorkers:navigator.hardwareConcurrency};e.exports=new l["default"](c,window.Worker?i["default"]:a["default"]),e.exports.defaults=function(e,t){var n={};return Object.keys(c).forEach(function(e){return n[e]=c[e]}),Object.keys(e).forEach(function(t){return n[t]=e[t]}),new l["default"](n,t||i["default"])}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(){var t=this;n(this,e),this.WORKER_SOURCE="function () {\n\t\tonmessage = function (event) {\n\t\t\tvar message = event.data;\n\n\t\t\tvar args = Object.keys(message).filter(function (key) {\n\t\t\t\treturn key.match(/^argument/);\n\t\t\t}).sort(function (a, b) {\n\t\t\t\treturn parseInt(a.slice(8), 10) - parseInt(b.slice(8), 10);\n\t\t\t}).map(function (key) {\n\t\t\t\treturn message[key];\n\t\t\t});\n\n\t\t\tpostMessage({id: message.id, result: eval('(' + message.func + ')').apply(null, args)});\n\t\t}\n\t}",this._onMessage=function(e){var n=e.data,r=t._listeners.message;r&&r.forEach(function(e){return e(n)})},this._listeners={},this._worker=new Worker(this._functionToObjectURL(this.WORKER_SOURCE)),this._worker.addEventListener("message",this._onMessage)}return r(e,[{key:"_functionToObjectURL",value:function(e){var t=void 0,n=e.toString();n=n.substring(n.indexOf("{")+1,n.lastIndexOf("}"));try{t=new Blob([n],{type:"text/javascript"})}catch(r){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,t=new BlobBuilder,t.append(n),t=t.getBlob()}return(window.URL||window.webkitURL).createObjectURL(t)}},{key:"addEventListener",value:function(e,t){this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t)}},{key:"postMessage",value:function(e,t){this._worker.postMessage(e,t)}},{key:"terminate",value:function(){this._worker.terminate()}}]),e}();e.exports=s},function(module,exports){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),CompatibilityWorkerProxy=function(){function CompatibilityWorkerProxy(){var e=this;_classCallCheck(this,CompatibilityWorkerProxy),this._onMessage=function(t){var n=t,r=e._listeners.message;r&&r.forEach(function(e){return e(n)})},this._listeners={}}return _createClass(CompatibilityWorkerProxy,[{key:"addEventListener",value:function(e,t){this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t)}},{key:"postMessage",value:function postMessage(message,options){var _this2=this;setTimeout(function(){var args=Object.keys(message).filter(function(e){return e.match(/^argument/)}).sort(function(e,t){return parseInt(e.slice(8),10)-parseInt(t.slice(8),10)}).map(function(e){return message[e]});_this2._onMessage({id:message.id,result:eval("("+message.func+")").apply(null,args)})},1)}},{key:"terminate",value:function(){this._worker.terminate()}}]),CompatibilityWorkerProxy}();module.exports=CompatibilityWorkerProxy},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(4),a=r(o),u=function(){function e(t,n){var r=this;s(this,e),this._next=function(){if(r._queue.length){var e=r._getWorker();if(!e)return void setTimeout(r._next,0);var t=r._queue.shift();e.run(t)}},t=t||{},this._WorkerProxy=n,this._maxWorkers=t.maxWorkers||4,this._idleTimeout=t.idleTimeout!==!1&&(t.idleTimeout||1e4),this._idleCheckInterval=t.idleCheckInterval||1e3,this._workers=[],this._queue=[],this._onWorkerTaskComplete=this._onWorkerTaskComplete.bind(this),this._flushIdleWorkers=this._flushIdleWorkers.bind(this)}return i(e,[{key:"run",value:function(e){return this._idleTimeout&&"number"!=typeof this._idleCheckIntervalID&&(this._idleCheckIntervalID=setInterval(this._flushIdleWorkers,this._idleCheckInterval)),new Promise(function(t,n){e.resolve=t,e.reject=n,this._queue.push(e),this._next()}.bind(this))}},{key:"wrap",value:function(e){return function(){return this.run({arguments:Array.from(arguments),"function":e})}.bind(this)}},{key:"terminate",value:function(){this._idleTimeout&&"number"==typeof this._idleCheckIntervalID&&(clearInterval(this._idleCheckIntervalID),this._idleCheckIntervalID=null),this._workers.forEach(function(e){e.worker.terminate()}),this._workers=[]}},{key:"_onWorkerTaskComplete",value:function(){this._next()}},{key:"_flushIdleWorkers",value:function(){this._workers=this._workers.filter(function(e){return!(0===e.tasks.length&&new Date-e.lastTaskTimestamp>this._idleTimeout)||(e.worker.terminate(),!1)},this)}},{key:"_getWorker",value:function(){var e=this._workers.filter(function(e){return 0===e.tasks.length});return e.length?e[0]:this._workers.length<this._maxWorkers?this._createWorker():null}},{key:"_createWorker",value:function(){var e=new a["default"]({onTaskComplete:this._onWorkerTaskComplete},this._WorkerProxy);return this._workers.push(e),e}}]),e}();e.exports=u},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(t,r){n(this,e),this.worker=new r,this.worker.addEventListener("message",this._onWorkerMessage.bind(this)),this.tasks=[],this.lastTaskTimestamp=null,this._onTaskComplete=t.onTaskComplete}return r(e,[{key:"_generateTaskID",value:function(){var e=Math.random(),t=!1;return this.tasks.some(function(e){if(e.id===!0)return t=!0,!0}),t?this._generateTaskID():e}},{key:"_onWorkerMessage",value:function(e){var t=null;this.tasks.some(function(n,r){if(e.id===n.id)return t=r,!0}),null!==t&&(this.tasks[t].resolve(e.result),this._onTaskComplete(this),this.tasks.splice(t,1))}},{key:"run",value:function(e){var t=this._generateTaskID();this.lastTaskTimestamp=new Date,this.tasks.push({id:t,resolve:e.resolve,reject:e.reject});var n={id:t,func:String(e["function"])};Object.keys(e.arguments).forEach(function(t,r){n["argument"+r]=e.arguments[r]}),this.worker.postMessage(n,e.transferables)}}]),e}();e.exports=s}]);
//# sourceMappingURL=task.min.js.map