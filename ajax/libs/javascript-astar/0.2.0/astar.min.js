!function(t){if("object"==typeof n)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();window.astar=n.astar,window.Graph=n.Graph}}(function(){function t(t){for(var i=[],e=0;e<t.length;e++){i[e]=[];for(var o=0,s=t[e];o<s.length;o++)i[e][o]=new n(e,o,s[o])}this.input=t,this.nodes=i}function n(t,n,i){this.data={},this.x=t,this.y=n,this.pos={x:t,y:n},this.type=i}function i(t){this.content=[],this.scoreFunction=t}var e={init:function(t){for(var n=0,i=t.length;n<i;n++)for(var e=0,o=t[n].length;e<o;e++){var s=t[n][e];s.f=0,s.g=0,s.h=0,s.cost=s.type,s.visited=!1,s.closed=!1,s.parent=null}},heap:function(){return new i(function(t){return t.f})},search:function(t,n,i,o){e.init(t),o=o||{};var s=o.heuristic||e.manhattan,r=!!o.diagonal,h=o.costDiagonal||1,c=o.costStraight||1,a=e.heap();for(a.push(n);a.size()>0;){var u=a.pop();if(u===i){for(var f=u,p=[];f.parent;)p.push(f),f=f.parent;return p.reverse()}u.closed=!0;for(var l=e.neighbors(t,u,r),v=0,g=l.length;v<g;v++){var d=l[v];if(!d.closed&&!d.isWall()){var b=u.g+d.cost,y=d.visited;(!y||b<d.g)&&(d.visited=!0,d.parent=u,d.h=d.h||s(d.pos,i.pos,c,h),d.g=b,d.f=d.g+d.h,y?a.rescoreElement(d):a.push(d))}}}return[]},manhattan:function(t,n){var i=Math.abs(n.x-t.x),e=Math.abs(n.y-t.y);return i+e},diagonal:function(t,n,i,e){var o=Math.abs(n.x-t.x),s=Math.abs(n.y-t.y);return i*(o+s)+(e-2*i)*Math.min(o,s)},neighbors:function(t,n,i){var e=[],o=n.x,s=n.y;return t[o-1]&&t[o-1][s]&&e.push(t[o-1][s]),t[o+1]&&t[o+1][s]&&e.push(t[o+1][s]),t[o]&&t[o][s-1]&&e.push(t[o][s-1]),t[o]&&t[o][s+1]&&e.push(t[o][s+1]),i&&(t[o-1]&&t[o-1][s-1]&&e.push(t[o-1][s-1]),t[o+1]&&t[o+1][s-1]&&e.push(t[o+1][s-1]),t[o-1]&&t[o-1][s+1]&&e.push(t[o-1][s+1]),t[o+1]&&t[o+1][s+1]&&e.push(t[o+1][s+1])),e}};return t.prototype.toString=function(){for(var t,n,i,e,o="\n",s=this.nodes,r=0,h=s.length;r<h;r++){for(t="",n=s[r],i=0,e=n.length;i<e;i++)t+=n[i].type+" ";o=o+t+"\n"}return o},n.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},n.prototype.isWall=function(){return 0===this.type},i.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t},remove:function(t){var n=this.content.indexOf(t),i=this.content.pop();n!==this.content.length-1&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var n=this.content[t];t>0;){var i=(t+1>>1)-1,e=this.content[i];if(!(this.scoreFunction(n)<this.scoreFunction(e)))break;this.content[i]=n,this.content[t]=e,t=i}},bubbleUp:function(t){for(var n=this.content.length,i=this.content[t],e=this.scoreFunction(i);;){var o,s=t+1<<1,r=s-1,h=null;if(r<n){var c=this.content[r];o=this.scoreFunction(c),o<e&&(h=r)}if(s<n){var a=this.content[s],u=this.scoreFunction(a);u<(null===h?e:o)&&(h=s)}if(null===h)break;this.content[t]=this.content[h],this.content[h]=i,t=h}}},{astar:e,Graph:t}});
//# sourceMappingURL=astar.min.js.map