!function(t){if("object"==typeof module&&"object"==typeof module.exports)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();window.astar=n.astar,window.Graph=n.Graph}}(function(){function t(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var i=0;i<t.length;i++){this.grid[i]=[];for(var o=0,s=t[i];o<s.length;o++){var r=new n(i,o,s[o]);this.grid[i][o]=r,this.nodes.push(r)}}}function n(t,n,e){this.x=t,this.y=n,this.type=e}function e(t){this.content=[],this.scoreFunction=t}var i={init:function(t){for(var n=0,e=t.nodes.length;n<e;++n){var i=t.nodes[n];i.f=0,i.g=0,i.h=0,i.visited=!1,i.closed=!1,i.parent=null}},heap:function(){return new e(function(t){return t.f})},search:function(t,n,e,o){function s(t){for(var n=t,e=[];n.parent;)e.push(n),n=n.parent;return e.reverse()}i.init(t),o=o||{};var r=o.heuristic||i.heuristics.manhattan,h=o.closest||!1,c=i.heap(),u=n;for(n.h=r(n,e),c.push(n);c.size()>0;){var a=c.pop();if(a===e)return s(a);a.closed=!0;for(var p=t.neighbors(a),f=0,l=p.length;f<l;f++){var g=p[f];if(!g.closed&&!g.isWall()){var d=a.g+g.getCost(a),v=g.visited;(!v||d<g.g)&&(g.visited=!0,g.parent=a,g.h=g.h||r(g,e),g.g=d,g.f=g.g+g.h,h&&(g.h<u.h||g.h===u.h&&g.g<u.g)&&(u=g),v?c.rescoreElement(g):c.push(g))}}}return h?s(u):[]},heuristics:{manhattan:function(t,n){var e=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y);return e+i},diagonal:function(t,n){var e=1,i=Math.sqrt(2),o=Math.abs(n.x-t.x),s=Math.abs(n.y-t.y);return e*(o+s)+(i-2*e)*Math.min(o,s)}}};return t.prototype.neighbors=function(t){var n=[],e=t.x,i=t.y,o=this.grid;return o[e-1]&&o[e-1][i]&&n.push(o[e-1][i]),o[e+1]&&o[e+1][i]&&n.push(o[e+1][i]),o[e]&&o[e][i-1]&&n.push(o[e][i-1]),o[e]&&o[e][i+1]&&n.push(o[e][i+1]),this.diagonal&&(o[e-1]&&o[e-1][i-1]&&n.push(o[e-1][i-1]),o[e+1]&&o[e+1][i-1]&&n.push(o[e+1][i-1]),o[e-1]&&o[e-1][i+1]&&n.push(o[e-1][i+1]),o[e+1]&&o[e+1][i+1]&&n.push(o[e+1][i+1])),n},t.prototype.toString=function(){for(var t,n,e,i,o="\n",s=this.nodes,r=0,h=s.length;r<h;r++){for(t="",n=s[r],e=0,i=n.length;e<i;e++)t+=n[e].type+" ";o=o+t+"\n"}return o},n.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},n.prototype.getCost=function(){return this.type},n.prototype.isWall=function(){return 0===this.type},e.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t},remove:function(t){var n=this.content.indexOf(t),e=this.content.pop();n!==this.content.length-1&&(this.content[n]=e,this.scoreFunction(e)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var n=this.content[t];t>0;){var e=(t+1>>1)-1,i=this.content[e];if(!(this.scoreFunction(n)<this.scoreFunction(i)))break;this.content[e]=n,this.content[t]=i,t=e}},bubbleUp:function(t){for(var n=this.content.length,e=this.content[t],i=this.scoreFunction(e);;){var o,s=t+1<<1,r=s-1,h=null;if(r<n){var c=this.content[r];o=this.scoreFunction(c),o<i&&(h=r)}if(s<n){var u=this.content[s],a=this.scoreFunction(u);a<(null===h?i:o)&&(h=s)}if(null===h)break;this.content[t]=this.content[h],this.content[h]=e,t=h}}},{astar:i,Graph:t}});
//# sourceMappingURL=astar.min.js.map