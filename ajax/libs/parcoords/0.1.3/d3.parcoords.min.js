d3.parcoords=function(t){function n(){u=s(),f.render(),m.brush.call(f,u)}function e(t,n){n.strokeStyle=d3.functor(h.color)(t),n.beginPath(),h.dimensions.map(function(e,r){0==r?n.moveTo(a(e),y[e](t[e])):n.lineTo(a(e),y[e](t[e]))}),n.stroke()}function r(t,n){n.clearRect(-1,-1,p()+2,v()+2),n.beginPath(),t.forEach(function(t){h.dimensions.map(function(e,r){0==r?n.moveTo(a(e),y[e](t[e])):n.lineTo(a(e),y[e](t[e]))})}),n.stroke()}function i(t){return!y[t].brush.empty()}function a(t){var n=w[t];return null==n?x(t):n}function s(){var t=h.dimensions.filter(i),n=t.map(function(t){return y[t].brush.extent()});return h.data.filter(function(e){return t.every(function(t,r){return n[r][0]<=e[t]&&e[t]<=n[r][1]})})}function o(t){return e(t,A.foreground)}function l(t){return e(t,A.highlight)}function c(t,n,e){d3.keys(n).forEach(function(r){t[r]=function(i){if(!arguments.length)return n[r];b.debug&&console.log(hey,i);var a=n[r];return n[r]=i,_[r].call(f,{value:i,previous:a}),e[r].call(f,{value:i,previous:a}),t}})}function d(t,n){for(key in n)t[key]=n[key];return t}var h={dimensions:[],data:[],width:600,height:300,margin:{top:24,right:0,bottom:12,left:0},color:"#069",composite:"source-over",alpha:"0.7"};d(h,t);var u,g,f=function(t){return t=f.selection=d3.select(t),h.width=t[0][0].clientWidth,h.height=t[0][0].clientHeight,["extents","shadows","marks","foreground","highlight"].forEach(function(n){A[n]=t.append("canvas").attr("class",n)[0][0].getContext("2d")}),f.svg=t.append("svg").attr("width",h.width).attr("height",h.height).append("svg:g").attr("transform","translate("+h.margin.left+","+h.margin.top+")"),f},m=d3.dispatch.apply(this,["render","resize","highlight","brush"].concat(d3.keys(h))),p=function(){return h.width-h.margin.right-h.margin.left},v=function(){return h.height-h.margin.top-h.margin.bottom},b={brushable:!1,reorderable:!1,axes:!1,interactive:!1,shadows:!1,debug:!1},x=d3.scale.ordinal(),y={},w={},k=(d3.svg.line(),d3.svg.axis().orient("left").ticks(5)),A={},_=d3.dispatch.apply(this,d3.keys(h)).on("composite",function(t){A.foreground.globalCompositeOperation=t.value}).on("alpha",function(t){A.foreground.globalAlpha=t.value}).on("width",function(t){f.resize()}).on("height",function(t){f.resize()}).on("margin",function(t){f.resize()}).on("data",function(t){b.shadows&&r(h.data,A.shadows)}).on("dimensions",function(t){x.domain(h.dimensions),b.interactive&&f.render().updateAxes()});return f.toString=function(){return"Parallel Coordinates: "+h.dimensions.length+" dimensions ("+d3.keys(h.data[0]).length+" total) , "+h.data.length+" rows"},f.state=h,f.flags=b,c(f,h,m),d3.rebind(f,m,"on"),d3.rebind(f,k,"ticks","orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),f.autoscale=function(){return x.rangePoints([0,p()],1),h.dimensions.forEach(function(t){y[t]=d3.scale.linear().domain(d3.extent(h.data,function(n){return+n[t]})).range([v(),0])}),f.selection.selectAll("canvas").style("margin-top",h.margin.top+"px").style("margin-left",h.margin.left+"px").attr("width",p()+2).attr("height",v()+2),A.foreground.strokeStyle=h.color,A.foreground.lineWidth=1.4,A.foreground.globalCompositeOperation=h.composite,A.foreground.globalAlpha=h.alpha,A.highlight.lineWidth=3,A.shadows.strokeStyle="#dadada",A.extents.strokeStyle="rgba(140,140,140,0.25)",A.extents.fillStyle="rgba(255,255,255,0.4)",this},f.detectDimensions=function(){return f.dimensions(d3.parcoords.quantitative(h.data)),this},f.render=function(){return h.dimensions.length||f.detectDimensions(),h.dimensions[0]in y||f.autoscale(),f.clear("foreground"),u?u.forEach(o):h.data.forEach(o),m.render.call(this),this},f.shadows=function(){return b.shadows=!0,h.data.length>0&&r(h.data,A.shadows),this},f.axisDots=function(){var t=f.ctx.marks;return t.globalAlpha=d3.min([1/Math.pow(data.length,.5),1]),h.data.forEach(function(n){h.dimensions.map(function(e,r){t.fillRect(a(e)-.75,y[e](n[e])-.75,1.5,1.5)})}),this},f.clear=function(t){return A[t].clearRect(0,0,p()+1,v()+1),this},f.createAxes=function(){return g&&f.removeAxes(),g=f.svg.selectAll(".dimension").data(h.dimensions,function(t){return t}).enter().append("svg:g").attr("class","dimension").attr("transform",function(t){return"translate("+x(t)+")"}),g.append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each(function(t){d3.select(this).call(k.scale(y[t]))}).append("svg:text").attr({"text-anchor":"middle",y:0,transform:"translate(0,-12)",x:0,class:"label"}).text(String),b.axes=!0,this},f.removeAxes=function(){return g.remove(),this},f.updateAxes=function(){var t=f.svg.selectAll(".dimension").data(h.dimensions,function(t){return t});return t.enter().append("svg:g").attr("class","dimension").attr("transform",function(t){return"translate("+a(t)+")"}).style("opacity",0).append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each(function(t){d3.select(this).call(k.scale(y[t]))}).append("svg:text").attr({"text-anchor":"middle",y:0,transform:"translate(0,-12)",x:0,class:"label"}).text(String),t.exit().remove(),g=f.svg.selectAll(".dimension"),g.transition().duration(1100).attr("transform",function(t){return"translate("+a(t)+")"}).style("opacity",1),b.shadows&&r(h.data,A.shadows),this},f.brushable=function(){return g||f.createAxes(),g.append("svg:g").attr("class","brush").each(function(t){d3.select(this).call(y[t].brush=d3.svg.brush().y(y[t]).on("brush",n))}).selectAll("rect").style("visibility",null).attr("x",-15).attr("width",30),b.brushable=!0,this},f.reorderable=function(){return g||f.createAxes(),g.style("cursor","move").call(d3.behavior.drag().on("dragstart",function(t){w[t]=this.__origin__=x(t)}).on("drag",function(t){w[t]=Math.min(p(),Math.max(0,this.__origin__+=d3.event.dx)),h.dimensions.sort(function(t,n){return a(t)-a(n)}),x.domain(h.dimensions),f.render(),g.attr("transform",function(t){return"translate("+a(t)+")"})}).on("dragend",function(t){delete this.__origin__,delete w[t],d3.select(this).transition().attr("transform","translate("+x(t)+")"),f.render()})),b.reorderable=!0,this},f.interactive=function(){return b.interactive=!0,this},f.noisy=function(){return b.noisy=!0,this},f.xscale=x,f.yscale=y,f.ctx=A,f.brushed=function(){return u},f.resize=function(){return f.selection.select("svg").attr("width",h.width).attr("height",h.height),f.svg.attr("transform","translate("+h.margin.left+","+h.margin.top+")"),f.autoscale(),g&&(g.attr("transform",function(t){return"translate("+x(t)+")"}),g.selectAll("g.axis").each(function(t){d3.select(this).call(k.scale(y[t]))})),f.render(),m.resize.call(this,{width:h.width,height:h.height,margin:h.margin}),this},f.highlight=function(t){return f.clear("highlight"),A.highlight.fillStyle="rgba(255,255,255,0.8)",A.highlight.fillRect(-1,-1,p()+2,v()+2),t.forEach(l),m.highlight.call(this,t),this},f.unhighlight=function(t){return f.clear("highlight"),this},f},d3.parcoords.version="0.1.3",d3.parcoords.quantitative=function(t){return d3.keys(t[0]).filter(function(n){var e=t[0][n];return parseFloat(e)==e&&null!=e})},d3.parcoords.adjacent_pairs=function(t){for(var n=[],e=0;e<t.length-1;e++)n.push([t[e],t[e+1]]);return n};
//# sourceMappingURL=d3.parcoords.min.js.map