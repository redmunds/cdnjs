d3.parcoords=function(n){function t(n,t,e){d3.keys(t).forEach(function(r){n[r]=function(i){if(!arguments.length)return t[r];var a=t[r];return t[r]=i,S[r].call(v,{value:i,previous:a}),e[r].call(v,{value:i,previous:a}),n}})}function e(n,t){for(key in t)n[key]=t[key];return n}function r(n){var t=d3.map(),e=d3.map();return m.data.forEach(function(t){var r=k[n](t[n]);e.has(r)||e.set(r,0);var i=e.get(r);e.set(r,i+1)}),m.data.forEach(function(r){m.dimensions.map(function(i,a){var s=k[n](r[n]);if(!t.has(s)){var o=d3.map();t.set(s,o)}t.get(s).has(i)||t.get(s).set(i,0);var u=t.get(s).get(i);u+=k[i](r[i])/e.get(s),t.get(s).set(i,u)})}),t}function i(n){for(var t=[],e=m.dimensions,r=e.length,i=.5,a=0;a<r;++a){var s=g(e[a]),o=k[e[a]](n[e[a]]);if(t.push($V([s,o])),a<r-1){var u=s+i*(g(e[a+1])-s),l=o+i*(k[e[a+1]](n[e[a+1]])-o);if(null!==m.bundleDimension){var c=m.clusterCentroids.get(k[m.bundleDimension](n[m.bundleDimension])).get(e[a]),d=m.clusterCentroids.get(k[m.bundleDimension](n[m.bundleDimension])).get(e[a+1]),h=.5*(c+d);l=h+(1-m.bundlingStrength)*(l-h)}t.push($V([u,l]))}}return t}function a(n){var t=n.length,e=m.smoothness,r=[];r.push(n[0]),r.push($V([n[0].e(1)+2*e*(n[1].e(1)-n[0].e(1)),n[0].e(2)]));for(var i=1;i<t-1;++i){var a=n[i],s=n[i-1],o=n[i+1],u=s.subtract(o);r.push(a.add(u.x(e))),r.push(a),r.push(a.subtract(u.x(e)))}return r.push($V([n[t-1].e(1)+2*e*(n[t-2].e(1)-n[t-1].e(1)),n[t-1].e(2)])),r.push(n[t-1]),r}function s(n,t){var e=i(n),r=a(e);t.moveTo(r[0].e(1),r[0].e(2));for(var s=1;s<r.length;s+=3){if(m.showControlPoints)for(var o=0;o<3;o++)t.fillRect(r[s+o].e(1),r[s+o].e(2),2,2);t.bezierCurveTo(r[s].e(1),r[s].e(2),r[s+1].e(1),r[s+1].e(2),r[s+2].e(1),r[s+2].e(2))}}function o(n,t){t.strokeStyle=d3.functor(m.color)(n),t.beginPath(),null===m.bundleDimension||0===m.bundlingStrength&&0==m.smoothness?l(n,t):s(n,t),t.stroke()}function u(n,t){t.clearRect(-1,-1,x()+2,y()+2),t.beginPath(),n.forEach(function(n){null===m.bundleDimension||0===m.bundlingStrength&&0==m.smoothness?l(n,t):s(n,t)}),t.stroke()}function l(n,t){m.dimensions.map(function(e,r){0==r?t.moveTo(g(e),k[e](n[e])):t.lineTo(g(e),k[e](n[e]))})}function c(n){return o(n,T.foreground)}function d(n){return o(n,T.highlight)}function h(n){return!k[n].brush.empty()}function f(){var n=m.dimensions.filter(h),t=n.map(function(n){return k[n].brush.extent()}),e={date:function(n,e,r){return t[r][0]<=n[e]&&n[e]<=t[r][1]},number:function(n,e,r){return t[r][0]<=n[e]&&n[e]<=t[r][1]},string:function(n,e,r){return t[r][0]<=k[e](n[e])&&k[e](n[e])<=t[r][1]}};return m.data.filter(function(t){return n.every(function(n,r){return e[m.types[n]](t,n,r)})})}function g(n){var t=D[n];return null==t?A(n):t}var m={data:[],dimensions:[],dimensionTitles:{},types:{},brushed:!1,mode:"default",rate:20,width:600,height:300,margin:{top:24,right:0,bottom:12,left:0},color:"#069",composite:"source-over",alpha:.7,bundlingStrength:.5,bundleDimension:null,smoothness:.25,showControlPoints:!1,hideAxis:[]};e(m,n);var p,v=function(n){return n=v.selection=d3.select(n),m.width=n[0][0].clientWidth,m.height=n[0][0].clientHeight,["shadows","marks","foreground","highlight"].forEach(function(t){C[t]=n.append("canvas").attr("class",t)[0][0],T[t]=C[t].getContext("2d")}),v.svg=n.append("svg").attr("width",m.width).attr("height",m.height).append("svg:g").attr("transform","translate("+m.margin.left+","+m.margin.top+")"),v},b=d3.dispatch.apply(this,["render","resize","highlight","brush"].concat(d3.keys(m))),x=function(){return m.width-m.margin.right-m.margin.left},y=function(){return m.height-m.margin.top-m.margin.bottom},w={brushable:!1,reorderable:!1,axes:!1,interactive:!1,shadows:!1,debug:!1},A=d3.scale.ordinal(),k={},D={},E=(d3.svg.line(),d3.svg.axis().orient("left").ticks(5)),T={},C={},S=d3.dispatch.apply(this,d3.keys(m)).on("composite",function(n){T.foreground.globalCompositeOperation=n.value}).on("alpha",function(n){T.foreground.globalAlpha=n.value}).on("width",function(n){v.resize()}).on("height",function(n){v.resize()}).on("margin",function(n){v.resize()}).on("rate",function(n){z.rate(n.value)}).on("data",function(n){w.shadows&&u(m.data,T.shadows)}).on("dimensions",function(n){A.domain(m.dimensions),w.interactive&&v.render().updateAxes()}).on("bundleDimension",function(n){m.dimensions.length||v.detectDimensions(),m.dimensions[0]in k||v.autoscale(),"number"==typeof n.value?n.value<m.dimensions.length?m.bundleDimension=m.dimensions[n.value]:n.value<m.hideAxis.length&&(m.bundleDimension=m.hideAxis[n.value]):m.bundleDimension=n.value,m.clusterCentroids=r(m.bundleDimension)}).on("hideAxis",function(n){v.dimensions(_.without(m.dimensions,n.value))});v.state=m,v.flags=w,t(v,m,b),d3.rebind(v,b,"on"),d3.rebind(v,E,"ticks","orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),v.autoscale=function(){var n={date:function(n){return d3.time.scale().domain(d3.extent(m.data,function(t){return t[n]?t[n].getTime():null})).range([y()+1,1])},number:function(n){return d3.scale.linear().domain(d3.extent(m.data,function(t){return+t[n]})).range([y()+1,1])},string:function(n){return d3.scale.ordinal().domain(m.data.map(function(t){return t[n]})).rangePoints([y()+1,1])}};return m.dimensions.forEach(function(t){k[t]=n[m.types[t]](t)}),m.hideAxis.forEach(function(t){k[t]=n[m.types[t]](t)}),v.dimensions(v.dimensions().filter(function(n,t){var e=k[n].domain().length;return"string"!=m.types[n]||!(e>60||e<2)})),A.rangePoints([0,x()],1),v.selection.selectAll("canvas").style("margin-top",m.margin.top+"px").style("margin-left",m.margin.left+"px").attr("width",x()+2).attr("height",y()+2),T.foreground.strokeStyle=m.color,T.foreground.lineWidth=1.4,T.foreground.globalCompositeOperation=m.composite,T.foreground.globalAlpha=m.alpha,T.highlight.lineWidth=3,T.shadows.strokeStyle="#dadada",this},v.scale=function(n,t){return k[n].domain(t),this},v.flip=function(n){return k[n].domain(k[n].domain().reverse()),this},v.commonScale=function(n,t){var e=t||"number";"undefined"==typeof n&&(n=!0);var r=m.dimensions.concat(m.hideAxis).filter(function(n){return m.types[n]==e});if(n){var i=d3.extent(r.map(function(n,t){return k[n].domain()}).reduce(function(n,t){return n.concat(t)}));r.forEach(function(n){k[n].domain(i)})}else r.forEach(function(n){k[n].domain(d3.extent(m.data,function(t){return+t[n]}))});return null!==m.bundleDimension&&v.bundleDimension(m.bundleDimension),this},v.detectDimensions=function(){return v.types(v.detectDimensionTypes(m.data)),v.dimensions(d3.keys(v.types())),this},v.toType=function(n){return{}.toString.call(n).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},v.toTypeCoerceNumbers=function(n){return parseFloat(n)==n&&null!=n?"number":v.toType(n)},v.detectDimensionTypes=function(n){var t={};return d3.keys(n[0]).forEach(function(e){t[e]=v.toTypeCoerceNumbers(n[0][e])}),t},v.render=function(){return m.dimensions.length||v.detectDimensions(),m.dimensions[0]in k||v.autoscale(),v.render[m.mode](),b.render.call(this),this},v.render.default=function(){v.clear("foreground"),m.brushed?m.brushed.forEach(c):m.data.forEach(c)};var z=d3.renderQueue(c).rate(50).clear(function(){v.clear("foreground")});return v.render.queue=function(){z(m.brushed?m.brushed:m.data)},v.shadows=function(){return w.shadows=!0,m.data.length>0&&u(m.data,T.shadows),this},v.axisDots=function(){var n=v.ctx.marks;return n.globalAlpha=d3.min([1/Math.pow(data.length,.5),1]),m.data.forEach(function(t){m.dimensions.map(function(e,r){n.fillRect(g(e)-.75,k[e](t[e])-.75,1.5,1.5)})}),this},v.clear=function(n){return T[n].clearRect(0,0,x()+2,y()+2),this},v.createAxes=function(){return p&&v.removeAxes(),p=v.svg.selectAll(".dimension").data(m.dimensions,function(n){return n}).enter().append("svg:g").attr("class","dimension").attr("transform",function(n){return"translate("+A(n)+")"}),p.append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each(function(n){d3.select(this).call(E.scale(k[n]))}).append("svg:text").attr({"text-anchor":"middle",y:0,transform:"translate(0,-12)",x:0,class:"label"}).text(function(n){return n in m.dimensionTitles?m.dimensionTitles[n]:n}),w.axes=!0,this},v.removeAxes=function(){return p.remove(),this},v.updateAxes=function(){var n=v.svg.selectAll(".dimension").data(m.dimensions,function(n){return n});return n.enter().append("svg:g").attr("class","dimension").attr("transform",function(n){return"translate("+g(n)+")"}).style("opacity",0).append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each(function(n){d3.select(this).call(E.scale(k[n]))}).append("svg:text").attr({"text-anchor":"middle",y:0,transform:"translate(0,-12)",x:0,class:"label"}).text(String),n.exit().remove(),p=v.svg.selectAll(".dimension"),p.transition().duration(1100).attr("transform",function(n){return"translate("+g(n)+")"}).style("opacity",1),v.svg.selectAll(".axis").transition().duration(1100).each(function(n){d3.select(this).call(E.scale(k[n]))}),w.shadows&&u(m.data,T.shadows),this},v.brushable=function(){return p||v.createAxes(),p.append("svg:g").attr("class","brush").each(function(n){d3.select(this).call(k[n].brush=d3.svg.brush().y(k[n]).on("brushstart",function(){d3.event.sourceEvent.stopPropagation()}).on("brush",v.brush))}).selectAll("rect").style("visibility",null).attr("x",-15).attr("width",30),w.brushable=!0,this},v.reorderable=function(){return p||v.createAxes(),p.style("cursor","move").call(d3.behavior.drag().on("dragstart",function(n){D[n]=this.__origin__=A(n)}).on("drag",function(n){D[n]=Math.min(x(),Math.max(0,this.__origin__+=d3.event.dx)),m.dimensions.sort(function(n,t){return g(n)-g(t)}),A.domain(m.dimensions),v.render(),p.attr("transform",function(n){return"translate("+g(n)+")"})}).on("dragend",function(n){delete this.__origin__,delete D[n],d3.select(this).transition().attr("transform","translate("+A(n)+")"),v.render()})),w.reorderable=!0,this},v.adjacent_pairs=function(n){for(var t=[],e=0;e<n.length-1;e++)t.push([n[e],n[e+1]]);return t},v.interactive=function(){return w.interactive=!0,this},v.brush=function(){m.brushed=f(),b.brush.call(v,m.brushed),v.render()},v.xscale=A,v.yscale=k,v.ctx=T,v.canvas=C,v.g=function(){return p},v.brushReset=function(n){return p&&(p.selectAll(".brush").each(function(n){d3.select(this).call(k[n].brush.clear())}),v.brush()),this},v.resize=function(){return v.selection.select("svg").attr("width",m.width).attr("height",m.height),v.svg.attr("transform","translate("+m.margin.left+","+m.margin.top+")"),v.autoscale(),p&&v.createAxes().brushable(),b.resize.call(this,{width:m.width,height:m.height,margin:m.margin}),this},v.highlight=function(n){return v.clear("highlight"),d3.select(C.foreground).classed("faded",!0),n.forEach(d),b.highlight.call(this,n),this},v.unhighlight=function(n){return v.clear("highlight"),d3.select(C.foreground).classed("faded",!1),this},v.intersection=function(n,t,e,r){return{x:((n.x*t.y-n.y*t.x)*(e.x-r.x)-(n.x-t.x)*(e.x*r.y-e.y*r.x))/((n.x-t.x)*(e.y-r.y)-(n.y-t.y)*(e.x-r.x)),y:((n.x*t.y-n.y*t.x)*(e.y-r.y)-(n.y-t.y)*(e.x*r.y-e.y*r.x))/((n.x-t.x)*(e.y-r.y)-(n.y-t.y)*(e.x-r.x))}},v.toString=function(){return"Parallel Coordinates: "+m.dimensions.length+" dimensions ("+d3.keys(m.data[0]).length+" total) , "+m.data.length+" rows"},v.version="0.3.0",v},d3.renderQueue=function(n){var t=[],e=10,r=function(){},i=0,a=function(n){n&&a.data(n),a.invalidate(),r(),a.render()};return a.render=function(){function r(){if(!s)return!0;if(i>t.length)return!0;var r=t.slice(i,i+e);i+=e,r.map(n)}i=0;var s=!0;a.invalidate=function(){s=!1},d3.timer(r)},a.data=function(n){return a.invalidate(),t=n.slice(0),a},a.rate=function(n){return arguments.length?(e=n,a):e},a.remaining=function(){return t.length-i},a.clear=function(n){return arguments.length?(r=n,a):(r(),a)},a.invalidate=function(){},a};
//# sourceMappingURL=d3.parcoords.min.js.map