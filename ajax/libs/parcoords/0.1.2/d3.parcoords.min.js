d3.parcoords=function(t){function n(){f=l(),p.render(),r(),v.brush.call(p,f)}function e(t,n){n.strokeStyle=d3.functor(g.color)(t),n.beginPath(),g.dimensions.map(function(e,r){0==r?n.moveTo(s(e),A[e](t[e])):n.lineTo(s(e),A[e](t[e]))}),n.stroke()}function r(){p.clear("background");var t=g.dimensions.filter(i);if(0!=t.length){var n=p.ctx.background;n.beginPath(),g.dimensions.map(function(t,e){0==e?n.moveTo(k(t),a(t)):n.lineTo(k(t),a(t))}),g.dimensions.reverse().map(function(t,e){n.lineTo(k(t),o(t))}),n.fill(),n.stroke()}}function i(t){return!A[t].brush.empty()}function a(t){return i(t)?A[t](A[t].brush.extent()[1]):0}function o(t){return i(t)?A[t](A[t].brush.extent()[0]):x()}function s(t){var n=w[t];return null==n?k(t):n}function l(){var t=g.dimensions.filter(i),n=t.map(function(t){return A[t].brush.extent()});return g.data.filter(function(e){return t.every(function(t,r){return n[r][0]<=e[t]&&e[t]<=n[r][1]})})}function c(t){return e(t,S.foreground)}function u(t){return e(t,S.highlight)}function d(t,n,e){d3.keys(n).forEach(function(r){t[r]=function(i){if(!arguments.length)return n[r];y.debug&&console.log(hey,i);var a=n[r];return n[r]=i,z[r].call(p,{value:i,previous:a}),e[r].call(p,{value:i,previous:a}),t}})}function h(t,n){for(key in n)t[key]=n[key];return t}var g={dimensions:[],data:[],width:600,height:300,margin:{top:24,right:0,bottom:12,left:0},color:"#069",composite:"source-over",alpha:"0.7"};h(g,t);var f,m,p=function(t){return t=p.selection=d3.select(t),g.width=t[0][0].clientWidth,g.height=t[0][0].clientHeight,["background","marks","foreground","highlight"].forEach(function(n){S[n]=t.append("canvas").attr("class",n)[0][0].getContext("2d")}),p.svg=t.append("svg").attr("width",g.width).attr("height",g.height).append("svg:g").attr("transform","translate("+g.margin.left+","+g.margin.top+")"),p},v=d3.dispatch.apply(this,["render","resize","highlight","brush"].concat(d3.keys(g))),b=function(){return g.width-g.margin.right-g.margin.left},x=function(){return g.height-g.margin.top-g.margin.bottom},y={brushable:!1,reorderable:!1,axes:!1,interactive:!1,debug:!1},k=d3.scale.ordinal(),A={},w={},_=(d3.svg.line(),d3.svg.axis().orient("left").ticks(5)),S={},z=d3.dispatch.apply(this,d3.keys(g)).on("composite",function(t){S.foreground.globalCompositeOperation=t.value}).on("alpha",function(t){S.foreground.globalAlpha=t.value}).on("width",function(t){p.resize()}).on("height",function(t){p.resize()}).on("margin",function(t){p.resize()}).on("dimensions",function(t){k.domain(g.dimensions),y.interactive&&p.render().updateAxes()});return p.toString=function(){return"Parallel Coordinates: "+g.dimensions.length+" dimensions ("+d3.keys(g.data[0]).length+" total) , "+g.data.length+" rows"},p.state=g,p.flags=y,d(p,g,v),d3.rebind(p,v,"on"),d3.rebind(p,_,"ticks","orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),p.autoscale=function(){return k.rangePoints([0,b()],1),g.dimensions.forEach(function(t){A[t]=d3.scale.linear().domain(d3.extent(g.data,function(n){return+n[t]})).range([x(),0])}),p.selection.selectAll("canvas").style("margin-top",g.margin.top+"px").style("margin-left",g.margin.left+"px").attr("width",b()+2).attr("height",x()+2),S.foreground.strokeStyle=g.color,S.foreground.lineWidth=1.4,S.foreground.globalCompositeOperation=g.composite,S.foreground.globalAlpha=g.alpha,S.highlight.lineWidth=3,S.background.strokeStyle="rgba(140,140,140,0.25)",S.background.fillStyle="rgba(255,255,255,0.4)",this},p.detectDimensions=function(){return p.dimensions(d3.parcoords.quantitative(g.data)),this},p.render=function(){return g.dimensions.length||p.detectDimensions(),g.dimensions[0]in A||p.autoscale(),p.clear("foreground"),f?f.forEach(c):g.data.forEach(c),v.render.call(this),this},p.axisDots=function(){var t=p.ctx.marks;return t.globalAlpha=d3.min([1/Math.pow(data.length,.5),1]),g.data.forEach(function(n){g.dimensions.map(function(e,r){t.fillRect(s(e)-.75,A[e](n[e])-.75,1.5,1.5)})}),this},p.clear=function(t){return S[t].clearRect(0,0,b()+1,x()+1),this},p.createAxes=function(){return m&&p.removeAxes(),m=p.svg.selectAll(".dimension").data(g.dimensions,function(t){return t}).enter().append("svg:g").attr("class","dimension").attr("transform",function(t){return"translate("+k(t)+")"}),m.append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each(function(t){d3.select(this).call(_.scale(A[t]))}).append("svg:text").attr({"text-anchor":"middle",y:0,transform:"translate(0,-12)",x:0,class:"label"}).text(String),y.axes=!0,this},p.removeAxes=function(){return m.remove(),this},p.updateAxes=function(){var t=p.svg.selectAll(".dimension").data(g.dimensions,function(t){return t});return t.enter().append("svg:g").attr("class","dimension").attr("transform",function(t){return"translate("+s(t)+")"}).style("opacity",0).append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each(function(t){d3.select(this).call(_.scale(A[t]))}).append("svg:text").attr({"text-anchor":"middle",y:0,transform:"translate(0,-12)",x:0,class:"label"}).text(String),t.exit().remove(),m=p.svg.selectAll(".dimension"),m.transition().duration(1100).attr("transform",function(t){return"translate("+s(t)+")"}).style("opacity",1),this},p.brushable=function(){return m||p.createAxes(),m.append("svg:g").attr("class","brush").each(function(t){d3.select(this).call(A[t].brush=d3.svg.brush().y(A[t]).on("brush",n))}).selectAll("rect").style("visibility",null).attr("x",-15).attr("width",30),y.brushable=!0,this},p.reorderable=function(){return m||p.createAxes(),m.style("cursor","move").call(d3.behavior.drag().on("dragstart",function(t){w[t]=this.__origin__=k(t)}).on("drag",function(t){w[t]=Math.min(b(),Math.max(0,this.__origin__+=d3.event.dx)),g.dimensions.sort(function(t,n){return s(t)-s(n)}),k.domain(g.dimensions),p.render(),m.attr("transform",function(t){return"translate("+s(t)+")"})}).on("dragend",function(t){delete this.__origin__,delete w[t],d3.select(this).transition().attr("transform","translate("+k(t)+")"),p.render()})),y.reorderable=!0,this},p.interactive=function(){return y.interactive=!0,this},p.noisy=function(){return y.noisy=!0,this},p.xscale=k,p.yscale=A,p.ctx=S,p.brushed=function(){return f},p.resize=function(){return p.selection.select("svg").attr("width",g.width).attr("height",g.height),p.svg.attr("transform","translate("+g.margin.left+","+g.margin.top+")"),p.autoscale(),m&&(m.attr("transform",function(t){return"translate("+k(t)+")"}),m.selectAll("g.axis").each(function(t){d3.select(this).call(_.scale(A[t]))})),p.render(),v.resize.call(this,{width:g.width,height:g.height,margin:g.margin}),this},p.highlight=function(t){return p.clear("highlight"),S.highlight.fillStyle="rgba(255,255,255,0.8)",S.highlight.fillRect(-1,-1,b()+2,x()+2),t.forEach(u),v.highlight.call(this,t),this},p.unhighlight=function(t){return p.clear("highlight"),this},p},d3.parcoords.version="0.1.2",d3.parcoords.quantitative=function(t){return d3.keys(t[0]).filter(function(n){var e=t[0][n];return parseFloat(e)==e&&null!=e})},d3.parcoords.adjacent_pairs=function(t){for(var n=[],e=0;e<t.length-1;e++)n.push([t[e],t[e+1]]);return n};
//# sourceMappingURL=d3.parcoords.min.js.map