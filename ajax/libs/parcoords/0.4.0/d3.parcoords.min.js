d3.parcoords=function(n){function e(n,e,t){d3.keys(e).forEach(function(r){n[r]=function(i){if(!arguments.length)return e[r];var s=e[r];return e[r]=i,_[r].call(p,{value:i,previous:s}),t[r].call(p,{value:i,previous:s}),n}})}function t(n,e){for(key in e)n[key]=e[key];return n}function r(n,e){return n.filter(function(n){return e.indexOf(n)===-1})}function i(n){var e=d3.map(),t=d3.map();return v.data.forEach(function(e){var r=D[n](e[n]);t.has(r)||t.set(r,0);var i=t.get(r);t.set(r,i+1)}),v.data.forEach(function(r){v.dimensions.map(function(i,s){var a=D[n](r[n]);if(!e.has(a)){var o=d3.map();e.set(a,o)}e.get(a).has(i)||e.get(a).set(i,0);var u=e.get(a).get(i);u+=D[i](r[i])/t.get(a),e.get(a).set(i,u)})}),e}function s(n){for(var e=[],t=v.dimensions,r=t.length,i=.5,s=0;s<r;++s){var a=m(t[s]),o=D[t[s]](n[t[s]]);if(e.push($V([a,o])),s<r-1){var u=a+i*(m(t[s+1])-a),d=o+i*(D[t[s+1]](n[t[s+1]])-o);if(null!==v.bundleDimension){var l=v.clusterCentroids.get(D[v.bundleDimension](n[v.bundleDimension])).get(t[s]),c=v.clusterCentroids.get(D[v.bundleDimension](n[v.bundleDimension])).get(t[s+1]),h=.5*(l+c);d=h+(1-v.bundlingStrength)*(d-h)}e.push($V([u,d]))}}return e}function a(n){var e=n.length,t=v.smoothness,r=[];r.push(n[0]),r.push($V([n[0].e(1)+2*t*(n[1].e(1)-n[0].e(1)),n[0].e(2)]));for(var i=1;i<e-1;++i){var s=n[i],a=n[i-1],o=n[i+1],u=a.subtract(o);r.push(s.add(u.x(t))),r.push(s),r.push(s.subtract(u.x(t)))}return r.push($V([n[e-1].e(1)+2*t*(n[e-2].e(1)-n[e-1].e(1)),n[e-1].e(2)])),r.push(n[e-1]),r}function o(n,e){var t=s(n),r=a(t);e.moveTo(r[0].e(1),r[0].e(2));for(var i=1;i<r.length;i+=3){if(v.showControlPoints)for(var o=0;o<3;o++)e.fillRect(r[i+o].e(1),r[i+o].e(2),2,2);e.bezierCurveTo(r[i].e(1),r[i].e(2),r[i+1].e(1),r[i+1].e(2),r[i+2].e(1),r[i+2].e(2))}}function u(n,e){e.strokeStyle=d3.functor(v.color)(n),e.beginPath(),null===v.bundleDimension||0===v.bundlingStrength&&0==v.smoothness?l(n,e):o(n,e),e.stroke()}function d(n,e){e.clearRect(-1,-1,y()+2,w()+2),e.beginPath(),n.forEach(function(n){null===v.bundleDimension||0===v.bundlingStrength&&0==v.smoothness?l(n,e):o(n,e)}),e.stroke()}function l(n,e){v.dimensions.map(function(t,r){0==r?e.moveTo(m(t),D[t](n[t])):e.lineTo(m(t),D[t](n[t]))})}function c(n){return u(n,C.foreground)}function h(n){return u(n,C.highlight)}function f(n){return!D[n].brush.empty()}function g(){var n=v.dimensions.filter(f),e=n.map(function(n){return D[n].brush.extent()});if(0===n.length)return!1;var t={date:function(n,t,r){return e[r][0]<=n[t]&&n[t]<=e[r][1]},number:function(n,t,r){return e[r][0]<=n[t]&&n[t]<=e[r][1]},string:function(n,t,r){return e[r][0]<=D[t](n[t])&&D[t](n[t])<=e[r][1]}};return v.data.filter(function(e){return n.every(function(n,r){return t[v.types[n]](e,n,r)})})}function m(n){var e=E[n];return null==e?k(n):e}var v={data:[],dimensions:[],dimensionTitles:{},types:{},brushed:!1,mode:"default",rate:20,width:600,height:300,margin:{top:24,right:0,bottom:12,left:0},color:"#069",composite:"source-over",alpha:.7,bundlingStrength:.5,bundleDimension:null,smoothness:.25,showControlPoints:!1,hideAxis:[]};t(v,n);var b,p=function(n){return n=p.selection=d3.select(n),v.width=n[0][0].clientWidth,v.height=n[0][0].clientHeight,["shadows","marks","foreground","highlight"].forEach(function(e){S[e]=n.append("canvas").attr("class",e)[0][0],C[e]=S[e].getContext("2d")}),p.svg=n.append("svg").attr("width",v.width).attr("height",v.height).append("svg:g").attr("transform","translate("+v.margin.left+","+v.margin.top+")"),p},x=d3.dispatch.apply(this,["render","resize","highlight","brush","brushend"].concat(d3.keys(v))),y=function(){return v.width-v.margin.right-v.margin.left},w=function(){return v.height-v.margin.top-v.margin.bottom},A={brushable:!1,reorderable:!1,axes:!1,interactive:!1,shadows:!1,debug:!1},k=d3.scale.ordinal(),D={},E={},T=(d3.svg.line(),d3.svg.axis().orient("left").ticks(5)),C={},S={},_=d3.dispatch.apply(this,d3.keys(v)).on("composite",function(n){C.foreground.globalCompositeOperation=n.value}).on("alpha",function(n){C.foreground.globalAlpha=n.value}).on("width",function(n){p.resize()}).on("height",function(n){p.resize()}).on("margin",function(n){p.resize()}).on("rate",function(n){z.rate(n.value)}).on("data",function(n){A.shadows&&d(v.data,C.shadows)}).on("dimensions",function(n){k.domain(v.dimensions),A.interactive&&p.render().updateAxes()}).on("bundleDimension",function(n){v.dimensions.length||p.detectDimensions(),v.dimensions[0]in D||p.autoscale(),"number"==typeof n.value?n.value<v.dimensions.length?v.bundleDimension=v.dimensions[n.value]:n.value<v.hideAxis.length&&(v.bundleDimension=v.hideAxis[n.value]):v.bundleDimension=n.value,v.clusterCentroids=i(v.bundleDimension)}).on("hideAxis",function(n){v.dimensions.length||p.detectDimensions(),p.dimensions(r(v.dimensions,n.value))});p.state=v,p.flags=A,e(p,v,x),d3.rebind(p,x,"on"),d3.rebind(p,T,"ticks","orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),p.autoscale=function(){var n={date:function(n){return d3.time.scale().domain(d3.extent(v.data,function(e){return e[n]?e[n].getTime():null})).range([w()+1,1])},number:function(n){return d3.scale.linear().domain(d3.extent(v.data,function(e){return+e[n]})).range([w()+1,1])},string:function(n){return d3.scale.ordinal().domain(v.data.map(function(e){return e[n]})).rangePoints([w()+1,1])}};return v.dimensions.forEach(function(e){D[e]=n[v.types[e]](e)}),v.hideAxis.forEach(function(e){D[e]=n[v.types[e]](e)}),p.dimensions(p.dimensions().filter(function(n,e){var t=D[n].domain().length;return"string"!=v.types[n]||!(t>60||t<2)})),k.rangePoints([0,y()],1),p.selection.selectAll("canvas").style("margin-top",v.margin.top+"px").style("margin-left",v.margin.left+"px").attr("width",y()+2).attr("height",w()+2),C.foreground.strokeStyle=v.color,C.foreground.lineWidth=1.4,C.foreground.globalCompositeOperation=v.composite,C.foreground.globalAlpha=v.alpha,C.highlight.lineWidth=3,C.shadows.strokeStyle="#dadada",this},p.scale=function(n,e){return D[n].domain(e),this},p.flip=function(n){return D[n].domain(D[n].domain().reverse()),this},p.commonScale=function(n,e){var t=e||"number";"undefined"==typeof n&&(n=!0);var r=v.dimensions.concat(v.hideAxis).filter(function(n){return v.types[n]==t});if(n){var i=d3.extent(r.map(function(n,e){return D[n].domain()}).reduce(function(n,e){return n.concat(e)}));r.forEach(function(n){D[n].domain(i)})}else r.forEach(function(n){D[n].domain(d3.extent(v.data,function(e){return+e[n]}))});return null!==v.bundleDimension&&p.bundleDimension(v.bundleDimension),this},p.detectDimensions=function(){return p.types(p.detectDimensionTypes(v.data)),p.dimensions(d3.keys(p.types())),this},p.toType=function(n){return{}.toString.call(n).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},p.toTypeCoerceNumbers=function(n){return parseFloat(n)==n&&null!=n?"number":p.toType(n)},p.detectDimensionTypes=function(n){var e={};return d3.keys(n[0]).forEach(function(t){e[t]=p.toTypeCoerceNumbers(n[0][t])}),e},p.render=function(){return v.dimensions.length||p.detectDimensions(),v.dimensions[0]in D||p.autoscale(),p.render[v.mode](),x.render.call(this),this},p.render.default=function(){p.clear("foreground"),v.brushed?v.brushed.forEach(c):v.data.forEach(c)};var z=d3.renderQueue(c).rate(50).clear(function(){p.clear("foreground")});return p.render.queue=function(){z(v.brushed?v.brushed:v.data)},p.shadows=function(){return A.shadows=!0,v.data.length>0&&d(v.data,C.shadows),this},p.axisDots=function(){var n=p.ctx.marks;return n.globalAlpha=d3.min([1/Math.pow(data.length,.5),1]),v.data.forEach(function(e){v.dimensions.map(function(t,r){n.fillRect(m(t)-.75,D[t](e[t])-.75,1.5,1.5)})}),this},p.clear=function(n){return C[n].clearRect(0,0,y()+2,w()+2),this},p.createAxes=function(){return b&&p.removeAxes(),b=p.svg.selectAll(".dimension").data(v.dimensions,function(n){return n}).enter().append("svg:g").attr("class","dimension").attr("transform",function(n){return"translate("+k(n)+")"}),b.append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each(function(n){d3.select(this).call(T.scale(D[n]))}).append("svg:text").attr({"text-anchor":"middle",y:0,transform:"translate(0,-12)",x:0,class:"label"}).text(function(n){return n in v.dimensionTitles?v.dimensionTitles[n]:n}),A.axes=!0,this},p.removeAxes=function(){return b.remove(),this},p.updateAxes=function(){var n=p.svg.selectAll(".dimension").data(v.dimensions,function(n){return n});return n.enter().append("svg:g").attr("class","dimension").attr("transform",function(n){return"translate("+m(n)+")"}).style("opacity",0).append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each(function(n){d3.select(this).call(T.scale(D[n]))}).append("svg:text").attr({"text-anchor":"middle",y:0,transform:"translate(0,-12)",x:0,class:"label"}).text(String),n.exit().remove(),b=p.svg.selectAll(".dimension"),b.transition().duration(1100).attr("transform",function(n){return"translate("+m(n)+")"}).style("opacity",1),p.svg.selectAll(".axis").transition().duration(1100).each(function(n){d3.select(this).call(T.scale(D[n]))}),A.shadows&&d(v.data,C.shadows),A.brushable&&p.brushable(),A.reorderable&&p.reorderable(),this},p.brushable=function(){return b||p.createAxes(),b.append("svg:g").attr("class","brush").each(function(n){d3.select(this).call(D[n].brush=d3.svg.brush().y(D[n]).on("brushstart",function(){d3.event.sourceEvent.stopPropagation()}).on("brush",p.brush).on("brushend",function(){x.brushend.call(p,v.brushed)}))}).selectAll("rect").style("visibility",null).attr("x",-15).attr("width",30),A.brushable=!0,this},p.brushExtents=function(){var n={};return v.dimensions.forEach(function(e){var t=D[e].brush;if(!t.empty()){var r=t.extent();r.sort(d3.ascending),n[e]=r}}),n},p.reorderable=function(){return b||p.createAxes(),b.style("cursor","move").call(d3.behavior.drag().on("dragstart",function(n){E[n]=this.__origin__=k(n)}).on("drag",function(n){E[n]=Math.min(y(),Math.max(0,this.__origin__+=d3.event.dx)),v.dimensions.sort(function(n,e){return m(n)-m(e)}),k.domain(v.dimensions),p.render(),b.attr("transform",function(n){return"translate("+m(n)+")"})}).on("dragend",function(n){delete this.__origin__,delete E[n],d3.select(this).transition().attr("transform","translate("+k(n)+")"),p.render()})),A.reorderable=!0,this},p.adjacent_pairs=function(n){for(var e=[],t=0;t<n.length-1;t++)e.push([n[t],n[t+1]]);return e},p.interactive=function(){return A.interactive=!0,this},p.brush=function(){v.brushed=g(),x.brush.call(p,v.brushed),p.render()},p.xscale=k,p.yscale=D,p.ctx=C,p.canvas=S,p.g=function(){return b},p.brushReset=function(n){return v.brushed=!1,b&&(b.selectAll(".brush").each(function(n){d3.select(this).call(D[n].brush.clear())}),p.render()),this},p.resize=function(){return p.selection.select("svg").attr("width",v.width).attr("height",v.height),p.svg.attr("transform","translate("+v.margin.left+","+v.margin.top+")"),A.brushable&&p.brushReset(),p.autoscale(),b&&p.createAxes(),A.shadows&&d(v.data,C.shadows),A.brushable&&p.brushable(),A.reorderable&&p.reorderable(),x.resize.call(this,{width:v.width,height:v.height,margin:v.margin}),this},p.highlight=function(n){return p.clear("highlight"),d3.select(S.foreground).classed("faded",!0),n.forEach(h),x.highlight.call(this,n),this},p.unhighlight=function(n){return p.clear("highlight"),d3.select(S.foreground).classed("faded",!1),this},p.intersection=function(n,e,t,r){return{x:((n.x*e.y-n.y*e.x)*(t.x-r.x)-(n.x-e.x)*(t.x*r.y-t.y*r.x))/((n.x-e.x)*(t.y-r.y)-(n.y-e.y)*(t.x-r.x)),y:((n.x*e.y-n.y*e.x)*(t.y-r.y)-(n.y-e.y)*(t.x*r.y-t.y*r.x))/((n.x-e.x)*(t.y-r.y)-(n.y-e.y)*(t.x-r.x))}},p.toString=function(){return"Parallel Coordinates: "+v.dimensions.length+" dimensions ("+d3.keys(v.data[0]).length+" total) , "+v.data.length+" rows"},p.version="0.4.0",p},d3.renderQueue=function(n){var e=[],t=10,r=function(){},i=0,s=function(n){n&&s.data(n),s.invalidate(),r(),s.render()};return s.render=function(){function r(){if(!a)return!0;if(i>e.length)return!0;var r=e.slice(i,i+t);i+=t,r.map(n)}i=0;var a=!0;s.invalidate=function(){a=!1},d3.timer(r)},s.data=function(n){return s.invalidate(),e=n.slice(0),s},s.rate=function(n){return arguments.length?(t=n,s):t},s.remaining=function(){return e.length-i},s.clear=function(n){return arguments.length?(r=n,s):(r(),s)},s.invalidate=function(){},s};
//# sourceMappingURL=d3.parcoords.min.js.map