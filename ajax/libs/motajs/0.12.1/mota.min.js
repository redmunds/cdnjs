/*!
 * MotaJS v0.12.1
 * http://jdmota.github.io/motajs/
 *
 * Released under the MIT license
 * https://github.com/jdmota/MotaJS/blob/master/LICENSE.md
 *
 * Project
 * https://github.com/jdmota/MotaJS
 *
 * Date: 2016-04-16T17:49Z
 */
(function(){function t(t){return t&&t.Object===Xt?t:null}function e(t){var e=se.iterator;return e?t[e]():t["@@iterator"]()}function n(t){var e=se.iterator;return e?t[e]:t["@@iterator"]}function r(t,e){var n=se.iterator;n&&(t[n]=e),t["@@iterator"]=e}function i(t,e,n){var i=t.prototype;i.entries=function(){return new e(this,pe)},i.values=function(){return new e(this,fe)},i.keys=function(){return new e(this,he)},r(i,i[n])}function o(t,e){return null==e?t:function(n,r,i){return t.call(e,n,r,i)}}function u(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t)===ze)return}function s(t,e,n){for(var r,i=0;!(r=n.next()).done;){if(e(r.value,i,t)===ze)return;i++}}function c(t,e,n){for(var r,i;!(r=n.next()).done&&(i=r.value,e(i[1],i[0],t)!==ze););}function a(t,e){for(var n,r=0,i=Te(t);r<i.length;r++)if(n=i[r],e(t[n],n,t)===ze)return}function l(t,r,i){var o,u;return o=n(t),Se(o)?(u=e(t),o===t.entries?c(t,r,u):s(t,r,u)):i===!1?void 0:a(t,r)}function h(t,e){return null==e?t():t.call(e)}function f(t,e){switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);case 4:return t(e[0],e[1],e[2],e[3]);case 5:return t(e[0],e[1],e[2],e[3],e[4]);default:return t.apply(void 0,e)}}function p(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2]);case 4:return t.call(e,n[0],n[1],n[2],n[3]);case 5:return t.call(e,n[0],n[1],n[2],n[3],n[4]);default:return t.apply(e,n)}}function d(t,e,n){return t?n?null==e?f(t,n):p(t,e,n):h(t,e):void 0}function v(t,e){var n={},r=0;return function(i){return void 0===e||i.length>e?(void 0===n[i]&&(r===Qe&&(n={},r=0),n[i]=t(i),r++),n[i]):t(i)}}function m(t){return t>>>1&1073741824|3221225471&t}function g(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}function y(t,e){return t=Ye(t,3432918353),t=Ye(t<<15|t>>>-15,461845907),t=Ye(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=Ye(t^t>>>16,2246822507),t=Ye(t^t>>>13,3266489909),m(t^t>>>16)}function b(t){var e=!1,n=!0,r=e?1:0,i=t.forEach(n?e?function(t,e){r=31*r+g(w(t),w(e))|0}:function(t,e){r=r+g(w(t),w(e))|0}:e?function(t){r=31*r+w(t)|0}:function(t){r=r+w(t)|0});return y(r,i)}function _(t){return Ke.get(t,"hash")}function w(t){var e,n;if(!t)return 0;if("function"==typeof t.valueOf&&(t=t.valueOf(),!t))return 0;if(t===!0)return 1;if(e=typeof t,"number"===e){if(!Ze(t))return t>0?1:-1;for(n=0|t,n!==t&&(n^=4294967295*t);t>4294967295;)t/=4294967295,n^=t;return m(n)}return"string"===e?Ge(t):(n=_(t),void 0!==n?n:("function"==typeof t.isImmutable&&t.isImmutable()?n=b(t):(n=Xe++,1073741824&Xe&&(Xe=1)),Ke.setup(t,"hash",n),n))}function x(t){return ve(t)||!!t&&Se(n(t))}function E(t){return ve(t)||!!t&&t.values!==t.keys&&Se(t.values)&&Se(t.keys)&&t.values===n(t)}function j(t){return!!t&&Se(t.entries)&&t.entries===n(t)}function S(t){return E(t)||j(t)}function k(t,e){return function(){for(var n=0;n<t.length;n++)d(t[n],this,arguments);return d(e,this,arguments)}}function T(t,e){for(var n=[],r=0,i=r+e;i<t.length;r++,i++)n[r]=t[i];return n}function M(t,e,n,r,i){this.type=t,this.namespaces=e,this.handler=n,this.context=r,this.isRegExp=i,this.once=!1,this._index=-1}function z(t,e){var n,r,i,o=[],u=t[0],s=t[1],c=t[2],a=ye(u),l="regexp"===a;if(l)e.push(new M(u,void 0,s,c,l));else if("object"===a){s&&(c=s);for(r in u)z([r,u[r],c],e)}else for(u=(u||"").match(Dn)||[""],n=0;n<u.length;n++)r=(u[n].match(qn)||o)[0],i=u[n].match($n),e.push(new M(r,i,s,c,l));return e}function L(t,e){var n,r,i;for(t.length>e.length?(n=e,r=t):(n=t,r=e),i=n.length;i--;)if(r.indexOf(n[i])>-1)return!0;return!1}function C(t,e,n,r,i,o,u){var s,c=(!n||tn(t.type,n)||u&&t.isRegExp&&(s=n.match(t.type)))&&(!i||t.handler===i)&&(!r||0===r.length||t.namespaces&&L(t.namespaces,r))&&(!o||t.context===o);return void 0===s?c:s}function O(){this.arr=[],this._maxListeners=void 0}function A(t){return Ke.setup(t,"events",new O)}function N(t){this.data=t,this.left=null,this.right=null}function I(t,e,n){var r=n.childNodes,i=e>=r.length?null:r.item(e);t!==i&&n.insertBefore(t,i)}function P(t){t.queued&&t.update(null,null,t.renderToString)}function R(t){var e=t.elem,n=t.name,r=t.value,i=t.type;"attr"===i?null==r?e.removeAttribute(n):e.setAttribute(n,r+""):"prop"===i?e[n]=r:"style"===i&&(e.style[n]=r)}function V(t){var e=t.elem;e.parentNode.removeChild(e)}function U(t){return I(t.elem,t.index,t.parent)}function D(t){t.component[t.name](t.arg)}function $(t){var e,n;t&&t.type?(this.originalEvent=t,this.type=t.type):this.type=t;for(e in this.originalEvent)br[e]||null!=this[e]||jr(e);this.type in xr&&(this.type=xr[this.type]),this.timeStamp||(this.timeStamp=Xn()),n=this.target,n&&3===n.nodeType&&(this.target=n.parentNode)}function q(t){return t.nodeType&&3!==t.nodeType||t===t.window}function F(t){this.children=[],this.owner=t,this.bitmap=0}function H(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,127&t}function W(t,e,n,r){var i=n.hash,o=r.hash,u=new F(t),s=u.children,c=(0===e?i:i>>>e)&Dr,a=(0===e?o:o>>>e)&Dr;return u.bitmap=1<<c|1<<a,a>c?(s[0]=n,s[1]=r):c>a?(s[0]=r,s[1]=n):s[0]=W(t,e+Vr,n,r),u}function B(t,e,n,r){this.children=[n,r],this.hash=t,this.owner=e}function K(t,e,n,r){this.key=t,this.value=e,this.hash=n,this.owner=r}function Q(t,e){return{node:t,index:0,prev:e}}function Y(t,e,n){return{value:n===pe?[t,e]:n===he?t:e,done:!1}}function G(){return Fr.changeValue=!1,Fr.changeSize=!1,Fr.oldValue=void 0,Fr}function X(t,e,n,r){var i,o,u=w(e),s=t.__owner,c=n===Rr,a=t.__root,l=0,h=G();return a?a=t.__root.modify(e,n,u,0,s,h):c||(h.changeValue=!0,h.changeSize=!0,a=new K(e,n,u,s)),h.changeValue?(l=t.size+(h.changeSize?c?-1:1:0),l||s?(s?(t.__root=a,t.size=l):t=nt(!1,l,a),s&&!r&&(i={type:c?"delete":h.changeSize?"add":"update",key:e},i.name=e,c?i.oldValue=h.oldValue:(i.value=i.newValue=n,h.changeSize||(i.oldValue=h.oldValue)),o=t.__changes,o||(o=t.__changes=[]),o.push(i)),t):Wr):t}function Z(){}function J(t){return!(!t||!t[$r])}function tt(t){return t===Pr?(this.__root=null,this.__owner=null,this.__changes=null,this.size=0,this):nt(!0,0,null).merge(t,Pr)}function et(t){return t===Pr?(this.__root=null,this.__owner=null,this.size=0,this):Wr.merge(t,Pr)}function nt(t,e,n){var r=t?new tt(Pr):new et(Pr);return r.size=e||0,r.__root=n,t&&(r.__owner={}),r}function rt(){this.first=null,this.last=null}function it(t){return t===Yr||t===Xr||t===Gr}function ot(t,e,n){t.state!==e&&t.state===Yr&&it(e)&&(t.value=n,t.state=e,ct(t))}function ut(t){return!(!t||!t[Qr])}function st(t,e){if(t===e)ot(t,Xr,new TypeError("The promise and its value refer to the same object"));else if(ut(e))e.state===Yr?e.then(function(e){st(t,e)},function(e){ot(t,Xr,e)}):ot(t,e.state,e.value);else if(ke(e)||Se(e)){var n,r=!1;try{n=e.then,Se(n)?n.call(e,function(e){r||(st(t,e),r=!0)},function(e){r||(ot(t,Xr,e),r=!0)}):(ot(t,Gr,e),r=!0)}catch(i){r||(ot(t,Xr,i),r=!0)}}else ot(t,Gr,e)}function ct(t){var e=t.queue;t.state===Yr||e.isEmpty()||Zr(function(){for(;!e.isEmpty();){var n,r=e.shift(),i=null;t.state===Gr?i=r.handlers.fulfill:t.state===Xr&&(i=r.handlers.reject);try{n=i(t.value)}catch(o){ot(r,Xr,o);continue}st(r,n)}})}function at(t){return t}function lt(t){throw t}function ht(t){Zr(function(){throw t})}function ft(t){if(null!=t){if(!Se(t))throw new TypeError(t+" is not a function");return t}}function pt(t,e){var n=t.cancel;if(t._done=!0,t.subscriber=null,n)if(t.cancel=null,e)try{n()}catch(r){}else n();if(e)throw e}function dt(){this.arr=[]}function vt(t){this.multicast=t}function mt(t){var e=this._subscription,n=this._subs;n&&(n.remove(t),e&&this._refCount&&!n.length()&&e.unsubscribe())}function gt(t){return!(!t||t.charCodeAt(0)!==yi)}function yt(t,e){if(!t||!vn(t))return t+"";var n=gt(t)?"/":"",r=t.replace(mi,"/").split("/"),i=bi(r,!n),o=i.pop();return e?o.replace(wi(e),""):o}function bt(t){if(!vn(t))return"";var e=t.replace(ji,"").match(Ei);return e&&e[2]&&e[1]?e[2]:""}function _t(){var t,e,n=[];for(t=0;t<arguments.length;t++)e=arguments[t],e&&vn(e)&&n.push(e);return _i(n.join("/"))}function wt(t,e,n){var r,i=1,o=null,u=e.regexp,s=e.names,c=t.match(u);if(e.negated)return c?null:{};if(c)for(o={};i<c.length;i++)r=s[i-1],(n||"number"!=typeof r)&&(o[r]=c[i]?Si(c[i]):c[i]);return o}function xt(t){return t.replace(gi,"\\$1")}function Et(t){return t?t.replace(Ti,"\\$1"):""}function jt(t,e,n,r,i){var o=r,u=i?"\\/":"\\/"+Li;return n&&(o+=t?"(?:"+u+o+")*":"(?:"+o+")*"),o=e?t?"(?:"+u+"("+o+"))?":"("+o+")?":t?u+"("+o+")":"("+o+")"}function St(t,e,n,r){var i,o,u,s,c,a="";return i=!!e[2],o=e[6],u=e[7]||"*"===o,s=e[8],i&&(c=t.charCodeAt(n),c&&c!==yi&&(a+="\\/",i=!1)),a+jt(i,u||s||"?"===o,u||"+"===o,Et(e[4]||e[5])||Ci,r)}function kt(t,e){for(var n,r,i=[],o="",u=0,s=0,c=0,a=t.charCodeAt(0)===Oi,l=e&&e.caseSensitive,h=e&&void 0!==e.end?e.end:!0,f=(a?t.slice(1):t).replace(ki,"")||"/",p=e&&e.dot;n=zi.exec(f);)c=n.index,o+=xt(f.slice(s,c)),s=c+n[0].length,r=n[1],r?o+=r:(o+=St(f,n,s,p),i.push(n[3]||u++));return s<f.length&&(o+=xt(f.substr(s))),{regexp:new RegExp("^"+o+"(?:/(?=$))?"+(h?"$":"(?=\\/|$)"),l?"":"i"),names:i,negated:a}}function Tt(t,e){var n,r,i,o,u,s;for(n=bi(t.split("/"),!0),r=bi(e.split("/"),!0),i=Math.min(n.length,r.length),o=i,u=0;i>u;u++)if(n[u]!==r[u]){o=u;break}for(s=[],u=o;u<n.length;u++)s.push("..");return s=s.concat(r.slice(o)),s.join("/")}function Mt(){for(var t,e="",n=arguments.length;n--&&(t=arguments[n],!t||(e=e?t+"/"+e:t,!gt(e))););return _i(e)}function zt(t,e,n,r){Se(e)&&(n=e,e=t,t=void 0),e||qe("mota.Router.route","Provide a non-empty path"),this.name=t,this.parent=r,this.path=(r.path||"")+"/"+e.replace(Vi,""),this.params=Wi(this.path),this.routes=[],n.call(this)}function Lt(){this.routes=[],ie&&(this.location=this.history&&this.history.location||ie.location,this.history=ie.history,this.window=ie),this.initialize&&d(this.initialize,this,arguments)}function Ct(t){var e=t.component;t.dontQueue=!0,t.queued=!1,e.componentWillUnmount&&e.componentWillUnmount(),to.remove(t.el),e.el=e.__internal__=null,t.traverse(Ct)}function Ot(t){return t.replace(ao,"-$1").toLowerCase()}function At(t){return t.replace(lo,"&amp;").replace(ho,"&lt;").replace(fo,"&gt;")}function Nt(t){return At(t).replace(po,"&quot;")}function It(t){var e="";return a(t,function(t,n){t&&(e+=Ot(n)+":"+t+";")}),e}function Pt(t){var e="";return t._attrs.style=t.style,t._attrs["class"]=t.className||t._attrs["class"],a(t._attrs,function(t,n){"style"===n&&(t=It(t)),t&&(e+=" "+n+'="'+Nt(t)+'"')}),e}function Rt(t){var e=t._tagName,n="<"+e+Pt(t);return n+=co[e]?" />":">"+t.innerHTML+"</"+e+">"}function Vt(t){switch(t.nodeType){case 3:return At(t.nodeValue);case 8:return"<!--"+t.nodeValue+"-->";default:return Rt(t)}}function Ut(t){for(var e=0,n="",r=t.childNodes;e<r.length;e++)n+=Vt(r[e]);return n}function Dt(t){return this[t]}function $t(t){this._tagName=(t+"").toLowerCase(),this._attrs={},this.nodeType=1,this.className="",this.childNodes=[],this.childNodes.item=Dt,this.style={}}function qt(t){this.nodeValue=t+"",this.nodeType=3,this.nodeName="#text"}function Ft(t){this.nodeValue=t+"",this.nodeType=8,this.nodeName="#comment"}function Ht(t){return t.charAt(0).toUpperCase()+t.substring(1)}function Wt(t,e){return null==e||"boolean"==typeof e||""===e?"":0===e||jo[t]||isNaN(e)?e+"":("string"==typeof e&&(e=e.trim()),e+"px")}function Bt(t,e,n,r,i){n=So(n),n&&(i=Wt(n,i),e.style[n]!==i&&ar(e,n,i,"style"))}function Kt(){this.__internal__=new Co(this),this.el=null,this.props=null}function Qt(t){var e=new Co;return e.el=t,to.add(e)}function Yt(){}var Gt={"function":!0,object:!0},Xt=Object,Zt=Gt[typeof exports]&&exports&&!exports.nodeType?exports:void 0,Jt=Gt[typeof module]&&module&&!module.nodeType?module:void 0,te=Jt&&Jt.exports===Zt?Zt:void 0,ee=t(Zt&&Jt&&"object"==typeof global&&global),ne=!!ee,re=t(Gt[typeof self]&&self),ie=t(Gt[typeof window]&&window),oe=t(Gt[typeof this]&&this),ue=ee||ie!==(oe&&oe.window)&&ie||re||oe||Function("return this")(),se="function"==typeof Symbol?Symbol:{},ce=function(t){return se[t]||"@@"+t},ae=function(t,e){var n=se[e];return n?t[n]:t["@@"+e]},le=function(t,e,n){var r=se[e];r&&(t[r]=n),t["@@"+e]=n},he=0,fe=1,pe=2,de=Object.freeze({value:void 0,done:!0}),ve=Array.isArray,me={}.toString,ge={"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Error]":"error","[object Function]":"function","[object GeneratorFunction]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string","[object Symbol]":"symbol"},ye=function(t){var e=typeof t;return"object"===e||"function"===e?null===t?"null":ge[me.call(t)]||"object":e},be="[object Window]",_e="[object global]",we=function(t){if(t===ue)return!0;if(!t||"object"!=typeof t)return!1;if(!ne&&t.window!==t)return!1;var e=me.call(t);return e===be||e===_e},xe=Math.pow(2,53)-1,Ee=function(t){var e,n=ye(t);return"array"===n?!0:"object"!==n||we(t)?!1:(e="length"in t&&t.length,0===e?!0:"number"==typeof e&&e>0&&xe>=e&&e-1 in t)},je=function(t){return"function"===ye(t)};"function"!=typeof/./&&"object"!=typeof Int8Array&&(je=function(t){return"function"==typeof t||!1});var Se=je,ke=function(t){var e;return!!t&&("function"==(e=typeof t)||"object"===e)},Te=Object.keys,Me=function(t,e){if(!ke(t))return[];if(e){var n,r=[];for(n in t)r.push(n);return r}return Te(t)},ze={},Le=function(t,e,n,r){if(t&&"object"==typeof t){var i=o(e,n);return ve(t)||Ee(t)?u(t,i):l(t,i,r)}};Le.BREAK=ze;var Ce=Object.create,Oe=function(t){return"object"===ye(t)},Ae=function(t){var e,n,r,i,o,u,s=1,c=arguments.length,a=!1;if(t===!0&&(a=t,t=arguments[s],s++),!ke(t))return t;for(;c>s;s++)if(null!=(e=arguments[s]))for(n in e)r=t[n],i=e[n],t!==i&&(a&&i&&("object"===(o=ye(i))||"array"===o)?(u="array"===o?r&&ve(r)?r:[]:r&&Oe(r)?r:{},t[n]=Ae(a,u,i)):void 0!==i&&(t[n]=i));return t},Ne={}.hasOwnProperty,Ie=function(t,e){return null!=t&&Ne.call(t,e)},Pe=function(t,e,n){var r,i,o=this;return i=t&&Ie(t,"constructor")?t.constructor:o,r=n?function(){var t=Ce(r.prototype),e=d(i,t,arguments);return ke(e)?e:t}:function(){return d(i,this,arguments)},r.prototype=Ce(o.prototype),r.prototype.constructor=r,t&&Ae(r.prototype,t),Ae(r,o,e),r.__super__=o.prototype,r},Re=[],Ve=Re.slice,Ue=function(t){var e,n,r;if(t===!0&&Ie(arguments,1)&&(e=t,t=arguments[1]),!ke(t))return t;switch(ye(t)){case"array":return e?Ae(e,[],t):Ve.call(t);case"number":case"string":case"date":case"boolean":return new(n=t.constructor)(t);case"regexp":return n=t.constructor,r=new n(t),r.lastIndex=t.lastIndex,r;default:return e?Ae(e,{},t):Ae({},t)}},De=function(t,e){return function(n){var r,i,o,u,s,c,a=arguments.length;if(2>a||null==n)return n;for(r=1;a>r;r++)for(i=arguments[r],o=Me(i,t),u=o.length,s=0;u>s;s++)c=o[s],e&&void 0!==n[c]||(n[c]=i[c]);return n}},$e=De(!0,!0),qe=function(t,e){throw new Error(t+" ERROR: "+e)},Fe=function(t){return ae(t,"species")||t},He=Object.defineProperty,We="function"==typeof Symbol;ne&&/^v0/.test(process.version)&&(We=!1);var Be=We&&Symbol("mota internal")||("__mota__"+Math.random()).replace(/0\./g,""),Ke={setup:function(t,e,n,r){var i=t[Be];return i||(i={view:null,events:null},r||We?t[Be]=i:He(t,Be,{writable:!0,value:i})),i[e]?i[e]:i[e]=n},get:function(t,e){var n=t[Be];return n&&n[e]},remove:function(t,e){var n=t[Be];n&&(n[e]=null)}},Qe=255,Ye=Math.imul;"function"==typeof Ye&&-2===Ye(4294967295,2)||(Ye=function(t,e){var n=t>>>16&65535,r=65535&t,i=e>>>16&65535,o=65535&e;return r*o+(n*o+r*i<<16>>>0)|0});var Ge=v(function(t){for(var e=0,n=0;e<t.length;e++)n=31*n+t.charCodeAt(e)|0;return m(n)},16),Xe=1,Ze=isFinite,Je=function(t,e,n){if(t===e)return!n||0!==t||1/t===1/e;if(t!==t)return e!==e;if(null==t||null==e)return t===e;var r=typeof t;if("function"!==r&&"object"!==r&&"object"!=typeof e)return!1;var i=me.call(t);if(i!==me.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return t=+t,e=+e,t!==t?e!==e:t===e?!n||0!==t||1/t===1/e:!1;case"[object Date]":case"[object Boolean]":return+t===+e;default:return i}},tn=function(t,e){var n=Je(t,e,!1);if(n===!0||n===!1)return n;if(t.size!==e.size)return!1;if(Se(t.isMutable)&&!t.isMutable()&&Se(e.isMutable)&&!e.isMutable()){var r=_(t),i=_(e);if(null!=r&&null!=i&&r!==i)return!1;var o=!0,u={};return t.forEach(function(t,n){var r=e.get(n,u);return r!==u&&tn(t,r)?void 0:o=!1}),o}return!1},en=function(t){return"[object Arguments]"===me.call(t)},nn=function(t){return t===!0||t===!1||"boolean"===ye(t)},rn=function(t){return"date"===ye(t)},on=function(t,e){"undefined"!=typeof console&&console.error(t+" WARNS: "+e)},un=ue,sn=un&&un.document,cn=function(){return un},an=function(){return sn},ln=function(t){we(t)&&(un=t,sn=t.document)},hn="[object HTMLDocument]",fn="[object Document]",pn=function(t){var e,n=an();if(n&&t===n)return!0;if(!t||null!==t.parentNode||!(e=t.defaultView))return!1;if(ne)return we(e);var r=me.call(t);return r===hn||r===fn},dn=function(t){return t&&1===t.nodeType?ne?!0:me.call(t).indexOf("Element")>-1:!1},vn=function(t){return"string"===ye(t)},mn=function(t){if(null==t)return!0;if(ve(t)||vn(t)||en(t))return 0===t.length;for(var e in t)if(Ie(t,e))return!1;return!0},gn=function(t){var e;return!t||"object"!=typeof t||"[object Object]"!==me.call(t)||Ie(t,"constructor")?!1:(e=t.constructor)?Se(e)&&e instanceof e:!0},yn=function(t,e,n,r){var i=Je(t,e,!0);if(i===!0||i===!1)return i;var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var u=t.constructor,s=e.constructor;if(!(u===s||gn(t)&&gn(e)))return!1}n=n||[],r=r||[];for(var c=n.length;c--;)if(n[c]===t)return r[c]===e;if(n.push(t),r.push(e),o){if(c=t.length,c!==e.length)return!1;for(;c--;)if(!yn(t[c],e[c],n,r))return!1}else{var a,l=Me(t);if(c=l.length,Me(e).length!==c)return!1;for(;c--;)if(a=l[c],!Ie(e,a)||!yn(t[a],e[a],n,r))return!1}return n.pop(),r.pop(),!0},bn=function(t,e){return yn(t,e)},_n=function(t){return"error"===ye(t)},wn=function(t){return"number"===ye(t)},xn=isFinite,En=function(t){return wn(t)&&xn(t)},jn=function(t){return t!=+t&&wn(t)},Sn=function(t){return null==t},kn=function(t){return null===t},Tn=function(t){return"regexp"===ye(t)},Mn=function(t){return void 0===t},zn=function(t,e){"undefined"!=typeof console&&console.log(t+" LOG: "+e)},Ln=function(t,e){var n,r,i,o=t&&t.prototype,u={};if(!o)return t;for(var s=0;s<e.length;s++){n=e[s];for(r in n)u[r]||(u[r]=[]),u[r].push(n[r])}for(r in u)i=o[r],o[r]=k(u[r],Se(i)&&i);return t},Cn=ue.mota,On=function(){return Cn&&ue.mota===this&&(ue.mota=Cn),this},An=function(){},Nn=function(t,e){return function(){return d(t,e,T(arguments,0))}},In=function(t){for(var e=Me(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},Pn={},Rn=function(t){return t=t?t+"":"",Pn[t]||(Pn[t]=0),t+ ++Pn[t]},Vn=function(t,e){var n,r;for(n in e)if(r=e[n],r&&!r(t[n],n,t))return!1;return!0},Un={apply:d,classExtend:Pe,clone:Ue,extend:Ae,defaults:$e,err:qe,getSpecies:Fe,has:Ie,is:tn,isArguments:en,isArray:ve,isArrayLike:Ee,isBoolean:nn,isDate:rn,isDocument:pn,isElement:dn,isEmpty:mn,isEqual:bn,isError:_n,isFinite:En,isFunction:Se,isIterable:x,isIndexed:E,isKeyed:j,isAssociative:S,isNaN:jn,isNil:Sn,isNull:kn,isNumber:wn,isObject:Oe,isObjectLike:ke,isPlainObject:gn,isRegExp:Tn,isString:vn,isUndefined:Mn,isWindow:we,keys:Me,log:zn,mixin:Ln,noConflict:On,noop:An,noPartial:Nn,pairs:In,type:ye,uniqueId:Rn,validate:Vn,warn:on},Dn=/\S+/g,$n=/\.[^.]+/g,qn=/^[^.]+/g,Fn={length:function(){return this.arr.length},add:function(t){t._index=this.arr.push(t)-1},remove:function(t){for(var e=this.arr,n=t._index,r=n+1,i=e.length;i>r;n+=1,r+=1)e[n]=e[r],e[n]._index=n;e.pop()},forEach:function(t){for(var e=this.arr,n=0,r=e.length;r>n&&t(e[n])!==!1;n++);},safeForEach:function(t){for(var e=this.arr,n=0,r=e.length,i=[];r>n;n++)i.push(e[n]);for(n=0;r>n;n++)t(i[n])}};O.prototype=Ae({constructor:O,getListeners:function(t,e,n){var r="getFirst"===n,i="trigger"===n,o=e.type,u=e.namespaces,s=e.handler,c=e.context;this.forEach(function(n){var a=C(n,e,o,u,s,c,i);return a&&(t.push({listener:n,string:o,match:a}),r)?!1:void 0})}},Fn);var Hn=function(t,e,n,r,i){var o,u,s,c,a,l=0;if(!t)return l;if(u="on"===e?A(t):Ke.get(t,"events"),s=z(r,[]),"on"===e)for(o=0;o<s.length;o++)c=s[o],c.type&&c.handler&&n(t,u,{listener:c},i);else if(u){for(a=[],o=0;o<s.length;o++)u.getListeners(a,s[o],e);if(l=a.length,n)for(o=0;l>o&&n(t,u,a[o],i)!==!1;o++);}return l},Wn=function(t,e,n,r){var i=n.listener;r.push({type:i.type,namespaces:i.namespaces,handler:i.handler,context:i.context,once:i.once,isRegExp:i.isRegExp})},Bn=function(t,e,n){var r=[];return Hn(this,"get",Wn,[t,e,n],r),r},Kn=function(){var t=Ke.get(this,"events"),e=t&&t._maxListeners;return"number"==typeof e?e:!1},Qn=function(t,e,n){var r=Hn(this,"getFirst",void 0,[t,e,n]);return r>0},Yn=function(t,e,n){var r=n.listener;r.handler=void 0,e.remove(r)},Gn=function(t,e,n){return Hn(this,"off",Yn,[t,e,n]),this},Xn=Date.now;N.prototype={add:function(t){this.data.depth-t.depth>0?this.addLeft(t):this.addRight(t)},addLeft:function(t){var e=this.left;e?e.add(t):this.left=new N(t)},addRight:function(t){var e=this.right;e?e.add(t):this.right=new N(t)},traverse:function(t){var e=this.left,n=this.right;e&&e.traverse(t),t(this.data),n&&n.traverse(t)}};var Zn=function(){this.root=null};Zn.prototype={isEmpty:function(){return!this.root},add:function(t){this.root?this.root.add(t):this.root=new N(t)},reset:function(){this.root=null},resetAndTraverse:function(t){var e=this.root;this.root=null,e&&e.traverse(t)}};var Jn=0,tr=!1,er=new Zn,nr=[],rr=[],ir=[],or=[],ur=[],sr=[],cr=function(){tr||Jn||er.isEmpty()||(tr=!0,er.resetAndTraverse(P),u(nr,R),u(rr,V),u(ir,U),u(or,U),u(ur,R),u(sr,D),nr.length=0,rr.length=0,ir.length=0,or.length=0,ur.length=0,sr.length=0,tr=!1,cr())},ar=function(t,e,n,r){nr.push({elem:t,name:e,value:n,type:r})},lr=function(t){rr.push({elem:t,index:null,parent:null})},hr=function(t,e,n){ir.push({elem:t,index:e,parent:n})},fr=function(t,e,n){or.push({elem:t,index:e,parent:n})},pr=function(t,e,n,r){ur.push({elem:t,name:e,value:n,type:r})},dr=function(t,e,n){sr.push({component:t,name:e,arg:n})},vr=function(t,e){var n=e?" Please check the code for the "+e.constructor.displayName+" component.":"";Jn=0,tr=!1,er.reset(),nr.length=0,rr.length=0,ir.length=0,or.length=0,ur.length=0,sr.length=0,qe("mota.view.Component.update",t+n)},mr=function(t){er.add(t),cr()},gr=function(){Jn++},yr=function(){Jn--,cr()},br={},_r=/^key/,wr=/^(?:mouse|touch|pointer|contextmenu|drag|drop)|click/,xr={mousewheel:"wheel",DOMMouseScroll:"whell"},Er={which:function(t){if(wr.test(t.type)){var e=t.button;return t.which||void 0===e?t.which:1&e?1:2&e?3:4&e?2:0}return _r.test(t.type)?null==t.which?null==t.charCode?t.keyCode:t.charCode:t.which:void 0},pageX:function(t,e){var n,r,i;return null==t.pageX&&null!=t.clientX?(n=e.ownerDocument||an(),r=n.documentElement,i=n.body,t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0)):t.pageX},pageY:function(t,e){var n,r,i;return null==t.pageY&&null!=t.clientY?(n=e.ownerDocument||an(),r=n.documentElement,i=n.body,t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)):t.pageY},path:function(t,e){for(var n=e,r=[n];n=n.parentNode||n.defaultView;)r.push(n);return r}},jr=function(t){br[t]=!0,Object.defineProperty($.prototype,t,{enumerable:!0,configurable:!0,get:function(){var e,n;return this.originalEvent&&(n=Er[t],e=n?n(this.originalEvent,this.target):this.originalEvent[t]),this[t]=e},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})};$.prototype={constructor:$,isDefaultPrevented:!1,isPropagationStopped:!1,isImmediatePropagationStopped:!1,stopPropagation:function(){this.isPropagationStopped=!0},stopImmediatePropagation:function(){this.isPropagationStopped=!0,this.isImmediatePropagationStopped=!0},preventDefault:function(){this.isDefaultPrevented=!0,this.originalEvent.preventDefault()}},Te(Er).forEach(jr);var Sr=function(t,e,n,r){var i=n.listener,o=i.handler;return r.isImmediatePropagationStopped?!1:(i.once&&Yn(t,e,n),r.currentTarget=t,void(r.result=d(o,void 0===i.context?t:i.context,i.isRegExp?[{string:n.string,match:n.match},r]:[r])))},kr=function(t){var e=new $(t),n=e.type,r=e.path,i=0;for(gr();i<r.length&&!e.isPropagationStopped&&(Hn(r[i],"trigger",Sr,[n],e),e.bubbles);)i++;yr()},Tr={},Mr={dispatchEvents:kr,register:function(t,e){if(!Tr[e]&&q(t)){var n=t.ownerDocument,r=n&&n.defaultView||cn();r.addEventListener&&("on"+e in r||wr.test(e))&&(r.addEventListener(e,kr,!0),Tr[e]=!0)}}},zr=function(t,e,n,r){var i=n.listener;r&&(i.once=!0),e.add(i),e.length()>e._maxListeners&&on("mota.Events.on","Possible memory leak detected. Use `setMaxListeners` to increase the limit of listeners."),Mr.register(t,i.type)},Lr=function(t,e,n,r){return Hn(this,"on",zr,[t,e,n],r),this},Cr=function(t,e,n){return Lr.call(this,t,e,n,!0)},Or=function(t){return("number"!=typeof t||0>t||isNaN(t))&&(t=void 0),A(this)._maxListeners=t,this},Ar=function(t,e,n,r){var i=n.listener,o=i.handler;i.once&&Yn(t,e,n),d(o,void 0===i.context?t:i.context,i.isRegExp?[{string:n.string,match:n.match}].concat(r):r)},Nr=function(t){return Hn(this,"trigger",Ar,[t],T(arguments,1)),this},Ir={getListeners:Bn,getMaxListeners:Kn,hasListeners:Qn,off:Gn,on:Lr,once:Cr,setMaxListeners:Or,trigger:Nr},Pr={},Rr={},Vr=5,Ur=32,Dr=Ur-1,$r="@@__MOTA_MAP__@@";F.prototype={isLeaf:!1,loop:function(t,e){for(var n=this.children,r=0;r<n.length;r++)if(n[r].loop(t,e)===!0)return!0;return!1},get:function(t,e,n,r){var i=void 0===e?w(t):e,o=1<<((0===n?i:i>>>n)&Dr),u=this.bitmap;return 0===(u&o)?r:this.children[H(u&o-1)].get(t,i,n+Vr,r)},modify:function(t,e,n,r,i,o){var u,s,c,a,l,h,f,p,d,v=this,m=this.children;if(u=(0===r?n:n>>>r)&Dr,s=1<<u,c=this.bitmap,a=0!==(c&s),!a&&e===Rr)return this;if(l=H(c&s-1),a?(p=this.children[l],f=p.modify(t,e,n,r+Vr,i,o)):(o.changeValue=!0,o.changeSize=!0,f=new K(t,e,n,i)),!f){if(h=m.length,1===h)return null;if(d=m[1^l],2===h&&d.isLeaf)return d}return f!==p&&(v=a?f?this.cloneUpdate(i,l,f):this.cloneSpliceOut(i,l):this.cloneSpliceIn(i,l,f),v.bitmap=a?f?c:c^s:c|s),v},cloneUpdate:function(t,e,n){if(t&&this.owner===t)return this.children[e]=n,this;for(var r=this.children,i=new F(t),o=i.children,u=0;u<r.length;u++)o[u]=r[u];return o[e]=n,i},cloneSpliceOut:function(t,e){var n=this.children,r=n.length-1,i=0;if(t&&this.owner===t){for(i=e;r>i;i++)n[i]=n[i+1];return n.pop(),this}for(var o=new F(t),u=o.children;e>i;i++)u[i]=n[i];for(;r>i;i++)u[i]=n[i+1];return o},cloneSpliceIn:function(t,e,n){var r=this.children,i=r.length+1,o=0;if(t&&this.owner===t){for(o=i-1;o>e;o--)r[o]=r[o-1];return r[e]=n,this}for(var u=new F(t),s=u.children;e>o;o++)s[o]=r[o];for(s[o++]=n;i>o;o++)s[o]=r[o-1];return u}},B.prototype={isLeaf:!0,loop:function(t,e){for(var n=this.children,r=0;r<n.length;r++)if(n[r].loop(t,e)===!0)return!0;return!1},get:function(t,e,n,r){for(var i,o=this.children,u=o.length;u--;)if(i=o[u],tn(i.key,t))return i.value;return r},modify:function(t,e,n,r,i,o){var u,s,c,a,l,h=this,f=0,p=e===Rr;if(this.hash===n){for(u=this.children,l=u.length;l>f;f++)if(s=u[f],s&&tn(t,s.key)){c=s;break}return(c?c.value===e:p)?this:(o.changeValue=!0,!p&&c||(o.changeSize=!0),c?(a=c.modify(t,e,n,r,i,o))?(h=this.clone(i),h.children[f]=a,h):2===l?u[1^f]:1===l?null:(h=this.clone(i),f===l-1?h.children.pop():h.children[f]=h.children.pop(),h):(h=this.clone(i),h.children[f]=new K(t,e,n,i),h))}return p?this:(o.changeValue=!0,o.changeSize=!0,W(i,r,this,new K(t,e,n,i)))},clone:function(t){if(t&&this.owner===t)return this;for(var e=this.children,n=new B(this.hash,t,e[0],e[1]),r=3;r<e.length;r++)n.children[r]=e[r];return n}},K.prototype={isLeaf:!0,loop:function(t,e){return t(this.value,this.key,e)},get:function(t,e,n,r){return tn(this.key,t)?this.value:r},modify:function(t,e,n,r,i,o){var u=this;return this.hash===n?tn(t,this.key)?this.value===e?this:(o.changeValue=!0,o.oldValue=this.value,e===Rr?(o.changeSize=!0,null):(u=this.clone(i),u.value=e,u)):e===Rr?this:(o.changeValue=!0,o.changeSize=!0,new B(n,i,this,new K(t,e,n,i))):e===Rr?this:(o.changeValue=!0,o.changeSize=!0,W(i,r,this,new K(t,e,n,i)))},clone:function(t){return t&&this.owner===t?this:new K(this.key,this.value,this.hash,t)}};var qr=function(t,e){this.__type=e,this.__stack=t.__root&&Q(t.__root)};qr.prototype={constructor:qr,next:function(){for(var t,e,n,r,i,o=this.__type,u=this.__stack;u;){if(t=u.node,e=t.children,n=u.index++,e){if(r=e.length-1,r>=n){if(i=e[n]){if(!i.children)return Y(i.key,i.value,o);u=this.__stack=Q(i,u)}continue}}else if(0===n)return Y(t.key,t.value,o);u=this.__stack=this.__stack.prev}return de},toString:function(){return"[object Map Iterator]"}},le(qr.prototype,"iterator",function(){return this});var Fr={changeValue:!1,changeSize:!1,oldValue:void 0},Hr=Z.prototype={get:function(t,e){var n=this.__root;return n?n.get(t,void 0,0,e):e},has:function(t){return Rr!==this.get(t,Rr)},set:function(t,e){return X(this,t,e).__triggerChangeEvent()},remove:function(t){return this.set(t,Rr)},update:function(t,e,n){var r=e(this.get(t,n));return this.set(t,r===n?Rr:r)},forEach:function(t,e){if(this.size){var n=o(t,e);this.__root.loop(function(t,e,r){n(t,e,r)},this)}},find:function(t,e){var n,r;return this.size&&(n=o(t,e),this.__root.loop(function(t,e,i){var o=n(t,e,i);return o===!0&&(r=t),o},this)),r},clear:function(){if(this.isImmutable())return Wr;var t=this.__changes;return this.hasListeners()&&(t||(t=this.__changes=[]),this.forEach(function(e,n){t.push({type:"delete",key:n,name:n,oldValue:e})})),this.size=0,this.__root=null,this.__triggerChangeEvent()},count:function(){return this.size},__triggerChangeEvent:function(){if(this.isMutable()){var t=this.__changes;t&&t.length&&(this.trigger("change",t),this.__changes.length=0)}return this},isMutable:function(){return!!this.__owner},isImmutable:function(){return!this.__owner},asMutable:function(){return this.isMutable()?this:nt(!0,this.size,this.__root)},asImmutable:function(){return this.isMutable()?this.size?nt(!1,this.size,this.__root):Wr:this},clone:function(){return this.isImmutable()?this:nt(!0,this.size,this.__root)},merge:function(t,e){var n,r,i,o;return t&&t!==Wr?this===Wr&&J(t)&&t.isImmutable()?t:(n=this.asMutable(),r=this.isImmutable(),i=!1,o=Ee(t),Le(t,function(t,u){o?X(n,t[0],t[1],r||e===Pr):X(n,u,t,r||e===Pr),Fr.changeValue&&(i=!0)}),i?r?n.asImmutable():this.__triggerChangeEvent():this):this}};Hr[$r]=!0,le(Hr,"get",Hr.get),i(Z,qr,"entries"),Hr.pairs=Hr.entries,Hr.unset=Hr["delete"]=Hr.remove,tt.isMap=J,et.isMap=J,tt.prototype=new Z,et.prototype=new Z,Ae(tt.prototype,Ir);var Wr=nt(!1,0,null),Br=Object.defineProperty,Kr=function(t,e,n){Br(t,e,{writable:!0,configurable:!0,value:n})};rt.prototype={constructor:rt,push:function(t){this.last?this.last.__next=t:this.first=t,this.last=t},isEmpty:function(){return null==this.first},shift:function(){var t=this.first;return this.first=t&&t.__next||null,this.first&&(t.__next=void 0),this.last===t&&(this.last=null),t}};var Qr="@@__MOTA_PROMISE__@@",Yr=0,Gr=1,Xr=2,Zr=function(){return"object"==typeof process&&process.nextTick&&"[object process]"===process.toString()?function(t){process.nextTick(t)}:"function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){setTimeout(t,0)}}(),Jr=function(t){var e=this;this.value=null,this.state=Yr,this.queue=new rt,this.handlers={fulfill:at,reject:lt};var n=function(t){st(e,t)},r=function(t){ot(e,Xr,t)};if(Se(t))try{t(n,r)}catch(i){r(i)}};Jr.prototype[Qr]=!0,Jr.prototype.then=function(t,e){var n=new Jr;return Se(t)&&(n.handlers.fulfill=t),Se(e)&&(n.handlers.reject=e),this.queue.push(n),ct(this),n};var ti="catch";Jr.prototype[ti]=function(t){return this.then(null,t)};var ei="finally";Jr.prototype[ei]=function(t){return this.then(function(e){return Jr.resolve(t()).then(function(){return e})},function(e){return Jr.resolve(t()).then(function(){throw e})})},Jr.prototype.done=function(t,e){this.then(t,e)[ti](ht)},Jr.resolve=function(t){return new Jr(function(e){e(t)})},Jr.reject=function(t){return new Jr(function(e,n){n(t);
})},Jr.defer=function(){var t,e;return{promise:new Jr(function(n,r){t=n,e=r}),resolve:t,reject:e}},Jr.resolved=Jr.resolve,Jr.rejected=Jr.reject,Jr.deferred=Jr.defer,Jr.all=function(t){return new Jr(function(e,n){var r=[],i=0,o=0;Le(t,function(t){var u=o++;i++,Jr.resolve(t).then(function(t){r[u]=t,i--,0===i&&e(r)},n)},null,!1),0===o&&e(r)})},Jr.race=function(t){return new Jr(function(e,n){Le(t,function(t){Jr.resolve(t).then(e,n)},null,!1)})};var ni=function(t,e,n){this.observer=t,this.fn=e,this.thisArg=n};ni.prototype={next:function(t){try{if(!this.fn.call(this.thisArg,t))return}catch(e){return this.observer.error(e)}return this.observer.next(t)},complete:function(t){return this.observer.complete(t)},error:function(t){return this.observer.error(t)}};var ri=function(t,e){this.fn=t,this.thisArg=e};ri.prototype.call=function(t){return new ni(t,this.fn,this.thisArg)};var ii=function(t,e,n){this.observer=t,this.fn=e,this.thisArg=n};ii.prototype={next:function(t){var e;try{e=this.fn.call(this.thisArg,t)}catch(n){return this.observer.error(n)}return this.observer.next(e)},complete:function(t){return this.observer.complete(t)},error:function(t){return this.observer.error(t)}};var oi=function(t,e){this.fn=t,this.thisArg=e};oi.prototype.call=function(t){return new ii(t,this.fn,this.thisArg)};var ui=function(t){this.sub=t},si=ui.prototype={};Kr(si,"next",function(t){return this.sub._next(t)}),Kr(si,"complete",function(t){return this.sub._complete(t)}),Kr(si,"error",function(t){return this.sub._error(t)});var ci=function(t,e,n){var r,i,o;if(Object(t)!==t)throw new TypeError("Subscriber must be an object");if(r=new ui(this),this.subscriber=t,this._done=!1,this._index=-1,this._unsub=n,!n){try{i=e(r),null!=i&&(Se(i.unsubscribe)?i=i.unsubscribe.bind(i):Se(i)||(o=new TypeError(i+" is not a function")))}catch(u){o=u}if(o)return r.error(o)}this.cancel=i,this._done&&pt(this)};ci.prototype={_next:function(t){var e,n,r=this.subscriber;if(!this._done)try{n=ft(r.next),n&&(e=n.call(r,t))}catch(i){pt(this,i)}return e},_complete:function(t){var e,n,r=this.subscriber;if(!this._done){this._done=!0;try{n=ft(r.complete),n&&(e=n.call(r,t))}catch(i){pt(this,i)}pt(this)}return e},_error:function(t){var e,n,r,i=this.subscriber;if(this._done)throw t;this._done=!0;try{n=ft(i.error),n?e=n.call(i,t):r=t}catch(o){r=o}return pt(this,r),e},unsubscribe:function(){this._done||(this._unsub&&this._unsub(this),pt(this))}};var ai=function(t){if(!Se(t))throw new TypeError("Observable initializer must be a function");this._subscriber=t},li=ai.prototype;Kr(li,"lift",function(t){var e=this,n=Fe(this.constructor);return new n(function(n){return e.subscribe(t.call(n))})}),Kr(li,"subscribe",function(t){return new ci(t,this._subscriber)}),Kr(li,"toPromise",function(){var t=this;return new Jr(function(e,n){t.subscribe({complete:e,error:n})})}),Kr(li,"forEach",function(t){var e=this,n=arguments[1];return new Jr(function(r,i){if(!Se(t))throw new TypeError(t+" is not a function");var o=!1,u=e.subscribe({next:function(e){if(!o)try{return t.call(n,e)}catch(r){o=!0,i(r),u&&u.unsubscribe()}},error:i,complete:r});o&&u.unsubscribe()})}),Kr(li,"map",function(t){if(!Se(t))throw new TypeError(t+" is not a function");return this.lift(new oi(t,arguments[1]))}),Kr(li,"filter",function(t){if(!Se(t))throw new TypeError(t+" is not a function");return this.lift(new ri(t,arguments[1]))}),Kr(ai,"from",function(t){var e=Se(this)?this:ai;if(null==t)throw new TypeError(t+" is not an object");var n=ae(t,"observable");if(null!=n){if(!Se(n))throw new TypeError(n+" is not a function");var r=n.call(t);if(Object(r)!==r)throw new TypeError(r+" is not an object");return r.constructor===e?r:new e(function(t){return r.subscribe(t)})}return new e(function(e){var n=!1;return Zr(function(){if(!n){var r;try{x(t)?Le(t,function(t){return n?Le.BREAK:void e.next(t)}):r=new Error(t+" is not an Array or Iterable")}catch(i){r=i}r?e.error(r):e.complete()}}),function(){n=!0}})}),Kr(ai,"of",function(){var t=arguments,e=Se(this)?this:ai;return new e(function(e){var n=!1;return Zr(function(){if(!n){for(var r=0;r<t.length;r++)if(e.next(t[r]),n)return;e.complete()}}),function(){n=!0}})}),Kr(li,ce("observable"),function(){return this}),Object.defineProperty(ai,ce("species"),{get:function(){return this},configurable:!0});var hi=0,fi=1,pi=2;dt.prototype=Fn,vt.prototype={next:function(t){this.multicast._subs.safeForEach(function(e){e._next(t)})},error:function(t){var e=this.multicast;e._state=pi,e._value=t,e._subs.safeForEach(function(e){e._error(t)}),e._subs=null},complete:function(t){var e=this.multicast;e._state=fi,e._value=t,e._subs.safeForEach(function(e){e._complete(t)}),e._subs=null}};var di=function(t,e){this._state=hi,this._value=void 0,this._subs=new dt,this._subscription=null,this._source=t,this._refCount=e&&e.refCount,this._cancel=mt.bind(this)};di.prototype=Ae(Ce(ai.prototype),{constructor:di,subscribe:function(t){var e;return this._state===hi?(e=new ci(t,null,this._cancel),this._subs.add(e)):(e=new ci(t,An),this._state===fi?e._complete(this._value):e._error(this._value)),this._refCount&&!this._subscription&&this.connect(),e},connect:function(){return this._subscription=this._subscription||this._source.subscribe(new vt(this)),this._subscription}}),le(di,"species",ai),Kr(ai.prototype,"multicast",function(t){return new di(this,t)});var vi=ai,mi=/^\/+|\/+$/,gi=/([.+*?=^!:${}()[\]|\/])/g,yi=47,bi=function(t,e){var n,r,i=[];for(n=0;n<t.length;n++)r=t[n],r&&"."!==r&&(".."===r?i.length&&".."!==i[i.length-1]?i.pop():e&&i.push(".."):i.push(r));return i},_i=v(function(t){if(!t)return".";var e=gt(t)?"/":"",n=t.replace(mi,"/").split("/");return e+bi(n,!e).join("/")}),wi=v(function(t){return new RegExp(t.replace(gi,"\\$1")+"$")}),xi=v(function(t){if(!t||!vn(t))return".";var e=gt(t)?"/":"",n=t.replace(mi,"/").split("/"),r=bi(n,!e);return r.pop(),e+r.join("/")||"."}),Ei=/([^\/]*)(\.[^\.\/]*)$/,ji=/\/+$/,Si=decodeURIComponent,ki=/\/+$/,Ti=/([=!:$\/()])/g,Mi="\\(((?:\\\\.|[^()])+)\\)",zi=new RegExp(["(\\\\.)","([\\/])?(?:(?:\\:(\\w+)(?:"+Mi+")?|"+Mi+")([+*?])?|(\\*\\*)|(\\*))"].join("|"),"g"),Li="(?!\\.)",Ci="[^\\/]+?",Oi=33,Ai={basename:yt,dirname:xi,extname:bt,isAbsolute:gt,join:_t,match:wt,normalize:_i,pathToRegExp:kt,relative:Tt,resolve:Mt},Ni=new RegExp("^(?:(?:((?:https?|ftp):)//)(?:(\\S+(?::\\S*)?)@)?((?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*)?(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))?)(?::(\\d{2,5}))?)?(/?\\S*)?$","i"),Ii=/#.*/,Pi=/\?.*/,Ri=function(t){var e,n=(t||"").match(Ni)||[],r=n[3],i="",o="";return e=(n[5]||"").replace(Ii,function(t){return i=t||"",""}).replace(Pi,function(t){return o=t||"",""}),e=Mt("/",e),r&&!e&&(e="/"),e+o+i},Vi=/^\/+|\/+$/g,Ui=/[\-{}\[\]+?.,\\\^$|#\s]/g,Di=/\((.*?)\)/g,$i=/(\(\?)?:\w+/g,qi=/\*\w+/g,Fi=/(?:(\(\?)?:\w+)|(?:\*\w+)/g,Hi=function(t){return t.replace(Ui,"\\$&").replace(Di,"(?:$1)?").replace($i,function(t,e){return e?t:"([^/?]+)"}).replace(qi,"([^?]*)")},Wi=v(function(t){var e=new RegExp("^"+Hi(t)),n=(t.match(Fi)||[]).map(function(t){return t.slice(1)});return{regexp:e,names:n}});zt.prototype={constructor:zt,normalize:function(t){return Ri(t)},route:function(t,e,n){var r=new zt(t,e,n,this);return this.routes.push(r),this},setCallback:function(t){return this.callback=t,this},setDefaultCallback:function(t){return this.defaultCallback=t,this},triggerRoutes:function(t,e){var n,r,i=0,o=this.routes.length,u=function(t,r){var i=n.params.names[r];e[i]=t?decodeURIComponent(t):null};for(t=this.normalize(t),this.callback&&this.callback(e,t);o>i;i++)if(n=this.routes[i],r=t.match(n.params.regexp))return e={},r.slice(1).forEach(u),void n.triggerRoutes(t,e);this.defaultCallback&&this.defaultCallback(t)}},Lt.extend=Pe,Ae(Lt.prototype,zt.prototype,{constructor:Lt,_join:function(t){return"/"===this.root?t:this.root+t},checkUrl:function(){return this.triggerRoutes(this.getFragment())},getFragment:function(){var t=this.root,e=this.location,n=e.pathname+e.search+e.hash;return 0===n.indexOf(t)&&(n=n.slice(t.length)),this.fragment=this.normalize(n)},start:function(t){this._started||(this._started=!0,this.root=this.normalize(t&&t.root),this.checkUrl(),Ir.on.call(this.window,"popstate",this.checkUrl,this))},stop:function(){this._started&&(this._started=!1,Ir.off.call(this.window,"popstate",this.checkUrl,this))},navigate:function(t,e){return this._started?(e&&e!==!0||(e={replace:!!e}),t=this.normalize(t),void(this.fragment!==t&&(this.fragment=t,this.history[e.replace?"replaceState":"pushState"]({},document.title,this._join(t)),this.triggerRoutes(t)))):!1},redirect:function(t,e){var n=this.navigate.bind(this,e);this.route(t,function(){this.setCallback(n)})}});var Bi=function(t){var e,n,r,i,o="",u=0;if(!t)return"";if(e=ye(t),"array"===e)for(n=t.length;n>u;u++)t[u]&&(o+=" "+t[u]);else if("object"===e)for(r=Me(t),n=r.length;n>u;u++)i=r[u],t[i]&&(o+=" "+i);else o=t+"";return o.trim()},Ki="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("mota.view.create")||60103,Qi=function(t){return t&&"object"==typeof t&&t.$$typeof===Ki},Yi=function(t,e,n){var r,i,o,u,s,c={},a=null,l=t&&t.validateProps;if(null!=e){a=void 0===e.key?null:""+e.key;for(r in e)"key"!==r&&Ie(e,r)&&(c[r]=e[r])}if(u=arguments.length-2,1===u)c.children=n;else if(u>1){for(i=Array(u),o=0;u>o;o++)i[o]=arguments[o+2];c.children=i}return l&&(c=l(c)||{}),s={$$typeof:Ki,type:t,key:a,props:c}},Gi=function(t,e){var n=t.key,r=t.type,i=void 0===r.__type?r:r.__type;return void 0===e[i]&&(e[i]=0),i+(null==n?":noKey:"+e[i]++:":key:"+n)},Xi=function(t,e){for(var n=this.array,r=this.map,i=0,o=null,u="",s={},c=null,a=null,l=!1,h=0,f=0;i<t.length;i++)o=t[i],l=Se(o.type),u=Gi(o,s),c=n[i],c&&c.key===u?c.update(l?o.props:o,i):(a=r[u],a?(f=a.index,a.update(l?o.props:o,i)):(f=this.length++,a=l?(new o.type).__internal__:new Co,a.init(l?o.props:o,this,i,u,e)),c&&(n[c.index=f]=c),n[i]=a,r[u]=a);for(h=i;i<this.length;i++)c=n[i],c.remove(),r[c.key]=null,n[i]=null;this.length=h},Zi="view",Ji=function(t){return t.nodeType&&3!==t.nodeType?1:t===t.window?2:0},to={add:function(t){var e=t.el,n=Ji(e);return n&&Ke.setup(e,Zi,t,1===n)},remove:function(t){return Ji(t)&&Ke.remove(t,Zi)},get:function(t){return Ji(t)&&Ke.get(t,Zi)}},eo=function(t,e,n,r,i){var o=this.component;this.dontQueue=!0,this.props=o.props=t,o.initialize&&o.initialize(),o.componentWillMount&&o.componentWillMount(),this.queued=!1,this.dontQueue=!1,this.parentInternal=e,this.parentEl=e.el,this===o?(this.owner=e.owner,this.depth=e.depth):(this.owner=o,this.depth=e.depth+1),this.index=n,this.key=r,this.updateComponent(n,t,i),to.add(o),hr(this.el,n,this.parentEl),o.componentDidMount&&dr(o,"componentDidMount")},no=function(t,e){this.dontQueue||(this.queued?t&&(this.force=!0):(this.queued=!0,this.force=!!t,this.renderToString=!!e,mr(this)))},ro=function(){lr(this.el),Ct(this)},io=function(t,e,n){var r,i=this.component,o=this.props,u=this.force;return this.index=e,this.dontQueue=!0,t?i.componentWillReceiveProps&&i.componentWillReceiveProps(t):t=this.props,!u&&i.shouldComponentUpdate&&(r=i.shouldComponentUpdate(t),r===!1)?(this.props=i.props=t,this.queued=!1,void(this.dontQueue=!1)):(i.componentWillUpdate&&i.componentWillUpdate(t),this.props=i.props=t,this.queued=!1,this.dontQueue=!1,this.force=!1,this.updateComponent(e,t,n),null!=e&&fr(this.el,e,this.parentEl),void(i.componentDidUpdate&&dr(i,"componentDidUpdate",o)))},oo=function(t,e,n,r,i,o){var u,s,c,a=t[n],l=t[r],h=Te(i);for(s=l,c=s.length;c--;)u=s[c],void 0===i[u]&&o(t,e,u,a[u],void 0);for(s=h,c=s.length;c--;)u=s[c],a[u]!==i[u]&&o(t,e,u,a[u],i[u]);t[n]=i,t[r]=h},uo=function(t,e,n){var r,i;if(null!=t&&t!==!1&&t!==!0&&""!==t){if(Qi(t))return void e.push(t);if("object"==typeof t)return void Le(t,n,null,!1);r=e.length-1,i=r>-1&&e[r],"#text"===i.type?i.props.text+=t+"":e.push({type:"#text",props:{text:t+""}})}},so=function(t){var e=[];if(null!=t){var n=function(t){uo(t,e,n)};n(t)}return e},co={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,menuitem:1,meta:1,param:1,source:1,track:1,wbr:1},ao=/([A-Z])/g,lo=/&/g,ho=/</g,fo=/>/g,po=/"/g;$t.prototype={insertBefore:function(t,e){this.childNodes.push(t)},setAttribute:function(t,e){this._attrs[t]=e+""},getAttribute:function(t){return this._attrs[t]}},Object.defineProperty($t.prototype,"innerHTML",{get:function(){return void 0===this._innerHTML&&(this._innerHTML=Ut(this)),this._innerHTML},set:function(t){return this._innerHTML=t,t}});var vo={nodeType:9,createElement:function(t){return new $t(t)},createElementNS:function(t,e){var n=new $t(e);return n._attrs.xmlns=t,n},createTextNode:function(t){return new qt(t)},createComment:function(t){return new Ft(t)}};vo.head=vo.createElement("head"),vo.body=vo.createElement("body"),vo.documentElement=vo.createElement("html"),vo.documentElement.insertBefore(vo.head),vo.documentElement.insertBefore(vo.body),vo.childNodes=[vo.documentElement];var mo=vo,go=function(t,e,n,r,i){var o,u,s=r?mo:an();return"string"==typeof t?("#text"===t?o=s.createTextNode(e.text):"#comment"===t?o=s.createComment(""):(e.xmlns?u=e.xmlns:"svg"===t?u="http://www.w3.org/2000/svg":"math"===t&&(u="http://www.w3.org/1998/Math/MathML"),o=u?s.createElementNS(u,t):s.createElement(t)),n&&!to.get(n)&&n.nodeType===o.nodeType&&n.nodeName===o.nodeName&&n.nodeValue===o.nodeValue&&(o=n),"script"!==t&&"style"!==t||vr("For security reasons, <script> and <style> elements are not allowed to be created.",i)):vr("`render` must return an object containing a `type` property with a primitive string or it must return `null`.",i),o},yo=function(t){if(ve(t)){var e=f(Ae,[{}].concat(t));return e}return t&&"object"==typeof t?t:{}},bo=/^on/,_o=/^[a-zA-Z_][\w\.\-]*$/,wo=v(function(t){return!!_o.test(t)}),xo=["Webkit","Moz","ms"],Eo=function(){var t=!1;return function(){if(t)return t;var e=an();return t=e&&e.createElement("div").style}}(),jo={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,fontWeight:1,gridRow:1,gridColumn:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},So=v(function(t){var e,n,r=Eo();if(!r)return t;if(t in r)return t;for(e=Ht(t),n=xo.length;n--;)if(t=xo[n]+e,t in r)return t;return!1});a(jo,function(t,e){jo[So(e)]=t});var ko=function(t,e,n,r,i){var o,u;switch(n){case"key":case"children":case"childNodes":case"innerHTML":case"outerHTML":return;case"dangerousInnerHTML":case"dangerouslySetInnerHTML":if(r&&i&&r.__html===i.__html)return;return void(i&&e.innerHTML!==i.__html&&ar(e,"innerHTML",i.__html,"prop"));case"style":return oo(t,e,"cacheStyle","cacheStyleKeys",yo(i),Bt);case"class":case"className":return o=Bi(i),void("svg"===e.nodeName?e.getAttribute("class")!==o&&ar(e,"class",o,"attr"):e.className!==o&&ar(e,"className",o,"prop"));default:return u=n.replace(bo,""),void(n!==u?(u=u.toLowerCase(),r&&Ir.off.call(e,u,r),i&&Ir.on.call(e,u,i)):n in e&&"list"!==n&&"form"!==n&&"type"!==n&&"width"!==n&&"height"!==n?("value"===n&&(i+=""),e[n]!==i&&("SELECT"!==e.nodeName||"value"!==n&&"selectedIndex"!==n?ar(e,n,i,"prop"):pr(e,n,i,"prop"))):wo(n)&&ar(e,n,i,"attr"))}},To=Yi("#comment",null,"motajs: empty"),Mo=function(t,e,n){var r,i,o,u,s,c,a=this.component;if(r=a.render(Yi,e)||To,i=this.cache,i!==r){if(this.cache=r,u=r.type,s=r.props,c=s.children,this.el||(this.el=a.el=go(u,s,this.parentEl.childNodes.item(t),n,this.owner)),o=this.el,i.type&&u!==i.type&&vr("You must not change the type of an component between updates. You have changed `"+i.type+"` to `"+u+"`.",this.owner),"#text"===u){if(o.nodeValue===s.text)return;return ar(o,"nodeValue",s.text,"prop")}if("#comment"===u)return ar(o,"nodeValue",c&&c.join?c.join("\n"):c||"","prop");co[u]&&(null==s.dangerousInnerHTML&&null==c||vr("`"+u+"` is a void element tag and must not have `children` or use `dangerousInnerHTML`.",this.owner)),oo(this,o,"cacheAttrs","cacheAttrsKeys",s,ko),co[u]||null!=s.dangerousInnerHTML||this.diffChildren(so(c),n)}},zo=Object.freeze({}),Lo=Object.freeze([]),Co=function(t){this.component=t||this,this.__internal__=this,this.queued=!1,this.force=!1,this.renderToString=!1,this.array=[],this.map={},this.length=0,this.depth=-1,this.parentInternal=null,this.parentEl=null,this.key="",this.index=0,this.el=null,this.props=null};Co.prototype={constructor:Co,render:function(){return this.props},updater:{startIgnore:gr,endIgnore:yr},cache:Yi(),cacheAttrs:zo,cacheAttrsKeys:Lo,cacheStyle:zo,cacheStyleKeys:Lo,queueUpdate:no,init:eo,update:io,remove:ro,updateComponent:Mo,diffChildren:Xi,get:function(t){var e=this.array[t];return e&&e.component},traverse:function(t){for(var e=0,n=this.array;e<this.length;e++)t(n[e])}},Ae(Kt.prototype,{update:function(){this.__internal__.queueUpdate()},forceUpdate:function(){this.__internal__.queueUpdate(!0)},bindMethodsToThis:function(){for(var t,e,n=this.__methods,r=n&&n.length;r--;)t=n[r],e=this[t],this[t]=Nn(e,this),this[t].original=e}}),Object.defineProperty(Kt.prototype,"__internal__",{enumerable:!1,writable:!0});var Oo=0,Ao=function(t){function e(){Kt.call(this)}var n,r=[];Se(t)&&(t={render:t}),t&&Se(t.render)||qe("mota.view.createClass","Provide an object with a `render` property containing a function"),e.displayName=t.displayName,e.validateProps=t.validateProps;for(n in t.statics)e[n]=t.statics[n];e.prototype=new Kt,t=Ae(e.prototype,t);for(n in t)Se(t[n])&&r.push(n);return t.constructor=e,t.__methods=r,e.__type=Oo++,e},No=function(t,e,n){var r=(an(),to.get(e)||Qt(e));return r||qe("mota.view.render","`parent` should be an DOM element"),r.render=function(e){return e(null,null,t)},Se(n)&&(r.componentDidUpdate=function(){this.componentDidUpdate=void 0,n()}),r.queueUpdate(),r.get(0)},Io=function(t){var e=new Kt;return e.el=e.__internal__.el=mo.createElement("div"),e.render=function(e){return e(null,null,t)},e.__internal__.queueUpdate(!0,!0),e.el.innerHTML},Po={classSet:Bi,Component:Kt,create:Yi,createClass:Ao,render:No,renderToString:Io,select:void 0,styleSet:yo,dispatchEvents:Mr.dispatchEvents};a({VERSION:"0.12.1",developmentMode:!1},function(t,e){Object.defineProperty(Yt,e,{value:t})}),Un.hashCode=w,Un.extend(Yt,Un,{Events:Ir,Map:tt,ImmutableMap:et,Observable:vi,pathname:Ai,Promise:Jr,Router:Lt,util:Un,view:Po,setWindow:ln}),(ie||re||{}).mota=Yt,"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return Yt}):Zt&&Jt?(te&&((Jt.exports=Yt).mota=Yt),Zt.mota=Yt):ue.mota=Yt}).call(this);