$.widget("ui.tabulator",{data:[],sortCurrrent:{col:null,dir:null},firstRender:!0,mouseDrag:!1,mouseDragWidth:!1,mouseDragElement:!1,mouseDragOut:!1,options:{backgroundColor:"#888",borderColor:"#999",textSize:"14px",headerBackgroundColor:"#e6e6e6",headerTextColor:"#555",headerBorderColor:"#aaa",headerSeperatorColor:"#999",headerMargin:"4px",rowBackgroundColor:"#fff",rowBorderColor:"#aaa",rowTextColor:"#333",rowHoverBackground:"#bbb",colMinWidth:"40px",colResizable:!0,height:!1,fitColumns:!1,columns:[],sortable:!0,dateFormat:"dd/mm/yyyy",sortArrows:{active:"#666",inactive:"#bbb"},selectable:!0,ajaxURL:!1,showLoader:!0,loader:"<div style='display:inline-block; border:4px solid #333; border-radius:10px; background:#fff; font-weight:bold; font-size:16px; color:#000; padding:10px 20px;'>Loading Data</div>",loaderError:"<div style='display:inline-block; border:4px solid #D00; border-radius:10px; background:#fff; font-weight:bold; font-size:16px; color:#590000; padding:10px 20px;'>Loading Error</div>",rowClick:function(){},rowContext:function(){},dataLoaded:function(){}},loaderDiv:$("<div class='tablulator-loader' style='position:absolute; top:0; left:0; z-index:100; height:100%; width:100%; background:rgba(0,0,0,.4); text-align:center;'><div class='tabulator-loader-msg'></div></div>"),_showLoader:function(e,t){e.options.showLoader&&($(".tabulator-loader-msg",e.loaderDiv).empty().append(t),$(".tabulator-loader-msg",e.loaderDiv).css({"margin-top":e.element.innerHeight()/2-$(".tabulator-loader-msg",e.loaderDiv).outerHeight()/2}),e.element.append(e.loaderDiv))},_hideLoader:function(e){$(".tablulator-loader",e.element).remove()},_create:function(){var e=this,t=e.options,o=e.element;t.textSize=isNaN(t.textSize)?t.textSize:t.textSize+"px",t.colMinWidth=isNaN(t.colMinWidth)?t.colMinWidth:t.colMinWidth+"px",t.textSizeNum=parseInt(t.textSize.replace("px","")),headerMargin=parseInt(t.headerMargin.replace("px","")),t.headerHeight=t.textSizeNum+2*headerMargin+2,t.height&&(t.height=isNaN(t.height)?t.height:t.height+"px",o.css({height:t.height})),o.addClass("tabulator"),o.css({position:"relative","box-sizing":"border-box","background-color":t.backgroundColor,border:"1px solid "+t.borderColor,overflow:"hidden"}),e.header=$("<div class='tabulator-header'></div>"),e.header.css({position:"relative","background-color":t.headerBackgroundColor,"border-bottom":"1px solid "+t.headerSeperatorColor,color:t.headerTextColor,"font-size":t.textSize,"font-weight":"bold","white-space":"nowrap","z-index":"1",overflow:"visible"}),e.tableHolder=$("<div class='tabulator-tableHolder'></div>"),e.tableHolder.css({position:"absolute","z-index":"1","min-height":"calc(100% - "+(t.headerHeight+1)+"px)","max-height":"calc(100% - "+(t.headerHeight+1)+"px)","white-space":"nowrap",overflow:"auto",width:"100%"}),e.tableHolder.scroll(function(){e.header.css({"margin-left":"-1"*$(this).scrollLeft()})}),e.table=$("<div class='tabulator-table'></div>"),e.table.css({position:"relative","font-size":t.textSize,"white-space":"nowrap","z-index":"1",display:"inline-block"});var r=$("<div class='tabulator-arrow'></div>");if(r.css({display:"inline-block",position:"absolute",top:"9px",right:"8px",width:0,height:0,"border-left":"6px solid transparent","border-right":"6px solid transparent","border-bottom":"6px solid "+t.sortArrows.inactive}),$.each(t.columns,function(o,r){r.sorter="undefined"==typeof r.sorter?"string":r.sorter,r.sortable="undefined"==typeof r.sortable?t.sortable:r.sortable;var a=r.title?r.title:"&nbsp",i=$("<div class='tabulator-col' style='display:inline-block' data-field='"+r.field+"' data-sortable="+r.sortable+">"+a+"</div>");"undefined"!=typeof r.width&&(r.width=isNaN(r.width)?r.width:r.width+"px",i.data("width",r.width),i.css({width:r.width})),r.sortable&&i.on("click",function(){e.mouseDragOut||e._sortClick(r,i),e.mouseDragOut=!1}),e.header.append(i)}),o.append(e.header),e.tableHolder.append(e.table),o.append(e.tableHolder),$(".tabulator-col",e.header).css({padding:"4px","text-align":"left",position:"relative","border-right":"1px solid "+t.headerBorderColor,"box-sizing":"border-box","user-select":"none","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","vertical-align":"bottom"}),e.options.colResizable){var a=$("<div class='tabulator-handle' style='position:absolute; right:0; top:0; bottom:0; width:5px;'></div>");a.on("mousedown",function(t){e.mouseDrag=t.screenX,e.mouseDragWidth=$(this).closest(".tabulator-col").outerWidth(),e.mouseDragElement=$(this).closest(".tabulator-col")}),e.element.on("mousemove",function(t){e.mouseDrag&&(e.mouseDragElement.css({width:e.mouseDragWidth+(t.screenX-e.mouseDrag)}),e._resizeCol(e.mouseDragElement.data("field"),e.mouseDragElement.outerWidth()))}),e.element.on("mouseup",function(t){e.mouseDrag&&(t.stopPropagation(),t.stopImmediatePropagation(),e.mouseDragOut=!0,e._resizeCol(e.mouseDragElement.data("field"),e.mouseDragElement.outerWidth()),e.mouseDrag=!1,e.mouseDragWidth=!1,e.mouseDragElement=!1)}),a.on("mouseover",function(){$(this).css({cursor:"ew-resize"})}),$(".tabulator-col",e.header).append(a),$(".tabulator-col",e.header).on("mouseup",function(){})}$(".tabulator-col[data-sortable=true]",e.header).css({"padding-right":"25px"}).data("sortdir","desc").on("mouseover",function(){$(this).css({cursor:"pointer","background-color":"rgba(0,0,0,.1)"})}).on("mouseout",function(){$(this).css({"background-color":"transparent"})}).append(r.clone()),e._colRender()},_setOption:function(e,t){$.Widget.prototype._setOption.apply(this,arguments)},setData:function(e){this._trigger("dataLoading"),this._showLoader(this,this.options.loader),"string"==typeof e?0==e.indexOf("{")||0==e.indexOf("[")?(this._parseData(jQuery.parseJSON(e)),this._renderTable()):this._getAjaxData(e):e?(this._parseData(e),this._renderTable()):this.options.ajaxURL?this._getAjaxData(this.options.ajaxURL):(this._parseData([]),this._renderTable())},_parseData:function(e){var t=[];$.each(e,function(e,o){t[o.id]=o}),this.data=t,this.options.dataLoaded(e)},_getAjaxData:function(e){var t=this;$.ajax({url:e,type:"GET",async:!0,dataType:"json",success:function(e){t._parseData(e),t._renderTable(),t.options.dataLoaded(e)},error:function(e,o,r){console.log("Tablulator ERROR (ajax get): "+e.status+" - "+r),t._trigger("dataLoadError",e,r),t._showLoader(t,t.options.loaderError)}})},_renderTable:function(){var e=this;this._trigger("renderStarted"),e.table.hide(),e._showLoader(e,e.options.loader),e.table.empty(),e.data.forEach(function(t,o){var r=$("<div class='tabulator-row' data-id='"+t.id+"'></div>");r.data("data",t),r.on("click",function(o){e._rowClick(o,r,t)}),r.on("contextmenu",function(o){e._rowContext(o,r,t)}),$.each(e.options.columns,function(o,a){var i="undefined"==typeof t[a.field]?"":t[a.field];"undefined"==typeof t[a.field]&&(t[a.field]="");var l="undefined"==typeof a.align?"left":a.align,n=$("<div class='tabulator-cell' data-field='"+a.field+"' data-value='"+e._safeString(i)+"' ></div>");n.css({padding:"4px","text-align":l,"box-sizing":"border-box",display:"inline-block","vertical-align":"middle","min-height":e.options.headerHeight,"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}),n.html(e._formatCell(a.formatter,i,t,n,r)),"function"==typeof a.onClick&&n.on("click",function(t){e._cellClick(t,n)}),r.append(n)}),e.table.append(r)}),e.table.css({"background-color":e.options.rowBackgroundColor,color:e.options.rowTextColor}),e._styleRows(),e.sortCurrrent.col&&e._sorter(e.sortCurrrent.col,e.sortCurrrent.dir),e.table.show(),e._colRender(!e.firstRender),e._hideLoader(e),e._trigger("renderComplete")},dataCount:function(){return this.data.length},redraw:function(){var e=this;e.options.fitColumns&&e._colRender(),e.element.innerHeight()>0&&$(".tabulator-loader-msg",e.loaderDiv).css({"margin-top":e.element.innerHeight()/2-$(".tabulator-loader-msg",e.loaderDiv).outerHeight()/2})},_resizeCol:function(e,t){$(".tabulator-cell[data-field="+e+"], .tabulator-col[data-field="+e+"]",this.element).css({width:t})},_colRender:function(e){var t=this,o=t.options,r=(t.table,t.header,t.element);if(t.firstRender=!1,e&&!o.fitColumns)$.each(o.columns,function(e,t){l=$(".tabulator-col[data-field="+t.field+"]",r).outerWidth();var o=$(".tabulator-cell[data-field="+t.field+"]",r);o.css({width:l})});else if(o.fitColumns){t.options.fitColumns&&$(".tabulator-row",t.table).css({width:"100%"});var a=t.element.innerWidth(),i=o.columns.length,l=a/i,n=0,s=0;$.each(o.columns,function(e,t){if(t.width){var o="string"==typeof t.width?parseInt(t.width):t.width;n+=o,s++}});var d=Math.floor((a-n)/(i-s));if(d>=parseInt(o.colMinWidth))$.each(o.columns,function(e,t){var o=t.width?t.width:d,a=$(".tabulator-cell[data-field="+t.field+"], .tabulator-col[data-field="+t.field+"]",r);a.css({width:o})});else{var c=$(".tabulator-cell, .tabulator-col",r);c.css({width:l})}}else $.each(o.columns,function(e,t){var a=$(".tabulator-cell[data-field="+t.field+"], .tabulator-col[data-field="+t.field+"]",r);if(t.width)i=t.width;else{var i=0;a.each(function(){i=$(this).outerWidth()>i?$(this).outerWidth():i}),o.colMinWidth&&(i=i<o.colMinWidth?o.colMinWidth:i)}a.css({width:i})})},_styleRows:function(){var e=this;$(".tabulator-tableHolder",e.element).css({height:$(".tabulator-table",e.element).height()}),$(".tabulator-row",e.table).css({"background-color":"transparent"}),e.options.selectable&&$(".tabulator-row",e.table).on("mouseover",function(){$(this).css({cursor:"pointer","background-color":e.options.rowHoverBackground})}).on("mouseout",function(){$(this).css({"background-color":"transparent"})}),$(".tabulator-row:nth-of-type(even)",e.table).css({"background-color":"rgba(0,0,0,.1);"}).on("mouseout",function(){$(this).css({"background-color":"rgba(0,0,0,.08);"})}),$(".tabulator-cell",e.table).css({"border-right":"1px solid "+e.options.rowBorderColor}),e.options.height||e.element.css({height:e.table.outerHeight()+e.options.headerHeight+3})},_formatCell:function(e,t,o,r,a){var e="undefined"==typeof e?"plaintext":e;return(e="string"==typeof e?this.formatters[e]:e)(t,o,r,a,this.options)},_rowClick:function(e,t,o){this.options.rowClick(e,t.data("id"),o,t)},_rowContext:function(e,t,o){e.preventDefault(),this.options.rowContext(e,t.data("id"),o,t)},_cellClick:function(e,t){var o=this.options.columns.filter(function(e){return e.field==t.data("field")});o[0].onClick(e,t,t.data("value"),t.closest("tr").data("data"))},_safeString:function(e){return String(e).replace(/'/g,"&#39;")},_sortClick:function(e,t){var o=this,r=(o.header,this.options);$(".tabulator-col[data-sortable=true][data-field!="+e.field+"]",o.header).data("sortdir","desc"),$(".tabulator-col .tabulator-arrow",o.header).css({"border-top":"none","border-bottom":"6px solid "+r.sortArrows.inactive}),"desc"==t.data("sortdir")?(t.data("sortdir","asc"),$(".tabulator-arrow",t).css({"border-top":"none","border-bottom":"6px solid "+r.sortArrows.active})):(t.data("sortdir","desc"),$(".tabulator-arrow",t).css({"border-top":"6px solid "+r.sortArrows.active,"border-bottom":"none"})),o._sorter(e,t.data("sortdir"))},_sorter:function(e,t){var o=this,r=o.table,a=o.data;o._trigger("sortStarted"),o.sortCurrrent.col=e,o.sortCurrrent.dir=t,$(".tabulator-row",r).sort(function(r,i){el1="asc"==t?a[$(r).data("id")]:a[$(i).data("id")],el2="asc"==t?a[$(i).data("id")]:a[$(r).data("id")],r="date"==e.sorter?o._formatDate(el1[e.field]):el1[e.field],i="date"==e.sorter?o._formatDate(el2[e.field]):el2[e.field];var l="undefined"==typeof e.sorter?"plaintext":e.sorter;return(l="string"==typeof l?o.sorters[l]:l)(r,i)}).appendTo(r),o._styleRows(),o._trigger("sortComplete")},_formatDate:function(e){var t=this.options.dateFormat,o=t.indexOf("yyyy"),r=t.indexOf("mm"),a=t.indexOf("dd"),i=e.substring(o,o+4)+"-"+e.substring(r,r+2)+"-"+e.substring(a,a+2),l=Date.parse(i);return isNaN(l)?0:l},sorters:{number:function(e,t){return parseFloat(e)-parseFloat(t)},string:function(e,t){return String(e).toLowerCase().localeCompare(String(t).toLowerCase())},date:function(e,t){return e-t},boolean:function(e,t){return el1=e===!0||"true"===e||"True"===e||1===e?1:0,el2=t===!0||"true"===t||"True"===t||1===t?1:0,el1-el2}},formatters:{plaintext:function(e,t,o,r,a){return e},email:function(e,t,o,r,a){return"<a href='mailto:"+e+"'>"+e+"</a>"},link:function(e,t,o,r,a){return"<a href='"+e+"'>"+e+"</a>"},tick:function(e,t,o,r,a){var i='<svg enable-background="new 0 0 24 24" height="'+a.textSize+'" width="'+a.textSize+'"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>';if(e===!0||"true"===e||"True"===e||1===e)return i},tickCross:function(e,t,o,r,a){var i='<svg enable-background="new 0 0 24 24" height="'+a.textSize+'" width="'+a.textSize+'"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',l='<svg enable-background="new 0 0 24 24" height="'+a.textSize+'" width="'+a.textSize+'"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return e===!0||"true"===e||"True"===e||1===e?i:l},star:function(e,t,o,r,a){var l=5,n=$("<span></span>");e=parseInt(e)<l?parseInt(e):l;var s=$('<svg width="'+a.textSize+'" height="'+a.textSize+'" viewBox="0 0 512 512" xml:space="preserve" style="margin:0 1px;"><polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/></svg>'),d=$('<svg width="'+a.textSize+'" height="'+a.textSize+'" viewBox="0 0 512 512" xml:space="preserve" style="margin:0 1px;"><polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/></svg>');for(i=1;i<=l;i++){var c=i<=e?s:d;n.append(c.clone())}return o.css({"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}),n.html()},progress:function(e,t,o,r,a){return e=parseFloat(e)<=100?parseFloat(e):100,o.css({"min-width":"30px"}),"<div style='margin-top:3px; height:10px; width:"+e+"%; background-color:#2DC214; '></div>"}},destroy:function(){}});
//# sourceMappingURL=tabulator.min.js.map