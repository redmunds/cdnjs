/* translater.js 1.0.3    https://github.com/jaywcjlove/translater.js  Copyright 2016, kenny wang */
!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.Translater=n()}(this,function(){function e(){for(var e=Array.prototype.concat.apply(g(document),o(document)),n=[],t=new Object,l=0;l<e.length;l++)e[l].nodeValue=r(e[l].nodeValue),""!==e[l].nodeValue&&(t=a(e[l]),Object.getOwnPropertyNames(t).length>2&&n.push(t));return n}function n(e){var n={},t=e.nodeValue,a=0;if(n.element=e.parentElement,n["lang-default"]=t.replace(/<!--(.*)-->.*/,""),t&&(t=e.nodeValue.match(/<!--\{\w+\}[\s\S]*?-->/gi)),t&&t.length>0)for(;a<t.length;a++){var r=t[a].match(/\{([^\ ]*)\}/)[0];r=r.replace(/\{([^\ ]*)\}/g,"$1"),n["lang-"+r]=t[a].replace(/<!--\{\w+\}(.*)-->/g,"$1")}return e.parentElement.innerHTML=n["lang-default"],n}function t(e){var n=0,t={},a=e.outerHTML,r=a.match(/src=\"(.*?)\"/);if(t.element=e,t["lang-default"]=2===r.length?r[1]:"",r=a.match(/data-lang-.(\w+).\".*?\"/g),r&&r.length>0)for(;n<r.length;n++){var l=r[n].replace(/data-lang-+(.*)+=\"([^\ ]*)\"/g,"$1"),o=r[n].match(/data-lang-+(.*)+=\"(.*?)\"/)[2];t["lang-"+l]=o}return t}function a(e,l){if(l=l||{},e.parentElement&&"TITLE"===e.parentElement.tagName)return n(e);if("IMG"===e.tagName&&1===e.nodeType)return t(e);var o="lang-default",g=e.nodeValue,u=/^\{\w+\}/;8===e.nodeType&&u.test(g)&&(o=g.match(u)[0],o="lang-"+(o?o.replace(/\{([^\ ]*)\}/g,"$1"):""),g=g.replace(u,""),""!==r(g)&&(l[o]=g)),""===r(g)||l["lang-default"]||(l[o]=g,l.element=e);var c=e.nextSibling;return c&&1!==c.nodeType&&a(c,l),l}function r(e){return""+(null==e?"":(e+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").replace(/[\r\n]+/g,""))}var l=function(n,t){this.lang_name=n&&n.lang||"default",this.callback=t||function(){},this.langs=e()||[],n&&"default"!==n.lang&&this.setLang(n.lang)};l.prototype={setLang:function(e){var n=this.langs,t="";this.lang_name=e;for(var a=0;a<n.length;a++)n[a]["lang-"+e]&&(t="TITLE"===n[a].element.tagName?"innerHTML":"IMG"===n[a].element.tagName?"src":"nodeValue",n[a].element[t]=n[a]["lang-"+e])}};var o=function(e){for(var n=0,t=[],a=e.getElementsByTagName("IMG");n<a.length;n++){var r=a[n].outerHTML.match(/data-lang-.(\w+).\".*?\"/g);a[n]&&1===a[n].nodeType&&r&&r.length>0&&t.push(a[n])}return t},g=window.NodeFilter?function(e){var n,t,a=[];for(t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,null);n=t.nextNode();)"SCRIPT"!==n.parentElement.tagName&&"STYLE"!==n.parentElement.tagName&&a.push(n);return a}:function(e){switch(e.nodeType){case 3:return[e];case 1:case 9:var n,t=e.childNodes,a=[];if("SCRIPT"!==e.tagName&&"STYLE"!==e.tagName){for(n=0;n<t.length;n++)g(t[n])&&a.push(g(t[n]));return Array.prototype.concat.apply([],a)}}};return l});