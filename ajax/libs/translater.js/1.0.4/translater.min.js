/* translater.js 1.0.4    https://github.com/jaywcjlove/translater.js  Copyright 2016, kenny wang */
!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.Translater=n()}(this,function(){function e(){for(var e=Array.prototype.concat.apply(g(document),u(document)),n=[],t=new Object,r=0;r<e.length;r++)e[r].nodeValue=l(e[r].nodeValue),""!==e[r].nodeValue&&(t=a(e[r]),Object.getOwnPropertyNames(t).length>2&&n.push(t));return n}function n(e){var n={},t=e.nodeValue,a=0;if(n.element=e.parentElement,n["lang-default"]=t.replace(/<!--(.*)-->.*/,""),t&&(t=e.nodeValue.match(/<!--\{\w+\}[\s\S]*?-->/gi)),t&&t.length>0)for(;a<t.length;a++){var l=t[a].match(/\{([^\ ]*)\}/)[0];l=l.replace(/\{([^\ ]*)\}/g,"$1"),n["lang-"+l]=t[a].replace(/<!--\{\w+\}(.*)-->/g,"$1")}return e.parentElement.innerHTML=n["lang-default"],n}function t(e){var n=0,t={},a=e.outerHTML,l=a.match(/src=\"(.*?)\"/);if(t.element=e,t["lang-default"]=2===l.length?l[1]:"",l=a.match(/data-lang-.(\w+).\".*?\"/g),l&&l.length>0)for(;n<l.length;n++){var r=l[n].match(/data-lang-(.*?)=/,"$1")[1],o=l[n].match(/data-lang-(.*?)=\"(.*?)\"/,"$1")[2];t["lang-"+r]=o}return t}function a(e,r){if(r=r||{},e.parentElement&&"TITLE"===e.parentElement.tagName)return n(e);if("IMG"===e.tagName&&1===e.nodeType)return t(e);var o="lang-default",u=e.nodeValue,g=/^\{\w+\}/;8===e.nodeType&&g.test(u)&&(o=u.match(g)[0],o="lang-"+(o?o.replace(/\{([^\ ]*)\}/g,"$1"):""),u=u.replace(g,""),""!==l(u)&&(r[o]=u)),""===l(u)||r["lang-default"]||(r[o]=u,r.element=e);var c=e.nextSibling;return c&&1!==c.nodeType&&a(c,r),r}function l(e){return""+(null==e?"":(e+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").replace(/[\r\n]+/g,""))}var r=function(n,t){this.lang_name=n&&n.lang||"default",this.callback=t||function(){},this.langs=e()||[],n&&"default"!==n.lang&&this.setLang(n.lang)};r.prototype={setLang:function(e){var n=this.langs,t="";this.lang_name=e;for(var a=0;a<n.length;a++)n[a]["lang-"+e]&&(t="TITLE"===n[a].element.tagName?"innerHTML":"IMG"===n[a].element.tagName?"src":"nodeValue",n[a].element[t]=n[a]["lang-"+e])}};var u=function(e){for(var n=0,t=[],a=e.getElementsByTagName("IMG");n<a.length;n++){var l=a[n].outerHTML.match(/data-lang-.(\w+).\".*?\"/g);a[n]&&1===a[n].nodeType&&l&&l.length>0&&t.push(a[n])}return t},g=window.NodeFilter?function(e){var n,t,a=[];for(t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,null);n=t.nextNode();)"SCRIPT"!==n.parentElement.tagName&&"STYLE"!==n.parentElement.tagName&&""!==l(n.nodeValue)&&a.push(n);return a}:function(e){switch(e.nodeType){case 3:return[e];case 1:case 9:var n,t=e.childNodes,a=[];if("SCRIPT"!==e.tagName&&"STYLE"!==e.tagName&&""!==l(o.nodeValue)){for(n=0;n<t.length;n++)g(t[n])&&a.push(g(t[n]));return Array.prototype.concat.apply([],a)}}};return r});