!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.Translater=n()}(this,function(){function e(){for(var e=r(document),a=[],l=new Object,o=0;o<e.length;o++)e[o].nodeValue=t(e[o].nodeValue),""!==e[o].nodeValue&&(l=n(e[o]),Object.getOwnPropertyNames(l).length>2&&a.push(l));return a}function n(e,a){a=a||{};var r="lang-default",l=e.nodeValue,o=/^\{\w+\}/;8===e.nodeType&&o.test(l)&&(r=l.match(o)[0],r="lang-"+(r?r.replace(/\{([^\ ]*)\}/g,"$1"):""),l=l.replace(o,""),""!==t(l)&&(a[r]=l)),""===t(l)||a["lang-default"]||(a[r]=l,a.element=e);var u=e.nextSibling;return u&&1!==u.nodeType&&n(u,a),a}function t(e){return""+(null==e?"":(e+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").replace(/[\r\n]+/g,""))}var a=function(n,t){this.lang_name=n&&n.lang||"default",this.callback=t||function(){},this.langs=e()||[]};a.prototype={setLang:function(e){var n=this.langs;this.lang_name=e;for(var t=0;t<n.length;t++)n[t]["lang-"+e]&&(n[t].element.nodeValue=n[t]["lang-"+e])}};var r=window.NodeFilter?function(e){var n,t,a=[];for(t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,null);n=t.nextNode();)"SCRIPT"!==n.parentElement.tagName&&"STYLE"!==n.parentElement.tagName&&a.push(n);return a}:function(e){switch(e.nodeType){case 3:return[e];case 1:case 9:var n,t=e.childNodes,a=[];if("SCRIPT"!==e.tagName&&"STYLE"!==e.tagName){for(n=0;n<t.length;n++)r(t[n])&&a.push(r(t[n]));return Array.prototype.concat.apply([],a)}}};return a});