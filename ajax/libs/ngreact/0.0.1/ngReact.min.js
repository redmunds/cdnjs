!function(exports,global){global["true"]=exports;var NgReact=function(){var onClickNameRegex=/\w+/g,onClickVarsRegex=/\(.*\)/g,formatParamsMatcher=/{(\d+)}/g,stringPropertyMatcher=/\.(\w+)/g,overlySimplifiedHTMLMatcher=/(<[^>]*>.*<\/[^>]*>)/g,textAndWhitespaceRegex=/^[\w\s]+$/;_.mixin({ngReactFormat:function(a,b){return a.replace(formatParamsMatcher,function(a,c){return"undefined"!=typeof b[c]?b[c]:a})},ngReactBracketNotation:function(a){return a.replace(stringPropertyMatcher,function(a){return _.ngReactFormat("['{0}']",[a.substring(1)])})}});var propertiesToKeep=[{attrName:"class",propName:"className",name:"className"},{attrName:"ng-click",propName:"onClick",name:"onClick",convertAttribute:function(attrs,scope,data){if(attrs.onClick){var fnName=_.first(attrs.onClick.match(onClickNameRegex)),fnParams=_.first(attrs.onClick.match(onClickVarsRegex));fnParams=fnParams.substring(1,fnParams.length-1);var defineHandler=_.ngReactFormat("var {0} = {1}; var handler = scope.$apply.bind(scope, scope.{2}.bind(null, {3}));",[scope.alias,JSON.stringify(data),fnName,fnParams]);eval(defineHandler),attrs.onClick=handler}}},{name:"id"},{name:"ng-bind",convertValue:function(attrs,scope,data){if(attrs["ng-bind"]){var defineValue=_.ngReactFormat("var {0} = {1}; var value = {2};",[scope.alias,JSON.stringify(data),_.ngReactBracketNotation(attrs["ng-bind"])]);return eval(defineValue),value}}}],getAttributes=function(a){var b={};return _.each(propertiesToKeep,function(c){var d=_.findWhere(_.values(a.attributes),{localName:c.attrName||c.name});d&&(b[c.propName||c.name]=d.value)}),b},convertAttributes=function(a,b,c){_.each(a,function(d,e){var f=_.findWhere(propertiesToKeep,{propName:e});f&&f.convertAttribute&&f.convertAttribute(a,b,c)})},convertValues=function(a,b,c){return _.compact(_.map(a,function(d,e){var f=_.findWhere(propertiesToKeep,{name:e});return f&&f.convertValue?f.convertValue(a,b,c):void 0}))},NgReactClasses={reactUnit:React.createClass({render:function(){var a=this.props.data,b=this.props.scope,c=this.props.domEl,d=_.compact(_.map(c.children,function(c){return c.localName?NgReactClasses.reactUnit({scope:b,data:a,domEl:c}):void 0})),e=getAttributes(c);convertAttributes(e,b,a);var f=convertValues(e,b,a);return f.length&&c.localName||_.each(c.innerHTML.split(overlySimplifiedHTMLMatcher),function(a){a.match(textAndWhitespaceRegex)&&f.push(a)}),React.DOM[c.localName].apply(null,[e].concat(f,d))}}),reactRepeatUnit:React.createClass({render:function(){var a=this.props.data,b=this.props.scope,c=_.compact(_.map(this.props.transcludedDom,function(c){if(c.localName){var d=NgReactClasses.reactUnit({scope:b,data:a,domEl:c});return d}})),d=getAttributes(this.props.rootUnit);return convertAttributes(d,b,a),React.DOM[this.props.rootUnit.localName].apply(null,[d].concat(convertValues(d,b,a),c))}}),reactRepeat:React.createClass({render:function(){var a=this.props.scope,b=this.props.rootUnit,c=this.props.transcluded,d=_.map(a.data,function(d){return NgReactClasses.reactRepeatUnit({scope:a,data:d,transcludedDom:c,rootUnit:b})});return React.DOM[b.parentElement.localName].apply(null,[getAttributes(b.parentElement)].concat(d))}})};return NgReactClasses}();angular.module("ngReact",[]).directive("ngReactRepeat",["$timeout",function(a){return{restrict:"A",transclude:!0,replace:!0,controller:["$scope","$element","$attrs","$transclude",function(b,c,d,e){var f=d.ngReactRepeat.split(" in ");if(2!==f.length)throw new Error('ngReactRepeat expected "alias in collection" format');b.alias=f[0];var g=c[0].offsetParent;e(function(d){b.$watch(f[1],function(){a(function(){React.renderComponent(NgReact.reactRepeat({scope:b,transcluded:d,rootUnit:c[0]}),g)})},!0)})}]}}]).directive("ngReactComponent",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){if(!d.ngReactComponent)throw new Error("ngReactComponent expected attribute to be the name of a react component");var e=function(){a(function(){React.renderComponent(window[d.ngReactComponent]({scope:b}),c[0])})};d.data?b.$watch(d.data,e,!0):e()}}}])}({},function(){return this}());