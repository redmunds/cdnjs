module.exports=function(A){var D=A||require("opal-runtime").Opal;(function(a){function D(c,a){return"number"===typeof c&&"number"===typeof a?c+a:c["$+"](a)}function A(c,a){return"number"===typeof c&&"number"===typeof a?c<a:c["$<"](a)}function M(c,a){return"number"===typeof c&&"number"===typeof a?c-a:c["$-"](a)}var c=a.nil,C=a.module,z=a.klass,x=a.hash2,N=a.range,fa=a.hash;a.add_stubs("$[]= $config $nil_or_empty? $name $grep $constants $include $const_get $extend $attr_reader $merge $class $update $raise $new $create_block $=== $has_more_lines? $next_block $dup $<< $each $define_method $send $insert $call $attr_accessor $[] $option $to_set $flatten $resolve_regexp $== $attr $method $register $arity $instance_exec $to_proc $activate $+ $values $groups $add_document_processor $! $any? $select $add_syntax_processor $to_sym $include? $private $tr $to_s $join $map $upcase $chr $split $instance_variable_get $instance_variable_set $resolve_args $freeze $process_block_given? $source_location $class_for_name $< $update_config $unshift $as_symbol $name= $pop $size $> $- $fill $-@ $next_auto_id $generate_name $length $empty? $const_defined?".split(" "));
return function(ea){(function(E){E=C(E,"Extensions");var g=E.$$scope;(function(d,$super){function f(){}var b=f=z(d,$super,"Processor",f),k=b.$$scope,l,t,p,h,g,r,u,v,B,q;b.$$proto.config=c;(function(b){var d,h,k;a.defn(b,"$config",d=function(){var a;null==this.config&&(this.config=c);return!1!==(a=this.config)&&a!==c&&null!=a?a:this.config=x([],{})},d.$$arity=0);a.defn(b,"$option",h=function(c,a){return this.$config()["$[]="](c,a)},h.$$arity=2);a.defn(b,"$use_dsl",k=function(){var a;return(a=this.$name()["$nil_or_empty?"]())===
c||null==a||a.$$is_boolean&&1!=a?(a=this.$constants().$grep("DSL"))===c||null==a||a.$$is_boolean&&1!=a?c:this.$extend(this.$const_get("DSL")):(a=this.$constants().$grep("DSL"))===c||null==a||a.$$is_boolean&&1!=a?c:this.$include(this.$const_get("DSL"))},k.$$arity=0);a.alias(b,"extend_dsl","use_dsl");return a.alias(b,"include_dsl","use_dsl")})(a.get_singleton_class(b));b.$attr_reader("config");a.defn(b,"$initialize",l=function(a){null==a&&(a=x([],{}));return this.config=this.$class().$config().$merge(a)},
l.$$arity=-1);a.defn(b,"$update_config",t=function(a){return this.config.$update(a)},t.$$arity=1);a.defn(b,"$process",p=function(c){var b,d=arguments.length;b=d-0;0>b&&(b=0);b=Array(b);for(var h=0;h<d;h++)b[h-0]=arguments[h];return this.$raise(a.get("NotImplementedError"))},p.$$arity=-1);a.defn(b,"$create_block",h=function(a,c,b,d,h){null==h&&(h=x([],{}));return k.get("Block").$new(a,c,x(["source","attributes"],{source:b,attributes:d}).$merge(h))},h.$$arity=-5);a.defn(b,"$create_image_block",g=function(a,
b,h){null==h&&(h=x([],{}));return this.$create_block(a,"image",c,b,h)},g.$$arity=-3);a.defn(b,"$create_inline",r=function(a,c,b,h){null==h&&(h=x([],{}));return k.get("Inline").$new(a,c,b,h)},r.$$arity=-4);a.defn(b,"$parse_content",u=function(a,b,h){var d,p,f=c,l=c;null==h&&(h=c);for(f=(d=k.get("Reader")["$==="](b))===c||null==d||d.$$is_boolean&&1!=d?k.get("Reader").$new(b):b;(p=f["$has_more_lines?"]())!==c&&null!=p&&(!p.$$is_boolean||1==p);)if(l=k.get("Parser").$next_block(f,a,!1!==h&&h!==c&&null!=
h?h.$dup():x([],{})),!1!==l&&l!==c&&null!=l)a["$<<"](l);return a},u.$$arity=-3);return(v=(B=[["create_paragraph","create_block","paragraph"],["create_open_block","create_block","open"],["create_example_block","create_block","example"],["create_pass_block","create_block","pass"],["create_listing_block","create_block","listing"],["create_literal_block","create_block","literal"],["create_anchor","create_inline","anchor"]]).$each,v.$$p=(q=function(b,h,d){var k=q.$$s||this,p,l;null==b&&(b=c);null==h&&
(h=c);null==d&&(d=c);return(p=k.$define_method,p.$$p=(l=function(c){var b=l.$$s||this,k,p=arguments.length;k=p-0;0>k&&(k=0);k=Array(k);for(var f=0;f<p;f++)k[f-0]=arguments[f];return b.$send.apply(b,[h].concat(a.to_a(k.$dup().$insert(1,d))))},l.$$s=k,l.$$arity=-1,l),p).call(k,b)},q.$$s=b,q.$$arity=3,q),v).call(B)})(g.base,null);(function(d){d=C(d,"ProcessorDsl");var g,f,b;a.defn(d,"$option",g=function(a,c){return this.$config()["$[]="](a,c)},g.$$arity=2);a.defn(d,"$process",f=function(b){var d,t,p=
f.$$p||c;null==this.process_block&&(this.process_block=c);var h=arguments.length;t=h-0;0>t&&(t=0);t=Array(t);for(var g=0;g<h;g++)t[g-0]=arguments[g];f.$$p=null;return p!==c?this.process_block=p:(d=this.process_block)===c||null==d||d.$$is_boolean&&1!=d?this.$raise(a.get("NotImplementedError")):(d=this.process_block).$call.apply(d,a.to_a(t))},f.$$arity=-1);a.defn(d,"$process_block_given?",b=function(){var a;return(a=this.process_block,null!=a&&a!==c)?"instance-variable":c},b.$$arity=0)})(g.base);(function(d,
$super){function f(){}var b=f=z(d,$super,"Preprocessor",f),k;return(a.defn(b,"$process",k=function(c,b){return this.$raise(a.get("NotImplementedError"))},k.$$arity=2),c)&&"process"})(g.base,g.get("Processor"));a.casgn(g.get("Preprocessor"),"DSL",g.get("ProcessorDsl"));(function(d,$super){function f(){}var b=f=z(d,$super,"Treeprocessor",f),k;return(a.defn(b,"$process",k=function(c){return this.$raise(a.get("NotImplementedError"))},k.$$arity=1),c)&&"process"})(g.base,g.get("Processor"));a.casgn(g.get("Treeprocessor"),
"DSL",g.get("ProcessorDsl"));(function(d,$super){function f(){}var b=f=z(d,$super,"Postprocessor",f),k;return(a.defn(b,"$process",k=function(c,b){return this.$raise(a.get("NotImplementedError"))},k.$$arity=2),c)&&"process"})(g.base,g.get("Processor"));a.casgn(g.get("Postprocessor"),"DSL",g.get("ProcessorDsl"));(function(d,$super){function f(){}var b=f=z(d,$super,"IncludeProcessor",f),k,l;a.defn(b,"$process",k=function(c,b,h,d){return this.$raise(a.get("NotImplementedError"))},k.$$arity=4);return(a.defn(b,
"$handles?",l=function(a){return!0},l.$$arity=1),c)&&"handles?"})(g.base,g.get("Processor"));a.casgn(g.get("IncludeProcessor"),"DSL",g.get("ProcessorDsl"));(function(d,$super){function f(){}var b=f=z(d,$super,"DocinfoProcessor",f),k,l;b.$$proto.config=c;b.$attr_accessor("location");a.defn(b,"$initialize",k=function(b){var d,h,f;null==b&&(b=x([],{}));k.$$p=null;(d=a.find_super_dispatcher(this,"initialize",k,!1),d.$$p=null,d).call(this,b);return d="location",h=this.config,!1!==(f=h["$[]"](d))&&f!==
c&&null!=f?f:h["$[]="](d,"head")},k.$$arity=-1);return(a.defn(b,"$process",l=function(c){return this.$raise(a.get("NotImplementedError"))},l.$$arity=1),c)&&"process"})(g.base,g.get("Processor"));(function(c){c=C(c,"DocinfoProcessorDsl");var g;c.$include(c.$$scope.get("ProcessorDsl"));a.defn(c,"$at_location",g=function(a){return this.$option("location",a)},g.$$arity=1)})(g.base);a.casgn(g.get("DocinfoProcessor"),"DSL",g.get("DocinfoProcessorDsl"));(function(d,$super){function f(){}var b=f=z(d,$super,
"BlockProcessor",f),k,l;b.$$proto.config=c;b.$attr_accessor("name");a.defn(b,"$initialize",k=function(b,d){var h,f,l,g=c;null==b&&(b=c);null==d&&(d=x([],{}));k.$$p=null;(h=a.find_super_dispatcher(this,"initialize",k,!1),h.$$p=null,h).call(this,d);this.name=!1!==(h=b)&&h!==c&&null!=h?h:this.config["$[]"]("name");g=this.config["$[]"]("contexts");if(a.get("NilClass")["$==="](g))h="contexts",f=this.config,!1!==(l=f["$[]"](h))&&l!==c&&null!=l?l:f["$[]="](h,["open","paragraph"].$to_set());else if(a.get("Symbol")["$==="](g))this.config["$[]="]("contexts",
[this.config["$[]"]("contexts")].$to_set());else this.config["$[]="]("contexts",this.config["$[]"]("contexts").$to_set());return h="content_model",f=this.config,!1!==(l=f["$[]"](h))&&l!==c&&null!=l?l:f["$[]="](h,"compound")},k.$$arity=-1);return(a.defn(b,"$process",l=function(c,b,d){return this.$raise(a.get("NotImplementedError"))},l.$$arity=3),c)&&"process"})(g.base,g.get("Processor"));(function(d){d=C(d,"BlockProcessorDsl");var g=d.$$scope,f,b,k,l,t;d.$include(g.get("ProcessorDsl"));a.defn(d,"$named",
f=function(a){var b;return(b=g.get("Processor")["$==="](this))===c||null==b||b.$$is_boolean&&1!=b?this.$option("name",a):this.name=a},f.$$arity=1);a.alias(d,"match_name","named");a.alias(d,"bind_to","named");a.defn(d,"$contexts",b=function(a){var c,b=arguments.length;c=b-0;0>c&&(c=0);c=Array(c);for(var d=0;d<b;d++)c[d-0]=arguments[d];return this.$option("contexts",c.$flatten())},b.$$arity=-1);a.alias(d,"on_contexts","contexts");a.alias(d,"on_context","contexts");a.defn(d,"$content_model",k=function(a){return this.$option("content_model",
a)},k.$$arity=1);a.alias(d,"parse_content_as","content_model");a.defn(d,"$positional_attributes",l=function(a){var c,b=arguments.length;c=b-0;0>c&&(c=0);c=Array(c);for(var d=0;d<b;d++)c[d-0]=arguments[d];return this.$option("pos_attrs",c.$flatten())},l.$$arity=-1);a.alias(d,"pos_attrs","positional_attributes");a.alias(d,"name_attributes","positional_attributes");a.alias(d,"name_positional_attributes","positional_attributes");a.defn(d,"$default_attrs",t=function(a){return this.$option("default_attrs",
a)},t.$$arity=1);a.alias(d,"seed_attributes_with","default_attrs")})(g.base);a.casgn(g.get("BlockProcessor"),"DSL",g.get("BlockProcessorDsl"));(function(d,$super){function f(){}var b=f=z(d,$super,"MacroProcessor",f),k,l;b.$$proto.config=c;b.$attr_accessor("name");a.defn(b,"$initialize",k=function(b,d){var h,f,l;null==b&&(b=c);null==d&&(d=x([],{}));k.$$p=null;(h=a.find_super_dispatcher(this,"initialize",k,!1),h.$$p=null,h).call(this,d);this.name=!1!==(h=b)&&h!==c&&null!=h?h:this.config["$[]"]("name");
return h="content_model",f=this.config,!1!==(l=f["$[]"](h))&&l!==c&&null!=l?l:f["$[]="](h,"attributes")},k.$$arity=-1);return(a.defn(b,"$process",l=function(c,b,d){return this.$raise(a.get("NotImplementedError"))},l.$$arity=3),c)&&"process"})(g.base,g.get("Processor"));(function(d){d=C(d,"MacroProcessorDsl");var g=d.$$scope,f,b,k,l;d.$include(g.get("ProcessorDsl"));a.defn(d,"$named",f=function(a){var b;return(b=g.get("Processor")["$==="](this))===c||null==b||b.$$is_boolean&&1!=b?this.$option("name",
a):this.name=a},f.$$arity=1);a.alias(d,"match_name","named");a.alias(d,"bind_to","named");a.defn(d,"$content_model",b=function(a){return this.$option("content_model",a)},b.$$arity=1);a.alias(d,"parse_content_as","content_model");a.defn(d,"$positional_attributes",k=function(a){var c,b=arguments.length;c=b-0;0>c&&(c=0);c=Array(c);for(var d=0;d<b;d++)c[d-0]=arguments[d];return this.$option("pos_attrs",c.$flatten())},k.$$arity=-1);a.alias(d,"pos_attrs","positional_attributes");a.alias(d,"name_attributes",
"positional_attributes");a.alias(d,"name_positional_attributes","positional_attributes");a.defn(d,"$default_attrs",l=function(a){return this.$option("default_attrs",a)},l.$$arity=1);a.alias(d,"seed_attributes_with","default_attrs")})(g.base);(function(a,$super){function f(){}f=z(a,$super,"BlockMacroProcessor",f);return c})(g.base,g.get("MacroProcessor"));a.casgn(g.get("BlockMacroProcessor"),"DSL",g.get("MacroProcessorDsl"));(function(d,$super){function f(){}var b=f=z(d,$super,"InlineMacroProcessor",
f),k=b.$$proto,l,g;k.config=k.name=c;a.defn(b,"$regexp",l=function(){var a,b;return a=this.config,!1!==(b=a["$[]"]("regexp"))&&b!==c&&null!=b?b:a["$[]="]("regexp",this.$resolve_regexp(this.name,this.config["$[]"]("format")))},l.$$arity=0);return(a.defn(b,"$resolve_regexp",g=function(a,c){return c["$=="]("short")?new RegExp("\\\\?"+a+":\\[((?:\\\\\\]|[^\\]])*?)\\]"):new RegExp("\\\\?"+a+":(\\S+?)\\[((?:\\\\\\]|[^\\]])*?)\\]")},g.$$arity=2),c)&&"resolve_regexp"})(g.base,g.get("MacroProcessor"));(function(c){c=
C(c,"InlineMacroProcessorDsl");var g,f;c.$include(c.$$scope.get("MacroProcessorDsl"));a.defn(c,"$using_format",g=function(a){return this.$option("format",a)},g.$$arity=1);a.defn(c,"$match",f=function(a){return this.$option("regexp",a)},f.$$arity=1)})(g.base);a.casgn(g.get("InlineMacroProcessor"),"DSL",g.get("InlineMacroProcessorDsl"));(function(d,$super){function f(){}var b=f=z(d,$super,"Extension",f),k;b.$attr("kind");b.$attr("config");b.$attr("instance");return(a.defn(b,"$initialize",k=function(a,
c,b){this.kind=a;this.instance=c;return this.config=b},k.$$arity=3),c)&&"initialize"})(g.base,null);(function(d,$super){function f(){}var b=f=z(d,$super,"ProcessorExtension",f),k;b.$attr("process_method");return(a.defn(b,"$initialize",k=function(b,d,f){var h;null==f&&(f=c);k.$$p=null;(h=a.find_super_dispatcher(this,"initialize",k,!1),h.$$p=null,h).call(this,b,d,d.$config());return this.process_method=!1!==(h=f)&&h!==c&&null!=h?h:d.$method("process")},k.$$arity=-3),c)&&"initialize"})(g.base,g.get("Extension"));
(function(d,$super){function f(){}var b=f=z(d,$super,"Group",f),k;(function(b){var d=b.$$scope,f;return(a.defn(b,"$register",f=function(a){null==a&&(a=c);return d.get("Extensions").$register(a,this)},f.$$arity=-1),c)&&"register"})(a.get_singleton_class(b));return(a.defn(b,"$activate",k=function(c){return this.$raise(a.get("NotImplementedError"))},k.$$arity=1),c)&&"activate"})(g.base,null);(function(d,$super){function f(){}var b=f=z(d,$super,"Registry",f),k=b.$$proto,g=b.$$scope,t,p,h,C,r,u,v,B,q,
y,O,F,E,P,G,Q,R,H,S,T,U,I,V,W,X,J,Y,Z,aa,ba,K,L,ca,da;k.groups=k.preprocessor_extensions=k.treeprocessor_extensions=k.postprocessor_extensions=k.include_processor_extensions=k.docinfo_processor_extensions=k.block_extensions=k.block_macro_extensions=k.inline_macro_extensions=c;b.$attr_reader("document");b.$attr_reader("groups");a.defn(b,"$initialize",t=function(a){null==a&&(a=x([],{}));this.groups=a;return this.document=this.block_extensions=this.block_macro_extensions=this.inline_macro_extensions=
this.preprocessor_extensions=this.treeprocessor_extensions=this.postprocessor_extensions=this.include_processor_extensions=this.docinfo_processor_extensions=c},t.$$arity=-1);a.defn(b,"$activate",p=function(b){var d,e,f;this.document=b;(d=(e=D(g.get("Extensions").$groups().$values(),this.groups.$values())).$each,d.$$p=(f=function(e){var b=f.$$s||this,d,g=c;null==e&&(e=c);g=e;a.get("Proc")["$==="](g)?(g=e.$arity(),e=0["$==="](g)||-1["$==="](g)?(d=b.$instance_exec,d.$$p=e.$to_proc(),d).call(b):1["$==="](g)?
e.$call(b):c):e=a.get("Class")["$==="](g)?e.$new().$activate(b):e.$activate(b);return e},f.$$s=this,f.$$arity=1,f),d).call(e);return this},p.$$arity=1);a.defn(b,"$preprocessor",h=function(a){var b,e,d=h.$$p||c,f=arguments.length;e=f-0;0>e&&(e=0);e=Array(e);for(var g=0;g<f;g++)e[g-0]=arguments[g];h.$$p=null;return(b=this.$add_document_processor,b.$$p=d.$to_proc(),b).call(this,"preprocessor",e)},h.$$arity=-1);a.defn(b,"$preprocessors?",C=function(){return this.preprocessor_extensions["$!"]()["$!"]()},
C.$$arity=0);a.defn(b,"$preprocessors",r=function(){return this.preprocessor_extensions},r.$$arity=0);a.defn(b,"$treeprocessor",u=function(a){var b,e,d=u.$$p||c,g=arguments.length;e=g-0;0>e&&(e=0);e=Array(e);for(var f=0;f<g;f++)e[f-0]=arguments[f];u.$$p=null;return(b=this.$add_document_processor,b.$$p=d.$to_proc(),b).call(this,"treeprocessor",e)},u.$$arity=-1);a.defn(b,"$treeprocessors?",v=function(){return this.treeprocessor_extensions["$!"]()["$!"]()},v.$$arity=0);a.defn(b,"$treeprocessors",B=function(){return this.treeprocessor_extensions},
B.$$arity=0);a.defn(b,"$postprocessor",q=function(a){var b,e,d=q.$$p||c,f=arguments.length;e=f-0;0>e&&(e=0);e=Array(e);for(var g=0;g<f;g++)e[g-0]=arguments[g];q.$$p=null;return(b=this.$add_document_processor,b.$$p=d.$to_proc(),b).call(this,"postprocessor",e)},q.$$arity=-1);a.defn(b,"$postprocessors?",y=function(){return this.postprocessor_extensions["$!"]()["$!"]()},y.$$arity=0);a.defn(b,"$postprocessors",O=function(){return this.postprocessor_extensions},O.$$arity=0);a.defn(b,"$include_processor",
F=function(a){var b,e,d=F.$$p||c,g=arguments.length;e=g-0;0>e&&(e=0);e=Array(e);for(var f=0;f<g;f++)e[f-0]=arguments[f];F.$$p=null;return(b=this.$add_document_processor,b.$$p=d.$to_proc(),b).call(this,"include_processor",e)},F.$$arity=-1);a.defn(b,"$include_processors?",E=function(){return this.include_processor_extensions["$!"]()["$!"]()},E.$$arity=0);a.defn(b,"$include_processors",P=function(){return this.include_processor_extensions},P.$$arity=0);a.defn(b,"$docinfo_processor",G=function(a){var b,
e,d=G.$$p||c,f=arguments.length;e=f-0;0>e&&(e=0);e=Array(e);for(var g=0;g<f;g++)e[g-0]=arguments[g];G.$$p=null;return(b=this.$add_document_processor,b.$$p=d.$to_proc(),b).call(this,"docinfo_processor",e)},G.$$arity=-1);a.defn(b,"$docinfo_processors?",Q=function(a){var b,e,d;null==a&&(a=c);return(b=this.docinfo_processor_extensions)===c||null==b||b.$$is_boolean&&1!=b?!1:!1!==a&&a!==c&&null!=a?(b=(e=this.docinfo_processor_extensions)["$any?"],b.$$p=(d=function(b){null==b&&(b=c);return b.$config()["$[]"]("location")["$=="](a)},
d.$$s=this,d.$$arity=1,d),b).call(e):!0},Q.$$arity=-1);a.defn(b,"$docinfo_processors",R=function(a){var b,e,d;null==a&&(a=c);return(b=this.docinfo_processor_extensions)===c||null==b||b.$$is_boolean&&1!=b?c:!1!==a&&a!==c&&null!=a?(b=(e=this.docinfo_processor_extensions).$select,b.$$p=(d=function(b){null==b&&(b=c);return b.$config()["$[]"]("location")["$=="](a)},d.$$s=this,d.$$arity=1,d),b).call(e):this.docinfo_processor_extensions},R.$$arity=-1);a.defn(b,"$block",H=function(a){var b,e,d=H.$$p||c,g=
arguments.length;e=g-0;0>e&&(e=0);e=Array(e);for(var f=0;f<g;f++)e[f-0]=arguments[f];H.$$p=null;return(b=this.$add_syntax_processor,b.$$p=d.$to_proc(),b).call(this,"block",e)},H.$$arity=-1);a.defn(b,"$blocks?",S=function(){return this.block_extensions["$!"]()["$!"]()},S.$$arity=0);a.defn(b,"$registered_for_block?",T=function(a,b){var e,d=c;return(e=d=this.block_extensions["$[]"](a.$to_sym()))===c||null==e||e.$$is_boolean&&1!=e?!1:(e=d.$config()["$[]"]("contexts")["$include?"](b))===c||null==e||e.$$is_boolean&&
1!=e?!1:d},T.$$arity=2);a.defn(b,"$find_block_extension",U=function(a){return this.block_extensions["$[]"](a.$to_sym())},U.$$arity=1);a.defn(b,"$block_macro",I=function(a){var b,e,d=I.$$p||c,f=arguments.length;e=f-0;0>e&&(e=0);e=Array(e);for(var g=0;g<f;g++)e[g-0]=arguments[g];I.$$p=null;return(b=this.$add_syntax_processor,b.$$p=d.$to_proc(),b).call(this,"block_macro",e)},I.$$arity=-1);a.defn(b,"$block_macros?",V=function(){return this.block_macro_extensions["$!"]()["$!"]()},V.$$arity=0);a.defn(b,
"$registered_for_block_macro?",W=function(a){var b,e=c;return(b=e=this.block_macro_extensions["$[]"](a.$to_sym()))===c||null==b||b.$$is_boolean&&1!=b?!1:e},W.$$arity=1);a.defn(b,"$find_block_macro_extension",X=function(a){return this.block_macro_extensions["$[]"](a.$to_sym())},X.$$arity=1);a.defn(b,"$inline_macro",J=function(a){var b,e,d=J.$$p||c,g=arguments.length;e=g-0;0>e&&(e=0);e=Array(e);for(var f=0;f<g;f++)e[f-0]=arguments[f];J.$$p=null;return(b=this.$add_syntax_processor,b.$$p=d.$to_proc(),
b).call(this,"inline_macro",e)},J.$$arity=-1);a.defn(b,"$inline_macros?",Y=function(){return this.inline_macro_extensions["$!"]()["$!"]()},Y.$$arity=0);a.defn(b,"$registered_for_inline_macro?",Z=function(a){var b,e=c;return(b=e=this.inline_macro_extensions["$[]"](a.$to_sym()))===c||null==b||b.$$is_boolean&&1!=b?!1:e},Z.$$arity=1);a.defn(b,"$find_inline_macro_extension",aa=function(a){return this.inline_macro_extensions["$[]"](a.$to_sym())},aa.$$arity=1);a.defn(b,"$inline_macros",ba=function(){return this.inline_macro_extensions.$values()},
ba.$$arity=0);b.$private();a.defn(b,"$add_document_processor",K=function(b,d){var e,f,h,k,m,u,r=this,p=K.$$p||c,v=c,y=c,q=c,n=c,t=y=c,B=c,w=c,x=c;K.$$p=null;v=b.$to_s().$tr("_"," ");y=(e=(f=v.$split(" ")).$map,e.$$p=(h=function(a){null==a&&(a=c);return""+a.$chr().$upcase()+a["$[]"](N(1,-1,!1))},h.$$s=r,h.$$arity=1,h),e).call(f).$join().$to_sym();q=g.get("Extensions").$const_get(y);n=(e=null==a.Object.$$scope.AsciidoctorJ?c:"constant")===c||null==e||e.$$is_boolean&&1!=e?c:a.get("AsciidoctorJ").$$scope.get("Extensions").$const_get(y);
y=!1!==(e=r.$instance_variable_get(("@"+b+"_extensions").$to_sym()))&&e!==c&&null!=e?e:r.$instance_variable_set(("@"+b+"_extensions").$to_sym(),[]);t=function(){if(p!==c)return B=r.$resolve_args(d,1),w=q.$new(B),(e=q.$constants().$grep("DSL"))===c||null==e||e.$$is_boolean&&1!=e||w.$extend(q.$const_get("DSL")),(e=(k=w).$instance_exec,e.$$p=p.$to_proc(),e).call(k),w.$freeze(),((e=w["$process_block_given?"]())===c||null==e||e.$$is_boolean&&1!=e)&&r.$raise(a.get("ArgumentError").$new("No block specified to process "+
v+" extension at "+p.$source_location())),g.get("ProcessorExtension").$new(b,w);m=r.$resolve_args(d,2);e=a.to_ary(m);w=null==e[0]?c:e[0];B=null==e[1]?c:e[1];m;if((e=!1!==(m=a.get("Class")["$==="](w))&&m!==c&&null!=m?m:(u=a.get("String")["$==="](w),!1!==u&&u!==c&&null!=u?w=g.get("Extensions").$class_for_name(w):u))===c||null==e||e.$$is_boolean&&1!=e){if((e=!1!==(m=q["$==="](w))&&m!==c&&null!=m?m:(u=!1!==n&&n!==c&&null!=n)?n["$==="](w):n)===c||null==e||e.$$is_boolean&&1!=e)return r.$raise(a.get("ArgumentError").$new("Invalid arguments specified for registering "+
v+" extension: "+d));w.$update_config(B);w.$freeze();return g.get("ProcessorExtension").$new(b,w)}((e=!1!==(m=A(w,q))&&m!==c&&null!=m?m:(u=!1!==n&&n!==c&&null!=n)?A(w,n):n)===c||null==e||e.$$is_boolean&&1!=e)&&r.$raise(a.get("ArgumentError").$new("Invalid type for "+v+" extension: "+w));x=w.$new(B);x.$freeze();return g.get("ProcessorExtension").$new(b,x)}();return t.$config()["$[]"]("position")["$=="](">>")?y.$unshift(t):y["$<<"](t)},K.$$arity=2);a.defn(b,"$add_syntax_processor",L=function(b,d){var e,
f,h,k,m;m=L.$$p||c;var u=c,r=c,y=c,v=r=c,q=y=c,p=c,n=c,r=c;L.$$p=null;u=b.$to_s().$tr("_"," ");r=(e=(f=u.$split(" ")).$map,e.$$p=(h=function(a){null==a&&(a=c);return""+a.$chr().$upcase()+a["$[]"](N(1,-1,!1))},h.$$s=this,h.$$arity=1,h),e).call(f).$join();y=(""+r+"Processor").$to_sym();r=g.get("Extensions").$const_get(y);v=(e=null==a.Object.$$scope.AsciidoctorJ?c:"constant")===c||null==e||e.$$is_boolean&&1!=e?c:a.get("AsciidoctorJ").$$scope.get("Extensions").$const_get(y);y=!1!==(e=this.$instance_variable_get(("@"+
b+"_extensions").$to_sym()))&&e!==c&&null!=e?e:this.$instance_variable_set(("@"+b+"_extensions").$to_sym(),x([],{}));if(m!==c)return k=this.$resolve_args(d,2),e=a.to_ary(k),q=null==e[0]?c:e[0],p=null==e[1]?c:e[1],k,n=r.$new(this.$as_symbol(q),p),(e=r.$constants().$grep("DSL"))===c||null==e||e.$$is_boolean&&1!=e||n.$extend(r.$const_get("DSL")),m.$arity()["$=="](1)?a.yield1(m,n):(e=(k=n).$instance_exec,e.$$p=m.$to_proc(),e).call(k),((e=q=this.$as_symbol(n.$name()))===c||null==e||e.$$is_boolean&&1!=
e)&&this.$raise(a.get("ArgumentError").$new("No name specified for "+u+" extension at "+m.$source_location())),((e=n["$process_block_given?"]())===c||null==e||e.$$is_boolean&&1!=e)&&this.$raise(a.get("NoMethodError").$new("No block specified to process "+u+" extension at "+m.$source_location())),n.$freeze(),y["$[]="](q,g.get("ProcessorExtension").$new(b,n));m=this.$resolve_args(d,3);e=a.to_ary(m);n=null==e[0]?c:e[0];q=null==e[1]?c:e[1];p=null==e[2]?c:e[2];m;if((e=!1!==(m=a.get("Class")["$==="](n))&&
m!==c&&null!=m?m:(k=a.get("String")["$==="](n),!1!==k&&k!==c&&null!=k?n=g.get("Extensions").$class_for_name(n):k))===c||null==e||e.$$is_boolean&&1!=e){if((e=!1!==(m=r["$==="](n))&&m!==c&&null!=m?m:(k=!1!==v&&v!==c&&null!=v)?v["$==="](n):v)===c||null==e||e.$$is_boolean&&1!=e)return this.$raise(a.get("ArgumentError").$new("Invalid arguments specified for registering "+u+" extension: "+d));n.$update_config(p);((e=q=!1!==q&&q!==c&&null!=q?(m=[this.$as_symbol(q)],k=n,k["$name="].apply(k,m),m[m.length-
1]):this.$as_symbol(n.$name()))===c||null==e||e.$$is_boolean&&1!=e)&&this.$raise(a.get("ArgumentError").$new("No name specified for "+u+" extension: "+n));n.$freeze();return y["$[]="](q,g.get("ProcessorExtension").$new(b,n))}((e=!1!==(m=A(n,r))&&m!==c&&null!=m?m:(k=!1!==v&&v!==c&&null!=v)?A(n,v):v)===c||null==e||e.$$is_boolean&&1!=e)&&this.$raise(a.get("ArgumentError").$new("Class specified for "+u+" extension does not inherit from "+r+": "+n));r=n.$new(this.$as_symbol(q),p);((e=q=this.$as_symbol(r.$name()))===
c||null==e||e.$$is_boolean&&1!=e)&&this.$raise(a.get("ArgumentError").$new("No name specified for "+u+" extension: "+n));n.$freeze();return y["$[]="](q,g.get("ProcessorExtension").$new(b,r))},L.$$arity=2);a.defn(b,"$resolve_args",ca=function(b,d){var e,f=c,g=c,k=c,f=(e=a.get("Hash")["$==="](b["$[]"](-1)))===c||null==e||e.$$is_boolean&&1!=e?x([],{}):b.$pop();if(d["$=="](1))return f;var g=b.$size(),h=k=M(M(d,1),g);(e="number"===typeof h?0<h:h["$>"](0))===c||null==e||e.$$is_boolean&&1!=e?(e=A(k,0))===
c||null==e||e.$$is_boolean&&1!=e||b.$pop(k["$-@"]()):b.$fill(c,g,k);b["$<<"](f);return b},ca.$$arity=2);return(a.defn(b,"$as_symbol",da=function(a){return!1!==a&&a!==c&&null!=a?a.$to_sym():c},da.$$arity=1),c)&&"as_symbol"})(g.base,null);(function(d){var g=d.$$scope,f,b,k,l,t,p,h,z;a.defn(d,"$generate_name",f=function(){return"extgrp"+this.$next_auto_id()},f.$$arity=0);a.defn(d,"$next_auto_id",b=function(){var a;null==this.auto_id&&(this.auto_id=c);!1!==(a=this.auto_id)&&a!==c&&null!=a?a:this.auto_id=
-1;return this.auto_id=D(this.auto_id,1)},b.$$arity=0);a.defn(d,"$groups",k=function(){var a;null==this.groups&&(this.groups=c);return!1!==(a=this.groups)&&a!==c&&null!=a?a:this.groups=x([],{})},k.$$arity=0);a.defn(d,"$build_registry",l=function(a){var b,d=l.$$p||c;null==a&&(a=c);l.$$p=null;return d!==c?(!1!==(b=a)&&b!==c&&null!=b?b:a=this.$generate_name(),g.get("Registry").$new(fa(a,d))):g.get("Registry").$new()},l.$$arity=-1);a.defn(d,"$register",t=function(b){var d,f,g=t.$$p||c,k=c,h=c,l=h=c,l=
c,k=arguments.length;f=k-0;0>f&&(f=0);f=Array(f);for(h=0;h<k;h++)f[h-0]=arguments[h];t.$$p=null;k=f.$length();g===c&&((d=(h=f.$pop())["$!"]())===c||null==d||d.$$is_boolean&&1!=d?(l=h,g=a.get("Class")["$==="](l)?h:a.get("String")["$==="](l)?this.$class_for_name(h):a.get("Symbol")["$==="](l)?this.$class_for_name(h.$to_s()):h):g=this.$raise(a.get("ArgumentError").$new("Extension group to register not specified")));h=g;l=!1!==(d=f.$pop())&&d!==c&&null!=d?d:this.$generate_name();((d=f["$empty?"]())===
c||null==d||d.$$is_boolean&&1!=d)&&this.$raise(a.get("ArgumentError").$new("Wrong number of arguments ("+k+" for 1..2)"));return this.$groups()["$[]="](l,h)},t.$$arity=-1);a.defn(d,"$unregister_all",p=function(){return this.groups=x([],{})},p.$$arity=0);a.defn(d,"$resolve_class",h=function(b){var d;return(d=a.get("Class")["$==="](b))===c||null==d||d.$$is_boolean&&1!=d?this.$class_for_name(b.$to_s()):b},h.$$arity=1);return(a.defn(d,"$class_for_name",z=function(b){var d,f,g,h=c,h=a.get("Object");(d=
(f=b.$split("::")).$each,d.$$p=(g=function(a){var d=g.$$s||this,f;null==a&&(a=c);return(f=a["$empty?"]())===c||null==f||f.$$is_boolean&&1!=f?(f=h["$const_defined?"](a))===c||null==f||f.$$is_boolean&&1!=f?d.$raise("Could not resolve class for name: "+b):h=h.$const_get(a):c},g.$$s=this,g.$$arity=1,g),d).call(f);return h},z.$$arity=1),c)&&"class_for_name"})(a.get_singleton_class(E))})(C(ea,"Asciidoctor").$$scope.base)}(a.base)})(D);A=D.Asciidoctor.$$scope.Extensions;A.register=function(a,A){D.block_send(D.Asciidoctor.Extensions,
"register",a,A)};A.Registry.$$proto.inlineMacro=function(a,A){return D.block_send(this,"inline_macro",a,A)};A.InlineMacroProcessor.$$proto.process=function(a){return D.block_send(this,"process",a)}};
