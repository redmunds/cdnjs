module.exports=function(a){var b=a||require("opal-npm-wrapper").Opal;b.modules["asciidoctor/extensions"]=function(a){function b(a,b){return"number"==typeof a&&"number"==typeof b?a+b:a["$+"](b)}function c(a,b){return"number"==typeof a&&"number"==typeof b?b>a:a["$<"](b)}function d(a,b){return"number"==typeof a&&"number"==typeof b?a>b:a["$>"](b)}function e(a,b){return"number"==typeof a&&"number"==typeof b?a-b:a["$-"](b)}a.dynamic_require_severity="ignore";var f=a.top,g=a.nil,h=a.breaker,i=a.slice,j=a.module,k=a.klass,l=a.hash2,m=a.range,n=a.hash;return function(f){var o=j(f,"Asciidoctor");o.$$proto,o.$$scope;!function(f){var o=j(f,"Extensions"),p=(o.$$proto,o.$$scope);!function(b,c){function d(){}var e,f,h,j=d=k(b,c,"Processor",d),m=j.$$proto,n=j.$$scope;return m.config=g,function(a){a.$$scope,a.$$proto;return a.$$proto.$config=function(){var a,b=this;return null==b.config&&(b.config=g),(a=b.config)!==!1&&a!==g?a:b.config=l([],{})},a.$$proto.$option=function(a,b){var c=this;return c.$config()["$[]="](a,b)},a.$$proto.$use_dsl=function(){var a,b=this;return(a=b.$name()["$nil_or_empty?"]())===g||a.$$is_boolean&&1!=a?(a=b.$constants().$grep("DSL"))===g||a.$$is_boolean&&1!=a?g:b.$extend(b.$const_get("DSL")):(a=b.$constants().$grep("DSL"))===g||a.$$is_boolean&&1!=a?g:b.$include(b.$const_get("DSL"))},a.$$proto.$extend_dsl=a.$$proto.$use_dsl,a.$$proto.$include_dsl=a.$$proto.$use_dsl}(j.$singleton_class()),j.$attr_reader("config"),m.$initialize=function(a){var b=this;return null==a&&(a=l([],{})),b.config=b.$class().$config().$merge(a)},m.$update_config=function(a){var b=this;return b.config.$update(a)},m.$process=function(b){var c=this;return b=i.call(arguments,0),c.$raise(a.get("NotImplementedError"))},m.$create_block=function(a,b,c,d,e){return null==e&&(e=l([],{})),n.get("Block").$new(a,b,l(["source","attributes"],{source:c,attributes:d}).$merge(e))},m.$create_image_block=function(a,b,c){var d=this;return null==c&&(c=l([],{})),d.$create_block(a,"image",g,b,c)},m.$create_inline=function(a,b,c,d){return null==d&&(d=l([],{})),n.get("Inline").$new(a,b,c,d)},m.$parse_content=function(a,b,c){var d,e,f=g,h=g;for(null==c&&(c=l([],{})),f=function(){return(d=b["$is_a?"](n.get("Reader")))===g||d.$$is_boolean&&1!=d?n.get("Reader").$new(b):b}();(e=f["$has_more_lines?"]())!==g&&(!e.$$is_boolean||1==e);)h=n.get("Parser").$next_block(f,a,c),h!==!1&&h!==g&&a["$<<"](h);return g},(e=(f=[["create_paragraph","create_block","paragraph"],["create_open_block","create_block","open"],["create_example_block","create_block","example"],["create_pass_block","create_block","pass"],["create_listing_block","create_block","listing"],["create_literal_block","create_block","literal"],["create_anchor","create_inline","anchor"]]).$each,e.$$p=(h=function(a,b,c){var d,e,f,j=h.$$s||this;return null==a&&(a=g),null==b&&(b=g),null==c&&(c=g),(d=(e=j).$define_method,d.$$p=(f=function(a){var d,e=f.$$s||this;return a=i.call(arguments,0),(d=e).$send.apply(d,[b].concat(a.$dup().$insert(1,c)))},f.$$s=j,f),d).call(e,a)},h.$$s=j,h),e).call(f)}(o,null),function(b){var c,d=j(b,"ProcessorDsl");d.$$proto,d.$$scope;a.defn(d,"$option",function(a,b){var c=this;return c.$config()["$[]="](a,b)}),a.defn(d,"$process",c=function(b){var d,e=this,f=c.$$p,h=f||g;return null==e.process_block&&(e.process_block=g),b=i.call(arguments,0),c.$$p=null,h!==g?e.process_block=h:(d=e.process_block)===g||d.$$is_boolean&&1!=d?e.$raise(a.get("NotImplementedError")):(d=e.process_block).$call.apply(d,[].concat(b))}),a.defn(d,"$process_block_given?",function(){var a,b=this;return a=b.process_block,null!=a&&a!==g?"instance-variable":g})}(o),function(b,c){function d(){}var e=d=k(b,c,"Preprocessor",d),f=e.$$proto;e.$$scope;return f.$process=function(b,c){var d=this;return d.$raise(a.get("NotImplementedError"))},g&&"process"}(o,p.get("Processor")),a.casgn(p.get("Preprocessor"),"DSL",p.get("ProcessorDsl")),function(b,c){function d(){}var e=d=k(b,c,"Treeprocessor",d),f=e.$$proto;e.$$scope;return f.$process=function(b){var c=this;return c.$raise(a.get("NotImplementedError"))},g&&"process"}(o,p.get("Processor")),a.casgn(p.get("Treeprocessor"),"DSL",p.get("ProcessorDsl")),function(b,c){function d(){}var e=d=k(b,c,"Postprocessor",d),f=e.$$proto;e.$$scope;return f.$process=function(b,c){var d=this;return d.$raise(a.get("NotImplementedError"))},g&&"process"}(o,p.get("Processor")),a.casgn(p.get("Postprocessor"),"DSL",p.get("ProcessorDsl")),function(b,c){function d(){}var e=d=k(b,c,"IncludeProcessor",d),f=e.$$proto;e.$$scope;return f.$process=function(b,c,d,e){var f=this;return f.$raise(a.get("NotImplementedError"))},f["$handles?"]=function(a){return!0},g&&"handles?"}(o,p.get("Processor")),a.casgn(p.get("IncludeProcessor"),"DSL",p.get("ProcessorDsl")),function(b,c){function d(){}var e,f=d=k(b,c,"DocinfoProcessor",d),h=f.$$proto;f.$$scope;return h.config=g,f.$attr_accessor("location"),h.$initialize=e=function(b){var c,d,f,h=this;e.$$p;return null==b&&(b=l([],{})),e.$$p=null,a.find_super_dispatcher(h,"initialize",e,null).apply(h,[b]),c="location",d=h.config,(f=d["$[]"](c))!==!1&&f!==g?f:d["$[]="](c,"head")},h.$process=function(b){var c=this;return c.$raise(a.get("NotImplementedError"))},g&&"process"}(o,p.get("Processor")),function(b){var c=j(b,"DocinfoProcessorDsl"),d=(c.$$proto,c.$$scope);c.$include(d.get("ProcessorDsl")),a.defn(c,"$at_location",function(a){var b=this;return b.$option("location",a)})}(o),a.casgn(p.get("DocinfoProcessor"),"DSL",p.get("DocinfoProcessorDsl")),function(b,c){function d(){}var e,f=d=k(b,c,"BlockProcessor",d),h=f.$$proto;f.$$scope;return h.config=g,f.$attr_accessor("name"),h.$initialize=e=function(b,c){var d,f,h,i=this,j=(e.$$p,g);return null==b&&(b=g),null==c&&(c=l([],{})),e.$$p=null,a.find_super_dispatcher(i,"initialize",e,null).apply(i,[c]),i.name=(d=b)!==!1&&d!==g?d:i.config["$[]"]("name"),j=i.config["$[]"]("contexts"),a.get("NilClass")["$==="](j)?(d="contexts",f=i.config,(h=f["$[]"](d))!==!1&&h!==g?h:f["$[]="](d,["open","paragraph"].$to_set())):a.get("Symbol")["$==="](j)?i.config["$[]="]("contexts",[i.config["$[]"]("contexts")].$to_set()):i.config["$[]="]("contexts",i.config["$[]"]("contexts").$to_set()),d="content_model",f=i.config,(h=f["$[]"](d))!==!1&&h!==g?h:f["$[]="](d,"compound")},h.$process=function(b,c,d){var e=this;return e.$raise(a.get("NotImplementedError"))},g&&"process"}(o,p.get("Processor")),function(b){var c=j(b,"BlockProcessorDsl"),d=c.$$proto,e=c.$$scope;c.$include(e.get("ProcessorDsl")),a.defn(c,"$named",function(a){var b,c=this;return(b=c["$is_a?"](e.get("Processor")))===g||b.$$is_boolean&&1!=b?c.$option("name",a):c.name=a}),a.defn(c,"$match_name",d.$named),a.defn(c,"$bind_to",d.$named),a.defn(c,"$contexts",function(a){var b=this;return a=i.call(arguments,0),b.$option("contexts",a.$flatten())}),a.defn(c,"$on_contexts",d.$contexts),a.defn(c,"$on_context",d.$contexts),a.defn(c,"$content_model",function(a){var b=this;return b.$option("content_model",a)}),a.defn(c,"$parse_content_as",d.$content_model),a.defn(c,"$positional_attributes",function(a){var b=this;return a=i.call(arguments,0),b.$option("pos_attrs",a.$flatten())}),a.defn(c,"$pos_attrs",d.$positional_attributes),a.defn(c,"$name_attributes",d.$positional_attributes),a.defn(c,"$name_positional_attributes",d.$positional_attributes),a.defn(c,"$default_attrs",function(a){var b=this;return b.$option("default_attrs",a)}),a.defn(c,"$seed_attributes_with",d.$default_attrs)}(o),a.casgn(p.get("BlockProcessor"),"DSL",p.get("BlockProcessorDsl")),function(b,c){function d(){}var e,f=d=k(b,c,"MacroProcessor",d),h=f.$$proto;f.$$scope;return h.config=g,f.$attr_accessor("name"),h.$initialize=e=function(b,c){var d,f,h,i=this;e.$$p;return null==b&&(b=g),null==c&&(c=l([],{})),e.$$p=null,a.find_super_dispatcher(i,"initialize",e,null).apply(i,[c]),i.name=(d=b)!==!1&&d!==g?d:i.config["$[]"]("name"),d="content_model",f=i.config,(h=f["$[]"](d))!==!1&&h!==g?h:f["$[]="](d,"attributes")},h.$process=function(b,c,d){var e=this;return e.$raise(a.get("NotImplementedError"))},g&&"process"}(o,p.get("Processor")),function(b){var c=j(b,"MacroProcessorDsl"),d=c.$$proto,e=c.$$scope;c.$include(e.get("ProcessorDsl")),a.defn(c,"$named",function(a){var b,c=this;return(b=c["$is_a?"](e.get("Processor")))===g||b.$$is_boolean&&1!=b?c.$option("name",a):c.name=a}),a.defn(c,"$match_name",d.$named),a.defn(c,"$bind_to",d.$named),a.defn(c,"$content_model",function(a){var b=this;return b.$option("content_model",a)}),a.defn(c,"$parse_content_as",d.$content_model),a.defn(c,"$positional_attributes",function(a){var b=this;return a=i.call(arguments,0),b.$option("pos_attrs",a.$flatten())}),a.defn(c,"$pos_attrs",d.$positional_attributes),a.defn(c,"$name_attributes",d.$positional_attributes),a.defn(c,"$name_positional_attributes",d.$positional_attributes),a.defn(c,"$default_attrs",function(a){var b=this;return b.$option("default_attrs",a)}),a.defn(c,"$seed_attributes_with",d.$default_attrs)}(o),function(a,b){function c(){}var d=c=k(a,b,"BlockMacroProcessor",c);d.$$proto,d.$$scope;return g}(o,p.get("MacroProcessor")),a.casgn(p.get("BlockMacroProcessor"),"DSL",p.get("MacroProcessorDsl")),function(a,b){function c(){}var d=c=k(a,b,"InlineMacroProcessor",c),e=d.$$proto;d.$$scope;return e.config=e.name=g,e.$regexp=function(){var a,b,c,d=this;return a="regexp",b=d.config,(c=b["$[]"](a))!==!1&&c!==g?c:b["$[]="](a,d.$resolve_regexp(d.name,d.config["$[]"]("format")))},e.$resolve_regexp=function(a,b){return b["$=="]("short")?new RegExp("\\\\?"+a+":\\[((?:\\\\\\]|[^\\]])*?)\\]"):new RegExp("\\\\?"+a+":(\\S+?)\\[((?:\\\\\\]|[^\\]])*?)\\]")},g&&"resolve_regexp"}(o,p.get("MacroProcessor")),function(b){var c=j(b,"InlineMacroProcessorDsl"),d=(c.$$proto,c.$$scope);c.$include(d.get("MacroProcessorDsl")),a.defn(c,"$using_format",function(a){var b=this;return b.$option("format",a)}),a.defn(c,"$match",function(a){var b=this;return b.$option("regexp",a)})}(o),a.casgn(p.get("InlineMacroProcessor"),"DSL",p.get("InlineMacroProcessorDsl")),function(a,b){function c(){}var d=c=k(a,b,"Extension",c),e=d.$$proto;d.$$scope;return d.$attr("kind"),d.$attr("config"),d.$attr("instance"),e.$initialize=function(a,b,c){var d=this;return d.kind=a,d.instance=b,d.config=c},g&&"initialize"}(o,null),function(b,c){function d(){}var e,f=d=k(b,c,"ProcessorExtension",d),h=f.$$proto;f.$$scope;return f.$attr("process_method"),h.$initialize=e=function(b,c,d){var f,h=this;e.$$p;return null==d&&(d=g),e.$$p=null,a.find_super_dispatcher(h,"initialize",e,null).apply(h,[b,c,c.$config()]),h.process_method=(f=d)!==!1&&f!==g?f:c.$method("process")},g&&"initialize"}(o,p.get("Extension")),function(b,c){function d(){}var e=d=k(b,c,"Group",d),f=e.$$proto;e.$$scope;return function(a){var b=a.$$scope;a.$$proto;return a.$$proto.$register=function(a){var c=this;return null==a&&(a=g),b.get("Extensions").$register(a,c)},g&&"register"}(e.$singleton_class()),f.$activate=function(b){var c=this;return c.$raise(a.get("NotImplementedError"))},g&&"activate"}(o,null),function(f,j){function n(){}var o,p,q,r,s,t,u,v,w,x,y=n=k(f,j,"Registry",n),z=y.$$proto,A=y.$$scope;return z.groups=z.preprocessor_extensions=z.treeprocessor_extensions=z.postprocessor_extensions=z.include_processor_extensions=z.docinfo_processor_extensions=z.block_extensions=z.block_macro_extensions=z.inline_macro_extensions=g,y.$attr_reader("document"),y.$attr_reader("groups"),z.$initialize=function(a){var b=this;return null==a&&(a=l([],{})),b.groups=a,b.preprocessor_extensions=b.treeprocessor_extensions=b.postprocessor_extensions=b.include_processor_extensions=b.docinfo_processor_extensions=g,b.block_extensions=b.block_macro_extensions=b.inline_macro_extensions=g,b.document=g},z.$activate=function(c){var d,e,f,h=this;return h.document=c,(d=(e=b(A.get("Extensions").$groups().$values(),h.groups.$values())).$each,d.$$p=(f=function(b){var c,d,e=f.$$s||this,h=g;return null==b&&(b=g),function(){return h=b,a.get("Proc")["$==="](h)?function(){return h=b.$arity(),0["$==="](h)||(-1)["$==="](h)?(c=(d=e).$instance_exec,c.$$p=b.$to_proc(),c).call(d):1["$==="](h)?b.$call(e):g}():a.get("Class")["$==="](h)?b.$new().$activate(e):b.$activate(e)}()},f.$$s=h,f),d).call(e),h},z.$preprocessor=o=function(a){var b,c,d=this,e=o.$$p,f=e||g;return a=i.call(arguments,0),o.$$p=null,(b=(c=d).$add_document_processor,b.$$p=f.$to_proc(),b).call(c,"preprocessor",a)},z["$preprocessors?"]=function(){var a=this;return a.preprocessor_extensions["$!"]()["$!"]()},z.$preprocessors=function(){var a=this;return a.preprocessor_extensions},z.$treeprocessor=p=function(a){var b,c,d=this,e=p.$$p,f=e||g;return a=i.call(arguments,0),p.$$p=null,(b=(c=d).$add_document_processor,b.$$p=f.$to_proc(),b).call(c,"treeprocessor",a)},z["$treeprocessors?"]=function(){var a=this;return a.treeprocessor_extensions["$!"]()["$!"]()},z.$treeprocessors=function(){var a=this;return a.treeprocessor_extensions},z.$postprocessor=q=function(a){var b,c,d=this,e=q.$$p,f=e||g;return a=i.call(arguments,0),q.$$p=null,(b=(c=d).$add_document_processor,b.$$p=f.$to_proc(),b).call(c,"postprocessor",a)},z["$postprocessors?"]=function(){var a=this;return a.postprocessor_extensions["$!"]()["$!"]()},z.$postprocessors=function(){var a=this;return a.postprocessor_extensions},z.$include_processor=r=function(a){var b,c,d=this,e=r.$$p,f=e||g;return a=i.call(arguments,0),r.$$p=null,(b=(c=d).$add_document_processor,b.$$p=f.$to_proc(),b).call(c,"include_processor",a)},z["$include_processors?"]=function(){var a=this;return a.include_processor_extensions["$!"]()["$!"]()},z.$include_processors=function(){var a=this;return a.include_processor_extensions},z.$docinfo_processor=s=function(a){var b,c,d=this,e=s.$$p,f=e||g;return a=i.call(arguments,0),s.$$p=null,(b=(c=d).$add_document_processor,b.$$p=f.$to_proc(),b).call(c,"docinfo_processor",a)},z["$docinfo_processors?"]=function(a){var b,c,d,e=this;return null==a&&(a=g),(b=e.docinfo_processor_extensions)===g||b.$$is_boolean&&1!=b?!1:a!==!1&&a!==g?(b=(c=e.docinfo_processor_extensions).$find,b.$$p=(d=function(b){d.$$s||this;return null==b&&(b=g),b.$config()["$[]"]("location")["$=="](a)},d.$$s=e,d),b).call(c):!0},z.$docinfo_processors=function(a){var b,c,d,e=this;return null==a&&(a=g),(b=e.docinfo_processor_extensions)===g||b.$$is_boolean&&1!=b?g:a!==!1&&a!==g?(b=(c=e.docinfo_processor_extensions).$select,b.$$p=(d=function(b){d.$$s||this;return null==b&&(b=g),b.$config()["$[]"]("location")["$=="](a)},d.$$s=e,d),b).call(c):e.docinfo_processor_extensions},z.$block=t=function(a){var b,c,d=this,e=t.$$p,f=e||g;return a=i.call(arguments,0),t.$$p=null,(b=(c=d).$add_syntax_processor,b.$$p=f.$to_proc(),b).call(c,"block",a)},z["$blocks?"]=function(){var a=this;return a.block_extensions["$!"]()["$!"]()},z["$registered_for_block?"]=function(a,b){var c,d=this,e=g;return(c=e=d.block_extensions["$[]"](a.$to_sym()))===g||c.$$is_boolean&&1!=c?!1:(c=e.$config()["$[]"]("contexts")["$include?"](b))===g||c.$$is_boolean&&1!=c?!1:e},z.$find_block_extension=function(a){var b=this;return b.block_extensions["$[]"](a.$to_sym())},z.$block_macro=u=function(a){var b,c,d=this,e=u.$$p,f=e||g;return a=i.call(arguments,0),u.$$p=null,(b=(c=d).$add_syntax_processor,b.$$p=f.$to_proc(),b).call(c,"block_macro",a)},z["$block_macros?"]=function(){var a=this;return a.block_macro_extensions["$!"]()["$!"]()},z["$registered_for_block_macro?"]=function(a){var b,c=this,d=g;return(b=d=c.block_macro_extensions["$[]"](a.$to_sym()))===g||b.$$is_boolean&&1!=b?!1:d},z.$find_block_macro_extension=function(a){var b=this;return b.block_macro_extensions["$[]"](a.$to_sym())},z.$inline_macro=v=function(a){var b,c,d=this,e=v.$$p,f=e||g;return a=i.call(arguments,0),v.$$p=null,(b=(c=d).$add_syntax_processor,b.$$p=f.$to_proc(),b).call(c,"inline_macro",a)},z["$inline_macros?"]=function(){var a=this;return a.inline_macro_extensions["$!"]()["$!"]()},z["$registered_for_inline_macro?"]=function(a){var b,c=this,d=g;return(b=d=c.inline_macro_extensions["$[]"](a.$to_sym()))===g||b.$$is_boolean&&1!=b?!1:d},z.$find_inline_macro_extension=function(a){var b=this;return b.inline_macro_extensions["$[]"](a.$to_sym())},z.$inline_macros=function(){var a=this;return a.inline_macro_extensions.$values()},y.$private(),z.$add_document_processor=w=function(b,d){var e,f,h,i,j,k,l=this,n=w.$$p,o=n||g,p=g,q=g,r=g,s=g,t=g,u=g,v=g,x=g,y=g;return w.$$p=null,p=b.$to_s().$tr("_"," "),q=(e=(f=p.$split(" ")).$map,e.$$p=(h=function(a){h.$$s||this;return null==a&&(a=g),""+a.$chr().$upcase()+a["$[]"](m(1,-1,!1))},h.$$s=l,h),e).call(f).$join().$to_sym(),r=A.get("Extensions").$const_get(q),s=function(){return(e=null==a.Object.$$scope.AsciidoctorJ?g:"constant")===g||e.$$is_boolean&&1!=e?g:a.get("AsciidoctorJ").$$scope.get("Extensions").$const_get(q)}(),t=(e=l.$instance_variable_get(("@"+b+"_extensions").$to_sym()))!==!1&&e!==g?e:l.$instance_variable_set(("@"+b+"_extensions").$to_sym(),[]),u=function(){return o!==g?(v=l.$resolve_args(d,1),x=r.$new(v),(e=r.$constants().$grep("DSL"))===g||e.$$is_boolean&&1!=e||x.$extend(r.$const_get("DSL")),(e=(i=x).$instance_exec,e.$$p=o.$to_proc(),e).call(i),x.$freeze(),((e=x["$process_block_given?"]())===g||e.$$is_boolean&&1!=e)&&l.$raise(a.get("ArgumentError").$new("No block specified to process "+p+" extension at "+o.$source_location())),A.get("ProcessorExtension").$new(b,x)):(e=a.to_ary(l.$resolve_args(d,2)),x=null==e[0]?g:e[0],v=null==e[1]?g:e[1],(e=(j=x["$is_a?"](a.get("Class")))!==!1&&j!==g?j:(k=x["$is_a?"](a.get("String")),k!==!1&&k!==g?x=A.get("Extensions").$class_for_name(x):k))===g||e.$$is_boolean&&1!=e?(e=(j=x["$is_a?"](r))!==!1&&j!==g?j:(k=s!==!1&&s!==g)?x["$is_a?"](s):k)===g||e.$$is_boolean&&1!=e?l.$raise(a.get("ArgumentError").$new("Invalid arguments specified for registering "+p+" extension: "+d)):(x.$update_config(v),x.$freeze(),A.get("ProcessorExtension").$new(b,x)):(((e=(j=c(x,r))!==!1&&j!==g?j:(k=s!==!1&&s!==g)?c(x,s):k)===g||e.$$is_boolean&&1!=e)&&l.$raise(a.get("ArgumentError").$new("Invalid type for "+p+" extension: "+x)),y=x.$new(v),y.$freeze(),A.get("ProcessorExtension").$new(b,y)))}(),u.$config()["$[]"]("position")["$=="](">>")?t.$unshift(u):t["$<<"](u)},z.$add_syntax_processor=x=function(b,d){var e,f,i,j,k,n,o=this,p=x.$$p,q=p||g,r=g,s=g,t=g,u=g,v=g,w=g,y=g,z=g,B=g,C=g;if(x.$$p=null,r=b.$to_s().$tr("_"," "),s=(e=(f=r.$split(" ")).$map,e.$$p=(i=function(a){i.$$s||this;return null==a&&(a=g),""+a.$chr().$upcase()+a["$[]"](m(1,-1,!1))},i.$$s=o,i),e).call(f).$join(),t=(""+s+"Processor").$to_sym(),u=A.get("Extensions").$const_get(t),v=function(){return(e=null==a.Object.$$scope.AsciidoctorJ?g:"constant")===g||e.$$is_boolean&&1!=e?g:a.get("AsciidoctorJ").$$scope.get("Extensions").$const_get(t)}(),w=(e=o.$instance_variable_get(("@"+b+"_extensions").$to_sym()))!==!1&&e!==g?e:o.$instance_variable_set(("@"+b+"_extensions").$to_sym(),l([],{})),q!==g){if(e=a.to_ary(o.$resolve_args(d,2)),y=null==e[0]?g:e[0],z=null==e[1]?g:e[1],B=u.$new(o.$as_symbol(y),z),(e=u.$constants().$grep("DSL"))===g||e.$$is_boolean&&1!=e||B.$extend(u.$const_get("DSL")),q.$arity()["$=="](1)){if(a.yield1(q,B)===h)return h.$v}else(e=(j=B).$instance_exec,e.$$p=q.$to_proc(),e).call(j);return((e=y=o.$as_symbol(B.$name()))===g||e.$$is_boolean&&1!=e)&&o.$raise(a.get("ArgumentError").$new("No name specified for "+r+" extension at "+q.$source_location())),((e=B["$process_block_given?"]())===g||e.$$is_boolean&&1!=e)&&o.$raise(a.get("NoMethodError").$new("No block specified to process "+r+" extension at "+q.$source_location())),B.$freeze(),w["$[]="](y,A.get("ProcessorExtension").$new(b,B))}return e=a.to_ary(o.$resolve_args(d,3)),B=null==e[0]?g:e[0],y=null==e[1]?g:e[1],z=null==e[2]?g:e[2],(e=(k=B["$is_a?"](a.get("Class")))!==!1&&k!==g?k:(n=B["$is_a?"](a.get("String")),n!==!1&&n!==g?B=A.get("Extensions").$class_for_name(B):n))===g||e.$$is_boolean&&1!=e?(e=(k=B["$is_a?"](u))!==!1&&k!==g?k:(n=v!==!1&&v!==g)?B["$is_a?"](v):n)===g||e.$$is_boolean&&1!=e?o.$raise(a.get("ArgumentError").$new("Invalid arguments specified for registering "+r+" extension: "+d)):(B.$update_config(z),((e=y=function(){return y!==!1&&y!==g?(k=[o.$as_symbol(y)],n=B,n["$name="].apply(n,k),k[k.length-1]):o.$as_symbol(B.$name())}())===g||e.$$is_boolean&&1!=e)&&o.$raise(a.get("ArgumentError").$new("No name specified for "+r+" extension: "+B)),B.$freeze(),w["$[]="](y,A.get("ProcessorExtension").$new(b,B))):(((e=(k=c(B,u))!==!1&&k!==g?k:(n=v!==!1&&v!==g)?c(B,v):n)===g||e.$$is_boolean&&1!=e)&&o.$raise(a.get("ArgumentError").$new("Class specified for "+r+" extension does not inherit from "+u+": "+B)),C=B.$new(o.$as_symbol(y),z),((e=y=o.$as_symbol(C.$name()))===g||e.$$is_boolean&&1!=e)&&o.$raise(a.get("ArgumentError").$new("No name specified for "+r+" extension: "+B)),B.$freeze(),w["$[]="](y,A.get("ProcessorExtension").$new(b,C)))},z.$resolve_args=function(b,f){var h,i=g,j=g,k=g;return i=function(){return(h=b["$[]"](-1)["$is_a?"](a.get("Hash")))===g||h.$$is_boolean&&1!=h?l([],{}):b.$pop()}(),f["$=="](1)?i:(j=b.$size(),d(k=e(e(f,1),j),0)?b.$fill(g,j,k):c(k,0)&&b.$pop(k["$-@"]()),b["$<<"](i),b)},z.$as_symbol=function(b){var c;return b!==!1&&b!==g?function(){return(c=b["$is_a?"](a.get("Symbol")))===g||c.$$is_boolean&&1!=c?b.$to_sym():b}():g},g&&"as_symbol"}(o,null),function(c){var d,e,f=c.$$scope;c.$$proto;return c.$$proto.$generate_name=function(){var a=this;return"extgrp"+a.$next_auto_id()},c.$$proto.$next_auto_id=function(){var a,c=this;return null==c.auto_id&&(c.auto_id=g),(a=c.auto_id)!==!1&&a!==g?a:c.auto_id=-1,c.auto_id=b(c.auto_id,1)},c.$$proto.$groups=function(){var a,b=this;return null==b.groups&&(b.groups=g),(a=b.groups)!==!1&&a!==g?a:b.groups=l([],{})},c.$$proto.$build_registry=d=function(a){var b,c=this,e=d.$$p,h=e||g;return null==a&&(a=g),d.$$p=null,h!==g?((b=a)!==!1&&b!==g?b:a=c.$generate_name(),f.get("Registry").$new(n(a,h))):f.get("Registry").$new()},c.$$proto.$register=e=function(b){var c,d=this,f=e.$$p,h=f||g,j=g,k=g,l=g,m=g,n=g;return b=i.call(arguments,0),e.$$p=null,j=b.$length(),k=function(){return h!==g?h:(c=(l=b.$pop())["$!"]())===g||c.$$is_boolean&&1!=c?function(){return m=l,a.get("Class")["$==="](m)?l:a.get("String")["$==="](m)?d.$class_for_name(l):a.get("Symbol")["$==="](m)?d.$class_for_name(l.$to_s()):l}():d.$raise(a.get("ArgumentError").$new("Extension group to register not specified"))}(),n=(c=b.$pop())!==!1&&c!==g?c:d.$generate_name(),((c=b["$empty?"]())===g||c.$$is_boolean&&1!=c)&&d.$raise(a.get("ArgumentError").$new("Wrong number of arguments ("+j+" for 1..2)")),d.$groups()["$[]="](n,k)},c.$$proto.$unregister_all=function(){var a=this;return a.groups=l([],{})},c.$$proto.$resolve_class=function(b){var c,d=this;return(c=b["$is_a?"](a.get("Class")))===g||c.$$is_boolean&&1!=c?d.$class_for_name(b.$to_s()):b},c.$$proto.$class_for_name=function(b){var c,d,e,f=this,h=g;return h=a.get("Object"),(c=(d=b.$split("::")).$each,c.$$p=(e=function(a){var c,d=e.$$s||this;return null==a&&(a=g),(c=a["$empty?"]())===g||c.$$is_boolean&&1!=c?(c=h["$const_defined?"](a))===g||c.$$is_boolean&&1!=c?d.$raise("Could not resolve class for name: "+b):h=h.$const_get(a):g},e.$$s=f,e),c).call(d),h},g&&"class_for_name"}(o.$singleton_class())}(o)}(f)},("undefined"==typeof AsciidoctorConfiguration||"undefined"==typeof AsciidoctorConfiguration.autoRequireModule||Boolean(AsciidoctorConfiguration.autoRequireModule))&&b.require("asciidoctor/extensions")};