!function(a){a.fn.highchartTable=function(){var i=["column","line","area","spline","pie"],r=function(e,t){var i=a(e).data(t);if("undefined"!=typeof i){for(var r=i.split("."),n=window[r[0]],d=1,l=r.length;d<l;d++)n=n[r[d]];return n}};return this.each(function(){var n,d=a(this),l=a(d),p=1,o=a("caption",d),s=o.length?a(o[0]).text():"";if(1!=l.data("graph-container-before")){var h=l.data("graph-container");if(!h)throw"graph-container data attribute is mandatory";if("#"===h[0]||h.indexOf("..")===-1)n=a(h);else{for(var g=d,f=h;f.indexOf("..")!==-1;)f=f.replace(/^.. /,""),g=g.parent();n=a(f,g)}if(1!==n.length)throw"graph-container is not available in this DOM or available multiple times";n=n[0]}else l.before("<div></div>"),n=l.prev(),n=n[0];var u=l.data("graph-type");if(!u)throw"graph-type data attribute is mandatory";if(a.inArray(u,i)==-1)throw"graph-container data attribute must be one of "+i.join(", ");var x=l.data("graph-stacking");x||(x="normal");var c=l.data("graph-datalabels-enabled"),y=1==l.data("graph-inverted"),b=a("thead th",d),m=[],v=[],k=0,w=!1;b.each(function(e,t){var r=a(t),n=r.data("graph-value-scale"),d=r.data("graph-type");a.inArray(d,i)==-1&&(d=u);var o=r.data("graph-stack-group");o&&(w=!0);var s=r.data("graph-datalabels-enabled");"undefined"==typeof s&&(s=c);var h=r.data("graph-yaxis");"undefined"!=typeof h&&"1"==h&&(p=2);var g=1==r.data("graph-skip");g&&(k+=1);var f={libelle:r.text(),skip:g,indexTd:e-k-1,color:r.data("graph-color"),visible:!r.data("graph-hidden"),yAxis:"undefined"!=typeof h?h:0,dashStyle:r.data("graph-dash-style")||"solid",dataLabelsEnabled:1==s,dataLabelsColor:r.data("graph-datalabels-color")||l.data("graph-datalabels-color")},x=r.data("graph-vline-x");"undefined"==typeof x?(f.scale="undefined"!=typeof n?parseFloat(n):1,f.graphType="column"==d&&y?"bar":d,f.stack=o,f.unit=r.data("graph-unit"),m[e]=f):(f.x=x,f.height=r.data("graph-vline-height"),f.name=r.data("graph-vline-name"),v[e]=f)});var T=[];a(m).each(function(a,e){if(0!=a&&!e.skip){var t={name:e.libelle+(e.unit?" ("+e.unit+")":""),data:[],type:e.graphType,stack:e.stack,color:e.color,visible:e.visible,yAxis:e.yAxis,dashStyle:e.dashStyle,marker:{enabled:!1},dataLabels:{enabled:e.dataLabelsEnabled,color:e.dataLabelsColor,align:l.data("graph-datalabels-align")||("column"==u&&1==y?void 0:"center")}};if(e.dataLabelsEnabled){var i=r(d,"graph-datalabels-formatter");i&&(t.dataLabels.formatter=function(){return i(this.y)})}T.push(t)}}),a(v).each(function(a,e){"undefined"==typeof e||e.skip||T.push({name:e.libelle,data:[{x:e.x,y:0,name:e.name},{x:e.x,y:e.height,name:e.name}],type:"spline",color:e.color,visible:e.visible,marker:{enabled:!1}})});var L=[],A=r(d,"graph-point-callback"),O="datetime"==l.data("graph-xaxis-type"),I=a("tbody:first tr",d);I.each(function(e,i){if(!a(i).data("graph-skip")){var r=a("td",i);r.each(function(e,r){var n,d=m[e];if(!d.skip){var l=a(r);if(0==e)n=l.text(),L.push(n);else{var p=l.text(),o=T[d.indexTd];if(0==p.length)O||o.data.push(null);else{var s=p.replace(/\s/g,"").replace(/,/,".");n=Math.round(parseFloat(s)*d.scale*100)/100;var h=l.data("graph-x");if(O){h=a("td",a(i)).first().text();var g=t(h);h=g.getTime()-60*g.getTimezoneOffset()*1e3}var f=l.data("graph-name"),u={name:"undefined"!=typeof f?f:p,y:n,x:h};A&&(u.events={click:function(){return A(this)}}),"pie"===d.graphType&&l.data("graph-item-highlight")&&(u.sliced=1);var x=l.data("graph-item-color");"undefined"!=typeof x&&(u.color=x),o.data.push(u)}}}})}});var C,D=[];for(C=1;C<=p;C++){var z={title:{text:"undefined"!=typeof l.data("graph-yaxis-"+C+"-title-text")?l.data("graph-yaxis-"+C+"-title-text"):null},max:"undefined"!=typeof l.data("graph-yaxis-"+C+"-max")?l.data("graph-yaxis-"+C+"-max"):null,min:"undefined"!=typeof l.data("graph-yaxis-"+C+"-min")?l.data("graph-yaxis-"+C+"-min"):null,reversed:"1"==l.data("graph-yaxis-"+C+"-reversed"),opposite:"1"==l.data("graph-yaxis-"+C+"-opposite"),tickInterval:l.data("graph-yaxis-"+C+"-tick-interval")||null,labels:{rotation:l.data("graph-yaxis-"+C+"-rotation")||0},startOnTick:"0"!==l.data("graph-yaxis-"+C+"-start-on-tick"),endOnTick:"0"!==l.data("graph-yaxis-"+C+"-end-on-tick"),stackLabels:{enabled:"1"==l.data("graph-yaxis-"+C+"-stacklabels-enabled")},gridLineInterpolation:l.data("graph-yaxis-"+C+"-grid-line-interpolation")||null},S=r(d,"graph-yaxis-"+C+"-formatter-callback");S&&(z.labels.formatter=function(){return S(this.value)}),D.push(z)}for(var B=["#4572A7","#AA4643","#89A54E","#80699B","#3D96AE","#DB843D","#92A8CD","#A47D7C","#B5CA92"],E=[],H="undefined"!=typeof Highcharts.theme&&"undefined"!=typeof Highcharts.theme.colors?Highcharts.theme.colors:[],W=l.data("graph-line-shadow"),F=l.data("graph-line-width")||2,P=0;P<9;P++){var j="graph-color-"+(P+1);E.push("undefined"!=typeof l.data(j)?l.data(j):"undefined"!=typeof H[P]?H[P]:B[P])}var G=l.data("graph-margin-top"),M=l.data("graph-margin-right"),R=l.data("graph-margin-bottom"),Q=l.data("graph-margin-left"),_=l.data("graph-xaxis-labels-enabled"),q={},J=l.data("graph-xaxis-labels-font-size");"undefined"!=typeof J&&(q.fontSize=J);var K={colors:E,chart:{renderTo:n,inverted:y,marginTop:"undefined"!=typeof G?G:null,marginRight:"undefined"!=typeof M?M:null,marginBottom:"undefined"!=typeof R?R:null,marginLeft:"undefined"!=typeof Q?Q:null,spacingTop:l.data("graph-spacing-top")||10,height:l.data("graph-height")||null,zoomType:l.data("graph-zoom-type")||null,polar:l.data("graph-polar")||null},title:{text:s},subtitle:{text:l.data("graph-subtitle-text")||""},legend:{enabled:"1"!=l.data("graph-legend-disabled"),layout:l.data("graph-legend-layout")||"horizontal",symbolWidth:l.data("graph-legend-width")||30,x:l.data("graph-legend-x")||15,y:l.data("graph-legend-y")||0},xAxis:{categories:"datetime"!=l.data("graph-xaxis-type")?L:void 0,type:"datetime"==l.data("graph-xaxis-type")?"datetime":void 0,reversed:"1"==l.data("graph-xaxis-reversed"),opposite:"1"==l.data("graph-xaxis-opposite"),showLastLabel:"undefined"==typeof l.data("graph-xaxis-show-last-label")||l.data("graph-xaxis-show-last-label"),tickInterval:l.data("graph-xaxis-tick-interval")||null,dateTimeLabelFormats:{second:"%e. %b",minute:"%e. %b",hour:"%e. %b",day:"%e. %b",week:"%e. %b",month:"%e. %b",year:"%e. %b"},labels:{rotation:l.data("graph-xaxis-rotation")||0,align:l.data("graph-xaxis-align")||"center",enabled:"undefined"==typeof _||_,style:q},startOnTick:l.data("graph-xaxis-start-on-tick"),endOnTick:l.data("graph-xaxis-end-on-tick"),min:e(d,"min"),max:e(d,"max"),alternateGridColor:l.data("graph-xaxis-alternateGridColor")||null,title:{text:l.data("graph-xaxis-title-text")||null},gridLineWidth:l.data("graph-xaxis-gridLine-width")||0,gridLineDashStyle:l.data("graph-xaxis-gridLine-style")||"ShortDot",tickmarkPlacement:l.data("graph-xaxis-tickmark-placement")||"between",lineWidth:l.data("graph-xaxis-line-width")||0},yAxis:D,tooltip:{formatter:function(){if("datetime"==l.data("graph-xaxis-type"))return"<b>"+this.series.name+"</b><br/>"+Highcharts.dateFormat("%e. %b",this.x)+" : "+this.y;var a="undefined"!=typeof L[this.point.x]?L[this.point.x]:this.point.x;return"pie"===u?"<strong>"+this.series.name+"</strong><br />"+a+" : "+this.point.y:"<strong>"+this.series.name+"</strong><br />"+a+" : "+this.point.name}},credits:{enabled:!1},plotOptions:{line:{dataLabels:{enabled:!0},lineWidth:F},area:{lineWidth:F,shadow:"undefined"==typeof W||W,fillOpacity:l.data("graph-area-fillOpacity")||.75},pie:{allowPointSelect:!0,dataLabels:{enabled:!0},showInLegend:"1"==l.data("graph-pie-show-in-legend"),size:"80%"},series:{animation:!1,stickyTracking:!1,stacking:w?x:null,groupPadding:l.data("graph-group-padding")||0}},series:T,exporting:{filename:s.replace(/ /g,"_"),buttons:{exportButton:{menuItems:null,onclick:function(){this.exportChart()}}}}};l.trigger("highchartTable.beforeRender",K),new Highcharts.Chart(K)}),this};var e=function(e,i){var r=a(e).data("graph-xaxis-"+i);if("undefined"!=typeof r){if("datetime"==a(e).data("graph-xaxis-type")){var n=t(r);return n.getTime()-60*n.getTimezoneOffset()*1e3}return r}return null},t=function(a){var e=a.split(" "),t=e[0].split("-"),i=null,r=null;if(e[1]){var n=e[1].split(":");i=parseInt(n[0],10),r=parseInt(n[1],10)}return new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10),i,r)}}(jQuery);
//# sourceMappingURL=jquery.highchartTable.min.js.map