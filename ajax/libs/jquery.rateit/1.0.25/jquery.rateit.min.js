/*! RateIt | v1.0.25 / 10/20/2016
    https://github.com/gjunge/rateit.js | Twitter: @gjunge
*/
!function(e){function t(e){var t=e.originalEvent.changedTouches,a=t[0],i="";switch(e.type){case"touchmove":i="mousemove";break;case"touchend":i="mouseup";break;default:return}var r=document.createEvent("MouseEvent");r.initMouseEvent(i,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(r),e.preventDefault()}e.rateit={aria:{resetLabel:"reset rating",ratingLabel:"rating"}},e.fn.rateit=function(a,i){var r=1,n={},s="init",d=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};if(0===this.length)return this;var l=e.type(a);if("object"==l||void 0===a||null===a)n=e.extend({},e.fn.rateit.defaults,a);else{if("string"==l&&"reset"!==a&&void 0===i)return this.data("rateit"+d(a));"string"==l&&(s="setvalue")}return this.each(function(){var l=e(this),o=function(e,t){if(null!=t){var a="aria-value"+("value"==e?"now":e),i=l.find(".rateit-range");void 0!=i.attr(a)&&i.attr(a,t)}return arguments[0]="rateit"+d(e),l.data.apply(l,arguments)};if("reset"==a){var u=o("init");for(var h in u)l.data(h,u[h]);if(o("backingfld")){var v=e(o("backingfld"));"SELECT"==v[0].nodeName&&"index"===v[0].getAttribute("data-rateit-valuesrc")?v.prop("selectedIndex",o("value")):v.val(o("value")),v.trigger("change"),v[0].min&&(v[0].min=o("min")),v[0].max&&(v[0].max=o("max")),v[0].step&&(v[0].step=o("step"))}l.trigger("reset")}l.hasClass("rateit")||l.addClass("rateit");var m="rtl"!=l.css("direction");if("setvalue"==s){if(!o("init"))throw"Can't set value before init";if("readonly"!=a||1!=i||o("readonly")||(l.find(".rateit-range").unbind(),o("wired",!1)),"value"==a&&(i=null==i?o("min"):Math.max(o("min"),Math.min(o("max"),i))),o("backingfld")){var v=e(o("backingfld"));"SELECT"==v[0].nodeName&&"index"===v[0].getAttribute("data-rateit-valuesrc")?"value"==a&&v.prop("selectedIndex",i):"value"==a&&v.val(i),"min"==a&&v[0].min&&(v[0].min=i),"max"==a&&v[0].max&&(v[0].max=i),"step"==a&&v[0].step&&(v[0].step=i)}o(a,i)}if(!o("init")){if(o("min",isNaN(o("min"))?n.min:o("min")),o("max",isNaN(o("max"))?n.max:o("max")),o("step",o("step")||n.step),o("readonly",void 0!==o("readonly")?o("readonly"):n.readonly),o("resetable",void 0!==o("resetable")?o("resetable"):n.resetable),o("backingfld",o("backingfld")||n.backingfld),o("starwidth",o("starwidth")||n.starwidth),o("starheight",o("starheight")||n.starheight),o("value",Math.max(o("min"),Math.min(o("max"),isNaN(o("value"))?isNaN(n.value)?n.min:n.value:o("value")))),o("ispreset",void 0!==o("ispreset")?o("ispreset"):n.ispreset),o("backingfld")){var v=e(o("backingfld")).hide();if((v.attr("disabled")||v.attr("readonly"))&&o("readonly",!0),"INPUT"==v[0].nodeName&&("range"!=v[0].type&&"text"!=v[0].type||(o("min",parseInt(v.attr("min"))||o("min")),o("max",parseInt(v.attr("max"))||o("max")),o("step",parseInt(v.attr("step"))||o("step")))),"SELECT"==v[0].nodeName&&v[0].options.length>1){"index"===v[0].getAttribute("data-rateit-valuesrc")?(o("min",isNaN(o("min"))?Number(v[0].options[0].index):o("min")),o("max",Number(v[0].options[v[0].length-1].index)),o("step",Number(v[0].options[1].index)-Number(v[0].options[0].index))):(o("min",isNaN(o("min"))?Number(v[0].options[0].value):o("min")),o("max",Number(v[0].options[v[0].length-1].value)),o("step",Number(v[0].options[1].value)-Number(v[0].options[0].value)));var c=v.find("option[selected]");1==c.length&&("index"===v[0].getAttribute("data-rateit-valuesrc")?o("value",c[0].index):o("value",c.val()))}else o("value",v.val())}var g="DIV"==l[0].nodeName?"div":"span";r++;var f='<button id="rateit-reset-{{index}}" type="button" data-role="none" class="rateit-reset" aria-label="'+e.rateit.aria.resetLabel+'" aria-controls="rateit-range-{{index}}"></button><{{element}} id="rateit-range-{{index}}" class="rateit-range" tabindex="0" role="slider" aria-label="'+e.rateit.aria.ratingLabel+'" aria-owns="rateit-reset-{{index}}" aria-valuemin="'+o("min")+'" aria-valuemax="'+o("max")+'" aria-valuenow="'+o("value")+'"><{{element}} class="rateit-selected" style="height:'+o("starheight")+'px"></{{element}}><{{element}} class="rateit-hover" style="height:'+o("starheight")+'px"></{{element}}></{{element}}>';l.append(f.replace(/{{index}}/gi,r).replace(/{{element}}/gi,g)),m||(l.find(".rateit-reset").css("float","right"),l.find(".rateit-selected").addClass("rateit-selected-rtl"),l.find(".rateit-hover").addClass("rateit-hover-rtl")),o("init",JSON.parse(JSON.stringify(l.data())))}l.find(".rateit-selected, .rateit-hover").height(o("starheight"));var p=l.find(".rateit-range");p.width(o("starwidth")*(o("max")-o("min"))).height(o("starheight"));var b="rateit-preset"+(m?"":"-rtl");if(o("ispreset")?l.find(".rateit-selected").addClass(b):l.find(".rateit-selected").removeClass(b),null!=o("value")){var x=(o("value")-o("min"))*o("starwidth");l.find(".rateit-selected").width(x)}var w=l.find(".rateit-reset");w.data("wired")!==!0&&w.bind("click",function(t){t.preventDefault(),w.blur();var a=e.Event("beforereset");return l.trigger(a),!a.isDefaultPrevented()&&(l.rateit("value",null),void l.trigger("reset"))}).data("wired",!0);var N=function(t,a){var i=a.changedTouches?a.changedTouches[0].pageX:a.pageX,r=i-e(t).offset().left;return m||(r=p.width()-r),r>p.width()&&(r=p.width()),r<0&&(r=0),x=Math.ceil(r/o("starwidth")*(1/o("step")))},y=function(e){var t=e*o("starwidth")*o("step"),a=p.find(".rateit-hover");if(a.data("width")!=t){p.find(".rateit-selected").hide(),a.width(t).show().data("width",t);var i=[e*o("step")+o("min")];l.trigger("hover",i).trigger("over",i)}},k=function(t){var a=e.Event("beforerated");return l.trigger(a,[t]),!a.isDefaultPrevented()&&(o("value",t),o("backingfld")&&("SELECT"==v[0].nodeName&&"index"===v[0].getAttribute("data-rateit-valuesrc")?e(o("backingfld")).prop("selectedIndex",t).trigger("change"):e(o("backingfld")).val(t).trigger("change")),o("ispreset")&&(p.find(".rateit-selected").removeClass(b),o("ispreset",!1)),p.find(".rateit-hover").hide(),p.find(".rateit-selected").width(t*o("starwidth")-o("min")*o("starwidth")).show(),l.trigger("hover",[null]).trigger("over",[null]).trigger("rated",[t]),!0)};o("readonly")?w.hide():(o("resetable")||w.hide(),o("wired")||(p.bind("touchmove touchend",t),p.mousemove(function(e){var t=N(this,e);y(t)}),p.mouseleave(function(e){p.find(".rateit-hover").hide().width(0).data("width",""),l.trigger("hover",[null]).trigger("over",[null]),p.find(".rateit-selected").show()}),p.mouseup(function(e){var t=N(this,e),a=t*o("step")+o("min");k(a),p.blur()}),p.keyup(function(e){38!=e.which&&e.which!=(m?39:37)||k(Math.min(o("value")+o("step"),o("max"))),40!=e.which&&e.which!=(m?37:39)||k(Math.max(o("value")-o("step"),o("min")))}),o("wired",!0)),o("resetable")&&w.show()),p.attr("aria-readonly",o("readonly"))})},e.fn.rateit.defaults={min:0,max:5,step:.5,starwidth:16,starheight:16,readonly:!1,resetable:!0,ispreset:!1},e(function(){e("div.rateit, span.rateit").rateit()})}(jQuery);
//# sourceMappingURL=jquery.rateit.min.js.map
