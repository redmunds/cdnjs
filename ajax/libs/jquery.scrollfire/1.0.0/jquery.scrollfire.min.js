/**
 * jQuery.scrollfire()
 *
 * (a) Wil Neeley, Trestle Media, LLC.
 * Code may be freely distributed under the MIT license.
 */
(function(d,f,h,b){var i="scrollfire",g=null,c={onTopIn:function(){},onTopOut:function(){},onBottomIn:function(){},onBottomOut:function(){},offset:0,topInOffset:0,topOutOffset:0,bottomInOffset:0,bottomOutOffset:0},e={registry:{},guid:0,last_scroll_pos:0,scroll_handler:null};function j(l,k){this.element=l;this.options=d.extend({},c,k);this._defaults=c;this._name=i;this.init()}j.prototype.init=function(){var m=this;var k={_guid:e.guid,_element:m.element,_on_top_in:m.options.onTopIn,_on_top_in_once:true,_on_top_out:m.options.onTopOut,_on_top_out_once:true,_on_bottom_in:m.options.onBottomIn,_on_bottom_in_once:true,_on_bottom_out:m.options.onBottomOut,_on_bottom_out_once:true,_offset:m.options.offset,_top_in_offset:m.options.topInOffset,_top_out_offset:m.options.topOutOffset,_bottom_in_offset:m.options.bottomInOffset,_bottom_out_offset:m.options.bottomOutOffset};var n=function(p){var o=d(f).scrollTop();if(o>e.last_scroll_pos){d.each(e.registry,function(q,r){var s=d(r._element).offset().top;if(o>=(s+(r._top_out_offset?r._top_out_offset:r._offset))&&r._on_top_out_once){r._on_top_in_once=true;r._on_top_out_once=false;r._on_top_out(r._element)}if((o+d(f).height())>=(s+(r._bottom_in_offset?r._bottom_in_offset:r._offset))&&r._on_bottom_in_once){r._on_bottom_out_once=true;r._on_bottom_in_once=false;r._on_bottom_in(r._element)}})}else{d.each(e.registry,function(q,r){var s=d(r._element).offset().top+d(r._element).outerHeight();if(o<=(s+(r._top_in_offset?r._top_in_offset:r._offset))&&r._on_top_in_once){r._on_top_out_once=true;r._on_top_in_once=false;r._on_top_in(r._element)}if((o+d(f).outerHeight())<=(s+(r._bottom_out_offset?r._bottom_out_offset:r._offset))&&r._on_bottom_out_once){r._on_bottom_in_once=true;r._on_bottom_out_once=false;r._on_bottom_out(r._element)}})}e.last_scroll_pos=o};k._scroll_handler=n;e.registry[e.guid]=k;if(!d.data(m.element,"uids")){d.data(m.element,"uids",[e.guid])}else{var l=d.data(m.element,"uids");l.push(e.guid);d.data(m.element,"uids",l)}e.guid++;if(!e.scroll_handler){e.scroll_handler=n;d(f).bind("scroll",n)}};var a={remove:function(k){k.each(function(l,n){var m=d(n).data("uids");if(m){delete e.registry[m]}});return g}};d.fn[i]=function(l){g=this;if(typeof l=="string"){var m=l;var k=d(arguments).toArray();k.shift();k.unshift(this);return a[m].apply(this,k)}else{return this.each(function(){d.data(this,"plugin_"+i,new j(this,l))})}}})(jQuery,window,document);