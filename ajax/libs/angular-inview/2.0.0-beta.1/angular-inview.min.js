!function(){"use strict";function t(t){return{restrict:"A",require:"?^^inViewContainer",link:function(e,u,c,s){var l={};c.inViewOptions&&(l=e.$eval(c.inViewOptions)),l.offset&&(l.offset=o(l.offset)),l.viewportOffset&&(l.viewportOffset=o(l.viewportOffset));var p=f({type:"initial"}).merge(a(window,"scroll resize"));s&&(p=p.merge(s.eventsSignal)),l.throttle&&(p=p.throttle(l.throttle));var h=p.map(function(t){var e;e=s?s.getViewportRect():n(),e=r(e,l.viewportOffset);var o=r(u[0].getBoundingClientRect(),l.offset),c={inView:i(o,e),event:t,element:u,elementRect:o,viewportRect:e};return l.generateParts&&c.inView&&(c.parts={},c.parts.top=o.top>=e.top,c.parts.left=o.left>=e.left,c.parts.bottom=o.bottom<=e.bottom,c.parts.right=o.right<=e.right),c}).scan({},function(t,e){return l.generateDirection&&e.inView&&t.elementRect&&(e.direction={horizontal:e.elementRect.left-t.elementRect.left,vertical:e.elementRect.top-t.elementRect.top}),e.changed=e.inView!==t.inView||!angular.equals(e.parts,t.parts)||!angular.equals(e.direction,t.direction),e}).filter(function(t){return t.changed?!("initial"===t.event.type&&!t.inView):!1}),g=t(c.inView),d=h.subscribe(function(t){e.$applyAsync(function(){g(e,{$inview:t.inView,$inviewInfo:t})})});e.$on("$destroy",d)}}}function e(){return{restrict:"A",controller:["$element",function(t){this.element=t,this.eventsSignal=a(t,"scroll"),this.getViewportRect=function(){return t[0].getBoundingClientRect()}}]}}function n(){var t={top:0,left:0,width:window.innerWidth,right:window.innerWidth,height:window.innerHeight,bottom:window.innerHeight};if(t.height)return t;var e=document.compatMode;return"CSS1Compat"===e?(t.width=t.right=document.documentElement.clientWidth,t.height=t.bottom=document.documentElement.clientHeight):(t.width=t.right=document.body.clientWidth,t.height=t.bottom=document.body.clientHeight),t}function i(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}function o(t){if(!angular.isArray(t))throw new Error("angular-inview: Offset should be an array");return 2==t.length?t.concat(t):3==t.length?t.concat([t[1]]):t}function r(t,e){if(!e)return t;var n={top:u(e[0])?parseFloat(e[0])*t.height:e[0],right:u(e[1])?parseFloat(e[1])*t.width:e[1],bottom:u(e[2])?parseFloat(e[2])*t.height:e[2],left:u(e[3])?parseFloat(e[3])*t.width:e[3]};return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right,height:t.height+n.top+n.bottom,width:t.width+n.left+n.right}}function u(t){return angular.isString(t)&&t.indexOf("%")>0}function c(t){this.didSubscribeFunc=t}function s(){var t=arguments;return new c(function(e){for(var n=[],i=t.length-1;i>=0;i--)n.push(t[i].subscribe(function(){e.apply(null,arguments)}));e.$dispose=function(){for(var t=n.length-1;t>=0;t--)n[t]&&n[t]()}})}function a(t,e){return new c(function(n){var i=function(t){n(t)},o=angular.element(t);o.on(e,i),n.$dispose=function(){o.off(e,i)}})}function f(t){return new c(function(e){e(t)})}angular.module("angular-inview",[]).directive("inView",["$parse",t]).directive("inViewContainer",e),c.prototype.subscribe=function(t){this.didSubscribeFunc(t);var e=function(){t.$dispose&&(t.$dispose(),t.$dispose=null)};return e},c.prototype.map=function(t){var e=this;return new c(function(n){n.$dispose=e.subscribe(function(e){n(t(e))})})},c.prototype.filter=function(t){var e=this;return new c(function(n){n.$dispose=e.subscribe(function(e){t(e)&&n(e)})})},c.prototype.scan=function(t,e){var n=this;return new c(function(i){var o=t;i.$dispose=n.subscribe(function(t){o=e(o,t),i(o)})})},c.prototype.merge=function(t){return s(this,t)},c.prototype.throttle=function(t){var e,n,i=this;return new c(function(o){var r=i.subscribe(function(){var i=+new Date,r=arguments;e&&e+t>i?(clearTimeout(n),n=setTimeout(function(){e=i,o.apply(null,r)},t)):(e=i,o.apply(null,r))});o.$dispose=function(){clearTimeout(n),r&&r()}})}}();