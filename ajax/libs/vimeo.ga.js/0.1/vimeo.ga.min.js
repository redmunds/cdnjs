/*!
 * vimeo.ga.min.js | v0.1
 * Copyright (c) 2012 Sander Heilbron (http://sanderheilbron.nl)
 * MIT licensed
 */

$(function(){function e(a){var c=JSON.parse(a.data);switch(c.event){case"ready":g();break;case"playProgress":h(c.data);break;case"seek":if(d&&!videoSeeking){_gaq.push(["_trackEvent","Vimeo","Skipped video forward or backward",b,undefined,true]);videoSeeking=true}break;case"play":if(!videoPlayed){_gaq.push(["_trackEvent","Vimeo","Started video",b,undefined,true]);videoPaused=false;videoPlayed=true}break;case"pause":if(timePercentComplete<100&&!videoPaused){_gaq.push(["_trackEvent","Vimeo","Paused video",b,undefined,true]);videoPaused=true}break;case"finish":if(!videoCompleted){_gaq.push(["_trackEvent","Vimeo","Completed video",b,undefined,true]);videoCompleted=true}break}}function f(c,d){var e={method:c};if(d){e.value=d}a[0].contentWindow.postMessage(JSON.stringify(e),b)}function g(){f("addEventListener","play");f("addEventListener","seek");f("addEventListener","pause");f("addEventListener","finish");f("addEventListener","playProgress");progress25=progress50=progress75=false;videoPlayed=false;videoSeeking=false;videoCompleted=false}function h(a){timePercentComplete=a.percent*100;timePercentComplete=Math.round(timePercentComplete);var d;if(timePercentComplete>24&&!progress25){progress="Played video: 25%";progress25=true;d=true}if(timePercentComplete>49&&!progress50){progress="Played video: 50%";progress50=true;d=true}if(timePercentComplete>74&&!progress75){progress="Played video: 75%";progress75=true;d=true}if(d&&c){_gaq.push(["_trackEvent","Vimeo",progress,b,undefined,true])}}var a=$("iframe"),b=a.attr("src").split("?")[0],c=a.data("progress"),d=a.data("seek");if(window.addEventListener){window.addEventListener("message",e,false)}else{window.attachEvent("onmessage",e,false)}})