!function(){"use strict";angular.module("mdDataTable",["mdtTemplates","ngMaterial","ngMdIcons","ngSanitize"])}(),function(){"use strict";function t(t){return{restrict:"E",templateUrl:"/main/templates/mdtAlternateHeaders.html",transclude:!0,replace:!0,scope:!0,require:"^mdtTable",link:function(e,a,o,n){function r(){var t=n.tableDataStorageService.deleteSelectedRows();e.deleteRowCallback({rows:t})}e.deleteSelectedRows=r,e.getNumberOfSelectedRows=t.bind(n.tableDataStorageService.getNumberOfSelectedRows,n.tableDataStorageService)}}}t.$inject=["_"],angular.module("mdDataTable").directive("mdtAlternateHeaders",t)}(),function(){"use strict";function t(t,e,a,o,n){return{restrict:"E",templateUrl:"/main/templates/mdtTable.html",transclude:!0,scope:{tableCard:"=",selectableRows:"=",alternateHeaders:"=",sortableColumns:"=",deleteRowCallback:"&",selectedRowCallback:"&",saveRowCallback:"&",animateSortIcon:"=",rippleEffect:"=",paginatedRows:"=",mdtRow:"=",mdtRowPaginator:"&?",mdtRowPaginatorErrorMessage:"@",mdtRowPaginatorNoResultsMessage:"@",virtualRepeat:"=",mdtTriggerRequest:"&?",mdtTranslations:"=?"},controller:["$scope","$element",function(o,n){function r(){l.tableDataStorageService=t.getInstance(l.virtualRepeat),o.mdtRowPaginator?o.mdtPaginationHelper=a.getInstance({tableDataStorageService:l.tableDataStorageService,paginationSetting:o.paginatedRows,mdtRowOptions:o.mdtRow,mdtRowPaginatorFunction:o.mdtRowPaginator,mdtRowPaginatorErrorMessage:o.mdtRowPaginatorErrorMessage,mdtRowPaginatorNoResultsMessage:o.mdtRowPaginatorNoResultsMessage,mdtTriggerRequest:o.mdtTriggerRequest}):o.mdtPaginationHelper=e.getInstance(l.tableDataStorageService,o.paginatedRows,o.mdtRow)}function i(t){l.tableDataStorageService.addHeaderCellData(t)}function s(){o.mdtTranslations=o.mdtTranslations||{},o.mdtTranslations.rowsPerPage=o.mdtTranslations.rowsPerPage||"Rows per page:",o.mdtTranslations.largeEditDialog=o.mdtTranslations.largeEditDialog||{},o.mdtTranslations.largeEditDialog.saveButtonLabel=o.mdtTranslations.largeEditDialog.saveButtonLabel||"Save",o.mdtTranslations.largeEditDialog.cancelButtonLabel=o.mdtTranslations.largeEditDialog.cancelButtonLabel||"Cancel"}var l=this;s(),r(),l.addHeaderCell=i}],link:function(t,e,a,r,i){function s(){t.selectedRowCallback({rows:r.tableDataStorageService.getSelectedRows()})}function l(){angular.isUndefined(a.mdtRowPaginator)&&t.$watch("mdtRow",function(t){r.tableDataStorageService.storage=[],u(t.data)},!0)}function u(e){var a,o=[];n.each(e,function(e){a=n.get(e,t.mdtRow["table-row-id-key"]),o=[],n.each(t.mdtRow["column-keys"],function(t){o.push({attributes:{editableField:!1},columnKey:t,value:n.get(e,t)})}),r.tableDataStorageService.addRowData(a,o)})}function c(){return!!(t.paginatedRows===!0||t.paginatedRows&&t.paginatedRows.hasOwnProperty("isEnabled")&&t.paginatedRows.isEnabled===!0)}function d(){i(function(t){var a=[],o=[],r=[];n.each(t,function(t){var e=angular.element(t);e.hasClass("theadTrRow")?a.push(e):e.hasClass("customCell")?r.push(e):o.push(e)}),e.find("#reader").append(a).append(o)})}function g(e){var a=r.tableDataStorageService.getSavedRowData(e);t.saveRowCallback({row:a})}function m(e,a,n){var r=e.currentTarget.closest("td").getBoundingClientRect(),i={top:r.top,left:r.left},s={controller:"InlineEditModalCtrl",targetEvent:e,clickOutsideToClose:!0,escapeToClose:!0,focusOnOpen:!1,locals:{position:i,cellData:JSON.parse(JSON.stringify(a)),mdtTranslations:t.mdtTranslations}};"smallEditDialog"===a.attributes.editableField?s.templateUrl="/main/templates/smallEditDialog.html":s.templateUrl="/main/templates/largeEditDialog.html";var l=this;o.show(s).then(function(t){a.value=t,l.saveRow(n)})}t.headerData=r.tableDataStorageService.header,t.isPaginationEnabled=c,t.isAnyRowSelected=n.bind(r.tableDataStorageService.isAnyRowSelected,r.tableDataStorageService),t.onCheckboxChange=s,t.saveRow=g,t.showEditDialog=m,d(),n.isEmpty(t.mdtRow)||l()}}}t.$inject=["TableDataStorageFactory","mdtPaginationHelperFactory","mdtAjaxPaginationHelperFactory","$mdDialog","_"],angular.module("mdDataTable").directive("mdtTable",t)}(),function(){"use strict";function t(t,e,a,o,n,r){function i(){t.editFieldForm.$valid&&r.hide(a.value)}function s(){r.cancel()}n(function(){var t=$("md-dialog");t.css("position","fixed"),t.css("top",e.top),t.css("left",e.left),t.find('input[type="text"]').focus()}),t.cellData=a,t.mdtTranslations=o,t.saveRow=i,t.cancel=s}t.$inject=["$scope","position","cellData","mdtTranslations","$timeout","$mdDialog"],angular.module("mdDataTable").controller("InlineEditModalCtrl",t)}(),function(){"use strict";function t(t,e){function a(t){this.storage=[],this.header=[],this.customCells={},this.sortByColumnLastIndex=null,this.orderByAscending=!0,this.isVirtualRepeatEnabled=t}return a.prototype.addHeaderCellData=function(t){this.header.push(t)},a.prototype.addRowData=function(e,a){return a instanceof Array?void this.storage.push({rowId:e,optionList:{selected:!1,deleted:!1,visible:!0},data:a}):void t.error("`rowArray` parameter should be array")},a.prototype.getRowData=function(e){return this.storage[e]?this.storage[e].data:void t.error("row is not exists at index: "+e)},a.prototype.getRowOptions=function(e){return this.storage[e]?this.storage[e].optionList:void t.error("row is not exists at index: "+e)},a.prototype.setAllRowsSelected=function(a,o){return"undefined"==typeof a?void t.error("`isSelected` parameter is required"):void e.each(this.storage,function(t){o?t.optionList.visible&&(t.optionList.selected=!!a):t.optionList.selected=!!a})},a.prototype.reverseRows=function(){this.storage.reverse()},a.prototype.sortByColumn=function(t,e){return this.sortByColumnLastIndex===t?(this.reverseRows(),this.orderByAscending=!this.orderByAscending):(this.sortByColumnIndex(t,e),this.sortByColumnLastIndex=t,this.orderByAscending=!0),this.orderByAscending?-1:1},a.prototype.sortByColumnIndex=function(t,a){var o;o="function"==typeof a?function(e){return a(e.data[t].value,e,t)}:function(e){return e.data[t].value};var n=e.sortBy(this.storage,o);this.storage=n},a.prototype.isAnyRowSelected=function(){return e.some(this.storage,function(t){return t.optionList.selected===!0&&t.optionList.deleted===!1})},a.prototype.getNumberOfSelectedRows=function(){var t=e.countBy(this.storage,function(t){return t.optionList.selected===!0&&t.optionList.deleted===!1?"selected":"unselected"});return t.selected?t.selected:0},a.prototype.deleteSelectedRows=function(){var t=[];return e.each(this.storage,function(e){e.optionList.selected&&e.optionList.deleted===!1&&(e.rowId?t.push(e.rowId):t.push(e.data),e.optionList.deleted=!0)}),t},a.prototype.getSelectedRows=function(){var t=[];return e.each(this.storage,function(e){e.optionList.selected&&e.optionList.deleted===!1&&(e.rowId?t.push(e.rowId):t.push(e.data))}),t},a.prototype.getSavedRowData=function(t){var a=[];return e.each(t.data,function(t){a.push(t.value)}),a},{getInstance:function(t){return new a(t)}}}t.$inject=["$log","_"],angular.module("mdDataTable").factory("TableDataStorageFactory",t)}(),function(){"use strict";function t(t){function e(t){this.tableDataStorageService=t.tableDataStorageService,this.rowOptions=t.mdtRowOptions,this.paginatorFunction=t.mdtRowPaginatorFunction,this.mdtRowPaginatorErrorMessage=t.mdtRowPaginatorErrorMessage||"Ajax error during loading contents.",this.mdtRowPaginatorNoResultsMessage=t.mdtRowPaginatorNoResultsMessage||"No results.",this.mdtTriggerRequest=t.mdtTriggerRequest,t.paginationSetting&&t.paginationSetting.hasOwnProperty("rowsPerPageValues")&&t.paginationSetting.rowsPerPageValues.length>0?this.rowsPerPageValues=t.paginationSetting.rowsPerPageValues:this.rowsPerPageValues=[10,20,30,50,100],this.rowsPerPage=this.rowsPerPageValues[0],this.page=1,this.totalResultCount=0,this.totalPages=0,this.isLoading=!1,this.fetchPage(this.page),this.mdtTriggerRequest&&t.mdtTriggerRequest({loadPageCallback:this.fetchPage.bind(this)})}return e.prototype.getStartRowIndex=function(){return(this.page-1)*this.rowsPerPage},e.prototype.getEndRowIndex=function(){var t=this.getStartRowIndex()+this.rowsPerPage-1;return this.totalResultCount<t?this.totalResultCount-1:t},e.prototype.getTotalRowsCount=function(){return this.totalResultCount},e.prototype.getRows=function(){return this.tableDataStorageService.storage},e.prototype.previousPage=function(){var t=this;this.hasPreviousPage()&&this.fetchPage(this.page-1).then(function(){t.page--})},e.prototype.nextPage=function(){var t=this;this.hasNextPage()&&this.fetchPage(this.page+1).then(function(){t.page++})},e.prototype.hasNextPage=function(){return this.page<this.totalPages},e.prototype.hasPreviousPage=function(){return this.page>1},e.prototype.fetchPage=function(t){this.isLoading=!0;var e=this;return this.paginatorFunction({page:t,pageSize:this.rowsPerPage}).then(function(t){e.tableDataStorageService.storage=[],e.setRawDataToStorage(e,t.results,e.rowOptions["table-row-id-key"],e.rowOptions["column-keys"]),e.totalResultCount=t.totalResultCount,e.totalPages=Math.ceil(t.totalResultCount/e.rowsPerPage),0==e.totalResultCount?e.isNoResults=!0:e.isNoResults=!1,e.isLoadError=!1,e.isLoading=!1},function(){e.tableDataStorageService.storage=[],e.isLoadError=!0,e.isLoading=!1,e.isNoResults=!0})},e.prototype.setRawDataToStorage=function(e,a,o,n){var r,i=[];t.each(a,function(a){r=t.get(a,o),i=[],t.each(n,function(e){i.push({attributes:{editableField:!1},columnKey:e,value:t.get(a,e)})}),e.tableDataStorageService.addRowData(r,i)})},e.prototype.setRowsPerPage=function(t){this.rowsPerPage=t,this.page=1,this.fetchPage(this.page)},{getInstance:function(t,a,o,n){return new e(t,a,o,n)}}}t.$inject=["_"],angular.module("mdDataTable").service("mdtAjaxPaginationHelperFactory",t)}(),function(){"use strict";function t(t){if(!t._)throw Error("Lodash does not found. Please make sure you load Lodash before any source for mdDataTable");return t._}t.$inject=["$window"],angular.module("mdDataTable").factory("_",t)}(),function(){"use strict";function t(t){function e(t,e){this.tableDataStorageService=t,e&&e.hasOwnProperty("rowsPerPageValues")&&e.rowsPerPageValues.length>0?this.rowsPerPageValues=e.rowsPerPageValues:this.rowsPerPageValues=[10,20,30,50,100],this.rowsPerPage=this.rowsPerPageValues[0],this.page=1}return e.prototype.calculateVisibleRows=function(){var e=this;t.each(this.tableDataStorageService.storage,function(t,a){a>=e.getStartRowIndex()&&a<=e.getEndRowIndex()?t.optionList.visible=!0:t.optionList.visible=!1})},e.prototype.getStartRowIndex=function(){return(this.page-1)*this.rowsPerPage},e.prototype.getEndRowIndex=function(){var t=this.getStartRowIndex()+this.rowsPerPage-1;return this.tableDataStorageService.storage.length<t?this.tableDataStorageService.storage.length-1:t},e.prototype.getTotalRowsCount=function(){return this.tableDataStorageService.storage.length},e.prototype.getRows=function(){return this.calculateVisibleRows(),this.tableDataStorageService.storage},e.prototype.previousPage=function(){this.hasPreviousPage()&&this.page--},e.prototype.nextPage=function(){this.hasNextPage()&&this.page++},e.prototype.hasNextPage=function(){var t=Math.ceil(this.getTotalRowsCount()/this.rowsPerPage);return this.page<t},e.prototype.hasPreviousPage=function(){return this.page>1},e.prototype.setRowsPerPage=function(t){this.rowsPerPage=t,this.page=1},{getInstance:function(t,a){return new e(t,a)}}}t.$inject=["_"],angular.module("mdDataTable").service("mdtPaginationHelperFactory",t)}(),function(){"use strict";function t(t){function e(e){return e===t.ALIGN_RULE.ALIGN_RIGHT?"rightAlignedColumn":"leftAlignedColumn"}var a=this;a.getColumnAlignClass=e}t.$inject=["ColumnOptionProvider"],angular.module("mdDataTable").service("ColumnAlignmentHelper",t)}(),function(){"use strict";var t={ALIGN_RULE:{ALIGN_LEFT:"left",ALIGN_RIGHT:"right"}};angular.module("mdDataTable").value("ColumnOptionProvider",t)}(),function(){"use strict";function t(t){return{restrict:"E",transclude:!0,replace:!0,scope:{alignRule:"@",sortBy:"=",columnDefinition:"@"},require:["^mdtTable"],link:function(e,a,o,n,r){var i=n[0];r(function(a){var o=t(a.html())(e.$parent);i.addHeaderCell({alignRule:e.alignRule,sortBy:e.sortBy,columnDefinition:e.columnDefinition,columnName:o})})}}}t.$inject=["$interpolate"],angular.module("mdDataTable").directive("mdtColumn",t)}(),function(){"use strict";function t(){return{restrict:"E",templateUrl:"/main/templates/mdtGeneratedHeaderCellContent.html",replace:!0,scope:!1,link:function(){}}}angular.module("mdDataTable").directive("mdtGeneratedHeaderCellContent",t)}(),function(){"use strict";function t(){return{restrict:"E",replace:!0,transclude:!0,require:"^mdtTable",scope:!0,link:function(t,e,a,o,n){function r(){n(function(t){e.append(t)})}r()}}}angular.module("mdDataTable").directive("mdtHeaderRow",t)}(),function(){"use strict";function t(t){return{restrict:"E",replace:!0,transclude:!0,require:"^mdtRow",link:function(e,a,o,n,r){var i={htmlContent:!!o.htmlContent&&o.htmlContent,editableField:!!o.editableField&&o.editableField,editableFieldTitle:!!o.editableFieldTitle&&o.editableFieldTitle,editableFieldMaxLength:!!o.editableFieldMaxLength&&o.editableFieldMaxLength};r(function(a){if(o.htmlContent)n.addToRowDataStorage(a,i);else{var r=t(a.html())(e.$parent);n.addToRowDataStorage(r,i)}})}}}t.$inject=["$interpolate"],angular.module("mdDataTable").directive("mdtCell",t)}(),function(){"use strict";function t(){return{restrict:"E",transclude:!0,require:"^mdtTable",scope:{tableRowId:"="},controller:["$scope",function(t){function e(e,a){t.rowDataStorage.push({value:e,attributes:a})}var a=this;a.addToRowDataStorage=e,t.rowDataStorage=[]}],link:function(t,e,a,o,n){function r(){n(function(t){e.append(t)})}r(),o.tableDataStorageService.addRowData(t.tableRowId,t.rowDataStorage)}}}angular.module("mdDataTable").directive("mdtRow",t)}(),function(){"use strict";function t(t){return{restrict:"A",scope:{mdtAddAlignClass:"="},link:function(e,a){var o=t.getColumnAlignClass(e.mdtAddAlignClass);a.addClass(o)}}}t.$inject=["ColumnAlignmentHelper"],angular.module("mdDataTable").directive("mdtAddAlignClass",t)}(),function(){"use strict";function t(t,e,a){return{restrict:"A",require:"^?mdtTable",link:function(o,n,r,i){o.$watch(function(){var e=t(r.mdtAddHtmlContentToCell)(o);return e.value},function(s){n.empty();var l=t(r.mdtAddHtmlContentToCell)(o);if(l.columnKey&&i&&i.tableDataStorageService.customCells[l.columnKey]){var u=i.tableDataStorageService.customCells[l.columnKey],c=u.htmlContent,d=a.$new();d.value=s,e(c)(d,function(t){n.append(t)})}else n.append(s)},!1)}}}t.$inject=["$parse","$compile","$rootScope"],angular.module("mdDataTable").directive("mdtAddHtmlContentToCell",t)}(),function(){"use strict";function t(){return{restrict:"A",scope:!1,link:function(t,e){t.animateSortIcon&&e.addClass("animate-sort-icon")}}}angular.module("mdDataTable").directive("mdtAnimateSortIconHandler",t)}(),function(){"use strict";function t(){return{restrict:"E",transclude:!0,template:'<span class="customCell" ng-transclude></span>',require:"^mdtTable",link:{pre:function(t,e,a,o,n){n(function(t){var e=a.columnKey;o.tableDataStorageService.customCells[e]={htmlContent:t.clone()}})}}}}angular.module("mdDataTable").directive("mdtCustomCell",t)}(),function(){"use strict";function t(){return{restrict:"A",scope:!1,require:"^mdtTable",link:function(t,e,a,o){t.selectAllRows=!1,t.$watch("selectAllRows",function(e){o.tableDataStorageService.setAllRowsSelected(e,t.isPaginationEnabled())})}}}angular.module("mdDataTable").directive("mdtSelectAllRowsHandler",t)}(),function(){"use strict";function t(){return{restrict:"A",scope:!1,require:"^mdtTable",link:function(t,e,a,o){function n(){t.sortableColumns&&t.$apply(function(){t.direction=o.tableDataStorageService.sortByColumn(i,t.headerRowData.sortBy)})}function r(){return o.tableDataStorageService.sortByColumnLastIndex===i}var i=t.$index;t.isSorted=r,t.direction=1,e.on("click",n),t.$on("$destroy",function(){e.off("click",n)})}}}angular.module("mdDataTable").directive("mdtSortHandler",t)}(),function(){"use strict";function t(){return{restrict:"E",templateUrl:"/main/templates/mdtCardFooter.html",transclude:!0,replace:!0,scope:!0,require:["^mdtTable"],link:function(t){t.rowsPerPage=t.mdtPaginationHelper.rowsPerPage,t.$watch("rowsPerPage",function(e,a){e!=a&&t.mdtPaginationHelper.setRowsPerPage(e)})}}}angular.module("mdDataTable").directive("mdtCardFooter",t)}(),function(){"use strict";function t(){return{restrict:"E",templateUrl:"/main/templates/mdtCardHeader.html",transclude:!0,replace:!0,scope:!0,require:["^mdtTable"],link:function(t){t.isTableCardEnabled=!1,t.tableCard&&t.tableCard.visible!==!1&&(t.isTableCardEnabled=!0)}}}angular.module("mdDataTable").directive("mdtCardHeader",t)}();
//# sourceMappingURL=md-data-table.min.js.map