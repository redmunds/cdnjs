!function(){function e(e){var t=document.createElement("a");return t.href=e||"/",{protocol:t.protocol,hostname:t.hostname,pathname:t.pathname,port:t.port,search:"?"===t.search[0]?t.search.substr(1):t.search,hash:t.hash,host:t.host}}function t(e){return e?e.toISOString():""}function n(e,t,n){var r=e.slice?"slice":e.mozSlice?"mozSlice":"webkitSlice";return e[r](t,n)}function r(e){var t=new DOMParser,n=t.parseFromString(e.responseText,"text/xml"),r=n.getElementsByTagName("Code"),a=n.getElementsByTagName("Message");return r=r.length?r[0].innerHTML:"",a=a.length?a[0].innerHTML:"",r.length?{code:r,msg:a}:{}}var a=new Date("2060-10-22"),o=function(o){function s(){return{d:function(){},w:function(){},e:function(){}}}function i(e,t){var n=x.length;return x.push(new p(f({started:function(){},progress:function(){},complete:function(){},cancelled:function(){},info:function(){},warn:function(){},error:function(){},xAmzHeadersAtInitiate:{},notSignedHeadersAtInitiate:{},xAmzHeadersAtUpload:{},xAmzHeadersAtComplete:{}},e,{id:n,status:S,priority:0,onStatusChange:u,loadedBytes:0,sizeBytes:e.file.size,eTag:""}),t)),n}function u(){M.d("onFileUploadStatusChange"),l()}function d(){setTimeout(l,1)}function l(){M.d("processQueue   length: "+x.length);var e=-1,t=-1,n=!0;x.forEach(function(r,a){r.priority>t&&r.status===S&&(e=a,t=r.priority),r.status===w&&(n=!1)}),n&&e>=0&&x[e].start()}function p(o,s){function i(e){e!==b&&e!==z&&e!==T||(clearInterval(ve),clearInterval(Se)),we.status=e,we.onStatusChange()}function u(){M.d("cancelAllRequests()");for(var e=1;e<be.length;e++)P(e,!0);O()}function d(){s.computeContentMd5&&we.file.size>0?B():(L(),J())}function l(e){var t,n={method:"POST",path:ce()+"?uploads",step:"initiate",x_amz_headers:we.xAmzHeadersAtInitiate,not_signed_headers:we.notSignedHeadersAtInitiate},a=we.status;we.contentType&&(n.contentType=we.contentType),n.onErr=function(n){t||we.status===I||we.status===T||(t=!0,M.d("onInitiateError for FileUpload "+we.id),we.warn("Error initiating upload",r(n)),i(z),n.abort(),setTimeout(function(){we.status!==I&&we.status!==T&&(we.status=a,l(e))},X(Ie++)))},n.on200=function(t){var r=t.response.match(/<UploadId>(.+)<\/UploadId>/);r&&r[1]?(we.uploadId=r[1],we.awsKey=e,M.d("requester success. got uploadId "+we.uploadId),N(),d()):n.onErr(t)},Z(n),$(n),Y()}function p(e){var t,a,o,s;s=be[e],s.status=w,ze++,s.loadedBytesPrevious=null,t=X(s.attempts++),M.d("uploadPart #"+e+"     will wait "+t+"ms to try"),o={method:"PUT",path:ce()+"?partNumber="+e+"&uploadId="+we.uploadId,step:"upload #"+e,x_amz_headers:we.xAmzHeadersAtUpload,md5_digest:s.md5_digest,contentSha256:"UNSIGNED-PAYLOAD",attempts:s.attempts,part:s},o.onErr=function(t,n){if(we.status!==T&&we.status!==I){var o="problem uploading part #"+e+",   http status: "+t.status+",   hasErrored: "+!!a+",   part status: "+s.status+",   readyState: "+t.readyState+(n?",   isOnError":"");if(M.w(o),we.warn(o),!a){if(a=!0,404===t.status){var i="404 error resulted in abortion of both this part and the entire file.";M.w(i+" Server response: "+t.response),we.error(i),s.status=I,O()}else{s.status=z,s.loadedBytes=0;var u=r(t);u.code&&M.e('AWS Server response: code="'+u.code+'", message="'+u.msg+'"'),J()}t.abort()}}},o.on200=function(t){var n,r=t.getResponseHeader("ETag");M.d("uploadPart 200 response for part #"+e+"     ETag: "+r),s.isEmpty||r!==E?(s.eTag=r,s.status=b):(s.status=z,s.loadedBytes=0,n="eTag matches MD5 of 0 length blob for part #"+e+"   Retrying part.",M.w(n),we.warn(n)),J()},o.onProgress=function(e){s.loadedBytes=e.loaded},o.toSend=function(){var t=n(we.file,s.start,s.end);return M.d("part # "+e+" (bytes "+s.start+" -> "+s.end+")  reported length: "+t.size),s.isEmpty||0!==t.size||M.w("  *** WARN: blob reporting size of 0 bytes. Will try upload anyway.."),t},o.onFailedAuth=function(){var t="onFailedAuth for uploadPart #"+e+".   Will set status to ERROR";M.w(t),we.warn(t),s.status=z,s.loadedBytes=0,J()},Z(o),setTimeout(function(){we.status!==I&&we.status!==T&&($(o),M.d("upload #",e,o))},t),s.uploader=o}function P(e,t){var n=be[e];n.currentXhr&&(t&&(n.currentXhr.onreadystatechange=function(){}),n.currentXhr.abort())}function _(){M.d("completeUpload"),we.info("will attempt to complete upload");var e,t=[],n=we.status;t.push("<CompleteMultipartUpload>"),be.forEach(function(e,n){e&&t.push(["<Part><PartNumber>",n,"</PartNumber><ETag>",e.eTag,"</ETag></Part>"].join(""))}),t.push("</CompleteMultipartUpload>");var a={method:"POST",contentType:"application/xml; charset=UTF-8",path:ce()+"?uploadId="+we.uploadId,x_amz_headers:we.xAmzHeadersAtComplete,step:"complete"};a.onErr=function(t){if(!e&&we.status!==I&&we.status!==T){e=!0;var a="Error completing upload.";M.w(a,r(t)),we.error(a),i(z),t.abort(),setTimeout(function(){we.status!==I&&we.status!==T&&(we.status=n,_(),Y())},X(Ee++))}},a.on200=function(e){var t=c(e.responseText),n=t.getElementsByTagName("CompleteMultipartUploadResult")[0];we.eTag=v(n,"ETag"),we.complete(e,we.name),q()},a.toSend=function(){return t.join("")},Z(a),$(a)}function x(e){M.d("headObject"),we.info("will attempt to verify existence of the file");var t={method:"HEAD",path:ce(),step:"head_object"};t.onErr=function(){var t="Error completing head object. Will re-upload file.";M.w(t),l(e)},t.on200=function(t){var n=t.getResponseHeader("Etag");n===we.eTag?(M.d("headObject found matching object on S3."),we.progress(1),we.complete(t,we.name),i(b)):(M.d("headObject not found on S3."),l(e))},Z(t),$(t)}function A(e){return function(){var t=we.status;if(t!==z&&t!==T&&t!==I){var n=s.cryptoMd5Method.call(this,this.result);M.d(["part #",e.part," MD5 digest is ",n].join("")),e.md5_digest=n,1===e.part&&L(),delete e.reader,Pe+=1,J(),Pe===_e&&M.d("All parts have MD5 digests"),setTimeout(B,1500)}}}function B(){for(var e=1;e<=_e;e++){var t=be[e];if(t.status!==b&&null===t.md5_digest){if(e>1||"undefined"==typeof we.firstMd5Digest){t.reader=new FileReader,t.reader.onloadend=A(t),t.reader.readAsArrayBuffer(n(we.file,t.start,t.end));break}t.md5_digest=we.firstMd5Digest,L(),J()}}}function O(){if(M.d("abortUpload"),we.info("will attempt to abort the upload"),"undefined"==typeof we.uploadId)return void i(I);var e={method:"DELETE",path:ce()+"?uploadId="+we.uploadId,step:"abort",successStatus:204};e.onErr=function(){var e="Error aborting upload.";M.w(e),we.error(e)},e.on200=function(){i(I),D()},Z(e),$(e)}function D(){M.d("listParts"),we.info("list parts");var e={method:"GET",path:ce()+"?uploadId="+we.uploadId,step:"list"};e.onErr=function(e){if(404===e.status)V(),we.info("upload canceled");else{var t="Error listing parts.";M.w(t,r(e)),we.error(t)}},e.on200=function(e){var t=c(e.responseText),n=t.getElementsByTagName("Part");n.length?(M.d("Parts still found after abort...waiting."),setTimeout(function(){O()},1e3)):we.info("upload canceled")},Z(e),$(e)}function k(e){M.d("getUploadParts() for uploadId starting at part # "+e),we.info("getUploadParts() for uploadId starting at part # "+e);var t={method:"GET",path:ce()+"?uploadId="+we.uploadId,query_string:"&part-number-marker="+e,step:"get upload parts"};"4"===s.awsSignatureVersion&&(t.path=[ce(),"?uploadId=",we.uploadId,"&part-number-marker="+e].join("")),t.onErr=function(t){if(404===t.status)we.info(["uploadId ",we.uploadId," does not exist."].join("")),V(),Y(),N(),J();else{var n="Error listing parts for getUploadParts() starting at part # "+e;M.w(n,r(t)),we.error(n)}},t.on200=function(t){we.info(["uploadId ",we.uploadId," is not complete. Fetching parts from part marker=",e].join(""));for(var n,r,a=c(t.responseText),o=a.getElementsByTagName("ListPartsResult")[0],s="true"===v(o,"IsTruncated"),i=a.getElementsByTagName("Part"),u=i.length,l=0;l<u;l++)r=i[l],Te.push({eTag:v(r,"ETag"),partNumber:parseInt(v(r,"PartNumber")),size:parseInt(v(r,"Size")),LastModified:v(r,"LastModified")});if(a=i=null,s){var p=v(o,"NextPartNumberMarker");k(p)}else N(),Te.forEach(function(e){n=j(e.partNumber,b,e.size),n.eTag=e.eTag,n.attempts=1,n.loadedBytes=e.size,n.loadedBytesPrevious=e.size,n.finishedUploadingAt=e.LastModified,n.md5_digest="n/a",be[e.partNumber]=n}),Y(),d();o=null},Z(t),$(t)}function N(){_e=Math.ceil(we.file.size/s.partSize)||1;for(var e=1;e<=_e;e++){var t="undefined"==typeof be[e]?S:be[e].status;t!==b&&(be[e]=j(e,S,we.file.size))}}function j(e,t,n){return{status:t,start:(e-1)*s.partSize,end:e*s.partSize,attempts:0,loadedBytes:0,loadedBytesPrevious:null,isEmpty:0===n,md5_digest:null,part:e}}function L(){var e=m(we),n={awsKey:we.name,bucket:s.bucket,uploadId:we.uploadId,fileSize:we.file.size,fileType:we.file.type,lastModifiedDate:t(we.file.lastModifiedDate),partSize:s.partSize,signParams:we.signParams,createdAt:(new Date).toISOString()};s.computeContentMd5&&be.length&&"undefined"!=typeof be[1].md5_digest&&(n.firstMd5Digest=be[1].md5_digest),h(e,n)}function q(){var e=g(),t=e[m(we)];"undefined"!=typeof t&&(t.completedAt=(new Date).toISOString(),t.eTag=we.eTag,C.setItem("awsUploads",JSON.stringify(e))),i(b),we.progress(1)}function V(){"undefined"!=typeof we.file&&y(m(we))}function W(){var e=g(!0),t=e[m(we)];G(t)&&(we.uploadId=t.uploadId,we.name=t.awsKey,we.eTag=t.eTag,we.firstMd5Digest=t.firstMd5Digest,we.signParams=t.signParams)}function G(e){if("undefined"==typeof e)return!1;var t=new Date(e.completedAt||a);return s.partSize===e.partSize&&t>F&&s.bucket===e.bucket&&(!s.onlyRetryForSameFileName||we.name===e.awsKey)}function X(e){return 1===e?0:1e3*Math.min(s.maxRetryBackoffSecs,Math.pow(s.retryBackoffPower,e-2))}function J(){var e,t=0,n=!0,r=!1,a=[],o=[];if(we.status!==w)return void we.info("will not process parts list, as not currently evaporating");for(var i=0;i<be.length;i++){var u=be[i];if(u){if(s.computeContentMd5&&null===u.md5_digest)return;var d=!1;switch(a.push(u.status),u.status){case w:n=!1,t++,o.push(u.loadedBytes);break;case z:r=!0,d=!0;break;case S:d=!0}d&&(n=!1,t<s.maxConcurrentParts&&(p(i),t++))}}e=a.toString()+" // bytesLoaded: "+o.toString(),M.d("processPartsList()  anyPartHasErrored: "+r,e),(ze>=be.length-1||r)&&we.info("part stati: "+e),n&&_()}function K(){ve=setInterval(function(){var e=0;be.forEach(function(t){e+=t.loadedBytes}),we.progress(e/we.sizeBytes)},s.progressIntervalMS)}function Q(){Se=setInterval(function(){M.d("monitorPartsProgress() "+new Date),be.forEach(function(e,t){var n;return e.status!==w?void M.d(t,"not evaporating "):null===e.loadedBytesPrevious?(M.d(t,"no previous "),void(e.loadedBytesPrevious=e.loadedBytes)):(n=e.loadedBytesPrevious<e.loadedBytes,s.simulateStalling&&4===t&&Math.random()<.25&&(n=!1),M.d(t,n?"moving. ":"stalled.",e.loadedBytesPrevious,e.loadedBytes),n||setTimeout(function(){we.info("part #"+t+" stalled. will abort. "+e.loadedBytesPrevious+" "+e.loadedBytes),P(t)},0),void(e.loadedBytesPrevious=e.loadedBytes))})},12e4)}function Y(){K(),Q()}function Z(e){e.getPayload=function(){return e.toSend?e.toSend():null},e.getPayloadSha256Content=function(){var t=e.contentSha256||s.cryptoHexEncodedHash256(e.getPayload()||"");return M.d("getPayloadSha256Content",t),t},M.d("setupRequest()",e);var t=s.timeUrl?new Date((new Date).getTime()+U):new Date;"4"===s.awsSignatureVersion?e.dateString=t.toISOString().slice(0,19).replace(/-|:/g,"")+"Z":e.dateString=t.toUTCString(),e.x_amz_headers=f(e.x_amz_headers,{"x-amz-date":e.dateString}),e.onGotAuth=function(){if(me(e))return void M.w("onGotAuth() step",e.step,"is already in progress. Returning.");var t=he(e),n=e.getPayload(),r=H+e.path;e.query_string&&(r+=e.query_string);var a={},o=e.successStatus||200;f(a,e.not_signed_headers),f(a,e.x_amz_headers),s.simulateErrors&&1===e.attempts&&"upload #3"===e.step&&(M.d("simulating error by POST part #3 to invalid url"),r="https:///foo"),t.open(e.method,r),t.setRequestHeader("Authorization",ae(e));for(var i in a)a.hasOwnProperty(i)&&t.setRequestHeader(i,a[i]);"4"===s.awsSignatureVersion&&t.setRequestHeader("x-amz-content-sha256",e.getPayloadSha256Content()),e.contentType&&t.setRequestHeader("Content-Type",e.contentType),e.md5_digest&&t.setRequestHeader("Content-MD5",e.md5_digest),t.onreadystatechange=function(){4===t.readyState&&(n&&M.d("  ### "+n.size),ye(e),t.status===o?e.on200(t):e.onErr(t))},t.onerror=function(){ye(e),e.onErr(t,!0)},"function"==typeof e.onProgress&&(t.upload.onprogress=function(t){e.onProgress(t)}),t.send(n)},e.onFailedAuth=e.onFailedAuth||function(t){we.error("Error onFailedAuth for step: "+e.step),e.onErr(t)}}function $(e){if(M.d("authorizedSend() "+e.step),me(e))return void M.w("authorizedSend() step",e.step,"is already in progress. Returning.");if(s.awsLambda)return ee(e);var t,n=he(e),r=[s.signerUrl,"?to_sign=",te(e),"&datetime=",e.dateString].join(""),a=re(we.signParams);for(var o in a)a.hasOwnProperty(o)&&(r+="&"+encodeURIComponent(o)+"="+encodeURIComponent(a[o]));s.xhrWithCredentials&&(n.withCredentials=!0),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var r=ne(n.response);"2"===s.awsSignatureVersion&&28!==r.length?(t="failed to get authorization (readyState=4) for "+e.step+".  xhr.status: "+n.status+".  xhr.response: "+n.response,M.w(t),we.warn(t),ye(e),e.onFailedAuth(n)):(M.d("authorizedSend got signature for step: '"+e.step+"'    sig: "+r),e.auth=r,ye(e),e.onGotAuth())}else t="failed to get authorization (readyState=4) for "+e.step+".  xhr.status: "+n.status+".  xhr.response: "+n.response,M.w(t),we.warn(t),ye(e),e.onFailedAuth(n)},n.onerror=function(){t="failed to get authorization (onerror) for "+e.step+".  xhr.status: "+n.status+".  xhr.response: "+n.response,M.w(t),we.warn(t),e.onFailedAuth(n)},n.open("GET",r);var i=re(we.signHeaders);for(var u in i)i.hasOwnProperty(u)&&n.setRequestHeader(u,i[u]);"function"==typeof we.beforeSigner&&we.beforeSigner(n,r),n.send()}function ee(e){s.awsLambda.invoke({FunctionName:s.awsLambdaFunction,InvocationType:"RequestResponse",Payload:JSON.stringify({to_sign:oe(e),sign_params:re(we.signParams),sign_headers:re(we.signHeaders)})},function(t,n){if(t){var r="failed to get authorization with lambda "+t;return M.w(r),we.warn(r),void e.onFailedAuth(t)}var a=ne(JSON.parse(n.Payload));e.auth=a,e.onGotAuth()})}function te(e){return encodeURIComponent("4"===s.awsSignatureVersion?se(e):oe(e))}function ne(e){return"function"==typeof s.signResponseHandler&&(e=s.signResponseHandler(e)||e),e}function re(e){var t={};for(var n in e)e.hasOwnProperty(n)&&("function"==typeof e[n]?t[n]=e[n]():t[n]=e[n]);return t}function ae(e){return"4"===s.awsSignatureVersion?ue(e):ie(e)}function oe(e){var t,n="",r=[];for(var a in e.x_amz_headers)e.x_amz_headers.hasOwnProperty(a)&&r.push(a);return r.sort(),r.forEach(function(t){n+=t+":"+e.x_amz_headers[t]+"\n"}),t=e.method+"\n"+(e.md5_digest||"")+"\n"+(e.contentType||"")+"\n\n"+n+(s.cloudfront?"/"+s.bucket:"")+e.path,M.d("makeStringToSign (V2)",t),t}function se(e){var t=[];t.push("AWS4-HMAC-SHA256"),t.push(e.dateString),t.push(de(e)),t.push(s.cryptoHexEncodedHash256(le(e)));var n=t.join("\n");return M.d("makeStringToSign (V4)",n),n}function ie(e){return["AWS ",s.aws_key,":",e.auth].join("")}function ue(e){var t=[],n=de(e),r=fe(e);return t.push(["AWS4-HMAC-SHA256 Credential=",s.aws_key,"/",n].join("")),t.push("SignedHeaders="+r.signedHeaders),t.push("Signature="+e.auth),t.join(", ")}function de(e){var t=[];return t.push(e.dateString.slice(0,8)),t.push(s.awsRegion),t.push("s3"),t.push("aws4_request"),t.join("/")}function le(t){var n=[];n.push(t.method),n.push(e(t.path).pathname),n.push(pe(t)||"");var r=fe(t);n.push(r.canonicalHeaders+"\n"),n.push(r.signedHeaders),n.push(t.getPayloadSha256Content());var a=n.join("\n");return M.d("CanonicalRequest",a),a}function pe(t){var n,r,a=e(t.path).search,o=a.split("&"),s=[];for(r=0;r<o.length;r++)n=o[r].split("="),s.push({name:encodeURIComponent(n[0]),value:n.length>1?encodeURIComponent(n[1]):null});var i=s.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),u=[];for(r=0;r<i.length;r++)n=i[r].value?[i[r].name,i[r].value].join("="):i[r].name+"=",u.push(n);return u.join("&")}function fe(e){function t(e,t){var n=e.toLowerCase();a.push(n),r[n]=t.replace(/\s+/g," ")}var n,r=[],a=[];e.md5_digest&&t("Content-Md5",e.md5_digest),t("Host",R),e.contentType&&t("Content-Type",e.contentType||"");var o=e.x_amz_headers||{};for(var s in o)o.hasOwnProperty(s)&&t(s,o[s]);var i=a.sort(function(e,t){return e<t?-1:e>t?1:0}),u=[],d=[],l=e.not_signed_headers||[],p=[];for(n=0;n<l.length;n++)d.push(l[n].toLowerCase());for(n=0;n<i.length;n++){var f=i[n];u.push([f,r[f]].join(":")),d.indexOf(f)===-1&&p.push(f)}return{canonicalHeaders:u.join("\n"),signedHeaders:p.join(";")}}function ce(){var e="/"+s.bucket+"/"+we.name;return(s.cloudfront||H.indexOf("cloudfront")>-1)&&(e="/"+we.name),e}function ge(e){return"undefined"==typeof e.part?e:e.part}function me(e){return!!ge(e).currentXhr}function he(e){return ge(e).currentXhr=new XMLHttpRequest}function ye(e){delete ge(e).currentXhr}var ve,Se,we=this,be=[],Te=[],ze=0,Ie=0,Ee=0;f(we,o),we.start=function(){M.d("starting FileUpload "+we.id),we.started(),i(w);var e=we.name;if(W(),"undefined"==typeof we.uploadId)l(e);else if("undefined"!=typeof we.eTag&&we.firstMd5Digest){var t=new FileReader;t.onloadend=function(){var t=s.cryptoMd5Method.call(this,this.result);s.allowS3ExistenceOptimization&&we.firstMd5Digest===t?x(e):(we.firstMd5Digest=t,l(e))},t.readAsArrayBuffer(n(we.file,0,s.partSize))}else k(0)},we.stop=function(){M.d("stopping FileUpload ",we.id),we.cancelled(),i(T),we.info("Canceling uploads..."),u()};var Pe=0,_e=-1}function f(e,t,n){if(e="undefined"==typeof e?{}:e,"object"==typeof n)for(var r in n)t[r]=n[r];for(var a in t)e[a]=t[a];return e}function c(e){var t=new DOMParser;return t.parseFromString(e,"text/xml")}function g(e){var t=JSON.parse(C.getItem("awsUploads")||"{}");if(e){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],o=new Date(r.completedAt||a);o<F&&delete t[n]}C.setItem("awsUploads",JSON.stringify(t))}return t}function m(e){return[e.file.name,e.file.type,t(e.file.lastModifiedDate),e.file.size].join("-")}function h(e,t){var n=g();n[e]=t,C.setItem("awsUploads",JSON.stringify(n))}function y(e){var t=g();delete t[e],C.setItem("awsUploads",JSON.stringify(t))}function v(e,t){return e.getElementsByTagName(t)[0].textContent}var S=0,w=2,b=3,T=5,z=10,I=20,E='"d41d8cd98f00b204e9800998ecf8427e"',P=["maxConcurrentParts","logging","cloudfront","aws_url","encodeFilename","computeContentMd5","allowS3ExistenceOptimization","onlyRetryForSameFileName","timeUrl","cryptoMd5Method","cryptoHexEncodedHash256","aws_key","awsRegion","awsSignatureVersion"],_=this,x=[],M=s(),A=f({bucket:null,logging:!0,maxConcurrentParts:5,partSize:6291456,retryBackoffPower:2,maxRetryBackoffSecs:300,progressIntervalMS:500,cloudfront:!1,s3Acceleration:!1,encodeFilename:!0,computeContentMd5:!1,allowS3ExistenceOptimization:!1,onlyRetryForSameFileName:!1,timeUrl:null,cryptoMd5Method:null,cryptoHexEncodedHash256:null,aws_key:null,awsRegion:null,awsSignatureVersion:"2",s3FileCacheHoursAgo:null,signParams:{},signHeaders:{},awsLambda:null,awsLambdaFunction:null,maxFileSize:null,signResponseHandler:null,xhrWithCredentials:!1,testUnsupported:!1,simulateStalling:!1,simulateErrors:!1},o);if(console&&console.log&&(M=console,M.d=M.log,M.w=console.warn?M.warn:M.d,M.e=console.error?M.error:M.d),this.supported=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof(Blob.prototype.webkitSlice||Blob.prototype.mozSlice||Blob.prototype.slice)||o.testUnsupported),!A.bucket)return void M.e("The AWS 'bucket' option must be present.");if(!this.supported)return void M.e("The browser does not support the necessary features of File and Blob [webkitSlice || mozSlice || slice]");if(A.computeContentMd5){if(this.supported="undefined"!=typeof FileReader.prototype.readAsArrayBuffer,!this.supported)return void M.e("The browser's FileReader object does not support readAsArrayBuffer");if("function"!=typeof A.cryptoMd5Method)return void M.e("Option computeContentMd5 has been set but cryptoMd5Method is not defined.");if("4"===A.awsSignatureVersion&&"function"!=typeof A.cryptoHexEncodedHash256)return void M.e("Option awsSignatureVersion is 4 but cryptoHexEncodedHash256 is not defined.")}else if("4"===A.awsSignatureVersion)return void M.e("Option awsSignatureVersion is 4 but computeContentMd5 is not enabled.");A.logging||(M=s());var H,C={supported:function(){var e=!1;if("undefined"==typeof window)return e;if(!("localStorage"in window))return e;try{localStorage.setItem("___test","OK");var t=localStorage.getItem("___test");localStorage.removeItem("___test"),e="OK"===t}catch(t){return e}return e}(),getItem:function(e){if(this.supported)return localStorage.getItem(e)},setItem:function(e,t){if(this.supported)return localStorage.setItem(e,t)},clear:function(){if(this.supported)return localStorage.clear()},key:function(e){if(this.supported)return localStorage.key(e)},removeItem:function(e){if(this.supported)return localStorage.removeItem(e)}};A.s3Acceleration?(H=["https://",A.bucket,".s3-accelerate.amazonaws.com"].join(""),A.cloudfront=!0):H=A.aws_url||["https://",A.cloudfront?A.bucket+".":"","s3.amazonaws.com"].join("");var R=e(H).hostname,B=new Date,F=new Date(B.setHours(B.getHours()-(A.s3FileCacheHoursAgo||-100))),U=0;if(A.timeUrl){var O=new XMLHttpRequest;O.open("GET",A.timeUrl+"?requestTime="+(new Date).getTime()),O.onreadystatechange=function(){if(4===O.readyState&&200===O.status){var e=new Date(Date.parse(O.responseText)),t=new Date;U=t-e,M.d("localTimeOsset is",U,"ms")}},O.onerror=function(){M.e("xhr error timeUrl",O)},O.send()}_.add=function(e,t){var n=f(t,{});P.map(function(e){delete n[e]});var r=f(A,n);M.d("add");var a;if("undefined"==typeof e)return"Missing file";if(r.maxFileSize&&e.file.size>r.maxFileSize)return"File size too large. Maximum size allowed is "+r.maxFileSize;if("undefined"==typeof e.name?a="Missing attribute: name  ":r.encodeFilename&&(e.name=encodeURIComponent(e.name)),a)return a;var o=i(e,r);return d(),o},_.cancel=function(e){return M.d("cancel ",e),!!x[e]&&(x[e].stop(),!0)},_.pause=function(e){},_.resume=function(e){},_.forceRetry=function(){}};"undefined"!=typeof module&&module.exports?module.exports=o:"undefined"!=typeof window&&(window.Evaporate=o)}();
//# sourceMappingURL=evaporate.min.js.map