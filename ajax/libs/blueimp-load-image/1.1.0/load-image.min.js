(function(h){var e=function(a,b,c){var d=document.createElement("img"),f,g;a instanceof Blob?(f=e.createObjectURL(a),g=!0):f=a;d.onerror=b;d.onload=function(){g&&e.revokeObjectURL(f);b(e.scale(d,c))};return f?(d.src=f,d):e.readFile(a,function(a){d.src=a})};e.scale=function(a,b){var b=b||{},c=document.createElement("canvas"),d=Math.min((b.maxWidth||a.width)/a.width,(b.maxHeight||a.height)/a.height);1<=d&&(d=Math.max((b.minWidth||a.width)/a.width,(b.minHeight||a.height)/a.height));a.width=parseInt(a.width*
d,10);a.height=parseInt(a.height*d,10);if(!b.canvas||!c.getContext)return a;c.width=a.width;c.height=a.height;c.getContext("2d").drawImage(a,0,0,a.width,a.height);return c};e.createObjectURL=function(a){var b="undefined"!==typeof window.createObjectURL&&window||"undefined"!==typeof URL&&URL||"undefined"!==typeof webkitURL&&webkitURL;return b?b.createObjectURL(a):!1};e.revokeObjectURL=function(a){var b="undefined"!==typeof window.revokeObjectURL&&window||"undefined"!==typeof URL&&URL||"undefined"!==
typeof webkitURL&&webkitURL;return b?b.revokeObjectURL(a):!1};e.readFile=function(a,b){if("undefined"!==typeof FileReader&&FileReader.prototype.readAsDataURL){var c=new FileReader;c.onload=function(a){b(a.target.result)};c.readAsDataURL(a);return c}return!1};"undefined"!==typeof define&&define.amd?define("loadImage",function(){return e}):h.loadImage=e})(this);