(function(h){var e=function(a,b,d){var c=document.createElement("img"),f,g;a instanceof Blob?(f=e.createObjectURL(a),g=!0):f=a;c.onerror=b;c.onload=function(){g&&e.revokeObjectURL(f);b(e.scale(c,d))};return f?(c.src=f,c):e.readFile(a,function(a){c.src=a})};e.scale=function(a,b){var b=b||{},d=document.createElement("canvas"),c=Math.max((b.minWidth||a.width)/a.width,(b.minHeight||a.height)/a.height);if(1<c)a.width=parseInt(a.width*c,10),a.height=parseInt(a.height*c,10);c=Math.min((b.maxWidth||a.width)/
a.width,(b.maxHeight||a.height)/a.height);if(1>c)a.width=parseInt(a.width*c,10),a.height=parseInt(a.height*c,10);if(!b.canvas||!d.getContext)return a;d.width=a.width;d.height=a.height;d.getContext("2d").drawImage(a,0,0,a.width,a.height);return d};e.createObjectURL=function(a){var b="undefined"!==typeof window.createObjectURL&&window||"undefined"!==typeof URL&&URL||"undefined"!==typeof webkitURL&&webkitURL;return b?b.createObjectURL(a):!1};e.revokeObjectURL=function(a){var b="undefined"!==typeof window.revokeObjectURL&&
window||"undefined"!==typeof URL&&URL||"undefined"!==typeof webkitURL&&webkitURL;return b?b.revokeObjectURL(a):!1};e.readFile=function(a,b){if("undefined"!==typeof FileReader&&FileReader.prototype.readAsDataURL){var d=new FileReader;d.onload=function(a){b(a.target.result)};d.readAsDataURL(a);return d}return!1};"undefined"!==typeof define&&define.amd?define("loadImage",function(){return e}):h.loadImage=e})(this);