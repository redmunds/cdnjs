(function(g){var b=function(a,c,h){var d=document.createElement("img"),e,f;a instanceof Blob?(e=b.createObjectURL(a),f=!0):e=a;d.onerror=c;d.onload=function(){f&&b.revokeObjectURL(e);c(b.scale(d,h))};return e?(d.src=e,!0):b.readFile(a,function(a){d.src=a})};b.scale=function(a,c){var c=c||{},b=document.createElement("canvas"),d=Math.min((c.maxWidth||a.width)/a.width,(c.maxHeight||a.height)/a.height);1<=d&&(d=Math.max((c.minWidth||a.width)/a.width,(c.minHeight||a.height)/a.height));a.width=parseInt(a.width*
d,10);a.height=parseInt(a.height*d,10);if(!c.canvas||!b.getContext)return a;b.width=a.width;b.height=a.height;b.getContext("2d").drawImage(a,0,0,a.width,a.height);return b};b.createObjectURL=function(a){var c="undefined"!==typeof window.createObjectURL&&window||"undefined"!==typeof URL&&URL||"undefined"!==typeof webkitURL&&webkitURL;return c?c.createObjectURL(a):!1};b.revokeObjectURL=function(a){var c="undefined"!==typeof window.revokeObjectURL&&window||"undefined"!==typeof URL&&URL||"undefined"!==
typeof webkitURL&&webkitURL;return c?c.revokeObjectURL(a):!1};b.readFile=function(a,c){if("undefined"!==typeof FileReader&&FileReader.prototype.readAsDataURL){var b=new FileReader;b.onload=function(a){c(a.target.result)};b.readAsDataURL(a);return!0}return!1};"undefined"!==typeof define&&define.amd?define("loadImage",function(){return b}):g.loadImage=b})(this);