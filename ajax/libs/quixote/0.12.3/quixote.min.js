!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.quixote=t()}}(function(){var t;return function e(t,n,r){function i(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){function r(){p&&l&&(p=!1,l.length?f=l.concat(f):h=-1,f.length&&i())}function i(){if(!p){var t=u(r);p=!0;for(var e=f.length;e;){for(l=f,f=[];++h<e;)l&&l[h].run();h=-1,e=f.length}l=null,p=!1,a(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var u,a,c=e.exports={};!function(){try{u=setTimeout}catch(t){u=function(){throw new Error("setTimeout is not defined")}}try{a=clearTimeout}catch(t){a=function(){throw new Error("clearTimeout is not defined")}}}();var l,f=[],p=!1,h=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new o(t,e)),1!==f.length||p||u(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=s,c.addListener=s,c.once=s,c.off=s,c.removeListener=s,c.removeAllListeners=s,c.emit=s,c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],2:[function(t,e,n){"use strict";var r=t("./util/ensure.js"),i=t("./util/oop.js"),o=t("./util/shim.js"),s=e.exports=function(){r.unreachable("Assertable is abstract and should not be constructed directly.")};s.extend=i.extendFn(s),i.makeAbstract(s,[]),s.prototype.assert=function(t,e){r.signature(arguments,[Object,[void 0,String]]),void 0===e&&(e="Differences found");var n=this.diff(t);if(""!==n)throw new Error(e+":\n"+n+"\n")},s.prototype.diff=function(t){r.signature(arguments,[Object]);for(var e,n,i,s=[],u=o.Object.keys(t),a=0;a<u.length;a++)e=u[a],i=this[e],r.that(void 0!==i,this+" doesn't have a property named '"+e+"'. Did you misspell it?"),n=i.diff(t[e]),""!==n&&s.push(n);return s.join("\n")}},{"./util/ensure.js":23,"./util/oop.js":24,"./util/shim.js":25}],3:[function(t,e,n){"use strict";function r(t){return function(e,n,r){return new a(t,e,n,r)}}var i=t("../util/ensure.js"),o=t("./position_descriptor.js"),s=(t("../values/position.js"),t("./relative_position.js"),"x"),u="y",a=e.exports=function(t,e,n,r){i.signature(arguments,[String,o,o,String]),t===s?o.x(this):t===u?o.y(this):i.unreachable("Unknown dimension: "+t),this._dimension=t,this._position1=e,this._position2=n,this._description=r};o.extend(a),a.x=r(s),a.y=r(u),a.prototype.value=function(){return i.signature(arguments,[]),this._position1.value().midpoint(this._position2.value())},a.prototype.toString=function(){return i.signature(arguments,[]),this._description}},{"../util/ensure.js":23,"../values/position.js":27,"./position_descriptor.js":10,"./relative_position.js":11}],4:[function(t,e,n){"use strict";function r(t,e){var n=typeof e;if(null===e&&(n="null"),"object"===n&&(e instanceof u||e instanceof s))return e;if(void 0===e)throw new Error("Can't compare "+t+" to "+e+". Did you misspell a property name?");if("object"===n)throw new Error("Can't compare "+t+" to "+o.instanceName(e)+" instances.");var r=t.convert(e,n);if(void 0!==r)return r;var i=e;throw"string"===n&&(i="'"+i+"'"),"function"===n&&(i="a function"),new Error("Can't compare "+t+" to "+i+".")}var i=t("../util/ensure.js"),o=t("../util/oop.js"),s=t("../values/value.js"),u=e.exports=function(){i.unreachable("Descriptor is abstract and should not be constructed directly.")};u.extend=o.extendFn(u),o.makeAbstract(u,["value","toString"]),u.prototype.diff=function(t){t=r(this,t);try{var e=this.value(),n=t.value();if(e.equals(n))return"";var i=e.diff(n),o=n.toString();return t instanceof u&&(o+=" ("+t+")"),this+" was "+i+".\n  Expected: "+o+"\n  But was:  "+e}catch(s){throw new Error("Can't compare "+this+" to "+t+": "+s.message)}},u.prototype.convert=function(t,e){},u.prototype.equals=function(t){return!1}},{"../util/ensure.js":23,"../util/oop.js":24,"../values/value.js":30}],5:[function(t,e,n){!function(){"use strict";function n(t){return function(e){return new p(e,t)}}function r(t){return t._element.rendered.value().equals(u.rendered())}var i=t("../util/ensure.js"),o=t("../values/position.js"),s=t("./position_descriptor.js"),u=t("../values/render_state.js"),a="top",c="right",l="bottom",f="left",p=e.exports=function(e,n){var r=t("../q_element.js");i.signature(arguments,[r,String]),n===f||n===c?s.x(this):n===a||n===l?s.y(this):i.unreachable("Unknown position: "+n),this._element=e,this._position=n};s.extend(p),p.top=n(a),p.right=n(c),p.bottom=n(l),p.left=n(f),p.prototype.value=function(){i.signature(arguments,[]);var t=this._element.getRawPosition(),e=t[this._position],n=this._element.frame.getRawScrollPosition();return this._position===c||this._position===f?r(this)?o.x(e+n.x):o.noX():r(this)?o.y(e+n.y):o.noY()},p.prototype.toString=function(){return i.signature(arguments,[]),this._position+" edge of "+this._element}}()},{"../q_element.js":17,"../util/ensure.js":23,"../values/position.js":27,"../values/render_state.js":28,"./position_descriptor.js":10}],6:[function(t,e,n){!function(){"use strict";var n=t("../util/ensure.js"),r=t("../values/render_state.js"),i=t("./descriptor.js"),o=e.exports=function(e){var r=t("../q_element.js");n.signature(arguments,[r]),this._element=e};i.extend(o),o.create=function(t){return new o(t)},o.prototype.value=function(){return this._element.frame.body().toDomElement().contains(this._element.toDomElement())?"none"===this._element.getRawStyle("display")?r.displayNone():r.rendered():r.detached()},o.prototype.toString=function(){return"render status of "+this._element.toString()},o.prototype.convert=function(t,e){if("boolean"===e)return t?r.rendered():r.notRendered();if("string"===e){if("display:none"===t)return r.displayNone();if("detached"===t)return r.detached()}}}()},{"../q_element.js":17,"../util/ensure.js":23,"../values/render_state.js":28,"./descriptor.js":4}],7:[function(t,e,n){!function(){"use strict";function n(t){return function(e){return new l(t,e)}}function r(t){return t._element.rendered.value().equals(u.rendered())}var i=t("../util/ensure.js"),o=t("./size_descriptor.js"),s=t("../values/size.js"),u=t("../values/render_state.js"),a="width",c="height",l=e.exports=function(e,n){var r=t("../q_element.js");i.signature(arguments,[String,r]),i.that(e===a||e===c,"Unrecognized dimension: "+e),this._dimension=e,this._element=n};o.extend(l),l.x=n(a),l.y=n(c),l.prototype.value=function(){if(i.signature(arguments,[]),!r(this))return s.createNone();var t=this._element.getRawPosition();return s.create(t[this._dimension])},l.prototype.toString=function(){return i.signature(arguments,[]),this._dimension+" of "+this._element}}()},{"../q_element.js":17,"../util/ensure.js":23,"../values/render_state.js":28,"../values/size.js":29,"./size_descriptor.js":13}],8:[function(t,e,n){"use strict";function r(t){return function(e){return new f(t,e)}}var i=t("../util/ensure.js"),o=t("./position_descriptor.js"),s=t("../values/position.js"),u="top",a="right",c="bottom",l="left",f=e.exports=function(e,n){var r=t("../q_frame.js");i.signature(arguments,[String,r]),e===l||e===a?o.x(this):e===u||e===c?o.y(this):i.unreachable("Unknown edge: "+e),this._edge=e,this._frame=n};o.extend(f),f.top=r(u),f.right=r(a),f.bottom=r(c),f.left=r(l),f.prototype.value=function(){i.signature(arguments,[]);var t=s.x(0),e=s.y(0);switch(this._edge){case u:return e;case a:return t.plus(this._frame.page().width.value());case c:return e.plus(this._frame.page().height.value());case l:return t;default:i.unreachable()}},f.prototype.toString=function(){switch(i.signature(arguments,[]),this._edge){case u:return"top of page";case a:return"right side of page";case c:return"bottom of page";case l:return"left side of page";default:i.unreachable()}}},{"../q_frame.js":19,"../util/ensure.js":23,"../values/position.js":27,"./position_descriptor.js":10}],9:[function(t,e,n){"use strict";function r(t){return function(e){return new c(t,e)}}var i=t("../util/ensure.js"),o=t("./size_descriptor.js"),s=t("../values/size.js"),u="width",a="height",c=e.exports=function(e,n){var r=t("../q_frame.js");i.signature(arguments,[String,r]),i.that(e===u||e===a,"Unrecognized dimension: "+e),this._dimension=e,this._frame=n};o.extend(c),c.x=r(u),c.y=r(a),c.prototype.value=function(){i.signature(arguments,[]);var t=this._frame.toDomElement().contentDocument,e=t.documentElement,n=t.body,r=Math.max(n.scrollWidth,e.scrollWidth),o=Math.max(n.scrollHeight,e.scrollHeight);return s.create(this._dimension===u?r:o)},c.prototype.toString=function(){return i.signature(arguments,[]),this._dimension+" of page"}},{"../q_frame.js":19,"../util/ensure.js":23,"../values/size.js":29,"./size_descriptor.js":13}],10:[function(t,e,n){"use strict";function r(){return t("./relative_position.js")}function i(t){return function(e){e._pdbc={dimension:t}}}var o=t("../util/ensure.js"),s=t("../util/oop.js"),u=t("./descriptor.js"),a=t("../values/position.js"),c="x",l="y",f=e.exports=function(t){o.signature(arguments,[String]),o.unreachable("PositionDescriptor is abstract and should not be constructed directly.")};u.extend(f),f.extend=s.extendFn(f),f.x=i(c),f.y=i(l),f.prototype.plus=function(t){return this._pdbc.dimension===c?r().right(this,t):r().down(this,t)},f.prototype.minus=function(t){return this._pdbc.dimension===c?r().left(this,t):r().up(this,t)},f.prototype.convert=function(t,e){switch(e){case"number":return this._pdbc.dimension===c?a.x(t):a.y(t);case"string":return"none"===t?this._pdbc.dimension===c?a.noX():a.noY():void 0;default:return}}},{"../util/ensure.js":23,"../util/oop.js":24,"../values/position.js":27,"./descriptor.js":4,"./relative_position.js":11}],11:[function(t,e,n){"use strict";function r(t,e){return function(n,r){return new h(t,e,n,r)}}var i=t("../util/ensure.js"),o=(t("../values/position.js"),t("./descriptor.js")),s=t("./position_descriptor.js"),u=t("../values/value.js"),a=t("../values/size.js"),c=(t("../values/pixels.js"),t("./element_size.js"),"x"),l="y",f=1,p=-1,h=e.exports=function(t,e,n,r){i.signature(arguments,[String,Number,o,[Number,o,u]]),t===c?s.x(this):t===l?s.y(this):i.unreachable("Unknown dimension: "+t),this._dimension=t,this._direction=e,this._relativeTo=n,"number"==typeof r?(0>r&&(this._direction*=-1),this._amount=a.create(Math.abs(r))):this._amount=r};s.extend(h),h.right=r(c,f),h.down=r(l,f),h.left=r(c,p),h.up=r(l,p),h.prototype.value=function(){i.signature(arguments,[]);var t=this._relativeTo.value(),e=this._amount.value();return this._direction===f?t.plus(e):t.minus(e)},h.prototype.toString=function(){i.signature(arguments,[]);var t=this._relativeTo.toString();if(this._amount.equals(a.create(0)))return t;var e=this._amount.toString();return e+=this._dimension===c?this._direction===f?" to right of ":" to left of ":this._direction===f?" below ":" above ",e+t}},{"../util/ensure.js":23,"../values/pixels.js":26,"../values/position.js":27,"../values/size.js":29,"../values/value.js":30,"./descriptor.js":4,"./element_size.js":7,"./position_descriptor.js":10}],12:[function(t,e,n){"use strict";function r(t){return function(e,n){return new f(t,e,n)}}var i=t("../util/ensure.js"),o=t("../values/size.js"),s=t("./descriptor.js"),u=t("./size_descriptor.js"),a=t("../values/value.js"),c=(t("./size_multiple.js"),1),l=-1,f=e.exports=function(t,e,n){i.signature(arguments,[Number,s,[Number,s,a]]),this._direction=t,this._relativeTo=e,"number"==typeof n?(this._amount=o.create(Math.abs(n)),0>n&&(this._direction*=-1)):this._amount=n};u.extend(f),f.larger=r(c),f.smaller=r(l),f.prototype.value=function(){i.signature(arguments,[]);var t=this._relativeTo.value(),e=this._amount.value();return this._direction===c?t.plus(e):t.minus(e)},f.prototype.toString=function(){i.signature(arguments,[]);var t=this._relativeTo.toString();if(this._amount.equals(o.create(0)))return t;var e=this._amount.toString();return e+=this._direction===c?" larger than ":" smaller than ",e+t}},{"../util/ensure.js":23,"../values/size.js":29,"../values/value.js":30,"./descriptor.js":4,"./size_descriptor.js":13,"./size_multiple.js":14}],13:[function(t,e,n){"use strict";function r(){return t("./relative_size.js")}function i(){return t("./size_multiple.js")}var o=t("../util/ensure.js"),s=t("../util/oop.js"),u=t("./descriptor.js"),a=t("../values/size.js"),c=e.exports=function(){o.unreachable("SizeDescriptor is abstract and should not be constructed directly.")};u.extend(c),c.extend=s.extendFn(c),c.prototype.plus=function(t){return r().larger(this,t)},c.prototype.minus=function(t){return r().smaller(this,t)},c.prototype.times=function(t){return i().create(this,t)},c.prototype.convert=function(t,e){switch(e){case"number":return a.create(t);case"string":return"none"===t?a.createNone():void 0;default:return}}},{"../util/ensure.js":23,"../util/oop.js":24,"../values/size.js":29,"./descriptor.js":4,"./relative_size.js":12,"./size_multiple.js":14}],14:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./descriptor.js"),o=t("./size_descriptor.js"),s=(t("../values/size.js"),e.exports=function(t,e){r.signature(arguments,[i,Number]),this._relativeTo=t,this._multiple=e});o.extend(s),s.create=function(t,e){return new s(t,e)},s.prototype.value=function(){return r.signature(arguments,[]),this._relativeTo.value().times(this._multiple)},s.prototype.toString=function(){r.signature(arguments,[]);var t=this._multiple,e=this._relativeTo.toString();if(1===t)return e;var n;switch(t){case.5:n="half of ";break;case 1/3:n="one-third of ";break;case 2/3:n="two-thirds of ";break;case.25:n="one-quarter of ";break;case.75:n="three-quarters of ";break;case.2:n="one-fifth of ";break;case.4:n="two-fifths of ";break;case.6:n="three-fifths of ";break;case.8:n="four-fifths of ";break;case 1/6:n="one-sixth of ";break;case 5/6:n="five-sixths of ";break;case 1/8:n="one-eighth of ";break;case 3/8:n="three-eighths of ";break;case 5/8:n="five-eighths of ";break;case 7/8:n="seven-eighths of ";break;default:n=t>1?t+" times ":100*t+"% of "}return n+e}},{"../util/ensure.js":23,"../values/size.js":29,"./descriptor.js":4,"./size_descriptor.js":13}],15:[function(t,e,n){"use strict";function r(t){return function(e){return new f(t,e)}}var i=t("../util/ensure.js"),o=t("./position_descriptor.js"),s=t("../values/position.js"),u="top",a="right",c="bottom",l="left",f=e.exports=function(e,n){var r=t("../q_frame.js");i.signature(arguments,[String,r]),e===l||e===a?o.x(this):e===u||e===c?o.y(this):i.unreachable("Unknown position: "+e),this._position=e,this._frame=n};o.extend(f),f.top=r(u),f.right=r(a),f.bottom=r(c),f.left=r(l),f.prototype.value=function(){i.signature(arguments,[]);var t=this._frame.getRawScrollPosition(),e=s.x(t.x),n=s.y(t.y);switch(this._position){case u:return n;case a:return e.plus(this._frame.viewport().width.value());case c:return n.plus(this._frame.viewport().height.value());case l:return e;default:i.unreachable()}},f.prototype.toString=function(){return i.signature(arguments,[]),this._position+" edge of viewport"}},{"../q_frame.js":19,"../util/ensure.js":23,"../values/position.js":27,"./position_descriptor.js":10}],16:[function(t,e,n){"use strict";function r(t){return function(e){return new c(t,e)}}var i=t("../util/ensure.js"),o=t("./size_descriptor.js"),s=t("../values/size.js"),u=(t("./relative_size.js"),t("./size_multiple.js"),"x"),a="y",c=e.exports=function(t,e){i.signature(arguments,[String,Object]),i.that(t===u||t===a,"Unrecognized dimension: "+t),this._dimension=t,this._frame=e};o.extend(c),c.x=r(u),c.y=r(a),c.prototype.value=function(){i.signature(arguments,[]);var t=this._frame.get("html").toDomElement(),e=this._dimension===u?t.clientWidth:t.clientHeight;return s.create(e)},c.prototype.toString=function(){i.signature(arguments,[]);var t=this._dimension===u?"width":"height";return t+" of viewport"}},{"../util/ensure.js":23,"../values/size.js":29,"./relative_size.js":12,"./size_descriptor.js":13,"./size_multiple.js":14}],17:[function(t,e,n){!function(){"use strict";var n=t("./util/ensure.js"),r=t("./util/shim.js"),i=t("../vendor/camelcase-1.0.1-modified.js"),o=t("./descriptors/element_rendered.js"),s=t("./descriptors/element_edge.js"),u=t("./descriptors/center.js"),a=t("./descriptors/element_size.js"),c=t("./assertable.js"),l=e.exports=function(e,r,i){var c=t("./q_frame.js");n.signature(arguments,[Object,c,String]),this._domElement=e,this._nickname=i,this.frame=r,this.rendered=o.create(this),this.top=s.top(this),this.right=s.right(this),this.bottom=s.bottom(this),this.left=s.left(this),this.center=u.x(this.left,this.right,"center of '"+i+"'"),this.middle=u.y(this.top,this.bottom,"middle of '"+i+"'"),this.width=a.x(this),this.height=a.y(this)};c.extend(l),l.prototype.getRawStyle=function(t){n.signature(arguments,[String]);var e,r;return window.getComputedStyle?(e=this.frame.toDomElement().contentWindow.getComputedStyle(this._domElement),r=e.getPropertyValue(t)):(e=this._domElement.currentStyle,r=e[i(t)]),null!==r&&void 0!==r||(r=""),r},l.prototype.getRawPosition=function(){n.signature(arguments,[]);var t=this._domElement.getBoundingClientRect();return{left:t.left,right:t.right,width:void 0!==t.width?t.width:t.right-t.left,top:t.top,bottom:t.bottom,height:void 0!==t.height?t.height:t.bottom-t.top}},l.prototype.remove=function(){r.Element.remove(this._domElement)},l.prototype.toDomElement=function(){return n.signature(arguments,[]),this._domElement},l.prototype.toString=function(){return n.signature(arguments,[]),"'"+this._nickname+"'"},l.prototype.equals=function(t){return n.signature(arguments,[l]),this._domElement===t._domElement}}()},{"../vendor/camelcase-1.0.1-modified.js":32,"./assertable.js":2,"./descriptors/center.js":3,"./descriptors/element_edge.js":5,"./descriptors/element_rendered.js":6,"./descriptors/element_size.js":7,"./q_frame.js":19,"./util/ensure.js":23,"./util/shim.js":25}],18:[function(t,e,n){"use strict";var r=t("./util/ensure.js"),i=t("./q_element.js"),o=e.exports=function(e,n,i){var o=t("./q_frame.js");r.signature(arguments,[Object,o,String]),this._nodeList=e,this._frame=n,this._nickname=i};o.prototype.length=function(){return r.signature(arguments,[]),this._nodeList.length},o.prototype.at=function(t,e){r.signature(arguments,[Number,[void 0,String]]);var n=t,o=this.length();0>n&&(n=o+n),r.that(n>=0&&o>n,"'"+this._nickname+"'["+t+"] is out of bounds; list length is "+o);var s=this._nodeList[n];return void 0===e&&(e=this._nickname+"["+n+"]"),new i(s,this._frame,e)},o.prototype.toString=function(){return r.signature(arguments,[]),"'"+this._nickname+"' list"}},{"./q_element.js":17,"./q_frame.js":19,"./util/ensure.js":23}],19:[function(t,e,n){!function(){"use strict";function n(t,e,n,r,i){t._loaded=!0,t._document=t._domElement.contentDocument,t._originalBody=t._document.body.innerHTML,t._originalWidth=e,t._originalHeight=n,t._originalSrc=r,t._originalStylesheets=i}function r(t,e){t._frameLoadCallback=e}function i(t,e){function n(t,e){return new Error("404 error while loading "+t+" ("+e+")")}if(!o(t))return n("src",t);for(var r=0;r<e.length;r++){var i=e[r];if(!o(i))return n("stylesheet",i)}return null}function o(t){if(void 0===t)return!0;var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),404!==e.status}function s(t,e,n){var r=document.createElement("iframe");return r.setAttribute("width",e),r.setAttribute("height",n),r.setAttribute("frameborder","0"),t.appendChild(r),r}function u(t,e){void 0===e?c(t):a(t,e)}function a(t,e){t.setAttribute("src",e)}function c(t){var e="<!DOCTYPE html>\n<html><head></head><body></body></html>";t.contentWindow.document.open(),t.contentWindow.document.write(e),t.contentWindow.document.close()}function l(t,e,n){function r(e,n){var r=document.createElement("link");m.EventTarget.addEventListener(r,"load",function(t){n(null)}),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e),m.Document.head(t._document).appendChild(r)}j.each(e,r,n)}function f(t){p(t),h(t)}function p(t){d.that(t._loaded,"QFrame not loaded: Wait for frame creation callback to execute before using frame")}function h(t){d.that(!t._removed,"Attempted to use frame after it was removed")}var d=t("./util/ensure.js"),m=t("./util/shim.js"),v=(t("./quixote.js"),t("./q_element.js")),g=t("./q_element_list.js"),y=t("./q_viewport.js"),_=t("./q_page.js"),j=t("../vendor/async-1.4.2.js"),b=e.exports=function(t){d.signature(arguments,[Object]),d.that("IFRAME"===t.tagName,"QFrame DOM element must be an iframe"),this._domElement=t,this._loaded=!1,this._removed=!1};b.create=function(t,e,o){function a(){setTimeout(function(){n(y,c,f,p,h),l(y,h,function(){y._frameLoadCallback(null,y)})},0)}d.signature(arguments,[Object,[Object,Function],[void 0,Function]]),void 0===o&&(o=e,e={});var c=e.width||2e3,f=e.height||2e3,p=e.src,h=e.stylesheet||[];m.Array.isArray(h)||(h=[h]);var v=i(p,h);if(v)return o(v);var g=s(t,c,f);m.EventTarget.addEventListener(g,"load",a),u(g,p);var y=new b(g);return r(y,o),y},b.prototype.reset=function(){d.signature(arguments,[]),f(this),this._document.body.innerHTML=this._originalBody,this.scroll(0,0),this.resize(this._originalWidth,this._originalHeight)},b.prototype.reload=function(t){d.signature(arguments,[Function]),f(this);var e=this,n=this._domElement,i=this._originalSrc;this.resize(this._originalWidth,this._originalHeight),r(e,t),u(n,i)},b.prototype.toDomElement=function(){return d.signature(arguments,[]),h(this),this._domElement},b.prototype.remove=function(){d.signature(arguments,[]),p(this),this._removed||(this._domElement.parentNode.removeChild(this._domElement),this._removed=!0)},b.prototype.viewport=function(){return d.signature(arguments,[]),f(this),new y(this)},b.prototype.page=function(){return d.signature(arguments,[]),f(this),new _(this)},b.prototype.body=function(){return d.signature(arguments,[]),this.get("body")},b.prototype.add=function(t,e){d.signature(arguments,[String,[void 0,String]]),void 0===e&&(e=t),f(this);var n=document.createElement("div");n.innerHTML=m.String.trim(t),d.that(1===n.childNodes.length,"Expected one element, but got "+n.childNodes.length+" ("+t+")");var r=n.childNodes[0];return this._document.body.appendChild(r),new v(r,this,e)},b.prototype.get=function(t,e){d.signature(arguments,[String,[void 0,String]]),void 0===e&&(e=t),f(this);var n=this._document.querySelectorAll(t);return d.that(1===n.length,"Expected one element to match '"+t+"', but found "+n.length),new v(n[0],this,e)},b.prototype.getAll=function(t,e){return d.signature(arguments,[String,[void 0,String]]),void 0===e&&(e=t),new g(this._document.querySelectorAll(t),this,e)},b.prototype.scroll=function(t,e){d.signature(arguments,[Number,Number]),this._domElement.contentWindow.scroll(t,e)},b.prototype.getRawScrollPosition=function(){return d.signature(arguments,[]),{x:m.Window.pageXOffset(this._domElement.contentWindow,this._document),y:m.Window.pageYOffset(this._domElement.contentWindow,this._document)}},b.prototype.resize=function(t,e){d.signature(arguments,[Number,Number]),this._domElement.setAttribute("width",""+t),this._domElement.setAttribute("height",""+e)}}()},{"../vendor/async-1.4.2.js":31,"./q_element.js":17,"./q_element_list.js":18,"./q_page.js":20,"./q_viewport.js":21,"./quixote.js":22,"./util/ensure.js":23,"./util/shim.js":25}],20:[function(t,e,n){"use strict";var r=t("./util/ensure.js"),i=t("./descriptors/page_size.js"),o=t("./descriptors/page_edge.js"),s=t("./descriptors/center.js"),u=t("./assertable.js"),a=e.exports=function(e){var n=t("./q_frame.js");r.signature(arguments,[n]),this.width=i.x(e),this.height=i.y(e),this.top=o.top(e),this.right=o.right(e),this.bottom=o.bottom(e),this.left=o.left(e),this.center=s.x(this.left,this.right,"center of page"),this.middle=s.y(this.top,this.bottom,"middle of page")};u.extend(a)},{"./assertable.js":2,"./descriptors/center.js":3,"./descriptors/page_edge.js":8,"./descriptors/page_size.js":9,"./q_frame.js":19,"./util/ensure.js":23}],21:[function(t,e,n){"use strict";var r=t("./util/ensure.js"),i=t("./descriptors/viewport_size.js"),o=t("./descriptors/viewport_edge.js"),s=t("./descriptors/center.js"),u=t("./assertable.js"),a=e.exports=function(e){var n=t("./q_frame.js");r.signature(arguments,[n]),this.width=i.x(e),this.height=i.y(e),this.top=o.top(e),this.right=o.right(e),this.bottom=o.bottom(e),this.left=o.left(e),this.center=s.x(this.left,this.right,"center of viewport"),this.middle=s.y(this.top,this.bottom,"middle of viewport")};u.extend(a)},{"./assertable.js":2,"./descriptors/center.js":3,"./descriptors/viewport_edge.js":15,"./descriptors/viewport_size.js":16,"./q_frame.js":19,"./util/ensure.js":23}],22:[function(t,e,n){"use strict";function r(t){return function(){u.signature(arguments,[]);var e=l[t];return u.that(void 0!==e,"Must create a frame before using Quixote browser feature detection."),e}}function i(t){var e=1500,n=200;l={};var r=a.create(document.body,{width:e,height:n},function(n){if(n)return console.log("Error while creating Quixote browser feature detection frame: "+n),t();try{l.enlargesFrame=o(r,e),r.reset(),s(r,e,function(e){return l.enlargesFonts=e,r.remove(),t()})}catch(i){console.log("Error during Quixote browser feature detection: "+i)}})}function o(t,e){return t.add("<div style='width: "+(e+200)+"px'>force scrolling</div>"),!t.viewport().width.value().equals(c.create(e))}function s(t,e,n){u.that(e>=1500,"Detector frame width must be larger than screen to detect font enlargement"),t.add("<div><style>p { font-size: 15px; }</style></div>");var r=t.add("<p>arbitrary text</p>");t.add("<p>must have two p tags to work</p>");r.offsetHeight;setTimeout(function(){var t=r.getRawStyle("font-size");return u.that(""!==t,"Expected font-size to be a value"),n("12pt"===t?!1:"15px"!==t)},0)}var u=t("./util/ensure.js"),a=t("./q_frame.js"),c=t("./values/size.js"),l=null;n.createFrame=function(t,e){return a.create(document.body,t,function(t,n){null===l?i(function(){e(t,n)}):e(t,n)})},n.browser={},n.browser.enlargesFrameToPageSize=r("enlargesFrame"),n.browser.enlargesFonts=r("enlargesFonts")},{"./q_frame.js":19,"./util/ensure.js":23,"./values/size.js":29}],23:[function(t,e,n){"use strict";function r(t,e){function r(t,e){switch(s(e)){case"boolean":return t===Boolean;case"string":return t===String;case"number":return t===Number;case"array":return t===Array;case"function":return t===Function;case"object":return t===Object||e instanceof t;case"undefined":return void 0===t;case"null":return null===t;case"NaN":return isNaN(t);default:n.unreachable()}}for(var i=0;i<t.length;i++)if(r(t[i],e))return!0;return!1}function i(t){function e(t){switch(t){case Boolean:return"boolean";case String:return"string";case Number:return"number";case Array:return"array";case Function:return"function";case null:return"null";default:return"number"==typeof t&&isNaN(t)?"NaN":a.className(t)+" instance"}}for(var n="",r="",i=0;i<t.length;i++)r+=n+e(t[i]),n=i===t.length-2?", or ":", ";return r}function o(t){var e=s(t);return"object"!==e?e:a.instanceName(t)+" instance"}function s(t){var e=typeof t;return null===t&&(e="null"),u.Array.isArray(t)&&(e="array"),"number"===e&&isNaN(t)&&(e="NaN"),e}var u=t("./shim.js"),a=t("./oop.js");n.that=function(t,e){if(void 0===e&&(e="Expected condition to be true"),t===!1)throw new c(n.that,e);if(t!==!0)throw new c(n.that,"Expected condition to be true or false")},n.unreachable=function(t){throw t||(t="Unreachable code executed"),new c(n.unreachable,t)},n.signature=function(t,e){e=e||[];var s=e.length,a=t.length;if(a>s)throw new c(n.signature,"Function called with too many arguments: expected "+s+" but got "+a);for(var l,f,p,h=0;h<e.length;h++)if(l=e[h],f=t[h],p="Argument "+h,u.Array.isArray(l)||(l=[l]),!r(l,f,p)){var d=p+" expected "+i(l)+", but was ";throw new c(n.signature,d+o(f))}};var c=n.EnsureException=function(t,e){Error.captureStackTrace?Error.captureStackTrace(this,t):this.stack=(new Error).stack,this.message=e};c.prototype=u.Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.name="EnsureException"},{"./oop.js":24,"./shim.js":25}],24:[function(t,e,n){"use strict";var r=t("./shim.js");n.className=function(t){if("function"!=typeof t)throw new Error("Not a constructor");return r.Function.name(t)},n.instanceName=function(t){var e=r.Object.getPrototypeOf(t);if(null===e)return"<no prototype>";var n=e.constructor;return void 0===n||null===n?"<anon>":r.Function.name(n)},n.extendFn=function(t){return function(e){e.prototype=r.Object.create(t.prototype),e.prototype.constructor=e}},n.makeAbstract=function(t,e){var n=r.Function.name(t);r.Array.forEach(e,function(e){t.prototype[e]=function(){throw new Error(n+" subclasses must implement "+e+"() method")}}),t.prototype.checkAbstractMethods=function(){var n=[],i=this;return r.Array.forEach(e,function(e){i[e]===t.prototype[e]&&n.push(e+"()")}),n}}},{"./shim.js":25}],25:[function(t,e,n){"use strict";n.Array={isArray:function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},forEach:function(t,e,n){if(Array.prototype.forEach)return t.forEach(e,n);var r,i;if(null==t)throw new TypeError(" this is null or not defined");var o=Object(t),s=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(r=n),i=0;s>i;){var u;i in o&&(u=o[i],e.call(r,u,i,o)),i++}}},n.Element={remove:function(t){t.parentNode.removeChild(t)}},n.EventTarget={addEventListener:function(t,e,n){return t.addEventListener?t.addEventListener(e,n):void t.attachEvent("on"+e,n)}},n.Document={head:function(t){return t.head?t.head:t.querySelector("head")}},n.Function={name:function(t){if(t.name)return t.name;var e=/function\s+(.{1,})\s*\(/,n=e.exec(t.toString());return n&&n.length>1?n[1]:"<anon>"}},n.Object={create:function(t){if(Object.create)return Object.create(t);var e=function(){};return e.prototype=t,new e},getPrototypeOf:function(t){if(Object.getPrototypeOf)return Object.getPrototypeOf(t);var e=t.constructor?t.constructor.prototype:null;return e||null},keys:function(t){if(Object.keys)return Object.keys(t);var e=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=r.length;if("object"!=typeof t&&("function"!=typeof t||null===t))throw new TypeError("Object.keys called on non-object");var o,s,u=[];for(o in t)e.call(t,o)&&u.push(o);if(n)for(s=0;i>s;s++)e.call(t,r[s])&&u.push(r[s]);return u}},n.String={trim:function(t){return void 0!==t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},n.Window={pageXOffset:function(t,e){if(void 0!==t.pageXOffset)return t.pageXOffset;var n="CSS1Compat"===(e.compatMode||"");return n?e.documentElement.scrollLeft:e.body.scrollLeft},pageYOffset:function(t,e){if(void 0!==t.pageYOffset)return t.pageYOffset;var n="CSS1Compat"===(e.compatMode||"");return n?e.documentElement.scrollTop:e.body.scrollTop}}},{}],26:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./value.js"),o=e.exports=function(t){r.signature(arguments,[[Number,null]]),this._none=null===t,this._amount=t};i.extend(o),o.create=function(t){return new o(t)},o.createNone=function(){return new o(null)},o.ZERO=o.create(0),o.NONE=o.createNone(),o.prototype.compatibility=function(){return[o]},o.prototype.plus=i.safe(function(t){return this._none||t._none?o.createNone():new o(this._amount+t._amount)}),o.prototype.minus=i.safe(function(t){
return this._none||t._none?o.createNone():new o(this._amount-t._amount)}),o.prototype.times=function(t){return r.signature(arguments,[Number]),this._none?o.createNone():new o(this._amount*t)},o.prototype.average=i.safe(function(t){return this._none||t._none?o.createNone():new o((this._amount+t._amount)/2)}),o.prototype.compare=i.safe(function(t){var e=!this._none&&!t._none,n=this._none&&t._none,r=!this._none&&t._none;if(e){var i=this._amount-t._amount;return Math.abs(i)<=.5?0:i}return n?0:r?1:-1}),o.max=function(t,e){return r.signature(arguments,[o,o]),t.compare(e)>=0?t:e},o.min=function(t,e){return r.signature(arguments,[o,o]),t.compare(e)<=0?t:e},o.prototype.diff=i.safe(function(t){if(0===this.compare(t))return"";if(this._none||t._none)return"non-measurable";var e=Math.abs(this._amount-t._amount),n=e;return 100*e!==Math.floor(100*e)&&(n="about "+e.toFixed(2)),n+"px"}),o.prototype.toString=function(){return r.signature(arguments,[]),this._none?"no pixels":this._amount+"px"}},{"../util/ensure.js":23,"./value.js":30}],27:[function(t,e,n){"use strict";function r(t,e){e instanceof f&&o.that(t._dimension===e._dimension,"Can't compare X coordinate to Y coordinate")}function i(t){return t._value.equals(u.NONE)}var o=t("../util/ensure.js"),s=t("./value.js"),u=t("./pixels.js"),a=t("./size.js"),c="x",l="y",f=e.exports=function(t,e){o.signature(arguments,[String,[Number,u]]),this._dimension=t,this._value="number"==typeof e?u.create(e):e};s.extend(f),f.x=function(t){return o.signature(arguments,[[Number,u]]),new f(c,t)},f.y=function(t){return o.signature(arguments,[[Number,u]]),new f(l,t)},f.noX=function(){return o.signature(arguments,[]),new f(c,u.NONE)},f.noY=function(){return o.signature(arguments,[]),new f(l,u.NONE)},f.prototype.compatibility=function(){return[f,a]},f.prototype.plus=s.safe(function(t){return r(this,t),new f(this._dimension,this._value.plus(t.toPixels()))}),f.prototype.minus=s.safe(function(t){return r(this,t),new f(this._dimension,this._value.minus(t.toPixels()))}),f.prototype.midpoint=s.safe(function(t){return r(this,t),new f(this._dimension,this._value.average(t.toPixels()))}),f.prototype.diff=s.safe(function(t){r(this,t);var e=this._value,n=t._value;if(e.equals(n))return"";if(i(t)&&!i(this))return"rendered when not expected";if(!i(t)&&i(this))return"not rendered";var o,s=e.compare(n);return o=this._dimension===c?0>s?"further left than expected":"further right than expected":0>s?"higher than expected":"lower than expected",e.diff(n)+" "+o}),f.prototype.toString=function(){return o.signature(arguments,[]),i(this)?"not rendered":this._value.toString()},f.prototype.toPixels=function(){return o.signature(arguments,[]),this._value}},{"../util/ensure.js":23,"./pixels.js":26,"./size.js":29,"./value.js":30}],28:[function(t,e,n){!function(){"use strict";var n=t("../util/ensure.js"),r=t("./value.js"),i="rendered",o="not rendered",s="not rendered due to display:none property",u="not rendered due to being detached from DOM",a=e.exports=function(t){n.signature(arguments,[String]),this._state=t};r.extend(a),a.rendered=function(){return new a(i)},a.notRendered=function(){return new a(o)},a.displayNone=function(){return new a(s)},a.detached=function(){return new a(u)},a.prototype.compatibility=function(){return[a]},a.prototype.diff=r.safe(function(t){var e=this._state,n=t._state;return e===n?"":e===i?"different than expected":n===i?"different than expected":e===o||n===o?"":"achieved differently than expected"}),a.prototype.toString=function(){return this._state}}()},{"../util/ensure.js":23,"./value.js":30}],29:[function(t,e,n){"use strict";function r(t){return t._value.equals(s.NONE)}var i=t("../util/ensure.js"),o=t("./value.js"),s=t("./pixels.js"),u=e.exports=function(t){i.signature(arguments,[[Number,s]]),this._value="number"==typeof t?s.create(t):t};o.extend(u),u.create=function(t){return new u(t)},u.createNone=function(){return i.signature(arguments,[]),new u(s.NONE)},u.prototype.compatibility=function(){return[u]},u.prototype.plus=o.safe(function(t){return new u(this._value.plus(t._value))}),u.prototype.minus=o.safe(function(t){return new u(this._value.minus(t._value))}),u.prototype.times=function(t){return new u(this._value.times(t))},u.prototype.compare=o.safe(function(t){return this._value.compare(t._value)}),u.prototype.diff=o.safe(function(t){var e=this._value,n=t._value;if(e.equals(n))return"";if(r(t)&&!r(this))return"rendered when not expected";if(!r(t)&&r(this))return"not rendered";var i=e.compare(n)>0?" larger than expected":" smaller than expected";return e.diff(n)+i}),u.prototype.toString=function(){return i.signature(arguments,[]),r(this)?"not rendered":this._value.toString()},u.prototype.toPixels=function(){return i.signature(arguments,[]),this._value}},{"../util/ensure.js":23,"./pixels.js":26,"./value.js":30}],30:[function(t,e,n){"use strict";function r(t,e,n){for(var r,o=0;o<n.length;o++)r=n[o],i(t,e,r)}function i(t,e,n){function r(e){throw new Error(s.instanceName(t)+" isn't compatible with "+e)}var i=typeof n;null===n&&(i="null"),"object"!==i&&r(i);for(var o=0;o<e.length;o++)if(n instanceof e[o])return;r(s.instanceName(n))}var o=t("../util/ensure.js"),s=t("../util/oop.js"),u=(t("../util/shim.js"),e.exports=function(){});u.extend=s.extendFn(u),s.makeAbstract(u,["compatibility","diff","toString"]),u.safe=function(t){return function(){return r(this,this.compatibility(),arguments),t.apply(this,arguments)}},u.prototype.value=function(){return o.signature(arguments,[]),this},u.prototype.equals=function(t){return""===this.diff(t)}},{"../util/ensure.js":23,"../util/oop.js":24,"../util/shim.js":25}],31:[function(e,n,r){(function(e,r){!function(){function i(){}function o(t){return t}function s(t){return!!t}function u(t){return!t}function a(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function c(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}function l(t){return R(t)||"number"==typeof t.length&&t.length>=0&&t.length%1===0}function f(t,e){return l(t)?p(t,e):v(t,e)}function p(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n,t)}function h(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function d(t){return h(Array(t),function(t,e){return e})}function m(t,e,n){return p(t,function(t,r,i){n=e(n,t,r,i)}),n}function v(t,e){p(U(t),function(n){e(t[n],n)})}function g(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function y(t){var e,n,r=-1;return l(t)?(e=t.length,function(){return r++,e>r?r:null}):(n=U(t),e=n.length,function(){return r++,e>r?n[r]:null})}function _(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;n>i;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function j(t){return function(e,n,r){return t(e,r)}}function b(t){return function(e,n,r){r=c(r||i),e=e||[];var o=y(e);if(0>=t)return r(null);var s=!1,u=0,l=!1;!function f(){if(s&&0>=u)return r(null);for(;t>u&&!l;){var i=o();if(null===i)return s=!0,void(0>=u&&r(null));u+=1,n(e[i],i,a(function(t){u-=1,t?(r(t),l=!0):f()}))}}()}}function w(t){return function(e,n,r){return t(M.eachOf,e,n,r)}}function x(t){return function(e,n,r,i){return t(b(n),e,r,i)}}function E(t){return function(e,n,r){return t(M.eachOfSeries,e,n,r)}}function S(t,e,n,r){r=c(r||i);var o=[];t(e,function(t,e,r){n(t,function(t,n){o[e]=n,r(t)})},function(t){r(t,o)})}function k(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(n){n&&i.push({index:e,value:t}),r()})},function(){r(h(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function O(t,e,n,r){k(t,e,function(t,e){n(t,function(t){e(!t)})},r)}function N(t,e,n){return function(r,i,o,s){function u(){s&&s(n(!1,void 0))}function a(t,r,i){return s?void o(t,function(r){s&&e(r)&&(s(n(!0,t)),s=o=!1),i()}):i()}arguments.length>3?t(r,i,a,u):(s=o,o=i,t(r,a,u))}}function q(t,e){return e}function z(t,e,n){n=n||i;var r=l(e)?[]:{};t(e,function(t,e,n){t(_(function(t,i){i.length<=1&&(i=i[0]),r[e]=i,n(t)}))},function(t){n(t,r)})}function A(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(t,e){i=i.concat(e||[]),r(t)})},function(t){r(t,i)})}function L(t,e,n){function r(t,e,n,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");return t.started=!0,R(e)||(e=[e]),0===e.length&&t.idle()?M.setImmediate(function(){t.drain()}):(p(e,function(e){var o={data:e,callback:r||i};n?t.tasks.unshift(o):t.tasks.push(o),t.tasks.length===t.concurrency&&t.saturated()}),void M.setImmediate(t.process))}function o(t,e){return function(){s-=1;var n=arguments;p(e,function(t){t.callback.apply(t,n)}),t.tasks.length+s===0&&t.drain(),t.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var s=0,u={tasks:[],concurrency:e,payload:n,saturated:i,empty:i,drain:i,started:!1,paused:!1,push:function(t,e){r(u,t,!1,e)},kill:function(){u.drain=i,u.tasks=[]},unshift:function(t,e){r(u,t,!0,e)},process:function(){if(!u.paused&&s<u.concurrency&&u.tasks.length)for(;s<u.concurrency&&u.tasks.length;){var e=u.payload?u.tasks.splice(0,u.payload):u.tasks.splice(0,u.tasks.length),n=h(e,function(t){return t.data});0===u.tasks.length&&u.empty(),s+=1;var r=a(o(u,e));t(n,r)}},length:function(){return u.tasks.length},running:function(){return s},idle:function(){return u.tasks.length+s===0},pause:function(){u.paused=!0},resume:function(){if(u.paused!==!1){u.paused=!1;for(var t=Math.min(u.concurrency,u.tasks.length),e=1;t>=e;e++)M.setImmediate(u.process)}}};return u}function T(t){return _(function(e,n){e.apply(null,n.concat([_(function(e,n){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&p(n,function(e){console[t](e)}))})]))})}function F(t){return function(e,n,r){t(d(e),n,r)}}function C(t){return _(function(e,n){var r=_(function(n){var r=this,i=n.pop();return t(e,function(t,e,i){t.apply(r,n.concat([i]))},i)});return n.length?r.apply(this,n):r})}function D(t){return _(function(e){var n=e.pop();e.push(function(){var t=arguments;r?M.setImmediate(function(){n.apply(null,t)}):n.apply(null,t)});var r=!0;t.apply(this,e),r=!1})}var P,M={},I="object"==typeof self&&self.self===self&&self||"object"==typeof r&&r.global===r&&r||this;null!=I&&(P=I.async),M.noConflict=function(){return I.async=P,M};var W=Object.prototype.toString,R=Array.isArray||function(t){return"[object Array]"===W.call(t)},H=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},U=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},X="function"==typeof setImmediate&&setImmediate,Y=X?function(t){X(t)}:function(t){setTimeout(t,0)};"object"==typeof e&&"function"==typeof e.nextTick?M.nextTick=e.nextTick:M.nextTick=Y,M.setImmediate=X?Y:M.nextTick,M.forEach=M.each=function(t,e,n){return M.eachOf(t,j(e),n)},M.forEachSeries=M.eachSeries=function(t,e,n){return M.eachOfSeries(t,j(e),n)},M.forEachLimit=M.eachLimit=function(t,e,n,r){return b(e)(t,j(n),r)},M.forEachOf=M.eachOf=function(t,e,n){function r(t){t?n(t):(s+=1,s>=o&&n(null))}n=c(n||i),t=t||[];var o=l(t)?t.length:U(t).length,s=0;return o?void f(t,function(n,i){e(t[i],i,a(r))}):n(null)},M.forEachOfSeries=M.eachOfSeries=function(t,e,n){function r(){var i=!0;return null===s?n(null):(e(t[s],s,a(function(t){if(t)n(t);else{if(s=o(),null===s)return n(null);i?M.setImmediate(r):r()}})),void(i=!1))}n=c(n||i),t=t||[];var o=y(t),s=o();r()},M.forEachOfLimit=M.eachOfLimit=function(t,e,n,r){b(e)(t,n,r)},M.map=w(S),M.mapSeries=E(S),M.mapLimit=x(S),M.inject=M.foldl=M.reduce=function(t,e,n,r){M.eachOfSeries(t,function(t,r,i){n(e,t,function(t,n){e=n,i(t)})},function(t){r(t||null,e)})},M.foldr=M.reduceRight=function(t,e,n,r){var i=h(t,o).reverse();M.reduce(i,e,n,r)},M.select=M.filter=w(k),M.selectLimit=M.filterLimit=x(k),M.selectSeries=M.filterSeries=E(k),M.reject=w(O),M.rejectLimit=x(O),M.rejectSeries=E(O),M.any=M.some=N(M.eachOf,s,o),M.someLimit=N(M.eachOfLimit,s,o),M.all=M.every=N(M.eachOf,u,u),M.everyLimit=N(M.eachOfLimit,u,u),M.detect=N(M.eachOf,o,q),M.detectSeries=N(M.eachOfSeries,o,q),M.detectLimit=N(M.eachOfLimit,o,q),M.sortBy=function(t,e,n){function r(t,e){var n=t.criteria,r=e.criteria;return r>n?-1:n>r?1:0}M.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){return t?n(t):void n(null,h(e.sort(r),function(t){return t.value}))})},M.auto=function(t,e){function n(t){l.unshift(t)}function r(t){var e=g(l,t);e>=0&&l.splice(e,1)}function o(){u--,p(l.slice(0),function(t){t()})}e=c(e||i);var s=U(t),u=s.length;if(!u)return e(null);var a={},l=[];n(function(){u||e(null,a)}),p(s,function(i){function s(){return m(p,function(t,e){return t&&a.hasOwnProperty(e)},!0)&&!a.hasOwnProperty(i)}function u(){s()&&(r(u),l[l.length-1](f,a))}for(var c,l=R(t[i])?t[i]:[t[i]],f=_(function(t,n){if(n.length<=1&&(n=n[0]),t){var r={};v(a,function(t,e){r[e]=t}),r[i]=n,e(t,r)}else a[i]=n,M.setImmediate(o)}),p=l.slice(0,l.length-1),h=p.length;h--;){if(!(c=t[p[h]]))throw new Error("Has inexistant dependency");if(R(c)&&g(c,i)>=0)throw new Error("Has cyclic dependencies")}s()?l[l.length-1](f,a):n(u)})},M.retry=function(t,e,n){function r(t,e){if("number"==typeof e)t.times=parseInt(e,10)||o;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||o,t.interval=parseInt(e.interval,10)||s}}function i(t,e){function n(t,n){return function(r){t(function(t,e){r(!t||n,{err:t,result:e})},e)}}function r(t){return function(e){setTimeout(function(){e(null)},t)}}for(;a.times;){var i=!(a.times-=1);u.push(n(a.task,i)),!i&&a.interval>0&&u.push(r(a.interval))}M.series(u,function(e,n){n=n[n.length-1],(t||a.callback)(n.err,n.result)})}var o=5,s=0,u=[],a={times:o,interval:s},c=arguments.length;if(1>c||c>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=c&&"function"==typeof t&&(n=e,e=t),"function"!=typeof t&&r(a,t),a.callback=n,a.task=e,a.callback?i():i},M.waterfall=function(t,e){function n(t){return _(function(r,i){if(r)e.apply(null,[r].concat(i));else{var o=t.next();o?i.push(n(o)):i.push(e),D(t).apply(null,i)}})}if(e=c(e||i),!R(t)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}return t.length?void n(M.iterator(t))():e()},M.parallel=function(t,e){z(M.eachOf,t,e)},M.parallelLimit=function(t,e,n){z(b(e),t,n)},M.series=function(t,e){z(M.eachOfSeries,t,e)},M.iterator=function(t){function e(n){function r(){return t.length&&t[n].apply(null,arguments),r.next()}return r.next=function(){return n<t.length-1?e(n+1):null},r}return e(0)},M.apply=_(function(t,e){return _(function(n){return t.apply(null,e.concat(n))})}),M.concat=w(A),M.concatSeries=E(A),M.whilst=function(t,e,n){if(n=n||i,t()){var r=_(function(i,o){i?n(i):t.apply(this,o)?e(r):n(null)});e(r)}else n(null)},M.doWhilst=function(t,e,n){var r=0;return M.whilst(function(){return++r<=1||e.apply(this,arguments)},t,n)},M.until=function(t,e,n){return M.whilst(function(){return!t.apply(this,arguments)},e,n)},M.doUntil=function(t,e,n){return M.doWhilst(t,function(){return!e.apply(this,arguments)},n)},M.during=function(t,e,n){n=n||i;var r=_(function(e,r){e?n(e):(r.push(o),t.apply(this,r))}),o=function(t,i){t?n(t):i?e(r):n(null)};t(o)},M.doDuring=function(t,e,n){var r=0;M.during(function(t){r++<1?t(null,!0):e.apply(this,arguments)},t,n)},M.queue=function(t,e){var n=L(function(e,n){t(e[0],n)},e,1);return n},M.priorityQueue=function(t,e){function n(t,e){return t.priority-e.priority}function r(t,e,n){for(var r=-1,i=t.length-1;i>r;){var o=r+(i-r+1>>>1);n(e,t[o])>=0?r=o:i=o-1}return r}function o(t,e,o,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");return t.started=!0,R(e)||(e=[e]),0===e.length?M.setImmediate(function(){t.drain()}):void p(e,function(e){var u={data:e,priority:o,callback:"function"==typeof s?s:i};t.tasks.splice(r(t.tasks,u,n)+1,0,u),t.tasks.length===t.concurrency&&t.saturated(),M.setImmediate(t.process)})}var s=M.queue(t,e);return s.push=function(t,e,n){o(s,t,e,n)},delete s.unshift,s},M.cargo=function(t,e){return L(t,1,e)},M.log=T("log"),M.dir=T("dir"),M.memoize=function(t,e){var n={},r={};e=e||o;var i=_(function(i){var o=i.pop(),s=e.apply(null,i);s in n?M.setImmediate(function(){o.apply(null,n[s])}):s in r?r[s].push(o):(r[s]=[o],t.apply(null,i.concat([_(function(t){n[s]=t;var e=r[s];delete r[s];for(var i=0,o=e.length;o>i;i++)e[i].apply(null,t)})])))});return i.memo=n,i.unmemoized=t,i},M.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},M.times=F(M.map),M.timesSeries=F(M.mapSeries),M.timesLimit=function(t,e,n,r){return M.mapLimit(d(t),e,n,r)},M.seq=function(){var t=arguments;return _(function(e){var n=this,r=e[e.length-1];"function"==typeof r?e.pop():r=i,M.reduce(t,e,function(t,e,r){e.apply(n,t.concat([_(function(t,e){r(t,e)})]))},function(t,e){r.apply(n,[t].concat(e))})})},M.compose=function(){return M.seq.apply(null,Array.prototype.reverse.call(arguments))},M.applyEach=C(M.eachOf),M.applyEachSeries=C(M.eachOfSeries),M.forever=function(t,e){function n(t){return t?r(t):void o(n)}var r=a(e||i),o=D(t);n()},M.ensureAsync=D,M.constant=_(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),M.wrapSync=M.asyncify=function(t){return _(function(e){var n,r=e.pop();try{n=t.apply(this,e)}catch(i){return r(i)}H(n)&&"function"==typeof n.then?n.then(function(t){r(null,t)})["catch"](function(t){r(t.message?t:new Error(t))}):r(null,n)})},"object"==typeof n&&n.exports?n.exports=M:"function"==typeof t&&t.amd?t([],function(){return M}):I.async=M}()}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:1}],32:[function(t,e,n){"use strict";e.exports=function(t){return 1===t.length?t:t.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(t,e){return e.toUpperCase()})}},{}]},{},[22])(22)});
//# sourceMappingURL=quixote.min.js.map