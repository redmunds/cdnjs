!function(n,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():n.MicroPlugin=e()}(this,function(){var n={};n.mixin=function(n){n.plugins={},n.prototype.initializePlugins=function(n){var i,r,t,o=this,s=[];if(o.plugins={names:[],settings:{},requested:{},loaded:{}},e.isArray(n))for(i=0,r=n.length;i<r;i++)"string"==typeof n[i]?s.push(n[i]):(o.plugins.settings[n[i].name]=n[i].options,s.push(n[i].name));else if(n)for(t in n)n.hasOwnProperty(t)&&(o.plugins.settings[t]=n[t],s.push(t));for(;s.length;)o.require(s.shift())},n.prototype.loadPlugin=function(e){var i=this,r=i.plugins,t=n.plugins[e];if(!n.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');r.requested[e]=!0,r.loaded[e]=t.fn.apply(i,[i.plugins.settings[e]||{}]),r.names.push(e)},n.prototype.require=function(n){var e=this,i=e.plugins;if(!e.plugins.loaded.hasOwnProperty(n)){if(i.requested[n])throw new Error('Plugin has circular dependency ("'+n+'")');e.loadPlugin(n)}return i.loaded[n]},n.define=function(e,i){n.plugins[e]={name:e,fn:i}}};var e={isArray:Array.isArray||function(){return"[object Array]"===Object.prototype.toString.call(vArg)}};return n});