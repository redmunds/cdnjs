!function(){"use strict";var e=null;e="undefined"==typeof window.videojs&&"function"==typeof require?require("video.js"):window.videojs,function(e,t){function i(e,t,i,n){return r={label:i,sources:t},"function"==typeof n?n(e,t,i):e.src(t.map(function(e){return{src:e.src,type:e.type,res:e.res}}))}var n,s={},r={},o={},l=t.getComponent("MenuItem"),c=t.extend(l,{constructor:function(e,t,i,n){this.onClickListener=i,this.label=n,l.call(this,e,t),this.src=t.src,this.on("click",this.onClick),this.on("touchstart",this.onClick),t.initialySelected&&(this.showAsLabel(),this.selected(!0))},showAsLabel:function(){this.label&&(this.label.innerHTML=this.options_.label)},onClick:function(e){this.onClickListener(this);var t=this.player_.currentTime(),n=this.player_.paused();this.showAsLabel(),n||this.player_.bigPlayButton.hide(),"function"!=typeof e&&"function"==typeof this.options_.customSourcePicker&&(e=this.options_.customSourcePicker);var s="loadeddata";"none"==this.player_.preload()&&"Flash"!=this.player_.techName_&&(s="timeupdate"),i(this.player_,this.src,this.options_.label,e).one(s,function(){this.player_.currentTime(t),this.player_.handleTechSeeked_(),n||this.player_.play().handleTechSeeked_(),this.player_.trigger("resolutionchange")})}}),a=t.getComponent("MenuButton"),u=t.extend(a,{constructor:function(e,t,i,n){if(this.sources=t.sources,this.label=n,this.label.innerHTML=t.initialySelectedLabel,a.call(this,e,t,i),this.controlText("Quality"),i.dynamicLabel)this.el().appendChild(n);else{var s=document.createElement("span");s.classList.add("vjs-resolution-button-staticlabel"),this.el().appendChild(s)}},createItems:function(){var e=[],t=this.sources&&this.sources.label||{},i=function(t){e.map(function(e){e.selected(e===t)})};for(var n in t)t.hasOwnProperty(n)&&(e.push(new c(this.player_,{label:n,src:t[n],initialySelected:n===this.options_.initialySelectedLabel,customSourcePicker:this.options_.customSourcePicker},i,this.label)),o[n]=e[e.length-1]);return e}});n=function(e){function n(e,t){return e.res&&t.res?+t.res-+e.res:0}function l(e){var t={label:{},res:{},type:{}};return e.map(function(e){c(t,"label",e),c(t,"res",e),c(t,"type",e),a(t,"label",e),a(t,"res",e),a(t,"type",e)}),t}function c(e,t,i){null==e[t][i[t]]&&(e[t][i[t]]=[])}function a(e,t,i){e[t][i[t]].push(i)}function h(e,t){var i=d.default,n="";return"high"===i?(i=t[0].res,n=t[0].label):"low"===i||null==i?(i=t[t.length-1].res,n=t[t.length-1].label):e.res[i]&&(n=e.res[i][0].label),void 0===i?{res:i,label:n,sources:e.label[n]}:{res:i,label:n,sources:e.res[i]}}var d=t.mergeOptions(s,e),p=this,f=document.createElement("span"),b={};f.classList.add("vjs-resolution-button-label"),p.updateSrc=function(e){if(!e)return p.src();p.controlBar.resolutionSwitcher&&(p.controlBar.resolutionSwitcher.dispose(),delete p.controlBar.resolutionSwitcher),e=e.sort(n),b=l(e);var t=h(b,e),s=new u(p,{sources:b,initialySelectedLabel:t.label,initialySelectedRes:t.res,customSourcePicker:d.customSourcePicker},d,f);return s.el().classList.add("vjs-resolution-button"),p.controlBar.resolutionSwitcher=p.controlBar.addChild(s),i(p,t.sources,t.label)},p.currentResolution=function(e,t){return null==e?r:(null!=o[e]&&o[e].onClick(t),p)},p.getGroupedSrc=function(){return b},p.options_.sources.length>1&&p.ready(function(){p.updateSrc(p.options_.sources)})},t.plugin("videoJsResolutionSwitcher",n)}(window,e)}();
//# sourceMappingURL=videojs-resolution-switcher.min.js.map