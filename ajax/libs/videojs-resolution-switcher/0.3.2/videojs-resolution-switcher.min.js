!function(){"use strict";var e=null;e="undefined"==typeof window.videojs&&"function"==typeof require?require("video.js"):window.videojs,function(e,t){function s(e,t,s,i){return l={label:s,sources:t},"function"==typeof i?i(e,t,s):e.src(t.map(function(e){return{src:e.src,type:e.type,res:e.res}}))}var i,n={},l={},r={},o=t.getComponent("MenuItem"),c=t.extend(o,{constructor:function(e,t,s,i){this.onClickListener=s,this.label=i,o.call(this,e,t),this.src=t.src,this.on("click",this.onClick),this.on("touchstart",this.onClick),t.initialySelected&&(this.showAsLabel(),this.selected(!0),this.addClass("vjs-selected"))},showAsLabel:function(){this.label&&(this.label.innerHTML=this.options_.label)},onClick:function(e){this.onClickListener(this);var t=this.player_.currentTime(),i=this.player_.paused();this.showAsLabel(),this.addClass("vjs-selected"),i||this.player_.bigPlayButton.hide(),"function"!=typeof e&&"function"==typeof this.options_.customSourcePicker&&(e=this.options_.customSourcePicker);var n="loadeddata";"none"===this.player_.preload()&&"Flash"!==this.player_.techName_&&(n="timeupdate"),s(this.player_,this.src,this.options_.label,e).one(n,function(){this.player_.currentTime(t),this.player_.handleTechSeeked_(),i||this.player_.play().handleTechSeeked_(),this.player_.trigger("resolutionchange")})}}),a=t.getComponent("MenuButton"),u=t.extend(a,{constructor:function(e,t,s,i){if(this.sources=t.sources,this.label=i,this.label.innerHTML=t.initialySelectedLabel,a.call(this,e,t,s),this.controlText("Quality"),s.dynamicLabel)this.el().appendChild(i);else{var n=document.createElement("span");n.classList.add("vjs-resolution-button-staticlabel"),this.el().appendChild(n)}},createItems:function(){var e=[],t=this.sources&&this.sources.label||{},s=function(t){e.map(function(e){e.selected(e===t),e.removeClass("vjs-selected")})};for(var i in t)t.hasOwnProperty(i)&&(e.push(new c(this.player_,{label:i,src:t[i],initialySelected:i===this.options_.initialySelectedLabel,customSourcePicker:this.options_.customSourcePicker},s,this.label)),r[i]=e[e.length-1]);return e}});i=function(e){function i(e,t){return e.res&&t.res?+t.res-+e.res:0}function o(e){var t={label:{},res:{},type:{}};return e.map(function(e){c(t,"label",e),c(t,"res",e),c(t,"type",e),a(t,"label",e),a(t,"res",e),a(t,"type",e)}),t}function c(e,t,s){null==e[t][s[t]]&&(e[t][s[t]]=[])}function a(e,t,s){e[t][s[t]].push(s)}function h(e,t){var s=d.default,i="";return"high"===s?(s=t[0].res,i=t[0].label):"low"===s||null==s?(s=t[t.length-1].res,i=t[t.length-1].label):e.res[s]&&(i=e.res[s][0].label),void 0===s?{res:s,label:i,sources:e.label[i]}:{res:s,label:i,sources:e.res[s]}}var d=t.mergeOptions(n,e),p=this,f=document.createElement("span"),b={};f.classList.add("vjs-resolution-button-label"),p.updateSrc=function(e){if(!e)return p.src();p.controlBar.resolutionSwitcher&&(p.controlBar.resolutionSwitcher.dispose(),delete p.controlBar.resolutionSwitcher),e=e.sort(i),b=o(e);var t=h(b,e),n=new u(p,{sources:b,initialySelectedLabel:t.label,initialySelectedRes:t.res,customSourcePicker:d.customSourcePicker},d,f);return n.el().classList.add("vjs-resolution-button"),p.controlBar.resolutionSwitcher=p.controlBar.el_.insertBefore(n.el_,p.controlBar.getChild("fullscreenToggle").el_),s(p,t.sources,t.label)},p.currentResolution=function(e,t){return null==e?l:(null!=r[e]&&r[e].onClick(t),p)},p.getGroupedSrc=function(){return b},p.options_.sources.length>1&&p.ready(function(){p.updateSrc(p.options_.sources)})},t.plugin("videoJsResolutionSwitcher",i)}(window,e)}();
//# sourceMappingURL=videojs-resolution-switcher.min.js.map