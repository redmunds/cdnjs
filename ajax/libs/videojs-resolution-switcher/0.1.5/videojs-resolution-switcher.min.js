!function(){"use strict";var e=null;e="undefined"==typeof window.videojs&&"function"==typeof require?require("videojs"):window.videojs,function(e,t){function s(e,t){return e.src(t.map(function(e){return{src:e.src,type:e.type,res:e.res}}))}var i,n={},l=t.getComponent("MenuItem"),r=t.extend(l,{constructor:function(e,t,s,i){this.onClickListener=s,this.label=i,l.call(this,e,t),this.src=t.src,this.on("click",this.onClick),this.on("touchstart",this.onClick),t.initialySelected&&(this.showAsLabel(),this.selected(!0))},showAsLabel:function(){this.label&&(this.label.innerHTML=this.options_.label)},onClick:function(){this.onClickListener(this);var e=this.player_.currentTime(),t=this.player_.paused();this.showAsLabel(),t||this.player_.bigPlayButton.hide(),s(this.player_,this.src).one("loadeddata",function(){this.player_.currentTime(e),this.player_.handleTechSeeked_(),t||this.player_.play().handleTechSeeked_(),this.player_.trigger("resolutionchange")})}}),o=t.getComponent("MenuButton"),a=t.extend(o,{constructor:function(e,t,s,i){if(this.sources=t.sources,this.label=i,this.label.innerHTML=t.initialySelectedLabel,o.call(this,e,t),this.controlText("Quality"),s.dynamicLabel)this.el().appendChild(i);else{var n=document.createElement("span");n.classList.add("vjs-resolution-button-staticlabel"),this.el().appendChild(n)}},createItems:function(){var e=[],t=this.sources&&this.sources.label||{},s=function(t){e.map(function(e){e.selected(e===t)})};for(var i in t)t.hasOwnProperty(i)&&e.push(new r(this.player_,{label:i,src:t[i],initialySelected:i===this.options_.initialySelectedLabel},s,this.label));return e}});i=function(e){function i(e,t){return e.res&&t.res?+t.res-+e.res:0}function l(e){var t={label:{},res:{},type:{}};return e.map(function(e){r(t,"label",e),r(t,"res",e),r(t,"type",e),o(t,"label",e),o(t,"res",e),o(t,"type",e)}),t}function r(e,t,s){null==e[t][s[t]]&&(e[t][s[t]]=[])}function o(e,t,s){e[t][s[t]].push(s)}function c(e,t){var s=u.default,i="";return"high"===s?(s=t[0].res,i=t[0].label):"low"===s||null==s?(s=t[t.length-1].res,i=t[t.length-1].label):e.res[s]&&(i=e.res[s][0].label),void 0===s?{res:s,label:i,sources:e.label[i]}:{res:s,label:i,sources:e.res[s]}}var u=t.mergeOptions(n,e),h=this,d=document.createElement("span");d.classList.add("vjs-resolution-button-label"),h.updateSrc=function(e){if(!e)return h.src();h.controlBar.resolutionSwitcher&&(h.controlBar.resolutionSwitcher.dispose(),delete h.controlBar.resolutionSwitcher),e=e.sort(i);var t=l(e),n=c(t,e),r=new a(h,{sources:t,initialySelectedLabel:n.label,initialySelectedRes:n.res},u,d);return r.el().classList.add("vjs-resolution-button"),h.controlBar.resolutionSwitcher=h.controlBar.addChild(r),s(h,n.sources)},h.options_.sources.length>1&&h.ready(function(){h.updateSrc(h.options_.sources)})},t.plugin("videoJsResolutionSwitcher",i)}(window,e)}();
//# sourceMappingURL=videojs-resolution-switcher.min.js.map