!function(){"use strict";var e=null;e="undefined"==typeof window.videojs&&"function"==typeof require?require("video.js"):window.videojs,function(e,t){function n(e,t,n,s){return l={label:n,sources:t},"function"==typeof s?s(e,t,n):e.src(t.map(function(e){return{src:e.src,type:e.type,res:e.res}}))}var s,i={},l={},r={},o=t.getComponent("MenuItem"),a=t.extend(o,{constructor:function(e,t,n,s){this.onClickListener=n,this.label=s,o.call(this,e,t),this.src=t.src,this.on("click",this.onClick),this.on("touchstart",this.onClick),t.initialySelected&&(this.showAsLabel(),this.selected(!0))},showAsLabel:function(){this.label&&(this.label.innerHTML=this.options_.label)},onClick:function(e){this.onClickListener(this);var t=this.player_.currentTime(),s=this.player_.paused();this.showAsLabel(),s||this.player_.bigPlayButton.hide();var i="loadeddata";"none"==this.player_.preload()&&"Flash"!=this.player_.techName_&&(i="timeupdate"),n(this.player_,this.src,this.options_.label,e).one(i,function(){this.player_.currentTime(t),this.player_.handleTechSeeked_(),s||this.player_.play().handleTechSeeked_(),this.player_.trigger("resolutionchange")})}}),c=t.getComponent("MenuButton"),u=t.extend(c,{constructor:function(e,t,n,s){if(this.sources=t.sources,this.label=s,this.label.innerHTML=t.initialySelectedLabel,c.call(this,e,t),this.controlText("Quality"),n.dynamicLabel)this.el().appendChild(s);else{var i=document.createElement("span");i.classList.add("vjs-resolution-button-staticlabel"),this.el().appendChild(i)}},createItems:function(){var e=[],t=this.sources&&this.sources.label||{},n=function(t){e.map(function(e){e.selected(e===t)})};for(var s in t)t.hasOwnProperty(s)&&(e.push(new a(this.player_,{label:s,src:t[s],initialySelected:s===this.options_.initialySelectedLabel},n,this.label)),r[s]=e[e.length-1]);return e}});s=function(e){function s(e,t){return e.res&&t.res?+t.res-+e.res:0}function o(e){var t={label:{},res:{},type:{}};return e.map(function(e){a(t,"label",e),a(t,"res",e),a(t,"type",e),c(t,"label",e),c(t,"res",e),c(t,"type",e)}),t}function a(e,t,n){null==e[t][n[t]]&&(e[t][n[t]]=[])}function c(e,t,n){e[t][n[t]].push(n)}function h(e,t){var n=d.default,s="";return"high"===n?(n=t[0].res,s=t[0].label):"low"===n||null==n?(n=t[t.length-1].res,s=t[t.length-1].label):e.res[n]&&(s=e.res[n][0].label),void 0===n?{res:n,label:s,sources:e.label[s]}:{res:n,label:s,sources:e.res[n]}}var d=t.mergeOptions(i,e),p=this,b=document.createElement("span");b.classList.add("vjs-resolution-button-label"),p.updateSrc=function(e){if(!e)return p.src();p.controlBar.resolutionSwitcher&&(p.controlBar.resolutionSwitcher.dispose(),delete p.controlBar.resolutionSwitcher),e=e.sort(s);var t=o(e),i=h(t,e),l=new u(p,{sources:t,initialySelectedLabel:i.label,initialySelectedRes:i.res},d,b);return l.el().classList.add("vjs-resolution-button"),p.controlBar.resolutionSwitcher=p.controlBar.addChild(l),n(p,i.sources,i.label)},p.currentResolution=function(e,t){return null==e?l:(null!=r[e]&&r[e].onClick(t),p)},p.options_.sources.length>1&&p.ready(function(){p.updateSrc(p.options_.sources)})},t.plugin("videoJsResolutionSwitcher",s)}(window,e)}();
//# sourceMappingURL=videojs-resolution-switcher.min.js.map