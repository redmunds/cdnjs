!function(t){t.fn.miniTip=function(o){var i={title:"",content:!1,delay:300,anchor:"top",event:"hover",fadeIn:200,fadeOut:200,aHide:!0,maxW:"250px",offset:5,show:function(){},hide:function(){}},e=t.extend(i,o);if(t("#miniTip").length<=0){var n=t('<div id="miniTip" style="max-width:'+e.maxW+';"><div id="miniTip_t"></div><div id="miniTip_c"></div><div id="miniTip_a"></div></div>');t("body").append(n)}var r=t("#miniTip"),a=t("#miniTip_t"),d=t("#miniTip_c"),h=t("#miniTip_a");return this.each(function(){function o(){e.show.call(this),d.html(s),""!=e.title?(a.html(e.title),a.show()):a.hide(),h.removeAttr("class");var o=parseInt(c.offset().top),i=parseInt(c.offset().left),n=parseInt(c.outerWidth()),p=parseInt(c.outerHeight()),u=r.outerWidth(),l=r.outerHeight(),m=Math.round((n-u)/2),v=(Math.round((p-l)/2),Math.round(i+m)),T=Math.round(o+p+e.offset+8),w=Math.round(u-16)/2-parseInt(r.css("borderLeftWidth")),g=i+n+u+e.offset+8>parseInt(t(window).width()),I=u+e.offset+8>i,b=l+e.offset+8>o,W=o+p+l+e.offset+8>parseInt(t(window).height()+t(window).scrollTop()),x=e.anchor;I||"right"==e.anchor&&!g?"left"!=e.anchor&&"right"!=e.anchor||(x="right",aTop=Math.round(l/2-8-parseInt(r.css("borderRightWidth"))),w=-8-parseInt(r.css("borderRightWidth")),v=i+n+e.offset+8,T=Math.round(o+p/2-l/2)):(g||"left"==e.anchor&&!I)&&("left"!=e.anchor&&"right"!=e.anchor||(x="left",aTop=Math.round(l/2-8-parseInt(r.css("borderLeftWidth"))),w=u-parseInt(r.css("borderLeftWidth")),v=i-u-e.offset-8,T=Math.round(o+p/2-l/2))),W||"top"==e.anchor&&!b?"top"!=e.anchor&&"bottom"!=e.anchor||(x="top",aTop=l-parseInt(r.css("borderTopWidth")),T=o-(l+e.offset+8)):(b||"bottom"==e.anchor&&!W)&&("top"!=e.anchor&&"bottom"!=e.anchor||(x="bottom",aTop=-8-parseInt(r.css("borderBottomWidth")),T=o+p+e.offset+8)),h.css({"margin-left":w+"px","margin-top":aTop+"px"}).attr("class",x),f&&clearTimeout(f),f=window.setTimeout(function(){r.css({"margin-left":v+"px","margin-top":T+"px"}).stop(!0,!0).fadeIn(e.fadeIn)},e.delay)}function i(){console.log("hide"),(!e.aHide&&!p||e.aHide)&&(f&&clearTimeout(f),f=window.setTimeout(function(){n()},e.delay))}function n(){console.log("hide2"),!e.aHide&&!p||e.aHide?(r.stop(!0,!0).fadeOut(e.fadeOut),e.hide.call(this)):window.setTimeout(function(){i()},200)}var s=e.content?e.content:t(this).attr("title");if(""!=s){var c=t(this),f=!1,p=!1,u=!0;e.content||c.removeAttr("title"),"hover"==e.event?(c.hover(function(){u=!0,o()},function(){u=!1,i()}),e.aHide||r.hover(function(){p=!0},function(){p=!1,window.setTimeout(function(){u||i()},200)})):"click"==e.event&&(e.aHide=!0,c.click(function(){return o(),!1}))}})}}(jQuery);
