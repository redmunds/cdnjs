!function(t){t.fn.miniTip=function(i){var n={title:"",content:!1,delay:300,anchor:"n",event:"hover",fadeIn:200,fadeOut:200,aHide:!0,maxW:"250px",offset:5,show:function(){},hide:function(){}},e=t.extend(n,i);if(t("#miniTip").length<=0){var o=t('<div id="miniTip" style="max-width:'+e.maxW+';"><div id="miniTip_t"></div><div id="miniTip_c"></div><div id="miniTip_a"></div></div>');t("body").append(o)}var a=t("#miniTip"),r=t("#miniTip_t"),s=t("#miniTip_c"),c=t("#miniTip_a");return this.each(function(){function i(){e.show.call(this),s.html(d),""!=e.title?(r.html(e.title),r.show()):r.hide(),c.removeAttr("class");var i=parseInt(h.offset().top),n=parseInt(h.offset().left),o=parseInt(h.outerWidth()),p=parseInt(h.outerHeight()),u=a.outerWidth(),l=a.outerHeight(),m=Math.round((o-u)/2),T=(Math.round((p-l)/2),Math.round(n+m)),v=Math.round(i+p+e.offset+8),w=Math.round(u-16)/2-parseInt(a.css("borderLeftWidth")),I=n+o+u+e.offset+8>parseInt(t(window).width()),g=u+e.offset+8>n,W=l+e.offset+8>i,b=i+p+l+e.offset+8>parseInt(t(window).height()+t(window).scrollTop()),x=e.anchor;g||"e"==e.anchor&&!I?"w"!=e.anchor&&"e"!=e.anchor||(x="e",aTop=Math.round(l/2-8-parseInt(a.css("borderRightWidth"))),w=-8-parseInt(a.css("borderRightWidth")),T=n+o+e.offset+8,v=Math.round(i+p/2-l/2)):(I||"w"==e.anchor&&!g)&&("w"!=e.anchor&&"e"!=e.anchor||(x="w",aTop=Math.round(l/2-8-parseInt(a.css("borderLeftWidth"))),w=u-parseInt(a.css("borderLeftWidth")),T=n-u-e.offset-8,v=Math.round(i+p/2-l/2))),b||"n"==e.anchor&&!W?"n"!=e.anchor&&"s"!=e.anchor||(x="n",aTop=l-parseInt(a.css("borderTopWidth")),v=i-(l+e.offset+8)):(W||"s"==e.anchor&&!b)&&("n"!=e.anchor&&"s"!=e.anchor||(x="s",aTop=-8-parseInt(a.css("borderBottomWidth")),v=i+p+e.offset+8)),c.css({"margin-left":w+"px","margin-top":aTop+"px"}).attr("class",x),f&&clearTimeout(f),f=window.setTimeout(function(){a.css({"margin-left":T+"px","margin-top":v+"px"}).stop(!0,!0).fadeIn(e.fadeIn)},e.delay)}function n(){(!e.aHide&&!p||e.aHide)&&(f&&clearTimeout(f),f=window.setTimeout(function(){o()},e.delay))}function o(){!e.aHide&&!p||e.aHide?(a.stop(!0,!0).fadeOut(e.fadeOut),e.hide.call(this)):window.setTimeout(function(){n()},200)}var d=e.content?e.content:t(this).attr("title");if(""!=d){var h=t(this),f=!1,p=!1,u=!0;e.content||h.removeAttr("title"),"hover"==e.event?(h.hover(function(){a.removeAttr("click"),u=!0,i()},function(){u=!1,n()}),e.aHide||a.hover(function(){p=!0},function(){p=!1,window.setTimeout(function(){u||a.attr("click")||n()},200)})):"click"==e.event&&(e.aHide=!0,h.click(function(){return a.attr("click","t"),"none"==a.css("display")?i():n(),!1}),t("html").click(function(i){"block"==a.css("display")&&t.inArray(i.target.id,["miniTip","miniTip_c","miniTip_a","miniTip_t"])<0&&n()}))}})}}(jQuery);
