!function(t){t.fn.miniTip=function(i){var o={title:"",content:!1,delay:300,anchor:"top",fadeIn:200,fadeOut:200,aHide:!0,maxW:"250px",offset:5,show:function(){},hide:function(){}},n=t.extend(o,i);if(t("#miniTip").length<=0){var e=t('<div id="miniTip" style="max-width:'+n.maxW+';"><div id="miniTip_t"></div><div id="miniTip_c"></div><div id="miniTip_a"></div></div>');t("body").append(e)}var r=t("#miniTip"),a=t("#miniTip_t"),d=t("#miniTip_c"),s=t("#miniTip_a");return this.each(function(){function i(){n.show.call(this),d.html(h),""!=n.title?(a.html(n.title),a.show()):a.hide(),s.removeAttr("class");var i=parseInt(f.offset().top),o=parseInt(f.offset().left),e=parseInt(f.outerWidth()),p=parseInt(f.outerHeight()),u=r.outerWidth(),m=r.outerHeight(),l=Math.round((e-u)/2),T=(Math.round((p-m)/2),Math.round(o+l)),w=Math.round(i+p+n.offset+8),v=Math.round(u-16)/2-parseInt(r.css("borderLeftWidth")),I=o+e+u+n.offset+8>parseInt(t(window).width()),g=u+n.offset+8>o,b=m+n.offset+8>i,W=i+p+m+n.offset+8>parseInt(t(window).height()+t(window).scrollTop()),x=n.anchor;g||"right"==n.anchor&&!I?"left"!=n.anchor&&"right"!=n.anchor||(x="right",aTop=Math.round(m/2-8-parseInt(r.css("borderRightWidth"))),v=-8-parseInt(r.css("borderRightWidth")),T=o+e+n.offset+8,w=Math.round(i+p/2-m/2)):(I||"left"==n.anchor&&!g)&&("left"!=n.anchor&&"right"!=n.anchor||(x="left",aTop=Math.round(m/2-8-parseInt(r.css("borderLeftWidth"))),v=u-parseInt(r.css("borderLeftWidth")),T=o-u-n.offset-8,w=Math.round(i+p/2-m/2))),W||"top"==n.anchor&&!b?"top"!=n.anchor&&"bottom"!=n.anchor||(x="top",aTop=m-parseInt(r.css("borderTopWidth")),w=i-(m+n.offset+8)):(b||"bottom"==n.anchor&&!W)&&("top"!=n.anchor&&"bottom"!=n.anchor||(x="bottom",aTop=-8-parseInt(r.css("borderBottomWidth")),w=i+p+n.offset+8)),s.css({"margin-left":v+"px","margin-top":aTop+"px"}).attr("class",x),c&&clearTimeout(c),c=window.setTimeout(function(){r.css({"margin-left":T+"px","margin-top":w+"px"}).stop(!0,!0).fadeIn(n.fadeIn)},n.delay)}function o(){(!n.aHide&&!p||n.aHide)&&(c&&clearTimeout(c),c=window.setTimeout(function(){e()},n.delay))}function e(){!n.aHide&&!p||n.aHide?(r.stop(!0,!0).fadeOut(n.fadeOut),n.hide.call(this)):window.setTimeout(function(){o()},200)}var h=n.content?n.content:t(this).attr("title");if(""!=h){var f=t(this),c=!1,p=!1,u=!0;n.content||f.removeAttr("title"),f.hover(function(){u=!0,i()},function(){u=!1,o()}),n.aHide||r.hover(function(){p=!0},function(){p=!1,window.setTimeout(function(){u||o()},200)})}})}}(jQuery);
