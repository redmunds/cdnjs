/*!
 * miniTip v1.2.0
 *
 * Updated: July 23, 2011
 * Requires: jQuery v1.3+
 *
 * (c) 2011, James Simpson
 * http://goldfirestudios.com
 *
 * Dual licensed under the MIT and GPL
 *
 * Documentation found at:
 * http://goldfirestudios.com/blog/81/miniTip-jQuery-Plugin
*/
(function(a){a.fn.miniTip=function(f){var i={title:"",content:false,delay:300,anchor:"n",event:"hover",fadeIn:200,fadeOut:200,aHide:true,maxW:"250px",offset:5},h=a.extend(i,f);if(a("#miniTip").length<=0){a("body").append('<div id="miniTip" style="max-width:'+h.maxW+';"><div id="miniTip_t"></div><div id="miniTip_c"></div><div id="miniTip_a"></div></div>')}var e=a("#miniTip"),g=a("#miniTip_t"),b=a("#miniTip_c"),c=a("#miniTip_a");return this.each(function(){var n=a(this);var d=h.content?h.content:n.attr("title");if(d!=""){var k=false,o=false,p=true;if(!h.content){n.removeAttr("title")}if(h.event=="hover"){n.hover(function(){e.removeAttr("click");p=true;j()},function(){p=false;l()});if(!h.aHide){e.hover(function(){o=true},function(){o=false;setTimeout(function(){if(!p&&!e.attr("click")){l()}},200)})}}else{if(h.event=="click"){h.aHide=true;n.click(function(){e.attr("click","t");if(e.css("display")=="none"){j()}else{l()}return false});a("html").click(function(q){if(e.css("display")=="block"&&a.inArray(q.target.id,["miniTip","miniTip_c","miniTip_a","miniTip_t"])<0){l()}})}}var j=function(){if(h.show){h.show.call(this)}b.html(d);if(h.title!=""){g.html(h.title).show()}else{g.hide()}c.removeAttr("class");e.width("").width(e.width());var E=parseInt(n.offset().top,10),t=parseInt(n.offset().left,10),C=parseInt(n.outerWidth(),10),u=parseInt(n.outerHeight(),10),G=e.outerWidth(),A=e.outerHeight(),H=Math.round((C-G)/2),B=Math.round((u-A)/2),r=Math.round(t+H),v=Math.round(E+u+h.offset+8),s=(Math.round(G-16)/2)-parseInt(e.css("borderLeftWidth"),10),z=0,q=(t+C+G+h.offset+8)>parseInt(a(window).width(),10),x=(G+h.offset+8)>t,D=(A+h.offset+8)>E-a(window).scrollTop(),y=(E+u+A+h.offset+8)>parseInt(a(window).height()+a(window).scrollTop(),10),F=h.anchor;if(x||h.anchor=="e"&&!q){if(h.anchor=="w"||h.anchor=="e"){F="e";z=Math.round((A/2)-8-parseInt(e.css("borderRightWidth"),10));s=-8-parseInt(e.css("borderRightWidth"),10);r=t+C+h.offset+8;v=Math.round((E+u/2)-(A/2))}}else{if(q||h.anchor=="w"&&!x){if(h.anchor=="w"||h.anchor=="e"){F="w";z=Math.round((A/2)-8-parseInt(e.css("borderLeftWidth"),10));s=G-parseInt(e.css("borderLeftWidth"),10);r=t-G-h.offset-8;v=Math.round((E+u/2)-(A/2))}}}if(y||h.anchor=="n"&&!D){if(h.anchor=="n"||h.anchor=="s"){F="n";z=A-parseInt(e.css("borderTopWidth"),10);v=E-(A+h.offset+8)}}else{if(D||h.anchor=="s"&&!y){if(h.anchor=="n"||h.anchor=="s"){F="s";z=-8-parseInt(e.css("borderBottomWidth"),10);v=E+u+h.offset+8}}}c.css({"margin-left":s+"px","margin-top":z+"px"}).attr("class",F);if(k){clearTimeout(k)}k=setTimeout(function(){e.css({"margin-left":r+"px","margin-top":v+"px"}).stop(true,true).fadeIn(h.fadeIn)},h.delay)};var l=function(){if(!h.aHide&&!o||h.aHide){if(k){clearTimeout(k)}k=setTimeout(function(){m()},h.delay)}};var m=function(){if(!h.aHide&&!o||h.aHide){e.stop(true,true).fadeOut(h.fadeOut);if(h.hide){h.hide.call(this)}}else{setTimeout(function(){l()},200)}}}})}})(jQuery);