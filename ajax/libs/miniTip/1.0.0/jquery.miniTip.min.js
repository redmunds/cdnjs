/*!
 * miniTip v1.0.0
 *
 * Updated: July 21, 2011
 * Requires: jQuery v1.3+
 *
 * (c) 2011, James Simpson
 * http://goldfirestudios.com
 *
 * Dual licensed under the MIT and GPL
 *
 * Documentation found at:
 * http://goldfirestudios.com/blog/81/miniTip-jQuery-Plugin
*/
(function(a){a.fn.miniTip=function(f){var j={title:"",content:false,delay:300,anchor:"n",event:"hover",fadeIn:200,fadeOut:200,aHide:true,maxW:"250px",offset:5,show:function(){},hide:function(){}};var i=a.extend(j,f);if(a("#miniTip").length<=0){var g=a('<div id="miniTip" style="max-width:'+i.maxW+';"><div id="miniTip_t"></div><div id="miniTip_c"></div><div id="miniTip_a"></div></div>');a("body").append(g)}var e=a("#miniTip");var h=a("#miniTip_t");var b=a("#miniTip_c");var c=a("#miniTip_a");return this.each(function(){var d=(i.content)?i.content:a(this).attr("title");if(d!=""){var o=a(this);var l=false;var p=false;var q=true;if(!i.content){o.removeAttr("title")}if(i.event=="hover"){o.hover(function(){e.removeAttr("click");q=true;k()},function(){q=false;m()});if(!i.aHide){e.hover(function(){p=true},function(){p=false;window.setTimeout(function(){if(!q&&!e.attr("click")){m()}},200)})}}else{if(i.event=="click"){i.aHide=true;o.click(function(){e.attr("click","t");if(e.css("display")=="none"){k()}else{m()}return false});a("html").click(function(r){if(e.css("display")=="block"&&a.inArray(r.target.id,["miniTip","miniTip_c","miniTip_a","miniTip_t"])<0){m()}})}}function k(){i.show.call(this);b.html(d);if(i.title!=""){h.html(i.title);h.show()}else{h.hide()}c.removeAttr("class");var E=parseInt(o.offset().top);var u=parseInt(o.offset().left);var C=parseInt(o.outerWidth());var v=parseInt(o.outerHeight());var G=e.outerWidth();var A=e.outerHeight();var H=Math.round((C-G)/2);var B=Math.round((v-A)/2);var s=Math.round(u+H);var x=Math.round(E+v+i.offset+8);var t=(Math.round(G-16)/2)-parseInt(e.css("borderLeftWidth"));var r=(u+C+G+i.offset+8)>parseInt(a(window).width());var y=(G+i.offset+8)>u;var D=(A+i.offset+8)>E;var z=(E+v+A+i.offset+8)>parseInt(a(window).height()+a(window).scrollTop());var F=i.anchor;if(y||i.anchor=="e"&&!r){if(i.anchor=="w"||i.anchor=="e"){F="e";aTop=Math.round((A/2)-8-parseInt(e.css("borderRightWidth")));t=-8-parseInt(e.css("borderRightWidth"));s=u+C+i.offset+8;x=Math.round((E+v/2)-(A/2))}}else{if(r||i.anchor=="w"&&!y){if(i.anchor=="w"||i.anchor=="e"){F="w";aTop=Math.round((A/2)-8-parseInt(e.css("borderLeftWidth")));t=G-parseInt(e.css("borderLeftWidth"));s=u-G-i.offset-8;x=Math.round((E+v/2)-(A/2))}}}if(z||i.anchor=="n"&&!D){if(i.anchor=="n"||i.anchor=="s"){F="n";aTop=A-parseInt(e.css("borderTopWidth"));x=E-(A+i.offset+8)}}else{if(D||i.anchor=="s"&&!z){if(i.anchor=="n"||i.anchor=="s"){F="s";aTop=-8-parseInt(e.css("borderBottomWidth"));x=E+v+i.offset+8}}}c.css({"margin-left":t+"px","margin-top":aTop+"px"}).attr("class",F);if(l){clearTimeout(l)}l=window.setTimeout(function(){e.css({"margin-left":s+"px","margin-top":x+"px"}).stop(true,true).fadeIn(i.fadeIn)},i.delay)}function m(){if(!i.aHide&&!p||i.aHide){if(l){clearTimeout(l)}l=window.setTimeout(function(){n()},i.delay)}}function n(){if(!i.aHide&&!p||i.aHide){e.stop(true,true).fadeOut(i.fadeOut);i.hide.call(this)}else{window.setTimeout(function(){m()},200)}}}})}})(jQuery);