!function(t){t.fn.miniTip=function(o){var n={title:"",content:!1,delay:300,anchor:"top",fadeIn:200,fadeOut:200,aHide:!1,maxW:"250px",offset:5},i=t.extend(n,o);if(t("#miniTip").length<=0){var a=t('<div id="miniTip" style="max-width:'+i.maxW+';"><div id="miniTip_t"></div><div id="miniTip_c"></div><div id="miniTip_a"></div></div>');t("body").append(a)}var a=t("#miniTip"),e=t("#miniTip_t"),r=t("#miniTip_c"),d=t("#miniTip_a");return this.each(function(){function o(){r.html(f),e.html(i.title),d.removeAttr("class");var o=parseInt(h.offset().top),n=parseInt(h.offset().left),p=parseInt(h.outerWidth()),s=parseInt(h.outerHeight()),c=a.outerWidth(),u=a.outerHeight(),m=Math.round((p-c)/2),l=Math.round((s-u)/2),v=Math.round(n+m),T=Math.round(o+s+i.offset+8),M=Math.round(c-16)/2-parseInt(a.css("borderLeftWidth")),g=n+p+c+i.offset+8>parseInt(t(window).width()),I=c+i.offset+8>n,x=u+i.offset+8>o,w=o+s+u+i.offset+8>parseInt(t(window).height()+t(window).scrollTop());console.log(g,I,x,w);var b=i.anchor;I||"right"==i.anchor&&!g?(b="right",aTop=Math.round(u-21)/2,M=-12,v=Math.round(n+p+i.offset+8),T=Math.round(o+l)):(g||"left"==i.anchor&&!I)&&(b="left",aTop=Math.round(u-13)/2,M=Math.round(c),v=Math.round(n-(c+i.offset+16)),T=Math.round(o+l+8)),w||"top"==i.anchor&&!x?("top"!=i.anchor&&"bottom"!=i.anchor||(b="top"),aTop=u-4,T=Math.round(o-(u+i.offset+8))):(x||"bottom"==i.anchor&&!w)&&("top"!=i.anchor&&"bottom"!=i.anchor||(b="bottom"),aTop=-12,T=Math.round(o+s+i.offset+8)),d.css({"margin-left":M+"px","margin-top":aTop+"px"}).attr("class",b),a.css({"margin-left":v+"px","margin-top":T+"px"}).stop(!0,!0).fadeIn(i.fadeIn)}function n(){console.log("hide")}var f=i.content?i.content:t(this).attr("title");if(""!=f){var h=t(this);i.content||h.removeAttr("title"),h.hover(function(){o()},function(){n()})}})}}(jQuery);
