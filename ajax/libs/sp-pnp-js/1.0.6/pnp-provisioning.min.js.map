{"version":3,"sources":["pnp-provisioning.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","$pnp","Provisioning","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","util_1","Dictionary","keys","values","prototype","get","key","index","indexOf","add","push","merge","source","Util","isFunction","sourceAsDictionary","getKeys","sourceAsHash","hasOwnProperty","remove","val","splice","getValues","clear","count","../utils/util","2","setRuntimeConfig","config","_runtimeConfig","set","RuntimeConfigImpl","_headers","_defaultCachingStore","_defaultCachingTimeoutSeconds","_globalCacheDisable","_useSPRequestExecutor","headers","globalCacheDisable","defaultCachingStore","defaultCachingTimeoutSeconds","useSPRequestExecutor","_useNodeClient","_nodeClientData","nodeClientOptions","_spPageContextInfo","webAbsoluteUrl","siteUrl","Object","defineProperty","enumerable","configurable","RuntimeConfig","3","collections_1","odata_1","CachedDigest","DigestCache","_httpClient","_digests","getDigest","webUrl","cachedDigest","now","Date","expiration","Promise","resolve","value","url","combinePaths","fetchRaw","cache","credentials","Accept","Content-type","method","then","response","parser","ODataDefaultParser","parse","d","GetContextWebInformation","data","newCachedDigest","FormDigestValue","seconds","FormDigestTimeoutSeconds","setTime","getTime","../collections/collections","../sharepoint/rest/odata","4","FetchClient","fetch","options","5","fetchclient_1","digestcache_1","pnplibconfig_1","sprequestexecutorclient_1","nodefetchclient_1","HttpClient","_impl","getFetchImpl","_digestCache","opts","extend","Headers","mergeHeaders","has","append","toUpperCase","substr","digest","_this","rawHeaders","retry","ctx","catch","delay","status","reject","attempts","retryCount","setTimeout","getCtxCallback","retryContext","post","patch","delete","SPRequestExecutorClient","useNodeFetchClient","nodeRequestOptions","NodeFetchClient","clientId","clientSecret","target","temp","Request","forEach","name","../configuration/pnplibconfig","./digestcache","./fetchclient","./nodefetchclient","./sprequestexecutorclient","6","_clientId","_clientSecret","_realm","7","convertToResponse","spResponse","responseHeaders","h","Response","body","statusCode","statusText","SP","RequestExecutor","iterator","addinWebUrl","substring","executor","entries","next","done","requestOptions","error","success","binaryStringRequestBody","executeAsync","8","__extends","b","__","constructor","p","create","objecthandlerbase_1","ObjectComposedLook","_super","ProvisionObjects","object","scope_started","clientContext","ClientContext","get_current","web","get_web","colorPaletteUrl","ColorPaletteUrl","replaceUrlTokens","fontSchemeUrl","FontSchemeUrl","backgroundImageUrl","BackgroundImageUrl","applyTheme","getRelativeUrl","update","executeQueryAsync","scope_ended","ObjectHandlerBase","../util","./objecthandlerbase","9","ObjectCustomActions","customactions","userCustomActions","get_userCustomActions","load","obj","objExists","get_data","filter","userCustomAction","get_title","Title","objCreationInformation","Description","set_description","CommandUIExtension","set_commandUIExtension","Group","set_group","set_title","Url","set_url","ScriptBlock","set_scriptBlock","ScriptSrc","set_scriptSrc","Location","set_location","ImageUrl","set_imageUrl","Name","set_name","RegistrationId","set_registrationId","RegistrationType","set_registrationType","Rights","set_rights","Sequence","set_sequence","10","ObjectFeatures","features","webFeatures","get_features","Deactivate","Guid","ID","FeatureDefinitionScope","none","11","CoreUtil","ObjectFiles","objects","fileInfos","promises","httpClient","Src","text","all","responses","filename","GetFilenameFromFilePath","Dest","webServerRelativeUrl","folder","getFolderByServerRelativeUrl","GetFolderFromFilePath","fi","Contents","Filename","Folder","Instance","Overwrite","Properties","RemoveExistingWebParts","ServerRelativeUrl","Views","WebParts","FileCreationInformation","set_overwrite","set_content","Base64EncodedByteArray","get_content","charCodeAt","get_files","ApplyFileProperties","AddWebPartsToWebPartPage","ModifyHiddenViews","RemoveWebPartsFromFileIfSpecified","limitedWebPartManager","shouldRemoveExisting","existingWebParts","get_webParts","wp","deleteWebPart","GetWebPartXml","webParts","FileUrl","fileUrl","res","rej","Xml","dest","src","fileServerRelativeUrl","file","getFileByServerRelativeUrl","getLimitedWebPartManager","PersonalizationScope","shared","webPartsWithXml","oWebPartDefinition","importWebPart","oWebPart","get_webPart","addWebPart","Zone","Order","fileProperties","listItemAllFields","get_listItemAllFields","set_item","GetViewFromCollectionByUrl","viewCollection","serverRelativeUrl","viewCollectionEnumerator","getEnumerator","moveNext","view","get_serverRelativeUrl","toString","toLowerCase","mapping","lists","listViewCollections","v","List","get_lists","getByTitle","get_views","views","list","Paged","set_paged","Query","set_viewQuery","RowLimit","set_rowLimit","ViewFields","columns_1","get_viewFields","removeAll","vf","filePath","split","join","../../../utils/util","12","httpclient_1","logging_1","parameters","Logger","write","../../../net/httpclient","../../../utils/logging","13","sequencer_1","ObjectLists","listInstances","existingObj","undefined","EnableVersioning","set_enableVersioning","EnableMinorVersions","set_enableMinorVersions","EnableModeration","set_enableModeration","EnableFolderCreation","set_enableFolderCreation","EnableAttachments","set_enableAttachments","NoCrawl","set_noCrawl","DefaultDisplayFormUrl","set_defaultDisplayFormUrl","DefaultEditFormUrl","set_defaultEditFormUrl","DefaultNewFormUrl","set_defaultNewFormUrl","DraftVersionVisibility","set_draftVersionVisibility","DraftVisibilityType","Hidden","set_hidden","ForceCheckout","set_forceCheckout","ListCreationInformation","OnQuickLaunch","QuickLaunchOptions","on","off","set_quickLaunchOption","TemplateType","set_templateType","createdList","toLocaleLowerCase","sequencer","Sequencer","ApplyContentTypeBindings","ApplyListInstanceFieldRefs","ApplyFields","ApplyLookupFields","ApplyListSecurity","CreateViews","InsertDataRows","CreateFolders","ListInstances","Objects","execute","EnsureLocationBasedMetadataDefaultsReceiver","eventReceivers","get_eventReceivers","eventRecCreationInfo","EventReceiverDefinitionCreationInformation","set_receiverName","set_synchronization","set_sequenceNumber","set_receiverAssembly","set_receiverClass","set_eventType","EventReceiverType","itemAdded","params","Folders","folderServerRelativeUrl","rootFolder","get_rootFolder","metadataDefaults","setMetadataDefaults","folderUrl","get_folders","DefaultValues","metadataDefaultsFileCreateInfo","webCts","get_site","get_rootWeb","get_contentTypes","listCts","ContentTypeBindings","set_contentTypesEnabled","listContentTypes","existingContentTypes","Array","RemoveExistingContentTypes","ct","ctb","addExistingContentType","getById","ContentTypeId","j","ect","deleteObject","siteFields","get_fields","FieldRefs","fr","field","getByInternalNameOrTitle","Fields","fieldXml","GetFieldXml","fieldType","GetFieldXmlAttr","addFieldAsXml","AddFieldOptions","addToAllContentTypes","attr","regex","RegExp","match","exec","SchemaXml","properties_1","prop","targetList","get_id","Type","Formula","Security","BreakRoleInheritance","breakRoleInheritance","CopyRoleAssignments","ClearSubscopes","get_roleAssignments","allProperties","get_allProperties","siteGroups","get_siteGroups","roleDefinitions","get_roleDefinitions","RoleAssignments","ra","roleDef","RoleDefinition","getByName","roleBindings","RoleDefinitionBindingCollection","newObject","principal","Principal","token","groupId","get_fieldValues","viewExists","ev","RemoveExistingViews","Scope","set_scope","viewCreationInformation","ViewCreationInformation","PersonalView","set_personalView","set_query","SetAsDefaultView","set_setAsDefaultView","set_viewFields","ViewTypeKind","set_viewTypeKind","ViewType","html","DataRows","item","addItem","ListItemCreationInformation","../sequencer/sequencer","14","ObjectNavigation","navigation","get_navigation","ConfigureQuickLaunch","QuickLaunch","getNodeFromCollectionByTitle","nodeCollection","title","nodes","quickLaunchNodeCollection_1","get_quickLaunch","temporaryQuickLaunch","get_count","oldNode","itemAt","existingNode","newNode","NavigationNodeCreationInformation","get_url","set_asLastNode","json","node","getNodeById","Id","childrenNodeCollection","get_children","parentNode","Children","15","ObjectPropertyBagEntries","clientContext_1","web_1","propBag_1","indexedProperties_1","entry","Key","Value","Indexed","encodePropertyKey","16","ObjectWebSettings","WelcomePage","set_welcomePage","MasterUrl","set_masterUrl","CustomMasterUrl","set_customMasterUrl","SaveSiteAsTemplateEnabled","set_saveSiteAsTemplateEnabled","QuickLaunchEnabled","TreeViewEnabled","set_treeViewEnabled","17","provisioningstep_1","objectnavigation_1","objectpropertybagentries_1","objectfeatures_1","objectwebsettings_1","objectcomposedlook_1","objectcustomactions_1","objectfiles_1","objectlists_1","handlers","Navigation","PropertyBagEntries","Features","WebSettings","ComposedLook","CustomActions","Files","Lists","applyTemplate","path","ok","template","start","LogLevel","queue","startTime","queueItems","q","ProvisioningStep","Parameters","Info","JSON","stringify","../../net/httpclient","../../utils/logging","./objecthandlers/objectcomposedlook","./objecthandlers/objectcustomactions","./objecthandlers/objectfeatures","./objecthandlers/objectfiles","./objecthandlers/objectlists","./objecthandlers/objectnavigation","./objecthandlers/objectpropertybagentries","./objecthandlers/objectwebsettings","./provisioningstep","./util","18","handler","dependentPromise","_handler","19","functions","parameter","scope","progressFunction","promiseSequence","sequenceFunction","functionNr","result","20","replace","document","location","protocol","hostname","siteAbsoluteUrl","propKey","bytes","b64encoded","btoa","String","fromCharCode","apply","21","extractOdataId","candidate","__metadata","id","log","level","message","getEntityUrl","entity","uri","Warning","ODataValue","ODataValueParserImpl","ODataEntity","factory","ODataEntityParserImpl","ODataEntityArray","ODataEntityArrayParserImpl","ODataParserBase","parseODataJSON","results","arguments","ODataRawParserImpl","map","ODataRaw","ODataBatch","baseUrl","_batchId","getGUID","_requests","_batchDependencies","info","addBatchDependency","resolver","promise","executeImpl","batchBody","currentChangeSetId","reqInfo","Content-Type","name_1","batchHeaders","batchOptions","client","requestUrl","makeUrlAbsolute","_parseResponse","chain","_loop_1","request","_","header","statusRegExp","lines","state","line","trim","parts","parseInt","../../configuration/pnplibconfig","../../utils/util","22","instance","activeLogLevel","_instance","LoggerImpl","subscribe","listeners","_i","clearSubscribers","Verbose","measure","subscribers","listener","slice","console","profile","profileEnd","ConsoleListener","msg","format","warn","AzureInsightsListener","azureInsightsInstrumentationKey","appInsights","createElement","getElementsByTagName","appendChild","cookie","pop","disableExceptionTracking","instrumentationKey","ai","trackException","trackEvent","FunctionListener","23","context","urlParamExists","test","search","getUrlParamByName","decodeURIComponent","getUrlParamBoolByName","isFalse","stringInsert","dateAdd","date","interval","units","ret","toLocaleString","setFullYear","getFullYear","setMonth","getMonth","setDate","getDate","loadStylesheet","avoidCache","encodeURIComponent","head","setAttribute","paths","getRandomString","chars","possible","charAt","Math","floor","random","guid","c","candidateFunction","isArray","array","stringIsNullOrEmpty","noOverwrite","check","applyMixins","derivedCtor","baseCtors","baseCtor","getOwnPropertyNames","isUrlAbsolute"],"mappings":"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","file":"pnp-provisioning.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}(g.$pnp || (g.$pnp = {})).Provisioning = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\nvar util_1 = require(\"../utils/util\");\nvar Dictionary = (function () {\n    function Dictionary() {\n        this.keys = [];\n        this.values = [];\n    }\n    Dictionary.prototype.get = function (key) {\n        var index = this.keys.indexOf(key);\n        if (index < 0) {\n            return null;\n        }\n        return this.values[index];\n    };\n    Dictionary.prototype.add = function (key, o) {\n        var index = this.keys.indexOf(key);\n        if (index > -1) {\n            this.values[index] = o;\n        }\n        else {\n            this.keys.push(key);\n            this.values.push(o);\n        }\n    };\n    Dictionary.prototype.merge = function (source) {\n        if (util_1.Util.isFunction(source[\"getKeys\"])) {\n            var sourceAsDictionary = source;\n            var keys = sourceAsDictionary.getKeys();\n            var l = keys.length;\n            for (var i = 0; i < l; i++) {\n                this.add(keys[i], sourceAsDictionary.get(keys[i]));\n            }\n        }\n        else {\n            var sourceAsHash = source;\n            for (var key in sourceAsHash) {\n                if (sourceAsHash.hasOwnProperty(key)) {\n                    this.add(key, source[key]);\n                }\n            }\n        }\n    };\n    Dictionary.prototype.remove = function (key) {\n        var index = this.keys.indexOf(key);\n        if (index < 0) {\n            return null;\n        }\n        var val = this.values[index];\n        this.keys.splice(index, 1);\n        this.values.splice(index, 1);\n        return val;\n    };\n    Dictionary.prototype.getKeys = function () {\n        return this.keys;\n    };\n    Dictionary.prototype.getValues = function () {\n        return this.values;\n    };\n    Dictionary.prototype.clear = function () {\n        this.keys = [];\n        this.values = [];\n    };\n    Dictionary.prototype.count = function () {\n        return this.keys.length;\n    };\n    return Dictionary;\n}());\nexports.Dictionary = Dictionary;\n\n},{\"../utils/util\":23}],2:[function(require,module,exports){\n(function (global){\n\"use strict\";\nvar RuntimeConfigImpl = (function () {\n    function RuntimeConfigImpl() {\n        this._headers = null;\n        this._defaultCachingStore = \"session\";\n        this._defaultCachingTimeoutSeconds = 30;\n        this._globalCacheDisable = false;\n        this._useSPRequestExecutor = false;\n    }\n    RuntimeConfigImpl.prototype.set = function (config) {\n        if (config.hasOwnProperty(\"headers\")) {\n            this._headers = config.headers;\n        }\n        if (config.hasOwnProperty(\"globalCacheDisable\")) {\n            this._globalCacheDisable = config.globalCacheDisable;\n        }\n        if (config.hasOwnProperty(\"defaultCachingStore\")) {\n            this._defaultCachingStore = config.defaultCachingStore;\n        }\n        if (config.hasOwnProperty(\"defaultCachingTimeoutSeconds\")) {\n            this._defaultCachingTimeoutSeconds = config.defaultCachingTimeoutSeconds;\n        }\n        if (config.hasOwnProperty(\"useSPRequestExecutor\")) {\n            this._useSPRequestExecutor = config.useSPRequestExecutor;\n        }\n        if (config.hasOwnProperty(\"nodeClientOptions\")) {\n            this._useNodeClient = true;\n            this._useSPRequestExecutor = false;\n            this._nodeClientData = config.nodeClientOptions;\n            global._spPageContextInfo = {\n                webAbsoluteUrl: config.nodeClientOptions.siteUrl,\n            };\n        }\n    };\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"headers\", {\n        get: function () {\n            return this._headers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"defaultCachingStore\", {\n        get: function () {\n            return this._defaultCachingStore;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"defaultCachingTimeoutSeconds\", {\n        get: function () {\n            return this._defaultCachingTimeoutSeconds;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"globalCacheDisable\", {\n        get: function () {\n            return this._globalCacheDisable;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"useSPRequestExecutor\", {\n        get: function () {\n            return this._useSPRequestExecutor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"useNodeFetchClient\", {\n        get: function () {\n            return this._useNodeClient;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"nodeRequestOptions\", {\n        get: function () {\n            return this._nodeClientData;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return RuntimeConfigImpl;\n}());\nexports.RuntimeConfigImpl = RuntimeConfigImpl;\nvar _runtimeConfig = new RuntimeConfigImpl();\nexports.RuntimeConfig = _runtimeConfig;\nfunction setRuntimeConfig(config) {\n    _runtimeConfig.set(config);\n}\nexports.setRuntimeConfig = setRuntimeConfig;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],3:[function(require,module,exports){\n\"use strict\";\nvar collections_1 = require(\"../collections/collections\");\nvar util_1 = require(\"../utils/util\");\nvar odata_1 = require(\"../sharepoint/rest/odata\");\nvar CachedDigest = (function () {\n    function CachedDigest() {\n    }\n    return CachedDigest;\n}());\nexports.CachedDigest = CachedDigest;\nvar DigestCache = (function () {\n    function DigestCache(_httpClient, _digests) {\n        if (_digests === void 0) { _digests = new collections_1.Dictionary(); }\n        this._httpClient = _httpClient;\n        this._digests = _digests;\n    }\n    DigestCache.prototype.getDigest = function (webUrl) {\n        var self = this;\n        var cachedDigest = this._digests.get(webUrl);\n        if (cachedDigest !== null) {\n            var now = new Date();\n            if (now < cachedDigest.expiration) {\n                return Promise.resolve(cachedDigest.value);\n            }\n        }\n        var url = util_1.Util.combinePaths(webUrl, \"/_api/contextinfo\");\n        return self._httpClient.fetchRaw(url, {\n            cache: \"no-cache\",\n            credentials: \"same-origin\",\n            headers: {\n                \"Accept\": \"application/json;odata=verbose\",\n                \"Content-type\": \"application/json;odata=verbose;charset=utf-8\",\n            },\n            method: \"POST\",\n        }).then(function (response) {\n            var parser = new odata_1.ODataDefaultParser();\n            return parser.parse(response).then(function (d) { return d.GetContextWebInformation; });\n        }).then(function (data) {\n            var newCachedDigest = new CachedDigest();\n            newCachedDigest.value = data.FormDigestValue;\n            var seconds = data.FormDigestTimeoutSeconds;\n            var expiration = new Date();\n            expiration.setTime(expiration.getTime() + 1000 * seconds);\n            newCachedDigest.expiration = expiration;\n            self._digests.add(webUrl, newCachedDigest);\n            return newCachedDigest.value;\n        });\n    };\n    DigestCache.prototype.clear = function () {\n        this._digests.clear();\n    };\n    return DigestCache;\n}());\nexports.DigestCache = DigestCache;\n\n},{\"../collections/collections\":1,\"../sharepoint/rest/odata\":21,\"../utils/util\":23}],4:[function(require,module,exports){\n(function (global){\n\"use strict\";\nvar FetchClient = (function () {\n    function FetchClient() {\n    }\n    FetchClient.prototype.fetch = function (url, options) {\n        return global.fetch(url, options);\n    };\n    return FetchClient;\n}());\nexports.FetchClient = FetchClient;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],5:[function(require,module,exports){\n\"use strict\";\nvar fetchclient_1 = require(\"./fetchclient\");\nvar digestcache_1 = require(\"./digestcache\");\nvar util_1 = require(\"../utils/util\");\nvar pnplibconfig_1 = require(\"../configuration/pnplibconfig\");\nvar sprequestexecutorclient_1 = require(\"./sprequestexecutorclient\");\nvar nodefetchclient_1 = require(\"./nodefetchclient\");\nvar HttpClient = (function () {\n    function HttpClient() {\n        this._impl = this.getFetchImpl();\n        this._digestCache = new digestcache_1.DigestCache(this);\n    }\n    HttpClient.prototype.fetch = function (url, options) {\n        if (options === void 0) { options = {}; }\n        var self = this;\n        var opts = util_1.Util.extend(options, { cache: \"no-cache\", credentials: \"same-origin\" }, true);\n        var headers = new Headers();\n        this.mergeHeaders(headers, pnplibconfig_1.RuntimeConfig.headers);\n        this.mergeHeaders(headers, options.headers);\n        if (!headers.has(\"Accept\")) {\n            headers.append(\"Accept\", \"application/json\");\n        }\n        if (!headers.has(\"Content-Type\")) {\n            headers.append(\"Content-Type\", \"application/json;odata=verbose;charset=utf-8\");\n        }\n        if (!headers.has(\"X-ClientService-ClientTag\")) {\n            headers.append(\"X-ClientService-ClientTag\", \"PnPCoreJS:1.0.6\");\n        }\n        opts = util_1.Util.extend(opts, { headers: headers });\n        if (opts.method && opts.method.toUpperCase() !== \"GET\") {\n            if (!headers.has(\"X-RequestDigest\")) {\n                var index = url.indexOf(\"_api/\");\n                if (index < 0) {\n                    throw new Error(\"Unable to determine API url\");\n                }\n                var webUrl = url.substr(0, index);\n                return this._digestCache.getDigest(webUrl)\n                    .then(function (digest) {\n                    headers.append(\"X-RequestDigest\", digest);\n                    return self.fetchRaw(url, opts);\n                });\n            }\n        }\n        return self.fetchRaw(url, opts);\n    };\n    HttpClient.prototype.fetchRaw = function (url, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        var rawHeaders = new Headers();\n        this.mergeHeaders(rawHeaders, options.headers);\n        options = util_1.Util.extend(options, { headers: rawHeaders });\n        var retry = function (ctx) {\n            _this._impl.fetch(url, options).then(function (response) { return ctx.resolve(response); }).catch(function (response) {\n                var delay = ctx.delay;\n                if (response.status !== 429 && response.status !== 503) {\n                    ctx.reject(response);\n                }\n                ctx.delay *= 2;\n                ctx.attempts++;\n                if (ctx.retryCount <= ctx.attempts) {\n                    ctx.reject(response);\n                }\n                setTimeout(util_1.Util.getCtxCallback(_this, retry, ctx), delay);\n            });\n        };\n        return new Promise(function (resolve, reject) {\n            var retryContext = {\n                attempts: 0,\n                delay: 100,\n                reject: reject,\n                resolve: resolve,\n                retryCount: 7,\n            };\n            retry.call(_this, retryContext);\n        });\n    };\n    HttpClient.prototype.get = function (url, options) {\n        if (options === void 0) { options = {}; }\n        var opts = util_1.Util.extend(options, { method: \"GET\" });\n        return this.fetch(url, opts);\n    };\n    HttpClient.prototype.post = function (url, options) {\n        if (options === void 0) { options = {}; }\n        var opts = util_1.Util.extend(options, { method: \"POST\" });\n        return this.fetch(url, opts);\n    };\n    HttpClient.prototype.patch = function (url, options) {\n        if (options === void 0) { options = {}; }\n        var opts = util_1.Util.extend(options, { method: \"PATCH\" });\n        return this.fetch(url, opts);\n    };\n    HttpClient.prototype.delete = function (url, options) {\n        if (options === void 0) { options = {}; }\n        var opts = util_1.Util.extend(options, { method: \"DELETE\" });\n        return this.fetch(url, opts);\n    };\n    HttpClient.prototype.getFetchImpl = function () {\n        if (pnplibconfig_1.RuntimeConfig.useSPRequestExecutor) {\n            return new sprequestexecutorclient_1.SPRequestExecutorClient();\n        }\n        else if (pnplibconfig_1.RuntimeConfig.useNodeFetchClient) {\n            var opts = pnplibconfig_1.RuntimeConfig.nodeRequestOptions;\n            return new nodefetchclient_1.NodeFetchClient(opts.siteUrl, opts.clientId, opts.clientSecret);\n        }\n        else {\n            return new fetchclient_1.FetchClient();\n        }\n    };\n    HttpClient.prototype.mergeHeaders = function (target, source) {\n        if (typeof source !== \"undefined\" && source !== null) {\n            var temp = new Request(\"\", { headers: source });\n            temp.headers.forEach(function (value, name) {\n                target.append(name, value);\n            });\n        }\n    };\n    return HttpClient;\n}());\nexports.HttpClient = HttpClient;\n\n},{\"../configuration/pnplibconfig\":2,\"../utils/util\":23,\"./digestcache\":3,\"./fetchclient\":4,\"./nodefetchclient\":6,\"./sprequestexecutorclient\":7}],6:[function(require,module,exports){\n\"use strict\";\nvar NodeFetchClient = (function () {\n    function NodeFetchClient(siteUrl, _clientId, _clientSecret, _realm) {\n        if (_realm === void 0) { _realm = \"\"; }\n        this.siteUrl = siteUrl;\n        this._clientId = _clientId;\n        this._clientSecret = _clientSecret;\n        this._realm = _realm;\n    }\n    NodeFetchClient.prototype.fetch = function (url, options) {\n        throw new Error(\"Using NodeFetchClient in the browser is not supported.\");\n    };\n    return NodeFetchClient;\n}());\nexports.NodeFetchClient = NodeFetchClient;\n\n},{}],7:[function(require,module,exports){\n\"use strict\";\nvar util_1 = require(\"../utils/util\");\nvar SPRequestExecutorClient = (function () {\n    function SPRequestExecutorClient() {\n        this.convertToResponse = function (spResponse) {\n            var responseHeaders = new Headers();\n            for (var h in spResponse.headers) {\n                if (spResponse.headers[h]) {\n                    responseHeaders.append(h, spResponse.headers[h]);\n                }\n            }\n            return new Response(spResponse.body, {\n                headers: responseHeaders,\n                status: spResponse.statusCode,\n                statusText: spResponse.statusText,\n            });\n        };\n    }\n    SPRequestExecutorClient.prototype.fetch = function (url, options) {\n        var _this = this;\n        if (typeof SP === \"undefined\" || typeof SP.RequestExecutor === \"undefined\") {\n            throw new Error(\"SP.RequestExecutor is undefined. \" +\n                \"Load the SP.RequestExecutor.js library (/_layouts/15/SP.RequestExecutor.js) before loading the PnP JS Core library.\");\n        }\n        var addinWebUrl = url.substring(0, url.indexOf(\"/_api\")), executor = new SP.RequestExecutor(addinWebUrl), headers = {}, iterator, temp;\n        if (options.headers && options.headers instanceof Headers) {\n            iterator = options.headers.entries();\n            temp = iterator.next();\n            while (!temp.done) {\n                headers[temp.value[0]] = temp.value[1];\n                temp = iterator.next();\n            }\n        }\n        else {\n            headers = options.headers;\n        }\n        return new Promise(function (resolve, reject) {\n            var requestOptions = {\n                error: function (error) {\n                    reject(_this.convertToResponse(error));\n                },\n                headers: headers,\n                method: options.method,\n                success: function (response) {\n                    resolve(_this.convertToResponse(response));\n                },\n                url: url,\n            };\n            if (options.body) {\n                util_1.Util.extend(requestOptions, { body: options.body });\n            }\n            else {\n                util_1.Util.extend(requestOptions, { binaryStringRequestBody: true });\n            }\n            executor.executeAsync(requestOptions);\n        });\n    };\n    return SPRequestExecutorClient;\n}());\nexports.SPRequestExecutorClient = SPRequestExecutorClient;\n\n},{\"../utils/util\":23}],8:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar util_1 = require(\"../util\");\nvar objecthandlerbase_1 = require(\"./objecthandlerbase\");\nvar ObjectComposedLook = (function (_super) {\n    __extends(ObjectComposedLook, _super);\n    function ObjectComposedLook() {\n        _super.call(this, \"ComposedLook\");\n    }\n    ObjectComposedLook.prototype.ProvisionObjects = function (object) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var colorPaletteUrl = object.ColorPaletteUrl ? util_1.Util.replaceUrlTokens(object.ColorPaletteUrl) : \"\";\n            var fontSchemeUrl = object.FontSchemeUrl ? util_1.Util.replaceUrlTokens(object.FontSchemeUrl) : \"\";\n            var backgroundImageUrl = object.BackgroundImageUrl ? util_1.Util.replaceUrlTokens(object.BackgroundImageUrl) : null;\n            web.applyTheme(util_1.Util.getRelativeUrl(colorPaletteUrl), util_1.Util.getRelativeUrl(fontSchemeUrl), backgroundImageUrl, true);\n            web.update();\n            clientContext.executeQueryAsync(function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            });\n        });\n    };\n    return ObjectComposedLook;\n}(objecthandlerbase_1.ObjectHandlerBase));\nexports.ObjectComposedLook = ObjectComposedLook;\n\n},{\"../util\":20,\"./objecthandlerbase\":12}],9:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar objecthandlerbase_1 = require(\"./objecthandlerbase\");\nvar ObjectCustomActions = (function (_super) {\n    __extends(ObjectCustomActions, _super);\n    function ObjectCustomActions() {\n        _super.call(this, \"CustomActions\");\n    }\n    ObjectCustomActions.prototype.ProvisionObjects = function (customactions) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var userCustomActions = clientContext.get_web().get_userCustomActions();\n            clientContext.load(userCustomActions);\n            clientContext.executeQueryAsync(function () {\n                customactions.forEach(function (obj) {\n                    var objExists = userCustomActions.get_data().filter(function (userCustomAction) {\n                        return userCustomAction.get_title() === obj.Title;\n                    }).length > 0;\n                    if (!objExists) {\n                        var objCreationInformation = userCustomActions.add();\n                        if (obj.Description) {\n                            objCreationInformation.set_description(obj.Description);\n                        }\n                        if (obj.CommandUIExtension) {\n                            objCreationInformation.set_commandUIExtension(obj.CommandUIExtension);\n                        }\n                        if (obj.Group) {\n                            objCreationInformation.set_group(obj.Group);\n                        }\n                        if (obj.Title) {\n                            objCreationInformation.set_title(obj.Title);\n                        }\n                        if (obj.Url) {\n                            objCreationInformation.set_url(obj.Url);\n                        }\n                        if (obj.ScriptBlock) {\n                            objCreationInformation.set_scriptBlock(obj.ScriptBlock);\n                        }\n                        if (obj.ScriptSrc) {\n                            objCreationInformation.set_scriptSrc(obj.ScriptSrc);\n                        }\n                        if (obj.Location) {\n                            objCreationInformation.set_location(obj.Location);\n                        }\n                        if (obj.ImageUrl) {\n                            objCreationInformation.set_imageUrl(obj.ImageUrl);\n                        }\n                        if (obj.Name) {\n                            objCreationInformation.set_name(obj.Name);\n                        }\n                        if (obj.RegistrationId) {\n                            objCreationInformation.set_registrationId(obj.RegistrationId);\n                        }\n                        if (obj.RegistrationType) {\n                            objCreationInformation.set_registrationType(obj.RegistrationType);\n                        }\n                        if (obj.Rights) {\n                            objCreationInformation.set_rights(obj.Rights);\n                        }\n                        if (obj.Sequence) {\n                            objCreationInformation.set_sequence(obj.Sequence);\n                        }\n                        objCreationInformation.update();\n                    }\n                });\n                clientContext.executeQueryAsync(function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            });\n        });\n    };\n    return ObjectCustomActions;\n}(objecthandlerbase_1.ObjectHandlerBase));\nexports.ObjectCustomActions = ObjectCustomActions;\n\n},{\"./objecthandlerbase\":12}],10:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar objecthandlerbase_1 = require(\"./objecthandlerbase\");\nvar ObjectFeatures = (function (_super) {\n    __extends(ObjectFeatures, _super);\n    function ObjectFeatures() {\n        _super.call(this, \"Features\");\n    }\n    ObjectFeatures.prototype.ProvisionObjects = function (features) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var webFeatures = web.get_features();\n            features.forEach(function (f) {\n                if (f.Deactivate === true) {\n                    webFeatures.remove(new SP.Guid(f.ID), true);\n                }\n                else {\n                    webFeatures.add(new SP.Guid(f.ID), true, SP.FeatureDefinitionScope.none);\n                }\n            });\n            web.update();\n            clientContext.load(webFeatures);\n            clientContext.executeQueryAsync(function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            });\n        });\n    };\n    return ObjectFeatures;\n}(objecthandlerbase_1.ObjectHandlerBase));\nexports.ObjectFeatures = ObjectFeatures;\n\n},{\"./objecthandlerbase\":12}],11:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar CoreUtil = require(\"../../../utils/util\");\nvar util_1 = require(\"../util\");\nvar objecthandlerbase_1 = require(\"./objecthandlerbase\");\nvar ObjectFiles = (function (_super) {\n    __extends(ObjectFiles, _super);\n    function ObjectFiles() {\n        _super.call(this, \"Files\");\n    }\n    ObjectFiles.prototype.ProvisionObjects = function (objects) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var fileInfos = [];\n            var promises = [];\n            objects.forEach(function (obj, index) {\n                promises.push(_this.httpClient.fetchRaw(util_1.Util.replaceUrlTokens(obj.Src)).then(function (response) {\n                    return response.text();\n                }));\n            });\n            Promise.all(promises).then(function (responses) {\n                responses.forEach(function (response, index) {\n                    var obj = objects[index];\n                    var filename = _this.GetFilenameFromFilePath(obj.Dest);\n                    var webServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl;\n                    var folder = web.getFolderByServerRelativeUrl(webServerRelativeUrl + \"/\" + _this.GetFolderFromFilePath(obj.Dest));\n                    var fi = {\n                        Contents: response,\n                        Dest: obj.Dest,\n                        Filename: filename,\n                        Folder: folder,\n                        Instance: null,\n                        Overwrite: false,\n                        Properties: [],\n                        RemoveExistingWebParts: true,\n                        ServerRelativeUrl: obj.Dest,\n                        Src: obj.Src,\n                        Views: [],\n                        WebParts: [],\n                    };\n                    CoreUtil.Util.extend(fi, obj);\n                    if (fi.Filename.indexOf(\"Form.aspx\") !== -1) {\n                        return;\n                    }\n                    var objCreationInformation = new SP.FileCreationInformation();\n                    objCreationInformation.set_overwrite(fi.Overwrite);\n                    objCreationInformation.set_url(fi.Filename);\n                    objCreationInformation.set_content(new SP.Base64EncodedByteArray());\n                    for (var i = 0; i < fi.Contents.length; i++) {\n                        objCreationInformation.get_content().append(fi.Contents.charCodeAt(i));\n                    }\n                    clientContext.load(fi.Folder.get_files().add(objCreationInformation));\n                    fileInfos.push(fi);\n                });\n            });\n            clientContext.executeQueryAsync(function () {\n                promises = [];\n                fileInfos.forEach(function (fi) {\n                    if (fi.Properties && Object.keys(fi.Properties).length > 0) {\n                        promises.push(_this.ApplyFileProperties(fi.Dest, fi.Properties));\n                    }\n                    if (fi.WebParts && fi.WebParts.length > 0) {\n                        promises.push(_this.AddWebPartsToWebPartPage(fi.Dest, fi.Src, fi.WebParts, fi.RemoveExistingWebParts));\n                    }\n                });\n                Promise.all(promises).then(function () {\n                    _this.ModifyHiddenViews(objects).then(function (value) {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve(value);\n                    }, function (error) {\n                        _super.prototype.scope_ended.call(_this);\n                        reject(error);\n                    });\n                });\n            }, function (error) {\n                _super.prototype.scope_ended.call(_this);\n                reject(error);\n            });\n        });\n    };\n    ObjectFiles.prototype.RemoveWebPartsFromFileIfSpecified = function (clientContext, limitedWebPartManager, shouldRemoveExisting) {\n        return new Promise(function (resolve, reject) {\n            if (!shouldRemoveExisting) {\n                resolve();\n            }\n            var existingWebParts = limitedWebPartManager.get_webParts();\n            clientContext.load(existingWebParts);\n            clientContext.executeQueryAsync(function () {\n                existingWebParts.get_data().forEach(function (wp) {\n                    wp.deleteWebPart();\n                });\n                clientContext.load(existingWebParts);\n                clientContext.executeQueryAsync(resolve, reject);\n            }, reject);\n        });\n    };\n    ObjectFiles.prototype.GetWebPartXml = function (webParts) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var promises = [];\n            webParts.forEach(function (wp, index) {\n                if (wp.Contents.FileUrl) {\n                    var fileUrl = util_1.Util.replaceUrlTokens(wp.Contents.FileUrl);\n                    promises.push(_this.httpClient.fetchRaw(fileUrl).then(function (response) {\n                        return response.text();\n                    }));\n                }\n                else {\n                    promises.push((function () {\n                        return new Promise(function (res, rej) {\n                            res();\n                        });\n                    })());\n                }\n            });\n            Promise.all(promises).then(function (responses) {\n                responses.forEach(function (response, index) {\n                    var wp = webParts[index];\n                    if (wp !== null && response && response.length > 0) {\n                        wp.Contents.Xml = response;\n                    }\n                });\n                resolve(webParts);\n            });\n        });\n    };\n    ObjectFiles.prototype.AddWebPartsToWebPartPage = function (dest, src, webParts, shouldRemoveExisting) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var fileServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + dest;\n            var file = web.getFileByServerRelativeUrl(fileServerRelativeUrl);\n            clientContext.load(file);\n            clientContext.executeQueryAsync(function () {\n                var limitedWebPartManager = file.getLimitedWebPartManager(SP.WebParts.PersonalizationScope.shared);\n                _this.RemoveWebPartsFromFileIfSpecified(clientContext, limitedWebPartManager, shouldRemoveExisting).then(function () {\n                    _this.GetWebPartXml(webParts).then(function (webPartsWithXml) {\n                        webPartsWithXml.forEach(function (wp) {\n                            if (!wp.Contents.Xml) {\n                                return;\n                            }\n                            var oWebPartDefinition = limitedWebPartManager.importWebPart(util_1.Util.replaceUrlTokens(wp.Contents.Xml));\n                            var oWebPart = oWebPartDefinition.get_webPart();\n                            limitedWebPartManager.addWebPart(oWebPart, wp.Zone, wp.Order);\n                        });\n                        clientContext.executeQueryAsync(resolve, resolve);\n                    });\n                });\n            }, resolve);\n        });\n    };\n    ObjectFiles.prototype.ApplyFileProperties = function (dest, fileProperties) {\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var fileServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + dest;\n            var file = web.getFileByServerRelativeUrl(fileServerRelativeUrl);\n            var listItemAllFields = file.get_listItemAllFields();\n            Object.keys(fileProperties).forEach(function (key) {\n                listItemAllFields.set_item(key, fileProperties[key]);\n            });\n            listItemAllFields.update();\n            clientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    ObjectFiles.prototype.GetViewFromCollectionByUrl = function (viewCollection, url) {\n        var serverRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + url;\n        var viewCollectionEnumerator = viewCollection.getEnumerator();\n        while (viewCollectionEnumerator.moveNext()) {\n            var view = viewCollectionEnumerator.get_current();\n            if (view.get_serverRelativeUrl().toString().toLowerCase() === serverRelativeUrl.toLowerCase()) {\n                return view;\n            }\n        }\n        return null;\n    };\n    ObjectFiles.prototype.ModifyHiddenViews = function (objects) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var mapping = {};\n            var lists = [];\n            var listViewCollections = [];\n            objects.forEach(function (obj) {\n                if (!obj.Views) {\n                    return;\n                }\n                obj.Views.forEach(function (v) {\n                    mapping[v.List] = mapping[v.List] || [];\n                    mapping[v.List].push(CoreUtil.Util.extend(v, { \"Url\": obj.Dest }));\n                });\n            });\n            Object.keys(mapping).forEach(function (l, index) {\n                lists.push(web.get_lists().getByTitle(l));\n                listViewCollections.push(web.get_lists().getByTitle(l).get_views());\n                clientContext.load(lists[index]);\n                clientContext.load(listViewCollections[index]);\n            });\n            clientContext.executeQueryAsync(function () {\n                Object.keys(mapping).forEach(function (l, index) {\n                    var views = mapping[l];\n                    var list = lists[index];\n                    var viewCollection = listViewCollections[index];\n                    views.forEach(function (v) {\n                        var view = _this.GetViewFromCollectionByUrl(viewCollection, v.Url);\n                        if (view == null) {\n                            return;\n                        }\n                        if (v.Paged) {\n                            view.set_paged(v.Paged);\n                        }\n                        if (v.Query) {\n                            view.set_viewQuery(v.Query);\n                        }\n                        if (v.RowLimit) {\n                            view.set_rowLimit(v.RowLimit);\n                        }\n                        if (v.ViewFields && v.ViewFields.length > 0) {\n                            var columns_1 = view.get_viewFields();\n                            columns_1.removeAll();\n                            v.ViewFields.forEach(function (vf) {\n                                columns_1.add(vf);\n                            });\n                        }\n                        view.update();\n                    });\n                    clientContext.load(viewCollection);\n                    list.update();\n                });\n                clientContext.executeQueryAsync(resolve, resolve);\n            }, resolve);\n        });\n    };\n    ObjectFiles.prototype.GetFolderFromFilePath = function (filePath) {\n        var split = filePath.split(\"/\");\n        return split.splice(0, split.length - 1).join(\"/\");\n    };\n    ObjectFiles.prototype.GetFilenameFromFilePath = function (filePath) {\n        var split = filePath.split(\"/\");\n        return split[split.length - 1];\n    };\n    return ObjectFiles;\n}(objecthandlerbase_1.ObjectHandlerBase));\nexports.ObjectFiles = ObjectFiles;\n;\n\n},{\"../../../utils/util\":23,\"../util\":20,\"./objecthandlerbase\":12}],12:[function(require,module,exports){\n\"use strict\";\nvar httpclient_1 = require(\"../../../net/httpclient\");\nvar logging_1 = require(\"../../../utils/logging\");\nvar ObjectHandlerBase = (function () {\n    function ObjectHandlerBase(name) {\n        this.name = name;\n        this.httpClient = new httpclient_1.HttpClient();\n    }\n    ObjectHandlerBase.prototype.ProvisionObjects = function (objects, parameters) {\n        return new Promise(function (resolve, reject) { resolve(\"Not implemented.\"); });\n    };\n    ObjectHandlerBase.prototype.scope_started = function () {\n        logging_1.Logger.write(this.name + \": Code execution scope started\");\n    };\n    ObjectHandlerBase.prototype.scope_ended = function () {\n        logging_1.Logger.write(this.name + \": Code execution scope stopped\");\n    };\n    return ObjectHandlerBase;\n}());\nexports.ObjectHandlerBase = ObjectHandlerBase;\n\n},{\"../../../net/httpclient\":5,\"../../../utils/logging\":22}],13:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar sequencer_1 = require(\"../sequencer/sequencer\");\nvar objecthandlerbase_1 = require(\"./objecthandlerbase\");\nvar ObjectLists = (function (_super) {\n    __extends(ObjectLists, _super);\n    function ObjectLists() {\n        _super.call(this, \"Lists\");\n    }\n    ObjectLists.prototype.ProvisionObjects = function (objects) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var lists = clientContext.get_web().get_lists();\n            var listInstances = [];\n            clientContext.load(lists);\n            clientContext.executeQueryAsync(function () {\n                objects.forEach(function (obj, index) {\n                    var existingObj = lists.get_data().filter(function (list) {\n                        return list.get_title() === obj.Title;\n                    })[0];\n                    if (existingObj) {\n                        if (obj.Description) {\n                            existingObj.set_description(obj.Description);\n                        }\n                        if (obj.EnableVersioning !== undefined) {\n                            existingObj.set_enableVersioning(obj.EnableVersioning);\n                        }\n                        if (obj.EnableMinorVersions !== undefined) {\n                            existingObj.set_enableMinorVersions(obj.EnableMinorVersions);\n                        }\n                        if (obj.EnableModeration !== undefined) {\n                            existingObj.set_enableModeration(obj.EnableModeration);\n                        }\n                        if (obj.EnableFolderCreation !== undefined) {\n                            existingObj.set_enableFolderCreation(obj.EnableFolderCreation);\n                        }\n                        if (obj.EnableAttachments !== undefined) {\n                            existingObj.set_enableAttachments(obj.EnableAttachments);\n                        }\n                        if (obj.NoCrawl !== undefined) {\n                            existingObj.set_noCrawl(obj.NoCrawl);\n                        }\n                        if (obj.DefaultDisplayFormUrl) {\n                            existingObj.set_defaultDisplayFormUrl(obj.DefaultDisplayFormUrl);\n                        }\n                        if (obj.DefaultEditFormUrl) {\n                            existingObj.set_defaultEditFormUrl(obj.DefaultEditFormUrl);\n                        }\n                        if (obj.DefaultNewFormUrl) {\n                            existingObj.set_defaultNewFormUrl(obj.DefaultNewFormUrl);\n                        }\n                        if (obj.DraftVersionVisibility) {\n                            existingObj.set_draftVersionVisibility(SP.DraftVisibilityType[obj.DraftVersionVisibility]);\n                        }\n                        if (obj.ImageUrl) {\n                            existingObj.set_imageUrl(obj.ImageUrl);\n                        }\n                        if (obj.Hidden !== undefined) {\n                            existingObj.set_hidden(obj.Hidden);\n                        }\n                        if (obj.ForceCheckout !== undefined) {\n                            existingObj.set_forceCheckout(obj.ForceCheckout);\n                        }\n                        existingObj.update();\n                        listInstances.push(existingObj);\n                        clientContext.load(listInstances[index]);\n                    }\n                    else {\n                        var objCreationInformation = new SP.ListCreationInformation();\n                        if (obj.Description) {\n                            objCreationInformation.set_description(obj.Description);\n                        }\n                        if (obj.OnQuickLaunch !== undefined) {\n                            var value = obj.OnQuickLaunch ? SP.QuickLaunchOptions.on : SP.QuickLaunchOptions.off;\n                            objCreationInformation.set_quickLaunchOption(value);\n                        }\n                        if (obj.TemplateType) {\n                            objCreationInformation.set_templateType(obj.TemplateType);\n                        }\n                        if (obj.Title) {\n                            objCreationInformation.set_title(obj.Title);\n                        }\n                        if (obj.Url) {\n                            objCreationInformation.set_url(obj.Url);\n                        }\n                        var createdList = lists.add(objCreationInformation);\n                        if (obj.EnableVersioning !== undefined) {\n                            createdList.set_enableVersioning(obj.EnableVersioning);\n                        }\n                        if (obj.EnableMinorVersions !== undefined) {\n                            createdList.set_enableMinorVersions(obj.EnableMinorVersions);\n                        }\n                        if (obj.EnableModeration !== undefined) {\n                            createdList.set_enableModeration(obj.EnableModeration);\n                        }\n                        if (obj.EnableFolderCreation !== undefined) {\n                            createdList.set_enableFolderCreation(obj.EnableFolderCreation);\n                        }\n                        if (obj.EnableAttachments !== undefined) {\n                            createdList.set_enableAttachments(obj.EnableAttachments);\n                        }\n                        if (obj.NoCrawl !== undefined) {\n                            createdList.set_noCrawl(obj.NoCrawl);\n                        }\n                        if (obj.DefaultDisplayFormUrl) {\n                            createdList.set_defaultDisplayFormUrl(obj.DefaultDisplayFormUrl);\n                        }\n                        if (obj.DefaultEditFormUrl) {\n                            createdList.set_defaultEditFormUrl(obj.DefaultEditFormUrl);\n                        }\n                        if (obj.DefaultNewFormUrl) {\n                            createdList.set_defaultNewFormUrl(obj.DefaultNewFormUrl);\n                        }\n                        if (obj.DraftVersionVisibility) {\n                            var value = SP.DraftVisibilityType[obj.DraftVersionVisibility.toLocaleLowerCase()];\n                            createdList.set_draftVersionVisibility(value);\n                        }\n                        if (obj.ImageUrl) {\n                            createdList.set_imageUrl(obj.ImageUrl);\n                        }\n                        if (obj.Hidden !== undefined) {\n                            createdList.set_hidden(obj.Hidden);\n                        }\n                        if (obj.ForceCheckout !== undefined) {\n                            createdList.set_forceCheckout(obj.ForceCheckout);\n                        }\n                        listInstances.push(createdList);\n                        clientContext.load(listInstances[index]);\n                    }\n                });\n                clientContext.executeQueryAsync(function () {\n                    var sequencer = new sequencer_1.Sequencer([\n                        _this.ApplyContentTypeBindings,\n                        _this.ApplyListInstanceFieldRefs,\n                        _this.ApplyFields,\n                        _this.ApplyLookupFields,\n                        _this.ApplyListSecurity,\n                        _this.CreateViews,\n                        _this.InsertDataRows,\n                        _this.CreateFolders,\n                    ], { ClientContext: clientContext, ListInstances: listInstances, Objects: objects }, _this);\n                    sequencer.execute().then(function () {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve();\n                    });\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            });\n        });\n    };\n    ObjectLists.prototype.EnsureLocationBasedMetadataDefaultsReceiver = function (clientContext, list) {\n        var eventReceivers = list.get_eventReceivers();\n        var eventRecCreationInfo = new SP.EventReceiverDefinitionCreationInformation();\n        eventRecCreationInfo.set_receiverName(\"LocationBasedMetadataDefaultsReceiver ItemAdded\");\n        eventRecCreationInfo.set_synchronization(1);\n        eventRecCreationInfo.set_sequenceNumber(1000);\n        eventRecCreationInfo.set_receiverAssembly(\"Microsoft.Office.DocumentManagement, Version=15.0.0.0, Culture=neutral, \" +\n            \"PublicKeyToken=71e9bce111e9429c\");\n        eventRecCreationInfo.set_receiverClass(\"Microsoft.Office.DocumentManagement.LocationBasedMetadataDefaultsReceiver\");\n        eventRecCreationInfo.set_eventType(SP.EventReceiverType.itemAdded);\n        eventReceivers.add(eventRecCreationInfo);\n        list.update();\n    };\n    ObjectLists.prototype.CreateFolders = function (params) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (!obj.Folders) {\n                    return;\n                }\n                var folderServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + obj.Url;\n                var rootFolder = l.get_rootFolder();\n                var metadataDefaults = \"<MetadataDefaults>\";\n                var setMetadataDefaults = false;\n                obj.Folders.forEach(function (f) {\n                    var folderUrl = folderServerRelativeUrl + \"/\" + f.Name;\n                    rootFolder.get_folders().add(folderUrl);\n                    if (f.DefaultValues) {\n                        var keys = Object.keys(f.DefaultValues).length;\n                        if (keys > 0) {\n                            metadataDefaults += \"<a href='\" + folderUrl + \"'>\";\n                            Object.keys(f.DefaultValues).forEach(function (key) {\n                                metadataDefaults += \"<DefaultValue FieldName=\\\"\" + key + \"\\\">\" + f.DefaultValues[key] + \"</DefaultValue>\";\n                            });\n                            metadataDefaults += \"</a>\";\n                        }\n                        setMetadataDefaults = true;\n                    }\n                });\n                metadataDefaults += \"</MetadataDefaults>\";\n                if (setMetadataDefaults) {\n                    var metadataDefaultsFileCreateInfo = new SP.FileCreationInformation();\n                    metadataDefaultsFileCreateInfo.set_url(folderServerRelativeUrl + \"/Forms/client_LocationBasedDefaults.html\");\n                    metadataDefaultsFileCreateInfo.set_content(new SP.Base64EncodedByteArray());\n                    metadataDefaultsFileCreateInfo.set_overwrite(true);\n                    for (var i = 0; i < metadataDefaults.length; i++) {\n                        metadataDefaultsFileCreateInfo.get_content().append(metadataDefaults.charCodeAt(i));\n                    }\n                    rootFolder.get_files().add(metadataDefaultsFileCreateInfo);\n                    _this.EnsureLocationBasedMetadataDefaultsReceiver(params.ClientContext, l);\n                }\n            });\n            params.ClientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    ObjectLists.prototype.ApplyContentTypeBindings = function (params) {\n        return new Promise(function (resolve, reject) {\n            var webCts = params.ClientContext.get_site().get_rootWeb().get_contentTypes();\n            var listCts = [];\n            params.ListInstances.forEach(function (l, index) {\n                listCts.push(l.get_contentTypes());\n                params.ClientContext.load(listCts[index], \"Include(Name,Id)\");\n                if (params.Objects[index].ContentTypeBindings) {\n                    l.set_contentTypesEnabled(true);\n                    l.update();\n                }\n            });\n            params.ClientContext.load(webCts);\n            params.ClientContext.executeQueryAsync(function () {\n                params.ListInstances.forEach(function (list, index) {\n                    var obj = params.Objects[index];\n                    if (!obj.ContentTypeBindings) {\n                        return;\n                    }\n                    var listContentTypes = listCts[index];\n                    var existingContentTypes = new Array();\n                    if (obj.RemoveExistingContentTypes && obj.ContentTypeBindings.length > 0) {\n                        listContentTypes.get_data().forEach(function (ct) {\n                            existingContentTypes.push(ct);\n                        });\n                    }\n                    obj.ContentTypeBindings.forEach(function (ctb) {\n                        listContentTypes.addExistingContentType(webCts.getById(ctb.ContentTypeId));\n                    });\n                    if (obj.RemoveExistingContentTypes && obj.ContentTypeBindings.length > 0) {\n                        for (var j = 0; j < existingContentTypes.length; j++) {\n                            var ect = existingContentTypes[j];\n                            ect.deleteObject();\n                        }\n                    }\n                    list.update();\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            }, resolve);\n        });\n    };\n    ObjectLists.prototype.ApplyListInstanceFieldRefs = function (params) {\n        return new Promise(function (resolve, reject) {\n            var siteFields = params.ClientContext.get_site().get_rootWeb().get_fields();\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (obj.FieldRefs) {\n                    obj.FieldRefs.forEach(function (fr) {\n                        var field = siteFields.getByInternalNameOrTitle(fr.Name);\n                        l.get_fields().add(field);\n                    });\n                    l.update();\n                }\n            });\n            params.ClientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    ObjectLists.prototype.ApplyFields = function (params) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (obj.Fields) {\n                    obj.Fields.forEach(function (f) {\n                        var fieldXml = _this.GetFieldXml(f, params.ListInstances, l);\n                        var fieldType = _this.GetFieldXmlAttr(fieldXml, \"Type\");\n                        if (fieldType !== \"Lookup\" && fieldType !== \"LookupMulti\") {\n                            l.get_fields().addFieldAsXml(fieldXml, true, SP.AddFieldOptions.addToAllContentTypes);\n                        }\n                    });\n                    l.update();\n                }\n            });\n            params.ClientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    ObjectLists.prototype.ApplyLookupFields = function (params) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (obj.Fields) {\n                    obj.Fields.forEach(function (f) {\n                        var fieldXml = _this.GetFieldXml(f, params.ListInstances, l);\n                        if (!fieldXml) {\n                            return;\n                        }\n                        var fieldType = _this.GetFieldXmlAttr(fieldXml, \"Type\");\n                        if (fieldType === \"Lookup\" || fieldType === \"LookupMulti\") {\n                            l.get_fields().addFieldAsXml(fieldXml, true, SP.AddFieldOptions.addToAllContentTypes);\n                        }\n                    });\n                    l.update();\n                }\n            });\n            params.ClientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    ObjectLists.prototype.GetFieldXmlAttr = function (fieldXml, attr) {\n        var regex = new RegExp(attr + '=[\\'|\\\"](?:(.+?))[\\'|\\\"]');\n        var match = regex.exec(fieldXml);\n        return match[1];\n    };\n    ObjectLists.prototype.GetFieldXml = function (field, lists, list) {\n        var fieldXml = \"\";\n        if (!field.SchemaXml) {\n            var properties_1 = [];\n            Object.keys(field).forEach(function (prop) {\n                var value = field[prop];\n                properties_1.push(prop + \"=\\\"\" + value + \"\\\"\");\n                if (prop === \"List\") {\n                    var targetList = lists.filter(function (v) {\n                        return v.get_title() === value;\n                    });\n                    if (targetList.length > 0) {\n                        value = \"{\" + targetList[0].get_id().toString() + \"}\";\n                    }\n                    else {\n                        return null;\n                    }\n                }\n            });\n            fieldXml = \"<Field \" + properties_1.join(\" \") + \">\";\n            if (field.Type === \"Calculated\") {\n                fieldXml += \"<Formula>\" + field.Formula + \"</Formula>\";\n            }\n            fieldXml += \"</Field>\";\n        }\n        return fieldXml;\n    };\n    ObjectLists.prototype.ApplyListSecurity = function (params) {\n        return new Promise(function (resolve, reject) {\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (!obj.Security) {\n                    return;\n                }\n                if (obj.Security.BreakRoleInheritance) {\n                    l.breakRoleInheritance(obj.Security.CopyRoleAssignments, obj.Security.ClearSubscopes);\n                    l.update();\n                    params.ClientContext.load(l.get_roleAssignments());\n                }\n            });\n            var web = params.ClientContext.get_web();\n            var allProperties = web.get_allProperties();\n            var siteGroups = web.get_siteGroups();\n            var roleDefinitions = web.get_roleDefinitions();\n            params.ClientContext.load(allProperties);\n            params.ClientContext.load(roleDefinitions);\n            params.ClientContext.executeQueryAsync(function () {\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (!obj.Security) {\n                        return;\n                    }\n                    obj.Security.RoleAssignments.forEach(function (ra) {\n                        var roleDef = null;\n                        if (typeof ra.RoleDefinition === \"number\") {\n                            roleDef = roleDefinitions.getById(ra.RoleDefinition);\n                        }\n                        else {\n                            roleDef = roleDefinitions.getByName(ra.RoleDefinition);\n                        }\n                        var roleBindings = SP.RoleDefinitionBindingCollection.newObject(params.ClientContext);\n                        roleBindings.add(roleDef);\n                        var principal = null;\n                        if (ra.Principal.match(/\\{[A-Za-z]*\\}+/g)) {\n                            var token = ra.Principal.substring(1, ra.Principal.length - 1);\n                            var groupId = allProperties.get_fieldValues()[(\"vti_\" + token)];\n                            principal = siteGroups.getById(groupId);\n                        }\n                        else {\n                            principal = siteGroups.getByName(principal);\n                        }\n                        l.get_roleAssignments().add(principal, roleBindings);\n                    });\n                    l.update();\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            }, resolve);\n        });\n    };\n    ObjectLists.prototype.CreateViews = function (params) {\n        return new Promise(function (resolve, reject) {\n            var listViewCollections = [];\n            params.ListInstances.forEach(function (l, index) {\n                listViewCollections.push(l.get_views());\n                params.ClientContext.load(listViewCollections[index]);\n            });\n            params.ClientContext.executeQueryAsync(function () {\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (!obj.Views) {\n                        return;\n                    }\n                    listViewCollections.push(l.get_views());\n                    params.ClientContext.load(listViewCollections[index]);\n                    obj.Views.forEach(function (v) {\n                        var viewExists = listViewCollections[index].get_data().filter(function (ev) {\n                            if (obj.RemoveExistingViews && obj.Views.length > 0) {\n                                ev.deleteObject();\n                                return false;\n                            }\n                            return ev.get_title() === v.Title;\n                        }).length > 0;\n                        if (viewExists) {\n                            var view = listViewCollections[index].getByTitle(v.Title);\n                            if (v.Paged) {\n                                view.set_paged(v.Paged);\n                            }\n                            if (v.Query) {\n                                view.set_viewQuery(v.Query);\n                            }\n                            if (v.RowLimit) {\n                                view.set_rowLimit(v.RowLimit);\n                            }\n                            if (v.ViewFields && v.ViewFields.length > 0) {\n                                var columns_1 = view.get_viewFields();\n                                columns_1.removeAll();\n                                v.ViewFields.forEach(function (vf) {\n                                    columns_1.add(vf);\n                                });\n                            }\n                            if (v.Scope) {\n                                view.set_scope(v.Scope);\n                            }\n                            view.update();\n                        }\n                        else {\n                            var viewCreationInformation = new SP.ViewCreationInformation();\n                            if (v.Title) {\n                                viewCreationInformation.set_title(v.Title);\n                            }\n                            if (v.PersonalView) {\n                                viewCreationInformation.set_personalView(v.PersonalView);\n                            }\n                            if (v.Paged) {\n                                viewCreationInformation.set_paged(v.Paged);\n                            }\n                            if (v.Query) {\n                                viewCreationInformation.set_query(v.Query);\n                            }\n                            if (v.RowLimit) {\n                                viewCreationInformation.set_rowLimit(v.RowLimit);\n                            }\n                            if (v.SetAsDefaultView) {\n                                viewCreationInformation.set_setAsDefaultView(v.SetAsDefaultView);\n                            }\n                            if (v.ViewFields) {\n                                viewCreationInformation.set_viewFields(v.ViewFields);\n                            }\n                            if (v.ViewTypeKind) {\n                                viewCreationInformation.set_viewTypeKind(SP.ViewType.html);\n                            }\n                            var view = l.get_views().add(viewCreationInformation);\n                            if (v.Scope) {\n                                view.set_scope(v.Scope);\n                                view.update();\n                            }\n                            l.update();\n                        }\n                        params.ClientContext.load(l.get_views());\n                    });\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            }, resolve);\n        });\n    };\n    ObjectLists.prototype.InsertDataRows = function (params) {\n        return new Promise(function (resolve, reject) {\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (obj.DataRows) {\n                    obj.DataRows.forEach(function (r) {\n                        var item = l.addItem(new SP.ListItemCreationInformation());\n                        Object.keys(r).forEach(function (key) {\n                            item.set_item(key, r[key]);\n                        });\n                        item.update();\n                        params.ClientContext.load(item);\n                    });\n                }\n            });\n            params.ClientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    return ObjectLists;\n}(objecthandlerbase_1.ObjectHandlerBase));\nexports.ObjectLists = ObjectLists;\n\n},{\"../sequencer/sequencer\":19,\"./objecthandlerbase\":12}],14:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar util_1 = require(\"../util\");\nvar objecthandlerbase_1 = require(\"./objecthandlerbase\");\nvar ObjectNavigation = (function (_super) {\n    __extends(ObjectNavigation, _super);\n    function ObjectNavigation() {\n        _super.call(this, \"Navigation\");\n    }\n    ObjectNavigation.prototype.ProvisionObjects = function (object) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        var clientContext = SP.ClientContext.get_current();\n        var navigation = clientContext.get_web().get_navigation();\n        return new Promise(function (resolve, reject) {\n            _this.ConfigureQuickLaunch(object.QuickLaunch, clientContext, _this.httpClient, navigation).then(function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                reject();\n            });\n        });\n    };\n    ObjectNavigation.prototype.getNodeFromCollectionByTitle = function (nodeCollection, title) {\n        var f = nodeCollection.filter(function (val) {\n            return val.get_title() === title;\n        });\n        return f[0] || null;\n    };\n    ;\n    ObjectNavigation.prototype.ConfigureQuickLaunch = function (nodes, clientContext, httpClient, navigation) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (nodes.length === 0) {\n                resolve();\n            }\n            else {\n                var quickLaunchNodeCollection_1 = navigation.get_quickLaunch();\n                clientContext.load(quickLaunchNodeCollection_1);\n                clientContext.executeQueryAsync(function () {\n                    var temporaryQuickLaunch = [];\n                    var index = quickLaunchNodeCollection_1.get_count() - 1;\n                    while (index >= 0) {\n                        var oldNode = quickLaunchNodeCollection_1.itemAt(index);\n                        temporaryQuickLaunch.push(oldNode);\n                        oldNode.deleteObject();\n                        index--;\n                    }\n                    clientContext.executeQueryAsync(function () {\n                        nodes.forEach(function (n) {\n                            var existingNode = _this.getNodeFromCollectionByTitle(temporaryQuickLaunch, n.Title);\n                            var newNode = new SP.NavigationNodeCreationInformation();\n                            newNode.set_title(n.Title);\n                            newNode.set_url(existingNode ? existingNode.get_url() : util_1.Util.replaceUrlTokens(n.Url));\n                            newNode.set_asLastNode(true);\n                            quickLaunchNodeCollection_1.add(newNode);\n                        });\n                        clientContext.executeQueryAsync(function () {\n                            httpClient.get(_spPageContextInfo.webAbsoluteUrl + \"/_api/web/Navigation/QuickLaunch\").then(function (response) {\n                                response.json().then(function (json) {\n                                    json.value.forEach(function (d) {\n                                        var node = navigation.getNodeById(d.Id);\n                                        var childrenNodeCollection = node.get_children();\n                                        var parentNode = nodes.filter(function (value) { return value.Title === d.Title; })[0];\n                                        if (parentNode && parentNode.Children) {\n                                            parentNode.Children.forEach(function (n) {\n                                                var existingNode = _this.getNodeFromCollectionByTitle(temporaryQuickLaunch, n.Title);\n                                                var newNode = new SP.NavigationNodeCreationInformation();\n                                                newNode.set_title(n.Title);\n                                                newNode.set_url(existingNode\n                                                    ? existingNode.get_url()\n                                                    : util_1.Util.replaceUrlTokens(n.Url));\n                                                newNode.set_asLastNode(true);\n                                                childrenNodeCollection.add(newNode);\n                                            });\n                                        }\n                                    });\n                                    clientContext.executeQueryAsync(resolve, resolve);\n                                });\n                            });\n                        }, resolve);\n                    });\n                });\n            }\n        });\n    };\n    return ObjectNavigation;\n}(objecthandlerbase_1.ObjectHandlerBase));\nexports.ObjectNavigation = ObjectNavigation;\n\n},{\"../util\":20,\"./objecthandlerbase\":12}],15:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar util_1 = require(\"../util\");\nvar objecthandlerbase_1 = require(\"./objecthandlerbase\");\nvar ObjectPropertyBagEntries = (function (_super) {\n    __extends(ObjectPropertyBagEntries, _super);\n    function ObjectPropertyBagEntries() {\n        _super.call(this, \"PropertyBagEntries\");\n    }\n    ObjectPropertyBagEntries.prototype.ProvisionObjects = function (entries) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            if (!entries || entries.length === 0) {\n                resolve();\n            }\n            else {\n                var clientContext_1 = SP.ClientContext.get_current();\n                var web_1 = clientContext_1.get_web();\n                var propBag_1 = web_1.get_allProperties();\n                var indexedProperties_1 = [];\n                for (var i = 0; i < entries.length; i++) {\n                    var entry = entries[i];\n                    propBag_1.set_item(entry.Key, entry.Value);\n                    if (entry.Indexed) {\n                        indexedProperties_1.push(util_1.Util.encodePropertyKey(entry.Key));\n                    }\n                    ;\n                }\n                ;\n                web_1.update();\n                clientContext_1.load(propBag_1);\n                clientContext_1.executeQueryAsync(function () {\n                    if (indexedProperties_1.length > 0) {\n                        propBag_1.set_item(\"vti_indexedpropertykeys\", indexedProperties_1.join(\"|\"));\n                        web_1.update();\n                        clientContext_1.executeQueryAsync(function () {\n                            _super.prototype.scope_ended.call(_this);\n                            resolve();\n                        }, function () {\n                            _super.prototype.scope_ended.call(_this);\n                            resolve();\n                        });\n                    }\n                    else {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve();\n                    }\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            }\n        });\n    };\n    return ObjectPropertyBagEntries;\n}(objecthandlerbase_1.ObjectHandlerBase));\nexports.ObjectPropertyBagEntries = ObjectPropertyBagEntries;\n\n},{\"../util\":20,\"./objecthandlerbase\":12}],16:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar objecthandlerbase_1 = require(\"./objecthandlerbase\");\nvar ObjectWebSettings = (function (_super) {\n    __extends(ObjectWebSettings, _super);\n    function ObjectWebSettings() {\n        _super.call(this, \"WebSettings\");\n    }\n    ObjectWebSettings.prototype.ProvisionObjects = function (object) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            if (object.WelcomePage) {\n                web.get_rootFolder().set_welcomePage(object.WelcomePage);\n                web.get_rootFolder().update();\n            }\n            if (object.MasterUrl) {\n                web.set_masterUrl(object.MasterUrl);\n            }\n            if (object.CustomMasterUrl) {\n                web.set_customMasterUrl(object.CustomMasterUrl);\n            }\n            if (object.SaveSiteAsTemplateEnabled !== undefined) {\n                web.set_saveSiteAsTemplateEnabled(object.SaveSiteAsTemplateEnabled);\n            }\n            if (object.QuickLaunchEnabled !== undefined) {\n                web.set_saveSiteAsTemplateEnabled(object.QuickLaunchEnabled);\n            }\n            if (object.TreeViewEnabled !== undefined) {\n                web.set_treeViewEnabled(object.TreeViewEnabled);\n            }\n            web.update();\n            clientContext.load(web);\n            clientContext.executeQueryAsync(function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            });\n        });\n    };\n    return ObjectWebSettings;\n}(objecthandlerbase_1.ObjectHandlerBase));\nexports.ObjectWebSettings = ObjectWebSettings;\n\n},{\"./objecthandlerbase\":12}],17:[function(require,module,exports){\n\"use strict\";\nvar provisioningstep_1 = require(\"./provisioningstep\");\nvar objectnavigation_1 = require(\"./objecthandlers/objectnavigation\");\nvar objectpropertybagentries_1 = require(\"./objecthandlers/objectpropertybagentries\");\nvar objectfeatures_1 = require(\"./objecthandlers/objectfeatures\");\nvar objectwebsettings_1 = require(\"./objecthandlers/objectwebsettings\");\nvar objectcomposedlook_1 = require(\"./objecthandlers/objectcomposedlook\");\nvar objectcustomactions_1 = require(\"./objecthandlers/objectcustomactions\");\nvar objectfiles_1 = require(\"./objecthandlers/objectfiles\");\nvar objectlists_1 = require(\"./objecthandlers/objectlists\");\nvar util_1 = require(\"./util\");\nvar logging_1 = require(\"../../utils/logging\");\nvar httpclient_1 = require(\"../../net/httpclient\");\nvar Provisioning = (function () {\n    function Provisioning() {\n        this.handlers = {\n            \"Navigation\": objectnavigation_1.ObjectNavigation,\n            \"PropertyBagEntries\": objectpropertybagentries_1.ObjectPropertyBagEntries,\n            \"Features\": objectfeatures_1.ObjectFeatures,\n            \"WebSettings\": objectwebsettings_1.ObjectWebSettings,\n            \"ComposedLook\": objectcomposedlook_1.ObjectComposedLook,\n            \"CustomActions\": objectcustomactions_1.ObjectCustomActions,\n            \"Files\": objectfiles_1.ObjectFiles,\n            \"Lists\": objectlists_1.ObjectLists,\n        };\n        this.httpClient = new httpclient_1.HttpClient();\n    }\n    Provisioning.prototype.applyTemplate = function (path) {\n        var _this = this;\n        var url = util_1.Util.replaceUrlTokens(path);\n        return new Promise(function (resolve, reject) {\n            _this.httpClient.get(url).then(function (response) {\n                if (response.ok) {\n                    response.json().then(function (template) {\n                        _this.start(template, Object.keys(template)).then(resolve, reject);\n                    });\n                }\n                else {\n                    reject(response.statusText);\n                }\n            }, function (error) {\n                logging_1.Logger.write(\"Provisioning: The provided template is invalid\", logging_1.LogLevel.Error);\n            });\n        });\n    };\n    Provisioning.prototype.start = function (json, queue) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.startTime = new Date().getTime();\n            _this.queueItems = [];\n            queue.forEach(function (q, index) {\n                if (!_this.handlers[q]) {\n                    return;\n                }\n                _this.queueItems.push(new provisioningstep_1.ProvisioningStep(q, index, json[q], json.Parameters, _this.handlers[q]));\n            });\n            var promises = [];\n            promises.push(new Promise(function (res) {\n                logging_1.Logger.write(\"Provisioning: Code execution scope started\", logging_1.LogLevel.Info);\n                res();\n            }));\n            var index = 1;\n            while (_this.queueItems[index - 1] !== undefined) {\n                var i = promises.length - 1;\n                promises.push(_this.queueItems[index - 1].execute(promises[i]));\n                index++;\n            }\n            ;\n            Promise.all(promises).then(function (value) {\n                logging_1.Logger.write(\"Provisioning: Code execution scope ended\", logging_1.LogLevel.Info);\n                resolve(value);\n            }, function (error) {\n                logging_1.Logger.write(\"Provisioning: Code execution scope ended\" + JSON.stringify(error), logging_1.LogLevel.Error);\n                reject(error);\n            });\n        });\n    };\n    return Provisioning;\n}());\nexports.Provisioning = Provisioning;\n\n},{\"../../net/httpclient\":5,\"../../utils/logging\":22,\"./objecthandlers/objectcomposedlook\":8,\"./objecthandlers/objectcustomactions\":9,\"./objecthandlers/objectfeatures\":10,\"./objecthandlers/objectfiles\":11,\"./objecthandlers/objectlists\":13,\"./objecthandlers/objectnavigation\":14,\"./objecthandlers/objectpropertybagentries\":15,\"./objecthandlers/objectwebsettings\":16,\"./provisioningstep\":18,\"./util\":20}],18:[function(require,module,exports){\n\"use strict\";\nvar ProvisioningStep = (function () {\n    function ProvisioningStep(name, index, objects, parameters, handler) {\n        this.name = name;\n        this.index = index;\n        this.objects = objects;\n        this.parameters = parameters;\n        this.handler = handler;\n    }\n    ProvisioningStep.prototype.execute = function (dependentPromise) {\n        var _this = this;\n        var _handler = new this.handler();\n        if (!dependentPromise) {\n            return _handler.ProvisionObjects(this.objects, this.parameters);\n        }\n        return new Promise(function (resolve, reject) {\n            dependentPromise.then(function () {\n                return _handler.ProvisionObjects(_this.objects, _this.parameters).then(resolve, resolve);\n            });\n        });\n    };\n    return ProvisioningStep;\n}());\nexports.ProvisioningStep = ProvisioningStep;\n\n},{}],19:[function(require,module,exports){\n\"use strict\";\nvar Sequencer = (function () {\n    function Sequencer(functions, parameter, scope) {\n        this.functions = functions;\n        this.parameter = parameter;\n        this.scope = scope;\n    }\n    Sequencer.prototype.execute = function (progressFunction) {\n        var _this = this;\n        var promiseSequence = Promise.resolve();\n        this.functions.forEach(function (sequenceFunction, functionNr) {\n            promiseSequence = promiseSequence.then(function () {\n                return sequenceFunction.call(_this.scope, _this.parameter);\n            }).then(function (result) {\n                if (progressFunction) {\n                    progressFunction.call(_this, functionNr, _this.functions);\n                }\n            });\n        }, this);\n        return promiseSequence;\n    };\n    return Sequencer;\n}());\nexports.Sequencer = Sequencer;\n\n},{}],20:[function(require,module,exports){\n\"use strict\";\nvar Util = (function () {\n    function Util() {\n    }\n    Util.getRelativeUrl = function (url) {\n        return url.replace(document.location.protocol + \"//\" + document.location.hostname, \"\");\n    };\n    Util.replaceUrlTokens = function (url) {\n        return url.replace(/{site}/g, _spPageContextInfo.webAbsoluteUrl)\n            .replace(/{sitecollection}/g, _spPageContextInfo.siteAbsoluteUrl)\n            .replace(/{themegallery}/g, _spPageContextInfo.siteAbsoluteUrl + \"/_catalogs/theme/15\");\n    };\n    ;\n    Util.encodePropertyKey = function (propKey) {\n        var bytes = [];\n        for (var i = 0; i < propKey.length; ++i) {\n            bytes.push(propKey.charCodeAt(i));\n            bytes.push(0);\n        }\n        var b64encoded = window.btoa(String.fromCharCode.apply(null, bytes));\n        return b64encoded;\n    };\n    return Util;\n}());\nexports.Util = Util;\n\n},{}],21:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar util_1 = require(\"../../utils/util\");\nvar logging_1 = require(\"../../utils/logging\");\nvar httpclient_1 = require(\"../../net/httpclient\");\nvar pnplibconfig_1 = require(\"../../configuration/pnplibconfig\");\nfunction extractOdataId(candidate) {\n    if (candidate.hasOwnProperty(\"odata.id\")) {\n        return candidate[\"odata.id\"];\n    }\n    else if (candidate.hasOwnProperty(\"__metadata\") && candidate.__metadata.hasOwnProperty(\"id\")) {\n        return candidate.__metadata.id;\n    }\n    else {\n        logging_1.Logger.log({\n            data: candidate,\n            level: logging_1.LogLevel.Error,\n            message: \"Could not extract odata id in object, you may be using nometadata. Object data logged to logger.\",\n        });\n        throw new Error(\"Could not extract odata id in object, you may be using nometadata. Object data logged to logger.\");\n    }\n}\nexports.extractOdataId = extractOdataId;\nvar ODataParserBase = (function () {\n    function ODataParserBase() {\n    }\n    ODataParserBase.prototype.parse = function (r) {\n        var _this = this;\n        return r.json().then(function (json) { return _this.parseODataJSON(json); });\n    };\n    ODataParserBase.prototype.parseODataJSON = function (json) {\n        var result = json;\n        if (json.hasOwnProperty(\"d\")) {\n            if (json.d.hasOwnProperty(\"results\")) {\n                result = json.d.results;\n            }\n            else {\n                result = json.d;\n            }\n        }\n        else if (json.hasOwnProperty(\"value\")) {\n            result = json.value;\n        }\n        return result;\n    };\n    return ODataParserBase;\n}());\nexports.ODataParserBase = ODataParserBase;\nvar ODataDefaultParser = (function (_super) {\n    __extends(ODataDefaultParser, _super);\n    function ODataDefaultParser() {\n        _super.apply(this, arguments);\n    }\n    return ODataDefaultParser;\n}(ODataParserBase));\nexports.ODataDefaultParser = ODataDefaultParser;\nvar ODataRawParserImpl = (function () {\n    function ODataRawParserImpl() {\n    }\n    ODataRawParserImpl.prototype.parse = function (r) {\n        return r.json();\n    };\n    return ODataRawParserImpl;\n}());\nexports.ODataRawParserImpl = ODataRawParserImpl;\nvar ODataValueParserImpl = (function (_super) {\n    __extends(ODataValueParserImpl, _super);\n    function ODataValueParserImpl() {\n        _super.apply(this, arguments);\n    }\n    ODataValueParserImpl.prototype.parse = function (r) {\n        return _super.prototype.parse.call(this, r).then(function (d) { return d; });\n    };\n    return ODataValueParserImpl;\n}(ODataParserBase));\nvar ODataEntityParserImpl = (function (_super) {\n    __extends(ODataEntityParserImpl, _super);\n    function ODataEntityParserImpl(factory) {\n        _super.call(this);\n        this.factory = factory;\n    }\n    ODataEntityParserImpl.prototype.parse = function (r) {\n        var _this = this;\n        return _super.prototype.parse.call(this, r).then(function (d) {\n            var o = new _this.factory(getEntityUrl(d), null);\n            return util_1.Util.extend(o, d);\n        });\n    };\n    return ODataEntityParserImpl;\n}(ODataParserBase));\nvar ODataEntityArrayParserImpl = (function (_super) {\n    __extends(ODataEntityArrayParserImpl, _super);\n    function ODataEntityArrayParserImpl(factory) {\n        _super.call(this);\n        this.factory = factory;\n    }\n    ODataEntityArrayParserImpl.prototype.parse = function (r) {\n        var _this = this;\n        return _super.prototype.parse.call(this, r).then(function (d) {\n            return d.map(function (v) {\n                var o = new _this.factory(getEntityUrl(v), null);\n                return util_1.Util.extend(o, v);\n            });\n        });\n    };\n    return ODataEntityArrayParserImpl;\n}(ODataParserBase));\nfunction getEntityUrl(entity) {\n    if (entity.hasOwnProperty(\"__metadata\")) {\n        return entity.__metadata.uri;\n    }\n    else if (entity.hasOwnProperty(\"odata.editLink\")) {\n        return util_1.Util.combinePaths(\"_api\", entity[\"odata.editLink\"]);\n    }\n    else {\n        logging_1.Logger.write(\"No uri information found in ODataEntity parsing, chaining will fail for this object.\", logging_1.LogLevel.Warning);\n        return \"\";\n    }\n}\nexports.ODataRaw = new ODataRawParserImpl();\nfunction ODataValue() {\n    return new ODataValueParserImpl();\n}\nexports.ODataValue = ODataValue;\nfunction ODataEntity(factory) {\n    return new ODataEntityParserImpl(factory);\n}\nexports.ODataEntity = ODataEntity;\nfunction ODataEntityArray(factory) {\n    return new ODataEntityArrayParserImpl(factory);\n}\nexports.ODataEntityArray = ODataEntityArray;\nvar ODataBatch = (function () {\n    function ODataBatch(baseUrl, _batchId) {\n        if (_batchId === void 0) { _batchId = util_1.Util.getGUID(); }\n        this.baseUrl = baseUrl;\n        this._batchId = _batchId;\n        this._requests = [];\n        this._batchDependencies = Promise.resolve();\n    }\n    ODataBatch.prototype.add = function (url, method, options, parser) {\n        var info = {\n            method: method.toUpperCase(),\n            options: options,\n            parser: parser,\n            reject: null,\n            resolve: null,\n            url: url,\n        };\n        var p = new Promise(function (resolve, reject) {\n            info.resolve = resolve;\n            info.reject = reject;\n        });\n        this._requests.push(info);\n        return p;\n    };\n    ODataBatch.prototype.addBatchDependency = function () {\n        var resolver;\n        var promise = new Promise(function (resolve) {\n            resolver = resolve;\n        });\n        this._batchDependencies = this._batchDependencies.then(function () { return promise; });\n        return resolver;\n    };\n    ODataBatch.prototype.execute = function () {\n        var _this = this;\n        return this._batchDependencies.then(function () { return _this.executeImpl(); });\n    };\n    ODataBatch.prototype.executeImpl = function () {\n        var _this = this;\n        if (this._requests.length < 1) {\n            return Promise.resolve();\n        }\n        var batchBody = [];\n        var currentChangeSetId = \"\";\n        this._requests.forEach(function (reqInfo, index) {\n            if (reqInfo.method === \"GET\") {\n                if (currentChangeSetId.length > 0) {\n                    batchBody.push(\"--changeset_\" + currentChangeSetId + \"--\\n\\n\");\n                    currentChangeSetId = \"\";\n                }\n                batchBody.push(\"--batch_\" + _this._batchId + \"\\n\");\n            }\n            else {\n                if (currentChangeSetId.length < 1) {\n                    currentChangeSetId = util_1.Util.getGUID();\n                    batchBody.push(\"--batch_\" + _this._batchId + \"\\n\");\n                    batchBody.push(\"Content-Type: multipart/mixed; boundary=\\\"changeset_\" + currentChangeSetId + \"\\\"\\n\\n\");\n                }\n                batchBody.push(\"--changeset_\" + currentChangeSetId + \"\\n\");\n            }\n            batchBody.push(\"Content-Type: application/http\\n\");\n            batchBody.push(\"Content-Transfer-Encoding: binary\\n\\n\");\n            var headers = {\n                \"Accept\": \"application/json;\",\n            };\n            if (reqInfo.method !== \"GET\") {\n                var method = reqInfo.method;\n                if (reqInfo.options && reqInfo.options.headers && reqInfo.options.headers[\"X-HTTP-Method\"] !== typeof undefined) {\n                    method = reqInfo.options.headers[\"X-HTTP-Method\"];\n                    delete reqInfo.options.headers[\"X-HTTP-Method\"];\n                }\n                batchBody.push(method + \" \" + reqInfo.url + \" HTTP/1.1\\n\");\n                headers = util_1.Util.extend(headers, { \"Content-Type\": \"application/json;odata=verbose;charset=utf-8\" });\n            }\n            else {\n                batchBody.push(reqInfo.method + \" \" + reqInfo.url + \" HTTP/1.1\\n\");\n            }\n            if (typeof pnplibconfig_1.RuntimeConfig.headers !== \"undefined\") {\n                headers = util_1.Util.extend(headers, pnplibconfig_1.RuntimeConfig.headers);\n            }\n            if (reqInfo.options && reqInfo.options.headers) {\n                headers = util_1.Util.extend(headers, reqInfo.options.headers);\n            }\n            for (var name_1 in headers) {\n                if (headers.hasOwnProperty(name_1)) {\n                    batchBody.push(name_1 + \": \" + headers[name_1] + \"\\n\");\n                }\n            }\n            batchBody.push(\"\\n\");\n            if (reqInfo.options.body) {\n                batchBody.push(reqInfo.options.body + \"\\n\\n\");\n            }\n        });\n        if (currentChangeSetId.length > 0) {\n            batchBody.push(\"--changeset_\" + currentChangeSetId + \"--\\n\\n\");\n            currentChangeSetId = \"\";\n        }\n        batchBody.push(\"--batch_\" + this._batchId + \"--\\n\");\n        var batchHeaders = {\n            \"Content-Type\": \"multipart/mixed; boundary=batch_\" + this._batchId,\n        };\n        var batchOptions = {\n            \"body\": batchBody.join(\"\"),\n            \"headers\": batchHeaders,\n        };\n        var client = new httpclient_1.HttpClient();\n        var requestUrl = util_1.Util.makeUrlAbsolute(util_1.Util.combinePaths(this.baseUrl, \"/_api/$batch\"));\n        return client.post(requestUrl, batchOptions)\n            .then(function (r) { return r.text(); })\n            .then(this._parseResponse)\n            .then(function (responses) {\n            if (responses.length !== _this._requests.length) {\n                throw new Error(\"Could not properly parse responses to match requests in batch.\");\n            }\n            var chain = Promise.resolve();\n            var _loop_1 = function(i) {\n                var request = _this._requests[i];\n                var response = responses[i];\n                if (!response.ok) {\n                    request.reject(new Error(response.statusText));\n                }\n                chain = chain.then(function (_) { return request.parser.parse(response).then(request.resolve).catch(request.reject); });\n            };\n            for (var i = 0; i < responses.length; i++) {\n                _loop_1(i);\n            }\n            return chain;\n        });\n    };\n    ODataBatch.prototype._parseResponse = function (body) {\n        return new Promise(function (resolve, reject) {\n            var responses = [];\n            var header = \"--batchresponse_\";\n            var statusRegExp = new RegExp(\"^HTTP/[0-9.]+ +([0-9]+) +(.*)\", \"i\");\n            var lines = body.split(\"\\n\");\n            var state = \"batch\";\n            var status;\n            var statusText;\n            for (var i = 0; i < lines.length; ++i) {\n                var line = lines[i];\n                switch (state) {\n                    case \"batch\":\n                        if (line.substr(0, header.length) === header) {\n                            state = \"batchHeaders\";\n                        }\n                        else {\n                            if (line.trim() !== \"\") {\n                                throw new Error(\"Invalid response, line \" + i);\n                            }\n                        }\n                        break;\n                    case \"batchHeaders\":\n                        if (line.trim() === \"\") {\n                            state = \"status\";\n                        }\n                        break;\n                    case \"status\":\n                        var parts = statusRegExp.exec(line);\n                        if (parts.length !== 3) {\n                            throw new Error(\"Invalid status, line \" + i);\n                        }\n                        status = parseInt(parts[1], 10);\n                        statusText = parts[2];\n                        state = \"statusHeaders\";\n                        break;\n                    case \"statusHeaders\":\n                        if (line.trim() === \"\") {\n                            state = \"body\";\n                        }\n                        break;\n                    case \"body\":\n                        var response = void 0;\n                        if (status === 204) {\n                            response = new Response();\n                        }\n                        else {\n                            response = new Response(line, { status: status, statusText: statusText });\n                        }\n                        responses.push(response);\n                        state = \"batch\";\n                        break;\n                }\n            }\n            if (state !== \"status\") {\n                reject(new Error(\"Unexpected end of input\"));\n            }\n            resolve(responses);\n        });\n    };\n    return ODataBatch;\n}());\nexports.ODataBatch = ODataBatch;\n\n},{\"../../configuration/pnplibconfig\":2,\"../../net/httpclient\":5,\"../../utils/logging\":22,\"../../utils/util\":23}],22:[function(require,module,exports){\n\"use strict\";\n(function (LogLevel) {\n    LogLevel[LogLevel[\"Verbose\"] = 0] = \"Verbose\";\n    LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\n    LogLevel[LogLevel[\"Warning\"] = 2] = \"Warning\";\n    LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\n    LogLevel[LogLevel[\"Off\"] = 99] = \"Off\";\n})(exports.LogLevel || (exports.LogLevel = {}));\nvar LogLevel = exports.LogLevel;\nvar Logger = (function () {\n    function Logger() {\n    }\n    Object.defineProperty(Logger, \"activeLogLevel\", {\n        get: function () {\n            return Logger.instance.activeLogLevel;\n        },\n        set: function (value) {\n            Logger.instance.activeLogLevel = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Logger, \"instance\", {\n        get: function () {\n            if (typeof Logger._instance === \"undefined\" || Logger._instance === null) {\n                Logger._instance = new LoggerImpl();\n            }\n            return Logger._instance;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Logger.subscribe = function () {\n        var listeners = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            listeners[_i - 0] = arguments[_i];\n        }\n        for (var i = 0; i < listeners.length; i++) {\n            Logger.instance.subscribe(listeners[i]);\n        }\n    };\n    Logger.clearSubscribers = function () {\n        return Logger.instance.clearSubscribers();\n    };\n    Object.defineProperty(Logger, \"count\", {\n        get: function () {\n            return Logger.instance.count;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Logger.write = function (message, level) {\n        if (level === void 0) { level = LogLevel.Verbose; }\n        Logger.instance.log({ level: level, message: message });\n    };\n    Logger.log = function (entry) {\n        Logger.instance.log(entry);\n    };\n    Logger.measure = function (name, f) {\n        return Logger.instance.measure(name, f);\n    };\n    return Logger;\n}());\nexports.Logger = Logger;\nvar LoggerImpl = (function () {\n    function LoggerImpl(activeLogLevel, subscribers) {\n        if (activeLogLevel === void 0) { activeLogLevel = LogLevel.Warning; }\n        if (subscribers === void 0) { subscribers = []; }\n        this.activeLogLevel = activeLogLevel;\n        this.subscribers = subscribers;\n    }\n    LoggerImpl.prototype.subscribe = function (listener) {\n        this.subscribers.push(listener);\n    };\n    LoggerImpl.prototype.clearSubscribers = function () {\n        var s = this.subscribers.slice(0);\n        this.subscribers.length = 0;\n        return s;\n    };\n    Object.defineProperty(LoggerImpl.prototype, \"count\", {\n        get: function () {\n            return this.subscribers.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LoggerImpl.prototype.write = function (message, level) {\n        if (level === void 0) { level = LogLevel.Verbose; }\n        this.log({ level: level, message: message });\n    };\n    LoggerImpl.prototype.log = function (entry) {\n        if (typeof entry === \"undefined\" || entry.level < this.activeLogLevel) {\n            return;\n        }\n        for (var i = 0; i < this.subscribers.length; i++) {\n            this.subscribers[i].log(entry);\n        }\n    };\n    LoggerImpl.prototype.measure = function (name, f) {\n        console.profile(name);\n        try {\n            return f();\n        }\n        finally {\n            console.profileEnd();\n        }\n    };\n    return LoggerImpl;\n}());\nvar ConsoleListener = (function () {\n    function ConsoleListener() {\n    }\n    ConsoleListener.prototype.log = function (entry) {\n        var msg = this.format(entry);\n        switch (entry.level) {\n            case LogLevel.Verbose:\n            case LogLevel.Info:\n                console.log(msg);\n                break;\n            case LogLevel.Warning:\n                console.warn(msg);\n                break;\n            case LogLevel.Error:\n                console.error(msg);\n                break;\n        }\n    };\n    ConsoleListener.prototype.format = function (entry) {\n        return \"Message: \" + entry.message + \". Data: \" + JSON.stringify(entry.data);\n    };\n    return ConsoleListener;\n}());\nexports.ConsoleListener = ConsoleListener;\nvar AzureInsightsListener = (function () {\n    function AzureInsightsListener(azureInsightsInstrumentationKey) {\n        this.azureInsightsInstrumentationKey = azureInsightsInstrumentationKey;\n        var appInsights = window[\"appInsights\"] || function (config) {\n            function r(config) {\n                t[config] = function () {\n                    var i = arguments;\n                    t.queue.push(function () { t[config].apply(t, i); });\n                };\n            }\n            var t = { config: config }, u = document, e = window, o = \"script\", s = u.createElement(o), i, f;\n            for (s.src = config.url || \"//az416426.vo.msecnd.net/scripts/a/ai.0.js\", u.getElementsByTagName(o)[0].parentNode.appendChild(s), t.cookie = u.cookie, t.queue = [], i = [\"Event\", \"Exception\", \"Metric\", \"PageView\", \"Trace\"]; i.length;) {\n                r(\"track\" + i.pop());\n            }\n            return r(\"setAuthenticatedUserContext\"), r(\"clearAuthenticatedUserContext\"), config.disableExceptionTracking || (i = \"onerror\", r(\"_\" + i), f = e[i], e[i] = function (config, r, u, e, o) {\n                var s = f && f(config, r, u, e, o);\n                return s !== !0 && t[\"_\" + i](config, r, u, e, o), s;\n            }), t;\n        }({\n            instrumentationKey: this.azureInsightsInstrumentationKey\n        });\n        window[\"appInsights\"] = appInsights;\n    }\n    AzureInsightsListener.prototype.log = function (entry) {\n        var ai = window[\"appInsights\"];\n        var msg = this.format(entry);\n        if (entry.level === LogLevel.Error) {\n            ai.trackException(msg);\n        }\n        else {\n            ai.trackEvent(msg);\n        }\n    };\n    AzureInsightsListener.prototype.format = function (entry) {\n        return \"Message: \" + entry.message + \". Data: \" + JSON.stringify(entry.data);\n    };\n    return AzureInsightsListener;\n}());\nexports.AzureInsightsListener = AzureInsightsListener;\nvar FunctionListener = (function () {\n    function FunctionListener(method) {\n        this.method = method;\n    }\n    FunctionListener.prototype.log = function (entry) {\n        this.method(entry);\n    };\n    return FunctionListener;\n}());\nexports.FunctionListener = FunctionListener;\n\n},{}],23:[function(require,module,exports){\n(function (global){\n\"use strict\";\nvar Util = (function () {\n    function Util() {\n    }\n    Util.getCtxCallback = function (context, method) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        return function () {\n            method.apply(context, params);\n        };\n    };\n    Util.urlParamExists = function (name) {\n        name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n        var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n        return regex.test(location.search);\n    };\n    Util.getUrlParamByName = function (name) {\n        name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n        var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n        var results = regex.exec(location.search);\n        return results == null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n    };\n    Util.getUrlParamBoolByName = function (name) {\n        var p = this.getUrlParamByName(name);\n        var isFalse = (p === \"\" || /false|0/i.test(p));\n        return !isFalse;\n    };\n    Util.stringInsert = function (target, index, s) {\n        if (index > 0) {\n            return target.substring(0, index) + s + target.substring(index, target.length);\n        }\n        return s + target;\n    };\n    Util.dateAdd = function (date, interval, units) {\n        var ret = new Date(date.toLocaleString());\n        switch (interval.toLowerCase()) {\n            case \"year\":\n                ret.setFullYear(ret.getFullYear() + units);\n                break;\n            case \"quarter\":\n                ret.setMonth(ret.getMonth() + 3 * units);\n                break;\n            case \"month\":\n                ret.setMonth(ret.getMonth() + units);\n                break;\n            case \"week\":\n                ret.setDate(ret.getDate() + 7 * units);\n                break;\n            case \"day\":\n                ret.setDate(ret.getDate() + units);\n                break;\n            case \"hour\":\n                ret.setTime(ret.getTime() + units * 3600000);\n                break;\n            case \"minute\":\n                ret.setTime(ret.getTime() + units * 60000);\n                break;\n            case \"second\":\n                ret.setTime(ret.getTime() + units * 1000);\n                break;\n            default:\n                ret = undefined;\n                break;\n        }\n        return ret;\n    };\n    Util.loadStylesheet = function (path, avoidCache) {\n        if (avoidCache) {\n            path += \"?\" + encodeURIComponent((new Date()).getTime().toString());\n        }\n        var head = document.getElementsByTagName(\"head\");\n        if (head.length > 0) {\n            var e = document.createElement(\"link\");\n            head[0].appendChild(e);\n            e.setAttribute(\"type\", \"text/css\");\n            e.setAttribute(\"rel\", \"stylesheet\");\n            e.setAttribute(\"href\", path);\n        }\n    };\n    Util.combinePaths = function () {\n        var paths = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            paths[_i - 0] = arguments[_i];\n        }\n        var parts = [];\n        for (var i = 0; i < paths.length; i++) {\n            if (typeof paths[i] !== \"undefined\" && paths[i] !== null) {\n                parts.push(paths[i].replace(/^[\\\\|\\/]/, \"\").replace(/[\\\\|\\/]$/, \"\"));\n            }\n        }\n        return parts.join(\"/\").replace(/\\\\/, \"/\");\n    };\n    Util.getRandomString = function (chars) {\n        var text = \"\";\n        var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n        for (var i = 0; i < chars; i++) {\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\n        }\n        return text;\n    };\n    Util.getGUID = function () {\n        var d = new Date().getTime();\n        var guid = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n            var r = (d + Math.random() * 16) % 16 | 0;\n            d = Math.floor(d / 16);\n            return (c === \"x\" ? r : (r & 0x3 | 0x8)).toString(16);\n        });\n        return guid;\n    };\n    Util.isFunction = function (candidateFunction) {\n        return typeof candidateFunction === \"function\";\n    };\n    Util.isArray = function (array) {\n        if (Array.isArray) {\n            return Array.isArray(array);\n        }\n        return array && typeof array.length === \"number\" && array.constructor === Array;\n    };\n    Util.stringIsNullOrEmpty = function (s) {\n        return typeof s === \"undefined\" || s === null || s === \"\";\n    };\n    Util.extend = function (target, source, noOverwrite) {\n        if (noOverwrite === void 0) { noOverwrite = false; }\n        var result = {};\n        for (var id in target) {\n            result[id] = target[id];\n        }\n        var check = noOverwrite ? function (o, i) { return !o.hasOwnProperty(i); } : function (o, i) { return true; };\n        for (var id in source) {\n            if (check(result, id)) {\n                result[id] = source[id];\n            }\n        }\n        return result;\n    };\n    Util.applyMixins = function (derivedCtor) {\n        var baseCtors = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            baseCtors[_i - 1] = arguments[_i];\n        }\n        baseCtors.forEach(function (baseCtor) {\n            Object.getOwnPropertyNames(baseCtor.prototype).forEach(function (name) {\n                derivedCtor.prototype[name] = baseCtor.prototype[name];\n            });\n        });\n    };\n    Util.isUrlAbsolute = function (url) {\n        return /^https?:\\/\\/|^\\/\\//i.test(url);\n    };\n    Util.makeUrlAbsolute = function (url) {\n        if (Util.isUrlAbsolute(url)) {\n            return url;\n        }\n        if (typeof global._spPageContextInfo !== \"undefined\") {\n            if (global._spPageContextInfo.hasOwnProperty(\"webAbsoluteUrl\")) {\n                return Util.combinePaths(global._spPageContextInfo.webAbsoluteUrl, url);\n            }\n            else if (global._spPageContextInfo.hasOwnProperty(\"webServerRelativeUrl\")) {\n                return Util.combinePaths(global._spPageContextInfo.webServerRelativeUrl, url);\n            }\n        }\n        else {\n            return url;\n        }\n    };\n    return Util;\n}());\nexports.Util = Util;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}]},{},[17])(17)\n});"]}