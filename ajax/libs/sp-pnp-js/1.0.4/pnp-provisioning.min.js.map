{"version":3,"sources":["pnp-provisioning.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","$pnp","Provisioning","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","util_1","Dictionary","keys","values","prototype","get","key","index","indexOf","add","push","merge","source","Util","isFunction","sourceAsDictionary","getKeys","sourceAsHash","hasOwnProperty","remove","val","splice","getValues","clear","count","../utils/util","2","setRuntimeConfig","config","_runtimeConfig","set","RuntimeConfigImpl","_headers","_defaultCachingStore","_defaultCachingTimeoutSeconds","_globalCacheDisable","_useSPRequestExecutor","headers","globalCacheDisable","defaultCachingStore","defaultCachingTimeoutSeconds","useSPRequestExecutor","_useNodeClient","_nodeClientData","nodeClientOptions","_spPageContextInfo","webAbsoluteUrl","siteUrl","Object","defineProperty","enumerable","configurable","RuntimeConfig","3","collections_1","odata_1","CachedDigest","DigestCache","_httpClient","_digests","getDigest","webUrl","cachedDigest","now","Date","expiration","Promise","resolve","value","url","combinePaths","fetchRaw","cache","credentials","Accept","Content-type","method","then","response","parser","ODataDefaultParser","parse","d","GetContextWebInformation","data","newCachedDigest","FormDigestValue","seconds","FormDigestTimeoutSeconds","setTime","getTime","../collections/collections","../sharepoint/rest/odata","4","FetchClient","fetch","options","5","fetchclient_1","digestcache_1","pnplibconfig_1","sprequestexecutorclient_1","nodefetchclient_1","HttpClient","_impl","getFetchImpl","_digestCache","opts","extend","Headers","mergeHeaders","has","append","toUpperCase","substr","digest","_this","rawHeaders","retry","ctx","delay","status","reject","attempts","retryCount","setTimeout","getCtxCallback","retryContext","post","SPRequestExecutorClient","useNodeFetchClient","nodeRequestOptions","NodeFetchClient","clientId","clientSecret","target","temp","Request","forEach","name","../configuration/pnplibconfig","./digestcache","./fetchclient","./nodefetchclient","./sprequestexecutorclient","6","_clientId","_clientSecret","_realm","7","convertToResponse","spResponse","responseHeaders","h","Response","body","statusCode","statusText","SP","RequestExecutor","iterator","addinWebUrl","substring","executor","entries","next","done","requestOptions","error","success","binaryStringRequestBody","executeAsync","8","__extends","b","__","constructor","p","create","objecthandlerbase_1","ObjectComposedLook","_super","ProvisionObjects","object","scope_started","clientContext","ClientContext","get_current","web","get_web","colorPaletteUrl","ColorPaletteUrl","replaceUrlTokens","fontSchemeUrl","FontSchemeUrl","backgroundImageUrl","BackgroundImageUrl","applyTheme","getRelativeUrl","update","executeQueryAsync","scope_ended","ObjectHandlerBase","../util","./objecthandlerbase","9","ObjectCustomActions","customactions","userCustomActions","get_userCustomActions","load","obj","objExists","get_data","filter","userCustomAction","get_title","Title","objCreationInformation","Description","set_description","CommandUIExtension","set_commandUIExtension","Group","set_group","set_title","Url","set_url","ScriptBlock","set_scriptBlock","ScriptSrc","set_scriptSrc","Location","set_location","ImageUrl","set_imageUrl","Name","set_name","RegistrationId","set_registrationId","RegistrationType","set_registrationType","Rights","set_rights","Sequence","set_sequence","10","ObjectFeatures","features","webFeatures","get_features","Deactivate","Guid","ID","FeatureDefinitionScope","none","11","CoreUtil","ObjectFiles","objects","fileInfos","promises","httpClient","Src","text","all","responses","filename","GetFilenameFromFilePath","Dest","webServerRelativeUrl","folder","getFolderByServerRelativeUrl","GetFolderFromFilePath","fi","Contents","Filename","Folder","Instance","Overwrite","Properties","RemoveExistingWebParts","ServerRelativeUrl","Views","WebParts","FileCreationInformation","set_overwrite","set_content","Base64EncodedByteArray","get_content","charCodeAt","get_files","ApplyFileProperties","AddWebPartsToWebPartPage","ModifyHiddenViews","RemoveWebPartsFromFileIfSpecified","limitedWebPartManager","shouldRemoveExisting","existingWebParts","get_webParts","wp","deleteWebPart","GetWebPartXml","webParts","FileUrl","fileUrl","res","rej","Xml","dest","src","fileServerRelativeUrl","file","getFileByServerRelativeUrl","getLimitedWebPartManager","PersonalizationScope","shared","webPartsWithXml","oWebPartDefinition","importWebPart","oWebPart","get_webPart","addWebPart","Zone","Order","fileProperties","listItemAllFields","get_listItemAllFields","set_item","GetViewFromCollectionByUrl","viewCollection","serverRelativeUrl","viewCollectionEnumerator","getEnumerator","moveNext","view","get_serverRelativeUrl","toString","toLowerCase","mapping","lists","listViewCollections","v","List","get_lists","getByTitle","get_views","views","list","Paged","set_paged","Query","set_viewQuery","RowLimit","set_rowLimit","ViewFields","columns_1","get_viewFields","removeAll","vf","filePath","split","join","../../../utils/util","12","httpclient_1","logging_1","parameters","Logger","write","../../../net/httpclient","../../../utils/logging","13","sequencer_1","ObjectLists","listInstances","existingObj","undefined","EnableVersioning","set_enableVersioning","EnableMinorVersions","set_enableMinorVersions","EnableModeration","set_enableModeration","EnableFolderCreation","set_enableFolderCreation","EnableAttachments","set_enableAttachments","NoCrawl","set_noCrawl","DefaultDisplayFormUrl","set_defaultDisplayFormUrl","DefaultEditFormUrl","set_defaultEditFormUrl","DefaultNewFormUrl","set_defaultNewFormUrl","DraftVersionVisibility","set_draftVersionVisibility","DraftVisibilityType","Hidden","set_hidden","ForceCheckout","set_forceCheckout","ListCreationInformation","OnQuickLaunch","QuickLaunchOptions","on","off","set_quickLaunchOption","TemplateType","set_templateType","createdList","toLocaleLowerCase","sequencer","Sequencer","ApplyContentTypeBindings","ApplyListInstanceFieldRefs","ApplyFields","ApplyLookupFields","ApplyListSecurity","CreateViews","InsertDataRows","CreateFolders","ListInstances","Objects","execute","EnsureLocationBasedMetadataDefaultsReceiver","eventReceivers","get_eventReceivers","eventRecCreationInfo","EventReceiverDefinitionCreationInformation","set_receiverName","set_synchronization","set_sequenceNumber","set_receiverAssembly","set_receiverClass","set_eventType","EventReceiverType","itemAdded","params","Folders","folderServerRelativeUrl","rootFolder","get_rootFolder","metadataDefaults","setMetadataDefaults","folderUrl","get_folders","DefaultValues","metadataDefaultsFileCreateInfo","webCts","get_site","get_rootWeb","get_contentTypes","listCts","ContentTypeBindings","set_contentTypesEnabled","listContentTypes","existingContentTypes","Array","RemoveExistingContentTypes","ct","ctb","addExistingContentType","getById","ContentTypeId","j","ect","deleteObject","siteFields","get_fields","FieldRefs","fr","field","getByInternalNameOrTitle","Fields","fieldXml","GetFieldXml","fieldType","GetFieldXmlAttr","addFieldAsXml","AddFieldOptions","addToAllContentTypes","attr","regex","RegExp","match","exec","SchemaXml","properties_1","prop","targetList","get_id","Type","Formula","Security","BreakRoleInheritance","breakRoleInheritance","CopyRoleAssignments","ClearSubscopes","get_roleAssignments","allProperties","get_allProperties","siteGroups","get_siteGroups","roleDefinitions","get_roleDefinitions","RoleAssignments","ra","roleDef","RoleDefinition","getByName","roleBindings","RoleDefinitionBindingCollection","newObject","principal","Principal","token","groupId","get_fieldValues","viewExists","ev","RemoveExistingViews","Scope","set_scope","viewCreationInformation","ViewCreationInformation","PersonalView","set_personalView","set_query","SetAsDefaultView","set_setAsDefaultView","set_viewFields","ViewTypeKind","set_viewTypeKind","ViewType","html","DataRows","item","addItem","ListItemCreationInformation","../sequencer/sequencer","14","ObjectNavigation","navigation","get_navigation","ConfigureQuickLaunch","QuickLaunch","getNodeFromCollectionByTitle","nodeCollection","title","nodes","quickLaunchNodeCollection_1","get_quickLaunch","temporaryQuickLaunch","get_count","oldNode","itemAt","existingNode","newNode","NavigationNodeCreationInformation","get_url","set_asLastNode","json","node","getNodeById","Id","childrenNodeCollection","get_children","parentNode","Children","15","ObjectPropertyBagEntries","clientContext_1","web_1","propBag_1","indexedProperties_1","entry","Key","Value","Indexed","encodePropertyKey","16","ObjectWebSettings","WelcomePage","set_welcomePage","MasterUrl","set_masterUrl","CustomMasterUrl","set_customMasterUrl","SaveSiteAsTemplateEnabled","set_saveSiteAsTemplateEnabled","QuickLaunchEnabled","TreeViewEnabled","set_treeViewEnabled","17","provisioningstep_1","objectnavigation_1","objectpropertybagentries_1","objectfeatures_1","objectwebsettings_1","objectcomposedlook_1","objectcustomactions_1","objectfiles_1","objectlists_1","handlers","Navigation","PropertyBagEntries","Features","WebSettings","ComposedLook","CustomActions","Files","Lists","applyTemplate","path","ok","template","start","LogLevel","queue","startTime","queueItems","q","ProvisioningStep","Parameters","Info","JSON","stringify","../../net/httpclient","../../utils/logging","./objecthandlers/objectcomposedlook","./objecthandlers/objectcustomactions","./objecthandlers/objectfeatures","./objecthandlers/objectfiles","./objecthandlers/objectlists","./objecthandlers/objectnavigation","./objecthandlers/objectpropertybagentries","./objecthandlers/objectwebsettings","./provisioningstep","./util","18","handler","dependentPromise","_handler","19","functions","parameter","scope","progressFunction","promiseSequence","sequenceFunction","functionNr","result","20","replace","document","location","protocol","hostname","siteAbsoluteUrl","propKey","bytes","b64encoded","btoa","String","fromCharCode","apply","21","extractOdataId","candidate","__metadata","id","log","level","message","getEntityUrl","entity","uri","Warning","ODataValue","ODataValueParserImpl","ODataEntity","factory","ODataEntityParserImpl","ODataEntityArray","ODataEntityArrayParserImpl","ODataParserBase","results","arguments","ODataRawParserImpl","map","ODataRaw","ODataBatch","_batchId","getGUID","_requests","_batchDepCount","info","incrementBatchDep","decrementBatchDep","executeImpl","batchBody","currentChangeSetId","reqInfo","Content-Type","name_1","batchHeaders","batchOptions","client","makeUrlAbsolute","_parseResponse","resolutions","request","header","statusRegExp","lines","state","line","trim","parts","parseInt","../../configuration/pnplibconfig","../../utils/util","22","instance","activeLogLevel","_instance","LoggerImpl","subscribe","listeners","_i","clearSubscribers","Verbose","measure","subscribers","listener","slice","console","profile","profileEnd","ConsoleListener","msg","format","warn","AzureInsightsListener","azureInsightsInstrumentationKey","appInsights","createElement","getElementsByTagName","appendChild","cookie","pop","disableExceptionTracking","instrumentationKey","ai","trackException","trackEvent","FunctionListener","23","context","urlParamExists","test","search","getUrlParamByName","decodeURIComponent","getUrlParamBoolByName","isFalse","stringInsert","dateAdd","date","interval","units","ret","toLocaleString","setFullYear","getFullYear","setMonth","getMonth","setDate","getDate","loadStylesheet","avoidCache","encodeURIComponent","head","setAttribute","paths","getRandomString","chars","possible","charAt","Math","floor","random","guid","c","candidateFunction","isArray","array","stringIsNullOrEmpty","noOverwrite","check","applyMixins","derivedCtor","baseCtors","baseCtor","getOwnPropertyNames","isUrlAbsolute"],"mappings":"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","file":"pnp-provisioning.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}(g.$pnp || (g.$pnp = {})).Provisioning = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\nvar util_1 = require(\"../utils/util\");\nvar Dictionary = (function () {\n    function Dictionary() {\n        this.keys = [];\n        this.values = [];\n    }\n    Dictionary.prototype.get = function (key) {\n        var index = this.keys.indexOf(key);\n        if (index < 0) {\n            return null;\n        }\n        return this.values[index];\n    };\n    Dictionary.prototype.add = function (key, o) {\n        var index = this.keys.indexOf(key);\n        if (index > -1) {\n            this.values[index] = o;\n        }\n        else {\n            this.keys.push(key);\n            this.values.push(o);\n        }\n    };\n    Dictionary.prototype.merge = function (source) {\n        if (util_1.Util.isFunction(source[\"getKeys\"])) {\n            var sourceAsDictionary = source;\n            var keys = sourceAsDictionary.getKeys();\n            var l = keys.length;\n            for (var i = 0; i < l; i++) {\n                this.add(keys[i], sourceAsDictionary.get(keys[i]));\n            }\n        }\n        else {\n            var sourceAsHash = source;\n            for (var key in sourceAsHash) {\n                if (sourceAsHash.hasOwnProperty(key)) {\n                    this.add(key, source[key]);\n                }\n            }\n        }\n    };\n    Dictionary.prototype.remove = function (key) {\n        var index = this.keys.indexOf(key);\n        if (index < 0) {\n            return null;\n        }\n        var val = this.values[index];\n        this.keys.splice(index, 1);\n        this.values.splice(index, 1);\n        return val;\n    };\n    Dictionary.prototype.getKeys = function () {\n        return this.keys;\n    };\n    Dictionary.prototype.getValues = function () {\n        return this.values;\n    };\n    Dictionary.prototype.clear = function () {\n        this.keys = [];\n        this.values = [];\n    };\n    Dictionary.prototype.count = function () {\n        return this.keys.length;\n    };\n    return Dictionary;\n}());\nexports.Dictionary = Dictionary;\n\n},{\"../utils/util\":23}],2:[function(require,module,exports){\n(function (global){\n\"use strict\";\nvar RuntimeConfigImpl = (function () {\n    function RuntimeConfigImpl() {\n        this._headers = null;\n        this._defaultCachingStore = \"session\";\n        this._defaultCachingTimeoutSeconds = 30;\n        this._globalCacheDisable = false;\n        this._useSPRequestExecutor = false;\n    }\n    RuntimeConfigImpl.prototype.set = function (config) {\n        if (config.hasOwnProperty(\"headers\")) {\n            this._headers = config.headers;\n        }\n        if (config.hasOwnProperty(\"globalCacheDisable\")) {\n            this._globalCacheDisable = config.globalCacheDisable;\n        }\n        if (config.hasOwnProperty(\"defaultCachingStore\")) {\n            this._defaultCachingStore = config.defaultCachingStore;\n        }\n        if (config.hasOwnProperty(\"defaultCachingTimeoutSeconds\")) {\n            this._defaultCachingTimeoutSeconds = config.defaultCachingTimeoutSeconds;\n        }\n        if (config.hasOwnProperty(\"useSPRequestExecutor\")) {\n            this._useSPRequestExecutor = config.useSPRequestExecutor;\n        }\n        if (config.hasOwnProperty(\"nodeClientOptions\")) {\n            this._useNodeClient = true;\n            this._useSPRequestExecutor = false;\n            this._nodeClientData = config.nodeClientOptions;\n            global._spPageContextInfo = {\n                webAbsoluteUrl: config.nodeClientOptions.siteUrl,\n            };\n        }\n    };\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"headers\", {\n        get: function () {\n            return this._headers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"defaultCachingStore\", {\n        get: function () {\n            return this._defaultCachingStore;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"defaultCachingTimeoutSeconds\", {\n        get: function () {\n            return this._defaultCachingTimeoutSeconds;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"globalCacheDisable\", {\n        get: function () {\n            return this._globalCacheDisable;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"useSPRequestExecutor\", {\n        get: function () {\n            return this._useSPRequestExecutor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"useNodeFetchClient\", {\n        get: function () {\n            return this._useNodeClient;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"nodeRequestOptions\", {\n        get: function () {\n            return this._nodeClientData;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return RuntimeConfigImpl;\n}());\nexports.RuntimeConfigImpl = RuntimeConfigImpl;\nvar _runtimeConfig = new RuntimeConfigImpl();\nexports.RuntimeConfig = _runtimeConfig;\nfunction setRuntimeConfig(config) {\n    _runtimeConfig.set(config);\n}\nexports.setRuntimeConfig = setRuntimeConfig;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],3:[function(require,module,exports){\n\"use strict\";\nvar collections_1 = require(\"../collections/collections\");\nvar util_1 = require(\"../utils/util\");\nvar odata_1 = require(\"../sharepoint/rest/odata\");\nvar CachedDigest = (function () {\n    function CachedDigest() {\n    }\n    return CachedDigest;\n}());\nexports.CachedDigest = CachedDigest;\nvar DigestCache = (function () {\n    function DigestCache(_httpClient, _digests) {\n        if (_digests === void 0) { _digests = new collections_1.Dictionary(); }\n        this._httpClient = _httpClient;\n        this._digests = _digests;\n    }\n    DigestCache.prototype.getDigest = function (webUrl) {\n        var self = this;\n        var cachedDigest = this._digests.get(webUrl);\n        if (cachedDigest !== null) {\n            var now = new Date();\n            if (now < cachedDigest.expiration) {\n                return Promise.resolve(cachedDigest.value);\n            }\n        }\n        var url = util_1.Util.combinePaths(webUrl, \"/_api/contextinfo\");\n        return self._httpClient.fetchRaw(url, {\n            cache: \"no-cache\",\n            credentials: \"same-origin\",\n            headers: {\n                \"Accept\": \"application/json;odata=verbose\",\n                \"Content-type\": \"application/json;odata=verbose;charset=utf-8\",\n            },\n            method: \"POST\",\n        }).then(function (response) {\n            var parser = new odata_1.ODataDefaultParser();\n            return parser.parse(response).then(function (d) { return d.GetContextWebInformation; });\n        }).then(function (data) {\n            var newCachedDigest = new CachedDigest();\n            newCachedDigest.value = data.FormDigestValue;\n            var seconds = data.FormDigestTimeoutSeconds;\n            var expiration = new Date();\n            expiration.setTime(expiration.getTime() + 1000 * seconds);\n            newCachedDigest.expiration = expiration;\n            self._digests.add(webUrl, newCachedDigest);\n            return newCachedDigest.value;\n        });\n    };\n    DigestCache.prototype.clear = function () {\n        this._digests.clear();\n    };\n    return DigestCache;\n}());\nexports.DigestCache = DigestCache;\n\n},{\"../collections/collections\":1,\"../sharepoint/rest/odata\":21,\"../utils/util\":23}],4:[function(require,module,exports){\n(function (global){\n\"use strict\";\nvar FetchClient = (function () {\n    function FetchClient() {\n    }\n    FetchClient.prototype.fetch = function (url, options) {\n        return global.fetch(url, options);\n    };\n    return FetchClient;\n}());\nexports.FetchClient = FetchClient;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],5:[function(require,module,exports){\n\"use strict\";\nvar fetchclient_1 = require(\"./fetchclient\");\nvar digestcache_1 = require(\"./digestcache\");\nvar util_1 = require(\"../utils/util\");\nvar pnplibconfig_1 = require(\"../configuration/pnplibconfig\");\nvar sprequestexecutorclient_1 = require(\"./sprequestexecutorclient\");\nvar nodefetchclient_1 = require(\"./nodefetchclient\");\nvar HttpClient = (function () {\n    function HttpClient() {\n        this._impl = this.getFetchImpl();\n        this._digestCache = new digestcache_1.DigestCache(this);\n    }\n    HttpClient.prototype.fetch = function (url, options) {\n        if (options === void 0) { options = {}; }\n        var self = this;\n        var opts = util_1.Util.extend(options, { cache: \"no-cache\", credentials: \"same-origin\" }, true);\n        var headers = new Headers();\n        this.mergeHeaders(headers, pnplibconfig_1.RuntimeConfig.headers);\n        this.mergeHeaders(headers, options.headers);\n        if (!headers.has(\"Accept\")) {\n            headers.append(\"Accept\", \"application/json\");\n        }\n        if (!headers.has(\"Content-Type\")) {\n            headers.append(\"Content-Type\", \"application/json;odata=verbose;charset=utf-8\");\n        }\n        if (!headers.has(\"X-ClientService-ClientTag\")) {\n            headers.append(\"X-ClientService-ClientTag\", \"PnPCoreJS:1.0.4\");\n        }\n        opts = util_1.Util.extend(opts, { headers: headers });\n        if (opts.method && opts.method.toUpperCase() !== \"GET\") {\n            if (!headers.has(\"X-RequestDigest\")) {\n                var index = url.indexOf(\"_api/\");\n                if (index < 0) {\n                    throw new Error(\"Unable to determine API url\");\n                }\n                var webUrl = url.substr(0, index);\n                return this._digestCache.getDigest(webUrl)\n                    .then(function (digest) {\n                    headers.append(\"X-RequestDigest\", digest);\n                    return self.fetchRaw(url, opts);\n                });\n            }\n        }\n        return self.fetchRaw(url, opts);\n    };\n    HttpClient.prototype.fetchRaw = function (url, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        var rawHeaders = new Headers();\n        this.mergeHeaders(rawHeaders, options.headers);\n        options = util_1.Util.extend(options, { headers: rawHeaders });\n        var retry = function (ctx) {\n            _this._impl.fetch(url, options).then(function (response) { return ctx.resolve(response); }).catch(function (response) {\n                var delay = ctx.delay;\n                if (response.status !== 429 && response.status !== 503) {\n                    ctx.reject(response);\n                }\n                ctx.delay *= 2;\n                ctx.attempts++;\n                if (ctx.retryCount <= ctx.attempts) {\n                    ctx.reject(response);\n                }\n                setTimeout(util_1.Util.getCtxCallback(_this, retry, ctx), delay);\n            });\n        };\n        return new Promise(function (resolve, reject) {\n            var retryContext = {\n                attempts: 0,\n                delay: 100,\n                reject: reject,\n                resolve: resolve,\n                retryCount: 7,\n            };\n            retry.call(_this, retryContext);\n        });\n    };\n    HttpClient.prototype.get = function (url, options) {\n        if (options === void 0) { options = {}; }\n        var opts = util_1.Util.extend(options, { method: \"GET\" });\n        return this.fetch(url, opts);\n    };\n    HttpClient.prototype.post = function (url, options) {\n        if (options === void 0) { options = {}; }\n        var opts = util_1.Util.extend(options, { method: \"POST\" });\n        return this.fetch(url, opts);\n    };\n    HttpClient.prototype.getFetchImpl = function () {\n        if (pnplibconfig_1.RuntimeConfig.useSPRequestExecutor) {\n            return new sprequestexecutorclient_1.SPRequestExecutorClient();\n        }\n        else if (pnplibconfig_1.RuntimeConfig.useNodeFetchClient) {\n            var opts = pnplibconfig_1.RuntimeConfig.nodeRequestOptions;\n            return new nodefetchclient_1.NodeFetchClient(opts.siteUrl, opts.clientId, opts.clientSecret);\n        }\n        else {\n            return new fetchclient_1.FetchClient();\n        }\n    };\n    HttpClient.prototype.mergeHeaders = function (target, source) {\n        if (typeof source !== \"undefined\" && source !== null) {\n            var temp = new Request(\"\", { headers: source });\n            temp.headers.forEach(function (value, name) {\n                target.append(name, value);\n            });\n        }\n    };\n    return HttpClient;\n}());\nexports.HttpClient = HttpClient;\n\n},{\"../configuration/pnplibconfig\":2,\"../utils/util\":23,\"./digestcache\":3,\"./fetchclient\":4,\"./nodefetchclient\":6,\"./sprequestexecutorclient\":7}],6:[function(require,module,exports){\n\"use strict\";\nvar NodeFetchClient = (function () {\n    function NodeFetchClient(siteUrl, _clientId, _clientSecret, _realm) {\n        if (_realm === void 0) { _realm = \"\"; }\n        this.siteUrl = siteUrl;\n        this._clientId = _clientId;\n        this._clientSecret = _clientSecret;\n        this._realm = _realm;\n    }\n    NodeFetchClient.prototype.fetch = function (url, options) {\n        throw new Error(\"Using NodeFetchClient in the browser is not supported.\");\n    };\n    return NodeFetchClient;\n}());\nexports.NodeFetchClient = NodeFetchClient;\n\n},{}],7:[function(require,module,exports){\n\"use strict\";\nvar util_1 = require(\"../utils/util\");\nvar SPRequestExecutorClient = (function () {\n    function SPRequestExecutorClient() {\n        this.convertToResponse = function (spResponse) {\n            var responseHeaders = new Headers();\n            for (var h in spResponse.headers) {\n                if (spResponse.headers[h]) {\n                    responseHeaders.append(h, spResponse.headers[h]);\n                }\n            }\n            return new Response(spResponse.body, {\n                headers: responseHeaders,\n                status: spResponse.statusCode,\n                statusText: spResponse.statusText,\n            });\n        };\n    }\n    SPRequestExecutorClient.prototype.fetch = function (url, options) {\n        var _this = this;\n        if (typeof SP === \"undefined\" || typeof SP.RequestExecutor === \"undefined\") {\n            throw new Error(\"SP.RequestExecutor is undefined. \" +\n                \"Load the SP.RequestExecutor.js library (/_layouts/15/SP.RequestExecutor.js) before loading the PnP JS Core library.\");\n        }\n        var addinWebUrl = url.substring(0, url.indexOf(\"/_api\")), executor = new SP.RequestExecutor(addinWebUrl), headers = {}, iterator, temp;\n        if (options.headers && options.headers instanceof Headers) {\n            iterator = options.headers.entries();\n            temp = iterator.next();\n            while (!temp.done) {\n                headers[temp.value[0]] = temp.value[1];\n                temp = iterator.next();\n            }\n        }\n        else {\n            headers = options.headers;\n        }\n        return new Promise(function (resolve, reject) {\n            var requestOptions = {\n                error: function (error) {\n                    reject(_this.convertToResponse(error));\n                },\n                headers: headers,\n                method: options.method,\n                success: function (response) {\n                    resolve(_this.convertToResponse(response));\n                },\n                url: url,\n            };\n            if (options.body) {\n                util_1.Util.extend(requestOptions, { body: options.body });\n            }\n            else {\n                util_1.Util.extend(requestOptions, { binaryStringRequestBody: true });\n            }\n            executor.executeAsync(requestOptions);\n        });\n    };\n    return SPRequestExecutorClient;\n}());\nexports.SPRequestExecutorClient = SPRequestExecutorClient;\n\n},{\"../utils/util\":23}],8:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar util_1 = require(\"../util\");\nvar objecthandlerbase_1 = require(\"./objecthandlerbase\");\nvar ObjectComposedLook = (function (_super) {\n    __extends(ObjectComposedLook, _super);\n    function ObjectComposedLook() {\n        _super.call(this, \"ComposedLook\");\n    }\n    ObjectComposedLook.prototype.ProvisionObjects = function (object) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var colorPaletteUrl = object.ColorPaletteUrl ? util_1.Util.replaceUrlTokens(object.ColorPaletteUrl) : \"\";\n            var fontSchemeUrl = object.FontSchemeUrl ? util_1.Util.replaceUrlTokens(object.FontSchemeUrl) : \"\";\n            var backgroundImageUrl = object.BackgroundImageUrl ? util_1.Util.replaceUrlTokens(object.BackgroundImageUrl) : null;\n            web.applyTheme(util_1.Util.getRelativeUrl(colorPaletteUrl), util_1.Util.getRelativeUrl(fontSchemeUrl), backgroundImageUrl, true);\n            web.update();\n            clientContext.executeQueryAsync(function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            });\n        });\n    };\n    return ObjectComposedLook;\n}(objecthandlerbase_1.ObjectHandlerBase));\nexports.ObjectComposedLook = ObjectComposedLook;\n\n},{\"../util\":20,\"./objecthandlerbase\":12}],9:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar objecthandlerbase_1 = require(\"./objecthandlerbase\");\nvar ObjectCustomActions = (function (_super) {\n    __extends(ObjectCustomActions, _super);\n    function ObjectCustomActions() {\n        _super.call(this, \"CustomActions\");\n    }\n    ObjectCustomActions.prototype.ProvisionObjects = function (customactions) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var userCustomActions = clientContext.get_web().get_userCustomActions();\n            clientContext.load(userCustomActions);\n            clientContext.executeQueryAsync(function () {\n                customactions.forEach(function (obj) {\n                    var objExists = userCustomActions.get_data().filter(function (userCustomAction) {\n                        return userCustomAction.get_title() === obj.Title;\n                    }).length > 0;\n                    if (!objExists) {\n                        var objCreationInformation = userCustomActions.add();\n                        if (obj.Description) {\n                            objCreationInformation.set_description(obj.Description);\n                        }\n                        if (obj.CommandUIExtension) {\n                            objCreationInformation.set_commandUIExtension(obj.CommandUIExtension);\n                        }\n                        if (obj.Group) {\n                            objCreationInformation.set_group(obj.Group);\n                        }\n                        if (obj.Title) {\n                            objCreationInformation.set_title(obj.Title);\n                        }\n                        if (obj.Url) {\n                            objCreationInformation.set_url(obj.Url);\n                        }\n                        if (obj.ScriptBlock) {\n                            objCreationInformation.set_scriptBlock(obj.ScriptBlock);\n                        }\n                        if (obj.ScriptSrc) {\n                            objCreationInformation.set_scriptSrc(obj.ScriptSrc);\n                        }\n                        if (obj.Location) {\n                            objCreationInformation.set_location(obj.Location);\n                        }\n                        if (obj.ImageUrl) {\n                            objCreationInformation.set_imageUrl(obj.ImageUrl);\n                        }\n                        if (obj.Name) {\n                            objCreationInformation.set_name(obj.Name);\n                        }\n                        if (obj.RegistrationId) {\n                            objCreationInformation.set_registrationId(obj.RegistrationId);\n                        }\n                        if (obj.RegistrationType) {\n                            objCreationInformation.set_registrationType(obj.RegistrationType);\n                        }\n                        if (obj.Rights) {\n                            objCreationInformation.set_rights(obj.Rights);\n                        }\n                        if (obj.Sequence) {\n                            objCreationInformation.set_sequence(obj.Sequence);\n                        }\n                        objCreationInformation.update();\n                    }\n                });\n                clientContext.executeQueryAsync(function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            });\n        });\n    };\n    return ObjectCustomActions;\n}(objecthandlerbase_1.ObjectHandlerBase));\nexports.ObjectCustomActions = ObjectCustomActions;\n\n},{\"./objecthandlerbase\":12}],10:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar objecthandlerbase_1 = require(\"./objecthandlerbase\");\nvar ObjectFeatures = (function (_super) {\n    __extends(ObjectFeatures, _super);\n    function ObjectFeatures() {\n        _super.call(this, \"Features\");\n    }\n    ObjectFeatures.prototype.ProvisionObjects = function (features) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var webFeatures = web.get_features();\n            features.forEach(function (f) {\n                if (f.Deactivate === true) {\n                    webFeatures.remove(new SP.Guid(f.ID), true);\n                }\n                else {\n                    webFeatures.add(new SP.Guid(f.ID), true, SP.FeatureDefinitionScope.none);\n                }\n            });\n            web.update();\n            clientContext.load(webFeatures);\n            clientContext.executeQueryAsync(function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            });\n        });\n    };\n    return ObjectFeatures;\n}(objecthandlerbase_1.ObjectHandlerBase));\nexports.ObjectFeatures = ObjectFeatures;\n\n},{\"./objecthandlerbase\":12}],11:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar CoreUtil = require(\"../../../utils/util\");\nvar util_1 = require(\"../util\");\nvar objecthandlerbase_1 = require(\"./objecthandlerbase\");\nvar ObjectFiles = (function (_super) {\n    __extends(ObjectFiles, _super);\n    function ObjectFiles() {\n        _super.call(this, \"Files\");\n    }\n    ObjectFiles.prototype.ProvisionObjects = function (objects) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var fileInfos = [];\n            var promises = [];\n            objects.forEach(function (obj, index) {\n                promises.push(_this.httpClient.fetchRaw(util_1.Util.replaceUrlTokens(obj.Src)).then(function (response) {\n                    return response.text();\n                }));\n            });\n            Promise.all(promises).then(function (responses) {\n                responses.forEach(function (response, index) {\n                    var obj = objects[index];\n                    var filename = _this.GetFilenameFromFilePath(obj.Dest);\n                    var webServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl;\n                    var folder = web.getFolderByServerRelativeUrl(webServerRelativeUrl + \"/\" + _this.GetFolderFromFilePath(obj.Dest));\n                    var fi = {\n                        Contents: response,\n                        Dest: obj.Dest,\n                        Filename: filename,\n                        Folder: folder,\n                        Instance: null,\n                        Overwrite: false,\n                        Properties: [],\n                        RemoveExistingWebParts: true,\n                        ServerRelativeUrl: obj.Dest,\n                        Src: obj.Src,\n                        Views: [],\n                        WebParts: [],\n                    };\n                    CoreUtil.Util.extend(fi, obj);\n                    if (fi.Filename.indexOf(\"Form.aspx\") !== -1) {\n                        return;\n                    }\n                    var objCreationInformation = new SP.FileCreationInformation();\n                    objCreationInformation.set_overwrite(fi.Overwrite);\n                    objCreationInformation.set_url(fi.Filename);\n                    objCreationInformation.set_content(new SP.Base64EncodedByteArray());\n                    for (var i = 0; i < fi.Contents.length; i++) {\n                        objCreationInformation.get_content().append(fi.Contents.charCodeAt(i));\n                    }\n                    clientContext.load(fi.Folder.get_files().add(objCreationInformation));\n                    fileInfos.push(fi);\n                });\n            });\n            clientContext.executeQueryAsync(function () {\n                promises = [];\n                fileInfos.forEach(function (fi) {\n                    if (fi.Properties && Object.keys(fi.Properties).length > 0) {\n                        promises.push(_this.ApplyFileProperties(fi.Dest, fi.Properties));\n                    }\n                    if (fi.WebParts && fi.WebParts.length > 0) {\n                        promises.push(_this.AddWebPartsToWebPartPage(fi.Dest, fi.Src, fi.WebParts, fi.RemoveExistingWebParts));\n                    }\n                });\n                Promise.all(promises).then(function () {\n                    _this.ModifyHiddenViews(objects).then(function (value) {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve(value);\n                    }, function (error) {\n                        _super.prototype.scope_ended.call(_this);\n                        reject(error);\n                    });\n                });\n            }, function (error) {\n                _super.prototype.scope_ended.call(_this);\n                reject(error);\n            });\n        });\n    };\n    ObjectFiles.prototype.RemoveWebPartsFromFileIfSpecified = function (clientContext, limitedWebPartManager, shouldRemoveExisting) {\n        return new Promise(function (resolve, reject) {\n            if (!shouldRemoveExisting) {\n                resolve();\n            }\n            var existingWebParts = limitedWebPartManager.get_webParts();\n            clientContext.load(existingWebParts);\n            clientContext.executeQueryAsync(function () {\n                existingWebParts.get_data().forEach(function (wp) {\n                    wp.deleteWebPart();\n                });\n                clientContext.load(existingWebParts);\n                clientContext.executeQueryAsync(resolve, reject);\n            }, reject);\n        });\n    };\n    ObjectFiles.prototype.GetWebPartXml = function (webParts) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var promises = [];\n            webParts.forEach(function (wp, index) {\n                if (wp.Contents.FileUrl) {\n                    var fileUrl = util_1.Util.replaceUrlTokens(wp.Contents.FileUrl);\n                    promises.push(_this.httpClient.fetchRaw(fileUrl).then(function (response) {\n                        return response.text();\n                    }));\n                }\n                else {\n                    promises.push((function () {\n                        return new Promise(function (res, rej) {\n                            res();\n                        });\n                    })());\n                }\n            });\n            Promise.all(promises).then(function (responses) {\n                responses.forEach(function (response, index) {\n                    var wp = webParts[index];\n                    if (wp !== null && response && response.length > 0) {\n                        wp.Contents.Xml = response;\n                    }\n                });\n                resolve(webParts);\n            });\n        });\n    };\n    ObjectFiles.prototype.AddWebPartsToWebPartPage = function (dest, src, webParts, shouldRemoveExisting) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var fileServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + dest;\n            var file = web.getFileByServerRelativeUrl(fileServerRelativeUrl);\n            clientContext.load(file);\n            clientContext.executeQueryAsync(function () {\n                var limitedWebPartManager = file.getLimitedWebPartManager(SP.WebParts.PersonalizationScope.shared);\n                _this.RemoveWebPartsFromFileIfSpecified(clientContext, limitedWebPartManager, shouldRemoveExisting).then(function () {\n                    _this.GetWebPartXml(webParts).then(function (webPartsWithXml) {\n                        webPartsWithXml.forEach(function (wp) {\n                            if (!wp.Contents.Xml) {\n                                return;\n                            }\n                            var oWebPartDefinition = limitedWebPartManager.importWebPart(util_1.Util.replaceUrlTokens(wp.Contents.Xml));\n                            var oWebPart = oWebPartDefinition.get_webPart();\n                            limitedWebPartManager.addWebPart(oWebPart, wp.Zone, wp.Order);\n                        });\n                        clientContext.executeQueryAsync(resolve, resolve);\n                    });\n                });\n            }, resolve);\n        });\n    };\n    ObjectFiles.prototype.ApplyFileProperties = function (dest, fileProperties) {\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var fileServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + dest;\n            var file = web.getFileByServerRelativeUrl(fileServerRelativeUrl);\n            var listItemAllFields = file.get_listItemAllFields();\n            Object.keys(fileProperties).forEach(function (key) {\n                listItemAllFields.set_item(key, fileProperties[key]);\n            });\n            listItemAllFields.update();\n            clientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    ObjectFiles.prototype.GetViewFromCollectionByUrl = function (viewCollection, url) {\n        var serverRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + url;\n        var viewCollectionEnumerator = viewCollection.getEnumerator();\n        while (viewCollectionEnumerator.moveNext()) {\n            var view = viewCollectionEnumerator.get_current();\n            if (view.get_serverRelativeUrl().toString().toLowerCase() === serverRelativeUrl.toLowerCase()) {\n                return view;\n            }\n        }\n        return null;\n    };\n    ObjectFiles.prototype.ModifyHiddenViews = function (objects) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var mapping = {};\n            var lists = [];\n            var listViewCollections = [];\n            objects.forEach(function (obj) {\n                if (!obj.Views) {\n                    return;\n                }\n                obj.Views.forEach(function (v) {\n                    mapping[v.List] = mapping[v.List] || [];\n                    mapping[v.List].push(CoreUtil.Util.extend(v, { \"Url\": obj.Dest }));\n                });\n            });\n            Object.keys(mapping).forEach(function (l, index) {\n                lists.push(web.get_lists().getByTitle(l));\n                listViewCollections.push(web.get_lists().getByTitle(l).get_views());\n                clientContext.load(lists[index]);\n                clientContext.load(listViewCollections[index]);\n            });\n            clientContext.executeQueryAsync(function () {\n                Object.keys(mapping).forEach(function (l, index) {\n                    var views = mapping[l];\n                    var list = lists[index];\n                    var viewCollection = listViewCollections[index];\n                    views.forEach(function (v) {\n                        var view = _this.GetViewFromCollectionByUrl(viewCollection, v.Url);\n                        if (view == null) {\n                            return;\n                        }\n                        if (v.Paged) {\n                            view.set_paged(v.Paged);\n                        }\n                        if (v.Query) {\n                            view.set_viewQuery(v.Query);\n                        }\n                        if (v.RowLimit) {\n                            view.set_rowLimit(v.RowLimit);\n                        }\n                        if (v.ViewFields && v.ViewFields.length > 0) {\n                            var columns_1 = view.get_viewFields();\n                            columns_1.removeAll();\n                            v.ViewFields.forEach(function (vf) {\n                                columns_1.add(vf);\n                            });\n                        }\n                        view.update();\n                    });\n                    clientContext.load(viewCollection);\n                    list.update();\n                });\n                clientContext.executeQueryAsync(resolve, resolve);\n            }, resolve);\n        });\n    };\n    ObjectFiles.prototype.GetFolderFromFilePath = function (filePath) {\n        var split = filePath.split(\"/\");\n        return split.splice(0, split.length - 1).join(\"/\");\n    };\n    ObjectFiles.prototype.GetFilenameFromFilePath = function (filePath) {\n        var split = filePath.split(\"/\");\n        return split[split.length - 1];\n    };\n    return ObjectFiles;\n}(objecthandlerbase_1.ObjectHandlerBase));\nexports.ObjectFiles = ObjectFiles;\n;\n\n},{\"../../../utils/util\":23,\"../util\":20,\"./objecthandlerbase\":12}],12:[function(require,module,exports){\n\"use strict\";\nvar httpclient_1 = require(\"../../../net/httpclient\");\nvar logging_1 = require(\"../../../utils/logging\");\nvar ObjectHandlerBase = (function () {\n    function ObjectHandlerBase(name) {\n        this.name = name;\n        this.httpClient = new httpclient_1.HttpClient();\n    }\n    ObjectHandlerBase.prototype.ProvisionObjects = function (objects, parameters) {\n        return new Promise(function (resolve, reject) { resolve(\"Not implemented.\"); });\n    };\n    ObjectHandlerBase.prototype.scope_started = function () {\n        logging_1.Logger.write(this.name + \": Code execution scope started\");\n    };\n    ObjectHandlerBase.prototype.scope_ended = function () {\n        logging_1.Logger.write(this.name + \": Code execution scope stopped\");\n    };\n    return ObjectHandlerBase;\n}());\nexports.ObjectHandlerBase = ObjectHandlerBase;\n\n},{\"../../../net/httpclient\":5,\"../../../utils/logging\":22}],13:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar sequencer_1 = require(\"../sequencer/sequencer\");\nvar objecthandlerbase_1 = require(\"./objecthandlerbase\");\nvar ObjectLists = (function (_super) {\n    __extends(ObjectLists, _super);\n    function ObjectLists() {\n        _super.call(this, \"Lists\");\n    }\n    ObjectLists.prototype.ProvisionObjects = function (objects) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var lists = clientContext.get_web().get_lists();\n            var listInstances = [];\n            clientContext.load(lists);\n            clientContext.executeQueryAsync(function () {\n                objects.forEach(function (obj, index) {\n                    var existingObj = lists.get_data().filter(function (list) {\n                        return list.get_title() === obj.Title;\n                    })[0];\n                    if (existingObj) {\n                        if (obj.Description) {\n                            existingObj.set_description(obj.Description);\n                        }\n                        if (obj.EnableVersioning !== undefined) {\n                            existingObj.set_enableVersioning(obj.EnableVersioning);\n                        }\n                        if (obj.EnableMinorVersions !== undefined) {\n                            existingObj.set_enableMinorVersions(obj.EnableMinorVersions);\n                        }\n                        if (obj.EnableModeration !== undefined) {\n                            existingObj.set_enableModeration(obj.EnableModeration);\n                        }\n                        if (obj.EnableFolderCreation !== undefined) {\n                            existingObj.set_enableFolderCreation(obj.EnableFolderCreation);\n                        }\n                        if (obj.EnableAttachments !== undefined) {\n                            existingObj.set_enableAttachments(obj.EnableAttachments);\n                        }\n                        if (obj.NoCrawl !== undefined) {\n                            existingObj.set_noCrawl(obj.NoCrawl);\n                        }\n                        if (obj.DefaultDisplayFormUrl) {\n                            existingObj.set_defaultDisplayFormUrl(obj.DefaultDisplayFormUrl);\n                        }\n                        if (obj.DefaultEditFormUrl) {\n                            existingObj.set_defaultEditFormUrl(obj.DefaultEditFormUrl);\n                        }\n                        if (obj.DefaultNewFormUrl) {\n                            existingObj.set_defaultNewFormUrl(obj.DefaultNewFormUrl);\n                        }\n                        if (obj.DraftVersionVisibility) {\n                            existingObj.set_draftVersionVisibility(SP.DraftVisibilityType[obj.DraftVersionVisibility]);\n                        }\n                        if (obj.ImageUrl) {\n                            existingObj.set_imageUrl(obj.ImageUrl);\n                        }\n                        if (obj.Hidden !== undefined) {\n                            existingObj.set_hidden(obj.Hidden);\n                        }\n                        if (obj.ForceCheckout !== undefined) {\n                            existingObj.set_forceCheckout(obj.ForceCheckout);\n                        }\n                        existingObj.update();\n                        listInstances.push(existingObj);\n                        clientContext.load(listInstances[index]);\n                    }\n                    else {\n                        var objCreationInformation = new SP.ListCreationInformation();\n                        if (obj.Description) {\n                            objCreationInformation.set_description(obj.Description);\n                        }\n                        if (obj.OnQuickLaunch !== undefined) {\n                            var value = obj.OnQuickLaunch ? SP.QuickLaunchOptions.on : SP.QuickLaunchOptions.off;\n                            objCreationInformation.set_quickLaunchOption(value);\n                        }\n                        if (obj.TemplateType) {\n                            objCreationInformation.set_templateType(obj.TemplateType);\n                        }\n                        if (obj.Title) {\n                            objCreationInformation.set_title(obj.Title);\n                        }\n                        if (obj.Url) {\n                            objCreationInformation.set_url(obj.Url);\n                        }\n                        var createdList = lists.add(objCreationInformation);\n                        if (obj.EnableVersioning !== undefined) {\n                            createdList.set_enableVersioning(obj.EnableVersioning);\n                        }\n                        if (obj.EnableMinorVersions !== undefined) {\n                            createdList.set_enableMinorVersions(obj.EnableMinorVersions);\n                        }\n                        if (obj.EnableModeration !== undefined) {\n                            createdList.set_enableModeration(obj.EnableModeration);\n                        }\n                        if (obj.EnableFolderCreation !== undefined) {\n                            createdList.set_enableFolderCreation(obj.EnableFolderCreation);\n                        }\n                        if (obj.EnableAttachments !== undefined) {\n                            createdList.set_enableAttachments(obj.EnableAttachments);\n                        }\n                        if (obj.NoCrawl !== undefined) {\n                            createdList.set_noCrawl(obj.NoCrawl);\n                        }\n                        if (obj.DefaultDisplayFormUrl) {\n                            createdList.set_defaultDisplayFormUrl(obj.DefaultDisplayFormUrl);\n                        }\n                        if (obj.DefaultEditFormUrl) {\n                            createdList.set_defaultEditFormUrl(obj.DefaultEditFormUrl);\n                        }\n                        if (obj.DefaultNewFormUrl) {\n                            createdList.set_defaultNewFormUrl(obj.DefaultNewFormUrl);\n                        }\n                        if (obj.DraftVersionVisibility) {\n                            var value = SP.DraftVisibilityType[obj.DraftVersionVisibility.toLocaleLowerCase()];\n                            createdList.set_draftVersionVisibility(value);\n                        }\n                        if (obj.ImageUrl) {\n                            createdList.set_imageUrl(obj.ImageUrl);\n                        }\n                        if (obj.Hidden !== undefined) {\n                            createdList.set_hidden(obj.Hidden);\n                        }\n                        if (obj.ForceCheckout !== undefined) {\n                            createdList.set_forceCheckout(obj.ForceCheckout);\n                        }\n                        listInstances.push(createdList);\n                        clientContext.load(listInstances[index]);\n                    }\n                });\n                clientContext.executeQueryAsync(function () {\n                    var sequencer = new sequencer_1.Sequencer([\n                        _this.ApplyContentTypeBindings,\n                        _this.ApplyListInstanceFieldRefs,\n                        _this.ApplyFields,\n                        _this.ApplyLookupFields,\n                        _this.ApplyListSecurity,\n                        _this.CreateViews,\n                        _this.InsertDataRows,\n                        _this.CreateFolders,\n                    ], { ClientContext: clientContext, ListInstances: listInstances, Objects: objects }, _this);\n                    sequencer.execute().then(function () {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve();\n                    });\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            });\n        });\n    };\n    ObjectLists.prototype.EnsureLocationBasedMetadataDefaultsReceiver = function (clientContext, list) {\n        var eventReceivers = list.get_eventReceivers();\n        var eventRecCreationInfo = new SP.EventReceiverDefinitionCreationInformation();\n        eventRecCreationInfo.set_receiverName(\"LocationBasedMetadataDefaultsReceiver ItemAdded\");\n        eventRecCreationInfo.set_synchronization(1);\n        eventRecCreationInfo.set_sequenceNumber(1000);\n        eventRecCreationInfo.set_receiverAssembly(\"Microsoft.Office.DocumentManagement, Version=15.0.0.0, Culture=neutral, \" +\n            \"PublicKeyToken=71e9bce111e9429c\");\n        eventRecCreationInfo.set_receiverClass(\"Microsoft.Office.DocumentManagement.LocationBasedMetadataDefaultsReceiver\");\n        eventRecCreationInfo.set_eventType(SP.EventReceiverType.itemAdded);\n        eventReceivers.add(eventRecCreationInfo);\n        list.update();\n    };\n    ObjectLists.prototype.CreateFolders = function (params) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (!obj.Folders) {\n                    return;\n                }\n                var folderServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + obj.Url;\n                var rootFolder = l.get_rootFolder();\n                var metadataDefaults = \"<MetadataDefaults>\";\n                var setMetadataDefaults = false;\n                obj.Folders.forEach(function (f) {\n                    var folderUrl = folderServerRelativeUrl + \"/\" + f.Name;\n                    rootFolder.get_folders().add(folderUrl);\n                    if (f.DefaultValues) {\n                        var keys = Object.keys(f.DefaultValues).length;\n                        if (keys > 0) {\n                            metadataDefaults += \"<a href='\" + folderUrl + \"'>\";\n                            Object.keys(f.DefaultValues).forEach(function (key) {\n                                metadataDefaults += \"<DefaultValue FieldName=\\\"\" + key + \"\\\">\" + f.DefaultValues[key] + \"</DefaultValue>\";\n                            });\n                            metadataDefaults += \"</a>\";\n                        }\n                        setMetadataDefaults = true;\n                    }\n                });\n                metadataDefaults += \"</MetadataDefaults>\";\n                if (setMetadataDefaults) {\n                    var metadataDefaultsFileCreateInfo = new SP.FileCreationInformation();\n                    metadataDefaultsFileCreateInfo.set_url(folderServerRelativeUrl + \"/Forms/client_LocationBasedDefaults.html\");\n                    metadataDefaultsFileCreateInfo.set_content(new SP.Base64EncodedByteArray());\n                    metadataDefaultsFileCreateInfo.set_overwrite(true);\n                    for (var i = 0; i < metadataDefaults.length; i++) {\n                        metadataDefaultsFileCreateInfo.get_content().append(metadataDefaults.charCodeAt(i));\n                    }\n                    rootFolder.get_files().add(metadataDefaultsFileCreateInfo);\n                    _this.EnsureLocationBasedMetadataDefaultsReceiver(params.ClientContext, l);\n                }\n            });\n            params.ClientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    ObjectLists.prototype.ApplyContentTypeBindings = function (params) {\n        return new Promise(function (resolve, reject) {\n            var webCts = params.ClientContext.get_site().get_rootWeb().get_contentTypes();\n            var listCts = [];\n            params.ListInstances.forEach(function (l, index) {\n                listCts.push(l.get_contentTypes());\n                params.ClientContext.load(listCts[index], \"Include(Name,Id)\");\n                if (params.Objects[index].ContentTypeBindings) {\n                    l.set_contentTypesEnabled(true);\n                    l.update();\n                }\n            });\n            params.ClientContext.load(webCts);\n            params.ClientContext.executeQueryAsync(function () {\n                params.ListInstances.forEach(function (list, index) {\n                    var obj = params.Objects[index];\n                    if (!obj.ContentTypeBindings) {\n                        return;\n                    }\n                    var listContentTypes = listCts[index];\n                    var existingContentTypes = new Array();\n                    if (obj.RemoveExistingContentTypes && obj.ContentTypeBindings.length > 0) {\n                        listContentTypes.get_data().forEach(function (ct) {\n                            existingContentTypes.push(ct);\n                        });\n                    }\n                    obj.ContentTypeBindings.forEach(function (ctb) {\n                        listContentTypes.addExistingContentType(webCts.getById(ctb.ContentTypeId));\n                    });\n                    if (obj.RemoveExistingContentTypes && obj.ContentTypeBindings.length > 0) {\n                        for (var j = 0; j < existingContentTypes.length; j++) {\n                            var ect = existingContentTypes[j];\n                            ect.deleteObject();\n                        }\n                    }\n                    list.update();\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            }, resolve);\n        });\n    };\n    ObjectLists.prototype.ApplyListInstanceFieldRefs = function (params) {\n        return new Promise(function (resolve, reject) {\n            var siteFields = params.ClientContext.get_site().get_rootWeb().get_fields();\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (obj.FieldRefs) {\n                    obj.FieldRefs.forEach(function (fr) {\n                        var field = siteFields.getByInternalNameOrTitle(fr.Name);\n                        l.get_fields().add(field);\n                    });\n                    l.update();\n                }\n            });\n            params.ClientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    ObjectLists.prototype.ApplyFields = function (params) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (obj.Fields) {\n                    obj.Fields.forEach(function (f) {\n                        var fieldXml = _this.GetFieldXml(f, params.ListInstances, l);\n                        var fieldType = _this.GetFieldXmlAttr(fieldXml, \"Type\");\n                        if (fieldType !== \"Lookup\" && fieldType !== \"LookupMulti\") {\n                            l.get_fields().addFieldAsXml(fieldXml, true, SP.AddFieldOptions.addToAllContentTypes);\n                        }\n                    });\n                    l.update();\n                }\n            });\n            params.ClientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    ObjectLists.prototype.ApplyLookupFields = function (params) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (obj.Fields) {\n                    obj.Fields.forEach(function (f) {\n                        var fieldXml = _this.GetFieldXml(f, params.ListInstances, l);\n                        if (!fieldXml) {\n                            return;\n                        }\n                        var fieldType = _this.GetFieldXmlAttr(fieldXml, \"Type\");\n                        if (fieldType === \"Lookup\" || fieldType === \"LookupMulti\") {\n                            l.get_fields().addFieldAsXml(fieldXml, true, SP.AddFieldOptions.addToAllContentTypes);\n                        }\n                    });\n                    l.update();\n                }\n            });\n            params.ClientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    ObjectLists.prototype.GetFieldXmlAttr = function (fieldXml, attr) {\n        var regex = new RegExp(attr + '=[\\'|\\\"](?:(.+?))[\\'|\\\"]');\n        var match = regex.exec(fieldXml);\n        return match[1];\n    };\n    ObjectLists.prototype.GetFieldXml = function (field, lists, list) {\n        var fieldXml = \"\";\n        if (!field.SchemaXml) {\n            var properties_1 = [];\n            Object.keys(field).forEach(function (prop) {\n                var value = field[prop];\n                if (prop === \"List\") {\n                    var targetList = lists.filter(function (v) {\n                        return v.get_title() === value;\n                    });\n                    if (targetList.length > 0) {\n                        value = \"{\" + targetList[0].get_id().toString() + \"}\";\n                    }\n                    else {\n                        return null;\n                    }\n                    properties_1.push(prop + \"=\\\"\" + value + \"\\\"\");\n                }\n            });\n            fieldXml = \"<Field \" + properties_1.join(\" \") + \">\";\n            if (field.Type === \"Calculated\") {\n                fieldXml += \"<Formula>\" + field.Formula + \"</Formula>\";\n            }\n            fieldXml += \"</Field>\";\n        }\n        return fieldXml;\n    };\n    ObjectLists.prototype.ApplyListSecurity = function (params) {\n        return new Promise(function (resolve, reject) {\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (!obj.Security) {\n                    return;\n                }\n                if (obj.Security.BreakRoleInheritance) {\n                    l.breakRoleInheritance(obj.Security.CopyRoleAssignments, obj.Security.ClearSubscopes);\n                    l.update();\n                    params.ClientContext.load(l.get_roleAssignments());\n                }\n            });\n            var web = params.ClientContext.get_web();\n            var allProperties = web.get_allProperties();\n            var siteGroups = web.get_siteGroups();\n            var roleDefinitions = web.get_roleDefinitions();\n            params.ClientContext.load(allProperties);\n            params.ClientContext.load(roleDefinitions);\n            params.ClientContext.executeQueryAsync(function () {\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (!obj.Security) {\n                        return;\n                    }\n                    obj.Security.RoleAssignments.forEach(function (ra) {\n                        var roleDef = null;\n                        if (typeof ra.RoleDefinition === \"number\") {\n                            roleDef = roleDefinitions.getById(ra.RoleDefinition);\n                        }\n                        else {\n                            roleDef = roleDefinitions.getByName(ra.RoleDefinition);\n                        }\n                        var roleBindings = SP.RoleDefinitionBindingCollection.newObject(params.ClientContext);\n                        roleBindings.add(roleDef);\n                        var principal = null;\n                        if (ra.Principal.match(/\\{[A-Za-z]*\\}+/g)) {\n                            var token = ra.Principal.substring(1, ra.Principal.length - 1);\n                            var groupId = allProperties.get_fieldValues()[(\"vti_\" + token)];\n                            principal = siteGroups.getById(groupId);\n                        }\n                        else {\n                            principal = siteGroups.getByName(principal);\n                        }\n                        l.get_roleAssignments().add(principal, roleBindings);\n                    });\n                    l.update();\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            }, resolve);\n        });\n    };\n    ObjectLists.prototype.CreateViews = function (params) {\n        return new Promise(function (resolve, reject) {\n            var listViewCollections = [];\n            params.ListInstances.forEach(function (l, index) {\n                listViewCollections.push(l.get_views());\n                params.ClientContext.load(listViewCollections[index]);\n            });\n            params.ClientContext.executeQueryAsync(function () {\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (!obj.Views) {\n                        return;\n                    }\n                    listViewCollections.push(l.get_views());\n                    params.ClientContext.load(listViewCollections[index]);\n                    obj.Views.forEach(function (v) {\n                        var viewExists = listViewCollections[index].get_data().filter(function (ev) {\n                            if (obj.RemoveExistingViews && obj.Views.length > 0) {\n                                ev.deleteObject();\n                                return false;\n                            }\n                            return ev.get_title() === v.Title;\n                        }).length > 0;\n                        if (viewExists) {\n                            var view = listViewCollections[index].getByTitle(v.Title);\n                            if (v.Paged) {\n                                view.set_paged(v.Paged);\n                            }\n                            if (v.Query) {\n                                view.set_viewQuery(v.Query);\n                            }\n                            if (v.RowLimit) {\n                                view.set_rowLimit(v.RowLimit);\n                            }\n                            if (v.ViewFields && v.ViewFields.length > 0) {\n                                var columns_1 = view.get_viewFields();\n                                columns_1.removeAll();\n                                v.ViewFields.forEach(function (vf) {\n                                    columns_1.add(vf);\n                                });\n                            }\n                            if (v.Scope) {\n                                view.set_scope(v.Scope);\n                            }\n                            view.update();\n                        }\n                        else {\n                            var viewCreationInformation = new SP.ViewCreationInformation();\n                            if (v.Title) {\n                                viewCreationInformation.set_title(v.Title);\n                            }\n                            if (v.PersonalView) {\n                                viewCreationInformation.set_personalView(v.PersonalView);\n                            }\n                            if (v.Paged) {\n                                viewCreationInformation.set_paged(v.Paged);\n                            }\n                            if (v.Query) {\n                                viewCreationInformation.set_query(v.Query);\n                            }\n                            if (v.RowLimit) {\n                                viewCreationInformation.set_rowLimit(v.RowLimit);\n                            }\n                            if (v.SetAsDefaultView) {\n                                viewCreationInformation.set_setAsDefaultView(v.SetAsDefaultView);\n                            }\n                            if (v.ViewFields) {\n                                viewCreationInformation.set_viewFields(v.ViewFields);\n                            }\n                            if (v.ViewTypeKind) {\n                                viewCreationInformation.set_viewTypeKind(SP.ViewType.html);\n                            }\n                            var view = l.get_views().add(viewCreationInformation);\n                            if (v.Scope) {\n                                view.set_scope(v.Scope);\n                                view.update();\n                            }\n                            l.update();\n                        }\n                        params.ClientContext.load(l.get_views());\n                    });\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            }, resolve);\n        });\n    };\n    ObjectLists.prototype.InsertDataRows = function (params) {\n        return new Promise(function (resolve, reject) {\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (obj.DataRows) {\n                    obj.DataRows.forEach(function (r) {\n                        var item = l.addItem(new SP.ListItemCreationInformation());\n                        Object.keys(r).forEach(function (key) {\n                            item.set_item(key, r[key]);\n                        });\n                        item.update();\n                        params.ClientContext.load(item);\n                    });\n                }\n            });\n            params.ClientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    return ObjectLists;\n}(objecthandlerbase_1.ObjectHandlerBase));\nexports.ObjectLists = ObjectLists;\n\n},{\"../sequencer/sequencer\":19,\"./objecthandlerbase\":12}],14:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar util_1 = require(\"../util\");\nvar objecthandlerbase_1 = require(\"./objecthandlerbase\");\nvar ObjectNavigation = (function (_super) {\n    __extends(ObjectNavigation, _super);\n    function ObjectNavigation() {\n        _super.call(this, \"Navigation\");\n    }\n    ObjectNavigation.prototype.ProvisionObjects = function (object) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        var clientContext = SP.ClientContext.get_current();\n        var navigation = clientContext.get_web().get_navigation();\n        return new Promise(function (resolve, reject) {\n            _this.ConfigureQuickLaunch(object.QuickLaunch, clientContext, _this.httpClient, navigation).then(function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                reject();\n            });\n        });\n    };\n    ObjectNavigation.prototype.getNodeFromCollectionByTitle = function (nodeCollection, title) {\n        var f = nodeCollection.filter(function (val) {\n            return val.get_title() === title;\n        });\n        return f[0] || null;\n    };\n    ;\n    ObjectNavigation.prototype.ConfigureQuickLaunch = function (nodes, clientContext, httpClient, navigation) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (nodes.length === 0) {\n                resolve();\n            }\n            else {\n                var quickLaunchNodeCollection_1 = navigation.get_quickLaunch();\n                clientContext.load(quickLaunchNodeCollection_1);\n                clientContext.executeQueryAsync(function () {\n                    var temporaryQuickLaunch = [];\n                    var index = quickLaunchNodeCollection_1.get_count() - 1;\n                    while (index >= 0) {\n                        var oldNode = quickLaunchNodeCollection_1.itemAt(index);\n                        temporaryQuickLaunch.push(oldNode);\n                        oldNode.deleteObject();\n                        index--;\n                    }\n                    clientContext.executeQueryAsync(function () {\n                        nodes.forEach(function (n) {\n                            var existingNode = _this.getNodeFromCollectionByTitle(temporaryQuickLaunch, n.Title);\n                            var newNode = new SP.NavigationNodeCreationInformation();\n                            newNode.set_title(n.Title);\n                            newNode.set_url(existingNode ? existingNode.get_url() : util_1.Util.replaceUrlTokens(n.Url));\n                            newNode.set_asLastNode(true);\n                            quickLaunchNodeCollection_1.add(newNode);\n                        });\n                        clientContext.executeQueryAsync(function () {\n                            httpClient.get(_spPageContextInfo.webAbsoluteUrl + \"/_api/web/Navigation/QuickLaunch\").then(function (response) {\n                                response.json().then(function (json) {\n                                    json.value.forEach(function (d) {\n                                        var node = navigation.getNodeById(d.Id);\n                                        var childrenNodeCollection = node.get_children();\n                                        var parentNode = nodes.filter(function (value) { return value.Title === d.Title; })[0];\n                                        if (parentNode && parentNode.Children) {\n                                            parentNode.Children.forEach(function (n) {\n                                                var existingNode = _this.getNodeFromCollectionByTitle(temporaryQuickLaunch, n.Title);\n                                                var newNode = new SP.NavigationNodeCreationInformation();\n                                                newNode.set_title(n.Title);\n                                                newNode.set_url(existingNode\n                                                    ? existingNode.get_url()\n                                                    : util_1.Util.replaceUrlTokens(n.Url));\n                                                newNode.set_asLastNode(true);\n                                                childrenNodeCollection.add(newNode);\n                                            });\n                                        }\n                                    });\n                                    clientContext.executeQueryAsync(resolve, resolve);\n                                });\n                            });\n                        }, resolve);\n                    });\n                });\n            }\n        });\n    };\n    return ObjectNavigation;\n}(objecthandlerbase_1.ObjectHandlerBase));\nexports.ObjectNavigation = ObjectNavigation;\n\n},{\"../util\":20,\"./objecthandlerbase\":12}],15:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar util_1 = require(\"../util\");\nvar objecthandlerbase_1 = require(\"./objecthandlerbase\");\nvar ObjectPropertyBagEntries = (function (_super) {\n    __extends(ObjectPropertyBagEntries, _super);\n    function ObjectPropertyBagEntries() {\n        _super.call(this, \"PropertyBagEntries\");\n    }\n    ObjectPropertyBagEntries.prototype.ProvisionObjects = function (entries) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            if (!entries || entries.length === 0) {\n                resolve();\n            }\n            else {\n                var clientContext_1 = SP.ClientContext.get_current();\n                var web_1 = clientContext_1.get_web();\n                var propBag_1 = web_1.get_allProperties();\n                var indexedProperties_1 = [];\n                for (var i = 0; i < entries.length; i++) {\n                    var entry = entries[i];\n                    propBag_1.set_item(entry.Key, entry.Value);\n                    if (entry.Indexed) {\n                        indexedProperties_1.push(util_1.Util.encodePropertyKey(entry.Key));\n                    }\n                    ;\n                }\n                ;\n                web_1.update();\n                clientContext_1.load(propBag_1);\n                clientContext_1.executeQueryAsync(function () {\n                    if (indexedProperties_1.length > 0) {\n                        propBag_1.set_item(\"vti_indexedpropertykeys\", indexedProperties_1.join(\"|\"));\n                        web_1.update();\n                        clientContext_1.executeQueryAsync(function () {\n                            _super.prototype.scope_ended.call(_this);\n                            resolve();\n                        }, function () {\n                            _super.prototype.scope_ended.call(_this);\n                            resolve();\n                        });\n                    }\n                    else {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve();\n                    }\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            }\n        });\n    };\n    return ObjectPropertyBagEntries;\n}(objecthandlerbase_1.ObjectHandlerBase));\nexports.ObjectPropertyBagEntries = ObjectPropertyBagEntries;\n\n},{\"../util\":20,\"./objecthandlerbase\":12}],16:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar objecthandlerbase_1 = require(\"./objecthandlerbase\");\nvar ObjectWebSettings = (function (_super) {\n    __extends(ObjectWebSettings, _super);\n    function ObjectWebSettings() {\n        _super.call(this, \"WebSettings\");\n    }\n    ObjectWebSettings.prototype.ProvisionObjects = function (object) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            if (object.WelcomePage) {\n                web.get_rootFolder().set_welcomePage(object.WelcomePage);\n                web.get_rootFolder().update();\n            }\n            if (object.MasterUrl) {\n                web.set_masterUrl(object.MasterUrl);\n            }\n            if (object.CustomMasterUrl) {\n                web.set_customMasterUrl(object.CustomMasterUrl);\n            }\n            if (object.SaveSiteAsTemplateEnabled !== undefined) {\n                web.set_saveSiteAsTemplateEnabled(object.SaveSiteAsTemplateEnabled);\n            }\n            if (object.QuickLaunchEnabled !== undefined) {\n                web.set_saveSiteAsTemplateEnabled(object.QuickLaunchEnabled);\n            }\n            if (object.TreeViewEnabled !== undefined) {\n                web.set_treeViewEnabled(object.TreeViewEnabled);\n            }\n            web.update();\n            clientContext.load(web);\n            clientContext.executeQueryAsync(function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            });\n        });\n    };\n    return ObjectWebSettings;\n}(objecthandlerbase_1.ObjectHandlerBase));\nexports.ObjectWebSettings = ObjectWebSettings;\n\n},{\"./objecthandlerbase\":12}],17:[function(require,module,exports){\n\"use strict\";\nvar provisioningstep_1 = require(\"./provisioningstep\");\nvar objectnavigation_1 = require(\"./objecthandlers/objectnavigation\");\nvar objectpropertybagentries_1 = require(\"./objecthandlers/objectpropertybagentries\");\nvar objectfeatures_1 = require(\"./objecthandlers/objectfeatures\");\nvar objectwebsettings_1 = require(\"./objecthandlers/objectwebsettings\");\nvar objectcomposedlook_1 = require(\"./objecthandlers/objectcomposedlook\");\nvar objectcustomactions_1 = require(\"./objecthandlers/objectcustomactions\");\nvar objectfiles_1 = require(\"./objecthandlers/objectfiles\");\nvar objectlists_1 = require(\"./objecthandlers/objectlists\");\nvar util_1 = require(\"./util\");\nvar logging_1 = require(\"../../utils/logging\");\nvar httpclient_1 = require(\"../../net/httpclient\");\nvar Provisioning = (function () {\n    function Provisioning() {\n        this.handlers = {\n            \"Navigation\": objectnavigation_1.ObjectNavigation,\n            \"PropertyBagEntries\": objectpropertybagentries_1.ObjectPropertyBagEntries,\n            \"Features\": objectfeatures_1.ObjectFeatures,\n            \"WebSettings\": objectwebsettings_1.ObjectWebSettings,\n            \"ComposedLook\": objectcomposedlook_1.ObjectComposedLook,\n            \"CustomActions\": objectcustomactions_1.ObjectCustomActions,\n            \"Files\": objectfiles_1.ObjectFiles,\n            \"Lists\": objectlists_1.ObjectLists,\n        };\n        this.httpClient = new httpclient_1.HttpClient();\n    }\n    Provisioning.prototype.applyTemplate = function (path) {\n        var _this = this;\n        var url = util_1.Util.replaceUrlTokens(path);\n        return new Promise(function (resolve, reject) {\n            _this.httpClient.get(url).then(function (response) {\n                if (response.ok) {\n                    response.json().then(function (template) {\n                        _this.start(template, Object.keys(template)).then(resolve, reject);\n                    });\n                }\n                else {\n                    reject(response.statusText);\n                }\n            }, function (error) {\n                logging_1.Logger.write(\"Provisioning: The provided template is invalid\", logging_1.Logger.LogLevel.Error);\n            });\n        });\n    };\n    Provisioning.prototype.start = function (json, queue) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.startTime = new Date().getTime();\n            _this.queueItems = [];\n            queue.forEach(function (q, index) {\n                if (!_this.handlers[q]) {\n                    return;\n                }\n                _this.queueItems.push(new provisioningstep_1.ProvisioningStep(q, index, json[q], json.Parameters, _this.handlers[q]));\n            });\n            var promises = [];\n            promises.push(new Promise(function (res) {\n                logging_1.Logger.write(\"Provisioning: Code execution scope started\", logging_1.Logger.LogLevel.Info);\n                res();\n            }));\n            var index = 1;\n            while (_this.queueItems[index - 1] !== undefined) {\n                var i = promises.length - 1;\n                promises.push(_this.queueItems[index - 1].execute(promises[i]));\n                index++;\n            }\n            ;\n            Promise.all(promises).then(function (value) {\n                logging_1.Logger.write(\"Provisioning: Code execution scope ended\", logging_1.Logger.LogLevel.Info);\n                resolve(value);\n            }, function (error) {\n                logging_1.Logger.write(\"Provisioning: Code execution scope ended\" + JSON.stringify(error), logging_1.Logger.LogLevel.Error);\n                reject(error);\n            });\n        });\n    };\n    return Provisioning;\n}());\nexports.Provisioning = Provisioning;\n\n},{\"../../net/httpclient\":5,\"../../utils/logging\":22,\"./objecthandlers/objectcomposedlook\":8,\"./objecthandlers/objectcustomactions\":9,\"./objecthandlers/objectfeatures\":10,\"./objecthandlers/objectfiles\":11,\"./objecthandlers/objectlists\":13,\"./objecthandlers/objectnavigation\":14,\"./objecthandlers/objectpropertybagentries\":15,\"./objecthandlers/objectwebsettings\":16,\"./provisioningstep\":18,\"./util\":20}],18:[function(require,module,exports){\n\"use strict\";\nvar ProvisioningStep = (function () {\n    function ProvisioningStep(name, index, objects, parameters, handler) {\n        this.name = name;\n        this.index = index;\n        this.objects = objects;\n        this.parameters = parameters;\n        this.handler = handler;\n    }\n    ProvisioningStep.prototype.execute = function (dependentPromise) {\n        var _this = this;\n        var _handler = new this.handler();\n        if (!dependentPromise) {\n            return _handler.ProvisionObjects(this.objects, this.parameters);\n        }\n        return new Promise(function (resolve, reject) {\n            dependentPromise.then(function () {\n                return _handler.ProvisionObjects(_this.objects, _this.parameters).then(resolve, resolve);\n            });\n        });\n    };\n    return ProvisioningStep;\n}());\nexports.ProvisioningStep = ProvisioningStep;\n\n},{}],19:[function(require,module,exports){\n\"use strict\";\nvar Sequencer = (function () {\n    function Sequencer(functions, parameter, scope) {\n        this.functions = functions;\n        this.parameter = parameter;\n        this.scope = scope;\n    }\n    Sequencer.prototype.execute = function (progressFunction) {\n        var promiseSequence = Promise.resolve();\n        this.functions.forEach(function (sequenceFunction, functionNr) {\n            promiseSequence = promiseSequence.then(function () {\n                return sequenceFunction.call(this.scope, this.parameter);\n            }).then(function (result) {\n                if (progressFunction) {\n                    progressFunction.call(this, functionNr, this.functions);\n                }\n            });\n        }, this);\n        return promiseSequence;\n    };\n    return Sequencer;\n}());\nexports.Sequencer = Sequencer;\n\n},{}],20:[function(require,module,exports){\n\"use strict\";\nvar Util = (function () {\n    function Util() {\n    }\n    Util.getRelativeUrl = function (url) {\n        return url.replace(document.location.protocol + \"//\" + document.location.hostname, \"\");\n    };\n    Util.replaceUrlTokens = function (url) {\n        return url.replace(/{site}/g, _spPageContextInfo.webAbsoluteUrl)\n            .replace(/{sitecollection}/g, _spPageContextInfo.siteAbsoluteUrl)\n            .replace(/{themegallery}/g, _spPageContextInfo.siteAbsoluteUrl + \"/_catalogs/theme/15\");\n    };\n    ;\n    Util.encodePropertyKey = function (propKey) {\n        var bytes = [];\n        for (var i = 0; i < propKey.length; ++i) {\n            bytes.push(propKey.charCodeAt(i));\n            bytes.push(0);\n        }\n        var b64encoded = window.btoa(String.fromCharCode.apply(null, bytes));\n        return b64encoded;\n    };\n    return Util;\n}());\nexports.Util = Util;\n\n},{}],21:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar util_1 = require(\"../../utils/util\");\nvar logging_1 = require(\"../../utils/logging\");\nvar httpclient_1 = require(\"../../net/httpclient\");\nvar pnplibconfig_1 = require(\"../../configuration/pnplibconfig\");\nfunction extractOdataId(candidate) {\n    if (candidate.hasOwnProperty(\"odata.id\")) {\n        return candidate[\"odata.id\"];\n    }\n    else if (candidate.hasOwnProperty(\"__metadata\") && candidate.__metadata.hasOwnProperty(\"id\")) {\n        return candidate.__metadata.id;\n    }\n    else {\n        logging_1.Logger.log({\n            data: candidate,\n            level: logging_1.Logger.LogLevel.Error,\n            message: \"Could not extract odata id in object, you may be using nometadata. Object data logged to logger.\",\n        });\n        throw new Error(\"Could not extract odata id in object, you may be using nometadata. Object data logged to logger.\");\n    }\n}\nexports.extractOdataId = extractOdataId;\nvar ODataParserBase = (function () {\n    function ODataParserBase() {\n    }\n    ODataParserBase.prototype.parse = function (r) {\n        return r.json().then(function (json) {\n            var result = json;\n            if (json.hasOwnProperty(\"d\")) {\n                if (json.d.hasOwnProperty(\"results\")) {\n                    result = json.d.results;\n                }\n                else {\n                    result = json.d;\n                }\n            }\n            else if (json.hasOwnProperty(\"value\")) {\n                result = json.value;\n            }\n            return result;\n        });\n    };\n    return ODataParserBase;\n}());\nexports.ODataParserBase = ODataParserBase;\nvar ODataDefaultParser = (function (_super) {\n    __extends(ODataDefaultParser, _super);\n    function ODataDefaultParser() {\n        _super.apply(this, arguments);\n    }\n    return ODataDefaultParser;\n}(ODataParserBase));\nexports.ODataDefaultParser = ODataDefaultParser;\nvar ODataRawParserImpl = (function () {\n    function ODataRawParserImpl() {\n    }\n    ODataRawParserImpl.prototype.parse = function (r) {\n        return r.json();\n    };\n    return ODataRawParserImpl;\n}());\nexports.ODataRawParserImpl = ODataRawParserImpl;\nvar ODataValueParserImpl = (function (_super) {\n    __extends(ODataValueParserImpl, _super);\n    function ODataValueParserImpl() {\n        _super.apply(this, arguments);\n    }\n    ODataValueParserImpl.prototype.parse = function (r) {\n        return _super.prototype.parse.call(this, r).then(function (d) { return d; });\n    };\n    return ODataValueParserImpl;\n}(ODataParserBase));\nvar ODataEntityParserImpl = (function (_super) {\n    __extends(ODataEntityParserImpl, _super);\n    function ODataEntityParserImpl(factory) {\n        _super.call(this);\n        this.factory = factory;\n    }\n    ODataEntityParserImpl.prototype.parse = function (r) {\n        var _this = this;\n        return _super.prototype.parse.call(this, r).then(function (d) {\n            var o = new _this.factory(getEntityUrl(d), null);\n            return util_1.Util.extend(o, d);\n        });\n    };\n    return ODataEntityParserImpl;\n}(ODataParserBase));\nvar ODataEntityArrayParserImpl = (function (_super) {\n    __extends(ODataEntityArrayParserImpl, _super);\n    function ODataEntityArrayParserImpl(factory) {\n        _super.call(this);\n        this.factory = factory;\n    }\n    ODataEntityArrayParserImpl.prototype.parse = function (r) {\n        var _this = this;\n        return _super.prototype.parse.call(this, r).then(function (d) {\n            return d.map(function (v) {\n                var o = new _this.factory(getEntityUrl(v), null);\n                return util_1.Util.extend(o, v);\n            });\n        });\n    };\n    return ODataEntityArrayParserImpl;\n}(ODataParserBase));\nfunction getEntityUrl(entity) {\n    if (entity.hasOwnProperty(\"__metadata\")) {\n        return entity.__metadata.uri;\n    }\n    else if (entity.hasOwnProperty(\"odata.editLink\")) {\n        return util_1.Util.combinePaths(\"_api\", entity[\"odata.editLink\"]);\n    }\n    else {\n        logging_1.Logger.write(\"No uri information found in ODataEntity parsing, chaining will fail for this object.\", logging_1.Logger.LogLevel.Warning);\n        return \"\";\n    }\n}\nexports.ODataRaw = new ODataRawParserImpl();\nfunction ODataValue() {\n    return new ODataValueParserImpl();\n}\nexports.ODataValue = ODataValue;\nfunction ODataEntity(factory) {\n    return new ODataEntityParserImpl(factory);\n}\nexports.ODataEntity = ODataEntity;\nfunction ODataEntityArray(factory) {\n    return new ODataEntityArrayParserImpl(factory);\n}\nexports.ODataEntityArray = ODataEntityArray;\nvar ODataBatch = (function () {\n    function ODataBatch(_batchId) {\n        if (_batchId === void 0) { _batchId = util_1.Util.getGUID(); }\n        this._batchId = _batchId;\n        this._requests = [];\n        this._batchDepCount = 0;\n    }\n    ODataBatch.prototype.add = function (url, method, options, parser) {\n        var info = {\n            method: method.toUpperCase(),\n            options: options,\n            parser: parser,\n            reject: null,\n            resolve: null,\n            url: url,\n        };\n        var p = new Promise(function (resolve, reject) {\n            info.resolve = resolve;\n            info.reject = reject;\n        });\n        this._requests.push(info);\n        return p;\n    };\n    ODataBatch.prototype.incrementBatchDep = function () {\n        this._batchDepCount++;\n    };\n    ODataBatch.prototype.decrementBatchDep = function () {\n        this._batchDepCount--;\n    };\n    ODataBatch.prototype.execute = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (_this._batchDepCount > 0) {\n                setTimeout(function () { return _this.execute(); }, 100);\n            }\n            else {\n                _this.executeImpl().then(function () { return resolve(); }).catch(reject);\n            }\n        });\n    };\n    ODataBatch.prototype.executeImpl = function () {\n        var _this = this;\n        if (this._requests.length < 1) {\n            return new Promise(function (r) { return r(); });\n        }\n        var batchBody = [];\n        var currentChangeSetId = \"\";\n        this._requests.forEach(function (reqInfo, index) {\n            if (reqInfo.method === \"GET\") {\n                if (currentChangeSetId.length > 0) {\n                    batchBody.push(\"--changeset_\" + currentChangeSetId + \"--\\n\\n\");\n                    currentChangeSetId = \"\";\n                }\n                batchBody.push(\"--batch_\" + _this._batchId + \"\\n\");\n            }\n            else {\n                if (currentChangeSetId.length < 1) {\n                    currentChangeSetId = util_1.Util.getGUID();\n                    batchBody.push(\"--batch_\" + _this._batchId + \"\\n\");\n                    batchBody.push(\"Content-Type: multipart/mixed; boundary=\\\"changeset_\" + currentChangeSetId + \"\\\"\\n\\n\");\n                }\n                batchBody.push(\"--changeset_\" + currentChangeSetId + \"\\n\");\n            }\n            batchBody.push(\"Content-Type: application/http\\n\");\n            batchBody.push(\"Content-Transfer-Encoding: binary\\n\\n\");\n            var headers = {\n                \"Accept\": \"application/json;\",\n            };\n            if (reqInfo.method !== \"GET\") {\n                var method = reqInfo.method;\n                if (reqInfo.options && reqInfo.options.headers && reqInfo.options.headers[\"X-HTTP-Method\"] !== typeof undefined) {\n                    method = reqInfo.options.headers[\"X-HTTP-Method\"];\n                    delete reqInfo.options.headers[\"X-HTTP-Method\"];\n                }\n                batchBody.push(method + \" \" + reqInfo.url + \" HTTP/1.1\\n\");\n                headers = util_1.Util.extend(headers, { \"Content-Type\": \"application/json;odata=verbose;charset=utf-8\" });\n            }\n            else {\n                batchBody.push(reqInfo.method + \" \" + reqInfo.url + \" HTTP/1.1\\n\");\n            }\n            if (typeof pnplibconfig_1.RuntimeConfig.headers !== \"undefined\") {\n                headers = util_1.Util.extend(headers, pnplibconfig_1.RuntimeConfig.headers);\n            }\n            if (reqInfo.options && reqInfo.options.headers) {\n                headers = util_1.Util.extend(headers, reqInfo.options.headers);\n            }\n            for (var name_1 in headers) {\n                if (headers.hasOwnProperty(name_1)) {\n                    batchBody.push(name_1 + \": \" + headers[name_1] + \"\\n\");\n                }\n            }\n            batchBody.push(\"\\n\");\n            if (reqInfo.options.body) {\n                batchBody.push(reqInfo.options.body + \"\\n\\n\");\n            }\n        });\n        if (currentChangeSetId.length > 0) {\n            batchBody.push(\"--changeset_\" + currentChangeSetId + \"--\\n\\n\");\n            currentChangeSetId = \"\";\n        }\n        batchBody.push(\"--batch_\" + this._batchId + \"--\\n\");\n        var batchHeaders = {\n            \"Content-Type\": \"multipart/mixed; boundary=batch_\" + this._batchId,\n        };\n        var batchOptions = {\n            \"body\": batchBody.join(\"\"),\n            \"headers\": batchHeaders,\n        };\n        var client = new httpclient_1.HttpClient();\n        return client.post(util_1.Util.makeUrlAbsolute(\"/_api/$batch\"), batchOptions)\n            .then(function (r) { return r.text(); })\n            .then(this._parseResponse)\n            .then(function (responses) {\n            if (responses.length !== _this._requests.length) {\n                throw new Error(\"Could not properly parse responses to match requests in batch.\");\n            }\n            var resolutions = [];\n            for (var i = 0; i < responses.length; i++) {\n                var request = _this._requests[i];\n                var response = responses[i];\n                if (!response.ok) {\n                    request.reject(new Error(response.statusText));\n                }\n                resolutions.push(request.parser.parse(response).then(request.resolve).catch(request.reject));\n            }\n            return Promise.all(resolutions);\n        });\n    };\n    ODataBatch.prototype._parseResponse = function (body) {\n        return new Promise(function (resolve, reject) {\n            var responses = [];\n            var header = \"--batchresponse_\";\n            var statusRegExp = new RegExp(\"^HTTP/[0-9.]+ +([0-9]+) +(.*)\", \"i\");\n            var lines = body.split(\"\\n\");\n            var state = \"batch\";\n            var status;\n            var statusText;\n            for (var i = 0; i < lines.length; ++i) {\n                var line = lines[i];\n                switch (state) {\n                    case \"batch\":\n                        if (line.substr(0, header.length) === header) {\n                            state = \"batchHeaders\";\n                        }\n                        else {\n                            if (line.trim() !== \"\") {\n                                throw new Error(\"Invalid response, line \" + i);\n                            }\n                        }\n                        break;\n                    case \"batchHeaders\":\n                        if (line.trim() === \"\") {\n                            state = \"status\";\n                        }\n                        break;\n                    case \"status\":\n                        var parts = statusRegExp.exec(line);\n                        if (parts.length !== 3) {\n                            throw new Error(\"Invalid status, line \" + i);\n                        }\n                        status = parseInt(parts[1], 10);\n                        statusText = parts[2];\n                        state = \"statusHeaders\";\n                        break;\n                    case \"statusHeaders\":\n                        if (line.trim() === \"\") {\n                            state = \"body\";\n                        }\n                        break;\n                    case \"body\":\n                        var response = void 0;\n                        if (status === 204) {\n                            response = new Response();\n                        }\n                        else {\n                            response = new Response(line, { status: status, statusText: statusText });\n                        }\n                        responses.push(response);\n                        state = \"batch\";\n                        break;\n                }\n            }\n            if (state !== \"status\") {\n                reject(new Error(\"Unexpected end of input\"));\n            }\n            resolve(responses);\n        });\n    };\n    return ODataBatch;\n}());\nexports.ODataBatch = ODataBatch;\n\n},{\"../../configuration/pnplibconfig\":2,\"../../net/httpclient\":5,\"../../utils/logging\":22,\"../../utils/util\":23}],22:[function(require,module,exports){\n\"use strict\";\nvar Logger = (function () {\n    function Logger() {\n    }\n    Object.defineProperty(Logger, \"activeLogLevel\", {\n        get: function () {\n            return Logger.instance.activeLogLevel;\n        },\n        set: function (value) {\n            Logger.instance.activeLogLevel = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Logger, \"instance\", {\n        get: function () {\n            if (typeof Logger._instance === \"undefined\" || Logger._instance === null) {\n                Logger._instance = new LoggerImpl();\n            }\n            return Logger._instance;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Logger.subscribe = function () {\n        var listeners = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            listeners[_i - 0] = arguments[_i];\n        }\n        for (var i = 0; i < listeners.length; i++) {\n            Logger.instance.subscribe(listeners[i]);\n        }\n    };\n    Logger.clearSubscribers = function () {\n        return Logger.instance.clearSubscribers();\n    };\n    Object.defineProperty(Logger, \"count\", {\n        get: function () {\n            return Logger.instance.count;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Logger.write = function (message, level) {\n        if (level === void 0) { level = Logger.LogLevel.Verbose; }\n        Logger.instance.log({ level: level, message: message });\n    };\n    Logger.log = function (entry) {\n        Logger.instance.log(entry);\n    };\n    Logger.measure = function (name, f) {\n        return Logger.instance.measure(name, f);\n    };\n    return Logger;\n}());\nexports.Logger = Logger;\nvar LoggerImpl = (function () {\n    function LoggerImpl(activeLogLevel, subscribers) {\n        if (activeLogLevel === void 0) { activeLogLevel = Logger.LogLevel.Warning; }\n        if (subscribers === void 0) { subscribers = []; }\n        this.activeLogLevel = activeLogLevel;\n        this.subscribers = subscribers;\n    }\n    LoggerImpl.prototype.subscribe = function (listener) {\n        this.subscribers.push(listener);\n    };\n    LoggerImpl.prototype.clearSubscribers = function () {\n        var s = this.subscribers.slice(0);\n        this.subscribers.length = 0;\n        return s;\n    };\n    Object.defineProperty(LoggerImpl.prototype, \"count\", {\n        get: function () {\n            return this.subscribers.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LoggerImpl.prototype.write = function (message, level) {\n        if (level === void 0) { level = Logger.LogLevel.Verbose; }\n        this.log({ level: level, message: message });\n    };\n    LoggerImpl.prototype.log = function (entry) {\n        if (typeof entry === \"undefined\" || entry.level < this.activeLogLevel) {\n            return;\n        }\n        for (var i = 0; i < this.subscribers.length; i++) {\n            this.subscribers[i].log(entry);\n        }\n    };\n    LoggerImpl.prototype.measure = function (name, f) {\n        console.profile(name);\n        try {\n            return f();\n        }\n        finally {\n            console.profileEnd();\n        }\n    };\n    return LoggerImpl;\n}());\nvar Logger;\n(function (Logger) {\n    (function (LogLevel) {\n        LogLevel[LogLevel[\"Verbose\"] = 0] = \"Verbose\";\n        LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\n        LogLevel[LogLevel[\"Warning\"] = 2] = \"Warning\";\n        LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\n        LogLevel[LogLevel[\"Off\"] = 99] = \"Off\";\n    })(Logger.LogLevel || (Logger.LogLevel = {}));\n    var LogLevel = Logger.LogLevel;\n    var ConsoleListener = (function () {\n        function ConsoleListener() {\n        }\n        ConsoleListener.prototype.log = function (entry) {\n            var msg = this.format(entry);\n            switch (entry.level) {\n                case LogLevel.Verbose:\n                case LogLevel.Info:\n                    console.log(msg);\n                    break;\n                case LogLevel.Warning:\n                    console.warn(msg);\n                    break;\n                case LogLevel.Error:\n                    console.error(msg);\n                    break;\n            }\n        };\n        ConsoleListener.prototype.format = function (entry) {\n            return \"Message: \" + entry.message + \". Data: \" + JSON.stringify(entry.data);\n        };\n        return ConsoleListener;\n    }());\n    Logger.ConsoleListener = ConsoleListener;\n    var AzureInsightsListener = (function () {\n        function AzureInsightsListener(azureInsightsInstrumentationKey) {\n            this.azureInsightsInstrumentationKey = azureInsightsInstrumentationKey;\n            var appInsights = window[\"appInsights\"] || function (config) {\n                function r(config) {\n                    t[config] = function () {\n                        var i = arguments;\n                        t.queue.push(function () { t[config].apply(t, i); });\n                    };\n                }\n                var t = { config: config }, u = document, e = window, o = \"script\", s = u.createElement(o), i, f;\n                for (s.src = config.url || \"//az416426.vo.msecnd.net/scripts/a/ai.0.js\", u.getElementsByTagName(o)[0].parentNode.appendChild(s), t.cookie = u.cookie, t.queue = [], i = [\"Event\", \"Exception\", \"Metric\", \"PageView\", \"Trace\"]; i.length;) {\n                    r(\"track\" + i.pop());\n                }\n                return r(\"setAuthenticatedUserContext\"), r(\"clearAuthenticatedUserContext\"), config.disableExceptionTracking || (i = \"onerror\", r(\"_\" + i), f = e[i], e[i] = function (config, r, u, e, o) {\n                    var s = f && f(config, r, u, e, o);\n                    return s !== !0 && t[\"_\" + i](config, r, u, e, o), s;\n                }), t;\n            }({\n                instrumentationKey: this.azureInsightsInstrumentationKey\n            });\n            window[\"appInsights\"] = appInsights;\n        }\n        AzureInsightsListener.prototype.log = function (entry) {\n            var ai = window[\"appInsights\"];\n            var msg = this.format(entry);\n            if (entry.level === LogLevel.Error) {\n                ai.trackException(msg);\n            }\n            else {\n                ai.trackEvent(msg);\n            }\n        };\n        AzureInsightsListener.prototype.format = function (entry) {\n            return \"Message: \" + entry.message + \". Data: \" + JSON.stringify(entry.data);\n        };\n        return AzureInsightsListener;\n    }());\n    Logger.AzureInsightsListener = AzureInsightsListener;\n    var FunctionListener = (function () {\n        function FunctionListener(method) {\n            this.method = method;\n        }\n        FunctionListener.prototype.log = function (entry) {\n            this.method(entry);\n        };\n        return FunctionListener;\n    }());\n    Logger.FunctionListener = FunctionListener;\n})(Logger = exports.Logger || (exports.Logger = {}));\n\n},{}],23:[function(require,module,exports){\n(function (global){\n\"use strict\";\nvar Util = (function () {\n    function Util() {\n    }\n    Util.getCtxCallback = function (context, method) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        return function () {\n            method.apply(context, params);\n        };\n    };\n    Util.urlParamExists = function (name) {\n        name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n        var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n        return regex.test(location.search);\n    };\n    Util.getUrlParamByName = function (name) {\n        name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n        var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n        var results = regex.exec(location.search);\n        return results == null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n    };\n    Util.getUrlParamBoolByName = function (name) {\n        var p = this.getUrlParamByName(name);\n        var isFalse = (p === \"\" || /false|0/i.test(p));\n        return !isFalse;\n    };\n    Util.stringInsert = function (target, index, s) {\n        if (index > 0) {\n            return target.substring(0, index) + s + target.substring(index, target.length);\n        }\n        return s + target;\n    };\n    Util.dateAdd = function (date, interval, units) {\n        var ret = new Date(date.toLocaleString());\n        switch (interval.toLowerCase()) {\n            case \"year\":\n                ret.setFullYear(ret.getFullYear() + units);\n                break;\n            case \"quarter\":\n                ret.setMonth(ret.getMonth() + 3 * units);\n                break;\n            case \"month\":\n                ret.setMonth(ret.getMonth() + units);\n                break;\n            case \"week\":\n                ret.setDate(ret.getDate() + 7 * units);\n                break;\n            case \"day\":\n                ret.setDate(ret.getDate() + units);\n                break;\n            case \"hour\":\n                ret.setTime(ret.getTime() + units * 3600000);\n                break;\n            case \"minute\":\n                ret.setTime(ret.getTime() + units * 60000);\n                break;\n            case \"second\":\n                ret.setTime(ret.getTime() + units * 1000);\n                break;\n            default:\n                ret = undefined;\n                break;\n        }\n        return ret;\n    };\n    Util.loadStylesheet = function (path, avoidCache) {\n        if (avoidCache) {\n            path += \"?\" + encodeURIComponent((new Date()).getTime().toString());\n        }\n        var head = document.getElementsByTagName(\"head\");\n        if (head.length > 0) {\n            var e = document.createElement(\"link\");\n            head[0].appendChild(e);\n            e.setAttribute(\"type\", \"text/css\");\n            e.setAttribute(\"rel\", \"stylesheet\");\n            e.setAttribute(\"href\", path);\n        }\n    };\n    Util.combinePaths = function () {\n        var paths = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            paths[_i - 0] = arguments[_i];\n        }\n        var parts = [];\n        for (var i = 0; i < paths.length; i++) {\n            if (typeof paths[i] !== \"undefined\" && paths[i] !== null) {\n                parts.push(paths[i].replace(/^[\\\\|\\/]/, \"\").replace(/[\\\\|\\/]$/, \"\"));\n            }\n        }\n        return parts.join(\"/\").replace(/\\\\/, \"/\");\n    };\n    Util.getRandomString = function (chars) {\n        var text = \"\";\n        var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n        for (var i = 0; i < chars; i++) {\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\n        }\n        return text;\n    };\n    Util.getGUID = function () {\n        var d = new Date().getTime();\n        var guid = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n            var r = (d + Math.random() * 16) % 16 | 0;\n            d = Math.floor(d / 16);\n            return (c === \"x\" ? r : (r & 0x3 | 0x8)).toString(16);\n        });\n        return guid;\n    };\n    Util.isFunction = function (candidateFunction) {\n        return typeof candidateFunction === \"function\";\n    };\n    Util.isArray = function (array) {\n        if (Array.isArray) {\n            return Array.isArray(array);\n        }\n        return array && typeof array.length === \"number\" && array.constructor === Array;\n    };\n    Util.stringIsNullOrEmpty = function (s) {\n        return typeof s === \"undefined\" || s === null || s === \"\";\n    };\n    Util.extend = function (target, source, noOverwrite) {\n        if (noOverwrite === void 0) { noOverwrite = false; }\n        var result = {};\n        for (var id in target) {\n            result[id] = target[id];\n        }\n        var check = noOverwrite ? function (o, i) { return !o.hasOwnProperty(i); } : function (o, i) { return true; };\n        for (var id in source) {\n            if (check(result, id)) {\n                result[id] = source[id];\n            }\n        }\n        return result;\n    };\n    Util.applyMixins = function (derivedCtor) {\n        var baseCtors = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            baseCtors[_i - 1] = arguments[_i];\n        }\n        baseCtors.forEach(function (baseCtor) {\n            Object.getOwnPropertyNames(baseCtor.prototype).forEach(function (name) {\n                derivedCtor.prototype[name] = baseCtor.prototype[name];\n            });\n        });\n    };\n    Util.isUrlAbsolute = function (url) {\n        return /^https?:\\/\\/|^\\/\\//i.test(url);\n    };\n    Util.makeUrlAbsolute = function (url) {\n        if (Util.isUrlAbsolute(url)) {\n            return url;\n        }\n        if (typeof global._spPageContextInfo !== \"undefined\") {\n            if (global._spPageContextInfo.hasOwnProperty(\"webAbsoluteUrl\")) {\n                return Util.combinePaths(global._spPageContextInfo.webAbsoluteUrl, url);\n            }\n            else if (global._spPageContextInfo.hasOwnProperty(\"webServerRelativeUrl\")) {\n                return Util.combinePaths(global._spPageContextInfo.webServerRelativeUrl, url);\n            }\n        }\n        else {\n            return url;\n        }\n    };\n    return Util;\n}());\nexports.Util = Util;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}]},{},[17])(17)\n});"],"sourceRoot":"/source/"}