{"version":3,"sources":["pnp-provisioning.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","$pnp","Provisioning","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","util_1","Dictionary","keys","values","prototype","get","key","index","indexOf","add","push","merge","source","Util","isFunction","sourceAsDictionary","getKeys","sourceAsHash","hasOwnProperty","remove","val","splice","getValues","clear","count","../utils/util","2","setRuntimeConfig","config","_runtimeConfig","set","RuntimeConfigImpl","_headers","_defaultCachingStore","_defaultCachingTimeoutSeconds","_globalCacheDisable","_useSPRequestExecutor","headers","globalCacheDisable","defaultCachingStore","defaultCachingTimeoutSeconds","useSPRequestExecutor","_useNodeClient","_nodeClientData","nodeClientOptions","Object","defineProperty","enumerable","configurable","RuntimeConfig","3","fetchclient_1","digestcache_1","pnplibconfig_1","sprequestexecutorclient_1","nodefetchclient_1","HttpClient","_impl","getFetchImpl","_digestCache","DigestCache","fetch","url","options","opts","extend","cache","credentials","Headers","mergeHeaders","has","append","method","toUpperCase","webUrl","substr","getDigest","then","digest","fetchRaw","_this","rawHeaders","retry","ctx","response","resolve","delay","status","reject","attempts","retryCount","setTimeout","getCtxCallback","Promise","retryContext","post","SPRequestExecutorClient","useNodeFetchClient","nodeRequestOptions","NodeFetchClient","siteUrl","clientId","clientSecret","FetchClient","target","temp","Request","forEach","value","name","../configuration/pnplibconfig","./digestcache","./fetchclient","./nodefetchclient","./sprequestexecutorclient","4","collections_1","odata_1","CachedDigest","_httpClient","_digests","cachedDigest","now","Date","expiration","combinePaths","Accept","Content-type","parser","ODataDefaultParser","parse","d","GetContextWebInformation","data","newCachedDigest","FormDigestValue","seconds","FormDigestTimeoutSeconds","setTime","getTime","../collections/collections","../sharepoint/rest/odata","5","6","arguments","apply","dup","7","_clientId","_clientSecret","_realm","8","convertToResponse","spResponse","responseHeaders","h","Response","body","statusCode","statusText","SP","RequestExecutor","iterator","addinWebUrl","substring","executor","entries","next","done","executeAsync","error","success","9","__extends","b","__","constructor","p","create","ObjectHandlerBase_1","ObjectComposedLook","_super","ProvisionObjects","object","scope_started","clientContext","ClientContext","get_current","web","get_web","colorPaletteUrl","ColorPaletteUrl","replaceUrlTokens","fontSchemeUrl","FontSchemeUrl","backgroundImageUrl","BackgroundImageUrl","applyTheme","getRelativeUrl","update","executeQueryAsync","scope_ended","ObjectHandlerBase","../util","./ObjectHandlerBase","10","ObjectCustomActions","customactions","userCustomActions","get_userCustomActions","load","obj","objExists","get_data","filter","userCustomAction","get_title","Title","objCreationInformation","Description","set_description","CommandUIExtension","set_commandUIExtension","Group","set_group","set_title","Url","set_url","ScriptBlock","set_scriptBlock","ScriptSrc","set_scriptSrc","Location","set_location","ImageUrl","set_imageUrl","Name","set_name","RegistrationId","set_registrationId","RegistrationType","set_registrationType","Rights","set_rights","Sequence","set_sequence","11","ObjectFeatures","features","webFeatures","get_features","Deactivate","Guid","ID","FeatureDefinitionScope","none","12","CoreUtil","ObjectFiles","objects","fileInfos","promises","httpClient","Src","text","all","responses","filename","GetFilenameFromFilePath","Dest","webServerRelativeUrl","_spPageContextInfo","folder","getFolderByServerRelativeUrl","GetFolderFromFilePath","fi","Contents","Filename","Folder","Instance","Overwrite","Properties","RemoveExistingWebParts","ServerRelativeUrl","Views","WebParts","FileCreationInformation","set_overwrite","set_content","Base64EncodedByteArray","get_content","charCodeAt","get_files","ApplyFileProperties","AddWebPartsToWebPartPage","ModifyHiddenViews","RemoveWebPartsFromFileIfSpecified","limitedWebPartManager","shouldRemoveExisting","existingWebParts","get_webParts","wp","deleteWebPart","GetWebPartXml","webParts","FileUrl","fileUrl","res","rej","Xml","dest","src","fileServerRelativeUrl","file","getFileByServerRelativeUrl","getLimitedWebPartManager","PersonalizationScope","shared","webPartsWithXml","oWebPartDefinition","importWebPart","oWebPart","get_webPart","addWebPart","Zone","Order","fileProperties","listItemAllFields","get_listItemAllFields","set_item","GetViewFromCollectionByUrl","viewCollection","serverRelativeUrl","viewCollectionEnumerator","getEnumerator","moveNext","view","get_serverRelativeUrl","toString","toLowerCase","mapping","lists","listViewCollections","v","List","get_lists","getByTitle","get_views","views","list","Paged","set_paged","Query","set_viewQuery","RowLimit","set_rowLimit","ViewFields","columns_1","get_viewFields","removeAll","vf","filePath","split","join","../../../utils/util","13","HttpClient_1","logging_1","parameters","Logger","write","../../../net/HttpClient","../../../utils/logging","14","Sequencer_1","ObjectLists","listInstances","existingObj","undefined","EnableVersioning","set_enableVersioning","EnableMinorVersions","set_enableMinorVersions","EnableModeration","set_enableModeration","EnableFolderCreation","set_enableFolderCreation","EnableAttachments","set_enableAttachments","NoCrawl","set_noCrawl","DefaultDisplayFormUrl","set_defaultDisplayFormUrl","DefaultEditFormUrl","set_defaultEditFormUrl","DefaultNewFormUrl","set_defaultNewFormUrl","DraftVersionVisibility","set_draftVersionVisibility","DraftVisibilityType","Hidden","set_hidden","ForceCheckout","set_forceCheckout","ListCreationInformation","OnQuickLaunch","QuickLaunchOptions","on","off","set_quickLaunchOption","TemplateType","set_templateType","createdList","toLocaleLowerCase","sequencer","Sequencer","ApplyContentTypeBindings","ApplyListInstanceFieldRefs","ApplyFields","ApplyLookupFields","ApplyListSecurity","CreateViews","InsertDataRows","CreateFolders","ListInstances","Objects","execute","EnsureLocationBasedMetadataDefaultsReceiver","eventReceivers","get_eventReceivers","eventRecCreationInfo","EventReceiverDefinitionCreationInformation","set_receiverName","set_synchronization","set_sequenceNumber","set_receiverAssembly","set_receiverClass","set_eventType","EventReceiverType","itemAdded","params","Folders","folderServerRelativeUrl","rootFolder","get_rootFolder","metadataDefaults","setMetadataDefaults","folderUrl","get_folders","DefaultValues","metadataDefaultsFileCreateInfo","webCts","get_site","get_rootWeb","get_contentTypes","listCts","ContentTypeBindings","set_contentTypesEnabled","listContentTypes","existingContentTypes","Array","RemoveExistingContentTypes","ct","ctb","addExistingContentType","getById","ContentTypeId","j","ect","deleteObject","siteFields","get_fields","FieldRefs","fr","field","getByInternalNameOrTitle","Fields","fieldXml","GetFieldXml","fieldType","GetFieldXmlAttr","addFieldAsXml","AddFieldOptions","addToAllContentTypes","attr","regex","RegExp","match","exec","SchemaXml","properties_1","prop","targetList","get_id","Type","Formula","Security","BreakRoleInheritance","breakRoleInheritance","CopyRoleAssignments","ClearSubscopes","get_roleAssignments","allProperties","get_allProperties","siteGroups","get_siteGroups","roleDefinitions","get_roleDefinitions","RoleAssignments","ra","roleDef","RoleDefinition","getByName","roleBindings","RoleDefinitionBindingCollection","newObject","principal","Principal","token","groupId","get_fieldValues","viewExists","ev","RemoveExistingViews","Scope","set_scope","viewCreationInformation","ViewCreationInformation","PersonalView","set_personalView","set_query","SetAsDefaultView","set_setAsDefaultView","set_viewFields","ViewTypeKind","set_viewTypeKind","ViewType","html","DataRows","item","addItem","ListItemCreationInformation","../Sequencer/Sequencer","15","ObjectNavigation","navigation","get_navigation","ConfigureQuickLaunch","QuickLaunch","getNodeFromCollectionByTitle","nodeCollection","title","nodes","quickLaunchNodeCollection_1","get_quickLaunch","temporaryQuickLaunch","get_count","oldNode","itemAt","existingNode","newNode","NavigationNodeCreationInformation","get_url","set_asLastNode","webAbsoluteUrl","json","node","getNodeById","Id","childrenNodeCollection","get_children","parentNode","Children","16","ObjectPropertyBagEntries","clientContext_1","web_1","propBag_1","indexedProperties_1","entry","Key","Value","Indexed","encodePropertyKey","17","ObjectWebSettings","WelcomePage","set_welcomePage","MasterUrl","set_masterUrl","CustomMasterUrl","set_customMasterUrl","SaveSiteAsTemplateEnabled","set_saveSiteAsTemplateEnabled","QuickLaunchEnabled","TreeViewEnabled","set_treeViewEnabled","18","ProvisioningStep","handler","dependentPromise","_handler","19","functions","parameter","scope","progressFunction","promiseSequence","sequenceFunction","functionNr","result","20","ProvisioningStep_1","ObjectNavigation_1","ObjectPropertyBagEntries_1","ObjectFeatures_1","ObjectWebSettings_1","ObjectComposedLook_1","ObjectCustomActions_1","ObjectFiles_1","ObjectLists_1","handlers","Navigation","PropertyBagEntries","Features","WebSettings","ComposedLook","CustomActions","Files","Lists","applyTemplate","path","ok","template","start","LogLevel","queue","startTime","queueItems","q","Parameters","Info","JSON","stringify","../../net/HttpClient","../../utils/logging","./ObjectHandlers/ObjectComposedLook","./ObjectHandlers/ObjectCustomActions","./ObjectHandlers/ObjectFeatures","./ObjectHandlers/ObjectFiles","./ObjectHandlers/ObjectLists","./ObjectHandlers/ObjectNavigation","./ObjectHandlers/ObjectPropertyBagEntries","./ObjectHandlers/ObjectWebSettings","./ProvisioningStep","./util","21","replace","document","location","protocol","hostname","siteAbsoluteUrl","propKey","bytes","b64encoded","btoa","String","fromCharCode","22","extractOdataId","candidate","__metadata","id","log","level","message","getEntityUrl","entity","uri","Warning","ODataValue","ODataValueParserImpl","ODataEntity","factory","ODataEntityParserImpl","ODataEntityArray","ODataEntityArrayParserImpl","httpclient_1","ODataParserBase","results","ODataRawParserImpl","map","ODataRaw","ODataBatch","_batchId","getGUID","_requests","_batchDepCount","info","incrementBatchDep","decrementBatchDep","executeImpl","batchBody","currentChangeSetId","reqInfo","Content-Type","name_1","batchHeaders","batchOptions","client","makeUrlAbsolute","_parseResponse","request","header","statusRegExp","lines","state","line","trim","parts","parseInt","../../configuration/pnplibconfig","../../net/httpclient","../../utils/util","23","instance","activeLogLevel","_instance","LoggerImpl","subscribe","listeners","_i","clearSubscribers","Verbose","measure","subscribers","listener","slice","console","profile","profileEnd","ConsoleListener","msg","format","warn","AzureInsightsListener","azureInsightsInstrumentationKey","appInsights","createElement","getElementsByTagName","appendChild","cookie","pop","disableExceptionTracking","instrumentationKey","ai","trackException","trackEvent","FunctionListener","24","context","urlParamExists","test","search","getUrlParamByName","decodeURIComponent","getUrlParamBoolByName","isFalse","stringInsert","dateAdd","date","interval","units","ret","toLocaleString","setFullYear","getFullYear","setMonth","getMonth","setDate","getDate","loadStylesheet","avoidCache","encodeURIComponent","head","setAttribute","paths","getRandomString","chars","possible","charAt","Math","floor","random","guid","c","candidateFunction","isArray","array","stringIsNullOrEmpty","noOverwrite","check","applyMixins","derivedCtor","baseCtors","baseCtor","getOwnPropertyNames","isUrlAbsolute"],"mappings":"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","file":"pnp-provisioning.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}(g.$pnp || (g.$pnp = {})).Provisioning = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\nvar util_1 = require(\"../utils/util\");\nvar Dictionary = (function () {\n    function Dictionary() {\n        this.keys = [];\n        this.values = [];\n    }\n    Dictionary.prototype.get = function (key) {\n        var index = this.keys.indexOf(key);\n        if (index < 0) {\n            return null;\n        }\n        return this.values[index];\n    };\n    Dictionary.prototype.add = function (key, o) {\n        var index = this.keys.indexOf(key);\n        if (index > -1) {\n            this.values[index] = o;\n        }\n        else {\n            this.keys.push(key);\n            this.values.push(o);\n        }\n    };\n    Dictionary.prototype.merge = function (source) {\n        if (util_1.Util.isFunction(source[\"getKeys\"])) {\n            var sourceAsDictionary = source;\n            var keys = sourceAsDictionary.getKeys();\n            var l = keys.length;\n            for (var i = 0; i < l; i++) {\n                this.add(keys[i], sourceAsDictionary.get(keys[i]));\n            }\n        }\n        else {\n            var sourceAsHash = source;\n            for (var key in sourceAsHash) {\n                if (sourceAsHash.hasOwnProperty(key)) {\n                    this.add(key, source[key]);\n                }\n            }\n        }\n    };\n    Dictionary.prototype.remove = function (key) {\n        var index = this.keys.indexOf(key);\n        if (index < 0) {\n            return null;\n        }\n        var val = this.values[index];\n        this.keys.splice(index, 1);\n        this.values.splice(index, 1);\n        return val;\n    };\n    Dictionary.prototype.getKeys = function () {\n        return this.keys;\n    };\n    Dictionary.prototype.getValues = function () {\n        return this.values;\n    };\n    Dictionary.prototype.clear = function () {\n        this.keys = [];\n        this.values = [];\n    };\n    Dictionary.prototype.count = function () {\n        return this.keys.length;\n    };\n    return Dictionary;\n}());\nexports.Dictionary = Dictionary;\n\n},{\"../utils/util\":24}],2:[function(require,module,exports){\n\"use strict\";\nvar RuntimeConfigImpl = (function () {\n    function RuntimeConfigImpl() {\n        this._headers = null;\n        this._defaultCachingStore = \"session\";\n        this._defaultCachingTimeoutSeconds = 30;\n        this._globalCacheDisable = false;\n        this._useSPRequestExecutor = false;\n    }\n    RuntimeConfigImpl.prototype.set = function (config) {\n        if (config.hasOwnProperty(\"headers\")) {\n            this._headers = config.headers;\n        }\n        if (config.hasOwnProperty(\"globalCacheDisable\")) {\n            this._globalCacheDisable = config.globalCacheDisable;\n        }\n        if (config.hasOwnProperty(\"defaultCachingStore\")) {\n            this._defaultCachingStore = config.defaultCachingStore;\n        }\n        if (config.hasOwnProperty(\"defaultCachingTimeoutSeconds\")) {\n            this._defaultCachingTimeoutSeconds = config.defaultCachingTimeoutSeconds;\n        }\n        if (config.hasOwnProperty(\"useSPRequestExecutor\")) {\n            this._useSPRequestExecutor = config.useSPRequestExecutor;\n        }\n        if (config.hasOwnProperty(\"nodeClientOptions\")) {\n            this._useNodeClient = true;\n            this._useSPRequestExecutor = false;\n            this._nodeClientData = config.nodeClientOptions;\n        }\n    };\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"headers\", {\n        get: function () {\n            return this._headers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"defaultCachingStore\", {\n        get: function () {\n            return this._defaultCachingStore;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"defaultCachingTimeoutSeconds\", {\n        get: function () {\n            return this._defaultCachingTimeoutSeconds;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"globalCacheDisable\", {\n        get: function () {\n            return this._globalCacheDisable;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"useSPRequestExecutor\", {\n        get: function () {\n            return this._useSPRequestExecutor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"useNodeFetchClient\", {\n        get: function () {\n            return this._useNodeClient;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"nodeRequestOptions\", {\n        get: function () {\n            return this._nodeClientData;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return RuntimeConfigImpl;\n}());\nexports.RuntimeConfigImpl = RuntimeConfigImpl;\nvar _runtimeConfig = new RuntimeConfigImpl();\nexports.RuntimeConfig = _runtimeConfig;\nfunction setRuntimeConfig(config) {\n    _runtimeConfig.set(config);\n}\nexports.setRuntimeConfig = setRuntimeConfig;\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\nvar fetchclient_1 = require(\"./fetchclient\");\nvar digestcache_1 = require(\"./digestcache\");\nvar util_1 = require(\"../utils/util\");\nvar pnplibconfig_1 = require(\"../configuration/pnplibconfig\");\nvar sprequestexecutorclient_1 = require(\"./sprequestexecutorclient\");\nvar nodefetchclient_1 = require(\"./nodefetchclient\");\nvar HttpClient = (function () {\n    function HttpClient() {\n        this._impl = this.getFetchImpl();\n        this._digestCache = new digestcache_1.DigestCache(this);\n    }\n    HttpClient.prototype.fetch = function (url, options) {\n        if (options === void 0) { options = {}; }\n        var self = this;\n        var opts = util_1.Util.extend(options, { cache: \"no-cache\", credentials: \"same-origin\" }, true);\n        var headers = new Headers();\n        this.mergeHeaders(headers, pnplibconfig_1.RuntimeConfig.headers);\n        this.mergeHeaders(headers, options.headers);\n        if (!headers.has(\"Accept\")) {\n            headers.append(\"Accept\", \"application/json\");\n        }\n        if (!headers.has(\"Content-Type\")) {\n            headers.append(\"Content-Type\", \"application/json;odata=verbose;charset=utf-8\");\n        }\n        if (!headers.has(\"X-ClientService-ClientTag\")) {\n            headers.append(\"X-ClientService-ClientTag\", \"SharePoint.PnP.JavaScriptCore\");\n        }\n        opts = util_1.Util.extend(opts, { headers: headers });\n        if (opts.method && opts.method.toUpperCase() !== \"GET\") {\n            if (!headers.has(\"X-RequestDigest\")) {\n                var index = url.indexOf(\"_api/\");\n                if (index < 0) {\n                    throw new Error(\"Unable to determine API url\");\n                }\n                var webUrl = url.substr(0, index);\n                return this._digestCache.getDigest(webUrl)\n                    .then(function (digest) {\n                    headers.append(\"X-RequestDigest\", digest);\n                    return self.fetchRaw(url, opts);\n                });\n            }\n        }\n        return self.fetchRaw(url, opts);\n    };\n    HttpClient.prototype.fetchRaw = function (url, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        var rawHeaders = new Headers();\n        this.mergeHeaders(rawHeaders, options.headers);\n        options = util_1.Util.extend(options, { headers: rawHeaders });\n        var retry = function (ctx) {\n            _this._impl.fetch(url, options).then(function (response) { return ctx.resolve(response); }).catch(function (response) {\n                var delay = ctx.delay;\n                if (response.status !== 429 && response.status !== 503) {\n                    ctx.reject(response);\n                }\n                ctx.delay *= 2;\n                ctx.attempts++;\n                if (ctx.retryCount <= ctx.attempts) {\n                    ctx.reject(response);\n                }\n                setTimeout(util_1.Util.getCtxCallback(_this, retry, ctx), delay);\n            });\n        };\n        return new Promise(function (resolve, reject) {\n            var retryContext = {\n                attempts: 0,\n                delay: 100,\n                reject: reject,\n                resolve: resolve,\n                retryCount: 7,\n            };\n            retry.call(_this, retryContext);\n        });\n    };\n    HttpClient.prototype.get = function (url, options) {\n        if (options === void 0) { options = {}; }\n        var opts = util_1.Util.extend(options, { method: \"GET\" });\n        return this.fetch(url, opts);\n    };\n    HttpClient.prototype.post = function (url, options) {\n        if (options === void 0) { options = {}; }\n        var opts = util_1.Util.extend(options, { method: \"POST\" });\n        return this.fetch(url, opts);\n    };\n    HttpClient.prototype.getFetchImpl = function () {\n        if (pnplibconfig_1.RuntimeConfig.useSPRequestExecutor) {\n            return new sprequestexecutorclient_1.SPRequestExecutorClient();\n        }\n        else if (pnplibconfig_1.RuntimeConfig.useNodeFetchClient) {\n            var opts = pnplibconfig_1.RuntimeConfig.nodeRequestOptions;\n            return new nodefetchclient_1.NodeFetchClient(opts.siteUrl, opts.clientId, opts.clientSecret);\n        }\n        else {\n            return new fetchclient_1.FetchClient();\n        }\n    };\n    HttpClient.prototype.mergeHeaders = function (target, source) {\n        if (typeof source !== \"undefined\" && source !== null) {\n            var temp = new Request(\"\", { headers: source });\n            temp.headers.forEach(function (value, name) {\n                target.append(name, value);\n            });\n        }\n    };\n    return HttpClient;\n}());\nexports.HttpClient = HttpClient;\n\n},{\"../configuration/pnplibconfig\":2,\"../utils/util\":24,\"./digestcache\":4,\"./fetchclient\":5,\"./nodefetchclient\":7,\"./sprequestexecutorclient\":8}],4:[function(require,module,exports){\n\"use strict\";\nvar collections_1 = require(\"../collections/collections\");\nvar util_1 = require(\"../utils/util\");\nvar odata_1 = require(\"../sharepoint/rest/odata\");\nvar CachedDigest = (function () {\n    function CachedDigest() {\n    }\n    return CachedDigest;\n}());\nexports.CachedDigest = CachedDigest;\nvar DigestCache = (function () {\n    function DigestCache(_httpClient, _digests) {\n        if (_digests === void 0) { _digests = new collections_1.Dictionary(); }\n        this._httpClient = _httpClient;\n        this._digests = _digests;\n    }\n    DigestCache.prototype.getDigest = function (webUrl) {\n        var self = this;\n        var cachedDigest = this._digests.get(webUrl);\n        if (cachedDigest !== null) {\n            var now = new Date();\n            if (now < cachedDigest.expiration) {\n                return Promise.resolve(cachedDigest.value);\n            }\n        }\n        var url = util_1.Util.combinePaths(webUrl, \"/_api/contextinfo\");\n        return self._httpClient.fetchRaw(url, {\n            cache: \"no-cache\",\n            credentials: \"same-origin\",\n            headers: {\n                \"Accept\": \"application/json;odata=verbose\",\n                \"Content-type\": \"application/json;odata=verbose;charset=utf-8\",\n            },\n            method: \"POST\",\n        }).then(function (response) {\n            var parser = new odata_1.ODataDefaultParser();\n            return parser.parse(response).then(function (d) { return d.GetContextWebInformation; });\n        }).then(function (data) {\n            var newCachedDigest = new CachedDigest();\n            newCachedDigest.value = data.FormDigestValue;\n            var seconds = data.FormDigestTimeoutSeconds;\n            var expiration = new Date();\n            expiration.setTime(expiration.getTime() + 1000 * seconds);\n            newCachedDigest.expiration = expiration;\n            self._digests.add(webUrl, newCachedDigest);\n            return newCachedDigest.value;\n        });\n    };\n    DigestCache.prototype.clear = function () {\n        this._digests.clear();\n    };\n    return DigestCache;\n}());\nexports.DigestCache = DigestCache;\n\n},{\"../collections/collections\":1,\"../sharepoint/rest/odata\":22,\"../utils/util\":24}],5:[function(require,module,exports){\n(function (global){\n\"use strict\";\nvar FetchClient = (function () {\n    function FetchClient() {\n    }\n    FetchClient.prototype.fetch = function (url, options) {\n        return global.fetch(url, options);\n    };\n    return FetchClient;\n}());\nexports.FetchClient = FetchClient;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],6:[function(require,module,exports){\narguments[4][3][0].apply(exports,arguments)\n},{\"../configuration/pnplibconfig\":2,\"../utils/util\":24,\"./digestcache\":4,\"./fetchclient\":5,\"./nodefetchclient\":7,\"./sprequestexecutorclient\":8,\"dup\":3}],7:[function(require,module,exports){\n\"use strict\";\nvar NodeFetchClient = (function () {\n    function NodeFetchClient(siteUrl, _clientId, _clientSecret, _realm) {\n        if (_realm === void 0) { _realm = \"\"; }\n        this.siteUrl = siteUrl;\n        this._clientId = _clientId;\n        this._clientSecret = _clientSecret;\n        this._realm = _realm;\n    }\n    NodeFetchClient.prototype.fetch = function (url, options) {\n        throw new Error(\"Using NodeFetchClient in the browser is not supported.\");\n    };\n    return NodeFetchClient;\n}());\nexports.NodeFetchClient = NodeFetchClient;\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\nvar SPRequestExecutorClient = (function () {\n    function SPRequestExecutorClient() {\n        this.convertToResponse = function (spResponse) {\n            var responseHeaders = new Headers();\n            for (var h in spResponse.headers) {\n                if (spResponse.headers[h]) {\n                    responseHeaders.append(h, spResponse.headers[h]);\n                }\n            }\n            return new Response(spResponse.body, {\n                headers: responseHeaders,\n                status: spResponse.statusCode,\n                statusText: spResponse.statusText,\n            });\n        };\n    }\n    SPRequestExecutorClient.prototype.fetch = function (url, options) {\n        var _this = this;\n        if (typeof SP === \"undefined\" || typeof SP.RequestExecutor === \"undefined\") {\n            throw new Error(\"SP.RequestExecutor is undefined. \" +\n                \"Load the SP.RequestExecutor.js library (/_layouts/15/SP.RequestExecutor.js) before loading the PnP JS Core library.\");\n        }\n        var addinWebUrl = url.substring(0, url.indexOf(\"/_api\")), executor = new SP.RequestExecutor(addinWebUrl), headers = {}, iterator, temp;\n        if (options.headers && options.headers instanceof Headers) {\n            iterator = options.headers.entries();\n            temp = iterator.next();\n            while (!temp.done) {\n                headers[temp.value[0]] = temp.value[1];\n                temp = iterator.next();\n            }\n        }\n        else {\n            headers = options.headers;\n        }\n        return new Promise(function (resolve, reject) {\n            executor.executeAsync({\n                body: options.body,\n                error: function (error) {\n                    reject(_this.convertToResponse(error));\n                },\n                headers: headers,\n                method: options.method,\n                success: function (response) {\n                    resolve(_this.convertToResponse(response));\n                },\n                url: url,\n            });\n        });\n    };\n    return SPRequestExecutorClient;\n}());\nexports.SPRequestExecutorClient = SPRequestExecutorClient;\n\n},{}],9:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar util_1 = require(\"../util\");\nvar ObjectHandlerBase_1 = require(\"./ObjectHandlerBase\");\nvar ObjectComposedLook = (function (_super) {\n    __extends(ObjectComposedLook, _super);\n    function ObjectComposedLook() {\n        _super.call(this, \"ComposedLook\");\n    }\n    ObjectComposedLook.prototype.ProvisionObjects = function (object) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var colorPaletteUrl = object.ColorPaletteUrl ? util_1.Util.replaceUrlTokens(object.ColorPaletteUrl) : \"\";\n            var fontSchemeUrl = object.FontSchemeUrl ? util_1.Util.replaceUrlTokens(object.FontSchemeUrl) : \"\";\n            var backgroundImageUrl = object.BackgroundImageUrl ? util_1.Util.replaceUrlTokens(object.BackgroundImageUrl) : null;\n            web.applyTheme(util_1.Util.getRelativeUrl(colorPaletteUrl), util_1.Util.getRelativeUrl(fontSchemeUrl), backgroundImageUrl, true);\n            web.update();\n            clientContext.executeQueryAsync(function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            });\n        });\n    };\n    return ObjectComposedLook;\n}(ObjectHandlerBase_1.ObjectHandlerBase));\nexports.ObjectComposedLook = ObjectComposedLook;\n\n},{\"../util\":21,\"./ObjectHandlerBase\":13}],10:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar ObjectHandlerBase_1 = require(\"./ObjectHandlerBase\");\nvar ObjectCustomActions = (function (_super) {\n    __extends(ObjectCustomActions, _super);\n    function ObjectCustomActions() {\n        _super.call(this, \"CustomActions\");\n    }\n    ObjectCustomActions.prototype.ProvisionObjects = function (customactions) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var userCustomActions = clientContext.get_web().get_userCustomActions();\n            clientContext.load(userCustomActions);\n            clientContext.executeQueryAsync(function () {\n                customactions.forEach(function (obj) {\n                    var objExists = userCustomActions.get_data().filter(function (userCustomAction) {\n                        return userCustomAction.get_title() === obj.Title;\n                    }).length > 0;\n                    if (!objExists) {\n                        var objCreationInformation = userCustomActions.add();\n                        if (obj.Description) {\n                            objCreationInformation.set_description(obj.Description);\n                        }\n                        if (obj.CommandUIExtension) {\n                            objCreationInformation.set_commandUIExtension(obj.CommandUIExtension);\n                        }\n                        if (obj.Group) {\n                            objCreationInformation.set_group(obj.Group);\n                        }\n                        if (obj.Title) {\n                            objCreationInformation.set_title(obj.Title);\n                        }\n                        if (obj.Url) {\n                            objCreationInformation.set_url(obj.Url);\n                        }\n                        if (obj.ScriptBlock) {\n                            objCreationInformation.set_scriptBlock(obj.ScriptBlock);\n                        }\n                        if (obj.ScriptSrc) {\n                            objCreationInformation.set_scriptSrc(obj.ScriptSrc);\n                        }\n                        if (obj.Location) {\n                            objCreationInformation.set_location(obj.Location);\n                        }\n                        if (obj.ImageUrl) {\n                            objCreationInformation.set_imageUrl(obj.ImageUrl);\n                        }\n                        if (obj.Name) {\n                            objCreationInformation.set_name(obj.Name);\n                        }\n                        if (obj.RegistrationId) {\n                            objCreationInformation.set_registrationId(obj.RegistrationId);\n                        }\n                        if (obj.RegistrationType) {\n                            objCreationInformation.set_registrationType(obj.RegistrationType);\n                        }\n                        if (obj.Rights) {\n                            objCreationInformation.set_rights(obj.Rights);\n                        }\n                        if (obj.Sequence) {\n                            objCreationInformation.set_sequence(obj.Sequence);\n                        }\n                        objCreationInformation.update();\n                    }\n                });\n                clientContext.executeQueryAsync(function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            });\n        });\n    };\n    return ObjectCustomActions;\n}(ObjectHandlerBase_1.ObjectHandlerBase));\nexports.ObjectCustomActions = ObjectCustomActions;\n\n},{\"./ObjectHandlerBase\":13}],11:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar ObjectHandlerBase_1 = require(\"./ObjectHandlerBase\");\nvar ObjectFeatures = (function (_super) {\n    __extends(ObjectFeatures, _super);\n    function ObjectFeatures() {\n        _super.call(this, \"Features\");\n    }\n    ObjectFeatures.prototype.ProvisionObjects = function (features) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var webFeatures = web.get_features();\n            features.forEach(function (f) {\n                if (f.Deactivate === true) {\n                    webFeatures.remove(new SP.Guid(f.ID), true);\n                }\n                else {\n                    webFeatures.add(new SP.Guid(f.ID), true, SP.FeatureDefinitionScope.none);\n                }\n            });\n            web.update();\n            clientContext.load(webFeatures);\n            clientContext.executeQueryAsync(function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            });\n        });\n    };\n    return ObjectFeatures;\n}(ObjectHandlerBase_1.ObjectHandlerBase));\nexports.ObjectFeatures = ObjectFeatures;\n\n},{\"./ObjectHandlerBase\":13}],12:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar CoreUtil = require(\"../../../utils/util\");\nvar util_1 = require(\"../util\");\nvar ObjectHandlerBase_1 = require(\"./ObjectHandlerBase\");\nvar ObjectFiles = (function (_super) {\n    __extends(ObjectFiles, _super);\n    function ObjectFiles() {\n        _super.call(this, \"Files\");\n    }\n    ObjectFiles.prototype.ProvisionObjects = function (objects) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var fileInfos = [];\n            var promises = [];\n            objects.forEach(function (obj, index) {\n                promises.push(_this.httpClient.fetchRaw(util_1.Util.replaceUrlTokens(obj.Src)).then(function (response) {\n                    return response.text();\n                }));\n            });\n            Promise.all(promises).then(function (responses) {\n                responses.forEach(function (response, index) {\n                    var obj = objects[index];\n                    var filename = _this.GetFilenameFromFilePath(obj.Dest);\n                    var webServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl;\n                    var folder = web.getFolderByServerRelativeUrl(webServerRelativeUrl + \"/\" + _this.GetFolderFromFilePath(obj.Dest));\n                    var fi = {\n                        Contents: response,\n                        Dest: obj.Dest,\n                        Filename: filename,\n                        Folder: folder,\n                        Instance: null,\n                        Overwrite: false,\n                        Properties: [],\n                        RemoveExistingWebParts: true,\n                        ServerRelativeUrl: obj.Dest,\n                        Src: obj.Src,\n                        Views: [],\n                        WebParts: [],\n                    };\n                    CoreUtil.Util.extend(fi, obj);\n                    if (fi.Filename.indexOf(\"Form.aspx\") !== -1) {\n                        return;\n                    }\n                    var objCreationInformation = new SP.FileCreationInformation();\n                    objCreationInformation.set_overwrite(fi.Overwrite);\n                    objCreationInformation.set_url(fi.Filename);\n                    objCreationInformation.set_content(new SP.Base64EncodedByteArray());\n                    for (var i = 0; i < fi.Contents.length; i++) {\n                        objCreationInformation.get_content().append(fi.Contents.charCodeAt(i));\n                    }\n                    clientContext.load(fi.Folder.get_files().add(objCreationInformation));\n                    fileInfos.push(fi);\n                });\n            });\n            clientContext.executeQueryAsync(function () {\n                promises = [];\n                fileInfos.forEach(function (fi) {\n                    if (fi.Properties && Object.keys(fi.Properties).length > 0) {\n                        promises.push(_this.ApplyFileProperties(fi.Dest, fi.Properties));\n                    }\n                    if (fi.WebParts && fi.WebParts.length > 0) {\n                        promises.push(_this.AddWebPartsToWebPartPage(fi.Dest, fi.Src, fi.WebParts, fi.RemoveExistingWebParts));\n                    }\n                });\n                Promise.all(promises).then(function () {\n                    _this.ModifyHiddenViews(objects).then(function (value) {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve(value);\n                    }, function (error) {\n                        _super.prototype.scope_ended.call(_this);\n                        reject(error);\n                    });\n                });\n            }, function (error) {\n                _super.prototype.scope_ended.call(_this);\n                reject(error);\n            });\n        });\n    };\n    ObjectFiles.prototype.RemoveWebPartsFromFileIfSpecified = function (clientContext, limitedWebPartManager, shouldRemoveExisting) {\n        return new Promise(function (resolve, reject) {\n            if (!shouldRemoveExisting) {\n                resolve();\n            }\n            var existingWebParts = limitedWebPartManager.get_webParts();\n            clientContext.load(existingWebParts);\n            clientContext.executeQueryAsync(function () {\n                existingWebParts.get_data().forEach(function (wp) {\n                    wp.deleteWebPart();\n                });\n                clientContext.load(existingWebParts);\n                clientContext.executeQueryAsync(resolve, reject);\n            }, reject);\n        });\n    };\n    ObjectFiles.prototype.GetWebPartXml = function (webParts) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var promises = [];\n            webParts.forEach(function (wp, index) {\n                if (wp.Contents.FileUrl) {\n                    var fileUrl = util_1.Util.replaceUrlTokens(wp.Contents.FileUrl);\n                    promises.push(_this.httpClient.fetchRaw(fileUrl).then(function (response) {\n                        return response.text();\n                    }));\n                }\n                else {\n                    promises.push((function () {\n                        return new Promise(function (res, rej) {\n                            res();\n                        });\n                    })());\n                }\n            });\n            Promise.all(promises).then(function (responses) {\n                responses.forEach(function (response, index) {\n                    var wp = webParts[index];\n                    if (wp !== null && response && response.length > 0) {\n                        wp.Contents.Xml = response;\n                    }\n                });\n                resolve(webParts);\n            });\n        });\n    };\n    ObjectFiles.prototype.AddWebPartsToWebPartPage = function (dest, src, webParts, shouldRemoveExisting) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var fileServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + dest;\n            var file = web.getFileByServerRelativeUrl(fileServerRelativeUrl);\n            clientContext.load(file);\n            clientContext.executeQueryAsync(function () {\n                var limitedWebPartManager = file.getLimitedWebPartManager(SP.WebParts.PersonalizationScope.shared);\n                _this.RemoveWebPartsFromFileIfSpecified(clientContext, limitedWebPartManager, shouldRemoveExisting).then(function () {\n                    _this.GetWebPartXml(webParts).then(function (webPartsWithXml) {\n                        webPartsWithXml.forEach(function (wp) {\n                            if (!wp.Contents.Xml) {\n                                return;\n                            }\n                            var oWebPartDefinition = limitedWebPartManager.importWebPart(util_1.Util.replaceUrlTokens(wp.Contents.Xml));\n                            var oWebPart = oWebPartDefinition.get_webPart();\n                            limitedWebPartManager.addWebPart(oWebPart, wp.Zone, wp.Order);\n                        });\n                        clientContext.executeQueryAsync(resolve, resolve);\n                    });\n                });\n            }, resolve);\n        });\n    };\n    ObjectFiles.prototype.ApplyFileProperties = function (dest, fileProperties) {\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var fileServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + dest;\n            var file = web.getFileByServerRelativeUrl(fileServerRelativeUrl);\n            var listItemAllFields = file.get_listItemAllFields();\n            Object.keys(fileProperties).forEach(function (key) {\n                listItemAllFields.set_item(key, fileProperties[key]);\n            });\n            listItemAllFields.update();\n            clientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    ObjectFiles.prototype.GetViewFromCollectionByUrl = function (viewCollection, url) {\n        var serverRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + url;\n        var viewCollectionEnumerator = viewCollection.getEnumerator();\n        while (viewCollectionEnumerator.moveNext()) {\n            var view = viewCollectionEnumerator.get_current();\n            if (view.get_serverRelativeUrl().toString().toLowerCase() === serverRelativeUrl.toLowerCase()) {\n                return view;\n            }\n        }\n        return null;\n    };\n    ObjectFiles.prototype.ModifyHiddenViews = function (objects) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            var mapping = {};\n            var lists = [];\n            var listViewCollections = [];\n            objects.forEach(function (obj) {\n                if (!obj.Views) {\n                    return;\n                }\n                obj.Views.forEach(function (v) {\n                    mapping[v.List] = mapping[v.List] || [];\n                    mapping[v.List].push(CoreUtil.Util.extend(v, { \"Url\": obj.Dest }));\n                });\n            });\n            Object.keys(mapping).forEach(function (l, index) {\n                lists.push(web.get_lists().getByTitle(l));\n                listViewCollections.push(web.get_lists().getByTitle(l).get_views());\n                clientContext.load(lists[index]);\n                clientContext.load(listViewCollections[index]);\n            });\n            clientContext.executeQueryAsync(function () {\n                Object.keys(mapping).forEach(function (l, index) {\n                    var views = mapping[l];\n                    var list = lists[index];\n                    var viewCollection = listViewCollections[index];\n                    views.forEach(function (v) {\n                        var view = _this.GetViewFromCollectionByUrl(viewCollection, v.Url);\n                        if (view == null) {\n                            return;\n                        }\n                        if (v.Paged) {\n                            view.set_paged(v.Paged);\n                        }\n                        if (v.Query) {\n                            view.set_viewQuery(v.Query);\n                        }\n                        if (v.RowLimit) {\n                            view.set_rowLimit(v.RowLimit);\n                        }\n                        if (v.ViewFields && v.ViewFields.length > 0) {\n                            var columns_1 = view.get_viewFields();\n                            columns_1.removeAll();\n                            v.ViewFields.forEach(function (vf) {\n                                columns_1.add(vf);\n                            });\n                        }\n                        view.update();\n                    });\n                    clientContext.load(viewCollection);\n                    list.update();\n                });\n                clientContext.executeQueryAsync(resolve, resolve);\n            }, resolve);\n        });\n    };\n    ObjectFiles.prototype.GetFolderFromFilePath = function (filePath) {\n        var split = filePath.split(\"/\");\n        return split.splice(0, split.length - 1).join(\"/\");\n    };\n    ObjectFiles.prototype.GetFilenameFromFilePath = function (filePath) {\n        var split = filePath.split(\"/\");\n        return split[split.length - 1];\n    };\n    return ObjectFiles;\n}(ObjectHandlerBase_1.ObjectHandlerBase));\nexports.ObjectFiles = ObjectFiles;\n;\n\n},{\"../../../utils/util\":24,\"../util\":21,\"./ObjectHandlerBase\":13}],13:[function(require,module,exports){\n\"use strict\";\nvar HttpClient_1 = require(\"../../../net/HttpClient\");\nvar logging_1 = require(\"../../../utils/logging\");\nvar ObjectHandlerBase = (function () {\n    function ObjectHandlerBase(name) {\n        this.name = name;\n        this.httpClient = new HttpClient_1.HttpClient();\n    }\n    ObjectHandlerBase.prototype.ProvisionObjects = function (objects, parameters) {\n        return new Promise(function (resolve, reject) { resolve(\"Not implemented.\"); });\n    };\n    ObjectHandlerBase.prototype.scope_started = function () {\n        logging_1.Logger.write(this.name + \": Code execution scope started\");\n    };\n    ObjectHandlerBase.prototype.scope_ended = function () {\n        logging_1.Logger.write(this.name + \": Code execution scope stopped\");\n    };\n    return ObjectHandlerBase;\n}());\nexports.ObjectHandlerBase = ObjectHandlerBase;\n\n},{\"../../../net/HttpClient\":3,\"../../../utils/logging\":23}],14:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Sequencer_1 = require(\"../Sequencer/Sequencer\");\nvar ObjectHandlerBase_1 = require(\"./ObjectHandlerBase\");\nvar ObjectLists = (function (_super) {\n    __extends(ObjectLists, _super);\n    function ObjectLists() {\n        _super.call(this, \"Lists\");\n    }\n    ObjectLists.prototype.ProvisionObjects = function (objects) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var lists = clientContext.get_web().get_lists();\n            var listInstances = [];\n            clientContext.load(lists);\n            clientContext.executeQueryAsync(function () {\n                objects.forEach(function (obj, index) {\n                    var existingObj = lists.get_data().filter(function (list) {\n                        return list.get_title() === obj.Title;\n                    })[0];\n                    if (existingObj) {\n                        if (obj.Description) {\n                            existingObj.set_description(obj.Description);\n                        }\n                        if (obj.EnableVersioning !== undefined) {\n                            existingObj.set_enableVersioning(obj.EnableVersioning);\n                        }\n                        if (obj.EnableMinorVersions !== undefined) {\n                            existingObj.set_enableMinorVersions(obj.EnableMinorVersions);\n                        }\n                        if (obj.EnableModeration !== undefined) {\n                            existingObj.set_enableModeration(obj.EnableModeration);\n                        }\n                        if (obj.EnableFolderCreation !== undefined) {\n                            existingObj.set_enableFolderCreation(obj.EnableFolderCreation);\n                        }\n                        if (obj.EnableAttachments !== undefined) {\n                            existingObj.set_enableAttachments(obj.EnableAttachments);\n                        }\n                        if (obj.NoCrawl !== undefined) {\n                            existingObj.set_noCrawl(obj.NoCrawl);\n                        }\n                        if (obj.DefaultDisplayFormUrl) {\n                            existingObj.set_defaultDisplayFormUrl(obj.DefaultDisplayFormUrl);\n                        }\n                        if (obj.DefaultEditFormUrl) {\n                            existingObj.set_defaultEditFormUrl(obj.DefaultEditFormUrl);\n                        }\n                        if (obj.DefaultNewFormUrl) {\n                            existingObj.set_defaultNewFormUrl(obj.DefaultNewFormUrl);\n                        }\n                        if (obj.DraftVersionVisibility) {\n                            existingObj.set_draftVersionVisibility(SP.DraftVisibilityType[obj.DraftVersionVisibility]);\n                        }\n                        if (obj.ImageUrl) {\n                            existingObj.set_imageUrl(obj.ImageUrl);\n                        }\n                        if (obj.Hidden !== undefined) {\n                            existingObj.set_hidden(obj.Hidden);\n                        }\n                        if (obj.ForceCheckout !== undefined) {\n                            existingObj.set_forceCheckout(obj.ForceCheckout);\n                        }\n                        existingObj.update();\n                        listInstances.push(existingObj);\n                        clientContext.load(listInstances[index]);\n                    }\n                    else {\n                        var objCreationInformation = new SP.ListCreationInformation();\n                        if (obj.Description) {\n                            objCreationInformation.set_description(obj.Description);\n                        }\n                        if (obj.OnQuickLaunch !== undefined) {\n                            var value = obj.OnQuickLaunch ? SP.QuickLaunchOptions.on : SP.QuickLaunchOptions.off;\n                            objCreationInformation.set_quickLaunchOption(value);\n                        }\n                        if (obj.TemplateType) {\n                            objCreationInformation.set_templateType(obj.TemplateType);\n                        }\n                        if (obj.Title) {\n                            objCreationInformation.set_title(obj.Title);\n                        }\n                        if (obj.Url) {\n                            objCreationInformation.set_url(obj.Url);\n                        }\n                        var createdList = lists.add(objCreationInformation);\n                        if (obj.EnableVersioning !== undefined) {\n                            createdList.set_enableVersioning(obj.EnableVersioning);\n                        }\n                        if (obj.EnableMinorVersions !== undefined) {\n                            createdList.set_enableMinorVersions(obj.EnableMinorVersions);\n                        }\n                        if (obj.EnableModeration !== undefined) {\n                            createdList.set_enableModeration(obj.EnableModeration);\n                        }\n                        if (obj.EnableFolderCreation !== undefined) {\n                            createdList.set_enableFolderCreation(obj.EnableFolderCreation);\n                        }\n                        if (obj.EnableAttachments !== undefined) {\n                            createdList.set_enableAttachments(obj.EnableAttachments);\n                        }\n                        if (obj.NoCrawl !== undefined) {\n                            createdList.set_noCrawl(obj.NoCrawl);\n                        }\n                        if (obj.DefaultDisplayFormUrl) {\n                            createdList.set_defaultDisplayFormUrl(obj.DefaultDisplayFormUrl);\n                        }\n                        if (obj.DefaultEditFormUrl) {\n                            createdList.set_defaultEditFormUrl(obj.DefaultEditFormUrl);\n                        }\n                        if (obj.DefaultNewFormUrl) {\n                            createdList.set_defaultNewFormUrl(obj.DefaultNewFormUrl);\n                        }\n                        if (obj.DraftVersionVisibility) {\n                            var value = SP.DraftVisibilityType[obj.DraftVersionVisibility.toLocaleLowerCase()];\n                            createdList.set_draftVersionVisibility(value);\n                        }\n                        if (obj.ImageUrl) {\n                            createdList.set_imageUrl(obj.ImageUrl);\n                        }\n                        if (obj.Hidden !== undefined) {\n                            createdList.set_hidden(obj.Hidden);\n                        }\n                        if (obj.ForceCheckout !== undefined) {\n                            createdList.set_forceCheckout(obj.ForceCheckout);\n                        }\n                        listInstances.push(createdList);\n                        clientContext.load(listInstances[index]);\n                    }\n                });\n                clientContext.executeQueryAsync(function () {\n                    var sequencer = new Sequencer_1.Sequencer([\n                        _this.ApplyContentTypeBindings,\n                        _this.ApplyListInstanceFieldRefs,\n                        _this.ApplyFields,\n                        _this.ApplyLookupFields,\n                        _this.ApplyListSecurity,\n                        _this.CreateViews,\n                        _this.InsertDataRows,\n                        _this.CreateFolders,\n                    ], { ClientContext: clientContext, ListInstances: listInstances, Objects: objects }, _this);\n                    sequencer.execute().then(function () {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve();\n                    });\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            });\n        });\n    };\n    ObjectLists.prototype.EnsureLocationBasedMetadataDefaultsReceiver = function (clientContext, list) {\n        var eventReceivers = list.get_eventReceivers();\n        var eventRecCreationInfo = new SP.EventReceiverDefinitionCreationInformation();\n        eventRecCreationInfo.set_receiverName(\"LocationBasedMetadataDefaultsReceiver ItemAdded\");\n        eventRecCreationInfo.set_synchronization(1);\n        eventRecCreationInfo.set_sequenceNumber(1000);\n        eventRecCreationInfo.set_receiverAssembly(\"Microsoft.Office.DocumentManagement, Version=15.0.0.0, Culture=neutral, \" +\n            \"PublicKeyToken=71e9bce111e9429c\");\n        eventRecCreationInfo.set_receiverClass(\"Microsoft.Office.DocumentManagement.LocationBasedMetadataDefaultsReceiver\");\n        eventRecCreationInfo.set_eventType(SP.EventReceiverType.itemAdded);\n        eventReceivers.add(eventRecCreationInfo);\n        list.update();\n    };\n    ObjectLists.prototype.CreateFolders = function (params) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (!obj.Folders) {\n                    return;\n                }\n                var folderServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + obj.Url;\n                var rootFolder = l.get_rootFolder();\n                var metadataDefaults = \"<MetadataDefaults>\";\n                var setMetadataDefaults = false;\n                obj.Folders.forEach(function (f) {\n                    var folderUrl = folderServerRelativeUrl + \"/\" + f.Name;\n                    rootFolder.get_folders().add(folderUrl);\n                    if (f.DefaultValues) {\n                        var keys = Object.keys(f.DefaultValues).length;\n                        if (keys > 0) {\n                            metadataDefaults += \"<a href='\" + folderUrl + \"'>\";\n                            Object.keys(f.DefaultValues).forEach(function (key) {\n                                metadataDefaults += \"<DefaultValue FieldName=\\\"\" + key + \"\\\">\" + f.DefaultValues[key] + \"</DefaultValue>\";\n                            });\n                            metadataDefaults += \"</a>\";\n                        }\n                        setMetadataDefaults = true;\n                    }\n                });\n                metadataDefaults += \"</MetadataDefaults>\";\n                if (setMetadataDefaults) {\n                    var metadataDefaultsFileCreateInfo = new SP.FileCreationInformation();\n                    metadataDefaultsFileCreateInfo.set_url(folderServerRelativeUrl + \"/Forms/client_LocationBasedDefaults.html\");\n                    metadataDefaultsFileCreateInfo.set_content(new SP.Base64EncodedByteArray());\n                    metadataDefaultsFileCreateInfo.set_overwrite(true);\n                    for (var i = 0; i < metadataDefaults.length; i++) {\n                        metadataDefaultsFileCreateInfo.get_content().append(metadataDefaults.charCodeAt(i));\n                    }\n                    rootFolder.get_files().add(metadataDefaultsFileCreateInfo);\n                    _this.EnsureLocationBasedMetadataDefaultsReceiver(params.ClientContext, l);\n                }\n            });\n            params.ClientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    ObjectLists.prototype.ApplyContentTypeBindings = function (params) {\n        return new Promise(function (resolve, reject) {\n            var webCts = params.ClientContext.get_site().get_rootWeb().get_contentTypes();\n            var listCts = [];\n            params.ListInstances.forEach(function (l, index) {\n                listCts.push(l.get_contentTypes());\n                params.ClientContext.load(listCts[index], \"Include(Name,Id)\");\n                if (params.Objects[index].ContentTypeBindings) {\n                    l.set_contentTypesEnabled(true);\n                    l.update();\n                }\n            });\n            params.ClientContext.load(webCts);\n            params.ClientContext.executeQueryAsync(function () {\n                params.ListInstances.forEach(function (list, index) {\n                    var obj = params.Objects[index];\n                    if (!obj.ContentTypeBindings) {\n                        return;\n                    }\n                    var listContentTypes = listCts[index];\n                    var existingContentTypes = new Array();\n                    if (obj.RemoveExistingContentTypes && obj.ContentTypeBindings.length > 0) {\n                        listContentTypes.get_data().forEach(function (ct) {\n                            existingContentTypes.push(ct);\n                        });\n                    }\n                    obj.ContentTypeBindings.forEach(function (ctb) {\n                        listContentTypes.addExistingContentType(webCts.getById(ctb.ContentTypeId));\n                    });\n                    if (obj.RemoveExistingContentTypes && obj.ContentTypeBindings.length > 0) {\n                        for (var j = 0; j < existingContentTypes.length; j++) {\n                            var ect = existingContentTypes[j];\n                            ect.deleteObject();\n                        }\n                    }\n                    list.update();\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            }, resolve);\n        });\n    };\n    ObjectLists.prototype.ApplyListInstanceFieldRefs = function (params) {\n        return new Promise(function (resolve, reject) {\n            var siteFields = params.ClientContext.get_site().get_rootWeb().get_fields();\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (obj.FieldRefs) {\n                    obj.FieldRefs.forEach(function (fr) {\n                        var field = siteFields.getByInternalNameOrTitle(fr.Name);\n                        l.get_fields().add(field);\n                    });\n                    l.update();\n                }\n            });\n            params.ClientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    ObjectLists.prototype.ApplyFields = function (params) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (obj.Fields) {\n                    obj.Fields.forEach(function (f) {\n                        var fieldXml = _this.GetFieldXml(f, params.ListInstances, l);\n                        var fieldType = _this.GetFieldXmlAttr(fieldXml, \"Type\");\n                        if (fieldType !== \"Lookup\" && fieldType !== \"LookupMulti\") {\n                            l.get_fields().addFieldAsXml(fieldXml, true, SP.AddFieldOptions.addToAllContentTypes);\n                        }\n                    });\n                    l.update();\n                }\n            });\n            params.ClientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    ObjectLists.prototype.ApplyLookupFields = function (params) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (obj.Fields) {\n                    obj.Fields.forEach(function (f) {\n                        var fieldXml = _this.GetFieldXml(f, params.ListInstances, l);\n                        if (!fieldXml) {\n                            return;\n                        }\n                        var fieldType = _this.GetFieldXmlAttr(fieldXml, \"Type\");\n                        if (fieldType === \"Lookup\" || fieldType === \"LookupMulti\") {\n                            l.get_fields().addFieldAsXml(fieldXml, true, SP.AddFieldOptions.addToAllContentTypes);\n                        }\n                    });\n                    l.update();\n                }\n            });\n            params.ClientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    ObjectLists.prototype.GetFieldXmlAttr = function (fieldXml, attr) {\n        var regex = new RegExp(attr + '=[\\'|\\\"](?:(.+?))[\\'|\\\"]');\n        var match = regex.exec(fieldXml);\n        return match[1];\n    };\n    ObjectLists.prototype.GetFieldXml = function (field, lists, list) {\n        var fieldXml = \"\";\n        if (!field.SchemaXml) {\n            var properties_1 = [];\n            Object.keys(field).forEach(function (prop) {\n                var value = field[prop];\n                if (prop === \"List\") {\n                    var targetList = lists.filter(function (v) {\n                        return v.get_title() === value;\n                    });\n                    if (targetList.length > 0) {\n                        value = \"{\" + targetList[0].get_id().toString() + \"}\";\n                    }\n                    else {\n                        return null;\n                    }\n                    properties_1.push(prop + \"=\\\"\" + value + \"\\\"\");\n                }\n            });\n            fieldXml = \"<Field \" + properties_1.join(\" \") + \">\";\n            if (field.Type === \"Calculated\") {\n                fieldXml += \"<Formula>\" + field.Formula + \"</Formula>\";\n            }\n            fieldXml += \"</Field>\";\n        }\n        return fieldXml;\n    };\n    ObjectLists.prototype.ApplyListSecurity = function (params) {\n        return new Promise(function (resolve, reject) {\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (!obj.Security) {\n                    return;\n                }\n                if (obj.Security.BreakRoleInheritance) {\n                    l.breakRoleInheritance(obj.Security.CopyRoleAssignments, obj.Security.ClearSubscopes);\n                    l.update();\n                    params.ClientContext.load(l.get_roleAssignments());\n                }\n            });\n            var web = params.ClientContext.get_web();\n            var allProperties = web.get_allProperties();\n            var siteGroups = web.get_siteGroups();\n            var roleDefinitions = web.get_roleDefinitions();\n            params.ClientContext.load(allProperties);\n            params.ClientContext.load(roleDefinitions);\n            params.ClientContext.executeQueryAsync(function () {\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (!obj.Security) {\n                        return;\n                    }\n                    obj.Security.RoleAssignments.forEach(function (ra) {\n                        var roleDef = null;\n                        if (typeof ra.RoleDefinition === \"number\") {\n                            roleDef = roleDefinitions.getById(ra.RoleDefinition);\n                        }\n                        else {\n                            roleDef = roleDefinitions.getByName(ra.RoleDefinition);\n                        }\n                        var roleBindings = SP.RoleDefinitionBindingCollection.newObject(params.ClientContext);\n                        roleBindings.add(roleDef);\n                        var principal = null;\n                        if (ra.Principal.match(/\\{[A-Za-z]*\\}+/g)) {\n                            var token = ra.Principal.substring(1, ra.Principal.length - 1);\n                            var groupId = allProperties.get_fieldValues()[(\"vti_\" + token)];\n                            principal = siteGroups.getById(groupId);\n                        }\n                        else {\n                            principal = siteGroups.getByName(principal);\n                        }\n                        l.get_roleAssignments().add(principal, roleBindings);\n                    });\n                    l.update();\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            }, resolve);\n        });\n    };\n    ObjectLists.prototype.CreateViews = function (params) {\n        return new Promise(function (resolve, reject) {\n            var listViewCollections = [];\n            params.ListInstances.forEach(function (l, index) {\n                listViewCollections.push(l.get_views());\n                params.ClientContext.load(listViewCollections[index]);\n            });\n            params.ClientContext.executeQueryAsync(function () {\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (!obj.Views) {\n                        return;\n                    }\n                    listViewCollections.push(l.get_views());\n                    params.ClientContext.load(listViewCollections[index]);\n                    obj.Views.forEach(function (v) {\n                        var viewExists = listViewCollections[index].get_data().filter(function (ev) {\n                            if (obj.RemoveExistingViews && obj.Views.length > 0) {\n                                ev.deleteObject();\n                                return false;\n                            }\n                            return ev.get_title() === v.Title;\n                        }).length > 0;\n                        if (viewExists) {\n                            var view = listViewCollections[index].getByTitle(v.Title);\n                            if (v.Paged) {\n                                view.set_paged(v.Paged);\n                            }\n                            if (v.Query) {\n                                view.set_viewQuery(v.Query);\n                            }\n                            if (v.RowLimit) {\n                                view.set_rowLimit(v.RowLimit);\n                            }\n                            if (v.ViewFields && v.ViewFields.length > 0) {\n                                var columns_1 = view.get_viewFields();\n                                columns_1.removeAll();\n                                v.ViewFields.forEach(function (vf) {\n                                    columns_1.add(vf);\n                                });\n                            }\n                            if (v.Scope) {\n                                view.set_scope(v.Scope);\n                            }\n                            view.update();\n                        }\n                        else {\n                            var viewCreationInformation = new SP.ViewCreationInformation();\n                            if (v.Title) {\n                                viewCreationInformation.set_title(v.Title);\n                            }\n                            if (v.PersonalView) {\n                                viewCreationInformation.set_personalView(v.PersonalView);\n                            }\n                            if (v.Paged) {\n                                viewCreationInformation.set_paged(v.Paged);\n                            }\n                            if (v.Query) {\n                                viewCreationInformation.set_query(v.Query);\n                            }\n                            if (v.RowLimit) {\n                                viewCreationInformation.set_rowLimit(v.RowLimit);\n                            }\n                            if (v.SetAsDefaultView) {\n                                viewCreationInformation.set_setAsDefaultView(v.SetAsDefaultView);\n                            }\n                            if (v.ViewFields) {\n                                viewCreationInformation.set_viewFields(v.ViewFields);\n                            }\n                            if (v.ViewTypeKind) {\n                                viewCreationInformation.set_viewTypeKind(SP.ViewType.html);\n                            }\n                            var view = l.get_views().add(viewCreationInformation);\n                            if (v.Scope) {\n                                view.set_scope(v.Scope);\n                                view.update();\n                            }\n                            l.update();\n                        }\n                        params.ClientContext.load(l.get_views());\n                    });\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            }, resolve);\n        });\n    };\n    ObjectLists.prototype.InsertDataRows = function (params) {\n        return new Promise(function (resolve, reject) {\n            params.ListInstances.forEach(function (l, index) {\n                var obj = params.Objects[index];\n                if (obj.DataRows) {\n                    obj.DataRows.forEach(function (r) {\n                        var item = l.addItem(new SP.ListItemCreationInformation());\n                        Object.keys(r).forEach(function (key) {\n                            item.set_item(key, r[key]);\n                        });\n                        item.update();\n                        params.ClientContext.load(item);\n                    });\n                }\n            });\n            params.ClientContext.executeQueryAsync(resolve, resolve);\n        });\n    };\n    return ObjectLists;\n}(ObjectHandlerBase_1.ObjectHandlerBase));\nexports.ObjectLists = ObjectLists;\n\n},{\"../Sequencer/Sequencer\":19,\"./ObjectHandlerBase\":13}],15:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar util_1 = require(\"../util\");\nvar ObjectHandlerBase_1 = require(\"./ObjectHandlerBase\");\nvar ObjectNavigation = (function (_super) {\n    __extends(ObjectNavigation, _super);\n    function ObjectNavigation() {\n        _super.call(this, \"Navigation\");\n    }\n    ObjectNavigation.prototype.ProvisionObjects = function (object) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        var clientContext = SP.ClientContext.get_current();\n        var navigation = clientContext.get_web().get_navigation();\n        return new Promise(function (resolve, reject) {\n            _this.ConfigureQuickLaunch(object.QuickLaunch, clientContext, _this.httpClient, navigation).then(function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                reject();\n            });\n        });\n    };\n    ObjectNavigation.prototype.getNodeFromCollectionByTitle = function (nodeCollection, title) {\n        var f = nodeCollection.filter(function (val) {\n            return val.get_title() === title;\n        });\n        return f[0] || null;\n    };\n    ;\n    ObjectNavigation.prototype.ConfigureQuickLaunch = function (nodes, clientContext, httpClient, navigation) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (nodes.length === 0) {\n                resolve();\n            }\n            else {\n                var quickLaunchNodeCollection_1 = navigation.get_quickLaunch();\n                clientContext.load(quickLaunchNodeCollection_1);\n                clientContext.executeQueryAsync(function () {\n                    var temporaryQuickLaunch = [];\n                    var index = quickLaunchNodeCollection_1.get_count() - 1;\n                    while (index >= 0) {\n                        var oldNode = quickLaunchNodeCollection_1.itemAt(index);\n                        temporaryQuickLaunch.push(oldNode);\n                        oldNode.deleteObject();\n                        index--;\n                    }\n                    clientContext.executeQueryAsync(function () {\n                        nodes.forEach(function (n) {\n                            var existingNode = _this.getNodeFromCollectionByTitle(temporaryQuickLaunch, n.Title);\n                            var newNode = new SP.NavigationNodeCreationInformation();\n                            newNode.set_title(n.Title);\n                            newNode.set_url(existingNode ? existingNode.get_url() : util_1.Util.replaceUrlTokens(n.Url));\n                            newNode.set_asLastNode(true);\n                            quickLaunchNodeCollection_1.add(newNode);\n                        });\n                        clientContext.executeQueryAsync(function () {\n                            httpClient.get(_spPageContextInfo.webAbsoluteUrl + \"/_api/web/Navigation/QuickLaunch\").then(function (response) {\n                                response.json().then(function (json) {\n                                    json.value.forEach(function (d) {\n                                        var node = navigation.getNodeById(d.Id);\n                                        var childrenNodeCollection = node.get_children();\n                                        var parentNode = nodes.filter(function (value) { return value.Title === d.Title; })[0];\n                                        if (parentNode && parentNode.Children) {\n                                            parentNode.Children.forEach(function (n) {\n                                                var existingNode = _this.getNodeFromCollectionByTitle(temporaryQuickLaunch, n.Title);\n                                                var newNode = new SP.NavigationNodeCreationInformation();\n                                                newNode.set_title(n.Title);\n                                                newNode.set_url(existingNode\n                                                    ? existingNode.get_url()\n                                                    : util_1.Util.replaceUrlTokens(n.Url));\n                                                newNode.set_asLastNode(true);\n                                                childrenNodeCollection.add(newNode);\n                                            });\n                                        }\n                                    });\n                                    clientContext.executeQueryAsync(resolve, resolve);\n                                });\n                            });\n                        }, resolve);\n                    });\n                });\n            }\n        });\n    };\n    return ObjectNavigation;\n}(ObjectHandlerBase_1.ObjectHandlerBase));\nexports.ObjectNavigation = ObjectNavigation;\n\n},{\"../util\":21,\"./ObjectHandlerBase\":13}],16:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar util_1 = require(\"../util\");\nvar ObjectHandlerBase_1 = require(\"./ObjectHandlerBase\");\nvar ObjectPropertyBagEntries = (function (_super) {\n    __extends(ObjectPropertyBagEntries, _super);\n    function ObjectPropertyBagEntries() {\n        _super.call(this, \"PropertyBagEntries\");\n    }\n    ObjectPropertyBagEntries.prototype.ProvisionObjects = function (entries) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            if (!entries || entries.length === 0) {\n                resolve();\n            }\n            else {\n                var clientContext_1 = SP.ClientContext.get_current();\n                var web_1 = clientContext_1.get_web();\n                var propBag_1 = web_1.get_allProperties();\n                var indexedProperties_1 = [];\n                for (var i = 0; i < entries.length; i++) {\n                    var entry = entries[i];\n                    propBag_1.set_item(entry.Key, entry.Value);\n                    if (entry.Indexed) {\n                        indexedProperties_1.push(util_1.Util.encodePropertyKey(entry.Key));\n                    }\n                    ;\n                }\n                ;\n                web_1.update();\n                clientContext_1.load(propBag_1);\n                clientContext_1.executeQueryAsync(function () {\n                    if (indexedProperties_1.length > 0) {\n                        propBag_1.set_item(\"vti_indexedpropertykeys\", indexedProperties_1.join(\"|\"));\n                        web_1.update();\n                        clientContext_1.executeQueryAsync(function () {\n                            _super.prototype.scope_ended.call(_this);\n                            resolve();\n                        }, function () {\n                            _super.prototype.scope_ended.call(_this);\n                            resolve();\n                        });\n                    }\n                    else {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve();\n                    }\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            }\n        });\n    };\n    return ObjectPropertyBagEntries;\n}(ObjectHandlerBase_1.ObjectHandlerBase));\nexports.ObjectPropertyBagEntries = ObjectPropertyBagEntries;\n\n},{\"../util\":21,\"./ObjectHandlerBase\":13}],17:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar ObjectHandlerBase_1 = require(\"./ObjectHandlerBase\");\nvar ObjectWebSettings = (function (_super) {\n    __extends(ObjectWebSettings, _super);\n    function ObjectWebSettings() {\n        _super.call(this, \"WebSettings\");\n    }\n    ObjectWebSettings.prototype.ProvisionObjects = function (object) {\n        var _this = this;\n        _super.prototype.scope_started.call(this);\n        return new Promise(function (resolve, reject) {\n            var clientContext = SP.ClientContext.get_current();\n            var web = clientContext.get_web();\n            if (object.WelcomePage) {\n                web.get_rootFolder().set_welcomePage(object.WelcomePage);\n                web.get_rootFolder().update();\n            }\n            if (object.MasterUrl) {\n                web.set_masterUrl(object.MasterUrl);\n            }\n            if (object.CustomMasterUrl) {\n                web.set_customMasterUrl(object.CustomMasterUrl);\n            }\n            if (object.SaveSiteAsTemplateEnabled !== undefined) {\n                web.set_saveSiteAsTemplateEnabled(object.SaveSiteAsTemplateEnabled);\n            }\n            if (object.QuickLaunchEnabled !== undefined) {\n                web.set_saveSiteAsTemplateEnabled(object.QuickLaunchEnabled);\n            }\n            if (object.TreeViewEnabled !== undefined) {\n                web.set_treeViewEnabled(object.TreeViewEnabled);\n            }\n            web.update();\n            clientContext.load(web);\n            clientContext.executeQueryAsync(function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            }, function () {\n                _super.prototype.scope_ended.call(_this);\n                resolve();\n            });\n        });\n    };\n    return ObjectWebSettings;\n}(ObjectHandlerBase_1.ObjectHandlerBase));\nexports.ObjectWebSettings = ObjectWebSettings;\n\n},{\"./ObjectHandlerBase\":13}],18:[function(require,module,exports){\n\"use strict\";\nvar ProvisioningStep = (function () {\n    function ProvisioningStep(name, index, objects, parameters, handler) {\n        this.name = name;\n        this.index = index;\n        this.objects = objects;\n        this.parameters = parameters;\n        this.handler = handler;\n    }\n    ProvisioningStep.prototype.execute = function (dependentPromise) {\n        var _this = this;\n        var _handler = new this.handler();\n        if (!dependentPromise) {\n            return _handler.ProvisionObjects(this.objects, this.parameters);\n        }\n        return new Promise(function (resolve, reject) {\n            dependentPromise.then(function () {\n                return _handler.ProvisionObjects(_this.objects, _this.parameters).then(resolve, resolve);\n            });\n        });\n    };\n    return ProvisioningStep;\n}());\nexports.ProvisioningStep = ProvisioningStep;\n\n},{}],19:[function(require,module,exports){\n\"use strict\";\nvar Sequencer = (function () {\n    function Sequencer(functions, parameter, scope) {\n        this.functions = functions;\n        this.parameter = parameter;\n        this.scope = scope;\n    }\n    Sequencer.prototype.execute = function (progressFunction) {\n        var promiseSequence = Promise.resolve();\n        this.functions.forEach(function (sequenceFunction, functionNr) {\n            promiseSequence = promiseSequence.then(function () {\n                return sequenceFunction.call(this.scope, this.parameter);\n            }).then(function (result) {\n                if (progressFunction) {\n                    progressFunction.call(this, functionNr, this.functions);\n                }\n            });\n        }, this);\n        return promiseSequence;\n    };\n    return Sequencer;\n}());\nexports.Sequencer = Sequencer;\n\n},{}],20:[function(require,module,exports){\n\"use strict\";\nvar ProvisioningStep_1 = require(\"./ProvisioningStep\");\nvar ObjectNavigation_1 = require(\"./ObjectHandlers/ObjectNavigation\");\nvar ObjectPropertyBagEntries_1 = require(\"./ObjectHandlers/ObjectPropertyBagEntries\");\nvar ObjectFeatures_1 = require(\"./ObjectHandlers/ObjectFeatures\");\nvar ObjectWebSettings_1 = require(\"./ObjectHandlers/ObjectWebSettings\");\nvar ObjectComposedLook_1 = require(\"./ObjectHandlers/ObjectComposedLook\");\nvar ObjectCustomActions_1 = require(\"./ObjectHandlers/ObjectCustomActions\");\nvar ObjectFiles_1 = require(\"./ObjectHandlers/ObjectFiles\");\nvar ObjectLists_1 = require(\"./ObjectHandlers/ObjectLists\");\nvar util_1 = require(\"./util\");\nvar logging_1 = require(\"../../utils/logging\");\nvar HttpClient_1 = require(\"../../net/HttpClient\");\nvar Provisioning = (function () {\n    function Provisioning() {\n        this.handlers = {\n            \"Navigation\": ObjectNavigation_1.ObjectNavigation,\n            \"PropertyBagEntries\": ObjectPropertyBagEntries_1.ObjectPropertyBagEntries,\n            \"Features\": ObjectFeatures_1.ObjectFeatures,\n            \"WebSettings\": ObjectWebSettings_1.ObjectWebSettings,\n            \"ComposedLook\": ObjectComposedLook_1.ObjectComposedLook,\n            \"CustomActions\": ObjectCustomActions_1.ObjectCustomActions,\n            \"Files\": ObjectFiles_1.ObjectFiles,\n            \"Lists\": ObjectLists_1.ObjectLists,\n        };\n        this.httpClient = new HttpClient_1.HttpClient();\n    }\n    Provisioning.prototype.applyTemplate = function (path) {\n        var _this = this;\n        var url = util_1.Util.replaceUrlTokens(path);\n        return new Promise(function (resolve, reject) {\n            _this.httpClient.get(url).then(function (response) {\n                if (response.ok) {\n                    response.json().then(function (template) {\n                        _this.start(template, Object.keys(template)).then(resolve, reject);\n                    });\n                }\n                else {\n                    reject(response.statusText);\n                }\n            }, function (error) {\n                logging_1.Logger.write(\"Provisioning: The provided template is invalid\", logging_1.Logger.LogLevel.Error);\n            });\n        });\n    };\n    Provisioning.prototype.start = function (json, queue) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.startTime = new Date().getTime();\n            _this.queueItems = [];\n            queue.forEach(function (q, index) {\n                if (!_this.handlers[q]) {\n                    return;\n                }\n                _this.queueItems.push(new ProvisioningStep_1.ProvisioningStep(q, index, json[q], json.Parameters, _this.handlers[q]));\n            });\n            var promises = [];\n            promises.push(new Promise(function (res) {\n                logging_1.Logger.write(\"Provisioning: Code execution scope started\", logging_1.Logger.LogLevel.Info);\n                res();\n            }));\n            var index = 1;\n            while (_this.queueItems[index - 1] !== undefined) {\n                var i = promises.length - 1;\n                promises.push(_this.queueItems[index - 1].execute(promises[i]));\n                index++;\n            }\n            ;\n            Promise.all(promises).then(function (value) {\n                logging_1.Logger.write(\"Provisioning: Code execution scope ended\", logging_1.Logger.LogLevel.Info);\n                resolve(value);\n            }, function (error) {\n                logging_1.Logger.write(\"Provisioning: Code execution scope ended\" + JSON.stringify(error), logging_1.Logger.LogLevel.Error);\n                reject(error);\n            });\n        });\n    };\n    return Provisioning;\n}());\nexports.Provisioning = Provisioning;\n\n},{\"../../net/HttpClient\":3,\"../../utils/logging\":23,\"./ObjectHandlers/ObjectComposedLook\":9,\"./ObjectHandlers/ObjectCustomActions\":10,\"./ObjectHandlers/ObjectFeatures\":11,\"./ObjectHandlers/ObjectFiles\":12,\"./ObjectHandlers/ObjectLists\":14,\"./ObjectHandlers/ObjectNavigation\":15,\"./ObjectHandlers/ObjectPropertyBagEntries\":16,\"./ObjectHandlers/ObjectWebSettings\":17,\"./ProvisioningStep\":18,\"./util\":21}],21:[function(require,module,exports){\n\"use strict\";\nvar Util = (function () {\n    function Util() {\n    }\n    Util.getRelativeUrl = function (url) {\n        return url.replace(document.location.protocol + \"//\" + document.location.hostname, \"\");\n    };\n    Util.replaceUrlTokens = function (url) {\n        return url.replace(/{site}/g, _spPageContextInfo.webAbsoluteUrl)\n            .replace(/{sitecollection}/g, _spPageContextInfo.siteAbsoluteUrl)\n            .replace(/{themegallery}/g, _spPageContextInfo.siteAbsoluteUrl + \"/_catalogs/theme/15\");\n    };\n    ;\n    Util.encodePropertyKey = function (propKey) {\n        var bytes = [];\n        for (var i = 0; i < propKey.length; ++i) {\n            bytes.push(propKey.charCodeAt(i));\n            bytes.push(0);\n        }\n        var b64encoded = window.btoa(String.fromCharCode.apply(null, bytes));\n        return b64encoded;\n    };\n    return Util;\n}());\nexports.Util = Util;\n\n},{}],22:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar util_1 = require(\"../../utils/util\");\nvar logging_1 = require(\"../../utils/logging\");\nvar httpclient_1 = require(\"../../net/httpclient\");\nvar pnplibconfig_1 = require(\"../../configuration/pnplibconfig\");\nfunction extractOdataId(candidate) {\n    if (candidate.hasOwnProperty(\"odata.id\")) {\n        return candidate[\"odata.id\"];\n    }\n    else if (candidate.hasOwnProperty(\"__metadata\") && candidate.__metadata.hasOwnProperty(\"id\")) {\n        return candidate.__metadata.id;\n    }\n    else {\n        logging_1.Logger.log({\n            data: candidate,\n            level: logging_1.Logger.LogLevel.Error,\n            message: \"Could not extract odata id in object, you may be using nometadata. Object data logged to logger.\",\n        });\n        throw new Error(\"Could not extract odata id in object, you may be using nometadata. Object data logged to logger.\");\n    }\n}\nexports.extractOdataId = extractOdataId;\nvar ODataParserBase = (function () {\n    function ODataParserBase() {\n    }\n    ODataParserBase.prototype.parse = function (r) {\n        return r.json().then(function (json) {\n            var result = json;\n            if (json.hasOwnProperty(\"d\")) {\n                if (json.d.hasOwnProperty(\"results\")) {\n                    result = json.d.results;\n                }\n                else {\n                    result = json.d;\n                }\n            }\n            else if (json.hasOwnProperty(\"value\")) {\n                result = json.value;\n            }\n            return result;\n        });\n    };\n    return ODataParserBase;\n}());\nexports.ODataParserBase = ODataParserBase;\nvar ODataDefaultParser = (function (_super) {\n    __extends(ODataDefaultParser, _super);\n    function ODataDefaultParser() {\n        _super.apply(this, arguments);\n    }\n    return ODataDefaultParser;\n}(ODataParserBase));\nexports.ODataDefaultParser = ODataDefaultParser;\nvar ODataRawParserImpl = (function () {\n    function ODataRawParserImpl() {\n    }\n    ODataRawParserImpl.prototype.parse = function (r) {\n        return r.json();\n    };\n    return ODataRawParserImpl;\n}());\nexports.ODataRawParserImpl = ODataRawParserImpl;\nvar ODataValueParserImpl = (function (_super) {\n    __extends(ODataValueParserImpl, _super);\n    function ODataValueParserImpl() {\n        _super.apply(this, arguments);\n    }\n    ODataValueParserImpl.prototype.parse = function (r) {\n        return _super.prototype.parse.call(this, r).then(function (d) { return d; });\n    };\n    return ODataValueParserImpl;\n}(ODataParserBase));\nvar ODataEntityParserImpl = (function (_super) {\n    __extends(ODataEntityParserImpl, _super);\n    function ODataEntityParserImpl(factory) {\n        _super.call(this);\n        this.factory = factory;\n    }\n    ODataEntityParserImpl.prototype.parse = function (r) {\n        var _this = this;\n        return _super.prototype.parse.call(this, r).then(function (d) {\n            var o = new _this.factory(getEntityUrl(d), null);\n            return util_1.Util.extend(o, d);\n        });\n    };\n    return ODataEntityParserImpl;\n}(ODataParserBase));\nvar ODataEntityArrayParserImpl = (function (_super) {\n    __extends(ODataEntityArrayParserImpl, _super);\n    function ODataEntityArrayParserImpl(factory) {\n        _super.call(this);\n        this.factory = factory;\n    }\n    ODataEntityArrayParserImpl.prototype.parse = function (r) {\n        var _this = this;\n        return _super.prototype.parse.call(this, r).then(function (d) {\n            return d.map(function (v) {\n                var o = new _this.factory(getEntityUrl(v), null);\n                return util_1.Util.extend(o, v);\n            });\n        });\n    };\n    return ODataEntityArrayParserImpl;\n}(ODataParserBase));\nfunction getEntityUrl(entity) {\n    if (entity.hasOwnProperty(\"__metadata\")) {\n        return entity.__metadata.uri;\n    }\n    else if (entity.hasOwnProperty(\"odata.editLink\")) {\n        return util_1.Util.combinePaths(\"_api\", entity[\"odata.editLink\"]);\n    }\n    else {\n        logging_1.Logger.write(\"No uri information found in ODataEntity parsing, chaining will fail for this object.\", logging_1.Logger.LogLevel.Warning);\n        return \"\";\n    }\n}\nexports.ODataRaw = new ODataRawParserImpl();\nfunction ODataValue() {\n    return new ODataValueParserImpl();\n}\nexports.ODataValue = ODataValue;\nfunction ODataEntity(factory) {\n    return new ODataEntityParserImpl(factory);\n}\nexports.ODataEntity = ODataEntity;\nfunction ODataEntityArray(factory) {\n    return new ODataEntityArrayParserImpl(factory);\n}\nexports.ODataEntityArray = ODataEntityArray;\nvar ODataBatch = (function () {\n    function ODataBatch(_batchId) {\n        if (_batchId === void 0) { _batchId = util_1.Util.getGUID(); }\n        this._batchId = _batchId;\n        this._requests = [];\n        this._batchDepCount = 0;\n    }\n    ODataBatch.prototype.add = function (url, method, options, parser) {\n        var info = {\n            method: method.toUpperCase(),\n            options: options,\n            parser: parser,\n            reject: null,\n            resolve: null,\n            url: url,\n        };\n        var p = new Promise(function (resolve, reject) {\n            info.resolve = resolve;\n            info.reject = reject;\n        });\n        this._requests.push(info);\n        return p;\n    };\n    ODataBatch.prototype.incrementBatchDep = function () {\n        this._batchDepCount++;\n    };\n    ODataBatch.prototype.decrementBatchDep = function () {\n        this._batchDepCount--;\n    };\n    ODataBatch.prototype.execute = function () {\n        var _this = this;\n        if (this._batchDepCount > 0) {\n            setTimeout(function () { return _this.execute(); }, 100);\n        }\n        else {\n            this.executeImpl();\n        }\n    };\n    ODataBatch.prototype.executeImpl = function () {\n        var _this = this;\n        if (this._requests.length < 1) {\n            return;\n        }\n        var batchBody = [];\n        var currentChangeSetId = \"\";\n        this._requests.forEach(function (reqInfo, index) {\n            if (reqInfo.method === \"GET\") {\n                if (currentChangeSetId.length > 0) {\n                    batchBody.push(\"--changeset_\" + currentChangeSetId + \"--\\n\\n\");\n                    currentChangeSetId = \"\";\n                }\n                batchBody.push(\"--batch_\" + _this._batchId + \"\\n\");\n            }\n            else {\n                if (currentChangeSetId.length < 1) {\n                    currentChangeSetId = util_1.Util.getGUID();\n                    batchBody.push(\"--batch_\" + _this._batchId + \"\\n\");\n                    batchBody.push(\"Content-Type: multipart/mixed; boundary=\\\"changeset_\" + currentChangeSetId + \"\\\"\\n\\n\");\n                }\n                batchBody.push(\"--changeset_\" + currentChangeSetId + \"\\n\");\n            }\n            batchBody.push(\"Content-Type: application/http\\n\");\n            batchBody.push(\"Content-Transfer-Encoding: binary\\n\\n\");\n            var headers = {\n                \"Accept\": \"application/json;\",\n            };\n            if (reqInfo.method !== \"GET\") {\n                var method = reqInfo.method;\n                if (reqInfo.options && reqInfo.options.headers && reqInfo.options.headers[\"X-HTTP-Method\"] !== typeof undefined) {\n                    method = reqInfo.options.headers[\"X-HTTP-Method\"];\n                    delete reqInfo.options.headers[\"X-HTTP-Method\"];\n                }\n                batchBody.push(method + \" \" + reqInfo.url + \" HTTP/1.1\\n\");\n                headers = util_1.Util.extend(headers, { \"Content-Type\": \"application/json;odata=verbose;charset=utf-8\" });\n            }\n            else {\n                batchBody.push(reqInfo.method + \" \" + reqInfo.url + \" HTTP/1.1\\n\");\n            }\n            if (typeof pnplibconfig_1.RuntimeConfig.headers !== \"undefined\") {\n                headers = util_1.Util.extend(headers, pnplibconfig_1.RuntimeConfig.headers);\n            }\n            if (reqInfo.options && reqInfo.options.headers) {\n                headers = util_1.Util.extend(headers, reqInfo.options.headers);\n            }\n            for (var name_1 in headers) {\n                if (headers.hasOwnProperty(name_1)) {\n                    batchBody.push(name_1 + \": \" + headers[name_1] + \"\\n\");\n                }\n            }\n            batchBody.push(\"\\n\");\n            if (reqInfo.options.body) {\n                batchBody.push(reqInfo.options.body + \"\\n\\n\");\n            }\n        });\n        if (currentChangeSetId.length > 0) {\n            batchBody.push(\"--changeset_\" + currentChangeSetId + \"--\\n\\n\");\n            currentChangeSetId = \"\";\n        }\n        batchBody.push(\"--batch_\" + this._batchId + \"--\\n\");\n        var batchHeaders = new Headers();\n        batchHeaders.append(\"Content-Type\", \"multipart/mixed; boundary=batch_\" + this._batchId);\n        var batchOptions = {\n            \"body\": batchBody.join(\"\"),\n            \"headers\": batchHeaders,\n        };\n        var client = new httpclient_1.HttpClient();\n        client.post(util_1.Util.makeUrlAbsolute(\"/_api/$batch\"), batchOptions)\n            .then(function (r) { return r.text(); })\n            .then(this._parseResponse)\n            .then(function (responses) {\n            if (responses.length !== _this._requests.length) {\n                throw new Error(\"Could not properly parse responses to match requests in batch.\");\n            }\n            for (var i = 0; i < responses.length; i++) {\n                var request = _this._requests[i];\n                var response = responses[i];\n                if (!response.ok) {\n                    request.reject(new Error(response.statusText));\n                }\n                request.parser.parse(response).then(request.resolve).catch(request.reject);\n            }\n        });\n    };\n    ODataBatch.prototype._parseResponse = function (body) {\n        return new Promise(function (resolve, reject) {\n            var responses = [];\n            var header = \"--batchresponse_\";\n            var statusRegExp = new RegExp(\"^HTTP/[0-9.]+ +([0-9]+) +(.*)\", \"i\");\n            var lines = body.split(\"\\n\");\n            var state = \"batch\";\n            var status;\n            var statusText;\n            for (var i = 0; i < lines.length; ++i) {\n                var line = lines[i];\n                switch (state) {\n                    case \"batch\":\n                        if (line.substr(0, header.length) === header) {\n                            state = \"batchHeaders\";\n                        }\n                        else {\n                            if (line.trim() !== \"\") {\n                                throw new Error(\"Invalid response, line \" + i);\n                            }\n                        }\n                        break;\n                    case \"batchHeaders\":\n                        if (line.trim() === \"\") {\n                            state = \"status\";\n                        }\n                        break;\n                    case \"status\":\n                        var parts = statusRegExp.exec(line);\n                        if (parts.length !== 3) {\n                            throw new Error(\"Invalid status, line \" + i);\n                        }\n                        status = parseInt(parts[1], 10);\n                        statusText = parts[2];\n                        state = \"statusHeaders\";\n                        break;\n                    case \"statusHeaders\":\n                        if (line.trim() === \"\") {\n                            state = \"body\";\n                        }\n                        break;\n                    case \"body\":\n                        var response = void 0;\n                        if (status === 204) {\n                            response = new Response();\n                        }\n                        else {\n                            response = new Response(line, { status: status, statusText: statusText });\n                        }\n                        responses.push(response);\n                        state = \"batch\";\n                        break;\n                }\n            }\n            if (state !== \"status\") {\n                reject(new Error(\"Unexpected end of input\"));\n            }\n            resolve(responses);\n        });\n    };\n    return ODataBatch;\n}());\nexports.ODataBatch = ODataBatch;\n\n},{\"../../configuration/pnplibconfig\":2,\"../../net/httpclient\":6,\"../../utils/logging\":23,\"../../utils/util\":24}],23:[function(require,module,exports){\n\"use strict\";\nvar Logger = (function () {\n    function Logger() {\n    }\n    Object.defineProperty(Logger, \"activeLogLevel\", {\n        get: function () {\n            return Logger.instance.activeLogLevel;\n        },\n        set: function (value) {\n            Logger.instance.activeLogLevel = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Logger, \"instance\", {\n        get: function () {\n            if (typeof Logger._instance === \"undefined\" || Logger._instance === null) {\n                Logger._instance = new LoggerImpl();\n            }\n            return Logger._instance;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Logger.subscribe = function () {\n        var listeners = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            listeners[_i - 0] = arguments[_i];\n        }\n        for (var i = 0; i < listeners.length; i++) {\n            Logger.instance.subscribe(listeners[i]);\n        }\n    };\n    Logger.clearSubscribers = function () {\n        return Logger.instance.clearSubscribers();\n    };\n    Object.defineProperty(Logger, \"count\", {\n        get: function () {\n            return Logger.instance.count;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Logger.write = function (message, level) {\n        if (level === void 0) { level = Logger.LogLevel.Verbose; }\n        Logger.instance.log({ level: level, message: message });\n    };\n    Logger.log = function (entry) {\n        Logger.instance.log(entry);\n    };\n    Logger.measure = function (name, f) {\n        return Logger.instance.measure(name, f);\n    };\n    return Logger;\n}());\nexports.Logger = Logger;\nvar LoggerImpl = (function () {\n    function LoggerImpl(activeLogLevel, subscribers) {\n        if (activeLogLevel === void 0) { activeLogLevel = Logger.LogLevel.Warning; }\n        if (subscribers === void 0) { subscribers = []; }\n        this.activeLogLevel = activeLogLevel;\n        this.subscribers = subscribers;\n    }\n    LoggerImpl.prototype.subscribe = function (listener) {\n        this.subscribers.push(listener);\n    };\n    LoggerImpl.prototype.clearSubscribers = function () {\n        var s = this.subscribers.slice(0);\n        this.subscribers.length = 0;\n        return s;\n    };\n    Object.defineProperty(LoggerImpl.prototype, \"count\", {\n        get: function () {\n            return this.subscribers.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LoggerImpl.prototype.write = function (message, level) {\n        if (level === void 0) { level = Logger.LogLevel.Verbose; }\n        this.log({ level: level, message: message });\n    };\n    LoggerImpl.prototype.log = function (entry) {\n        if (typeof entry === \"undefined\" || entry.level < this.activeLogLevel) {\n            return;\n        }\n        for (var i = 0; i < this.subscribers.length; i++) {\n            this.subscribers[i].log(entry);\n        }\n    };\n    LoggerImpl.prototype.measure = function (name, f) {\n        console.profile(name);\n        try {\n            return f();\n        }\n        finally {\n            console.profileEnd();\n        }\n    };\n    return LoggerImpl;\n}());\nvar Logger;\n(function (Logger) {\n    (function (LogLevel) {\n        LogLevel[LogLevel[\"Verbose\"] = 0] = \"Verbose\";\n        LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\n        LogLevel[LogLevel[\"Warning\"] = 2] = \"Warning\";\n        LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\n        LogLevel[LogLevel[\"Off\"] = 99] = \"Off\";\n    })(Logger.LogLevel || (Logger.LogLevel = {}));\n    var LogLevel = Logger.LogLevel;\n    var ConsoleListener = (function () {\n        function ConsoleListener() {\n        }\n        ConsoleListener.prototype.log = function (entry) {\n            var msg = this.format(entry);\n            switch (entry.level) {\n                case LogLevel.Verbose:\n                case LogLevel.Info:\n                    console.log(msg);\n                    break;\n                case LogLevel.Warning:\n                    console.warn(msg);\n                    break;\n                case LogLevel.Error:\n                    console.error(msg);\n                    break;\n            }\n        };\n        ConsoleListener.prototype.format = function (entry) {\n            return \"Message: \" + entry.message + \". Data: \" + JSON.stringify(entry.data);\n        };\n        return ConsoleListener;\n    }());\n    Logger.ConsoleListener = ConsoleListener;\n    var AzureInsightsListener = (function () {\n        function AzureInsightsListener(azureInsightsInstrumentationKey) {\n            this.azureInsightsInstrumentationKey = azureInsightsInstrumentationKey;\n            var appInsights = window[\"appInsights\"] || function (config) {\n                function r(config) {\n                    t[config] = function () {\n                        var i = arguments;\n                        t.queue.push(function () { t[config].apply(t, i); });\n                    };\n                }\n                var t = { config: config }, u = document, e = window, o = \"script\", s = u.createElement(o), i, f;\n                for (s.src = config.url || \"//az416426.vo.msecnd.net/scripts/a/ai.0.js\", u.getElementsByTagName(o)[0].parentNode.appendChild(s), t.cookie = u.cookie, t.queue = [], i = [\"Event\", \"Exception\", \"Metric\", \"PageView\", \"Trace\"]; i.length;) {\n                    r(\"track\" + i.pop());\n                }\n                return r(\"setAuthenticatedUserContext\"), r(\"clearAuthenticatedUserContext\"), config.disableExceptionTracking || (i = \"onerror\", r(\"_\" + i), f = e[i], e[i] = function (config, r, u, e, o) {\n                    var s = f && f(config, r, u, e, o);\n                    return s !== !0 && t[\"_\" + i](config, r, u, e, o), s;\n                }), t;\n            }({\n                instrumentationKey: this.azureInsightsInstrumentationKey\n            });\n            window[\"appInsights\"] = appInsights;\n        }\n        AzureInsightsListener.prototype.log = function (entry) {\n            var ai = window[\"appInsights\"];\n            var msg = this.format(entry);\n            if (entry.level === LogLevel.Error) {\n                ai.trackException(msg);\n            }\n            else {\n                ai.trackEvent(msg);\n            }\n        };\n        AzureInsightsListener.prototype.format = function (entry) {\n            return \"Message: \" + entry.message + \". Data: \" + JSON.stringify(entry.data);\n        };\n        return AzureInsightsListener;\n    }());\n    Logger.AzureInsightsListener = AzureInsightsListener;\n    var FunctionListener = (function () {\n        function FunctionListener(method) {\n            this.method = method;\n        }\n        FunctionListener.prototype.log = function (entry) {\n            this.method(entry);\n        };\n        return FunctionListener;\n    }());\n    Logger.FunctionListener = FunctionListener;\n})(Logger = exports.Logger || (exports.Logger = {}));\n\n},{}],24:[function(require,module,exports){\n(function (global){\n\"use strict\";\nvar Util = (function () {\n    function Util() {\n    }\n    Util.getCtxCallback = function (context, method) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        return function () {\n            method.apply(context, params);\n        };\n    };\n    Util.urlParamExists = function (name) {\n        name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n        var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n        return regex.test(location.search);\n    };\n    Util.getUrlParamByName = function (name) {\n        name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n        var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n        var results = regex.exec(location.search);\n        return results == null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n    };\n    Util.getUrlParamBoolByName = function (name) {\n        var p = this.getUrlParamByName(name);\n        var isFalse = (p === \"\" || /false|0/i.test(p));\n        return !isFalse;\n    };\n    Util.stringInsert = function (target, index, s) {\n        if (index > 0) {\n            return target.substring(0, index) + s + target.substring(index, target.length);\n        }\n        return s + target;\n    };\n    Util.dateAdd = function (date, interval, units) {\n        var ret = new Date(date.toLocaleString());\n        switch (interval.toLowerCase()) {\n            case \"year\":\n                ret.setFullYear(ret.getFullYear() + units);\n                break;\n            case \"quarter\":\n                ret.setMonth(ret.getMonth() + 3 * units);\n                break;\n            case \"month\":\n                ret.setMonth(ret.getMonth() + units);\n                break;\n            case \"week\":\n                ret.setDate(ret.getDate() + 7 * units);\n                break;\n            case \"day\":\n                ret.setDate(ret.getDate() + units);\n                break;\n            case \"hour\":\n                ret.setTime(ret.getTime() + units * 3600000);\n                break;\n            case \"minute\":\n                ret.setTime(ret.getTime() + units * 60000);\n                break;\n            case \"second\":\n                ret.setTime(ret.getTime() + units * 1000);\n                break;\n            default:\n                ret = undefined;\n                break;\n        }\n        return ret;\n    };\n    Util.loadStylesheet = function (path, avoidCache) {\n        if (avoidCache) {\n            path += \"?\" + encodeURIComponent((new Date()).getTime().toString());\n        }\n        var head = document.getElementsByTagName(\"head\");\n        if (head.length > 0) {\n            var e = document.createElement(\"link\");\n            head[0].appendChild(e);\n            e.setAttribute(\"type\", \"text/css\");\n            e.setAttribute(\"rel\", \"stylesheet\");\n            e.setAttribute(\"href\", path);\n        }\n    };\n    Util.combinePaths = function () {\n        var paths = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            paths[_i - 0] = arguments[_i];\n        }\n        var parts = [];\n        for (var i = 0; i < paths.length; i++) {\n            if (typeof paths[i] !== \"undefined\" && paths[i] !== null) {\n                parts.push(paths[i].replace(/^[\\\\|\\/]/, \"\").replace(/[\\\\|\\/]$/, \"\"));\n            }\n        }\n        return parts.join(\"/\").replace(/\\\\/, \"/\");\n    };\n    Util.getRandomString = function (chars) {\n        var text = \"\";\n        var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n        for (var i = 0; i < chars; i++) {\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\n        }\n        return text;\n    };\n    Util.getGUID = function () {\n        var d = new Date().getTime();\n        var guid = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n            var r = (d + Math.random() * 16) % 16 | 0;\n            d = Math.floor(d / 16);\n            return (c === \"x\" ? r : (r & 0x3 | 0x8)).toString(16);\n        });\n        return guid;\n    };\n    Util.isFunction = function (candidateFunction) {\n        return typeof candidateFunction === \"function\";\n    };\n    Util.isArray = function (array) {\n        if (Array.isArray) {\n            return Array.isArray(array);\n        }\n        return array && typeof array.length === \"number\" && array.constructor === Array;\n    };\n    Util.stringIsNullOrEmpty = function (s) {\n        return typeof s === \"undefined\" || s === null || s === \"\";\n    };\n    Util.extend = function (target, source, noOverwrite) {\n        if (noOverwrite === void 0) { noOverwrite = false; }\n        var result = {};\n        for (var id in target) {\n            result[id] = target[id];\n        }\n        var check = noOverwrite ? function (o, i) { return !o.hasOwnProperty(i); } : function (o, i) { return true; };\n        for (var id in source) {\n            if (check(result, id)) {\n                result[id] = source[id];\n            }\n        }\n        return result;\n    };\n    Util.applyMixins = function (derivedCtor) {\n        var baseCtors = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            baseCtors[_i - 1] = arguments[_i];\n        }\n        baseCtors.forEach(function (baseCtor) {\n            Object.getOwnPropertyNames(baseCtor.prototype).forEach(function (name) {\n                derivedCtor.prototype[name] = baseCtor.prototype[name];\n            });\n        });\n    };\n    Util.isUrlAbsolute = function (url) {\n        return /^https?:\\/\\/|^\\/\\//i.test(url);\n    };\n    Util.makeUrlAbsolute = function (url) {\n        if (Util.isUrlAbsolute(url)) {\n            return url;\n        }\n        if (typeof global._spPageContextInfo !== \"undefined\") {\n            if (global._spPageContextInfo.hasOwnProperty(\"webAbsoluteUrl\")) {\n                return Util.combinePaths(global._spPageContextInfo.webAbsoluteUrl, url);\n            }\n            else if (global._spPageContextInfo.hasOwnProperty(\"webServerRelativeUrl\")) {\n                return Util.combinePaths(global._spPageContextInfo.webServerRelativeUrl, url);\n            }\n        }\n        else {\n            return url;\n        }\n    };\n    return Util;\n}());\nexports.Util = Util;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}]},{},[20])(20)\n});"],"sourceRoot":"/source/"}