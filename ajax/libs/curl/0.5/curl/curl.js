(function(p,y,k){function l(a,b){return N.call(a).indexOf("[object "+b)==0}function O(a,b){l(a,"String")&&(a={path:n(a),main:D.e,lib:D.d});a.path=a.path||(isNaN(b)?b:a.name);a.d="lib"in a&&n(o(a.lib,a.path));a.e="main"in a&&n(o(a.main,a.path));return a}function E(a){var b,c,d,e=[];t=a.baseUrl||"";if(a.debug)u=!0,j.cache=g,j.cfg=a,j.undefine=function(a){delete g[a]};var f=a.paths;for(b in f)c=n(b),d=r[c]={path:n(f[b])},d.i=(d.path.match(F)||[]).length,e.push(c);f=a.packages;for(b in f)c=n(f[b].name||
b),d=r[c]=O(f[b],c),d.i=(d.path.match(F)||[]).length,e.push(c);G=RegExp("^("+e.sort(function(a,b){return r[a].i<r[b].i}).join("|").replace(/\//g,"\\/")+")(?=\\/|$)");m=a.pluginPath||m}function P(){}function z(a){function b(a,b){return Q(a,b||P,e)}function c(a){return A(v(o(a,d)),t)}var d=a.substr(0,a.lastIndexOf("/")),e={baseName:d},f={};e.c={h:f,o:{id:o(a,d),uri:c(a),h:f}};u&&(b.curl=j);e.f=e.c.f=b;b.toUrl=c;return e}function B(){function a(a,b){f.push([a,b])}function b(a){d(!0,a)}function c(a){d(!1,
a)}function d(d,e){a=d?function(a){a&&a(e)}:function(a,b){b&&b(e)};b=c=function(){throw Error("Promise already completed.");};for(var i,g=0;i=f[g++];)(i=i[d?0:1])&&i(e)}var e=this,f=[];this.b=function(b,c){a(b,c)};this.g=function(a){e.m=a;b(a)};this.a=function(a){e.p=a;c(a)}}function w(a){B.apply(this);this.name=a}function n(a){return a.charAt(a.length-1)=="/"?a.substr(0,a.length-1):a}function v(a){var b;return a.replace(G,function(c){b=r[c]||{};return b.e&&c==a?b.e:b.d?b.d:b.path})}function A(a,
b){return(b&&!R.test(a)?(!b||b.charAt(b.length-1)=="/"?b:b+"/")+a:a)+(S.test(a)?"":".js")}function T(a,b,c){var d=y.createElement("script");d.type="text/javascript";d.onload=d[H]=function(c){c=c||p.event;if(c.type==="load"||U[this.readyState])delete x[a.name],this.onload=this[H]=this.onerror=null,b(d)};d.onerror=function(){c(Error("Syntax error or http error: "+a.url))};d.charset=a.charset||"utf-8";d.async=!0;d.src=a.url;x[a.name]=d;I.insertBefore(d,I.firstChild)}function V(a){var b,c,d,e,f=a.length;
d=a[f-1];e=l(d,"Function");f==2?l(a[0],"Array")?c=a[0]:b=a[0]:f==3&&(b=a[0],c=a[1]);!c&&e&&d.length>0&&(c=["require","exports","module"]);return{name:b,k:c||[],l:e?d:function(){return d}}}function J(a,b){u&&console&&console.log("curl: resolving",a.name);var c=z(a.baseName||a.name);K(b.k,c,function(d){try{var e=b.l.apply(c.c.h,d)||c.c.h;u&&console&&console.log("curl: defined",a.name,e.toString().substr(0,50).replace(/\n/," "))}catch(f){a.a(f)}a.g(e)},a.a)}function L(a){T(a,function(){var b=s;s=C;a.n!==
!1&&(b?b.j?a.a(Error(b.j.replace("${url}",a.url))):J(a,b):a.a(Error("define() not found or duplicates found: "+a.url)))},a.a)}function o(a,b){return a.replace(W,function(a,d,e){return(e?b.substr(0,b.lastIndexOf("/")):b)+"/"})}function X(a,b){var c,d,e,f;c=a.indexOf("!");if(c>=0){d=a.substr(0,c);e=o(a.substr(c+1),b.baseName);c=d+"!"+e;var q=v(d);q.indexOf("/")<0&&(q=v((!m||m.charAt(m.length-1)=="/"?m:m+"/")+q));f=g[c];if(!f){var h=g[d];if(!h)h=g[d]=new w(d),h.url=A(q,t),h.baseName=q,L(h);f=new w(c);
e&&(g[c]=f);h.b(function(a){var c=f.g;c.resolve=c;c.reject=f.a;a.load(e,b.f,c,k)},f.a)}}else if(e=c=o(a,b.baseName),f=g[e],!f)f=g[e]=new w(e),f.url=A(v(e),t),L(f);return f}function K(a,b,c,d){for(var e=[],f=a.length,g=f,h=!1,i=0;i<g&&!h;i++)(function(a,g){g in b.c?(e[a]=b.c[g],f--):X(g,b).b(function(b){e[a]=b;--f==0&&(h=!0,c(e))},function(a){h=!0;d(a)})})(i,a[i]);f==0&&!h&&c(e)}function Q(a,b,c){if(l(a,"String")){c=(c=g[a])&&c.m;if(c===C)throw Error("Module is not already resolved: "+a);return c}K(a,
c,function(a){b.g?b.g(a):b.apply(null,a)},function(a){if(b.a)b.a(a);else throw a;})}function j(){var a=Y.call(arguments),b,c;l(a[0],"Object")&&(k=a.shift(),E(k));b=a[0];a=a[1];c=z("");var d=new B,e={};e.then=function(a,b){d.b(function(b){a&&a.apply(null,b)},function(a){if(b)b(a);else throw a;});return e};e.next=function(a,b){var g=d;d=new B;g.b(function(){c.f(a,d,c)},function(a){d.a(a)});b&&d.b(function(a){b.apply(this,a)});return e};a&&e.then(a);c.f(b,d,c);return e}function M(){var a=V(arguments),
b=a.name;if(b==null)if(s!==C)s={j:"Multiple anonymous defines found in ${url}."};else{var c;if(!l(p.opera,"Opera"))for(var d in x)if(x[d].readyState=="interactive"){c=d;break}if(!(b=c))s=a}if(b!=null)(c=g[b])||(c=g[b]=new w(b)),c.n=!1,"resolved"in c||J(c,a,z(b))}var I=y.head||y.getElementsByTagName("head")[0],t,m="curl/plugin",r={},g={},s,x={},N={}.toString,C,Y=[].slice,R=/^\/|^[^:]*:\/\//,W=/^(\.)(\.)?(\/|$)/,F=/\//,S=/\.\w+$/,G,U={loaded:1,interactive:1,complete:1},H="onreadystatechange",D={e:"./lib/main",
d:"./lib"},u;l(k,"Function")||E(k);k.apiName?p[k.apiName]=j:p.curl=j;p.define=j.define=M;j.version="0.5";M.amd={plugins:!0}})(this,document,this.curl||{});
