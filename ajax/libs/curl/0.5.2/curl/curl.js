(function(v,C,g){var G,H;function l(a,b){return R.call(a).indexOf("[object "+b)==0}function S(a){function b(b){if(b in a)return b=a[b].charAt(0)!="."?(!a.path||w(a.path)?a.path:a.path+"/")+a[b]:o(a[b],a.path),p(b)}l(a,"String")&&(a=p(a),a={name:a,path:a,main:G,lib:H});a.path=a.path||"";a.h=b("lib");a.i=b("main");return a}function I(a){var b,d,c,e=[];q=a.baseUrl||"";if(a.debug)x=!0,m.cache=i,m.cfg=a,m.undefine=function(a){delete i[a]};var f=a.paths;for(b in f)d=p(b.replace("!","!/")),c=r[d]={path:p(f[b])},
c.f=(c.path.match(J)||[]).length,e.push(d);f=a.packages;for(b in f)d=p(f[b].name||b),c=r[d]=S(f[b]),c.f=(c.path.match(J)||[]).length,e.push(d);K=RegExp("^("+e.sort(function(a,b){return r[a].f<r[b].f}).join("|").replace(/\//g,"\\/")+")(?=\\/|$)");n=a.pluginPath||n}function T(){}function y(a){function b(a,b){return U(a,b||T,e)}function d(a){return z(s(o(a,c)),q)}var c=a.substr(0,a.lastIndexOf("/")),e={baseName:c},f={};e.d={exports:f,module:{id:o(a,c),uri:d(a),exports:f}};x&&(b.curl=m);e.e=e.d.require=
b;b.toUrl=d;return e}function E(){}function V(a){E.prototype=a;a=new E;E.prototype=A;return a}function F(){function a(a,b){f.push([a,b])}function b(a){c(!0,a)}function d(a){c(!1,a)}function c(c,e){a=c?function(a){a&&a(e)}:function(a,b){b&&b(e)};b=d=function(){throw Error("Promise already completed.");};for(var h,i=0;h=f[i++];)(h=h[c?0:1])&&h(e)}var e=this,f=[];this.b=function(b,c){a(b,c)};this.c=function(a){e.l=a;b(a)};this.a=function(a){e.n=a;d(a)}}function t(a){F.apply(this);this.name=a}function w(a){return a.charAt(a.length-
1)=="/"}function p(a){return w(a)?a.substr(0,a.length-1):a}function s(a,b){function d(a){e=a.replace(K,function(b){c=r[b]||{};f=!0;return c.i&&b==a?c.i:c.h?c.h:c.path||""})}var c,e,f;b&&d(b+"!/"+a);f||d(a);return e}function z(a,b,d){return(b&&!W.test(a)?(!b||w(b)?b:b+"/")+a:a)+(d&&!X.test(a)?".js":"")}function Y(a,b,d){var c=C.createElement("script");c.type="text/javascript";c.onload=c[L]=function(d){d=d||v.event;if(d.type==="load"||Z[this.readyState])delete B[a.name],this.onload=this[L]=this.onerror=
null,b(c)};c.onerror=function(){d(Error("Syntax error or http error: "+a.url))};c.charset=a.charset||"utf-8";c.async=!0;c.src=a.url;B[a.name]=c;M.insertBefore(c,M.firstChild)}function $(a){var b,d,c,e,f=a.length;c=a[f-1];e=l(c,"Function");f==2?l(a[0],"Array")?d=a[0]:b=a[0]:f==3&&(b=a[0],d=a[1]);!d&&e&&c.length>0&&(d=["require","exports","module"]);return{name:b,j:d||[],k:e?c:function(){return c}}}function N(a,b){x&&console&&console.log("curl: resolving",a.name);var d=y(a.baseName||a.name);O(b.j,d,
function(c){try{var e=b.k.apply(d.d.exports,c)||d.d.exports;x&&console&&console.log("curl: defined",a.name,e.toString().substr(0,50).replace(/\n/," "))}catch(f){a.a(f)}a.c(e)},a.a)}function P(a){Y(a,function(){var b=u;u=A;a.m!==!1&&(b?b.g?a.a(Error(b.g.replace("${url}",a.url))):N(a,b):a.a(Error("define() not found or duplicates found: "+a.url)))},a.a)}function o(a,b){return a.replace(aa,function(a,c,e){return(e?b.substr(0,b.lastIndexOf("/")):b)+"/"})}function ba(a,b){var d,c,e,f,j,D;c=a.indexOf("!");
if(c>=0){e=a.substr(0,c);f=a.substr(c+1);var h=s(e);h.indexOf("/")<0&&(h=s((!n||w(n)?n:n+"/")+h));var k=i[e];if(!k)k=i[e]=new t(e),k.url=z(h,q,!0),k.baseName=h,P(k);b=y(b.baseName);b.e.toUrl=function(a){a=s(a,e);return z(a,q)};D=V(e?g.plugins&&g.plugins[e]:g)||{};var l=function(a){return o(a,b.baseName)};j=new t(a);k.b(function(h){var g;f=a.substr(c+1);f="normalize"in h?h.normalize(f,l,D):l(f);d=e+"!"+f;g=i[d];if(!g){g=new t(d);f&&!h.dynamic&&(i[d]=g);var k=g.c;k.resolve=k;k.reject=g.a;h.load(f,b.e,
k,D)}g.b(j.c,j.a)},j.a)}else if(f=d=o(a,b.baseName),j=i[f],!j)j=i[f]=new t(f),j.url=z(s(f),q,!0),P(j);return j}function O(a,b,d,c){for(var e=[],f=a.length,j=f,g=!1,h=0;h<j&&!g;h++)(function(a,h){h in b.d?(e[a]=b.d[h],f--):ba(h,b).b(function(b){e[a]=b;--f==0&&(g=!0,d(e))},function(a){g=!0;c(a)})})(h,a[h]);f==0&&!g&&d(e)}function U(a,b,d){if(l(a,"String")){d=(d=i[a])&&d.l;if(d===A)throw Error("Module is not already resolved: "+a);return d}O(a,d,function(a){b.c?b.c(a):b.apply(null,a)},function(a){if(b.a)b.a(a);
else throw a;})}function m(){var a=ca.call(arguments),b,d;l(a[0],"Object")&&(g=a.shift(),I(g));b=[].concat(a[0]);a=a[1];d=y("");var c=new F,e={};e.then=function(a,b){c.b(function(b){a&&a.apply(null,b)},function(a){if(b)b(a);else throw a;});return e};e.next=function(a,b){var g=c;c=new F;g.b(function(){d.e(a,c,d)},function(a){c.a(a)});b&&c.b(function(a){b.apply(this,a)});return e};a&&e.then(a);d.e(b,c,d);return e}function Q(){var a=$(arguments),b=a.name;if(b==null)if(u!==A)u={g:"Multiple anonymous defines found in ${url}."};
else{var d;if(!l(v.opera,"Opera"))for(var c in B)if(B[c].readyState=="interactive"){d=c;break}if(!(b=d))u=a}if(b!=null)(d=i[b])||(d=i[b]=new t(b)),d.m=!1,"resolved"in d||N(d,a,y(b))}var M=C.head||C.getElementsByTagName("head")[0],q,n="curl/plugin",r={},i={},u,B={},R={}.toString,A,ca=[].slice,W=/^\/|^[^:]+:\/\//,aa=/^(\.)(\.)?(\/|$)/,J=/\//,X=/\?/,K,Z={loaded:1,interactive:1,complete:1},L="onreadystatechange";G="./lib/main";H="./lib";var x;l(g,"Function")||I(g);(g.apiContext||v)[g.apiName||"curl"]=
m;v.define=m.define=Q;m.version="0.5.2";Q.amd={plugins:!0}})(this,document,this.curl||{});
