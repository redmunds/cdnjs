!function(t){function e(t,e,r){this.paper.queue.push({assign:t,params:e,loaded:r})}function r(t,e){for(var r=0;r<e.length;r++)if(e[r].element.isEqualNode(t))return e[r];return!1}function i(t,e){var r=["x","y","width","height"],i={};e&&(r=e);for(var n=0;n<t.length;n++)"object"==typeof t[n]?i.style=t[n]:r.length&&(i[r.shift()]=t[n]);return i.style||(i.style={}),i.style.border&&(i.style.border=i.style.border.split(" "),i.style.border[0]=i.style.border[0].replace(/[^0-9]/g,"")),i}function n(){for(var t=0;t<document.styleSheets.length;t++){var e=document.styleSheets[t],r=e.cssRules?e.cssRules:e.rules;b.documentStyles.push(r)}}function o(t,e,r){for(var i in e)w.call(e,i)&&("constructor"===i&&t===global||(void 0===e[i]?delete t[i]:r&&"undefined"!=typeof t[i]||(t[i]=e[i])));return t}function a(t,e){for(var r=0;r<e.length;r++)if(e[r].selectorText&&e[r].selectorText.toLowerCase()===t)return e[r].style}function s(t){if(null==t||"object"!=typeof t)return t;var e=t.constructor();for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function p(t){this.paper=t}function l(t){var e=t.args,r=e.style,i=b.defaults.arc;this.paper.ctx.beginPath(),this.paper.ctx.arc(e.x,e.y,e.r||i.radius,e.sAngle||0,e.eAngle||2*Math.PI),this.paper.ctx.fillStyle=r.background||r.bg?r.background||r.bg:i.background,this.paper.ctx.fill(),this.paper.ctx.lineWidth=r.border?r.border[0]:i.lineWidth,this.paper.ctx.strokeStyle=r.border?r.border[1]:i.strokeStyle,this.paper.ctx.stroke(),this.paper.ctx.closePath()}function c(t){var e=t.image,r=t.x,i=t.y,n=t.width,o=t.height;this.paper.ctx.save(),this.paper.flip&&("horizontal"===this.paper.flip&&(this.paper.ctx.scale(-1,1),n*=-1),"vertical"===this.paper.flip&&(this.paper.ctx.scale(1,-1),o*=-1)),this.paper.ctx.beginPath(),this.paper.ctx.drawImage(e,Math.floor(r||0),Math.floor(i||0),n,o),this.paper.ctx.closePath(),this.paper.ctx.restore()}function h(t){var e=b.defaults.line,r=t.style,i=t.pointA,n=t.pointB;r.border&&(r.border=r.border.split(" "),r.border[0]=r.border[0].replace(/[^0-9]/g,"")),this.paper.ctx.beginPath(),this.paper.ctx.moveTo(i.x||0,i.y||0),this.paper.ctx.lineTo(n.x||0,n.y||0),this.paper.ctx.lineWidth=r.border?r.border[0]:e.lineWidth,this.paper.ctx.strokeStyle=r.border?r.border[1]:e.strokeStyle,this.paper.ctx.stroke(),this.paper.ctx.closePath()}function u(t){var e=t.args,r=t.style,i=b.defaults.polygon;this.paper.ctx.beginPath(),this.paper.ctx.fillStyle=r.background?r.background:i.background,this.paper.ctx.lineWidth=r.border?r.border[0]:i.lineWidth,this.paper.ctx.strokeStyle=r.border?r.border[1]:i.strokeStyle;for(var n=0;n<e.length;n++)e[n].x&&(n?this.paper.ctx.lineTo(e[n].x,e[n].y):this.paper.ctx.moveTo(e[n].x,e[n].y));this.paper.ctx.stroke(),this.paper.ctx.fill(),this.paper.ctx.closePath()}function d(t){var e=b.defaults.rect,r=t.style,i=t.args;paper.ctx.beginPath(),paper.ctx.fillStyle=r.background?r.background:e.background,paper.ctx.fillRect(i.x,i.y,i.width,i.height||i.width),paper.ctx.lineWidth=r.border?r.border[0]:e.lineWidth,paper.ctx.strokeStyle=r.border?r.border[1]:e.strokeStyle,paper.ctx.strokeRect(i.x,i.y,i.width,i.height||i.width),paper.ctx.closePath()}function f(t){var e=t.x,r=t.y,i=t.config;if(!i||!i.src)return this;var n=new Image,o=i.frames||0,a=i.loop||!0,s=i.speed||10;return n.src=i.src,n.addEventListener("load",function(){var t=n.naturalWidth,i=n.naturalHeight,p=t/o;g.call(this,{image:n,posX:0,posY:0,frame:o,loop:a,width:p,widthTotal:t,height:i,dx:e,dy:r,speed:s,animation:null})},!1),this}function g(e){if(e.posX===e.widthTotal){if(e.loop===!1)return void t.cancelAnimationFrame(e.animation);e.posX=0}this.paper.ctx.clearRect(e.dx,e.dy,e.width,e.height),this.paper.ctx.beginPath(),this.paper.ctx.drawImage(e.image,e.posX,e.posY,e.width,e.height,e.dx,e.dy,e.width,e.height),this.paper.ctx.closePath(),e.posX=e.posX+e.width,setTimeout(function(){e.animation=t.requestAnimationFrame(g.bind(this,e))},e.speed)}function x(t){var e=b.defaults.text,r=t.text,i=t.x,n=t.y,o=t.style;o||(o={}),o.border&&(o.border=o.border.split(" "),o.border[0]=o.border[0].replace(/[^0-9]/g,"")),this.paper.ctx.beginPath(),this.paper.ctx.lineWidth=o.border?o.border[0]:e.lineWidth,this.paper.ctx.strokeStyle=o.border?o.border[1]:e.strokeStyle,this.paper.ctx.font=o.font||e.font,this.paper.ctx.fillStyle=o.color||e.color,this.paper.ctx.textAlign=o.align||e.align,this.paper.ctx.fillText(r,i,n),this.paper.ctx.strokeText(r,i,n),this.paper.ctx.fill(),this.paper.ctx.stroke(),this.paper.ctx.closePath()}var y={paper:null,documentStyles:[],virtualStyles:{},contexts:[],loadingData:!1},b={defaults:{arc:{background:"rgba(0, 0, 0, 0)",strokeStyle:"rgba(0, 0, 0, 0)",lineWidth:null},rect:{background:"rgba(0, 0, 0, 0)",strokeStyle:"rgba(0, 0, 0, 0)",lineWidth:null},polygon:{background:"rgba(0, 0, 0, 0)",strokeStyle:"rgba(0, 0, 0, 0)",lineWidth:null},line:{strokeStyle:"rgba(0, 0, 0, 0)",lineWidth:null},text:{font:"14px Helvetica",strokeStyle:"rgba(0, 0, 0, 0)",color:"#000",lineWidth:null}}},m="[origami.js]";y.warning=function(t,e){console&&console.warn&&console.warn(m,t,e)},y.error=function(t){throw new Error(m.concat(" "+t))},y.init=function(t){t=t.canvas?t.canvas:document.querySelector(t),t||this.error("Please use a valid selector or canvas context");var e=r(t,this.contexts);if(e)return this.paper=e,this;t.getContext||this.error("Please verify if it's a valid canvas element");var i=t.getContext("2d"),n={element:t,queue:[],index:this.contexts.length,flip:!1,frame:null,ctx:i,width:t.width,height:t.height};return this.contexts.push(n),this.paper=n,this},y.styles=function(){this.documentStyles||n(y);var t=arguments;if(!t.length)return this;for(var e=0;e<t.length;e++){var r=a(t[e],this.documentStyles[0]||[]);y.virtualStyles[t[e]]=r}return this},y.getContexts=function(){return this.contexts},y.getPaper=function(){return this.paper},y.canvasCtx=function(){return this.paper.ctx},y.draw=function(t){var e=this,r=new p(e.paper),i=e.paper.queue;return setTimeout(function(){for(var t=0;t<i.length;t++)i[t].loaded===!1&&y.warning("couldn't able to load:",i[t].params),r[i[t].assign](i[t].params);e.paper.queue=[]},t),e},y.load=function(t){var e=s(this);e.paper=this.paper;var r=setInterval(function(){var i=e.paper.queue.filter(function(t){return t.loaded===!1});i.length||(clearInterval(r),t.bind(e,e)())},200)};var v=e.bind(y),w=Object.prototype.hasOwnProperty;p.prototype.translate=function(t){this.paper.ctx.translate(t.x,t.y)},p.prototype.background=function(t){this.paper.element.style.backgroundColor=t.color},p.prototype.restore=function(){this.paper.ctx.restore()},p.prototype.save=function(){this.paper.ctx.save()},p.prototype.composition=function(t){this.paper.ctx.globalCompositeOperation=t.globalComposite},p.prototype.rotate=function(t){this.paper.ctx.rotate(t.degrees)},p.prototype.stop=function(){t.cancelAnimationFrame(this.paper.frame),this.paper.frame=!1},p.prototype.nextFrame=function(e){this.paper.frame=t.requestAnimationFrame(e.fn)},p.prototype.scale=function(t){this.paper.ctx.scale(t.width,t.height)},p.prototype.flip=function(){this.paper.flip="horizontal",type&&"string"==typeof type&&(this.paper.flip=type)},p.prototype.flipEnd=function(){this.paper.flip=!1},p.prototype.clear=function(){this.paper.ctx.clearRect(0,0,this.paper.width,this.paper.height)},p.prototype.on=function(t){this.paper.element.addEventListener(t.ev,t.fn)},p.prototype.arc=l,y.arc=function(){var t=[].slice.call(arguments);return t=i(t,["x","y","r","sAngle","eAngle"]),v("arc",{args:t}),this},p.prototype.image=c,y.image=function(t,e,r,i,n){var o=this;if(!t)return this;if("string"==typeof t){var a=new Image;a.src=t,t=a}var s={image:t,x:e,y:r,width:i,height:n};if(t.complete)return s.width=i||t.naturalWidth,s.height=n||t.naturalHeight,v("image",s),o;v("image",s,!1);var p=o.paper.queue.length-1,l=o.contexts[this.paper.index].queue[p];return t.addEventListener("load",function(){return!!l&&(l.params.width=s.width||t.naturalWidth,l.params.height=s.height||t.naturalHeight,void(l.loaded=!0))}),o},p.prototype.line=h,y.line=function(t,e,r){return v("line",{pointA:t,pointB:e,style:r}),this},p.prototype.polygon=u,y.polygon=function(){var t=[].slice.call(arguments);return t=i(t),v("polygon",{style:t.style,args:arguments}),this},p.prototype.rect=d,y.rect=function(){var t=[].slice.call(arguments);return t=i(t),v("rect",{style:t.style,args:arguments}),this},p.prototype.sprite=f,y.sprite=function(t,e,r){return v("rect",{x:t,y:e,config:r}),this},p.prototype.text=x,y.text=function(t,e,r,i){return v("text",{text:t,x:e,y:r,style:i}),this},y.background=function(t){return v("background",{color:t}),this},y.restore=function(){return v("restore"),this},y.save=function(){return v("save"),this},y.composition=function(t){return v("composition",{globalComposite:t}),this},y.translate=function(t,e){return void 0!==t&&null!==t||(t="reset"),"string"==typeof t&&("center"===t&&(t=context.width/2,e=context.height/2),"reset"===t&&(t=-context.width/2,e=-context.height/2)),v("translate",{x:t,y:e}),this},y.rotate=function(t){return"undefined"==typeof t&&(t="slow"),"string"==typeof t&&("slow"===t?t=2*Math.PI/60*(new Date).getSeconds()+2*Math.PI/6e4*(new Date).getMilliseconds():"normal"===t?t=2*Math.PI/30*(new Date).getSeconds()+2*Math.PI/3e4*(new Date).getMilliseconds():"fast"===t&&(t=2*Math.PI/6*(new Date).getSeconds()+2*Math.PI/6e3*(new Date).getMilliseconds())),v("rotate",{degrees:t}),this},y.stop=function(){return v("stop"),this},y.nextFrame=function(t){return v("nextFrame",{fn:t}),this},y.scale=function(t,e){return v("scale",{width:t,height:e}),this},y.flip=function(t){return v("flip",{type:t}),this},y.flipEnd=function(){return v("flipEnd"),this},y.clear=function(){return v("clear"),this},y.on=function(t,e){return v("on",{ev:t,fn:e}),this},"undefined"!=typeof module&&module&&module.exports&&(module.exports=o(y.init.bind(this),y)),"undefined"!=typeof exports&&exports&&(exports.origami=o(y.init.bind(this),y)),"object"==typeof t&&(t.origami=o(y.init.bind(y),y))}(function(){return this}());
//# sourceMappingURL=origami.min.js.map