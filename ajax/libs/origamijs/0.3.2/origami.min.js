!function(a){function b(a,b){for(var c=0;c<b.length;c++)if(b[c].element.isEqualNode(a))return b[c];return!1}function c(a,b){var c=["x","y","width","height"],d=new Object;b&&(c=b);for(var e=0;e<a.length;e++)"object"==typeof a[e]?d.style=a[e]:c.length&&(d[c.shift()]=a[e]);return d.style&&d.style.border&&(d.border=d.style.border.split(" "),d.border[0]=d.style.border[0].replace(/[^0-9]/g,"")),d}function d(a){for(var b=0;b<document.styleSheets.length;b++){var c=document.styleSheets[b],d=c.cssRules?c.cssRules:c.rules;a.documentStyles.push(d)}}function e(){var a=c([].slice.call(arguments)||[],["x","y","r","sAngle","eAngle"]),b=a.style||{},d=o.defaults.arc;return p.ctx.beginPath(),p.ctx.arc(a.x,a.y,a.r||d.radius,a.sAngle||0,a.eAngle||2*Math.PI),p.ctx.fillStyle=b.background||b.bg?b.background||b.bg:d.background,p.ctx.fill(),p.ctx.lineWidth=b.border?b.border[0]:d.lineWidth,p.ctx.strokeStyle=b.border?b.border[1]:d.strokeStyle,p.ctx.stroke(),p.ctx.closePath(),this}function f(a,b,c,d,e,f,g,h,i){if(console.log(this),!a)return this;if("string"==typeof a){var j=new Image;j.src=a,a=j}return a.addEventListener("load",function(){d||(d=a.naturalWidth),e||(e=a.naturalHeight),p.ctx.save(),p.flip&&("horizontal"===p.flip&&(p.ctx.scale(-1,1),d=-1*d),"vertical"===p.flip&&(p.ctx.scale(1,-1),e=-1*e)),p.ctx.beginPath(),p.ctx.drawImage(a,Math.floor(b||0),Math.floor(c||0),d,e),p.ctx.closePath(),p.ctx.restore()},!1),this}function g(a,b,c){var d=o.defaults.line;return c.border&&(c.border=c.border.split(" "),c.border[0]=c.border[0].replace(/[^0-9]/g,"")),p.ctx.beginPath(),p.ctx.moveTo(a.x||0,a.y||0),p.ctx.lineTo(b.x||0,b.y||0),p.ctx.lineWidth=c.border?c.border[0]:d.lineWidth,p.ctx.strokeStyle=c.border?c.border[1]:d.strokeStyle,p.ctx.stroke(),p.ctx.closePath(),this}function h(){for(var a=arguments,b=c([].slice.call(a)||[]),d=[],e=b.style,f=o.defaults.polygon,g=0;g<a.length;g++)a[g].x&&a[g].y&&d.push(a[g]);p.ctx.beginPath(),p.ctx.fillStyle=e.background?e.background:f.background,p.ctx.lineWidth=e.border?e.border[0]:f.lineWidth,p.ctx.strokeStyle=e.border?e.border[1]:f.strokeStyle;for(var h=0;h<d.length;h++)h?p.ctx.lineTo(d[h].x,d[h].y):p.ctx.moveTo(d[h].x,d[h].y);return p.ctx.stroke(),p.ctx.fill(),p.ctx.closePath(),this}function i(){var a=c([].slice.call(arguments)||[]),b=a.style||{},d=o.defaults.rect;return p.ctx.beginPath(),p.ctx.fillStyle=b.background?b.background:d.background,p.ctx.fillRect(a.x,a.y,a.width,a.height||a.width),p.ctx.lineWidth=b.border?b.border[0]:d.lineWidth,p.ctx.strokeStyle=b.border?b.border[1]:d.strokeStyle,p.ctx.strokeRect(a.x,a.y,a.width,a.height||a.width),p.ctx.closePath(),this}function j(a,b,c){if(!c||!c.src)return this;var d=new Image,e=c.frames||0,f=c.loop||!0,g=c.speed||10;return d.src=c.src,d.addEventListener("load",function(){var c=d.naturalWidth,h=d.naturalHeight,i=c/e,j={image:d,posX:0,posY:0,frame:e,loop:f,width:i,height:h,dx:a,speed:g,dy:b,totalWidth:c,anim:null};k(j)},!1),this}function k(b){if(b.posX===b.totalWidth){if(b.loop===!1)return void a.cancelAnimationFrame(b.anim);b.posX=0}p.ctx.clearRect(b.dx,b.dy,b.width,b.height),p.ctx.beginPath(),p.ctx.drawImage(b.image,b.posX,b.posY,b.width,b.height,b.dx,b.dy,b.width,b.height),p.ctx.closePath(),b.posX=b.posX+b.width,setTimeout(function(){b.anim=a.requestAnimationFrame(k.bind(this,b))},b.speed)}function l(a,b,c,d){d||(d={});var e=o.defaults.text;return d.border&&(d.border=d.border.split(" "),d.border[0]=d.border[0].replace(/[^0-9]/g,"")),p.ctx.beginPath(),p.ctx.lineWidth=d.border?d.border[0]:e.lineWidth,p.ctx.strokeStyle=d.border?d.border[1]:e.strokeStyle,p.ctx.font=d.font||e.font,p.ctx.fillStyle=d.color||e.color,p.ctx.textAlign=d.align||e.align,p.ctx.fillText(a,b,c),p.ctx.strokeText(a,b,c),p.ctx.fill(),p.ctx.stroke(),p.ctx.closePath(),this}function m(b){var b=o.virtualStyles[b];if(!b)return this;var c='<svg xmlns="http://www.w3.org/2000/svg" width="'+p.width+'px" height="'+p.height+'px"><foreignObject width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml"><div style="'+b.cssText+'"></div></div></foreignObject></svg>',d=a.URL||a.webkitURL||a,e=new Image,f=new Blob([c],{type:"image/svg+xml;charset=utf-8"}),g=d.createObjectURL(f);return e.src=g,e.addEventListener("load",function(){p.ctx.beginPath(),p.ctx.drawImage(e,0,0),d.revokeObjectURL(g),p.ctx.closePath()}),this}var n={kami:null,documentStyles:[],virtualStyles:{},contexts:[],settings:{inc:0,sum:0,defaults:{arc:{background:"rgba(0, 0, 0, 0)",strokeStyle:"rgba(0, 0, 0, 0)",lineWidth:null},rect:{background:"rgba(0, 0, 0, 0)",strokeStyle:"rgba(0, 0, 0, 0)",lineWidth:null},polygon:{background:"rgba(0, 0, 0, 0)",strokeStyle:"rgba(0, 0, 0, 0)",lineWidth:null},line:{strokeStyle:"rgba(0, 0, 0, 0)",lineWidth:null},text:{font:"14px Helvetica",strokeStyle:"rgba(0, 0, 0, 0)",color:"#000",lineWidth:null}}}},o={};o.kami=n.kami,o.contexts=n.contexts,o.settings=n.settings,o.defaults=o.settings.defaults,o.documentStyles=n.documentStyles,o.virtualStyles=n.virtualStyles;var p=o.kami;o.warning=function(a){console&&console.warn&&console.warn(a)},o.error=function(a){throw new Error("Origami Error: "+a)},o.logging=function(a){console&&console.log&&console.log(a)},o.init=function(a){return p=null,o._createKami(a),d(o),this},o.styles=function(){var a=arguments;if(!a.length)return this;for(var b=0;b<a.length;b++){var c=o._getStyleRuleValue(a[b]);o.virtualStyles[a[b]]=c}return this},o._getStyleRuleValue=function(a){for(var b=o.documentStyles[0]||[],c=0;c<b.length;c++)if(b[c].selectorText&&b[c].selectorText.toLowerCase()===a)return b[c].style},o._createKami=function(a){a=a.canvas?a.canvas:document.querySelector(a),a||this.error("Please use a valid selector or canvas context");var c=b(a,n.contexts);if(c)return void(p=c);a.getContext||this.error("Please verify if it's a valid canvas element");var d=a.getContext("2d"),e={element:a,flip:!1,frame:null,ctx:d||!1,width:a.width||null,height:a.height||null};o.contexts.push(e),p=e},o.arc=e.bind(o),o.polygon=h.bind(o),o.line=g.bind(o),o.rect=i.bind(o),o.text=l.bind(o),o.image=f.bind(o),o.sprite=j.bind(o),o.shape=m.bind(o),o.translate=function(a,b){return"center"===a&&(a=p.width/2,b=p.height/2),("reset"===a||null==a&&null==b)&&(a=-p.width/2,b=-p.height/2),p.ctx.translate(a,b),this},o.canvasBackground=function(a){return p.element.style.backgroundColor=a,this},o._getContexts=function(){return o.contexts},o.restore=function(){return p.ctx.restore(),this},o.save=function(){return p.ctx.save(),this},o.globalComposite=function(a){return p.ctx.globalCompositeOperation=a,this},o.rotate=function(a){return p.ctx.rotate(a),this},o.stop=function(){return a.cancelAnimationFrame(p.frame),p.frame=!1,this},o.nextFrame=function(b){return p.frame=a.requestAnimationFrame(b),this},o.repeat=function(a,b){for(var c=JSON.parse(JSON.stringify(this.settings)),d=1;a>d;d++)c.inc=this.settings.inc*d,b.call(this,c);return this},o.setInc=function(a){return a&&(settings.inc=a),this},o.getContext=function(){return p.ctx},o.scale=function(a,b){return p.ctx.scale(a,b),this},o.flip=function(a){return p.flip="horizontal",a&&"string"==typeof a&&(p.flip=a),this},o.flipEnd=function(){return p.flip=!1,this},o.clear=function(){return p.ctx.clearRect(0,0,p.width,p.height),this},o.on=function(a,b){return p.element.addEventListener(a,b),this},"undefined"!=typeof module&&module&&module.exports&&(module.exports=o.init.bind(this)),"undefined"!=typeof exports&&exports&&(exports.origami=o.init.bind(this)),"object"==typeof a&&(a.origami=o.init.bind(o))}(function(){return this}());
//# sourceMappingURL=origami.min.js.map