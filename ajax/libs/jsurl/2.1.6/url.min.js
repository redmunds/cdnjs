!function(t){"use strict";function r(t){var r={path:!0,query:!0,hash:!0};return t?(/^[a-z]+:/.test(t)&&(r.protocol=!0,r.host=!0,/[-a-z0-9]+(\.[-a-z0-9])*:\d+/i.test(t)&&(r.port=!0),/\/\/(.*?)(?::(.*?))?@/.test(t)&&(r.user=!0,r.pass=!0)),r):r}function e(t,e,o){var c,u,f,l=h?"file://"+(process.platform.match(/^win/i)?"/":"")+require("fs").realpathSync("."):document.location.href;e||(e=l),h?c=require("url").parse(e):(c=document.createElement("a"),c.href=e);var y=r(e);f=e.match(/\/\/(.*?)(?::(.*?))?@/)||[];for(u in p)t[u]=y[u]?c[p[u]]||"":"";if(t.protocol=t.protocol.replace(/:$/,""),t.query=t.query.replace(/^\?/,""),t.hash=i(t.hash.replace(/^#/,"")),t.user=i(f[1]||""),t.pass=i(f[2]||""),t.port=a[t.protocol]==t.port||0==t.port?"":t.port,!y.protocol&&/[^\/#?]/.test(e.charAt(0))&&(t.path=e.split("?")[0].split("#")[0]),!y.protocol&&o){var d=new n(l.match(/(.*\/)/)[0]),g=d.path.split("/"),m=t.path.split("/"),v=["protocol","user","pass","host","port"],q=v.length;for(g.pop(),u=0;q>u;u++)t[v[u]]=d[v[u]];for(;".."===m[0];)g.pop(),m.shift();t.path=("/"!==e.charAt(0)?g.join("/"):"")+"/"+m.join("/")}t.path=t.path.replace(/^\/{2,}/,"/"),t.paths(("/"===t.path.charAt(0)?t.path.slice(1):t.path).split("/")),t.query=new s(t.query)}function o(t){return encodeURIComponent(t).replace(/'/g,"%27")}function i(t){return t=t.replace(/\+/g," "),t=t.replace(/%([ef][0-9a-f])%([89ab][0-9a-f])%([89ab][0-9a-f])/gi,function(t,r,e,o){var i=parseInt(r,16)-224,s=parseInt(e,16)-128;if(0===i&&32>s)return t;var n=parseInt(o,16)-128,h=(i<<12)+(s<<6)+n;return h>65535?t:String.fromCharCode(h)}),t=t.replace(/%([cd][0-9a-f])%([89ab][0-9a-f])/gi,function(t,r,e){var o=parseInt(r,16)-192;if(2>o)return t;var i=parseInt(e,16)-128;return String.fromCharCode((o<<6)+i)}),t.replace(/%([0-7][0-9a-f])/gi,function(t,r){return String.fromCharCode(parseInt(r,16))})}function s(t){for(var r,e=/([^=&]+)(=([^&]*))?/g;r=e.exec(t);){var o=decodeURIComponent(r[1].replace(/\+/g," ")),s=r[3]?i(r[3]):"";void 0!==this[o]&&null!==this[o]?(this[o]instanceof Array||(this[o]=[this[o]]),this[o].push(s)):this[o]=s}}function n(t,r){e(this,t,!r)}var h="undefined"==typeof window&&"undefined"!=typeof global&&"function"==typeof require,p={protocol:"protocol",host:"hostname",port:"port",path:"pathname",query:"search",hash:"hash"},a={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443};s.prototype.toString=function(){var t,r,e="",i=o;for(t in this)if(!(this[t]instanceof Function||null===this[t]))if(this[t]instanceof Array){var s=this[t].length;if(s)for(r=0;s>r;r++)e+=e?"&":"",e+=i(t)+"="+i(this[t][r]);else e+=(e?"&":"")+i(t)+"="}else e+=e?"&":"",e+=i(t)+"="+i(this[t]);return e},n.prototype.clearQuery=function(){for(var t in this.query)this.query[t]instanceof Function||delete this.query[t];return this},n.prototype.queryLength=function(){var t,r=0;for(t in this)this[t]instanceof Function||r++;return r},n.prototype.isEmptyQuery=function(){return 0===this.queryLength()},n.prototype.paths=function(t){var r,e="",s=0;if(t&&t.length&&t+""!==t){for(this.isAbsolute()&&(e="/"),r=t.length;r>s;s++)t[s]=!s&&t[s].match(/^\w:$/)?t[s]:o(t[s]);this.path=e+t.join("/")}for(t=("/"===this.path.charAt(0)?this.path.slice(1):this.path).split("/"),s=0,r=t.length;r>s;s++)t[s]=i(t[s]);return t},n.prototype.encode=o,n.prototype.decode=i,n.prototype.isAbsolute=function(){return this.protocol||"/"===this.path.charAt(0)},n.prototype.toString=function(){return(this.protocol&&this.protocol+"://")+(this.user&&o(this.user)+(this.pass&&":"+o(this.pass))+"@")+(this.host&&this.host)+(this.port&&":"+this.port)+(this.path&&this.path)+(this.query.toString()&&"?"+this.query)+(this.hash&&"#"+o(this.hash))},t[t.exports?"exports":"Url"]=n}("undefined"!=typeof module&&module.exports?module:window);