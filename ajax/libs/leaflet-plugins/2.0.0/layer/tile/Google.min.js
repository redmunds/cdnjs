L.Google=L.Class.extend({includes:L.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1,mapOptions:{backgroundColor:"#dddddd"}},initialize:function(e,o){var t=this;this._ready=L.Google.isGoogleMapsReady(),L.Util.setOptions(this,o),this._googleApiPromise=this._ready?Promise.resolve(window.google):L.Google.createGoogleApiPromise(),this._googleApiPromise.then(function(){t._ready=!0,t._initMapObject(),t._update()}),this._type=e||"SATELLITE"},onAdd:function(e,o){var t=this;this._googleApiPromise.then(function(){t._map=e,t._insertAtTheBottom=o,t._initContainer(),t._initMapObject(),e.on("viewreset",t._reset,t),t._limitedUpdate=L.Util.limitExecByInterval(t._update,150,t),e.on("move",t._update,t),e.on("zoomanim",t._handleZoomAnim,t),e._controlCorners.bottomright.style.marginBottom="20px",t._reset(),t._update()})},onRemove:function(e){e._container.removeChild(this._container),e.off("viewreset",this._reset,this),e.off("move",this._update,this),e.off("zoomanim",this._handleZoomAnim,this),e._controlCorners.bottomright.style.marginBottom="0em"},getAttribution:function(){return this.options.attribution},setOpacity:function(e){this.options.opacity=e,e<1&&L.DomUtil.setOpacity(this._container,e)},setElementSize:function(e,o){e.style.width=o.x+"px",e.style.height=o.y+"px"},_initContainer:function(){var e=this._map._container,o=e.firstChild;this._container||(this._container=L.DomUtil.create("div","leaflet-google-layer leaflet-top leaflet-left"),this._container.id="_GMapContainer_"+L.Util.stamp(this),this._container.style.zIndex="auto"),e.insertBefore(this._container,o),this.setOpacity(this.options.opacity),this.setElementSize(this._container,this._map.getSize())},_initMapObject:function(){if(this._ready&&this._container){this._google_center=new google.maps.LatLng(0,0);var e=new google.maps.Map(this._container,{center:this._google_center,zoom:0,tilt:0,mapTypeId:google.maps.MapTypeId[this._type],disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1,styles:this.options.mapOptions.styles,backgroundColor:this.options.mapOptions.backgroundColor}),o=this;this._reposition=google.maps.event.addListenerOnce(e,"center_changed",function(){o.onReposition()}),this._google=e,google.maps.event.addListenerOnce(e,"idle",function(){o._checkZoomLevels()}),google.maps.event.addListenerOnce(e,"tilesloaded",function(){o.fire("load")}),this.fire("MapObjectInitialized",{mapObject:e})}},_checkZoomLevels:function(){void 0!==this._map.getZoom()&&this._google.getZoom()!==this._map.getZoom()&&this._map.setZoom(this._google.getZoom())},_reset:function(){this._initContainer()},_update:function(){if(this._google){this._resize();var e=this._map.getCenter(),o=new google.maps.LatLng(e.lat,e.lng);this._google.setCenter(o),void 0!==this._map.getZoom()&&this._google.setZoom(Math.round(this._map.getZoom())),this._checkZoomLevels()}},_resize:function(){var e=this._map.getSize();this._container.style.width===e.x&&this._container.style.height===e.y||(this.setElementSize(this._container,e),this.onReposition())},_handleZoomAnim:function(e){var o=e.center,t=new google.maps.LatLng(o.lat,o.lng);this._google.setCenter(t),this._google.setZoom(Math.round(e.zoom))},onReposition:function(){this._google&&google.maps.event.trigger(this._google,"resize")}}),L.Google.isGoogleMapsReady=function(){return!!window.google&&!!window.google.maps&&!!window.google.maps.Map},L.Google.asyncInitialize=L.Google.isGoogleMapsReady,L.Google.maxApiChecks=10,L.Google.apiCheckIntervalMilliSecs=500,L.Google.createGoogleApiPromise=function(){var e=0,o=null;return new Promise(function(t,i){o=setInterval(function(){return e>=L.Google.maxApiChecks&&!L.Google.isGoogleMapsReady()?(clearInterval(o),i(new Error("window.google not found after max attempts"))):L.Google.isGoogleMapsReady()?(clearInterval(o),t(window.google)):void e++},L.Google.apiCheckIntervalMilliSecs)})};
//# sourceMappingURL=Google.min.js.map