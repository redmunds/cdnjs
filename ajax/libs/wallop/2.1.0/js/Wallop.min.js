!function(t){function e(t,e){if(!t)throw new Error('Selector missing, eg: new Wallop(".selector")');for(var s=0;s<l.length;s++)if(l[s]===t)throw new Error("An instance of Wallop with this selector already exists.");if(this.options={buttonPreviousClass:"Wallop-buttonPrevious",buttonNextClass:"Wallop-buttonNext",itemClass:"Wallop-item",currentItemClass:"Wallop-item--current",showPreviousClass:"Wallop-item--show-previous",showNextClass:"Wallop-item--show-next",hidePreviousClass:"Wallop-item--hide-previous",hideNextClass:"Wallop-item--hide-next",carousel:!0},t.length>0)throw new Error("Selector cannot be an array");this.$selector=t,this.options=n(this.options,e),this.event=null,this.allItemsArray=Array.prototype.slice.call(this.$selector.querySelectorAll(" ."+this.options.itemClass)),this.allItemsArrayLength=this.allItemsArray.length-1,this.currentItemIndex=this.allItemsArray.indexOf(this.$selector.querySelector(" ."+this.options.currentItemClass)),this.buttonPrevious=this.$selector.querySelector(" ."+this.options.buttonPreviousClass),this.buttonNext=this.$selector.querySelector(" ."+this.options.buttonNextClass),this.bindEvents(),this.createCustomEvent(),this.currentItemIndex<0&&(this.currentItemIndex=0);var i=this;setTimeout(function(){i.goTo(i.currentItemIndex)},0)}function s(t){return t?document.getElementsByClassName(t):void 0}function i(t,e){t&&(t.className=t.className.replace(/\s+$/gi,"")+" "+e)}function o(t,e){t&&(t.className=t.className.replace(e,""))}function n(t,e){var s,i={};for(s in t)i[s]=t[s];for(s in e)i[s]=e[s];return i}function r(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var s=document.createEvent("CustomEvent");return s.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),s}var l=[],a=e.prototype;a.updateButtonStates=function(){(this.buttonPrevious||this.buttonNext)&&(this.currentItemIndex===this.allItemsArrayLength&&this.options.carousel!==!0?this.buttonNext.setAttribute("disabled","disabled"):0===this.currentItemIndex&&this.options.carousel!==!0&&this.buttonPrevious.setAttribute("disabled","disabled"))},a.removeAllHelperSettings=function(){o(this.allItemsArray[this.currentItemIndex],this.options.currentItemClass),o(s(this.options.hidePreviousClass)[0],this.options.hidePreviousClass),o(s(this.options.hideNextClass)[0],this.options.hideNextClass),o(s(this.options.showPreviousClass)[0],this.options.showPreviousClass),o(s(this.options.showNextClass)[0],this.options.showNextClass),(this.buttonPrevious||this.buttonNext)&&(this.buttonPrevious.removeAttribute("disabled"),this.buttonNext.removeAttribute("disabled"))},a.goTo=function(t){if(this.options.carousel&&-1===t)t=this.allItemsArrayLength-1;else if(t>this.allItemsArrayLength||0>t)return;this.removeAllHelperSettings(),i(this.allItemsArray[this.currentItemIndex],t>this.currentItemIndex?this.options.hidePreviousClass:this.options.hideNextClass),i(this.allItemsArray[t],this.options.currentItemClass+" "+(t>this.currentItemIndex?this.options.showNextClass:this.options.showPreviousClass)),this.currentItemIndex=t,this.updateButtonStates(),this.event.detail.currentItemIndex=this.currentItemIndex,this.$selector.dispatchEvent(this.event)},a.previous=function(){this.options.carousel&&0===this.currentItemIndex?this.goTo(this.allItemsArrayLength):this.goTo(this.currentItemIndex-1)},a.next=function(){this.currentItemIndex>=this.allItemsArrayLength&&this.options.carousel===!0?this.goTo(0):this.goTo(this.currentItemIndex+1)},a.bindEvents=function(){l.push(this.$selector);var t=this;this.buttonPrevious&&this.buttonPrevious.addEventListener("click",function(e){e.preventDefault(),t.previous()}),this.buttonNext&&this.buttonNext.addEventListener("click",function(e){e.preventDefault(),t.next()})},a.on=function(t,e){if("change"!==t)throw new Error('the only available event is "change"');this.$selector.addEventListener(t,function(t){return e(t)},!1)},a.createCustomEvent=function(){var t=this;this.event=new r("change",{detail:{wallopEl:t.$selector,currentItemIndex:Number(t.currentItemIndex)},bubbles:!0,cancelable:!0})},r.prototype=window.CustomEvent.prototype,window.CustomEvent=r,"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:t.Wallop=e}(this);