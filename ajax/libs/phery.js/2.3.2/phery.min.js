!function(e){"use strict";"function"==typeof define&&define.amd?define("phery",["jquery"],e):e(jQuery)}(function($,undefined){"use strict";function per_data(e,t){var r,n,a=Object.toType(e),i=Object.toType(t);switch(a){case"array":switch(i){case"array":e.concat(t);break;case"object":case"string":case"null":case"boolean":case"number":e.push(t)}break;case"object":switch(i){case"object":e=$.extend(e,t);break;case"array":for(n=0,r=0;r<t.length;r++){for(;"undefined"!=typeof e[n];)n++;e[n]=t[r]}break;case"number":case"string":case"null":case"boolean":for(n=0;"undefined"!=typeof e[n];)n++;e[n]=t}break;case"string":case"number":case"null":case"boolean":e=[].concat(e,t);break;case"undefined":e="object"===i?t:[].concat(t)}return e}function append_args(e){var t,r;e[0]&&e[0].constructor===Array&&(e=e[0]);for(r in e)e.hasOwnProperty(r)&&(t=this.data("args.phery"),this.data("args.phery",per_data(t,e[r])))}function set_args(e){"function"!==Object.toType(e)&&this.data("args.phery",per_data(undefined,e[0]))}function compare_array(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function str_is_function(e,t){if(!e||"function"!=typeof e.toString)return!1;e=e.toString();var r=e.search(/^[\s;]*function\(/im)!==-1&&e.search(/\};?$/m);if(r&&t){var n,a=call_cache.length,i=null;for(n=0;n<a;n++)if(call_cache[n].str===e){i=call_cache[n].fn;break}if("function"!=typeof i){var o=e.match(/function\s*\(([^\)]*)\)/im)[1],s=e.slice(e.indexOf("{")+1,e.lastIndexOf("}"));if(!s)return!1;i=new Function(o,s),call_cache.push({str:e,fn:i})}return i}return r}function debug(e,t){options.debug.enable&&"undefined"!=typeof console&&"function"==typeof console.dir&&"undefined"!=typeof options.debug.display[t]&&options.debug.display[t]===!0&&console.dir(e)}function do_cursor(e){options.cursor&&(e?$body_html.css("cursor",e):$body_html.css("cursor",$original_cursor))}function triggerAndReturn(e,t,r,n){n=n||null;var a,i=$.Event(t);return n&&(i.target=n),e.triggerHandler(i,r),a=i.result!==!1,debug(["event triggered",{name:t,"event result":a,element:e,data:r}],"events"),a}function triggerPheryEvent(e,t,r,n){return r=r||[],n=n||!1,n?(triggerAndReturn(callbacks,t,r,e),e&&options.enable.per_element.events&&triggerAndReturn(e,"phery:"+t,r),!0):triggerAndReturn(callbacks,t,r,e)!==!1&&(!e||!options.enable.per_element.events||triggerAndReturn(e,"phery:"+t,r))}function countProperties(e){var t=0;if("object"==typeof e)for(var r in e)e.hasOwnProperty(r)&&++t;else"undefined"!=typeof e.length&&(t=e.length);return t}function clean_up(e){e.data("temp.phery")&&(e.off(),e.removeProp(),$.removeData(e),e.remove())}function form_submit(e){return!(e.data("confirm.phery")&&!confirm(e.data("confirm.phery")))&&ajax_call.call(e)}function ajax_call(e){if(triggerPheryEvent(this,"before")===!1)return clean_up(this),!1;var t,r,n,a={"X-Requested-With":"XMLHttpRequest","X-Phery":1},i=this,o=i.attr("action")||i.attr("href")||i.data("target.phery")||options.default_href||window.location.href,s=i.data("type.phery")||"json",c=i.attr("method")||i.data("method.phery")||"GET",l=i.attr("id")||i.parent().attr("id")||null,f={args:undefined,phery:{method:c}};if((n=$("head meta#csrf-token")).size()&&(f.phery.csrf=n.attr("content")),i.data("args.phery"))try{f.args=per_data({},i.data("args.phery"))}catch(e){triggerPheryEvent(i,"exception",[phery.log(e)])}else if(i.is("input")){if(i.attr("name")){var p={};i.is('[type="checkbox"],[type="radio"]')?p[i.attr("name")]={checked:i.prop("checked")?1:0,value:i.val()}:p[i.attr("name")]=i.val(),f.args=per_data({},p)}}else e!==undefined&&(f.args=per_data({},e));if(i.is("form"))try{f.args=per_data(f.args,i.serializeForm(i.data("submit.phery")?i.data("submit.phery"):{}))}catch(e){triggerPheryEvent(i,"exception",[phery.log(e)])}if(i.is("select"))if(i.attr("multiple"))if(i.attr("name")){var u={};u[i.attr("name")]=i.find("option").filter(":selected").map(function(){return $(this).val()}).get(),f.args=per_data(f.args,u)}else f.args=per_data(f.args,i.find("option").filter(":selected").map(function(){return $(this).val()}).get());else if(i.attr("name")){var d={};d[i.attr("name")]=i.val(),f.args=per_data(f.args,d)}else f.args=per_data(f.args,i.val());if(i.data("related.phery"))try{var h,y,g,v=i.data("related.phery");switch(typeof v){case"string":if(v.indexOf(",")>-1){y=v.split(","),h=$();for(var _=0;_<y.length;_++)g=i.find(y[_]),g.size()||(g=$(y[_])),h=h.add(g)}else h=i.find(v),h.size()||(h=$(v));break;case"object":h=v;break;default:h=!1}if(h!==!1)if(h.size()){var m={},b=0;h.each(function(){var e=$(this);e.is("form")?m=per_data(m,e.serializeForm()):e.attr("id")?m[e.attr("id")]=e.val():e.attr("name")?m[e.attr("name")]=e.val():m[b++]=e.val()}),f.args=per_data(f.args,m)}else triggerPheryEvent(i,"exception",[phery.log("data-related selector found no elements")])}catch(e){triggerPheryEvent(i,"exception",[phery.log(e,"invalid data-related info")])}l&&(f.phery.submit_id=l),i.data("view.phery")?f.phery.view="#"+i.attr("id"):i.data("remote.phery")&&(f.phery.remote=i.data("remote.phery"));var w={};triggerPheryEvent(i,"params",w,!0),f.phery=$.extend(w,f.phery),t=new Date,debug(["remote call",{data:f,timestamp:t.getTime(),time:t.toLocaleString()}],"remote"),t=t.getTime();var j={url:o.indexOf("_=")===-1?o+(o.indexOf("?")>-1?"&":"?")+"_="+t:o.replace(/_=(\d+)/,"_="+t),data:f,dataType:s,type:"POST",el:i,global:!1,try_count:0,retry_limit:options.ajax.retries,cache:!1,processData:!0,headers:a,beforeSend:function(e,t){return do_cursor("wait"),triggerPheryEvent(this.el,"beforeSend",[e,t])!==!1}},x=function(e,t,r){return this.retry_limit>0&&"timeout"===t&&(this.try_count++,this.try_count<=this.retry_limit)?(this.dataType="text "+s,this.url=this.url.indexOf("_try_count=")===-1?this.url+"&_try_count="+this.try_count:this.url.replace(/_try_count=(\d+)/,"_try_count="+this.try_count),this.url=this.url.replace(/_=(\d+)/,"_="+(new Date).getTime()),O(this),!1):(do_cursor(!1),triggerPheryEvent(this.el,"fail",[e,t,r])===!1?(clean_up(this.el),!1):(clean_up(this.el),!0))},P=function(e,t,r){return triggerPheryEvent(this.el,"done",[e,t,r])!==!1&&(processRequest.call(this.el,e),!0)},k=function(e,t,r){return!(4!==r.readyState&&this.try_count>0&&this.try_count<=this.retry_limit)&&(do_cursor(!1),triggerPheryEvent(this.el,"always",[r])===!1?(clean_up(this.el),!1):(clean_up(this.el),!0))},O=function(e){var t=$.ajax(e);return t.done(P).always(k).fail(x),t};return r=O(j)}function set_events(){var e=$(document);e.off(".phery"),e.on(options.delegate.confirm.join(".phery,")+".phery","[data-confirm]:not(form)",function(e){confirm($(this).data("confirm.phery"))?e.preventDefault():e.stopImmediatePropagation()}),e.on(options.delegate.form.join(".phery,")+".phery","form[data-remote]",function(){var e=$(this);return form_submit(e),!1}),e.on(options.delegate.tags.join(".phery,")+".phery","[data-remote]:not(form,select)",function(e){var t=$(this);return!(!options.enable.clickable_structure&&"number"==typeof structural_html[this.tagName]&&!t.attr("data-clickable"))&&(ajax_call.call(t),t.is('input[type="text"],input[type="checkbox"],input[type="radio"],input[type="image"]')||e.preventDefault(),!0)}),e.on(options.delegate.select.join(".phery,")+".phery","select[data-remote]:not([multiple])",function(){ajax_call.call($(this))}),e.on(options.delegate.select_multiple.join(".phery,")+".phery","select[data-remote][multiple]",function(){ajax_call.call($(this))})}function processRequest(data){if(!this.data("remote.phery")&&!this.data("view.phery"))return void triggerPheryEvent(this,"after",[]);if("object"!==Object.toType(data))return void triggerPheryEvent(this,"after",[]);var $jq,argv,argc,$this=this,is_selector,funct,_data,_argv,special=null;if(data&&countProperties(data)){var x;for(x in data)if(data.hasOwnProperty(x))if(special=x.match(/\{([#~\+\-])[\d]+\}/),null!==special&&(special=special[1]),is_selector=special||"<"===x.toString().charAt(0)||x.toString().search(/^[0-9]+$/)===-1)data[x].length?($jq=selector($this,x,data),("#"===special||"+"===special&&$jq!==!1||$jq&&"function"==typeof $jq.size&&$jq.size())&&($jq=process($this,$jq,data[x]))):triggerPheryEvent($this,"exception",[phery.log("no commands to issue, 0 length")]);else switch(argc=data[x].a.length,argv=data[x].a,Number(data[x].c)){case 1:"undefined"!=typeof argv[0]?alert(argv[0].toString()):triggerPheryEvent($this,"exception",[phery.log("missing message for alert()",argv)]);break;case 2:try{if(funct=argv.shift(),funct=assign_object(window,funct,undefined,!1),funct===!1||"function"!=typeof funct[0][funct[1]])throw'no global function "'+funct+'" found';funct[0][funct[1]].apply(null,argv[0]||[])}catch(e){triggerPheryEvent($this,"exception",[phery.log(e,argv)])}break;case 3:try{eval("(function(){ "+argv[0]+" })();")}catch(e){triggerPheryEvent($this,"exception",[phery.log(e,argv[0])])}break;case 4:try{triggerPheryEvent($this,"json",[$.parseJSON(argv[0])])}catch(e){triggerPheryEvent($this,"exception",[phery.log(e,argv[0])])}break;case 5:_data=$this.data("view.phery"),_argv=$.extend(!0,{},{url:$this.data("target")},argv[1]);var _pass;$this.data("passdata.phery")?(_pass=$this.data("passdata.phery"),$.removeData($this[0],"passdata.phery")):_pass={},"function"==typeof _data.beforeHtml&&_data.beforeHtml.call($this,_argv,_pass),"function"!=typeof _data.render?$this.html("").html(argv[0]):_data.render.call($this,argv[0],_argv,_pass),"function"==typeof _data.afterHtml&&_data.afterHtml.call($this,_argv,_pass);break;case 6:try{if("undefined"!=typeof console&&"undefined"!=typeof console.log)for(var l=0;l<argc;l++)console.log(argv[l][0])}catch(e){triggerPheryEvent($this,"exception",[phery.log(e,argv[0])])}break;case 7:if(argc>1){_argv=[argv.shift()];do _argv.push(argv.shift());while(argv.length);triggerPheryEvent($this,"exception",_argv)}else triggerPheryEvent($this,"exception",[argv[0]]);break;case 8:2===argc&&(argv[1]?phery.view(argv[1]).navigate_to(argv[0]):window.location.assign(argv[0]));break;case 9:var _obj=assign_object(window,argv[0],undefined,2===argc,!0);_obj&&_obj.length>0?2===argc?_obj[0][_obj[1]]=process_parameters($this,argv[1][0]):1===argc&&delete _obj[0][_obj[1]]:triggerPheryEvent($this,"exception",[phery.log("object path not found in window"+argv[0].join("."))]);break;case 10:var head=$("head"),file=null,i;switch(argv[0]){case"j":for(i in argv[1])argv[1].hasOwnProperty(i)&&(file=$("<script></script>",{type:"text/javascript",src:argv[1][i],id:i}),head.find("script#"+i).size()?argv[2]&&head.find("script#"+i).replaceWith(file):head[0].appendChild(file[0]));break;case"c":for(i in argv[1])argv[1].hasOwnProperty(i)&&(file=$("<link/>",{type:"text/css",rel:"stylesheet",href:argv[1][i],id:i}),head.find("link#"+i).size()?argv[2]&&head.find("link#"+i).replaceWith(file):head[0].appendChild(file[0]))}break;default:triggerPheryEvent($this,"exception",[phery.log('invalid command "'+data[x].c+'" issued')])}}triggerPheryEvent(this,"after",[])}function _apply(e,t){t=t||!1;for(var r in e)if(e.hasOwnProperty(r))if("object"==typeof e[r]&&e[r].constructor!==Array){if(_apply(e[r],t)===!1)return!1}else switch(debug(["config",{name:r,value:e[r]}],"config"),r){case"confirm":case"form":case"select_multiple":case"select":case"tags":if(!compare_array(e[r],options.delegate[r])||t)return set_events(),!1}return!0}function refresh_changes(e,t){var r=$.extend(!0,{},options);if(t===undefined)for(var n in e)e.hasOwnProperty(n)&&dot_notation_option(n,options,e[n]);else dot_notation_option(e,options,t);_apply(r)}var call_cache=[],structural_html={HTML:1,BODY:1,DIV:1,BLOCKQUOTE:1,BR:1,HR:1,HEAD:1,H1:1,H2:1,H3:1,H4:1,H5:1,H6:1,P:1,HEADER:1,FOOTER:1,NAV:1,SECTION:1,ASIDE:1,ARTICLE:1,HGROUP:1,FIGURE:1},typedefs={},phery=window.phery=window.phery||{};phery.version="2.3.2",Object.toType=function(e){return function(t){return t===e?"global":"undefined"==typeof t?"undefined":{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()}}(window);var assign_object=function(e,t,r,n,a,i){if(!t||!t.length)return!1;var o,s=t.length-1;n=n===undefined||n,a=a!==undefined&&a,i=i!==undefined&&i,r!==undefined&&i&&(i=!1);for(var c=0;c<s;c++)if(o=t[c],o in e)e=e[o];else{if(!n)return!1;e[o]={},e=e[o]}return"undefined"!=typeof e[t[s]]&&r!==undefined?"array"!==Object.toType(e[t[s]])||a?e[t[s]]=r:e[t[s]].push(r):r!==undefined&&(e[t[s]]=r),i?e[t[s]]:[e,t[s]]},options={},callbacks=$("<div/>"),_log=[],$original_cursor,$body_html;typedefs._callbacks={before:function(){return!0},beforeSend:function(){return!0},params:function(){return!0},always:function(){return!0},fail:function(){return!0},done:function(){return!0},after:function(){return!0},exception:function(){return!0},json:function(){return!0}},typedefs.defaults={cursor:!0,default_href:!1,ajax:{retries:0},enable:{log:!1,log_history:!1,per_element:{events:!0},clickable_structure:!1},debug:{enable:!1,display:{events:!0,remote:!0,config:!0}},delegate:{confirm:["click"],form:["submit"],select_multiple:["blur"],select:["change"],tags:["click"]}};var convert_special=function(e,t){var r,n,a;if("object"===Object.toType(t))if("undefined"!=typeof t.PF)t=(r=str_is_function(t.PF,!0))?r:null;else if("undefined"!=typeof t.PR){a=t.PR;for(n in a)a.hasOwnProperty(n)&&(t=process(e,selector(e,n,a),a[n]))}return t},selector=function(e,t,r){var n,a=!1,i=t.match(/\{([#~\+\-])[\d]+\}/);if(null!==i&&(i=i[1]),"+"===i){n=r[t].shift();var o=assign_object(window,n.c,undefined,!1,!1,!0);o?a=n.a[0]?new o:o:triggerPheryEvent(e,"exception",[phery.log("failed access to object","window."+n.c.join("."))])}else"~"===i?a=e:"-"===i?(n=r[t].shift(),n=n.a,a=phery.remote(n[0],n[1],n[2],n[3])):a="#"===i?$:$("window"===t.toLowerCase()?window:"document"===t.toLowerCase()?document:t);return a},process_parameters=function(e,t){if(t=convert_special(e,t),"object"===Object.toType(t)||"array"===Object.toType(t)){var r,n;for(r in t)if(t.hasOwnProperty(r))switch(Object.toType(t[r])){case"array":for(n in t[r])t[r].hasOwnProperty(n)&&(t[r][n]=process_parameters(e,t[r][n]));break;case"object":t[r]=process_parameters(e,t[r])}}return t},process=function(e,t,r){var n,a,i;for(n in r)if(r.hasOwnProperty(n)){a=r[n].a;try{if(i=r[n].c,"function"!=typeof t[i])throw'no function "'+i+'" found in object';"undefined"!=typeof a[0]?(a=process_parameters(e,a[0]),t="array"===Object.toType(a)&&"undefined"!=typeof a[0]?t[i].apply(t,a):t[i].call(t,a)):t=t[i].apply(t,a)}catch(t){triggerPheryEvent(e,"exception",[phery.log(t,a)])}}return t},dot_notation_option=function(e,t,r){if(e.indexOf(".")!==-1){var n=e.split(".");if(n&&n[0]&&"undefined"!=typeof t[n[0]])return dot_notation_option(n.slice(1).join("."),t[n[0]],r)}else if("undefined"!=typeof t[e])return"undefined"!=typeof r?(t[e].constructor===Array&&"string"==typeof r?t[e].push(r):t[e]=r,t):t[e];return null};options=$.extend(!0,{},typedefs.defaults,options),$(function(){$body_html=$("body,html"),$original_cursor=$body_html.css("cursor"),_apply(options,!0)}),phery.config=function(e,t){return"object"==typeof e&&e.constructor===Object?(refresh_changes(e),phery):"string"==typeof e&&t!==undefined?(refresh_changes(e,t),phery):"string"==typeof e&&t===undefined?e in options?options[e]:dot_notation_option(e,options):0===arguments.length?$.extend(!0,{},options):phery},phery.reset_to_defaults=function(){return options=$.extend(!0,{},typedefs.defaults),_apply(options,!0),phery},phery.log=function(e){var t=Array.prototype.slice.call(arguments);return t.length?(options.enable.log&&(options.enable.log_history&&_log.push(t),"undefined"!=typeof console&&"undefined"!=typeof console.log&&("object"==typeof console.log?console.log(t):console.log.apply(console,t))),t.join("\n")):options.enable.log_history?_log:[]},phery.remote=function(e,t,r,n){if(this===phery&&!e)return phery.log('first argument "function_name" on phery.remote() must be specified when calling directly'),phery;if(n!==!1&&(n=!0),this!==phery)return ajax_call.call(this);var a=$("<a/>",{"data-remote":e});if(a.data({"remote.phery":e}),n&&a.data("temp.phery",!0),t!==undefined&&t&&a.phery("set_args",t),r!==undefined&&"object"===Object.toType(r))for(var i in r)r.hasOwnProperty(i)&&("target method type".indexOf(i.toLowerCase())?a.data(i+".phery",r[i]):a.attr(r));return n?ajax_call.call(a):a},phery.on=function(e,t){if("object"==typeof e)for(var r in e)e.hasOwnProperty(r)&&phery.on(r,e[r]);else"string"==typeof e&&"function"==typeof t&&e in typedefs._callbacks&&(debug(["phery.on",{event:e,callback:t}],"events"),callbacks.bind(e+".phery",t));return phery},phery.off=function(e){return debug(["phery.off",{event:e}],"events"),callbacks.off(e+".phery"),phery};var _containers={},PheryView=function(e){this.container=e,this.data=$.extend({},this.container.data("view.phery"));var t=function(e,t){for(var r=0;r<t.length;r++)switch(typeof t[r]){case"string":if(e.indexOf(t[r])!==-1)return!0;break;case"object":if(e.search(t[r])!==-1)return!0;break;case"function":if(t[r].call(null,e)===!0)return!0}return!1};this.is_excluded_url=function(e){var r=this.container.data("view.phery").exclude||!1;return!(!r||!e)&&t(e,r)},this.navigate_to=function(e,t,r){e&&this.container.data("target",e);var n;return"undefined"!=typeof r&&this.container.data("passdata.phery",r),n="undefined"!=typeof t&&null!==t?ajax_call.call(this.container,t):ajax_call.call(this.container)}};typedefs.viewopts={beforeHtml:1,render:1,afterHtml:1,selector:1,exclude:1},typedefs.view={data:1,container:1,navigate_to:1,is_excluded_url:1},phery.view=function(e){if("string"==typeof e)return"undefined"!=typeof _containers[e]?_containers[e]:phery;if("object"==typeof e&&$.isEmptyObject(e))return debug(["phery.view needs config"],"config"),phery;var t,r,n,a,i=function(e){var t=$(this),r=t.attr("href");return!(2!==e.which&&!e.metaKey)||(!!e.data.is_excluded_url(r)||(debug(["phery.view link clicked, loading content",e.data.container,t.attr("href")],"events"),e.data.navigate_to(t.attr("href")),e.stopPropagation(),e.preventDefault(),!1))};$(document).off("click.view");for(t in e)if(e.hasOwnProperty(t))if(n=$(t),1===n.size()){if(r=t.replace(/[#\.\s]/g,""),e[t]===!1){n.off(".phery.view"),$(document).off("click.view."+r),debug(["phery.view uninstalled and events unbound",n],"config");continue}a="string"==typeof e[t].selector&&e[t].selector.search(/(^|\s)a($|\s|\.)/i)!==-1?t+" "+e[t].selector:'a[href]:not(.no-phery,[target],[data-remote],[href*=":"],[rel~="nofollow"])',a=a+',a[href][rel="'+t+'"]',n.data("view.phery",$.extend(!0,{},e[t],{selector:a})),_containers[t]=new PheryView(n),$(document).on("click.view."+r,a,_containers[t],i);for(var o in e[t])e[t].hasOwnProperty(o)&&"undefined"!=typeof typedefs._callbacks[o]&&n.on("phery:"+o+".phery.view",e[t][o]);debug(["phery.view installed",n],"config")}else debug(["phery.view container",n,"isnt unique or does not exist"],"config");return phery},$.fn.extend({reset:function(){return this.each(function(){$(this).is("form")&&this.reset()})},phery:function(e,t){var r=this,n={exception:function(e,t){return r.each(function(){var r=$(this);triggerPheryEvent(r,"exception",[e,t])})},remote:function(){return r.each(function(){var e=$(this);e.is("form")?form_submit(e):ajax_call.call(e)})},append_args:function(e){var t=Array.prototype.slice.call(arguments);return r.each(function(){var e=$(this);append_args.apply(e,[t])}),n},set_args:function(e){return r.each(function(){var t=$(this);set_args.call(t,[e])}),n},get_args:function(){return r.data("args.phery")},remove:function(){r.each(function(){var e=$(this);e.data("temp.phery",!0),clean_up(e)})},make:function(e,t){return"string"===Object.toType(e)?r.each(function(){var r=$(this);r.attr("data-remote",e).data("remote.phery",e),t&&set_args.call(r,[t])}):r},unmake:function(e){return r.each(function(){var t=$(this);e&&t.off(".phery"),$.removeData(this,".phery"),$.removeData(this,"remote"),$.removeData(this,"remote.phery"),t.removeAttr("data-remote").removeAttr("data-remote.phery").removeAttr("data-args").removeAttr("data-args.phery").removeAttr("data-confirm").removeAttr("data-confirm.phery")})}};if(e&&"object"===Object.toType(e)){var a;for(var i in e)e.hasOwnProperty(i)&&i in n&&(a=n[i].apply(r,e[i]));return a}return e&&e in n?n[e].apply(r,Array.prototype.slice.call(arguments,1)):n},serializeForm:function(e){e=$.extend({},e),"undefined"!=typeof e.disabled&&null!==e.disabled||(e.disabled=!1),"undefined"!=typeof e.all&&null!==e.all||(e.all=!1),"undefined"!=typeof e.empty&&null!==e.empty||(e.empty=!0);var t=$(this),r={},n=t.find("input,textarea,select,keygen").filter(function(){var t=!0;return e.disabled||(t=!this.disabled),t&&$.trim(this.name)}).map(function(){var e,r,n=$(this),a=null;return n.is('[type="radio"]')||n.is('[type="checkbox"]')?n.is('[type="radio"]')?(e=t.find('[type="radio"][name="'+this.name+'"]'),e.filter("[checked]").size()&&(a=e.filter("[checked]").val())):n.prop("checked")&&(a=n.is("[value]")?n.val():1):n.is("select")?(r=n.find("option").filter(":selected"),a=n.prop("multiple")?r.map(function(){return this.value||this.innerHTML}).get():r.val()):a=n.val(),{name:this.name||null,value:a}}).get();if(n){var a,i,o,s,c,l,f,p;for(a=0;a<n.length;a++){if(o=n[a].name,i=n[a].value,e.all)null===i&&(i="");else if(null===i)continue;if((""!==i||e.empty)&&o){for(s=o.split(/\[/),c=s.length,f=1;f<c;f++)s[f]=s[f].replace(/\]/g,"");for(p=[],f=0;f<c;f++)(s[f]||f<c-1)&&p.push(s[f].replace("'",""));""===s[c-1]?(l=assign_object(r,p,[],!0,!1,!1),i.constructor===Array?l[0][l[1]].concat(i):l[0][l[1]].push(i)):assign_object(r,p,i)}}}return r}})});