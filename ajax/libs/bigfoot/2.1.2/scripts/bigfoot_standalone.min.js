!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){(function(){var a;a={matches:function(a,b){return a.webkitMatchesSelector(b)},all:function(a,b){return null==b&&(b=document),Array.prototype.slice.apply(b.querySelectorAll(a))},one:function(a,b){return null==b&&(b=document),b.querySelector(a)},closest:function(a,b){for(;a!==document;){if(a.webkitMatchesSelector(b))return a;a=a.parentNode}},children:function(a,b){return null==b&&(b="*"),Array.prototype.slice.apply(a.children).filter(function(a){return a.webkitMatchesSelector(b)})},find:function(a,b){return this.one(b,a)},docDefer:function(a,b,c){return document.addEventListener(b,function(b){return b.target.webkitMatchesSelector(a)?c(b):void 0})},trigger:function(a,b){var c;return c=new CustomEvent(a),console.log(c),b.dispatchEvent(c)}},"undefined"!=typeof b&&null!==b?b.exports=a:window.dom=a}).call(this)},{}],2:[function(a,b){(function(){var a;a={merge:function(a,b){var c,d;for(c in b)d=b[c],Object.defineProperty(a,c,{value:d,writable:!0,enumerable:!0,configurable:!0});return a},clone:function(a){var b,c,d;if("object"!=typeof a||a instanceof RegExp)return a;c={};for(b in a)d=a[b],c[b]=this.clone(d);return c}},"undefined"!=typeof b&&null!==b?b.exports=a:window.obj=a}).call(this)},{}],3:[function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=function(a,b){return function(){return a.apply(b,arguments)}};y=a("bigfoot-obj"),t=a("bigfoot-dom"),o=a("../../../poptart/src/coffee/poptart.coffee"),j="bigfoot-footnote__helper--print-only",h="bigfoot-footnote__helper--hide-when-printing",i="bigfoot-footnote",g="bigfoot-footnote__button",d="data-footnote-id",e="data-footnote-number",c="data-footnote-anchor-id",l="hide",n="remove",m="ignore",k={actionOnOriginalFootnotes:l,activateCallback:function(){},anchorPattern:/(?:fn|footnote|note)[:\-_\d]+/gi,anchorParentTagname:"sup",breakpoints:{},footnoteParentClass:"footnote",numberResetSelector:void 0,positionContent:!0,preventPageScroll:!0,scope:void 0,useFootnoteOnlyOnce:!0,popoverMarkup:'<aside class="'+i+' is-positioned-bottom" data-footnote-number="{{FOOTNOTE_NUM}}" data-footnote-identifier="{{FOOTNOTE_ID}}" alt="Footnote {{FOOTNOTE_NUM}}"> <div class="bigfoot-footnote__wrapper"> <div class="bigfoot-footnote__content"> {{FOOTNOTE_CONTENT}} </div></div> <div class="bigfoot-footnote__tooltip"></div> </aside>',buttonMarkup:'<div class=\'bigfoot-footnote__container\'> <button class="bigfoot-footnote__button" id="{{ANCHOR::id}}" '+e+'="{{FOOTNOTE_NUM}}" '+d+'="{{FOOTNOTE_ID}}" alt="See Footnote {{FOOTNOTE_NUM}}" rel="footnote"> <svg class="bigfoot-footnote__button__circle" viewbox="0 0 6 6" preserveAspectRatio="xMinYMin"><circle r="3" cx="3" cy="3" fill="white"></circle></svg> <svg class="bigfoot-footnote__button__circle" viewbox="0 0 6 6" preserveAspectRatio="xMinYMin"><circle r="3" cx="3" cy="3" fill="white"></circle></svg> <svg class="bigfoot-footnote__button__circle" viewbox="0 0 6 6" preserveAspectRatio="xMinYMin"><circle r="3" cx="3" cy="3" fill="white"></circle></svg> </button></div>'},D=function(a,b,c){var d;return d=new RegExp("\\{\\{"+b+":+\\s*([^\\}]*)\\}\\}","g"),a.replace(d,function(a,d){return c.node?"id"===d&&"ANCHOR"===b?c.anchorID:c.node.getAttribute(d)||"":""})},B=function(a,b){var c,d,e;return d=t.children(a,":not(."+j+")"),c=a.parentNode,a.webkitMatchesSelector(":empty")||0===d.length?(v(a,b),B(c,b)):(e=d.filter(function(a){return a.webkitMatchesSelector("hr:not(."+j+")")}),d.length===e.length?(v(e,b),v(a,b),B(c,b)):void 0)},v=function(){var a;return a=function(a,b){return b===l?a.classList.add(j):b===n?a.parentNode.removeChild(a):void 0},function(b,c){return b.forEach?b.forEach(function(b){return a(b,c)}):a(b,c)}}(),C=function(a,b,c){return a.replace(new RegExp("\\{\\{"+b+"\\}\\}","g"),c)},r=function(a){return a.replace(/[:.+~*\]\[]/g,"\\$&")},q=function(a,b){var c;return b.indexOf(" ")>=0&&(b=b.replace(/\s+/g,"|").replace(/(.*)/g,"($1)")),c=new RegExp("(\\s|&nbsp;)*<\\s*a[^#<]*#"+b+"[^>]*>(.*?)<\\s*/\\s*a>","g"),a=a.trim().replace(c,"").replace("[]",""),0!==a.indexOf("<")&&(a="<p>"+a+"</p>"),a},u=function(a){var b,d;return b=a.scope?t.all(a.scope).reduce(function(a,b){return a.concat(t.all("a[href*='#']",b))},[]):t.all("a[href*='#']"),d=[],b=b.filter(function(b){var e,f;return a.useFootnoteOnlyOnce&&(e=r(""+b.getAttribute("href").split("#")[1])),f=!b.getAttribute(c)&&(b.getAttribute("href").match(a.anchorPattern)||"footnote"===b.getAttribute("rel"))&&(!a.useFootnoteOnlyOnce||d.indexOf(e)<0)&&!t.closest(b,"[class*="+a.footnoteParentClass+"]:not(a):not("+a.anchorParentTagname+")"),f&&a.useFootnoteOnlyOnce&&d.push(e),f}),b.map(function(b){var d,e,f,g,h,i;return i=t.closest(b,a.anchorParentTagname),f=t.find(b,a.anchorParentTagname),g=r(""+b.getAttribute("href").split("#")[1]),e=(""+(i&&i.id||"")+" "+(f&&f.id||"")+" "+(b.id||"")).trim().replace(/\s+/," "),b.setAttribute(c,e),[i,b,f].forEach(function(a){return a?a.id=a.id.split(" ").map(function(a){return""+a+"--bigfoot-footnote-anchor"}).join(" "):void 0}),d={insertBefore:i||b,node:b,anchorID:e,footnoteID:g},a.actionOnOriginalFootnotes===n&&(h=document.querySelector("#"+g),h&&(d.content=q(h.innerHTML,e))),d})},p=function(a,b){var c,f,g,h,i,j;return c=i=void 0,f=t.all("["+d+"]"),f=f[f.length-1],j=f?[+f.getAttribute(d),+f.getAttribute(e)]:[0,0],g=j[0],h=j[1],a.forEach(function(a){return g+=1,b?(c=t.closest(a.node,b),h=c===i?h+1:1,i=c):h=g,a.number=h,a.id=g})},s=function(a,b){return a.forEach(function(a){var c;return c=b,c=C(c,"FOOTNOTE_NUM",a.number),c=C(c,"FOOTNOTE_ID",a.id),c=D(c,"ANCHOR",a),c=D(c,"FOOTNOTE",{node:document.getElementById(a.footnoteID)}),a.insertBefore.insertAdjacentHTML("beforebegin",c),a.button=a.insertBefore.previousSibling})},A=function(a,b){return a.forEach(function(a){var c,d,e,f;return f=[document.querySelector("#"+a.footnoteID),a.insertBefore],c=f[0],d=f[1],null!=c&&(e=c.parentNode,v(c,b),B(e,b)),d.classList.add(j),v(d,b)})},z=function(a){var b,c,d,e,f,g,h,j,k;return b=t.closest(a.target,".bigfoot-footnote__content"),e=t.closest(b,"."+i),k=[b.offsetHeight,b.scrollHeight,b.scrollTop],d=k[0],g=k[1],h=k[2],h>0&&10>h&&e.classList.add("is-scrollable"),e.classList.contains("is-scrollable")?(c=a.deltaY,j=0>c,f=function(){return a.stopPropagation(),a.preventDefault(),a.returnValue=!1,!1},console.log(-c,g-d-h),!j&&c>g-d-h?(b.scrollTop=g,e.classList.add("is-fully-scrolled"),f()):j&&-c>h?(b.scrollTop=0,e.classList.remove("is-fully-scrolled"),f()):e.classList.remove("is-fully-scrolled")):void 0},x=function(a,b){var c;return c=t.find(a,".bigfoot-footnote__content"),c.scrollHeight>c.offsetHeight&&a.classList.add("is-scrollable"),b?c.addEventListener("wheel",z):void 0},w=function(){var a;this.footnoteAnchors=u(this.settings),p(this.footnoteAnchors,this.settings.numberResetSelector),s(this.footnoteAnchors,this.settings.buttonMarkup),A(this.footnoteAnchors,this.settings.actionOnOriginalFootnotes),a={activeClass:"bigfoot-footnote--is-active",inactiveClass:null,activeSourceClass:"bigfoot-footnote__button--is-active",inactiveSourceClass:null,contentSelector:".bigfoot-footnote__content",contentWrapperSelector:".bigfoot-footnote__wrapper",tooltipSelector:".bigfoot-footnote__tooltip"},o.registerPopover("."+g,a,this.popoverMarkupFor),t.docDefer("."+i,o.EVENTS.STARTED_ACTIVATING,function(a){return function(b){return x(b.target,a.settings.preventPageScroll)}}(this))},f=function(){function a(a){this.popoverMarkupFor=E(this.popoverMarkupFor,this);var b,c;this.settings=y.merge(y.clone(k),a),b=w.bind(this),"complete"===(c=document.readyState)||"interactive"===c?b():document.addEventListener("DOMContentLoaded",b)}return a.prototype.popoverMarkupFor=function(a){var b,c,e,f,h;return b=this.footnoteAnchors[+a.getAttribute(d)-1],null!=b.popoverMarkup?b.popoverMarkup:(f=b.content?b.content:(e=document.querySelector("#"+b.footnoteID),e?q(e.innerHTML,b.anchorID):void 0),h=C(this.settings.popoverMarkup,"FOOTNOTE_NUM",b.number),h=C(h,"FOOTNOTE_ID",b.id),h=C(h,"FOOTNOTE_CONTENT",f),c=b.button.classList.contains(g)?b.button:t.find(b.button,"."+g),h=D(h,"BUTTON",{node:c}),b.popoverMarkup=h,h)},a.prototype.activatePopover=function(a){var b;return b="string"==typeof a?t.one(a):a instanceof HTMLElement?a:a[0],o.triggerPopoverFor(b)},a.prototype.teardown=function(){return this.footnoteAnchors.forEach(function(a){var b;return a.node.id=a.node.getAttribute(c),a.node.setAttribute(c,""),a.node.setAttribute(d,""),a.node.setAttribute(e,""),a.node.classList.remove(j),null!=(b=document.querySelector("#"+a.footnoteID))&&b.classList.remove(j),a.insertBefore.parentNode.removeChild(a.insertBefore.previousSibling)})},a}(),f.CLASSES={PRINT_ONLY:j,BUTTON:g,POPOVER:i},f.STATES={BUTTON:{IS_ACTIVE:"bigfoot-footnote__button--is-active"},POPOVER:{IS_ACTIVE:"bigfoot-footnote--is-active"}},f.ATTR={FOOTNOTE_ID:d,FOOTNOTE_NUMBER:e,ANCHOR_ID:c},f.ORIGINAL_FOOTNOTE_ACTIONS={HIDE:l,REMOVE:n,IGNORE:m},b.exports=f},{"../../../poptart/src/coffee/poptart.coffee":7,"bigfoot-dom":1,"bigfoot-obj":2}],4:[function(a){window.Bigfoot=a("./bigfoot.coffee")},{"./bigfoot.coffee":3}],5:[function(a,b){(function(){var a;a={matches:function(a,b){return a.webkitMatchesSelector(b)},all:function(a,b){return null==b&&(b=document),Array.prototype.slice.apply(b.querySelectorAll(a))},one:function(a,b){return null==b&&(b=document),b.querySelector(a)},closest:function(a,b){for(;a!==document;){if(a.webkitMatchesSelector(b))return a;a=a.parentNode}},children:function(a,b){return null==b&&(b="*"),Array.prototype.slice.apply(a.children).filter(function(a){return a.webkitMatchesSelector(b)})},find:function(a,b){return this.one(b,a)},docDefer:function(a,b,c){return document.addEventListener(b,function(b){return b.target.webkitMatchesSelector(a)?c(b):void 0})},trigger:function(a,b){var c;return c=new CustomEvent(a,{bubbles:!0}),b.dispatchEvent(c)}},"undefined"!=typeof b&&null!==b?b.exports=a:window.dom=a}).call(this)},{}],6:[function(a,b){b.exports=a(2)},{"/Users/chris/Dropbox (Personal)/Code/web/bigfoot/bigfoot/node_modules/bigfoot-obj/dist/obj.js":2}],7:[function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;s=a("bigfoot-obj"),o=a("bigfoot-dom"),d="data-poptart-max-width",c="data-poptart-max-height",g={BOTTOM:"bottom",TOP:"top"},f={STARTED_ACTIVATING:"poptart:popover-started-activating",FINISHED_ACTIVATING:"poptart:popover-finished-activating"},e={preferredPosition:g.BOTTOM,positionPopovers:!0,debounce:!1,preventPageScroll:!0,activeClass:"is-active",inactiveClass:"is-inactive",activeSourceClass:"is-active",inactiveSourceClass:"is-inactive",contentWrapperSelector:null,contentSelector:null,tooltipSelector:null},x={},i={},v=void 0,B=function(a,b){var e,g,h;return g=b.callback(a),e=document.createElement("div"),e.innerHTML=g,h=e.firstChild,setTimeout(function(){var e,g,j;return e=window.getComputedStyle(h),setTimeout(function(){var g;return h.setAttribute(d,l(e.maxWidth)),h.setAttribute(c,l(e.maxHeight)),h.style.maxWidth="none",v=u(b),v(),g=function(){return o.trigger(f.STARTED_ACTIVATING,h),h.removeEventListener("transitionend",g),h.removeEventListener("webkitTransitionend",g)},h.addEventListener("transitionend",g),h.addEventListener("webkitTransitionend",g),h.classList.add(b.activeClass),h.classList.remove(b.inactiveClass),a.classList.add(b.activeSourceClass),a.classList.remove(b.inactiveSourceClass)},0),i.popover={main:h,content:null!=b.contentSelector?o.find(h,b.contentSelector):void 0,contentWrap:null!=b.contentWrapperSelector?o.find(h,b.contentWrapperSelector):void 0,tooltip:null!=b.tooltipSelector?o.find(h,b.tooltipSelector):void 0},null==(g=i.popover).content&&(g.content=h),null==(j=i.popover).contentWrap&&(j.contentWrap=h),i.settings=b,i.source=a,a.parentNode.appendChild(h),window.addEventListener("resize",v),window.addEventListener("scroll",v)},0),h},y=function(a){var b,c,d,e;if(i.popover)return b=i.popover.main,e=i.source,a=i.settings,d=function(){var a;return null!=(a=b.parentNode)&&a.removeChild(b),b.removeEventListener("transitionend",d),b.removeEventListener("webkitTransitionend",d)},b.addEventListener("transitionend",d),b.addEventListener("webkitTransitionend",d),b.classList.remove(a.activeClass),b.classList.add(a.inactiveClass),e.classList.remove(a.activeSourceClass),e.classList.add(a.inactiveSourceClass),i={},c=void 0,window.removeEventListener("resize",v),window.removeEventListener("scroll",v)},p=function(a,b){if(!b)return!1;for(;a!==document.body;){if(a===b)return!0;a=a.parentNode}return!1},q=function(a){return p(a,i.popover.main)},r=function(a){return p(a,i.source)},n=function(a){var b,c;return c=!r(a.target),i.popover&&!q(a.target)&&y(),c?(b=h.triggerPopoverFor(a.target),!!b):void 0},j=function(a){var b,c,d,e,f,g;return c=a.getBoundingClientRect(),g=[c.top+.5*c.height,c.left+.5*c.width],e=g[0],b=g[1],d={height:c.height,width:c.width},f={height:window.innerHeight,width:window.innerWidth},{top:e,bottom:f.height-e,left:b,leftRelative:b/f.width,right:f.width-b,window:f,source:d}},k=function(){var a,b;return a=document.createElement("div"),a.style.cssText="display:inline-block;padding:0;line-height:1;position:absolute;visibility:hidden;font-size:1em;",a.appendChild(document.createElement("M")),document.body.appendChild(a),b=a.offsetHeight,document.body.removeChild(a),b},l=function(a,b){return m(a,b)||1e4},m=function(a,b,c){return null==c&&(c=!0),"none"===a?0:a.indexOf("rem")>=0?parseFloat(a)*k():a.indexOf("em")>=0?parseFloat(a)*parseFloat(window.getComputedStyle(b).fontSize):a.indexOf("%")>=0||a.indexOf("vw")>=0?parseFloat(a)/100:(a=parseFloat(a),60>=a&&c&&(a/=parseFloat(b.parentNode.offsetWidth)),a)},t=function(a){return a===g.BOTTOM?g.TOP:g.BOTTOM},A=function(a){var b,c,e;return b=parseFloat(i.popover.main.getAttribute(d)),e=i.popover.contentWrap,1>=b&&(c=function(){var b,c;return c=1e4,a&&(b=o.one(a),b&&(c=b.offsetWidth)),Math.min(window.innerWidth,c)}(),b=c*b),b=Math.min(b,i.popover.content.offsetWidth+1),e.style.maxWidth=""+b+"px"},z=function(a,b){var d,e,f,h,j,k,l;return h=i.popover.main,e=parseFloat(h.getAttribute(c)),k=window.getComputedStyle(h),d=m(k.marginTop,h,!1)+m(k.marginBottom,h,!1),j=h.offsetHeight+d,f=t(b),a[b]<j&&a[b]<a[f]&&(b=f),l=""+100*a.leftRelative+"% top 0",b===g.TOP?(h.classList.add("is-positioned-top"),h.classList.remove("is-positioned-bottom"),e=Math.min(e,a.top-d),l=""+100*a.leftRelative+"% bottom 0"):(h.classList.add("is-positioned-bottom"),h.classList.remove("is-positioned-top"),e=Math.min(e,a.bottom-d)),h.style.transformOrigin=l,i.popover.content.style.maxHeight=""+e+"px"},w=function(a,b){var c;return null!=(c=i.popover.tooltip)?c.style.left=""+(b.offsetWidth*a.leftRelative+2)+"px":void 0},u=function(a){return function(b){var c,d,e,f,g,h;return g=(null!=b?b.type:void 0)||"resize",a.positionPopovers&&i.popover?(h=[i.popover.main,i.source],c=h[0],d=h[1],e=window.getComputedStyle(d),f=j(d),z(f,a.preferredPosition),"resize"===g&&A(a.maxWidthRelativeTo),w(f,c),c.style.marginLeft=""+(-1*f.leftRelative*c.offsetWidth+f.source.width/2+m(e.marginLeft,d))+"px"):void 0}},h=function(){function a(){}return a.registerPopover=function(a,b,c){var d;return"function"==typeof b?b={callback:b}:b.callback=c,d=s.merge(s.clone(e),b),x[a]=d},a.triggerPopoverFor=function(a){var b,c,d;if(null!=a?a.webkitMatchesSelector:void 0){d=void 0;for(b in x)if(c=x[b],a.webkitMatchesSelector(b)){d=c;break}return d?B(a,d):void 0}},a}(),h.POSITIONS=g,h.EVENTS=f,document.addEventListener("click",n),document.addEventListener("touchend",n),b.exports=h},{"bigfoot-dom":5,"bigfoot-obj":6}]},{},[4]);