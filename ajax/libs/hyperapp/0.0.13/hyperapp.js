!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.hyperapp=e()}(this,function(){"use strict";function t(e,n,o){n.ns="http://www.w3.org/2000/svg";for(var r=0;r<o.length;r++){var a=o[r];a.data&&t(a.tag,a.data,a.tree)}}var e=function(t){function e(t,e,n){l(w,p=e(t,v),n,0)}function n(t,e){for(var n in t){var r,a=o(n),i={};if(e.replace(new RegExp(a.re,"g"),function(){for(var e=1;e<arguments.length-2;e++)i[a.keys.shift()]=arguments[e];r=function(e,o){return t[n](e,o,i)}}),r)return r}return t["/"]}function o(t){var e=[],n="^"+t.replace(/\//g,"\\/").replace(/:([A-Za-z0-9_]+)/g,function(t,n){return e.push(n),"([A-Za-z0-9_]+)"})+"/?$";return{re:n,keys:e}}function r(t){return"string"===t||"number"===t||"boolean"===t}function a(t,e){setTimeout(function(){t(e)},0)}function i(t,e){var n,o={};if(r(typeof e)||Array.isArray(e))return e;for(n in t)o[n]=t[n];for(n in e)o[n]=e[n];return o}function f(t,e){return t.tag!==e.tag||typeof t!=typeof e||r(typeof t)&&t!==e}function u(t){var e;if(r(typeof t))e=document.createTextNode(t);else{e=t.data&&t.data.ns?document.createElementNS(t.data.ns,t.tag):document.createElement(t.tag);for(var n in t.data)"oncreate"===n?a(t.data[n],e):d(e,n,t.data[n]);for(var o=0;o<t.tree.length;o++)e.appendChild(u(t.tree[o]))}return e}function c(t,e,n){t.removeAttribute("className"===e?"class":e),"boolean"!=typeof n&&"true"!==n&&"false"!==n||(t[e]=!1)}function d(t,e,n,o){if("style"===e)for(var r in n)t.style[r]=n[r];else if("on"===e.substr(0,2)){var a=e.substr(2);t.removeEventListener(a,o),t.addEventListener(a,n)}else"false"===n||n===!1?(t.removeAttribute(e),t[e]=!1):(t.setAttribute(e,n),t[e]=n)}function s(t,e,n){for(var o in i(n,e)){var r=e[o],f=n[o];void 0===r?c(t,o,f):r!==f&&("onupdate"===o?a(r,t):d(t,o,r,f))}}function l(t,e,n,o){if(void 0===n)t.appendChild(u(e));else if(void 0===e){for(;o>0&&!t.childNodes[o];)o--;if(o>=0){var r=t.childNodes[o];if(n&&n.data){var i=n.data.onremove;i&&a(i,r)}t.removeChild(r)}}else if(f(e,n))t.replaceChild(u(e),t.childNodes[o]);else if(e.tag){var r=t.childNodes[o];s(r,e.data,n.data);for(var c=e.tree.length,d=n.tree.length,p=0;p<c||p<d;p++)l(r,e.tree[p],n.tree[p],p)}}var p,v={},h=t.model,y=t.update||{},m=t.effects||{},g=function(e){e=t.subscriptions||t.subs;for(var n in e)e[n](h,v,b.onError)},b=i({onAction:Function.prototype,onUpdate:Function.prototype,onError:function(t){throw t}},t.hooks),w=t.root||document.body.appendChild(document.createElement("div")),A=t.view||function(){return w},E="function"==typeof A?void 0:A;E&&(A=n(E,location.pathname),v.setLocation=function(t){e(h,A=n(E,t),p),history.pushState({},"",t)},window.addEventListener("popstate",function(){e(h,A=n(E,location.pathname),p)}),window.onclick=function(t){if(!(t.metaKey||t.shiftKey||t.ctrlKey||t.altKey)){for(var e=t.target;e&&"a"!==e.localName;)e=e.parentNode;if(e&&e.host===location.host&&!e.hasAttribute("data-no-routing")){var n=""===e.hash?n:document.querySelector(e.hash);n?n.scrollIntoView(!0):(v.setLocation(e.pathname),t.preventDefault())}}});for(var N in i(y,m))!function(t){v[t]=function(n){b.onAction(t,n);var o=m[t];if(o)return o(h,v,n,b.onError);var r=y[t],a=h;e(h=i(h,r(h,n)),A,p),b.onUpdate(a,h,n)}}(N);"loading"!==document.readyState?g():document.addEventListener("DOMContentLoaded",g),e(h,A)},n=function(e,n){var o=[];o.push.apply(o,arguments),o.shift(),o.shift();var r=o[0];return o=Array.isArray(r)||void 0===r?r:o,"svg"===e&&t(e,n,o),{tag:e,data:n||{},tree:[].concat.apply([],o)}},o={app:e,h:n};return o});
//# sourceMappingURL=hyperapp.js.map
