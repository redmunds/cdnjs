!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.hyperapp=t()}(this,function(){"use strict";function e(t,n,r){n.ns="http://www.w3.org/2000/svg";for(var o=0;o<r.length;o++){var a=r[o];a.data&&e(a.tag,a.data,a.children)}}function t(e){return function(t,n,r){for(var o in n)o in f&&(n[f[o]]=n[o],delete n[o]);return e(t,n,r)}}function n(e){return e===m||e===w}function r(e){return L.test(e)}var o=function(t,n){n=n||{};var r=[];r.push.apply(r,arguments),r.shift(),r.shift();var o=r[0];return r=Array.isArray(o)||void 0===o?o:r,"function"==typeof t?(n.children=r||[],t(n)):("svg"===t&&e(t,n,r),{tag:t,data:n,children:[].concat.apply([],r)})},a=function(e){function t(e){a(n(o,e)),history.pushState({},"",e)}function n(e,n){for(var o in e){var a,i=r(o),f={};if(n.replace(new RegExp(i.re,"g"),function(){for(var n=1;n<arguments.length-2;n++)f[i.keys.shift()]=arguments[n];a=function(n,r){return r.setLocation=t,e[o](n,r,f)}}),a)return a}return e["/"]}function r(e){var t=[],n="^"+e.replace(/\//g,"\\/").replace(/:([A-Za-z0-9_]+)/g,function(e,n){return t.push(n),"([A-Za-z0-9_]+)"})+"/?$";return{re:n,keys:t}}var o=e.view,a=e.render;window.addEventListener("popstate",function(){a(n(o,location.pathname))}),window.addEventListener("click",function(e){if(!(e.metaKey||e.shiftKey||e.ctrlKey||e.altKey)){for(var n=e.target;n&&"a"!==n.localName;)n=n.parentNode;if(n&&n.host===location.host&&!n.hasAttribute("data-no-routing")){var r=document.querySelector(""===n.hash?r:n.hash);r?r.scrollIntoView(!0):(e.preventDefault(),t(n.pathname))}}}),a(n(o,location.pathname))},i=t,f={class:"className",for:"htmlFor","http-equiv":"httpEquiv"},s=i,u=0,l=1,h=2,c=3,p=4,d=5,g=6,v=7,y=8,m=9,w=10,b=11,A=12,E=function(e,t){function o(e){return"function"==typeof e?e:"string"==typeof e?e:e&&"object"==typeof e?e:a("",e)}e=s(e),t||(t={});var a=t.concat||function(e,t){return String(e)+String(t)};return function(t){function i(e){var t=[];f===v&&(f=p);for(var r=0;r<e.length;r++){var o=e.charAt(r);f===l&&"<"===o?(s.length&&t.push([l,s]),s="",f=h):">"!==o||n(f)?f===l?s+=o:f===h&&/\s/.test(o)?(t.push([h,s]),s="",f=p):f===h?s+=o:f===p&&/[\w-]/.test(o)?(f=d,s=o):f===p&&/\s/.test(o)?(s.length&&t.push([d,s]),t.push([A])):f===d&&/\s/.test(o)?(t.push([d,s]),s="",f=g):f===d&&"="===o?(t.push([d,s],[b]),s="",f=v):f===d?s+=o:f!==g&&f!==p||"="!==o?f!==g&&f!==p||/\s/.test(o)?f===v&&'"'===o?f=w:f===v&&"'"===o?f=m:f===w&&'"'===o?(t.push([y,s],[A]),s="",f=p):f===m&&"'"===o?(t.push([y,s],[A]),s="",f=p):f!==v||/\s/.test(o)?f===y&&/\s/.test(o)?(t.push([y,s],[A]),s="",f=p):f!==y&&f!==m&&f!==w||(s+=o):(f=y,r--):(t.push([A]),/[\w-]/.test(o)?(s+=o,f=d):f=p):(t.push([b]),f=v):(f===h?t.push([h,s]):f===d?t.push([d,s]):f===y&&s.length&&t.push([y,s]),t.push([c]),s="",f=l)}return f===l&&s.length?(t.push([l,s]),s=""):f===y&&s.length?(t.push([y,s]),s=""):f===w&&s.length?(t.push([y,s]),s=""):f===m&&s.length?(t.push([y,s]),s=""):f===d&&(t.push([d,s]),s=""),t}for(var f=l,s="",E=arguments.length,L=[],k=0;k<t.length;k++)if(k<E-1){var C=arguments[k+1],N=i(t[k]),F=f;F===w&&(F=y),F===m&&(F=y),F===v&&(F=y),F===p&&(F=d),N.push([u,F,C]),L.push.apply(L,N)}else L.push.apply(L,i(t[k]));for(var S=[null,{},[]],x=[[S,-1]],k=0;k<L.length;k++){var M=x[x.length-1][0],N=L[k],D=N[0];if(D===h&&/^\//.test(N[1])){var T=x[x.length-1][1];x.length>1&&(x.pop(),x[x.length-1][0][2][T]=e(M[0],M[1],M[2].length?M[2]:void 0))}else if(D===h){var j=[N[1],{},[]];M[2].push(j),x.push([j,M[2].length-1])}else if(D===d||D===u&&N[1]===d){for(var K,R="";k<L.length;k++)if(L[k][0]===d)R=a(R,L[k][1]);else{if(L[k][0]!==u||L[k][1]!==d)break;if("object"!=typeof L[k][2]||R)R=a(R,L[k][2]);else for(K in L[k][2])L[k][2].hasOwnProperty(K)&&!M[1][K]&&(M[1][K]=L[k][2][K])}L[k][0]===b&&k++;for(var q=k;k<L.length;k++)if(L[k][0]===y||L[k][0]===d)M[1][R]?M[1][R]=a(M[1][R],L[k][1]):M[1][R]=o(L[k][1]);else{if(L[k][0]!==u||L[k][1]!==y&&L[k][1]!==d){!R.length||M[1][R]||k!==q||L[k][0]!==c&&L[k][0]!==A||(M[1][R]=R.toLowerCase());break}M[1][R]?M[1][R]=a(M[1][R],L[k][2]):M[1][R]=o(L[k][2])}}else if(D===d)M[1][N[1]]=!0;else if(D===u&&N[1]===d)M[1][N[2]]=!0;else if(D===c){if(r(M[0])&&x.length){var T=x[x.length-1][1];x.pop(),x[x.length-1][0][2][T]=e(M[0],M[1],M[2].length?M[2]:void 0)}}else if(D===u&&N[1]===l)void 0===N[2]||null===N[2]?N[2]="":N[2]||(N[2]=a("",N[2])),Array.isArray(N[2][0])?M[2].push.apply(M[2],N[2]):M[2].push(N[2]);else if(D===l)M[2].push(N[1]);else if(D!==b&&D!==A)throw new Error("unhandled: "+D)}if(S[2].length>1&&/^\s*$/.test(S[2][0])&&S[2].shift(),S[2].length>2||2===S[2].length&&/\S/.test(S[2][1]))throw new Error("multiple root elements must be wrapped in an enclosing tag");return Array.isArray(S[2][0])&&"string"==typeof S[2][0][0]&&Array.isArray(S[2][0][2])&&(S[2][0]=e(S[2][0][0],S[2][0][1],S[2][0][2])),S[2][0]}},L=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-ï¿¿_:-]+)*$"),k=function(e){function t(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}function n(e,t,n){h(p,c=t(e,v),n,0)}function r(e,t){var n,r={};if(o(typeof t)||Array.isArray(t))return t;for(n in e)r[n]=e[n];for(n in t)r[n]=t[n];return r}function o(e){return"string"===e||"number"===e||"boolean"===e}function a(e,t){setTimeout(function(){e(t)},0)}function i(e,t){return e.tag!==t.tag||typeof e!=typeof t||o(typeof e)&&e!==t}function f(e){var t;if(o(typeof e))t=document.createTextNode(e);else{t=e.data&&e.data.ns?document.createElementNS(e.data.ns,e.tag):document.createElement(e.tag);for(var n in e.data)"oncreate"===n?a(e.data[n],t):u(t,n,e.data[n]);for(var r=0;r<e.children.length;r++)t.appendChild(f(e.children[r]))}return t}function s(e,t,n){e.removeAttribute("className"===t?"class":t),"boolean"!=typeof n&&"true"!==n&&"false"!==n||(e[t]=!1)}function u(e,t,n,r){if("style"===t)for(var o in n)e.style[o]=n[o];else if("on"===t.substr(0,2)){var a=t.substr(2).toLowerCase();e.removeEventListener(a,r),e.addEventListener(a,n)}else"false"===n||n===!1?(e.removeAttribute(t),e[t]=!1):(e.setAttribute(t,n),e[t]=n)}function l(e,t,n){for(var o in r(n,t)){var i=t[o],f=n[o];void 0===i?s(e,o,f):i!==f&&("onupdate"===o?a(i,e):u(e,o,i,f))}}function h(e,t,n,r){if(void 0===n)e.appendChild(f(t));else if(void 0===t){for(;r>0&&!e.childNodes[r];)r--;var o=e.childNodes[r];if(n&&n.data){var s=n.data.onremove;s&&a(s,o)}e.removeChild(o)}else if(i(t,n))e.replaceChild(f(t),e.childNodes[r]);else if(t.tag){var o=e.childNodes[r];l(o,t.data,n.data);for(var u=t.children.length,c=n.children.length,p=0;p<u||p<c;p++)h(o,t.children[p],n.children[p],p)}}var c,p,d=e.model,g=e.view,v={},y=e.effects||{},m=e.update||{},w=e.subscriptions,b=e.router||Function.prototype,A=r({onAction:Function.prototype,onUpdate:Function.prototype,onError:function(e){throw e}},e.hooks);for(var E in r(m,y))!function(e){v[e]=function(t){A.onAction(e,t);var o=y[e];if(o)return o(d,v,t,A.onError);var a=m[e],i=d;n(d=r(d,a(d,t)),g,c),A.onUpdate(i,d,t)}}(E);t(function(){p=e.root||document.body.appendChild(document.createElement("div")),"function"==typeof g&&n(d,g),b(r(e,{render:function(e){n(d,g=e?e:g,c)}}));for(var t in w)w[t](d,v,A.onError)})},C=o,N={router:a,html:E(C),app:k,h:C};return N});
//# sourceMappingURL=hyperapp.js.map
