!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.hyperapp=e.hyperapp||{})}(this,function(e){"use strict";function t(e,n,o){n.ns="http://www.w3.org/2000/svg";for(var r=0;r<o.length;r++){var a=o[r];a.data&&t(a.tag,a.data,a.children)}}var n=function(e,n){n=n||{};var o=[];o.push.apply(o,arguments),o.shift(),o.shift();var r=o[0];return o=Array.isArray(r)||void 0===r?r:o,"function"==typeof e?e(n,o||[]):("svg"===e&&t(e,n,o),{tag:e,data:n,children:[].concat.apply([],o)})},o=function(e){function t(e,n,a,i){Object.keys(n).forEach(function(c){e[c]||(e[c]={});var f=i?i+"."+c:c,d=n[c];"function"==typeof d?e[c]=function(e){return C.onAction(f,e),a?(C.onUpdate(h,h=r(h,d(h,e)),e),o(h,y,p),m):d(h,m,e,C.onError)}:t(e[c],d,a,f)})}function n(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}function o(e,t,n){s(v,p=t(e,m),n,0);for(var o=0;o<A.length;o++)A[o]();A=[]}function r(e,t){var n,o={};if(a(t)||Array.isArray(t))return t;for(n in e)o[n]=e[n];for(n in t)o[n]=t[n];return o}function a(e){return e=typeof e,"string"===e||"number"===e||"boolean"===e}function i(e,t){setTimeout(function(){e(t)},0)}function c(e,t){return e.tag!==t.tag||typeof e!=typeof t||a(e)&&e!==t}function f(e){var t;if(a(e))t=document.createTextNode(e);else{t=e.data&&e.data.ns?document.createElementNS(e.data.ns,e.tag):document.createElement(e.tag);for(var n in e.data)"oncreate"===n?i(e.data[n],t):u(t,n,e.data[n]);for(var o=0;o<e.children.length;o++){var r=e.children[o];void 0!==r&&"boolean"!=typeof r&&null!==r&&t.appendChild(f(r))}}return t}function d(e,t,n){e.removeAttribute("className"===t?"class":t),"boolean"!=typeof n&&"true"!==n&&"false"!==n||(e[t]=!1)}function u(e,t,n,o){if("style"===t)for(var r in n)e.style[r]=n[r];else if("o"===t[0]&&"n"===t[1]){var a=t.substr(2);e.removeEventListener(a,o),e.addEventListener(a,n)}else"false"===n||n===!1?(e.removeAttribute(t),e[t]=!1):(e.setAttribute(t,n),"http://www.w3.org/2000/svg"!==e.namespaceURI&&(e[t]=n))}function l(e,t,n){for(var o in r(n,t)){var a=t[o],c=n[o],f=e[o];void 0===a?d(e,o,c):"onupdate"===o?i(a,e):(a!==c||"boolean"==typeof f&&f!==a)&&u(e,o,a,c)}}function s(e,t,n,o){if(void 0===n)e.appendChild(f(t));else if(void 0===t){var r=e.childNodes[o];A.push(e.removeChild.bind(e,r)),n&&n.data&&n.data.onremove&&i(n.data.onremove,r)}else if(c(t,n)){var r=e.childNodes[o];if("boolean"==typeof t)e.removeChild(r);else{var a=f(t);void 0===r?e.appendChild(a):e.replaceChild(a,r)}}else if(t.tag){var r=e.childNodes[o];l(r,t.data,n.data);for(var d=t.children.length,u=n.children.length,p=0;p<d||p<u;p++){var v=t.children[p];null!==v&&s(r,v,n.children[p],p)}}}var p,v,h=e.model,y=e.view,m={},g=e.effects||{},w=e.reducers||{},b=e.subscriptions,E=e.router,A=[],C=r({onAction:Function.prototype,onUpdate:Function.prototype,onError:function(e){throw e}},e.hooks);t(m,g,!1),t(m,w,!0),n(function(){v=e.root||document.body.appendChild(document.createElement("div")),"function"==typeof y&&o(h,y),E&&E(function(e){o(h,y=e?e:y,p)},e);for(var t in b)b[t](h,m,C.onError)})},r=function(e,t){function n(t){e(o(a,t)),history.pushState({},"",t)}function o(e,t){for(var o in e){var a,i=r(o),c={};if(t.replace(new RegExp(i.re,"g"),function(){for(var t=1;t<arguments.length-2;t++)c[i.keys.shift()]=arguments[t];a=function(t,r){return r.setLocation=n,e[o](t,r,c)}}),a)return a}return e["/"]}function r(e){var t=[];return{re:"^"+e.replace(/\//g,"\\/").replace(/:([A-Za-z0-9_]+)/g,function(e,n){return t.push(n),"([A-Za-z0-9_]+)"})+"/?$",keys:t}}var a=t.view;window.addEventListener("popstate",function(){e(o(a,location.pathname))}),window.addEventListener("click",function(e){if(!(e.metaKey||e.shiftKey||e.ctrlKey||e.altKey)){for(var t=e.target;t&&"a"!==t.localName;)t=t.parentNode;if(t&&t.host===location.host&&!t.hasAttribute("data-no-routing")){var o=document.querySelector(""===t.hash?o:t.hash);o?o.scrollIntoView(!0):(e.preventDefault(),n(t.pathname))}}}),e(o(a,location.pathname))};e.h=n,e.app=o,e.router=r});
//# sourceMappingURL=hyperapp.js.map
