!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OptimalSelect=t():e.OptimalSelect=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var u=r[n]={exports:{},id:n,loaded:!1};return e[n].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.common=t.optimize=t.getMultiSelector=t.getSingleSelector=t.select=void 0;var o=r(5);Object.defineProperty(t,"getSingleSelector",{enumerable:!0,get:function(){return o.getSingleSelector}}),Object.defineProperty(t,"getMultiSelector",{enumerable:!0,get:function(){return o.getMultiSelector}});var i=u(o),a=r(3),c=u(a),f=r(2),l=n(f);t.select=i.default,t.optimize=c.default,t.common=l,t.default=i.default},function(e,t){(function(r){"use strict";function n(e){return Array.isArray(e)?e:Array.from(e)}function u(e,t){if(r.document)return!1;var u=t.context;r.document=u||function(){for(var t=e;t.parent;)t=t.parent;return t}();var a=Object.getPrototypeOf(r.document);return Object.getOwnPropertyDescriptor(a,"childTags")||Object.defineProperty(a,"childTags",{enumerable:!0,get:function(){return this.children.filter(function(e){return"tag"===e.type||"script"===e.type||"style"===e.type})}}),Object.getOwnPropertyDescriptor(a,"attributes")||Object.defineProperty(a,"attributes",{enumerable:!0,get:function(){var e=this.attribs,t=Object.keys(e),r=t.reduce(function(t,r,n){return t[n]={name:r,value:e[r]},t},{});return Object.defineProperty(r,"length",{enumerable:!1,configurable:!1,value:t.length}),r}}),a.getAttribute||(a.getAttribute=function(e){return this.attribs[e]||null}),a.getElementsByTagName||(a.getElementsByTagName=function(e){var t=[];return i(this.childTags,function(r){r.name!==e&&"*"!==e||t.push(r)}),t}),a.getElementsByClassName||(a.getElementsByClassName=function(e){var t=e.trim().replace(/\s+/g," ").split(" "),r=[];return i([this],function(e){var n=e.attribs.class;n&&t.every(function(e){return n.indexOf(e)>-1})&&r.push(e)}),r}),a.querySelectorAll||(a.querySelectorAll=function(e){var t=this;e=e.replace(/(>)(\S)/g,"$1 $2").trim();var r=o(e),u=n(r),i=u[0],a=u.slice(1),c=a.length;return i(this).filter(function(e){for(var r=0;r<c;){if(e=a[r](e,t),!e)return!1;r+=1}return!0})}),a.contains||(a.contains=function(e){var t=!1;return i([this],function(r,n){r===e&&(t=!0,n())}),t}),!0}function o(e){return e.split(" ").reverse().map(function(e,t){var r=0===t,n=e.split(":"),u=f(n,2),o=u[0],l=u[1],s=null,d=null;if(function(){switch(!0){case/>/.test(o):d=function(e){return function(t){return t(e.parent)&&e.parent}};break;case/^\./.test(o):var e=o.substr(1).split(".");s=function(t){var r=t.attribs.class;return r&&e.every(function(e){return r.indexOf(e)>-1})},d=function(t,n){return r?t.getElementsByClassName(e.join(" ")):"function"==typeof t?t(s):a(t,n,s)};break;case/^\[/.test(o):var t=o.replace(/\[|\]|"/g,"").split("="),n=f(t,2),u=n[0],l=n[1];s=function(e){var t=Object.keys(e.attribs).indexOf(u)>-1;return!(!t||l&&e.attribs[u]!==l)},d=function(e,t){if(r){var n=function(){var t=[];return i([e],function(e){s(e)&&t.push(e)}),{v:t}}();if("object"===("undefined"==typeof n?"undefined":c(n)))return n.v}return"function"==typeof e?e(s):a(e,t,s)};break;case/^#/.test(o):var p=o.substr(1);s=function(e){return e.attribs.id===p},d=function(e,t){if(r){var n=function(){var t=[];return i([e],function(e,r){s(e)&&(t.push(e),r())}),{v:t}}();if("object"===("undefined"==typeof n?"undefined":c(n)))return n.v}return"function"==typeof e?e(s):a(e,t,s)};break;case/\*/.test(o):s=function(e){return!0},d=function(e,t){if(r){var n=function(){var t=[];return i([e],function(e){return t.push(e)}),{v:t}}();if("object"===("undefined"==typeof n?"undefined":c(n)))return n.v}return"function"==typeof e?e(s):a(e,t,s)};break;default:s=function(e){return e.name===o},d=function(e,t){if(r){var n=function(){var t=[];return i([e],function(e){s(e)&&t.push(e)}),{v:t}}();if("object"===("undefined"==typeof n?"undefined":c(n)))return n.v}return"function"==typeof e?e(s):a(e,t,s)}}}(),!l)return d;var p=l.match(/-(child|type)\((\d+)\)$/),v=p[1],y=parseInt(p[2],10)-1,g=function(e){if(e){var t=e.parent.childTags;"type"===v&&(t=t.filter(s));var r=t.findIndex(function(t){return t===e});if(r===y)return!0}return!1};return function(e){var t=d(e);return r?t.reduce(function(e,t){return g(t)&&e.push(t),e},[]):g(t)&&t}})}function i(e,t){e.forEach(function(e){var r=!0;t(e,function(){return r=!1}),e.childTags&&r&&i(e.childTags,t)})}function a(e,t,r){for(;e.parent;){if(e=e.parent,r(e))return e;if(e===t)break}return null}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},f=function(){function e(e,t){var r=[],n=!0,u=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(c){u=!0,o=c}finally{try{!n&&a.return&&a.return()}finally{if(u)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=u,e.exports=t.default}).call(t,function(){return this}())},function(e,t){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.root,n=void 0===r?document:r,u=(t.skip,t.ignore,[]);e.forEach(function(e,t){for(var r=[];e!==n;)e=e.parentNode,r.unshift(e);u[t]=r}),u.sort(function(e,t){return e.length-t.length});for(var o=u.shift(),i=null,a=function(){var e=o[c],t=u.some(function(t){return!t.some(function(t){return t===e})});return t?"break":void(i=e)},c=0,f=o.length;c<f;c++){var l=a();if("break"===l)break}return i}function n(e){var t={classes:[],attributes:{},tag:null};return e.forEach(function(e){var r=t.classes,n=t.attributes,u=t.tag;if(void 0!==r){var o=e.getAttribute("class");o?(o=o.trim().split(" "),r.length?(r=r.filter(function(e){return o.some(function(t){return t===e})}),r.length?t.classes=r:delete t.classes):t.classes=o):delete t.classes}if(void 0!==n&&!function(){var r=e.attributes,u=Object.keys(r).reduce(function(e,t){var n=r[t],u=n.name;return"class"!==u&&(e[u]=n.value),e},{}),o=Object.keys(u),i=Object.keys(n);o.length?i.length?(n=i.reduce(function(e,t){var r=n[t];return r===u[t]&&(e[t]=r),e},{}),Object.keys(n).length?t.attributes=n:delete t.attributes):t.attributes=u:delete t.attributes}(),void 0!==u){var i=e.tagName.toLowerCase();u?i!==u&&delete t.tag:t.tag=i}}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.getCommonAncestor=r,t.getCommonProperties=n},function(e,t,r){(function(n){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Array.isArray(t)||(t=t.length?[].concat(o(t)):[t]),!t.length||t.some(function(e){return 1!==e.nodeType}))throw new Error('Invalid input - to compare HTMLElements its necessary to provide a reference of the selected node(s)! (missing "elements")');var u=(0,l.default)(t[0],r),i=e.replace(/> /g,">").split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)/);if(i.length<3)return a("",e,"",t);for(var c=[i.pop()];i.length>1;){var f=i.pop(),s=i.join(" "),d=c.join(" "),p=s+" "+d,v=document.querySelectorAll(p);v.length!==t.length&&c.unshift(a(s,f,d,t))}return c.unshift(i[0]),i=c,i[0]=a("",i[0],i.slice(1).join(" "),t),i[i.length-1]=a(i.slice(0,-1).join(" "),i[i.length-1],"",t),u&&delete n.document,i.join(" ").replace(/>/g,"> ").trim()}function a(e,t,r,n){if(e.length&&(e+=" "),r.length&&(r=" "+r),/\[*\]/.test(t)){var u=t.replace(/=.*$/,"]"),o=""+e+u+r,i=document.querySelectorAll(o);if(c(i,n))t=u;else for(var a=document.querySelectorAll(""+e+u),f=function(){var u=a[l];if(n.some(function(e){return u.contains(e)})){var f=u.tagName.toLowerCase();return o=""+e+f+r,i=document.querySelectorAll(o),c(i,n)&&(t=f),"break"}},l=0,s=a.length;l<s;l++){var o,i,d=f();if("break"===d)break}}if(/>/.test(t)){var p=t.replace(/>/,""),o=""+e+p+r,i=document.querySelectorAll(o);c(i,n)&&(t=p)}if(/:nth-child/.test(t)){var v=t.replace(/nth-child/g,"nth-of-type"),o=""+e+v+r,i=document.querySelectorAll(o);c(i,n)&&(t=v)}if(/\.\S+\.\S+/.test(t)){for(var y=t.trim().split(".").slice(1).map(function(e){return"."+e}).sort(function(e,t){return e.length-t.length});y.length;){var g=t.replace(y.shift(),"").trim(),o=""+e+g+r;if(!o||">"===g)break;var i=document.querySelectorAll(o);c(i,n)&&(t=g)}if(t&&t.match(/\./g).length>2)for(var m=document.querySelectorAll(""+e+t),h=function(){var u=m[l];if(n.some(function(e){return u.contains(e)})){var a=u.tagName.toLowerCase();return o=""+e+a+r,i=document.querySelectorAll(o),c(i,n)&&(t=a),"break"}},l=0,s=m.length;l<s;l++){var o,i,b=h();if("break"===b)break}}return t}function c(e,t){var r=e.length;return r===t.length&&t.every(function(t){for(var n=0;n<r;n++)if(e[n]===t)return!0;return!1})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var f=r(1),l=u(f);e.exports=t.default}).call(t,function(){return this}())},function(e,t){"use strict";function r(e,t){var r=t.root,p=void 0===r?document:r,v=t.skip,y=void 0===v?null:v,g=t.ignore,m=void 0===g?{}:g,h=[],b=e,j=h.length,A=y&&(Array.isArray(y)?y:[y]).map(function(e){return"function"!=typeof e?function(t){return t===e}:e}),S=function(e){return y&&A.some(function(t){return t(e)})},O=!1;for(Object.keys(m).forEach(function(e){"class"===e&&(O=!0);var t=m[e];"function"!=typeof t&&("number"==typeof t&&(t=t.toString()),"string"==typeof t&&(t=new RegExp(t)),m[e]=t.test.bind(t))}),O&&!function(){var e=m.attribute;m.attribute=function(t,r,n){return m.class(r)||e&&e(t,r,n)}}();b!==p;){if(S(b)!==!0){if(d(b,h,m))break;if(n(b,h,m,p))break;if(i(b,h,m,p))break;if(f(b,h,m,p))break;u(b,h,m),h.length===j&&a(b,h,m),h.length===j&&l(b,h,m),h.length===j&&o(b,h,m),h.length===j&&c(b,h,m),h.length===j&&s(b,h,m)}b=b.parentNode,j=h.length}return b===p&&h.unshift("*"),h.join(" ")}function n(e,t,r,n){return p(e,t,r,n)}function u(e,t,r){return p(e,t,r,e.parentNode)}function o(e,t,r){var n=e.getAttribute("class");return!m(r.class,n)&&g(e,t,"."+n.trim().replace(/\s+/g,"."))}function i(e,t,r,n){return v(e,t,r,n)}function a(e,t,r){return v(e,t,r,e.parentNode)}function c(e,t,r){var n=e.attributes;return Object.keys(n).some(function(u){var o=n[u],i=o.name,a=o.value;if(m(r.attribute,i,a,h.attribute))return!1;var c="["+i+'="'+a+'"]';return g(e,t,c)})}function f(e,t,r,n){return y(e,t,r,n)}function l(e,t,r){return y(e,t,r,e.parentNode)}function s(e,t,r){var n=e.tagName.toLowerCase();return!m(r.tag,n)&&g(e,t,n)}function d(e,t,r){var n=e.getAttribute("id");return!m(r.id,n)&&(t.unshift("#"+n),!0)}function p(e,t,r,n){var u=e.getAttribute("class");if(m(r.class,u))return!1;var o=n.getElementsByClassName(u);return 1===o.length&&(t.unshift("."+u.trim().replace(/\s+/g,".")),!0)}function v(e,t,r,n){var u=e.attributes;return Object.keys(u).some(function(e){var o=u[e],i=o.name,a=o.value;if(m(r.attribute,i,a,h.attribute))return!1;var c="["+i+'="'+a+'"]',f=n.querySelectorAll(c);return 1===f.length?(t.unshift(c),!0):void 0})}function y(e,t,r,n){var u=e.tagName.toLowerCase();if(m(r.tag,u))return!1;var o=n.getElementsByTagName(u);return 1===o.length&&(t.unshift(u),!0)}function g(e,t,r){for(var n=e.parentNode,u=n.childTags||n.children,o=0,i=u.length;o<i;o++)if(u[o]===e)return t.unshift("> "+r+":nth-child("+(o+1)+")"),!0;return!1}function m(e,t,r,n){if(!t)return!0;var u=e||n;return!!u&&u(t,r||t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var h={attribute:function(e){return["style","data-reactid","data-react-checksum"].indexOf(e)>-1}};e.exports=t.default},function(e,t,r){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function u(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.length?a(e,t):i(e,t)}function i(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(3===t.nodeType&&(t=t.parentNode),1!==t.nodeType)throw new Error('Invalid input - only HTMLElements or representations of them are supported! (not "'+("undefined"==typeof t?"undefined":f(t))+'")');var n=(0,s.default)(t,r),u=(0,p.default)(t,r),o=(0,y.default)(u,t,r);return n&&delete e.document,o}function a(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Array.isArray(t)||(t=[].concat(u(t))),t.some(function(e){return 1!==e.nodeType}))throw new Error("Invalid input - only an Array of HTMLElements or representations of them is supported!");var n=(0,s.default)(t[0],r),o=(0,g.getCommonAncestor)(t,r),a=i(o,r),f=c(t),l=f[0],d=(0,y.default)(a+" "+l,t,r),p=[].concat(u(document.querySelectorAll(d)));return t.every(function(e){return p.some(function(t){return t===e})})?(n&&delete e.document,d):console.warn("\n      The selected elements can't be efficiently mapped.\n      Its probably best to use multiple single selectors instead!\n    ",t)}function c(e){var t=(0,g.getCommonProperties)(e),r=t.classes,n=t.attributes,u=t.tag,o=[];if(u&&o.push(u),r){var i=r.map(function(e){return"."+e}).join("");o.push(i)}if(n){var a=Object.keys(n).reduce(function(e,t){return e.push("["+t+'="'+n[t]+'"]'),e},[]).join("");o.push(a)}return o.length,[o.join("")]}Object.defineProperty(t,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.default=o,t.getSingleSelector=i,t.getMultiSelector=a;var l=r(1),s=n(l),d=r(4),p=n(d),v=r(3),y=n(v),g=r(2)}).call(t,function(){return this}())}])});
//# sourceMappingURL=optimal-select.min.js.map