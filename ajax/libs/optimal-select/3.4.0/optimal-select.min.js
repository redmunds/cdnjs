!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.OptimalSelect=e():t.OptimalSelect=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var u=r[n]={exports:{},id:n,loaded:!1};return t[n].call(u.exports,u,u.exports,e),u.loaded=!0,u.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function u(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.common=e.optimize=e.select=void 0;var o=r(5),i=u(o),a=r(3),f=u(a),c=r(2),l=n(c);e.select=i.default,e.optimize=f.default,e.common=l,e.default=i.default},function(t,e){(function(r){"use strict";function n(t){return Array.isArray(t)?t:Array.from(t)}function u(t,e){if(r.document)return!1;var u=e.context;r.document=u||function(){for(var e=t;e.parent;)e=e.parent;return e}();var a=Object.getPrototypeOf(r.document);return Object.getOwnPropertyDescriptor(a,"childTags")||Object.defineProperty(a,"childTags",{enumerable:!0,get:function(){return this.children.filter(function(t){return"tag"===t.type||"script"===t.type||"style"===t.type})}}),Object.getOwnPropertyDescriptor(a,"attributes")||Object.defineProperty(a,"attributes",{enumerable:!0,get:function(){var t=this.attribs,e=Object.keys(t),r=e.reduce(function(e,r,n){return e[n]={name:r,value:t[r]},e},{});return Object.defineProperty(r,"length",{enumerable:!1,configurable:!1,value:e.length}),r}}),a.getAttribute||(a.getAttribute=function(t){return this.attribs[t]||null}),a.getElementsByTagName||(a.getElementsByTagName=function(t){var e=[];return i(this.childTags,function(r){r.name!==t&&"*"!==t||e.push(r)}),e}),a.getElementsByClassName||(a.getElementsByClassName=function(t){var e=t.trim().replace(/\s+/g," ").split(" "),r=[];return i([this],function(t){var n=t.attribs.class;n&&e.every(function(t){return n.indexOf(t)>-1})&&r.push(t)}),r}),a.querySelectorAll||(a.querySelectorAll=function(t){var e=this;t=t.replace(/(>)(\S)/g,"$1 $2").trim();var r=o(t),u=n(r),i=u[0],a=u.slice(1),f=a.length;return i(this).filter(function(t){for(var r=0;r<f;){if(t=a[r](t,e),!t)return!1;r+=1}return!0})}),a.contains||(a.contains=function(t){var e=!1;return i([this],function(r,n){r===t&&(e=!0,n())}),e}),!0}function o(t){return t.split(" ").reverse().map(function(t,e){var r=0===e,n=t.split(":"),u=c(n,2),o=u[0],l=u[1],s=null,d=null;if(function(){switch(!0){case/>/.test(o):d=function(t){return function(e){return e(t.parent)&&t.parent}};break;case/^\./.test(o):var t=o.substr(1).split(".");s=function(e){var r=e.attribs.class;return r&&t.every(function(t){return r.indexOf(t)>-1})},d=function(e,n){return r?e.getElementsByClassName(t.join(" ")):"function"==typeof e?e(s):a(e,n,s)};break;case/^\[/.test(o):var e=o.replace(/\[|\]|"/g,"").split("="),n=c(e,2),u=n[0],l=n[1];s=function(t){var e=Object.keys(t.attribs).indexOf(u)>-1;return!(!e||l&&t.attribs[u]!==l)},d=function(t,e){if(r){var n=function(){var e=[];return i([t],function(t){s(t)&&e.push(t)}),{v:e}}();if("object"===("undefined"==typeof n?"undefined":f(n)))return n.v}return"function"==typeof t?t(s):a(t,e,s)};break;case/^#/.test(o):var p=o.substr(1);s=function(t){return t.attribs.id===p},d=function(t,e){if(r){var n=function(){var e=[];return i([t],function(t,r){s(t)&&(e.push(t),r())}),{v:e}}();if("object"===("undefined"==typeof n?"undefined":f(n)))return n.v}return"function"==typeof t?t(s):a(t,e,s)};break;case/\*/.test(o):s=function(t){return!0},d=function(t,e){if(r){var n=function(){var e=[];return i([t],function(t){return e.push(t)}),{v:e}}();if("object"===("undefined"==typeof n?"undefined":f(n)))return n.v}return"function"==typeof t?t(s):a(t,e,s)};break;default:s=function(t){return t.name===o},d=function(t,e){if(r){var n=function(){var e=[];return i([t],function(t){s(t)&&e.push(t)}),{v:e}}();if("object"===("undefined"==typeof n?"undefined":f(n)))return n.v}return"function"==typeof t?t(s):a(t,e,s)}}}(),!l)return d;var p=l.match(/-(child|type)\((\d+)\)$/),v=p[1],y=parseInt(p[2],10)-1,h=function(t){if(t){var e=t.parent.childTags;"type"===v&&(e=e.filter(s));var r=e.findIndex(function(e){return e===t});if(r===y)return!0}return!1};return function(t){var e=d(t);return r?e.reduce(function(t,e){return h(e)&&t.push(e),t},[]):h(e)&&e}})}function i(t,e){t.forEach(function(t){var r=!0;e(t,function(){return r=!1}),t.childTags&&r&&i(t.childTags,e)})}function a(t,e,r){for(;t.parent;){if(t=t.parent,r(t))return t;if(t===e)break}return null}Object.defineProperty(e,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},c=function(){function t(t,e){var r=[],n=!0,u=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(f){u=!0,o=f}finally{try{!n&&a.return&&a.return()}finally{if(u)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=u,t.exports=e.default}).call(e,function(){return this}())},function(t,e){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.root,n=void 0===r?document:r,u=(e.skip,e.ignore,[]);t.forEach(function(t,e){for(var r=[];t!==n;)t=t.parentNode,r.unshift(t);u[e]=r}),u.sort(function(t,e){return t.length-e.length});for(var o=u.shift(),i=null,a=function(){var t=o[f],e=u.some(function(e){return!e.some(function(e){return e===t})});return e?"break":void(i=t)},f=0,c=o.length;f<c;f++){var l=a();if("break"===l)break}return i}function n(t){var e={classes:[],attributes:{},tag:null};return t.forEach(function(t){var r=e.classes,n=e.attributes,u=e.tag;if(void 0!==r){var o=t.getAttribute("class");o?(o=o.trim().split(" "),r.length?(r=r.filter(function(t){return o.some(function(e){return e===t})}),r.length?e.classes=r:delete e.classes):e.classes=o):delete e.classes}if(void 0!==n&&!function(){var r=t.attributes,u=Object.keys(r).reduce(function(t,e){var n=r[e],u=n.name;return"class"!==u&&(t[u]=n.value),t},{}),o=Object.keys(u),i=Object.keys(n);o.length?i.length?(n=i.reduce(function(t,e){var r=n[e];return r===u[e]&&(t[e]=r),t},{}),Object.keys(n).length?e.attributes=n:delete e.attributes):e.attributes=u:delete e.attributes}(),void 0!==u){var i=t.tagName.toLowerCase();u?i!==u&&delete e.tag:e.tag=i}}),e}Object.defineProperty(e,"__esModule",{value:!0}),e.getCommonAncestor=r,e.getCommonProperties=n},function(t,e,r){(function(n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function i(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Array.isArray(e)||(e=e.length?[].concat(o(e)):[e]),!e.length||e.some(function(t){return 1!==t.nodeType}))throw new Error('Invalid input - to compare HTMLElements its necessary to provide a reference of the selected node(s)! (missing "elements")');var u=(0,l.default)(e[0],r),i=t.replace(/> /g,">").split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)/);if(i.length<3)return a("",t,"",e);for(var f=[i.pop()];i.length>1;){var c=i.pop(),s=i.join(" "),d=f.join(" "),p=s+" "+d,v=document.querySelectorAll(p);v.length!==e.length&&f.unshift(a(s,c,d,e))}return f.unshift(i[0]),i=f,i[0]=a("",i[0],i.slice(1).join(" "),e),i[i.length-1]=a(i.slice(0,-1).join(" "),i[i.length-1],"",e),u&&delete n.document,i.join(" ").replace(/>/g,"> ").trim()}function a(t,e,r,n){if(t.length&&(t+=" "),r.length&&(r=" "+r),/\[*\]/.test(e)){var u=e.replace(/=.*$/,"]"),o=""+t+u+r,i=document.querySelectorAll(o);if(f(i,n))e=u;else for(var a=document.querySelectorAll(""+t+u),c=function(){var u=a[l];if(n.some(function(t){return u.contains(t)})){var c=u.tagName.toLowerCase();return o=""+t+c+r,i=document.querySelectorAll(o),f(i,n)&&(e=c),"break"}},l=0,s=a.length;l<s;l++){var o,i,d=c();if("break"===d)break}}if(/>/.test(e)){var p=e.replace(/>/,""),o=""+t+p+r,i=document.querySelectorAll(o);f(i,n)&&(e=p)}if(/:nth-child/.test(e)){var v=e.replace(/nth-child/g,"nth-of-type"),o=""+t+v+r,i=document.querySelectorAll(o);f(i,n)&&(e=v)}if(/\.\S+\.\S+/.test(e)){for(var y=e.trim().split(".").slice(1).map(function(t){return"."+t}).sort(function(t,e){return t.length-e.length});y.length;){var h=e.replace(y.shift(),"").trim(),o=""+t+h+r;if(!o||">"===h)break;var i=document.querySelectorAll(o);f(i,n)&&(e=h)}if(e&&e.match(/\./g).length>2)for(var m=document.querySelectorAll(""+t+e),g=function(){var u=m[l];if(n.some(function(t){return u.contains(t)})){var a=u.tagName.toLowerCase();return o=""+t+a+r,i=document.querySelectorAll(o),f(i,n)&&(e=a),"break"}},l=0,s=m.length;l<s;l++){var o,i,b=g();if("break"===b)break}}return e}function f(t,e){var r=t.length;return r===e.length&&e.every(function(e){for(var n=0;n<r;n++)if(t[n]===e)return!0;return!1})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var c=r(1),l=u(c);t.exports=e.default}).call(e,function(){return this}())},function(t,e){"use strict";function r(t,e){var r=e.root,p=void 0===r?document:r,v=e.skip,y=void 0===v?null:v,h=e.ignore,m=void 0===h?{}:h,g=[],b=t,j=g.length,A=y&&(Array.isArray(y)?y:[y]).map(function(t){return"function"!=typeof t?function(e){return e===t}:t}),O=function(t){return y&&A.some(function(e){return e(t)})},k=!1;for(Object.keys(m).forEach(function(t){"class"===t&&(k=!0);var e=m[t];"function"!=typeof e&&("number"==typeof e&&(e=e.toString()),"string"==typeof e&&(e=new RegExp(e)),m[t]=e.test.bind(e))}),k&&!function(){var t=m.attribute;m.attribute=function(e,r,n){return m.class(r)||t&&t(e,r,n)}}();b!==p;){if(O(b)!==!0){if(d(b,g,m))break;if(n(b,g,m,p))break;if(i(b,g,m,p))break;if(c(b,g,m,p))break;u(b,g,m),g.length===j&&a(b,g,m),g.length===j&&l(b,g,m),g.length===j&&o(b,g,m),g.length===j&&f(b,g,m),g.length===j&&s(b,g,m)}b=b.parentNode,j=g.length}return b===p&&g.unshift("*"),g.join(" ")}function n(t,e,r,n){return p(t,e,r,n)}function u(t,e,r){return p(t,e,r,t.parentNode)}function o(t,e,r){var n=t.getAttribute("class");return!m(r.class,n)&&h(t,e,"."+n.trim().replace(/\s+/g,"."))}function i(t,e,r,n){return v(t,e,r,n)}function a(t,e,r){return v(t,e,r,t.parentNode)}function f(t,e,r){var n=t.attributes;return Object.keys(n).some(function(u){var o=n[u],i=o.name,a=o.value;if(m(r.attribute,i,a,g.attribute))return!1;var f="["+i+'="'+a+'"]';return h(t,e,f)})}function c(t,e,r,n){return y(t,e,r,n)}function l(t,e,r){return y(t,e,r,t.parentNode)}function s(t,e,r){var n=t.tagName.toLowerCase();return!m(r.tag,n)&&h(t,e,n)}function d(t,e,r){var n=t.getAttribute("id");return!m(r.id,n)&&(e.unshift("#"+n),!0)}function p(t,e,r,n){var u=t.getAttribute("class");if(m(r.class,u))return!1;var o=n.getElementsByClassName(u);return 1===o.length&&(e.unshift("."+u.trim().replace(/\s+/g,".")),!0)}function v(t,e,r,n){var u=t.attributes;return Object.keys(u).some(function(t){var o=u[t],i=o.name,a=o.value;if(m(r.attribute,i,a,g.attribute))return!1;var f="["+i+'="'+a+'"]',c=n.querySelectorAll(f);return 1===c.length?(e.unshift(f),!0):void 0})}function y(t,e,r,n){var u=t.tagName.toLowerCase();if(m(r.tag,u))return!1;var o=n.getElementsByTagName(u);return 1===o.length&&(e.unshift(u),!0)}function h(t,e,r){for(var n=t.parentNode,u=n.childTags||n.children,o=0,i=u.length;o<i;o++)if(u[o]===t)return e.unshift("> "+r+":nth-child("+(o+1)+")"),!0;return!1}function m(t,e,r,n){if(!e)return!0;var u=t||n;return!!u&&u(e,r||e,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var g={attribute:function(t){return["style","data-reactid","data-react-checksum"].indexOf(t)>-1}};t.exports=e.default},function(t,e,r){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function u(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.length?a(t,e):i(t,e)}function i(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(3===e.nodeType&&(e=e.parentNode),1!==e.nodeType)throw new Error('Invalid input - only HTMLElements or representations of them are supported! (not "'+("undefined"==typeof e?"undefined":c(e))+'")');var n=(0,s.default)(e,r),u=(0,p.default)(e,r),o=(0,y.default)(u,e,r);return n&&delete t.document,o}function a(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Array.isArray(e)||(e=[].concat(u(e))),e.some(function(t){return 1!==t.nodeType}))throw new Error("Invalid input - only an Array of HTMLElements or representations of them is supported!");var n=(0,s.default)(e[0],r),o=(0,h.getCommonAncestor)(e,r),a=i(o,r),c=f(e),l=c[0],d=(0,y.default)(a+" "+l,e,r),p=[].concat(u(document.querySelectorAll(d)));return e.every(function(t){return p.some(function(e){return e===t})})?(n&&delete t.document,d):console.warn("\n      The selected elements can't be efficiently mapped.\n      Its probably best to use multiple single selectors instead!\n    ",e)}function f(t){var e=(0,h.getCommonProperties)(t),r=e.classes,n=e.attributes,u=e.tag,o=[];if(u&&o.push(u),r){var i=r.map(function(t){return"."+t}).join("");o.push(i)}if(n){var a=Object.keys(n).reduce(function(t,e){return t.push("["+e+'="'+n[e]+'"]'),t},[]).join("");o.push(a)}return o.length,[o.join("")]}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.default=o,e.getSingleSelector=i,e.getMultiSelector=a;var l=r(1),s=n(l),d=r(4),p=n(d),v=r(3),y=n(v),h=r(2)}).call(e,function(){return this}())}])});
//# sourceMappingURL=optimal-select.min.js.map