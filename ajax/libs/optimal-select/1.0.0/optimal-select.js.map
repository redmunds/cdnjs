{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///optimal-select.js","webpack:///webpack/bootstrap e59f59cf4b6e4d53c17e","webpack:///./src/index.js","webpack:///./src/optimize.js","webpack:///./src/adapter.js","webpack:///./src/match.js","webpack:///./src/select.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","optimize","select","undefined","_select2","_select3","_optimize2","_optimize3","selector","element","path","replace","split","length","shortened","pop","current","prePart","join","postPart","pattern","matches","document","querySelectorAll","unshift","optimizePart","slice","trim","test","descendant","key","type","names","map","name","sort","curr","next","partial","shift","NodeList","prototype","Symbol","iterator","Array","match","node","options","checkId","checkClassGlobal","checkAttributeGlobal","checkTagGlobal","checkClassLocal","checkAttributeLocal","checkTagLocal","checkClassChild","checkAttributeChild","checkTagChild","parentNode","checkClass","className","checkChild","checkAttribute","attributes","keys","some","attribute","attributeName","concat","excludes","indexOf","attributeValue","checkTag","tagName","toLowerCase","parent","getElementsByClassName","getElementsByTagName","children","i","l","getQuerySelector","input","arguments","defaultOptions","isArray","getMultiSelector","getSingleSelector","Text","HTMLElement","Error","_match2","optimized","elements","commonParentNode","commonClassName","commonAttribute","commonTagName","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","done","console","log","longer","shorter","classNames","forEach","push","err","return","_match","_optimize"],"mappings":"CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,IACA,kBAAAG,gBAAAC,IACAD,UAAAH,GACA,gBAAAC,SACAA,QAAA,cAAAD,IAEAD,EAAA,cAAAC,KACCK,KAAA,WACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAP,OAGA,IAAAC,GAAAO,EAAAD,IACAP,WACAS,GAAAF,EACAG,QAAA,EAUA,OANAL,GAAAE,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAS,QAAA,EAGAT,EAAAD,QAvBA,GAAAQ,KAqCA,OATAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,GAGAR,EAAA,KDgBM,SAASL,EAAQD,EAASM,GAE/B,YAeA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GAbvFG,OAAOC,eAAepB,EAAS,cAC7BqB,OAAO,IAETrB,EAAQkB,QAAUlB,EAAQsB,SAAWtB,EAAQuB,OAASC,MAEtD,IAAIC,GAAWnB,EAAoB,GAE/BoB,EAAWX,EAAuBU,GAElCE,EAAarB,EAAoB,GAEjCsB,EAAab,EAAuBY,EAIxC3B,GEzEMuB,OAAMG,EAAAR,QF0EZlB,EEzEMsB,SAAQM,EAAAV,QF0EdlB,EExEMkB,QAAOQ,EAAAR,SF4ER,SAASjB,EAAQD,GAEtB,YGpEc,SAASsB,GAAUO,EAAUC,GAC1C,GAAIC,GAAOF,EAASG,QAAQ,MAAO,KAAKC,MAAM,IAE9C,IAAIF,EAAKG,OAAS,EAChB,MAAOL,EAIT,KADA,GAAMM,IAAaJ,EAAKK,OACjBL,EAAKG,OAAS,GAAI,CACvB,GAAMG,GAAUN,EAAKK,MACfE,EAAUP,EAAKQ,KAAK,KACpBC,EAAWL,EAAUI,KAAK,KAE1BE,EAAaH,EAAO,IAAIE,EACxBE,EAAUC,SAASC,iBAAiBH,EACnB,KAAnBC,EAAQR,QACVC,EAAUU,QAAQC,EAAaR,EAASD,EAASG,EAAUV,IAU/D,MAPAK,GAAUU,QAAQd,EAAK,IACvBA,EAAOI,EAGPJ,EAAK,GAAKe,EAAa,GAAIf,EAAK,GAAIA,EAAKgB,MAAM,GAAGR,KAAK,KAAMT,GAC7DC,EAAKA,EAAKG,OAAO,GAAKY,EAAaf,EAAKgB,MAAM,EAAG,IAAIR,KAAK,KAAMR,EAAKA,EAAKG,OAAO,GAAI,GAAIJ,GAElFC,EAAKQ,KAAK,KAAKP,QAAQ,KAAM,MAAMgB,OAW5C,QAASF,GAAcR,EAASD,EAASG,EAAUV,GAKjD,GAJIQ,EAAQJ,SAAQI,GAAoB,KACpCE,EAASN,SAAQM,EAAQ,IAAOA,GAGhC,IAAIS,KAAKZ,GAAU,CACrB,GAAMa,GAAab,EAAQL,QAAQ,IAAK,IACpCS,EAAO,GAAMH,EAAUY,EAAaV,EACpCE,EAAUC,SAASC,iBAAiBH,EACjB,KAAnBC,EAAQR,QAAgBQ,EAAQ,KAAOZ,IACzCO,EAAUa,GAKd,GAAI,QAAQD,KAAKZ,GAAU,CACzB,GAAMc,GAAMd,EAAQL,QAAQ,OAAQ,KAChCS,EAAO,GAAMH,EAAUa,EAAMX,EAC7BE,EAAUC,SAASC,iBAAiBH,EACjB,KAAnBC,EAAQR,QAAgBQ,EAAQ,KAAOZ,IACzCO,EAAUc,GAKd,GAAI,cAAcF,KAAKZ,GAAU,CAC/B,GAAMe,GAAOf,EAAQL,QAAQ,aAAc,eACvCS,EAAO,GAAMH,EAAUc,EAAOZ,EAC9BE,EAAUC,SAASC,iBAAiBH,EACjB,KAAnBC,EAAQR,QAAgBQ,EAAQ,KAAOZ,IACzCO,EAAUe,GAKd,GAAI,aAAaH,KAAKZ,GAGpB,IAFA,GAAMgB,GAAQhB,EAAQW,OAAOf,MAAM,KAAKc,MAAM,GAAGO,IAAI,SAACC,GHwFnD,MAAO,IGxFyDA,IACtCC,KAAK,SAACC,EAAMC,GHyFtC,MGzF+CD,GAAKvB,OAASwB,EAAKxB,SAC9DmB,EAAMnB,QAAQ,CACnB,GAAIyB,GAAUtB,EAAQL,QAAQqB,EAAMO,QAAS,IACzCnB,EAAO,GAAMH,EAAUqB,EAAUnB,EACjCE,EAAUC,SAASC,iBAAiBH,EACjB,KAAnBC,EAAQR,QAAgBQ,EAAQ,KAAOZ,IACzCO,EAAUsB,GAKhB,MAAOtB,GHfRlB,OAAOC,eAAepB,EAAS,cAC7BqB,OAAO,IAETrB,EAAQkB,QGzEeI,GHoLlB,SAASrB,EAAQD,GAEtB,YIzLuB,oBAAb6D,WAA6BA,SAASC,UAAUC,OAAOC,YAChEH,SAASC,UAAUC,OAAOC,UAAYC,MAAMH,UAAUC,OAAOC,YJ0MzD,SAAS/D,EAAQD,EAASM,GAE/B,YKzMc,SAAS4D,GAAOC,EAAMC,GAKnC,IAJA,GAAMrC,MACFD,EAAUqC,EACVjC,EAASH,EAAKG,SAEXJ,IAAYa,UAEb0B,EAAQvC,EAASC,IACjBuC,EAAiBxC,EAASC,IAC1BwC,EAAqBzC,EAASC,EAAMqC,IACpCI,EAAe1C,EAASC,KAG5B0C,EAAgB3C,EAASC,GAGrBA,EAAKG,SAAWA,GAClBwC,EAAoB5C,EAASC,EAAMqC,GAEjCrC,EAAKG,SAAWA,GAClByC,EAAc7C,EAASC,GAGrBA,EAAKG,SAAWA,GAClB0C,EAAgB9C,EAASC,GAEvBA,EAAKG,SAAWA,GAClB2C,EAAoB/C,EAASC,EAAMqC,GAEjCrC,EAAKG,SAAWA,GAClB4C,EAAchD,EAASC,GAGzBD,EAAUA,EAAQiD,WAClB7C,EAASH,EAAKG,MAOhB,OAJIJ,KAAYa,UACdZ,EAAKc,QAAQ,KAGRd,EAAKQ,KAAK,KAUnB,QAAS+B,GAAkBxC,EAASC,GAClC,MAAOiD,GAAWlD,EAASC,EAAMY,UASnC,QAAS8B,GAAiB3C,EAASC,GACjC,MAAOiD,GAAWlD,EAASC,EAAMD,EAAQiD,YAS3C,QAASH,GAAiB9C,EAASC,GACjC,GAAIkD,GAAYnD,EAAQmD,SACxB,OAAKA,GAGEC,EAAWpD,EAASC,EAAI,IAAMkD,EAAUjD,QAAQ,KAAM,OAFpD,EAYX,QAASuC,GAAsBzC,EAASC,EAAMqC,GAC5C,MAAOe,GAAerD,EAASC,EAAMY,SAAUyB,GAUjD,QAASM,GAAqB5C,EAASC,EAAMqC,GAC3C,MAAOe,GAAerD,EAASC,EAAMD,EAAQiD,WAAYX,GAU3D,QAASS,GAAqB/C,EAASC,EAAMqC,GAC3C,GAAIgB,GAAatD,EAAQsD,UACzB,OAAOjE,QAAOkE,KAAKD,GAAYE,KAAK,SAACnC,GACnC,GAAIoC,GAAYH,EAAWjC,GACvBqC,EAAgBD,EAAUhC,IAC9B,KAAK,KAAM,SAASkC,OAAOrB,EAAQsB,UAAUC,QAAQH,GAAiB,GACpE,OAAO,CAET,IAAII,GAAiBL,EAAUlE,MAC3BoB,EAAO,IAAO+C,EAAa,KAAKI,EAAc,IAClD,OAAOV,GAAWpD,EAASC,EAAMU,EAAS2B,KAU9C,QAASI,GAAgB1C,EAASC,GAChC,MAAO8D,GAAS/D,EAASC,EAAMY,UASjC,QAASgC,GAAe7C,EAASC,GAC/B,MAAO8D,GAAS/D,EAASC,EAAMD,EAAQiD,YASzC,QAASD,GAAehD,EAASC,GAC/B,MAAOmD,GAAWpD,EAASC,EAAMD,EAAQgE,QAAQC,eASnD,QAAS1B,GAASvC,EAASC,GACzB,GAAMtB,GAAKqB,EAAQrB,EACnB,OAAKA,IAGLsB,EAAKc,QAAO,IAAKpC,IACV,IAHE,EAaX,QAASuE,GAAYlD,EAASC,EAAMiE,GAClC,GAAIf,GAAYnD,EAAQmD,SACxB,KAAKA,EACH,OAAO,CAET,IAAIvC,GAAUsD,EAAOC,uBAAuBhB,EAC5C,OAAuB,KAAnBvC,EAAQR,QACVH,EAAKc,QAAO,IAAKoC,EAAUjD,QAAQ,KAAM,OAClC,IAEF,EAWT,QAASmD,GAAgBrD,EAASC,EAAMiE,EAAQ5B,GAC9C,GAAIgB,GAAatD,EAAQsD,UACzB,OAAOjE,QAAOkE,KAAKD,GAAYE,KAAK,SAACnC,GACnC,GAAIoC,GAAYH,EAAWjC,GACvBqC,EAAgBD,EAAUhC,IAC9B,KAAK,KAAM,SAASkC,OAAOrB,EAAQsB,UAAUC,QAAQH,GAAiB,GACpE,OAAO,CAET,IAAII,GAAiBL,EAAUlE,MAC3BoB,EAAO,IAAO+C,EAAa,KAAKI,EAAc,KAC9ClD,EAAUsD,EAAOpD,iBAAiBH,EACtC,OAAuB,KAAnBC,EAAQR,QACVH,EAAKc,QAAQJ,IACN,GAFT,SAcJ,QAASoD,GAAU/D,EAASC,EAAMiE,GAChC,GAAIF,GAAUhE,EAAQgE,QAAQC,cAC1BrD,EAAUsD,EAAOE,qBAAqBJ,EAC1C,OAAuB,KAAnBpD,EAAQR,QACVH,EAAKc,QAAQiD,IACN,IAEF,EAUT,QAASZ,GAAYpD,EAASC,EAAMF,GAGlC,IAAK,GAFDmE,GAASlE,EAAQiD,WACjBoB,EAAWH,EAAOG,SACbC,EAAI,EAAGC,EAAIF,EAASjE,OAAYmE,EAAJD,EAAOA,IAC1C,GAAID,EAASC,KAAOtE,EAElB,MADAC,GAAKc,QAAO,KAAMhB,EAAQ,eAAcuE,EAAE,GAAC,MACpC,CAGX,QAAO,EL3CRjF,OAAOC,eAAepB,EAAS,cAC7BqB,OAAO,IAETrB,EAAQkB,QK9MegD,ELgNvB5D,EAAoB,IAwQf,SAASL,EAAQD,EAASM,GAE/B,YAiBA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GMlezE,QAASsF,GAAkBC,GNsfvC,GMtf8CnC,GAAOoC,UAAAtE,QAAA,GAAAV,SAAAgF,UAAA,GAAGC,EAAcD,UAAA,EACvE,OAAIvC,OAAMyC,QAAQH,GACTI,EAAiBJ,EAAOnC,GAE1BwC,EAAkBL,EAAOnC,GAS3B,QAASwC,GAAmB9E,EAASsC,GAE1C,GAAItC,YAAmB+E,MACrB,MAAOP,GAAiBxE,EAAQiD,WAElC,IAAIjD,YAAmBgF,eAAgB,EACrC,KAAM,IAAIC,OAAM,iBAGlB,IAAMlF,IAAW,EAAAmF,EAAA9F,SAAMY,EAASsC,GAC1B6C,GAAY,EAAAtF,EAAAT,SAASW,EAAUC,EAQrC,OAAOmF,GASF,QAASN,GAAkBO,EAAU9C,GAC1C,GAAI+C,GAAmB,KACnBC,EAAkB,KAClBC,EAAkB,KAClBC,EAAgB,KNyffC,GAA4B,EAC5BC,GAAoB,EACpBC,EAAiBjG,MAErB,KM3fD,OAA4BkG,GAA5BC,EAAoBT,EAAQnD,OAAAC,cAAAuD,GAAAG,EAAAC,EAAAjE,QAAAkE,MAAAL,GAAA,EAAE,CN6fzB,GM7fIzF,GAAO4F,EAAArG,KACd,IAAK8F,GAKE,GAAIA,IAAqBrF,EAAQiD,WACtC,MAAO8C,SAAQC,IAAI,+FALnBX,GAAmBrF,EAAQiD,WAC3BqC,EAAkBtF,EAAQmD,UAE1BqC,EAAgBxF,EAAQgE,OAI1B,IAAIhE,EAAQmD,YAAcmC,EAAiB,CACzC,GACIW,GAAQC,EADRC,IAEAnG,GAAQmD,UAAU/C,OAASkF,EAAgBlF,QAC7C6F,EAASjG,EAAQmD,UACjB+C,EAAUZ,IAEVW,EAASX,EACTY,EAAUlG,EAAQmD,WAEpB+C,EAAQ/F,MAAM,KAAKiG,QAAQ,SAAC3E,GACtBwE,EAAOpC,QAAQpC,GAAQ,IACzB0E,EAAWE,KAAK5E,KAGpB6D,EAAkBa,EAAW1F,KAAK,KAOhCT,EAAQgE,UAAYwB,IACtBA,EAAgB,ONkgBjB,MAAOc,GACPZ,GAAoB,EACpBC,EAAiBW,EACjB,QACA,KACOb,GAA6BI,EAAUU,QAC1CV,EAAUU,SAEZ,QACA,GAAIb,EACF,KAAMC,IMxgBb,GAAM5F,GAAW+E,EAAkBO,EAGnC,OAFAU,SAAQC,IAAIjG,EAAUuF,EAAiBC,EAAiBC,GAEpDF,EACQvF,EAAQ,OAAOuF,EAAgBpF,QAAQ,KAAM,KAKrDsF,EACQzF,EAAQ,MAAMyF,EAAcvB,cAE9BlE,EAAQ,ONqXnBV,OAAOC,eAAepB,EAAS,cAC7BqB,OAAO,IAETrB,EAAQkB,QMtdeoF,ENudvBtG,EM1ce4G,oBN2cf5G,EMhbe2G,kBNkbf,IAAI2B,GAAShI,EAAoB,GAE7B0G,EAAUjG,EAAuBuH,GAEjCC,EAAYjI,EAAoB,GAEhCqB,EAAaZ,EAAuBwH,GM7enC9B,GACJf,UACE,QACA","file":"optimal-select.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"OptimalSelect\"] = factory();\n\telse\n\t\troot[\"OptimalSelect\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"OptimalSelect\"] = factory();\n\telse\n\t\troot[\"OptimalSelect\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = exports.optimize = exports.select = undefined;\n\t\n\tvar _select2 = __webpack_require__(4);\n\t\n\tvar _select3 = _interopRequireDefault(_select2);\n\t\n\tvar _optimize2 = __webpack_require__(1);\n\t\n\tvar _optimize3 = _interopRequireDefault(_optimize2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.select = _select3.default;\n\texports.optimize = _optimize3.default;\n\texports.default = _select3.default;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = optimize;\n\t/**\n\t * # Optimize\n\t *\n\t * 1.) Improve efficiency through shorter selectors by removing redundancy\n\t * 2.) Improve robustness through selector tranformation\n\t */\n\t\n\t/**\n\t * Apply different optimization techniques\n\t * @param  {String}      selector - [description]\n\t * @param  {HTMLElement} element  - [description]\n\t * @return {String}               - [description]\n\t */\n\tfunction optimize(selector, element) {\n\t  var path = selector.replace(/> /g, '>').split(' ');\n\t\n\t  if (path.length < 3) {\n\t    return selector;\n\t  }\n\t\n\t  var shortened = [path.pop()];\n\t  while (path.length > 1) {\n\t    var current = path.pop();\n\t    var prePart = path.join(' ');\n\t    var postPart = shortened.join(' ');\n\t\n\t    var pattern = prePart + ' ' + postPart;\n\t    var matches = document.querySelectorAll(pattern);\n\t    if (matches.length !== 1) {\n\t      shortened.unshift(optimizePart(prePart, current, postPart, element));\n\t    }\n\t  }\n\t  shortened.unshift(path[0]);\n\t  path = shortened;\n\t\n\t  // optimize start + end\n\t  path[0] = optimizePart('', path[0], path.slice(1).join(' '), element);\n\t  path[path.length - 1] = optimizePart(path.slice(0, -1).join(' '), path[path.length - 1], '', element);\n\t\n\t  return path.join(' ').replace(/>/g, '> ').trim();\n\t}\n\t\n\t/**\n\t * Improve a chunk of the selector\n\t * @param  {String}      prePart  - [description]\n\t * @param  {String}      current  - [description]\n\t * @param  {String}      postPart - [description]\n\t * @param  {HTMLElement} element  - [description]\n\t * @return {String}               - [description]\n\t */\n\tfunction optimizePart(prePart, current, postPart, element) {\n\t  if (prePart.length) prePart = prePart + ' ';\n\t  if (postPart.length) postPart = ' ' + postPart;\n\t\n\t  // robustness: descendant instead child (heuristic)\n\t  if (/>/.test(current)) {\n\t    var descendant = current.replace(/>/, '');\n\t    var pattern = '' + prePart + descendant + postPart;\n\t    var matches = document.querySelectorAll(pattern);\n\t    if (matches.length === 1 && matches[0] === element) {\n\t      current = descendant;\n\t    }\n\t  }\n\t\n\t  // robustness: attribute without value (generalization)\n\t  if (/\\[*\\]/.test(current)) {\n\t    var key = current.replace(/=.*$/, ']');\n\t    var pattern = '' + prePart + key + postPart;\n\t    var matches = document.querySelectorAll(pattern);\n\t    if (matches.length === 1 && matches[0] === element) {\n\t      current = key;\n\t    }\n\t  }\n\t\n\t  // // robustness: 'nth-of-type' instead 'nth-child' (heuristic)\n\t  if (/\\:nth-child/.test(current)) {\n\t    var type = current.replace(/nth-child/g, 'nth-of-type');\n\t    var pattern = '' + prePart + type + postPart;\n\t    var matches = document.querySelectorAll(pattern);\n\t    if (matches.length === 1 && matches[0] === element) {\n\t      current = type;\n\t    }\n\t  }\n\t\n\t  // efficiency: combinations of classname (partial permutations)\n\t  if (/\\.\\S+\\.\\S+/.test(current)) {\n\t    var names = current.trim().split('.').slice(1).map(function (name) {\n\t      return '.' + name;\n\t    }).sort(function (curr, next) {\n\t      return curr.length - next.length;\n\t    });\n\t    while (names.length) {\n\t      var partial = current.replace(names.shift(), '');\n\t      var pattern = '' + prePart + partial + postPart;\n\t      var matches = document.querySelectorAll(pattern);\n\t      if (matches.length === 1 && matches[0] === element) {\n\t        current = partial;\n\t      }\n\t    }\n\t  }\n\t\n\t  return current;\n\t}\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t/**\n\t * # Adapter\n\t *\n\t * Add missing features\n\t */\n\t\n\t/*\n\t * \"for ... of - iteration\" polyfill for NodeLists\n\t * source: https://jakearchibald.com/2014/iterators-gonna-iterate/#nodelist-iteration\n\t */\n\tif (typeof NodeList !== 'undefined' && !NodeList.prototype[Symbol.iterator]) {\n\t  NodeList.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator];\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = match;\n\t\n\t__webpack_require__(2);\n\t\n\t/**\n\t * # Match\n\t *\n\t * Retrieves selector\n\t */\n\t\n\t/**\n\t * Get the path of the element\n\t * @param  {HTMLElement} node    - [description]\n\t * @param  {Object}      options - [description]\n\t * @return {String}              - [description]\n\t */\n\tfunction match(node, options) {\n\t  var path = [];\n\t  var element = node;\n\t  var length = path.length;\n\t\n\t  while (element !== document) {\n\t    // global\n\t    if (checkId(element, path)) break;\n\t    if (checkClassGlobal(element, path)) break;\n\t    if (checkAttributeGlobal(element, path, options)) break;\n\t    if (checkTagGlobal(element, path)) break;\n\t\n\t    // local\n\t    checkClassLocal(element, path);\n\t\n\t    // define only one selector each iteration\n\t    if (path.length === length) {\n\t      checkAttributeLocal(element, path, options);\n\t    }\n\t    if (path.length === length) {\n\t      checkTagLocal(element, path);\n\t    }\n\t\n\t    if (path.length === length) {\n\t      checkClassChild(element, path);\n\t    }\n\t    if (path.length === length) {\n\t      checkAttributeChild(element, path, options);\n\t    }\n\t    if (path.length === length) {\n\t      checkTagChild(element, path);\n\t    }\n\t\n\t    element = element.parentNode;\n\t    length = path.length;\n\t  }\n\t\n\t  if (element === document) {\n\t    path.unshift('*');\n\t  }\n\t\n\t  return path.join(' ');\n\t}\n\t\n\t/**\n\t * [checkClassGlobal description]\n\t * @param  {HTMLElement} element - [description]\n\t * @param  {Array}       path    - [description]\n\t * @return {Boolean}             - [description]\n\t */\n\tfunction checkClassGlobal(element, path) {\n\t  return checkClass(element, path, document);\n\t}\n\t\n\t/**\n\t * [checkClassLocal description]\n\t * @param  {HTMLElement} element - [description]\n\t * @param  {Array}       path    - [description]\n\t * @return {Boolean}             - [description]\n\t */\n\tfunction checkClassLocal(element, path) {\n\t  return checkClass(element, path, element.parentNode);\n\t}\n\t\n\t/**\n\t * [checkClassChild description]\n\t * @param  {HTMLElement} element - [description]\n\t * @param  {Array}       path    - [description]\n\t * @return {Boolean}             - [description]\n\t */\n\tfunction checkClassChild(element, path) {\n\t  var className = element.className;\n\t  if (!className) {\n\t    return false;\n\t  }\n\t  return checkChild(element, path, '.' + className.replace(/ /g, '.'));\n\t}\n\t\n\t/**\n\t * [checkAttributeGlobal description]\n\t * @param  {HTMLElement} element - [description]\n\t * @param  {Array}       path    - [description]\n\t * @param  {Object}      options - [description]\n\t * @return {Boolean}             - [description]\n\t */\n\tfunction checkAttributeGlobal(element, path, options) {\n\t  return checkAttribute(element, path, document, options);\n\t}\n\t\n\t/**\n\t * [checkAttributeLocal description]\n\t * @param  {HTMLElement} element - [description]\n\t * @param  {Array}       path    - [description]\n\t * @param  {Object}      options - [description]\n\t * @return {Boolean}             - [description]\n\t */\n\tfunction checkAttributeLocal(element, path, options) {\n\t  return checkAttribute(element, path, element.parentNode, options);\n\t}\n\t\n\t/**\n\t * [checkAttributeChild description]\n\t * @param  {HTMLElement} element - [description]\n\t * @param  {Array}       path    - [description]\n\t * @param  {Object}      options - [description]\n\t * @return {Boolean}             - [description]\n\t */\n\tfunction checkAttributeChild(element, path, options) {\n\t  var attributes = element.attributes;\n\t  return Object.keys(attributes).some(function (key) {\n\t    var attribute = attributes[key];\n\t    var attributeName = attribute.name;\n\t    if (['id', 'class'].concat(options.excludes).indexOf(attributeName) > -1) {\n\t      return false;\n\t    }\n\t    var attributeValue = attribute.value;\n\t    var pattern = '[' + attributeName + '=\"' + attributeValue + '\"]';\n\t    return checkChild(element, path, pattern, options);\n\t  });\n\t}\n\t\n\t/**\n\t * [checkTagGlobal description]\n\t * @param  {HTMLElement} element - [description]\n\t * @param  {Array}       path    - [description]\n\t * @return {Boolean}             - [description]\n\t */\n\tfunction checkTagGlobal(element, path) {\n\t  return checkTag(element, path, document);\n\t}\n\t\n\t/**\n\t * [checkTagLocal description]\n\t * @param  {HTMLElement} element - [description]\n\t * @param  {Array}       path    - [description]\n\t * @return {Boolean}             - [description]\n\t */\n\tfunction checkTagLocal(element, path) {\n\t  return checkTag(element, path, element.parentNode);\n\t}\n\t\n\t/**\n\t * [checkTabChildren description]\n\t * @param  {HTMLElement} element - [description]\n\t * @param  {Array}       path    - [description]\n\t * @return {Boolean}             - [description]\n\t */\n\tfunction checkTagChild(element, path) {\n\t  return checkChild(element, path, element.tagName.toLowerCase());\n\t}\n\t\n\t/**\n\t * [checkId description]\n\t * @param  {HTMLElement} element - [description]\n\t * @param  {Array}       path    - [description]\n\t * @return {Boolean}             - [description]\n\t */\n\tfunction checkId(element, path) {\n\t  var id = element.id;\n\t  if (!id) {\n\t    return false;\n\t  }\n\t  path.unshift('#' + id);\n\t  return true;\n\t}\n\t\n\t/**\n\t * [checkClass description]\n\t * @param  {HTMLElement} element - [description]\n\t * @param  {Array}       path    - [description]\n\t * @param  {HTMLElement} parent  - [description]\n\t * @return {Boolean}             - [description]\n\t */\n\tfunction checkClass(element, path, parent) {\n\t  var className = element.className;\n\t  if (!className) {\n\t    return false;\n\t  }\n\t  var matches = parent.getElementsByClassName(className);\n\t  if (matches.length === 1) {\n\t    path.unshift('.' + className.replace(/ /g, '.'));\n\t    return true;\n\t  }\n\t  return false;\n\t}\n\t\n\t/**\n\t * [checkAttribute description]\n\t * @param  {HTMLElement} element - [description]\n\t * @param  {Array}       path    - [description]\n\t * @param  {HTMLElement} parent  - [description]\n\t * @param  {Object}      options - [description]\n\t * @return {Boolean}             - [description]\n\t */\n\tfunction checkAttribute(element, path, parent, options) {\n\t  var attributes = element.attributes;\n\t  return Object.keys(attributes).some(function (key) {\n\t    var attribute = attributes[key];\n\t    var attributeName = attribute.name;\n\t    if (['id', 'class'].concat(options.excludes).indexOf(attributeName) > -1) {\n\t      return false;\n\t    }\n\t    var attributeValue = attribute.value;\n\t    var pattern = '[' + attributeName + '=\"' + attributeValue + '\"]';\n\t    var matches = parent.querySelectorAll(pattern);\n\t    if (matches.length === 1) {\n\t      path.unshift(pattern);\n\t      return true;\n\t    }\n\t  });\n\t}\n\t\n\t/**\n\t * [checkTag description]\n\t * @param  {HTMLElement} element - [description]\n\t * @param  {Array}       path    - [description]\n\t * @param  {HTMLElement} parent  - [description]\n\t * @return {Boolean}             - [description]\n\t */\n\tfunction checkTag(element, path, parent) {\n\t  var tagName = element.tagName.toLowerCase();\n\t  var matches = parent.getElementsByTagName(tagName);\n\t  if (matches.length === 1) {\n\t    path.unshift(tagName);\n\t    return true;\n\t  }\n\t  return false;\n\t}\n\t\n\t/**\n\t * [checkChild description]\n\t * @param  {HTMLElement} element  - [description]\n\t * @param  {Array}       path     - [description]\n\t * @param  {String}      selector - [description]\n\t * @return {Boolean}              - [description]\n\t */\n\tfunction checkChild(element, path, selector) {\n\t  var parent = element.parentNode;\n\t  var children = parent.children;\n\t  for (var i = 0, l = children.length; i < l; i++) {\n\t    if (children[i] === element) {\n\t      path.unshift('> ' + selector + ':nth-child(' + (i + 1) + ')');\n\t      return true;\n\t    }\n\t  }\n\t  return false;\n\t}\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = getQuerySelector;\n\texports.getSingleSelector = getSingleSelector;\n\texports.getMultiSelector = getMultiSelector;\n\t\n\tvar _match = __webpack_require__(3);\n\t\n\tvar _match2 = _interopRequireDefault(_match);\n\t\n\tvar _optimize = __webpack_require__(1);\n\t\n\tvar _optimize2 = _interopRequireDefault(_optimize);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * # Select\n\t *\n\t * Construct a unique CSS queryselector to access the selected DOM element(s).\n\t * Applies different matching and optimization strategies for efficiency.\n\t */\n\t\n\tvar defaultOptions = {\n\t  excludes: ['style', 'data-reactid']\n\t};\n\t\n\t/**\n\t * Choose action depending on the input (single/multi)\n\t * @param  {HTMLElement|Array} input   - [description]\n\t * @param  {Object}            options - [description]\n\t * @return {String}                    - [description]\n\t */\n\tfunction getQuerySelector(input) {\n\t  var options = arguments.length <= 1 || arguments[1] === undefined ? defaultOptions : arguments[1];\n\t\n\t  if (Array.isArray(input)) {\n\t    return getMultiSelector(input, options);\n\t  }\n\t  return getSingleSelector(input, options);\n\t}\n\t\n\t/**\n\t * Get a selector for the provided element\n\t * @param  {HTMLElement} element - [description]\n\t * @param  {Object}      options - [description]\n\t * @return {String}              - [description]\n\t */\n\tfunction getSingleSelector(element, options) {\n\t\n\t  if (element instanceof Text) {\n\t    return getQuerySelector(element.parentNode);\n\t  }\n\t  if (element instanceof HTMLElement === false) {\n\t    throw new Error('Invalid input!');\n\t  }\n\t\n\t  var selector = (0, _match2.default)(element, options);\n\t  var optimized = (0, _optimize2.default)(selector, element);\n\t\n\t  // debug\n\t  // console.log(`\n\t  //   selector: ${selector}\n\t  //   optimized:${optimized}\n\t  // `);\n\t\n\t  return optimized;\n\t}\n\t\n\t/**\n\t * Get a selector to match multiple children from a parent\n\t * @param  {Array}  elements - [description]\n\t * @param  {Object} options  - [description]\n\t * @return {String}          - [description]\n\t */\n\tfunction getMultiSelector(elements, options) {\n\t  var commonParentNode = null;\n\t  var commonClassName = null;\n\t  var commonAttribute = null;\n\t  var commonTagName = null;\n\t\n\t  var _iteratorNormalCompletion = true;\n\t  var _didIteratorError = false;\n\t  var _iteratorError = undefined;\n\t\n\t  try {\n\t    for (var _iterator = elements[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t      var element = _step.value;\n\t\n\t      if (!commonParentNode) {\n\t        // 1st entry\n\t        commonParentNode = element.parentNode;\n\t        commonClassName = element.className;\n\t        // commonAttribute = element.attributes\n\t        commonTagName = element.tagName;\n\t      } else if (commonParentNode !== element.parentNode) {\n\t        return console.log('Can\\'t be efficiently mapped. It probably best to use multiple single selectors instead!');\n\t      }\n\t      if (element.className !== commonClassName) {\n\t        var classNames = [];\n\t        var longer, shorter;\n\t        if (element.className.length > commonClassName.length) {\n\t          longer = element.className;\n\t          shorter = commonClassName;\n\t        } else {\n\t          longer = commonClassName;\n\t          shorter = element.className;\n\t        }\n\t        shorter.split(' ').forEach(function (name) {\n\t          if (longer.indexOf(name) > -1) {\n\t            classNames.push(name);\n\t          }\n\t        });\n\t        commonClassName = classNames.join(' ');\n\t      }\n\t      // TODO:\n\t      // - check attributes\n\t      // if (element.attributes !== commonAttribute) {\n\t      //\n\t      // }\n\t      if (element.tagName !== commonTagName) {\n\t        commonTagName = null;\n\t      }\n\t    }\n\t  } catch (err) {\n\t    _didIteratorError = true;\n\t    _iteratorError = err;\n\t  } finally {\n\t    try {\n\t      if (!_iteratorNormalCompletion && _iterator.return) {\n\t        _iterator.return();\n\t      }\n\t    } finally {\n\t      if (_didIteratorError) {\n\t        throw _iteratorError;\n\t      }\n\t    }\n\t  }\n\t\n\t  var selector = getSingleSelector(commonParentNode);\n\t  console.log(selector, commonClassName, commonAttribute, commonTagName);\n\t\n\t  if (commonClassName) {\n\t    return selector + ' > .' + commonClassName.replace(/ /g, '.');\n\t  }\n\t  // if (commonAttribute) {\n\t  //\n\t  // }\n\t  if (commonTagName) {\n\t    return selector + ' > ' + commonTagName.toLowerCase();\n\t  }\n\t  return selector + ' > *';\n\t}\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** optimal-select.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e59f59cf4b6e4d53c17e\n **/","export select from './select'\nexport optimize from './optimize'\n\nexport default from './select'\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","/**\n * # Optimize\n *\n * 1.) Improve efficiency through shorter selectors by removing redundancy\n * 2.) Improve robustness through selector tranformation\n */\n\n/**\n * Apply different optimization techniques\n * @param  {String}      selector - [description]\n * @param  {HTMLElement} element  - [description]\n * @return {String}               - [description]\n */\nexport default function optimize (selector, element) {\n  var path = selector.replace(/> /g, '>').split(' ')\n\n  if (path.length < 3) {\n    return selector\n  }\n\n  const shortened = [path.pop()]\n  while (path.length > 1)  {\n    const current = path.pop()\n    const prePart = path.join(' ')\n    const postPart = shortened.join(' ')\n\n    const pattern = `${prePart} ${postPart}`\n    const matches = document.querySelectorAll(pattern)\n    if (matches.length !== 1) {\n      shortened.unshift(optimizePart(prePart, current, postPart, element))\n    }\n  }\n  shortened.unshift(path[0])\n  path = shortened\n\n  // optimize start + end\n  path[0] = optimizePart('', path[0], path.slice(1).join(' '), element)\n  path[path.length-1] = optimizePart(path.slice(0, -1).join(' '), path[path.length-1], '', element)\n\n  return path.join(' ').replace(/>/g, '> ').trim()\n}\n\n/**\n * Improve a chunk of the selector\n * @param  {String}      prePart  - [description]\n * @param  {String}      current  - [description]\n * @param  {String}      postPart - [description]\n * @param  {HTMLElement} element  - [description]\n * @return {String}               - [description]\n */\nfunction optimizePart (prePart, current, postPart, element) {\n  if (prePart.length) prePart = `${prePart} `\n  if (postPart.length) postPart = ` ${postPart}`\n\n  // robustness: descendant instead child (heuristic)\n  if (/>/.test(current)) {\n    const descendant = current.replace(/>/, '')\n    var pattern = `${prePart}${descendant}${postPart}`\n    var matches = document.querySelectorAll(pattern)\n    if (matches.length === 1 && matches[0] === element) {\n      current = descendant\n    }\n  }\n\n  // robustness: attribute without value (generalization)\n  if (/\\[*\\]/.test(current)) {\n    const key = current.replace(/=.*$/, ']')\n    var pattern = `${prePart}${key}${postPart}`\n    var matches = document.querySelectorAll(pattern)\n    if (matches.length === 1 && matches[0] === element) {\n      current = key\n    }\n  }\n\n  // // robustness: 'nth-of-type' instead 'nth-child' (heuristic)\n  if (/\\:nth-child/.test(current)) {\n    const type = current.replace(/nth-child/g, 'nth-of-type')\n    var pattern = `${prePart}${type}${postPart}`\n    var matches = document.querySelectorAll(pattern)\n    if (matches.length === 1 && matches[0] === element) {\n      current = type\n    }\n  }\n\n  // efficiency: combinations of classname (partial permutations)\n  if (/\\.\\S+\\.\\S+/.test(current)) {\n    const names = current.trim().split('.').slice(1).map((name) => `.${name}`)\n                                .sort((curr, next) => curr.length - next.length)\n    while (names.length) {\n      var partial = current.replace(names.shift(), '')\n      var pattern = `${prePart}${partial}${postPart}`\n      var matches = document.querySelectorAll(pattern)\n      if (matches.length === 1 && matches[0] === element) {\n        current = partial\n      }\n    }\n  }\n\n  return current\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/optimize.js\n **/","/**\n * # Adapter\n *\n * Add missing features\n */\n\n/*\n * \"for ... of - iteration\" polyfill for NodeLists\n * source: https://jakearchibald.com/2014/iterators-gonna-iterate/#nodelist-iteration\n */\nif (typeof NodeList !== 'undefined' && !NodeList.prototype[Symbol.iterator]) {\n  NodeList.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator]\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/adapter.js\n **/","/**\n * # Match\n *\n * Retrieves selector\n */\n\nimport './adapter'\n\n/**\n * Get the path of the element\n * @param  {HTMLElement} node    - [description]\n * @param  {Object}      options - [description]\n * @return {String}              - [description]\n */\nexport default function match (node, options) {\n  const path = []\n  var element = node\n  var length = path.length\n\n  while (element !== document) {\n    // global\n    if (checkId(element, path)) break\n    if (checkClassGlobal(element, path)) break\n    if (checkAttributeGlobal(element, path, options)) break\n    if (checkTagGlobal(element, path)) break\n\n    // local\n    checkClassLocal(element, path)\n\n    // define only one selector each iteration\n    if (path.length === length) {\n      checkAttributeLocal(element, path, options)\n    }\n    if (path.length === length) {\n      checkTagLocal(element, path)\n    }\n\n    if (path.length === length) {\n      checkClassChild(element, path)\n    }\n    if (path.length === length) {\n      checkAttributeChild(element, path, options)\n    }\n    if (path.length === length) {\n      checkTagChild(element, path)\n    }\n\n    element = element.parentNode\n    length = path.length\n  }\n\n  if (element === document) {\n    path.unshift('*')\n  }\n\n  return path.join(' ')\n}\n\n\n/**\n * [checkClassGlobal description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkClassGlobal (element, path) {\n  return checkClass(element, path, document)\n}\n\n/**\n * [checkClassLocal description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkClassLocal (element, path) {\n  return checkClass(element, path, element.parentNode)\n}\n\n/**\n * [checkClassChild description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkClassChild (element, path) {\n  var className = element.className\n  if (!className) {\n    return false\n  }\n  return checkChild(element, path, `.${className.replace(/ /g, '.')}`)\n}\n\n/**\n * [checkAttributeGlobal description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {Object}      options - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkAttributeGlobal (element, path, options) {\n  return checkAttribute(element, path, document, options)\n}\n\n/**\n * [checkAttributeLocal description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {Object}      options - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkAttributeLocal (element, path, options) {\n  return checkAttribute(element, path, element.parentNode, options)\n}\n\n/**\n * [checkAttributeChild description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {Object}      options - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkAttributeChild (element, path, options) {\n  var attributes = element.attributes\n  return Object.keys(attributes).some((key) => {\n    var attribute = attributes[key]\n    var attributeName = attribute.name\n    if (['id', 'class'].concat(options.excludes).indexOf(attributeName) > -1) {\n      return false\n    }\n    var attributeValue = attribute.value\n    var pattern = `[${attributeName}=\"${attributeValue}\"]`\n    return checkChild(element, path, pattern, options)\n  })\n}\n\n/**\n * [checkTagGlobal description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkTagGlobal (element, path) {\n  return checkTag(element, path, document)\n}\n\n/**\n * [checkTagLocal description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkTagLocal (element, path) {\n  return checkTag(element, path, element.parentNode)\n}\n\n/**\n * [checkTabChildren description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkTagChild (element, path) {\n  return checkChild(element, path, element.tagName.toLowerCase())\n}\n\n/**\n * [checkId description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkId (element, path) {\n  const id = element.id\n  if (!id) {\n    return false\n  }\n  path.unshift(`#${id}`)\n  return true\n}\n\n/**\n * [checkClass description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {HTMLElement} parent  - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkClass (element, path, parent) {\n  var className = element.className\n  if (!className) {\n    return false\n  }\n  var matches = parent.getElementsByClassName(className)\n  if (matches.length === 1) {\n    path.unshift(`.${className.replace(/ /g, '.')}`)\n    return true\n  }\n  return false\n}\n\n/**\n * [checkAttribute description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {HTMLElement} parent  - [description]\n * @param  {Object}      options - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkAttribute (element, path, parent, options) {\n  var attributes = element.attributes\n  return Object.keys(attributes).some((key) => {\n    var attribute = attributes[key]\n    var attributeName = attribute.name\n    if (['id', 'class'].concat(options.excludes).indexOf(attributeName) > -1) {\n      return false\n    }\n    var attributeValue = attribute.value\n    var pattern = `[${attributeName}=\"${attributeValue}\"]`\n    var matches = parent.querySelectorAll(pattern)\n    if (matches.length === 1) {\n      path.unshift(pattern)\n      return true\n    }\n  })\n}\n\n/**\n * [checkTag description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {HTMLElement} parent  - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkTag (element, path, parent) {\n  var tagName = element.tagName.toLowerCase()\n  var matches = parent.getElementsByTagName(tagName)\n  if (matches.length === 1) {\n    path.unshift(tagName)\n    return true\n  }\n  return false\n}\n\n/**\n * [checkChild description]\n * @param  {HTMLElement} element  - [description]\n * @param  {Array}       path     - [description]\n * @param  {String}      selector - [description]\n * @return {Boolean}              - [description]\n */\nfunction checkChild (element, path, selector) {\n  var parent = element.parentNode\n  var children = parent.children\n  for (var i = 0, l = children.length; i < l; i++) {\n    if (children[i] === element) {\n      path.unshift(`> ${selector}:nth-child(${i+1})`)\n      return true\n    }\n  }\n  return false\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/match.js\n **/","/**\n * # Select\n *\n * Construct a unique CSS queryselector to access the selected DOM element(s).\n * Applies different matching and optimization strategies for efficiency.\n */\n\nimport match from './match'\nimport optimize from './optimize'\n\nconst defaultOptions = {\n  excludes: [\n    'style',\n    'data-reactid'\n  ]\n}\n\n/**\n * Choose action depending on the input (single/multi)\n * @param  {HTMLElement|Array} input   - [description]\n * @param  {Object}            options - [description]\n * @return {String}                    - [description]\n */\nexport default function getQuerySelector (input, options = defaultOptions) {\n  if (Array.isArray(input)) {\n    return getMultiSelector(input, options)\n  }\n  return getSingleSelector(input, options)\n}\n\n/**\n * Get a selector for the provided element\n * @param  {HTMLElement} element - [description]\n * @param  {Object}      options - [description]\n * @return {String}              - [description]\n */\nexport function getSingleSelector (element, options) {\n\n  if (element instanceof Text) {\n    return getQuerySelector(element.parentNode)\n  }\n  if (element instanceof HTMLElement === false) {\n    throw new Error('Invalid input!')\n  }\n\n  const selector = match(element, options)\n  const optimized = optimize(selector, element)\n\n  // debug\n  // console.log(`\n  //   selector: ${selector}\n  //   optimized:${optimized}\n  // `);\n\n  return optimized\n}\n\n/**\n * Get a selector to match multiple children from a parent\n * @param  {Array}  elements - [description]\n * @param  {Object} options  - [description]\n * @return {String}          - [description]\n */\nexport function getMultiSelector (elements, options) {\n  var commonParentNode = null\n  var commonClassName = null\n  var commonAttribute = null\n  var commonTagName = null\n\n  for (var element of elements) {\n    if (!commonParentNode) { // 1st entry\n      commonParentNode = element.parentNode\n      commonClassName = element.className\n      // commonAttribute = element.attributes\n      commonTagName = element.tagName\n    } else if (commonParentNode !== element.parentNode) {\n      return console.log('Can\\'t be efficiently mapped. It probably best to use multiple single selectors instead!')\n    }\n    if (element.className !== commonClassName) {\n      var classNames = []\n      var longer, shorter\n      if (element.className.length > commonClassName.length) {\n        longer = element.className\n        shorter = commonClassName\n      } else {\n        longer = commonClassName\n        shorter = element.className\n      }\n      shorter.split(' ').forEach((name) => {\n        if (longer.indexOf(name) > -1) {\n          classNames.push(name)\n        }\n      })\n      commonClassName = classNames.join(' ')\n    }\n    // TODO:\n    // - check attributes\n    // if (element.attributes !== commonAttribute) {\n    //\n    // }\n    if (element.tagName !== commonTagName) {\n      commonTagName = null\n    }\n  }\n\n  const selector = getSingleSelector(commonParentNode)\n  console.log(selector, commonClassName, commonAttribute, commonTagName)\n\n  if (commonClassName) {\n    return `${selector} > .${commonClassName.replace(/ /g, '.')}`\n  }\n  // if (commonAttribute) {\n  //\n  // }\n  if (commonTagName) {\n    return `${selector} > ${commonTagName.toLowerCase()}`\n  }\n  return `${selector} > *`\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/select.js\n **/"],"sourceRoot":""}