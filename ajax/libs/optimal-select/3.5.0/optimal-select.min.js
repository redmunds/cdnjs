!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OptimalSelect=t():e.OptimalSelect=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var u=n[r]={exports:{},id:r,loaded:!1};return e[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.common=t.optimize=t.getMultiSelector=t.getSingleSelector=t.select=void 0;var o=n(6);Object.defineProperty(t,"getSingleSelector",{enumerable:!0,get:function(){return o.getSingleSelector}}),Object.defineProperty(t,"getMultiSelector",{enumerable:!0,get:function(){return o.getMultiSelector}});var i=u(o),a=n(4),c=u(a),f=n(3),l=r(f);t.select=i.default,t.optimize=c.default,t.common=l,t.default=i.default},function(e,t){"use strict";function n(e){for(var t=e.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];return n}function r(e){return e&&e.replace(/['"`\\/:\?&!#$%^()[\]{|}*+;,.<=>@~]/g,"\\$&")}Object.defineProperty(t,"__esModule",{value:!0}),t.convertNodeList=n,t.escapeValue=r},function(e,t){(function(n){"use strict";function r(e,t){if(n.document)return!1;var r=t.context;n.document=r||function(){for(var t=e;t.parent;)t=t.parent;return t}();var i=Object.getPrototypeOf(n.document);return Object.getOwnPropertyDescriptor(i,"childTags")||Object.defineProperty(i,"childTags",{enumerable:!0,get:function(){return this.children.filter(function(e){return"tag"===e.type||"script"===e.type||"style"===e.type})}}),Object.getOwnPropertyDescriptor(i,"attributes")||Object.defineProperty(i,"attributes",{enumerable:!0,get:function(){var e=this.attribs,t=Object.keys(e),n=t.reduce(function(t,n,r){return t[r]={name:n,value:e[n]},t},{});return Object.defineProperty(n,"length",{enumerable:!1,configurable:!1,value:t.length}),n}}),i.getAttribute||(i.getAttribute=function(e){return this.attribs[e]||null}),i.getElementsByTagName||(i.getElementsByTagName=function(e){var t=[];return o(this.childTags,function(n){n.name!==e&&"*"!==e||t.push(n)}),t}),i.getElementsByClassName||(i.getElementsByClassName=function(e){var t=e.trim().replace(/\s+/g," ").split(" "),n=[];return o([this],function(e){var r=e.attribs.class;r&&t.every(function(e){return r.indexOf(e)>-1})&&n.push(e)}),n}),i.querySelectorAll||(i.querySelectorAll=function(e){var t=this;e=e.replace(/(>)(\S)/g,"$1 $2").trim();var n=u(e),r=n.shift(),o=n.length;return r(this).filter(function(e){for(var r=0;r<o;){if(e=n[r](e,t),!e)return!1;r+=1}return!0})}),i.contains||(i.contains=function(e){var t=!1;return o([this],function(n,r){n===e&&(t=!0,r())}),t}),!0}function u(e){return e.split(" ").reverse().map(function(e,t){var n=0===t,r=e.split(":"),u=c(r,2),f=u[0],l=u[1],s=null,d=null;if(function(){switch(!0){case/>/.test(f):d=function(e){return function(t){return t(e.parent)&&e.parent}};break;case/^\./.test(f):var e=f.substr(1).split(".");s=function(t){var n=t.attribs.class;return n&&e.every(function(e){return n.indexOf(e)>-1})},d=function(t,r){return n?t.getElementsByClassName(e.join(" ")):"function"==typeof t?t(s):i(t,r,s)};break;case/^\[/.test(f):var t=f.replace(/\[|\]|"/g,"").split("="),r=c(t,2),u=r[0],l=r[1];s=function(e){var t=Object.keys(e.attribs).indexOf(u)>-1;return!(!t||l&&e.attribs[u]!==l)},d=function(e,t){if(n){var r=function(){var t=[];return o([e],function(e){s(e)&&t.push(e)}),{v:t}}();if("object"===("undefined"==typeof r?"undefined":a(r)))return r.v}return"function"==typeof e?e(s):i(e,t,s)};break;case/^#/.test(f):var p=f.substr(1);s=function(e){return e.attribs.id===p},d=function(e,t){if(n){var r=function(){var t=[];return o([e],function(e,n){s(e)&&(t.push(e),n())}),{v:t}}();if("object"===("undefined"==typeof r?"undefined":a(r)))return r.v}return"function"==typeof e?e(s):i(e,t,s)};break;case/\*/.test(f):s=function(e){return!0},d=function(e,t){if(n){var r=function(){var t=[];return o([e],function(e){return t.push(e)}),{v:t}}();if("object"===("undefined"==typeof r?"undefined":a(r)))return r.v}return"function"==typeof e?e(s):i(e,t,s)};break;default:s=function(e){return e.name===f},d=function(e,t){if(n){var r=function(){var t=[];return o([e],function(e){s(e)&&t.push(e)}),{v:t}}();if("object"===("undefined"==typeof r?"undefined":a(r)))return r.v}return"function"==typeof e?e(s):i(e,t,s)}}}(),!l)return d;var p=l.match(/-(child|type)\((\d+)\)$/),v=p[1],g=parseInt(p[2],10)-1,y=function(e){if(e){var t=e.parent.childTags;"type"===v&&(t=t.filter(s));var n=t.findIndex(function(t){return t===e});if(n===g)return!0}return!1};return function(e){var t=d(e);return n?t.reduce(function(e,t){return y(t)&&e.push(t),e},[]):y(t)&&t}})}function o(e,t){e.forEach(function(e){var n=!0;t(e,function(){return n=!1}),e.childTags&&n&&o(e.childTags,t)})}function i(e,t,n){for(;e.parent;){if(e=e.parent,n(e))return e;if(e===t)break}return null}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},c=function(){function e(e,t){var n=[],r=!0,u=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){u=!0,o=c}finally{try{!r&&a.return&&a.return()}finally{if(u)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=r,e.exports=t.default}).call(t,function(){return this}())},function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.root,r=void 0===n?document:n,u=(t.skip,t.ignore,[]);e.forEach(function(e,t){for(var n=[];e!==r;)e=e.parentNode,n.unshift(e);u[t]=n}),u.sort(function(e,t){return e.length-t.length});for(var o=u.shift(),i=null,a=function(){var e=o[c],t=u.some(function(t){return!t.some(function(t){return t===e})});return t?"break":void(i=e)},c=0,f=o.length;c<f;c++){var l=a();if("break"===l)break}return i}function r(e){var t={classes:[],attributes:{},tag:null};return e.forEach(function(e){var n=t.classes,r=t.attributes,u=t.tag;if(void 0!==n){var o=e.getAttribute("class");o?(o=o.trim().split(" "),n.length?(n=n.filter(function(e){return o.some(function(t){return t===e})}),n.length?t.classes=n:delete t.classes):t.classes=o):delete t.classes}if(void 0!==r&&!function(){var n=e.attributes,u=Object.keys(n).reduce(function(e,t){var r=n[t],u=r.name;return r&&"class"!==u&&(e[u]=r.value),e},{}),o=Object.keys(u),i=Object.keys(r);o.length?i.length?(r=i.reduce(function(e,t){var n=r[t];return n===u[t]&&(e[t]=n),e},{}),Object.keys(r).length?t.attributes=r:delete t.attributes):t.attributes=u:delete t.attributes}(),void 0!==u){var i=e.tagName.toLowerCase();u?i!==u&&delete t.tag:t.tag=i}}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.getCommonAncestor=n,t.getCommonProperties=r},function(e,t,n){(function(r){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Array.isArray(t)||(t=t.length?(0,l.convertNodeList)(t):[t]),!t.length||t.some(function(e){return 1!==e.nodeType}))throw new Error('Invalid input - to compare HTMLElements its necessary to provide a reference of the selected node(s)! (missing "elements")');var u=(0,f.default)(t[0],n),o=e.replace(/> /g,">").split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)/);if(o.length<2)return i("",e,"",t);for(var a=[o.pop()];o.length>1;){var c=o.pop(),s=o.join(" "),d=a.join(" "),p=s+" "+d,v=document.querySelectorAll(p);v.length!==t.length&&a.unshift(i(s,c,d,t))}return a.unshift(o[0]),o=a,o[0]=i("",o[0],o.slice(1).join(" "),t),o[o.length-1]=i(o.slice(0,-1).join(" "),o[o.length-1],"",t),u&&delete r.document,o.join(" ").replace(/>/g,"> ").trim()}function i(e,t,n,r){if(e.length&&(e+=" "),n.length&&(n=" "+n),/\[*\]/.test(t)){var u=t.replace(/=.*$/,"]"),o=""+e+u+n,i=document.querySelectorAll(o);if(a(i,r))t=u;else for(var c=document.querySelectorAll(""+e+u),f=function(){var u=c[l];if(r.some(function(e){return u.contains(e)})){var f=u.tagName.toLowerCase();return o=""+e+f+n,i=document.querySelectorAll(o),a(i,r)&&(t=f),"break"}},l=0,s=c.length;l<s;l++){var o,i,d=f();if("break"===d)break}}if(/>/.test(t)){var p=t.replace(/>/,""),o=""+e+p+n,i=document.querySelectorAll(o);a(i,r)&&(t=p)}if(/:nth-child/.test(t)){var v=t.replace(/nth-child/g,"nth-of-type"),o=""+e+v+n,i=document.querySelectorAll(o);a(i,r)&&(t=v)}if(/\.\S+\.\S+/.test(t)){for(var g=t.trim().split(".").slice(1).map(function(e){return"."+e}).sort(function(e,t){return e.length-t.length});g.length;){var y=t.replace(g.shift(),"").trim(),o=(""+e+y+n).trim();if(!o.length||">"===o.charAt(0))break;var i=document.querySelectorAll(o);a(i,r)&&(t=y)}if(t&&t.match(/\./g).length>2)for(var h=document.querySelectorAll(""+e+t),m=function(){var u=h[l];if(r.some(function(e){return u.contains(e)})){var c=u.tagName.toLowerCase();return o=""+e+c+n,i=document.querySelectorAll(o),a(i,r)&&(t=c),"break"}},l=0,s=h.length;l<s;l++){var o,i,b=m();if("break"===b)break}}return t}function a(e,t){var n=e.length;return n===t.length&&t.every(function(t){for(var r=0;r<n;r++)if(e[r]===t)return!0;return!1})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var c=n(2),f=u(c),l=n(1);e.exports=t.default}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){var n=t.root,r=void 0===n?document:n,v=t.skip,g=void 0===v?null:v,y=t.priority,h=void 0===y?["id","class","href","src"]:y,m=t.ignore,b=void 0===m?{}:m,S=[],O=e,k=S.length,A=g&&(Array.isArray(g)?g:[g]).map(function(e){return"function"!=typeof e?function(t){return t===e}:e}),N=function(e){return g&&A.some(function(t){return t(e)})},x=!1;for(Object.keys(b).forEach(function(e){"class"===e&&(x=!0);var t=b[e];"function"!=typeof t&&("number"==typeof t&&(t=t.toString()),"string"==typeof t&&(t=new RegExp((0,j.escapeValue)(t).replace(/\\/g,"\\\\"))),b[e]=t.test.bind(t))}),x&&!function(){var e=b.attribute;b.attribute=function(t,n,r){return b.class(n)||e&&e(t,n,r)}}();O!==r;){if(N(O)!==!0){if(p(O,S,b))break;if(u(O,S,b,r))break;if(a(O,S,b,r,h))break;if(l(O,S,b,r))break;o(O,S,b),S.length===k&&c(O,S,b,h),S.length===k&&s(O,S,b),S.length===k&&i(O,S,b),S.length===k&&f(O,S,b,h),S.length===k&&d(O,S,b)}O=O.parentNode,k=S.length}return O===r&&S.unshift("*"),S.join(" ")}function u(e,t,n,r){return v(e,t,n,r)}function o(e,t,n){return v(e,t,n,e.parentNode)}function i(e,t,n){var r=(0,j.escapeValue)(e.getAttribute("class"));return!m(n.class,r)&&h(e,t,"."+r.trim().replace(/\s+/g,"."))}function a(e,t,n,r,u){return g(e,t,n,r,u)}function c(e,t,n,r){return g(e,t,n,e.parentNode,r)}function f(e,t,n,r){var u=e.attributes;return Object.keys(u).sort(b(u,r)).some(function(r){var o=u[r],i=o.name,a=(0,j.escapeValue)(o.value);if(m(n.attribute,i,a,S.attribute))return!1;var c="["+i+'="'+a+'"]';return h(e,t,c)})}function l(e,t,n,r){return y(e,t,n,r)}function s(e,t,n){return y(e,t,n,e.parentNode)}function d(e,t,n){var r=e.tagName.toLowerCase();return!m(n.tag,r)&&h(e,t,r)}function p(e,t,n){var r=(0,j.escapeValue)(e.getAttribute("id"));return!m(n.id,r)&&(t.unshift("#"+r),!0)}function v(e,t,n,r){var u=(0,j.escapeValue)(e.getAttribute("class"));if(m(n.class,u))return!1;var o=r.getElementsByClassName(u);return 1===o.length&&(t.unshift("."+u.trim().replace(/\s+/g,".")),!0)}function g(e,t,n,r,u){var o=e.attributes;return Object.keys(o).sort(b(o,u)).some(function(e){var u=o[e],i=u.name,a=(0,j.escapeValue)(u.value);if(m(n.attribute,i,a,S.attribute))return!1;var c="["+i+'="'+a+'"]',f=r.querySelectorAll(c);return 1===f.length?(t.unshift(c),!0):void 0})}function y(e,t,n,r){var u=e.tagName.toLowerCase();if(m(n.tag,u))return!1;var o=r.getElementsByTagName(u);return 1===o.length&&(t.unshift(u),!0)}function h(e,t,n){for(var r=e.parentNode,u=r.childTags||r.children,o=0,i=u.length;o<i;o++)if(u[o]===e)return t.unshift("> "+n+":nth-child("+(o+1)+")"),!0;return!1}function m(e,t,n,r){if(!t)return!0;var u=e||r;return!!u&&u(t,n||t,r)}function b(e,t){return function(n,r){return t.indexOf(e[n].name)-t.indexOf(e[r].name)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var j=n(1),S={attribute:function(e){return["style","data-reactid","data-react-checksum"].indexOf(e)>-1}};e.exports=t.default},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.length?i(e,t):o(e,t)}function o(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(3===t.nodeType&&(t=t.parentNode),1!==t.nodeType)throw new Error('Invalid input - only HTMLElements or representations of them are supported! (not "'+("undefined"==typeof t?"undefined":c(t))+'")');var r=(0,l.default)(t,n),u=(0,d.default)(t,n),o=(0,v.default)(u,t,n);return r&&delete e.document,o}function i(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Array.isArray(t)||(t=(0,g.convertNodeList)(t)),t.some(function(e){return 1!==e.nodeType}))throw new Error("Invalid input - only an Array of HTMLElements or representations of them is supported!");var r=(0,l.default)(t[0],n),u=(0,y.getCommonAncestor)(t,n),i=o(u,n),c=a(t),f=c[0],s=(0,v.default)(i+" "+f,t,n),d=(0,g.convertNodeList)(document.querySelectorAll(s));return t.every(function(e){return d.some(function(t){return t===e})})?(r&&delete e.document,s):console.warn("\n      The selected elements can't be efficiently mapped.\n      Its probably best to use multiple single selectors instead!\n    ",t)}function a(e){var t=(0,y.getCommonProperties)(e),n=t.classes,r=t.attributes,u=t.tag,o=[];if(u&&o.push(u),n){var i=n.map(function(e){return"."+e}).join("");o.push(i)}if(r){var a=Object.keys(r).reduce(function(e,t){return e.push("["+t+'="'+r[t]+'"]'),e},[]).join("");o.push(a)}return o.length,[o.join("")]}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.default=u,t.getSingleSelector=o,t.getMultiSelector=i;var f=n(2),l=r(f),s=n(5),d=r(s),p=n(4),v=r(p),g=n(1),y=n(3)}).call(t,function(){return this}())}])});
//# sourceMappingURL=optimal-select.min.js.map