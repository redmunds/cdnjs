angular.module("ui.tinymce",[]).value("uiTinymceConfig",{}).directive("uiTinymce",["$rootScope","$window","uiTinymceConfig",function(e,n,i){i=i||{};var t=0;return{priority:10,require:"ngModel",link:function(o,u,c,r){if(n.tinymce){var a,l,d,s=function(){r.$setViewValue(u.val()),e.$$phase||o.$apply()};if(c.id||c.$set("id","uiTinymce"+t++),a={},angular.extend(a,o.$eval(c.uiTinymce)),a.setup){var f=a.setup;delete a.setup}l={setup:function(e){e.on("init",function(e){r.$render(),r.$setPristine()}),e.on("ExecCommand",function(n){e.save(),s()}),e.on("KeyUp",function(n){e.save(),s()}),e.on("SetContent",function(n){n.initial||r.$viewValue===n.content||(e.save(),s())}),e.on("blur",function(e){u[0].blur()}),e.on("ObjectResized",function(n){e.save(),s()}),f&&f(e)},selector:"#"+c.id},angular.extend(l,i,a),tinymce.init(l),r.$render=function(){d||(d=tinymce.get(c.id)),d&&d.setContent(r.$viewValue||"")},o.$on("$destroy",function(){d||(d=tinymce.get(c.id)),d&&(d.remove(),d=null)})}}}}]);