angular.module("ui.tinymce",[]).value("uiTinymceConfig",{}).directive("uiTinymce",["uiTinymceConfig",function(e){e=e||{};var n=0;return{priority:10,require:"ngModel",link:function(i,t,u,o){var c,r,a,l=function(){o.$setViewValue(t.val()),i.$root.$$phase||i.$apply()};if(u.id||u.$set("id","uiTinymce"+n++),c=u.uiTinymce?i.$eval(u.uiTinymce):{},c.setup){var m=c.setup;delete c.setup}r={setup:function(e){e.on("init",function(e){o.$render()}),e.on("ExecCommand",function(n){e.save(),l()}),e.on("KeyUp",function(n){e.save(),l()}),e.on("SetContent",function(n){n.initial||(e.save(),l())}),e.on("blur",function(e){t.blur()}),m&&m(e)},mode:"exact",elements:u.id},angular.extend(r,e,c),setTimeout(function(){tinymce.init(r)}),o.$render=function(){a||(a=tinymce.get(u.id)),a&&a.setContent(o.$viewValue||"")},i.$on("$destroy",function(){a||(a=tinymce.get(u.id)),a&&(a.remove(),a=null)})}}}]);