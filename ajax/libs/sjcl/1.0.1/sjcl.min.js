"use strict";function q(t){throw t}function y(t,e,n){4!==e.length&&q(new sjcl.exception.invalid("invalid aes block size"));var i=t.b[n],c=e[0]^i[0],s=e[n?3:1]^i[1],r=e[2]^i[2];e=e[n?1:3]^i[3];var o,a,l,h,u=i.length/4-2,d=4,p=[0,0,0,0];o=t.k[n],t=o[0];var f=o[1],m=o[2],g=o[3],j=o[4];for(h=0;h<u;h++)o=t[c>>>24]^f[s>>16&255]^m[r>>8&255]^g[255&e]^i[d],a=t[s>>>24]^f[r>>16&255]^m[e>>8&255]^g[255&c]^i[d+1],l=t[r>>>24]^f[e>>16&255]^m[c>>8&255]^g[255&s]^i[d+2],e=t[e>>>24]^f[c>>16&255]^m[s>>8&255]^g[255&r]^i[d+3],d+=4,c=o,s=a,r=l;for(h=0;4>h;h++)p[n?3&-h:h]=j[c>>>24]<<24^j[s>>16&255]<<16^j[r>>8&255]<<8^j[255&e]^i[d++],o=c,c=s,s=r,r=e,e=o;return p}function z(t,e){var n,i,c,s=e.slice(0),r=t.r,o=t.b,a=r[0],l=r[1],h=r[2],u=r[3],d=r[4],p=r[5],f=r[6],m=r[7];for(n=0;64>n;n++)16>n?i=s[n]:(i=s[n+1&15],c=s[n+14&15],i=s[15&n]=(i>>>7^i>>>18^i>>>3^i<<25^i<<14)+(c>>>17^c>>>19^c>>>10^c<<15^c<<13)+s[15&n]+s[n+9&15]|0),i=i+m+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(f^d&(p^f))+o[n],m=f,f=p,p=d,d=u+i|0,u=h,h=l,l=a,a=i+(l&h^u&(l^h))+(l>>>2^l>>>13^l>>>22^l<<30^l<<19^l<<10)|0;r[0]=r[0]+a|0,r[1]=r[1]+l|0,r[2]=r[2]+h|0,r[3]=r[3]+u|0,r[4]=r[4]+d|0,r[5]=r[5]+p|0,r[6]=r[6]+f|0,r[7]=r[7]+m|0}function C(t,e){var n,i=sjcl.random.w[t],c=[];for(n in i)i.hasOwnProperty(n)&&c.push(i[n]);for(n=0;n<c.length;n++)c[n](e)}function E(t){window&&window.performance&&"function"==typeof window.performance.now?sjcl.random.addEntropy(window.performance.now(),t,"loadtime"):sjcl.random.addEntropy((new Date).valueOf(),t,"loadtime")}function A(t){t.b=B(t).concat(B(t)),t.A=new sjcl.cipher.aes(t.b)}function B(t){for(var e=0;4>e&&(t.f[e]=t.f[e]+1|0,!t.f[e]);e++);return t.A.encrypt(t.f)}function D(t,e){return function(){e.apply(t,arguments)}}var t=void 0,u=!1,sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}}};"undefined"!=typeof module&&module.exports&&(module.exports=sjcl),sjcl.cipher.aes=function(t){this.k[0][0][0]||this.D();var e,n,i,c,s=this.k[0][4],r=this.k[1];e=t.length;var o=1;for(4!==e&&6!==e&&8!==e&&q(new sjcl.exception.invalid("invalid aes key size")),this.b=[i=t.slice(0),c=[]],t=e;t<4*e+28;t++)n=i[t-1],(0===t%e||8===e&&4===t%e)&&(n=s[n>>>24]<<24^s[n>>16&255]<<16^s[n>>8&255]<<8^s[255&n],0===t%e&&(n=n<<8^n>>>24^o<<24,o=o<<1^283*(o>>7))),i[t]=i[t-e]^n;for(e=0;t;e++,t--)n=i[3&e?t:t-4],c[e]=4>=t||4>e?n:r[0][s[n>>>24]]^r[1][s[n>>16&255]]^r[2][s[n>>8&255]]^r[3][s[255&n]]},sjcl.cipher.aes.prototype={encrypt:function(t){return y(this,t,0)},decrypt:function(t){return y(this,t,1)},k:[[[],[],[],[],[]],[[],[],[],[],[]]],D:function(){var t,e,n,i,c,s,r,o=this.k[0],a=this.k[1],l=o[4],h=a[4],u=[],d=[];for(t=0;256>t;t++)d[(u[t]=t<<1^283*(t>>7))^t]=t;for(e=n=0;!l[e];e^=i||1,n=d[n]||1)for(s=n^n<<1^n<<2^n<<3^n<<4,s=s>>8^255&s^99,l[e]=s,h[s]=e,c=u[t=u[i=u[e]]],r=16843009*c^65537*t^257*i^16843008*e,c=257*u[s]^16843008*s,t=0;4>t;t++)o[t][e]=c=c<<24^c>>>8,a[t][s]=r=r<<24^r>>>8;for(t=0;5>t;t++)o[t]=o[t].slice(0),a[t]=a[t].slice(0)}},sjcl.bitArray={bitSlice:function(e,n,i){return e=sjcl.bitArray.P(e.slice(n/32),32-(31&n)).slice(1),i===t?e:sjcl.bitArray.clamp(e,i-n)},extract:function(t,e,n){var i=Math.floor(-e-n&31);return((e+n-1^e)&-32?t[e/32|0]<<32-i^t[e/32+1|0]>>>i:t[e/32|0]>>>i)&(1<<n)-1},concat:function(t,e){if(0===t.length||0===e.length)return t.concat(e);var n=t[t.length-1],i=sjcl.bitArray.getPartial(n);return 32===i?t.concat(e):sjcl.bitArray.P(e,i,0|n,t.slice(0,t.length-1))},bitLength:function(t){var e=t.length;return 0===e?0:32*(e-1)+sjcl.bitArray.getPartial(t[e-1])},clamp:function(t,e){if(32*t.length<e)return t;t=t.slice(0,Math.ceil(e/32));var n=t.length;return e&=31,0<n&&e&&(t[n-1]=sjcl.bitArray.partial(e,t[n-1]&2147483648>>e-1,1)),t},partial:function(t,e,n){return 32===t?e:(n?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(t,e){if(sjcl.bitArray.bitLength(t)!==sjcl.bitArray.bitLength(e))return u;var n,i=0;for(n=0;n<t.length;n++)i|=t[n]^e[n];return 0===i},P:function(e,n,i,c){var s;for(s=0,c===t&&(c=[]);32<=n;n-=32)c.push(i),i=0;if(0===n)return c.concat(e);for(s=0;s<e.length;s++)c.push(i|e[s]>>>n),i=e[s]<<32-n;return s=e.length?e[e.length-1]:0,e=sjcl.bitArray.getPartial(s),c.push(sjcl.bitArray.partial(n+e&31,32<n+e?i:c.pop(),1)),c},l:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]}},sjcl.codec.utf8String={fromBits:function(t){var e,n,i="",c=sjcl.bitArray.bitLength(t);for(e=0;e<c/8;e++)0===(3&e)&&(n=t[e/4]),i+=String.fromCharCode(n>>>24),n<<=8;return decodeURIComponent(escape(i))},toBits:function(t){t=unescape(encodeURIComponent(t));var e,n=[],i=0;for(e=0;e<t.length;e++)i=i<<8|t.charCodeAt(e),3===(3&e)&&(n.push(i),i=0);return 3&e&&n.push(sjcl.bitArray.partial(8*(3&e),i)),n}},sjcl.codec.hex={fromBits:function(t){var e,n="";for(e=0;e<t.length;e++)n+=((0|t[e])+0xf00000000000).toString(16).substr(4);return n.substr(0,sjcl.bitArray.bitLength(t)/4)},toBits:function(t){var e,n,i=[];for(t=t.replace(/\s|0x/g,""),n=t.length,t+="00000000",e=0;e<t.length;e+=8)i.push(0^parseInt(t.substr(e,8),16));return sjcl.bitArray.clamp(i,4*n)}},sjcl.codec.base64={J:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(t,e,n){var i="",c=0,s=sjcl.codec.base64.J,r=0,o=sjcl.bitArray.bitLength(t);for(n&&(s=s.substr(0,62)+"-_"),n=0;6*i.length<o;)i+=s.charAt((r^t[n]>>>c)>>>26),6>c?(r=t[n]<<6-c,c+=26,n++):(r<<=6,c-=6);for(;3&i.length&&!e;)i+="=";return i},toBits:function(t,e){t=t.replace(/\s|=/g,"");var n,i,c=[],s=0,r=sjcl.codec.base64.J,o=0;for(e&&(r=r.substr(0,62)+"-_"),n=0;n<t.length;n++)i=r.indexOf(t.charAt(n)),0>i&&q(new sjcl.exception.invalid("this isn't base64!")),26<s?(s-=26,c.push(o^i>>>s),o=i<<32-s):(s+=6,o^=i<<32-s);return 56&s&&c.push(sjcl.bitArray.partial(56&s,o,1)),c}},sjcl.codec.base64url={fromBits:function(t){return sjcl.codec.base64.fromBits(t,1,1)},toBits:function(t){return sjcl.codec.base64.toBits(t,1)}},sjcl.hash.sha256=function(t){this.b[0]||this.D(),t?(this.r=t.r.slice(0),this.o=t.o.slice(0),this.h=t.h):this.reset()},sjcl.hash.sha256.hash=function(t){return(new sjcl.hash.sha256).update(t).finalize()},sjcl.hash.sha256.prototype={blockSize:512,reset:function(){return this.r=this.N.slice(0),this.o=[],this.h=0,this},update:function(t){"string"==typeof t&&(t=sjcl.codec.utf8String.toBits(t));var e,n=this.o=sjcl.bitArray.concat(this.o,t);for(e=this.h,t=this.h=e+sjcl.bitArray.bitLength(t),e=512+e&-512;e<=t;e+=512)z(this,n.splice(0,16));return this},finalize:function(){var t,e=this.o,n=this.r,e=sjcl.bitArray.concat(e,[sjcl.bitArray.partial(1,1)]);for(t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this.h/4294967296)),e.push(0|this.h);e.length;)z(this,e.splice(0,16));return this.reset(),n},N:[],b:[],D:function(){function t(t){return 4294967296*(t-Math.floor(t))|0}var e,n=0,i=2;t:for(;64>n;i++){for(e=2;e*e<=i;e++)if(0===i%e)continue t;8>n&&(this.N[n]=t(Math.pow(i,.5))),this.b[n]=t(Math.pow(i,1/3)),n++}}},sjcl.mode.ccm={name:"ccm",encrypt:function(t,e,n,i,c){var s,r=e.slice(0),o=sjcl.bitArray,a=o.bitLength(n)/8,l=o.bitLength(r)/8;for(c=c||64,i=i||[],7>a&&q(new sjcl.exception.invalid("ccm: iv must be at least 7 bytes")),s=2;4>s&&l>>>8*s;s++);return s<15-a&&(s=15-a),n=o.clamp(n,8*(15-s)),e=sjcl.mode.ccm.L(t,e,n,i,c,s),r=sjcl.mode.ccm.p(t,r,n,e,c,s),o.concat(r.data,r.tag)},decrypt:function(t,e,n,i,c){c=c||64,i=i||[];var s=sjcl.bitArray,r=s.bitLength(n)/8,o=s.bitLength(e),a=s.clamp(e,o-c),l=s.bitSlice(e,o-c),o=(o-c)/8;for(7>r&&q(new sjcl.exception.invalid("ccm: iv must be at least 7 bytes")),e=2;4>e&&o>>>8*e;e++);return e<15-r&&(e=15-r),n=s.clamp(n,8*(15-e)),a=sjcl.mode.ccm.p(t,a,n,l,c,e),t=sjcl.mode.ccm.L(t,a.data,n,i,c,e),s.equal(a.tag,t)||q(new sjcl.exception.corrupt("ccm: tag doesn't match")),a.data},L:function(t,e,n,i,c,s){var r=[],o=sjcl.bitArray,a=o.l;if(c/=8,(c%2||4>c||16<c)&&q(new sjcl.exception.invalid("ccm: invalid tag length")),(4294967295<i.length||4294967295<e.length)&&q(new sjcl.exception.bug("ccm: can't deal with 4GiB or more data")),s=[o.partial(8,(i.length?64:0)|c-2<<2|s-1)],s=o.concat(s,n),s[3]|=o.bitLength(e)/8,s=t.encrypt(s),i.length)for(n=o.bitLength(i)/8,65279>=n?r=[o.partial(16,n)]:4294967295>=n&&(r=o.concat([o.partial(16,65534)],[n])),r=o.concat(r,i),i=0;i<r.length;i+=4)s=t.encrypt(a(s,r.slice(i,i+4).concat([0,0,0])));for(i=0;i<e.length;i+=4)s=t.encrypt(a(s,e.slice(i,i+4).concat([0,0,0])));return o.clamp(s,8*c)},p:function(t,e,n,i,c,s){var r,o=sjcl.bitArray;r=o.l;var a=e.length,l=o.bitLength(e);if(n=o.concat([o.partial(8,s-1)],n).concat([0,0,0]).slice(0,4),i=o.bitSlice(r(i,t.encrypt(n)),0,c),!a)return{tag:i,data:[]};for(r=0;r<a;r+=4)n[3]++,c=t.encrypt(n),e[r]^=c[0],e[r+1]^=c[1],e[r+2]^=c[2],e[r+3]^=c[3];return{tag:i,data:o.clamp(e,l)}}},sjcl.mode.ocb2={name:"ocb2",encrypt:function(t,e,n,i,c,s){128!==sjcl.bitArray.bitLength(n)&&q(new sjcl.exception.invalid("ocb iv must be 128 bits"));var r,o=sjcl.mode.ocb2.H,a=sjcl.bitArray,l=a.l,h=[0,0,0,0];n=o(t.encrypt(n));var u,d=[];for(i=i||[],c=c||64,r=0;r+4<e.length;r+=4)u=e.slice(r,r+4),h=l(h,u),d=d.concat(l(n,t.encrypt(l(n,u)))),n=o(n);return u=e.slice(r),e=a.bitLength(u),r=t.encrypt(l(n,[0,0,0,e])),u=a.clamp(l(u.concat([0,0,0]),r),e),h=l(h,l(u.concat([0,0,0]),r)),h=t.encrypt(l(h,l(n,o(n)))),i.length&&(h=l(h,s?i:sjcl.mode.ocb2.pmac(t,i))),d.concat(a.concat(u,a.clamp(h,c)))},decrypt:function(t,e,n,i,c,s){128!==sjcl.bitArray.bitLength(n)&&q(new sjcl.exception.invalid("ocb iv must be 128 bits")),c=c||64;var r,o,a=sjcl.mode.ocb2.H,l=sjcl.bitArray,h=l.l,u=[0,0,0,0],d=a(t.encrypt(n)),p=sjcl.bitArray.bitLength(e)-c,f=[];for(i=i||[],n=0;n+4<p/32;n+=4)r=h(d,t.decrypt(h(d,e.slice(n,n+4)))),u=h(u,r),f=f.concat(r),d=a(d);return o=p-32*n,r=t.encrypt(h(d,[0,0,0,o])),r=h(r,l.clamp(e.slice(n),o).concat([0,0,0])),u=h(u,r),u=t.encrypt(h(u,h(d,a(d)))),i.length&&(u=h(u,s?i:sjcl.mode.ocb2.pmac(t,i))),l.equal(l.clamp(u,c),l.bitSlice(e,p))||q(new sjcl.exception.corrupt("ocb: tag doesn't match")),f.concat(l.clamp(r,o))},pmac:function(t,e){var n,i=sjcl.mode.ocb2.H,c=sjcl.bitArray,s=c.l,r=[0,0,0,0],o=t.encrypt([0,0,0,0]),o=s(o,i(i(o)));for(n=0;n+4<e.length;n+=4)o=i(o),r=s(r,t.encrypt(s(o,e.slice(n,n+4))));return n=e.slice(n),128>c.bitLength(n)&&(o=s(o,i(o)),n=c.concat(n,[-2147483648,0,0,0])),r=s(r,n),t.encrypt(s(i(s(o,i(o))),r))},H:function(t){return[t[0]<<1^t[1]>>>31,t[1]<<1^t[2]>>>31,t[2]<<1^t[3]>>>31,t[3]<<1^135*(t[0]>>>31)]}},sjcl.mode.gcm={name:"gcm",encrypt:function(t,e,n,i,c){var s=e.slice(0);return e=sjcl.bitArray,i=i||[],t=sjcl.mode.gcm.p(!0,t,s,i,n,c||128),e.concat(t.data,t.tag)},decrypt:function(t,e,n,i,c){var s=e.slice(0),r=sjcl.bitArray,o=r.bitLength(s);return c=c||128,i=i||[],c<=o?(e=r.bitSlice(s,o-c),s=r.bitSlice(s,0,o-c)):(e=s,s=[]),t=sjcl.mode.gcm.p(u,t,s,i,n,c),r.equal(t.tag,e)||q(new sjcl.exception.corrupt("gcm: tag doesn't match")),t.data},Z:function(t,e){var n,i,c,s,r,o=sjcl.bitArray.l;for(c=[0,0,0,0],s=e.slice(0),n=0;128>n;n++){for((i=0!==(t[Math.floor(n/32)]&1<<31-n%32))&&(c=o(c,s)),r=0!==(1&s[3]),i=3;0<i;i--)s[i]=s[i]>>>1|(1&s[i-1])<<31;s[0]>>>=1,r&&(s[0]^=-520093696)}return c},g:function(t,e,n){var i,c=n.length;for(e=e.slice(0),i=0;i<c;i+=4)e[0]^=4294967295&n[i],e[1]^=4294967295&n[i+1],e[2]^=4294967295&n[i+2],e[3]^=4294967295&n[i+3],e=sjcl.mode.gcm.Z(e,t);return e},p:function(t,e,n,i,c,s){var r,o,a,l,h,u,d,p,f=sjcl.bitArray;for(u=n.length,d=f.bitLength(n),p=f.bitLength(i),o=f.bitLength(c),r=e.encrypt([0,0,0,0]),96===o?(c=c.slice(0),c=f.concat(c,[1])):(c=sjcl.mode.gcm.g(r,[0,0,0,0],c),c=sjcl.mode.gcm.g(r,c,[0,0,Math.floor(o/4294967296),4294967295&o])),o=sjcl.mode.gcm.g(r,[0,0,0,0],i),h=c.slice(0),i=o.slice(0),t||(i=sjcl.mode.gcm.g(r,o,n)),l=0;l<u;l+=4)h[3]++,a=e.encrypt(h),n[l]^=a[0],n[l+1]^=a[1],n[l+2]^=a[2],n[l+3]^=a[3];return n=f.clamp(n,d),t&&(i=sjcl.mode.gcm.g(r,o,n)),t=[Math.floor(p/4294967296),4294967295&p,Math.floor(d/4294967296),4294967295&d],i=sjcl.mode.gcm.g(r,i,t),a=e.encrypt(c),i[0]^=a[0],i[1]^=a[1],i[2]^=a[2],i[3]^=a[3],{tag:f.bitSlice(i,0,s),data:n}}},sjcl.misc.hmac=function(t,e){this.M=e=e||sjcl.hash.sha256;var n,i=[[],[]],c=e.prototype.blockSize/32;for(this.n=[new e,new e],t.length>c&&(t=e.hash(t)),n=0;n<c;n++)i[0][n]=909522486^t[n],i[1][n]=1549556828^t[n];this.n[0].update(i[0]),this.n[1].update(i[1]),this.G=new e(this.n[0])},sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(t){return this.Q&&q(new sjcl.exception.invalid("encrypt on already updated hmac called!")),this.update(t),this.digest(t)},sjcl.misc.hmac.prototype.reset=function(){this.G=new this.M(this.n[0]),this.Q=u},sjcl.misc.hmac.prototype.update=function(t){this.Q=!0,this.G.update(t)},sjcl.misc.hmac.prototype.digest=function(){var t=this.G.finalize(),t=new this.M(this.n[1]).update(t).finalize();return this.reset(),t},sjcl.misc.pbkdf2=function(t,e,n,i,c){n=n||1e3,(0>i||0>n)&&q(sjcl.exception.invalid("invalid params to pbkdf2")),"string"==typeof t&&(t=sjcl.codec.utf8String.toBits(t)),"string"==typeof e&&(e=sjcl.codec.utf8String.toBits(e)),c=c||sjcl.misc.hmac,t=new c(t);var s,r,o,a,l=[],h=sjcl.bitArray;for(a=1;32*l.length<(i||1);a++){for(c=s=t.encrypt(h.concat(e,[a])),r=1;r<n;r++)for(s=t.encrypt(s),o=0;o<s.length;o++)c[o]^=s[o];l=l.concat(c)}return i&&(l=h.clamp(l,i)),l},sjcl.prng=function(e){this.c=[new sjcl.hash.sha256],this.i=[0],this.F=0,this.s={},this.C=0,this.K={},this.O=this.d=this.j=this.W=0,this.b=[0,0,0,0,0,0,0,0],this.f=[0,0,0,0],this.A=t,this.B=e,this.q=u,this.w={progress:{},seeded:{}},this.m=this.V=0,this.t=1,this.u=2,this.S=65536,this.I=[0,48,64,96,128,192,256,384,512,768,1024],this.T=3e4,this.R=80},sjcl.prng.prototype={randomWords:function(t,e){var n,i=[];n=this.isReady(e);var c;if(n===this.m&&q(new sjcl.exception.notReady("generator isn't seeded")),n&this.u){n=!(n&this.t),c=[];var s,r=0;for(this.O=c[0]=(new Date).valueOf()+this.T,s=0;16>s;s++)c.push(4294967296*Math.random()|0);for(s=0;s<this.c.length&&(c=c.concat(this.c[s].finalize()),r+=this.i[s],this.i[s]=0,!(!n&&this.F&1<<s));s++);for(this.F>=1<<this.c.length&&(this.c.push(new sjcl.hash.sha256),this.i.push(0)),this.d-=r,r>this.j&&(this.j=r),this.F++,this.b=sjcl.hash.sha256.hash(this.b.concat(c)),this.A=new sjcl.cipher.aes(this.b),n=0;4>n&&(this.f[n]=this.f[n]+1|0,!this.f[n]);n++);}for(n=0;n<t;n+=4)0===(n+1)%this.S&&A(this),c=B(this),i.push(c[0],c[1],c[2],c[3]);return A(this),i.slice(0,t)},setDefaultParanoia:function(t,e){0===t&&"Setting paranoia=0 will ruin your security; use it only for testing"!==e&&q("Setting paranoia=0 will ruin your security; use it only for testing"),this.B=t},addEntropy:function(e,n,i){i=i||"user";var c,s,r=(new Date).valueOf(),o=this.s[i],a=this.isReady(),l=0;switch(c=this.K[i],c===t&&(c=this.K[i]=this.W++),o===t&&(o=this.s[i]=0),this.s[i]=(this.s[i]+1)%this.c.length,typeof e){case"number":n===t&&(n=1),this.c[o].update([c,this.C++,1,n,r,1,0|e]);break;case"object":if(i=Object.prototype.toString.call(e),"[object Uint32Array]"===i){for(s=[],i=0;i<e.length;i++)s.push(e[i]);e=s}else for("[object Array]"!==i&&(l=1),i=0;i<e.length&&!l;i++)"number"!=typeof e[i]&&(l=1);if(!l){if(n===t)for(i=n=0;i<e.length;i++)for(s=e[i];0<s;)n++,s>>>=1;this.c[o].update([c,this.C++,2,n,r,e.length].concat(e))}break;case"string":n===t&&(n=e.length),this.c[o].update([c,this.C++,3,n,r,e.length]),this.c[o].update(e);break;default:l=1}l&&q(new sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string")),this.i[o]+=n,this.d+=n,a===this.m&&(this.isReady()!==this.m&&C("seeded",Math.max(this.j,this.d)),C("progress",this.getProgress()))},isReady:function(e){return e=this.I[e!==t?e:this.B],this.j&&this.j>=e?this.i[0]>this.R&&(new Date).valueOf()>this.O?this.u|this.t:this.t:this.d>=e?this.u|this.m:this.m},getProgress:function(t){return t=this.I[t?t:this.B],this.j>=t?1:this.d>t?1:this.d/t},startCollectors:function(){this.q||(this.a={loadTimeCollector:D(this,this.aa),mouseCollector:D(this,this.ba),keyboardCollector:D(this,this.$),accelerometerCollector:D(this,this.U)},window.addEventListener?(window.addEventListener("load",this.a.loadTimeCollector,u),window.addEventListener("mousemove",this.a.mouseCollector,u),window.addEventListener("keypress",this.a.keyboardCollector,u),window.addEventListener("devicemotion",this.a.accelerometerCollector,u)):document.attachEvent?(document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector)):q(new sjcl.exception.bug("can't attach event")),this.q=!0)},stopCollectors:function(){this.q&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,u),window.removeEventListener("mousemove",this.a.mouseCollector,u),window.removeEventListener("keypress",this.a.keyboardCollector,u),window.removeEventListener("devicemotion",this.a.accelerometerCollector,u)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.q=u)},addEventListener:function(t,e){this.w[t][this.V++]=e},removeEventListener:function(t,e){var n,i,c=this.w[t],s=[];for(i in c)c.hasOwnProperty(i)&&c[i]===e&&s.push(i);for(n=0;n<s.length;n++)i=s[n],delete c[i]},$:function(){E(1)},ba:function(t){sjcl.random.addEntropy([t.x||t.clientX||t.offsetX||0,t.y||t.clientY||t.offsetY||0],2,"mouse"),E(0)},aa:function(){E(2)},U:function(t){if(t=t.accelerationIncludingGravity.x||t.accelerationIncludingGravity.y||t.accelerationIncludingGravity.z,window.orientation){var e=window.orientation;"number"==typeof e&&sjcl.random.addEntropy(e,1,"accelerometer")}t&&sjcl.random.addEntropy(t,2,"accelerometer"),E(0)}},sjcl.random=new sjcl.prng(6);t:try{var F,G,H,I;if(I="undefined"!=typeof module){var J;if(J=module.exports){var K;try{K=require("crypto")}catch(t){K=null}J=(G=K)&&G.randomBytes}I=J}if(I)F=G.randomBytes(128),F=new Uint32Array(new Uint8Array(F).buffer),sjcl.random.addEntropy(F,1024,"crypto['randomBytes']");else if(window&&Uint32Array){if(H=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(H);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)break t;window.msCrypto.getRandomValues(H)}sjcl.random.addEntropy(H,1024,"crypto['getRandomValues']")}}catch(t){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(t))}sjcl.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},Y:function(t,e,n,i){n=n||{},i=i||{};var c,s=sjcl.json,r=s.e({iv:sjcl.random.randomWords(4,0)},s.defaults);return s.e(r,n),n=r.adata,"string"==typeof r.salt&&(r.salt=sjcl.codec.base64.toBits(r.salt)),"string"==typeof r.iv&&(r.iv=sjcl.codec.base64.toBits(r.iv)),(!sjcl.mode[r.mode]||!sjcl.cipher[r.cipher]||"string"==typeof t&&100>=r.iter||64!==r.ts&&96!==r.ts&&128!==r.ts||128!==r.ks&&192!==r.ks&&256!==r.ks||2>r.iv.length||4<r.iv.length)&&q(new sjcl.exception.invalid("json encrypt: invalid parameters")),"string"==typeof t?(c=sjcl.misc.cachedPbkdf2(t,r),t=c.key.slice(0,r.ks/32),r.salt=c.salt):sjcl.ecc&&t instanceof sjcl.ecc.elGamal.publicKey&&(c=t.kem(),r.kemtag=c.tag,t=c.key.slice(0,r.ks/32)),"string"==typeof e&&(e=sjcl.codec.utf8String.toBits(e)),"string"==typeof n&&(n=sjcl.codec.utf8String.toBits(n)),c=new sjcl.cipher[r.cipher](t),s.e(i,r),i.key=t,r.ct=sjcl.mode[r.mode].encrypt(c,e,r.iv,n,r.ts),r},encrypt:function(t,e,n,i){var c=sjcl.json,s=c.Y.apply(c,arguments);return c.encode(s)},X:function(t,e,n,i){n=n||{},i=i||{};var c=sjcl.json;e=c.e(c.e(c.e({},c.defaults),e),n,!0);var s;return n=e.adata,"string"==typeof e.salt&&(e.salt=sjcl.codec.base64.toBits(e.salt)),"string"==typeof e.iv&&(e.iv=sjcl.codec.base64.toBits(e.iv)),(!sjcl.mode[e.mode]||!sjcl.cipher[e.cipher]||"string"==typeof t&&100>=e.iter||64!==e.ts&&96!==e.ts&&128!==e.ts||128!==e.ks&&192!==e.ks&&256!==e.ks||!e.iv||2>e.iv.length||4<e.iv.length)&&q(new sjcl.exception.invalid("json decrypt: invalid parameters")),"string"==typeof t?(s=sjcl.misc.cachedPbkdf2(t,e),t=s.key.slice(0,e.ks/32),e.salt=s.salt):sjcl.ecc&&t instanceof sjcl.ecc.elGamal.secretKey&&(t=t.unkem(sjcl.codec.base64.toBits(e.kemtag)).slice(0,e.ks/32)),"string"==typeof n&&(n=sjcl.codec.utf8String.toBits(n)),s=new sjcl.cipher[e.cipher](t),n=sjcl.mode[e.mode].decrypt(s,e.ct,e.iv,n,e.ts),c.e(i,e),i.key=t,sjcl.codec.utf8String.fromBits(n)},decrypt:function(t,e,n,i){var c=sjcl.json;return c.X(t,c.decode(e),n,i)},encode:function(t){var e,n="{",i="";for(e in t)if(t.hasOwnProperty(e))switch(e.match(/^[a-z0-9]+$/i)||q(new sjcl.exception.invalid("json encode: invalid property name")),n+=i+'"'+e+'":',i=",",typeof t[e]){case"number":case"boolean":n+=t[e];break;case"string":n+='"'+escape(t[e])+'"';break;case"object":n+='"'+sjcl.codec.base64.fromBits(t[e],0)+'"';break;default:q(new sjcl.exception.bug("json encode: unsupported type"))}return n+"}"},decode:function(t){t=t.replace(/\s/g,""),t.match(/^\{.*\}$/)||q(new sjcl.exception.invalid("json decode: this isn't json!")),t=t.replace(/^\{|\}$/g,"").split(/,/);var e,n,i={};for(e=0;e<t.length;e++)(n=t[e].match(/^(?:(["']?)([a-z][a-z0-9]*)\1):(?:(\d+)|"([a-z0-9+\/%*_.@=\-]*)")$/i))||q(new sjcl.exception.invalid("json decode: this isn't json!")),i[n[2]]=n[3]?parseInt(n[3],10):n[2].match(/^(ct|salt|iv)$/)?sjcl.codec.base64.toBits(n[4]):unescape(n[4]);return i},e:function(e,n,i){if(e===t&&(e={}),n===t)return e;for(var c in n)n.hasOwnProperty(c)&&(i&&e[c]!==t&&e[c]!==n[c]&&q(new sjcl.exception.invalid("required parameter overridden")),e[c]=n[c]);return e},ea:function(t,e){var n,i={};for(n in t)t.hasOwnProperty(n)&&t[n]!==e[n]&&(i[n]=t[n]);return i},da:function(e,n){var i,c={};for(i=0;i<n.length;i++)e[n[i]]!==t&&(c[n[i]]=e[n[i]]);return c}},sjcl.encrypt=sjcl.json.encrypt,sjcl.decrypt=sjcl.json.decrypt,sjcl.misc.ca={},sjcl.misc.cachedPbkdf2=function(e,n){var i,c=sjcl.misc.ca;return n=n||{},i=n.iter||1e3,c=c[e]=c[e]||{},i=c[i]=c[i]||{firstSalt:n.salt&&n.salt.length?n.salt.slice(0):sjcl.random.randomWords(2,0)},c=n.salt===t?i.firstSalt:n.salt,i[c]=i[c]||sjcl.misc.pbkdf2(e,c,n.iter),{key:i[c].slice(0),salt:c.slice(0)}};
//# sourceMappingURL=sjcl.min.js.map