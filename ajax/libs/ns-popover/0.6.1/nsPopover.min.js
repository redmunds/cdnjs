!function(t,e,o){"use strict";var n=e.module("nsPopover",[]),i=e.element,r=e.isDefined,a=(e.forEach,[]),l=0;n.provider("nsPopover",function(){var t={template:"",theme:"ns-popover-list-theme",plain:"false",trigger:"click",container:"body",placement:"bottom|left",timeout:1.5,hideOnClick:"true",mouseRelative:""};this.setDefaults=function(o){e.extend(t,o)},this.$get=[function(){return{getDefaults:function(){return t}}}]}),n.directive("nsPopover",["nsPopover","$timeout","$templateCache","$q","$http","$compile","$document",function(n,c,s,p,h,u,m){return{restrict:"A",scope:!0,link:function(d,f,g){function v(t,e,o,n,i){var r,a,l=w(t[0]),c=function(){return"center"===o?Math.round(n.left+n.width/2-l.width/2):"right"===o?n.right-l.width:n.left},s=function(){return"center"===o?Math.round(n.top+n.height/2-l.height/2):"bottom"===o?n.bottom-l.height:n.top};"top"===e?(r=n.top-l.height,a=c()):"right"===e?(r=s(),a=n.right):"bottom"===e?(r=n.bottom,a=c()):"left"===e&&(r=s(),a=n.left-l.width),t.css("top",r.toString()+"px").css("left",a.toString()+"px"),i&&("top"===e||"bottom"===e?(a=n.left+n.width/2-a,i.css("left",a.toString()+"px")):(r=n.top+n.height/2-r,i.css("top",r.toString()+"px")))}function b(t,e,o,n){var i={bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width};return e&&(i.left=n.pageX,i.right=n.pageX,i.width=0),o&&(i.top=n.pageY,i.bottom=n.pageY,i.height=0),i}function w(e){var o=t,n=document.documentElement||document.body.parentNode||document.body,i=r(o.pageXOffset)?o.pageXOffset:n.scrollLeft,a=r(o.pageYOffset)?o.pageYOffset:n.scrollTop,l=e.getBoundingClientRect();return i||a?{bottom:l.bottom+a,left:l.left+i,right:l.right+i,top:l.top+a,height:l.height,width:l.width}:l}function P(t){if(t&&0!==t.length){var e=(""+t).toLowerCase();t="true"==e}else t=!1;return t}function C(t,o){return t?e.isString(t)&&o?t:s.get(t)||h.get(t,{cache:!0}):""}var R=n.getDefaults(),O={template:g.nsPopoverTemplate||R.template,theme:g.nsPopoverTheme||R.theme,plain:P(g.nsPopoverPlain||R.plain),trigger:g.nsPopoverTrigger||R.trigger,container:g.nsPopoverContainer||R.container,placement:g.nsPopoverPlacement||R.placement,timeout:g.nsPopoverTimeout||R.timeout,hideOnClick:P(g.nsPopoverHideOnClick||R.hideOnClick),mouseRelative:g.nsPopoverMouseRelative};O.mouseRelative&&(O.mouseRelativeX=-1!==O.mouseRelative.indexOf("x"),O.mouseRelativeY=-1!==O.mouseRelative.indexOf("y"));var k={id_:o,hide:function(t,e){c.cancel(k.id_),r(e)||(e=1.5),k.id_=c(function(){t.css("display","none")},1e3*e)},cancel:function(){c.cancel(k.id_)}},y=m[0].querySelector(O.container);y.length||(y=m.find("body"));var $,x,S;l+=1;var X=i('<div id="nspopover-'+l+'"></div>');a.push(X);var Y=O.placement.match(/^(top|bottom|left|right)$|((top|bottom)\|(center|left|right)+)|((left|right)\|(center|top|bottom)+)/);if(!Y)throw new Error('"'+O.placement+'" is not a valid placement or has a invalid combination of placements.');x=Y[6]||Y[3]||Y[1],S=Y[7]||Y[4]||Y[2]||"center",p.when(C(O.template,O.plain)).then(function(t){if(t=e.isString(t)?t:t.data&&e.isString(t.data)?t.data:"",X.html(t),O.theme&&X.addClass(O.theme),X.addClass("ns-popover-"+x+"-placement").addClass("ns-popover-"+S+"-align"),c(function(){u(X)(d)}),d.$on("$destroy",function(){X.remove()}),d.hidePopover=function(){k.hide(X,0)},X.css("position","absolute").css("display","none"),$=X.find(".triangle"),!$.length)for(var o=X.children(),n=0;n<o.length;++n){var r=i(o[n]);if(r.hasClass("triangle")){$=r;break}}y.append(X)}),f.on(O.trigger,function(t){t.preventDefault(),k.cancel(),X.css("display","block");var e=w(f[0]);O.mouseRelative&&(e=b(e,O.mouseRelativeX,O.mouseRelativeY,t)),v(X,x,S,e,$),O.hideOnClick&&X.on("click",function(){k.hide(X,0)})}),f.on("mouseout",function(){k.hide(X,O.timeout)}).on("mouseover",function(){k.cancel()}),X.on("mouseout",function(t){k.hide(X,O.timeout)}).on("mouseover",function(){k.cancel()})}}}])}(window,window.angular);
//# sourceMappingURL=nsPopover.min.js.map