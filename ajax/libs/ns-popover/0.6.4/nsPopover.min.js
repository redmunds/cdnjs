!function(e,t,n){"use strict";var o=t.module("nsPopover",[]),i=t.element,a=t.isDefined,r=[],l=0;o.provider("nsPopover",function(){var e={template:"",theme:"ns-popover-list-theme",plain:"false",trigger:"click",angularEvent:"",container:"body",placement:"bottom|left",timeout:1.5,hideOnInsideClick:!1,hideOnOutsideClick:!0,hideOnButtonClick:!0,mouseRelative:"",popupDelay:0,modal:!1};this.$get=[function(){return{getDefaults:function(){return e}}}]}),o.directive("nsPopover",["nsPopover","$rootScope","$timeout","$templateCache","$q","$http","$compile","$document",function(o,c,p,s,d,u,h,f){return{restrict:"A",scope:!0,link:function(m,g,v){function O(e,t,n,o,i){var a,r,l=k(e[0]),c=function(){return"center"===n?Math.round(o.left+o.width/2-l.width/2):"right"===n?o.right-l.width:o.left},p=function(){return"center"===n?Math.round(o.top+o.height/2-l.height/2):"bottom"===n?o.bottom-l.height:o.top};"top"===t?(a=o.top-l.height,r=c()):"right"===t?(a=p(),r=o.right):"bottom"===t?(a=o.bottom,r=c()):"left"===t&&(a=p(),r=o.left-l.width),e.css("top",a.toString()+"px").css("left",r.toString()+"px"),i&&("top"===t||"bottom"===t?(r=o.left+o.width/2-r,i.css("left",r.toString()+"px")):(a=o.top+o.height/2-a,i.css("top",a.toString()+"px")))}function P(e,t,n,o){var i={bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width};return t&&(i.left=o.pageX,i.right=o.pageX,i.width=0),n&&(i.top=o.pageY,i.bottom=o.pageY,i.height=0),i}function k(t){var n=e,o=document.documentElement||document.body.parentNode||document.body,i=a(n.pageXOffset)?n.pageXOffset:o.scrollLeft,r=a(n.pageYOffset)?n.pageYOffset:o.scrollTop,l=t.getBoundingClientRect();return i||r?{bottom:l.bottom+r,left:l.left+i,right:l.right+i,top:l.top+r,height:l.height,width:l.width}:l}function b(e){if(e&&0!==e.length){var t=(""+e).toLowerCase();e="true"==t}else e=!1;return e}function C(e,n){return e?t.isString(e)&&n?e:s.get(e)||u.get(e,{cache:!0}):""}function w(){Y.isOpen&&S.hide(Y,0)}function y(e){function n(e){if(e.id===o)return!0;var i=t.element(e).parent()[0];return i?i.id===o?!0:n(i):!1}if(Y.isOpen&&e.target!==g[0]){var o=Y[0].id;n(e.target)||S.hide(Y,0)}}function $(){Y.isOpen&&S.hide(Y,0)}var R=o.getDefaults(),D={template:v.nsPopoverTemplate||R.template,theme:v.nsPopoverTheme||R.theme,plain:b(v.nsPopoverPlain||R.plain),trigger:v.nsPopoverTrigger||R.trigger,angularEvent:v.nsPopoverAngularEvent||R.angularEvent,container:v.nsPopoverContainer||R.container,placement:v.nsPopoverPlacement||R.placement,timeout:v.nsPopoverTimeout||R.timeout,hideOnInsideClick:b(v.nsPopoverHideOnInsideClick||R.hideOnInsideClick),hideOnOutsideClick:b(v.nsPopoverHideOnOutsideClick||R.hideOnOutsideClick),hideOnButtonClick:b(v.nsPopoverHideOnButtonClick||R.hideOnButtonClick),mouseRelative:v.nsPopoverMouseRelative,popupDelay:v.nsPopoverPopupDelay||R.popupDelay,modal:v.nsPopoverModal||R.modal};D.mouseRelative&&(D.mouseRelativeX=-1!==D.mouseRelative.indexOf("x"),D.mouseRelativeY=-1!==D.mouseRelative.indexOf("y"));var E={id_:n,display:function(e,t,n){m[v.nsPopover]!==!1&&(p.cancel(E.id_),a(t)||(t=0),D.modal&&c.$broadcast("hidePopover",D.modal),E.id_=p(function(){Y.isOpen=!0,Y.css("display","block");var e=k(g[0]);D.mouseRelative&&(e=P(e,D.mouseRelativeX,D.mouseRelativeY,n)),O(Y,B,X,e,x),D.hideOnInsideClick&&Y.on("click",w),D.hideOnOutsideClick&&f.on("click",y),D.hideOnButtonClick&&g.on("click",$)},1e3*t))},cancel:function(){p.cancel(E.id_)}},S={id_:n,hide:function(e,t){p.cancel(S.id_),a(t)||(t=1.5),S.id_=p(function(){Y.off("click",w),f.off("click",y),g.off("click",$),Y.isOpen=!1,E.cancel(),e.css("display","none")},1e3*t)},cancel:function(){p.cancel(S.id_)}},_=f.find(D.container);_.length||(_=f.find("body"));var x,B,X;l+=1;var Y=i('<div id="nspopover-'+l+'"></div>');r.push(Y);var I=D.placement.match(/^(top|bottom|left|right)$|((top|bottom)\|(center|left|right)+)|((left|right)\|(center|top|bottom)+)/);if(!I)throw new Error('"'+D.placement+'" is not a valid placement or has a invalid combination of placements.');B=I[6]||I[3]||I[1],X=I[7]||I[4]||I[2]||"center",d.when(C(D.template,D.plain)).then(function(e){if(e=t.isString(e)?e:e.data&&t.isString(e.data)?e.data:"",Y.html(e),D.theme&&Y.addClass(D.theme),Y.addClass("ns-popover-"+B+"-placement").addClass("ns-popover-"+X+"-align"),p(function(){h(Y)(m)}),m.$on("$destroy",function(){Y.remove()}),m.hidePopover=function(){S.hide(Y,0)},m.$on("hidePopover",function(e,t){D.modal===t&&m.hidePopover()}),Y.css("position","absolute").css("display","none"),x=Y.find(".triangle"),!x.length)for(var n=Y.children(),o=0;o<n.length;++o){var a=i(n[o]);if(a.hasClass("triangle")){x=a;break}}_.append(Y)}),D.angularEvent?c.$on(D.angularEvent,function(){S.cancel(),E.display(Y,D.popupDelay)}):g.on(D.trigger,function(e){e.preventDefault(),S.cancel(),E.display(Y,D.popupDelay,e)}),g.on("mouseout",function(){S.hide(Y,D.timeout)}).on("mouseover",function(){S.cancel()}),Y.on("mouseout",function(e){S.hide(Y,D.timeout)}).on("mouseover",function(){S.cancel()})}}}])}(window,window.angular);
//# sourceMappingURL=nsPopover.min.js.map