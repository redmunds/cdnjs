!function(e,t,o){"use strict";var n=t.module("nsPopover",[]),i=t.element,r=t.isDefined,a=(t.forEach,[]),l=0;n.provider("nsPopover",function(){var e={template:"",theme:"ns-popover-list-theme",plain:"false",trigger:"click",angularEvent:"",container:"body",placement:"bottom|left",timeout:1.5,hideOnClick:"true",mouseRelative:""};this.setDefaults=function(o){t.extend(e,o)},this.$get=[function(){return{getDefaults:function(){return e}}}]}),n.directive("nsPopover",["nsPopover","$rootScope","$timeout","$templateCache","$q","$http","$compile","$document",function(n,c,s,u,p,h,d,f){return{restrict:"A",scope:!0,link:function(m,g,v){function b(e,t,o,n,i){var r,a,l=P(e[0]),c=function(){return"center"===o?Math.round(n.left+n.width/2-l.width/2):"right"===o?n.right-l.width:n.left},s=function(){return"center"===o?Math.round(n.top+n.height/2-l.height/2):"bottom"===o?n.bottom-l.height:n.top};"top"===t?(r=n.top-l.height,a=c()):"right"===t?(r=s(),a=n.right):"bottom"===t?(r=n.bottom,a=c()):"left"===t&&(r=s(),a=n.left-l.width),e.css("top",r.toString()+"px").css("left",a.toString()+"px"),i&&("top"===t||"bottom"===t?(a=n.left+n.width/2-a,i.css("left",a.toString()+"px")):(r=n.top+n.height/2-r,i.css("top",r.toString()+"px")))}function w(e,t,o,n){var i={bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width};return t&&(i.left=n.pageX,i.right=n.pageX,i.width=0),o&&(i.top=n.pageY,i.bottom=n.pageY,i.height=0),i}function P(t){var o=e,n=document.documentElement||document.body.parentNode||document.body,i=r(o.pageXOffset)?o.pageXOffset:n.scrollLeft,a=r(o.pageYOffset)?o.pageYOffset:n.scrollTop,l=t.getBoundingClientRect();return i||a?{bottom:l.bottom+a,left:l.left+i,right:l.right+i,top:l.top+a,height:l.height,width:l.width}:l}function C(e){if(e&&0!==e.length){var t=(""+e).toLowerCase();e="true"==t}else e=!1;return e}function k(e,o){return e?t.isString(e)&&o?e:u.get(e)||h.get(e,{cache:!0}):""}var O=n.getDefaults(),R={template:v.nsPopoverTemplate||O.template,theme:v.nsPopoverTheme||O.theme,plain:C(v.nsPopoverPlain||O.plain),trigger:v.nsPopoverTrigger||O.trigger,angularEvent:v.nsPopoverAngularEvent||O.angularEvent,container:v.nsPopoverContainer||O.container,placement:v.nsPopoverPlacement||O.placement,timeout:v.nsPopoverTimeout||O.timeout,hideOnClick:C(v.nsPopoverHideOnClick||O.hideOnClick),mouseRelative:v.nsPopoverMouseRelative};R.mouseRelative&&(R.mouseRelativeX=-1!==R.mouseRelative.indexOf("x"),R.mouseRelativeY=-1!==R.mouseRelative.indexOf("y"));var $={id_:o,hide:function(e,t){s.cancel($.id_),r(t)||(t=1.5),$.id_=s(function(){e.css("display","none")},1e3*t)},cancel:function(){s.cancel($.id_)}},y=f[0].querySelector(R.container);y.length||(y=f.find("body"));var E,S,x;l+=1;var X=i('<div id="nspopover-'+l+'"></div>');a.push(X);var Y=R.placement.match(/^(top|bottom|left|right)$|((top|bottom)\|(center|left|right)+)|((left|right)\|(center|top|bottom)+)/);if(!Y)throw new Error('"'+R.placement+'" is not a valid placement or has a invalid combination of placements.');S=Y[6]||Y[3]||Y[1],x=Y[7]||Y[4]||Y[2]||"center",p.when(k(R.template,R.plain)).then(function(e){if(e=t.isString(e)?e:e.data&&t.isString(e.data)?e.data:"",X.html(e),R.theme&&X.addClass(R.theme),X.addClass("ns-popover-"+S+"-placement").addClass("ns-popover-"+x+"-align"),s(function(){d(X)(m)}),m.$on("$destroy",function(){X.remove()}),m.hidePopover=function(){$.hide(X,0)},X.css("position","absolute").css("display","none"),E=X.find(".triangle"),!E.length)for(var o=X.children(),n=0;n<o.length;++n){var r=i(o[n]);if(r.hasClass("triangle")){E=r;break}}y.append(X)}),R.angularEvent?c.$on(R.angularEvent,function(){$.cancel(),X.css("display","block");var e=P(g[0]);b(X,S,x,e,E),R.hideOnClick&&X.on("click",function(){$.hide(X,0)})}):g.on(R.trigger,function(e){e.preventDefault(),$.cancel(),X.css("display","block");var t=P(g[0]);R.mouseRelative&&(t=w(t,R.mouseRelativeX,R.mouseRelativeY,e)),b(X,S,x,t,E),R.hideOnClick&&X.on("click",function(){$.hide(X,0)})}),g.on("mouseout",function(){$.hide(X,R.timeout)}).on("mouseover",function(){$.cancel()}),X.on("mouseout",function(e){$.hide(X,R.timeout)}).on("mouseover",function(){$.cancel()})}}}])}(window,window.angular);
//# sourceMappingURL=nsPopover.min.js.map