!function(e,t,n){"use strict";var o=t.module("nsPopover",[]),i=t.element,a=t.isDefined,r=[],l=0;o.provider("nsPopover",function(){var e={template:"",theme:"ns-popover-list-theme",plain:"false",trigger:"click",angularEvent:"",container:"body",placement:"bottom|left",timeout:1.5,hideOnInsideClick:!1,hideOnOutsideClick:!0,hideOnButtonClick:!0,mouseRelative:"",popupDelay:0,modal:!1};this.$get=[function(){return{getDefaults:function(){return e}}}]}),o.directive("nsPopover",["nsPopover","$rootScope","$timeout","$templateCache","$q","$http","$compile","$document","$parse",function(o,c,p,s,d,u,h,f,m){return{restrict:"A",scope:!0,link:function(g,v,O){function P(e,t,n,o,i){var a,r,l=b(e[0]),c=function(){return"center"===n?Math.round(o.left+o.width/2-l.width/2):"right"===n?o.right-l.width:o.left},p=function(){return"center"===n?Math.round(o.top+o.height/2-l.height/2):"bottom"===n?o.bottom-l.height:o.top};"top"===t?(a=o.top-l.height,r=c()):"right"===t?(a=p(),r=o.right):"bottom"===t?(a=o.bottom,r=c()):"left"===t&&(a=p(),r=o.left-l.width),e.css("top",a.toString()+"px").css("left",r.toString()+"px"),i&&("top"===t||"bottom"===t?(r=o.left+o.width/2-r,i.css("left",r.toString()+"px")):(a=o.top+o.height/2-a,i.css("top",a.toString()+"px")))}function k(e,t,n,o){var i={bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width};return t&&(i.left=o.pageX,i.right=o.pageX,i.width=0),n&&(i.top=o.pageY,i.bottom=o.pageY,i.height=0),i}function b(t){var n=e,o=document.documentElement||document.body.parentNode||document.body,i=a(n.pageXOffset)?n.pageXOffset:o.scrollLeft,r=a(n.pageYOffset)?n.pageYOffset:o.scrollTop,l=t.getBoundingClientRect();return i||r?{bottom:l.bottom+r,left:l.left+i,right:l.right+i,top:l.top+r,height:l.height,width:l.width}:l}function C(e){if(e&&0!==e.length){var t=(""+e).toLowerCase();e="true"==t}else e=!1;return e}function w(e,n){return e?t.isString(e)&&n?e:s.get(e)||u.get(e,{cache:!0}):""}function y(){I.isOpen&&_.hide(I,0)}function $(e){function n(e){if(e.id===o)return!0;var i=t.element(e).parent()[0];return i?i.id===o?!0:n(i):!1}if(I.isOpen&&e.target!==v[0]){var o=I[0].id;n(e.target)||_.hide(I,0)}}function R(){I.isOpen&&_.hide(I,0)}var D=o.getDefaults(),E={template:O.nsPopoverTemplate||D.template,theme:O.nsPopoverTheme||D.theme,plain:C(O.nsPopoverPlain||D.plain),trigger:O.nsPopoverTrigger||D.trigger,angularEvent:O.nsPopoverAngularEvent||D.angularEvent,container:O.nsPopoverContainer||D.container,placement:O.nsPopoverPlacement||D.placement,timeout:O.nsPopoverTimeout||D.timeout,hideOnInsideClick:C(O.nsPopoverHideOnInsideClick||D.hideOnInsideClick),hideOnOutsideClick:C(O.nsPopoverHideOnOutsideClick||D.hideOnOutsideClick),hideOnButtonClick:C(O.nsPopoverHideOnButtonClick||D.hideOnButtonClick),mouseRelative:O.nsPopoverMouseRelative,popupDelay:O.nsPopoverPopupDelay||D.popupDelay,modal:O.nsPopoverModal||D.modal};E.mouseRelative&&(E.mouseRelativeX=-1!==E.mouseRelative.indexOf("x"),E.mouseRelativeY=-1!==E.mouseRelative.indexOf("y"));var S={id_:n,display:function(e,t,n){m(O.nsPopover)(g)!==!1&&(p.cancel(S.id_),a(t)||(t=0),E.modal&&c.$broadcast("hidePopover",E.modal),S.id_=p(function(){I.isOpen=!0,I.css("display","block");var e=b(v[0]);E.mouseRelative&&(e=k(e,E.mouseRelativeX,E.mouseRelativeY,n)),P(I,X,Y,e,B),E.hideOnInsideClick&&I.on("click",y),E.hideOnOutsideClick&&f.on("click",$),E.hideOnButtonClick&&v.on("click",R)},1e3*t))},cancel:function(){p.cancel(S.id_)}},_={id_:n,hide:function(e,t){p.cancel(_.id_),a(t)||(t=1.5),_.id_=p(function(){I.off("click",y),f.off("click",$),v.off("click",R),I.isOpen=!1,S.cancel(),e.css("display","none")},1e3*t)},cancel:function(){p.cancel(_.id_)}},x=f.find(E.container);x.length||(x=f.find("body"));var B,X,Y;l+=1;var I=i('<div id="nspopover-'+l+'"></div>');r.push(I);var T=E.placement.match(/^(top|bottom|left|right)$|((top|bottom)\|(center|left|right)+)|((left|right)\|(center|top|bottom)+)/);if(!T)throw new Error('"'+E.placement+'" is not a valid placement or has a invalid combination of placements.');X=T[6]||T[3]||T[1],Y=T[7]||T[4]||T[2]||"center",d.when(w(E.template,E.plain)).then(function(e){if(e=t.isString(e)?e:e.data&&t.isString(e.data)?e.data:"",I.html(e),E.theme&&I.addClass(E.theme),I.addClass("ns-popover-"+X+"-placement").addClass("ns-popover-"+Y+"-align"),h(I)(g),g.$on("$destroy",function(){I.remove()}),g.hidePopover=function(){_.hide(I,0)},g.$on("hidePopover",function(e,t){E.modal===t&&g.hidePopover()}),I.css("position","absolute").css("display","none"),B=I.find(".triangle"),!B.length)for(var n=I.children(),o=0;o<n.length;++o){var a=i(n[o]);if(a.hasClass("triangle")){B=a;break}}x.append(I)}),E.angularEvent?c.$on(E.angularEvent,function(){_.cancel(),S.display(I,E.popupDelay)}):v.on(E.trigger,function(e){e.preventDefault(),_.cancel(),S.display(I,E.popupDelay,e)}),v.on("mouseout",function(){_.hide(I,E.timeout)}).on("mouseover",function(){_.cancel()}),I.on("mouseout",function(e){_.hide(I,E.timeout)}).on("mouseover",function(){_.cancel()})}}}])}(window,window.angular);
//# sourceMappingURL=nsPopover.min.js.map