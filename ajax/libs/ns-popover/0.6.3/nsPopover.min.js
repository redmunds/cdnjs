!function(t,e,n){"use strict";var o=e.module("nsPopover",[]),i=e.element,r=e.isDefined,a=(e.forEach,[]),l=0;o.provider("nsPopover",function(){var t={template:"",theme:"ns-popover-list-theme",plain:"false",trigger:"click",angularEvent:"",container:"body",placement:"bottom|left",timeout:1.5,hideOnClick:"true",mouseRelative:""};this.setDefaults=function(n){e.extend(t,n)},this.$get=[function(){return{getDefaults:function(){return t}}}]}),o.directive("nsPopover",["nsPopover","$rootScope","$timeout","$templateCache","$q","$http","$compile","$document",function(o,c,s,u,p,h,d,f){return{restrict:"A",scope:!0,link:function(m,g,v){function b(t,e,n,o,i){var r,a,l=P(t[0]),c=function(){return"center"===n?Math.round(o.left+o.width/2-l.width/2):"right"===n?o.right-l.width:o.left},s=function(){return"center"===n?Math.round(o.top+o.height/2-l.height/2):"bottom"===n?o.bottom-l.height:o.top};"top"===e?(r=o.top-l.height,a=c()):"right"===e?(r=s(),a=o.right):"bottom"===e?(r=o.bottom,a=c()):"left"===e&&(r=s(),a=o.left-l.width),t.css("top",r.toString()+"px").css("left",a.toString()+"px"),i&&("top"===e||"bottom"===e?(a=o.left+o.width/2-a,i.css("left",a.toString()+"px")):(r=o.top+o.height/2-r,i.css("top",r.toString()+"px")))}function w(t,e,n,o){var i={bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width};return e&&(i.left=o.pageX,i.right=o.pageX,i.width=0),n&&(i.top=o.pageY,i.bottom=o.pageY,i.height=0),i}function P(e){var n=t,o=document.documentElement||document.body.parentNode||document.body,i=r(n.pageXOffset)?n.pageXOffset:o.scrollLeft,a=r(n.pageYOffset)?n.pageYOffset:o.scrollTop,l=e.getBoundingClientRect();return i||a?{bottom:l.bottom+a,left:l.left+i,right:l.right+i,top:l.top+a,height:l.height,width:l.width}:l}function C(t){if(t&&0!==t.length){var e=(""+t).toLowerCase();t="true"==e}else t=!1;return t}function k(t,n){return t?e.isString(t)&&n?t:u.get(t)||h.get(t,{cache:!0}):""}var O=o.getDefaults(),R={template:v.nsPopoverTemplate||O.template,theme:v.nsPopoverTheme||O.theme,plain:C(v.nsPopoverPlain||O.plain),trigger:v.nsPopoverTrigger||O.trigger,angularEvent:v.nsPopoverAngularEvent||O.angularEvent,container:v.nsPopoverContainer||O.container,placement:v.nsPopoverPlacement||O.placement,timeout:v.nsPopoverTimeout||O.timeout,hideOnClick:C(v.nsPopoverHideOnClick||O.hideOnClick),mouseRelative:v.nsPopoverMouseRelative};R.mouseRelative&&(R.mouseRelativeX=-1!==R.mouseRelative.indexOf("x"),R.mouseRelativeY=-1!==R.mouseRelative.indexOf("y"));var $={id_:n,hide:function(t,e){s.cancel($.id_),r(e)||(e=1.5),$.id_=s(function(){t.css("display","none")},1e3*e)},cancel:function(){s.cancel($.id_)}},y=f.find(R.container);y.length||(y=f.find("body"));var E,x,S;l+=1;var X=i('<div id="nspopover-'+l+'"></div>');a.push(X);var Y=R.placement.match(/^(top|bottom|left|right)$|((top|bottom)\|(center|left|right)+)|((left|right)\|(center|top|bottom)+)/);if(!Y)throw new Error('"'+R.placement+'" is not a valid placement or has a invalid combination of placements.');x=Y[6]||Y[3]||Y[1],S=Y[7]||Y[4]||Y[2]||"center",p.when(k(R.template,R.plain)).then(function(t){if(t=e.isString(t)?t:t.data&&e.isString(t.data)?t.data:"",X.html(t),R.theme&&X.addClass(R.theme),X.addClass("ns-popover-"+x+"-placement").addClass("ns-popover-"+S+"-align"),s(function(){d(X)(m)}),m.$on("$destroy",function(){X.remove()}),m.hidePopover=function(){$.hide(X,0)},X.css("position","absolute").css("display","none"),E=X.find(".triangle"),!E.length)for(var n=X.children(),o=0;o<n.length;++o){var r=i(n[o]);if(r.hasClass("triangle")){E=r;break}}y.append(X)}),R.angularEvent?c.$on(R.angularEvent,function(){$.cancel(),X.css("display","block");var t=P(g[0]);b(X,x,S,t,E),R.hideOnClick&&X.on("click",function(){$.hide(X,0)})}):g.on(R.trigger,function(t){t.preventDefault(),$.cancel(),X.css("display","block");var e=P(g[0]);R.mouseRelative&&(e=w(e,R.mouseRelativeX,R.mouseRelativeY,t)),b(X,x,S,e,E),R.hideOnClick&&X.on("click",function(){$.hide(X,0)})}),g.on("mouseout",function(){$.hide(X,R.timeout)}).on("mouseover",function(){$.cancel()}),X.on("mouseout",function(t){$.hide(X,R.timeout)}).on("mouseover",function(){$.cancel()})}}}])}(window,window.angular);
//# sourceMappingURL=nsPopover.min.js.map