/*
 * Clickspark JavaScript utility v1.0.0
 * https://github.com/ymc-thzi/clickspark.js
 *
 * Thomas Zinnbauer @ YMC
 *
 * 2015 YMC AG | Sonnenstrasse 4 | CH-8280 Kreuzlingen | Switzerland
 * http://www.ymc.ch
 *
 */

var $=jQuery;csDefaultSpecs={particleImagePath:"",particleCount:35,particleSpeed:12,particleSize:12,particleRotationSpeed:0,animationType:"explosion"},$.fn.clickSpark=function(e){void 0==e&&(e={particleImagePath:csDefaultSpecs.particleImagePath,particleCount:csDefaultSpecs.particleCount,particleSpeed:csDefaultSpecs.particleSpeed,particleSize:csDefaultSpecs.particleSize,particleRotationSpeed:csDefaultSpecs.particleRotationSpeed,animationType:csDefaultSpecs.animationType}),$(this).on("click",function(t){clickSpark.setParticleImagePath(e.particleImagePath),clickSpark.setParticleCount(e.particleCount),clickSpark.setParticleSpeed(e.particleSpeed),clickSpark.setParticleSize(e.particleSize),clickSpark.setParticleRotationSpeed(e.particleRotationSpeed),clickSpark.setAnimationType(e.animationType),clickSpark.stdFuncOCl(t)})};var clickSpark=function(){function e(){s()}function t(e){void 0!=e&&(k=e)}function i(e){void 0!=e&&(R=e)}function n(e){void 0!=e&&(P=e)}function a(e){void 0!=e&&(Y=e)}function c(e){void 0!=e&&(x=e)}function o(e){void 0!=e&&(M=e)}function s(){$(document).ready(function(){$("body").prepend('<div class="cs-canvas-container"><canvas id="cs-particle-canvas"></canvas></div>'),$(".cs-canvas-container").hide(),$("#cs-particle-canvas").hide(),$(".cs-canvas-container").css({position:"absolute",zIndex:99999,width:"100%",height:"100%",top:window.scrollY,left:window.scrollX})})}function l(){var e={};return I&&(e.x=y,e.y=C,e.rotation=0),e.speed=S(0,P),e.angle=S(0,360)*(Math.PI/180),e.rotationSpeed=S(-1*x,x),e.size=Y,e}function r(){I=document.getElementById("cs-particle-canvas"),""==k?(defaultImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAc5pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTNTwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KaBqfRAAAATZJREFUOBGtlM2NwjAQhd+MAndaSAu5cuBAC9RAAyuxVICQtgFqoAUOHLi6BbfAnY3ineeNTXYvKA6WRv59X8bxzAj+teUhLCqgeSg2CGhsuzZbmN3NPARu3uHcAu62F67lJnlkg+VXaAKwC20GEEJLjeJoUsGb+Hj7EJc2M2x1COtWsOuAddp81StwqQKO171ceDbC6FHX4mRzXmtsc1phSw+F/yjMcLKrbcZS0nm78lm+sTUomv4fpb3RPfXkaHy13xcbDRkIanK0f/7BeuHQwsgeJIdBISXKGD41YcM4mgQk7E8UT6DdCfNvANIhr8y1Cd48pcZRJi2pz9WikSdHmf1M2iJEL6KeHGUZYfbbeul1XawexuEDgEk6D/i0Scz+/oMvO56nLpWhXIKofFs9S25MqbQ/ard2fSmw8JoAAAAASUVORK5CYII=",particleImg=new Image,particleImg.src=defaultImg):(particleImg=new Image,particleImg.src=k),I&&"function"==typeof I.getContext&&(b=I.getContext("2d"),bodyWidth=document.body.clientWidth,b.canvas.width=document.body.clientWidth,b.canvas.height=document.body.clientHeight),d()}function d(){for(var e=0;R>e;e++)W.push(l())}function p(){b.clearRect(0,0,window.innerWidth,window.innerHeight);for(var e=0;R>e;e++){var t=W[e];switch(M){case"explosion":u(t);break;case"splash":A(t);break;case"falloff":f(t);break;case"blowright":w(t);break;case"blowleft":m(t);break;default:u(t)}g(t)}}function u(e){e.x=e.x+e.speed*Math.cos(e.angle),e.y=e.y+e.speed*Math.sin(e.angle)}function A(e){e.x=e.x-Math.tan(e.angle),e.y=e.y+-2*e.speed}function f(e){e.x=e.x-Math.tan(e.angle),e.y=e.y- -2*e.speed}function w(e){e.x=e.x- -2*e.speed,e.y=e.y-Math.tan(e.angle/8)}function m(e){e.x=e.x+-2*e.speed,e.y=e.y-Math.tan(e.angle/8)}function g(e){e.size=e.size*(.96+S(1,10)/100),e.rotation=e.rotation+e.rotationSpeed,b.save(),b.translate(e.x,e.y),b.rotate(e.rotation*Math.PI/180),b.drawImage(particleImg,-(particleImg.width/2),-(particleImg.height/2),e.size,e.size),b.restore()}function h(){if(X){var e=z;z=Date.now(),requestAnimationFrame(h,z-e),p()}}function S(e,t){return Math.random()*(t-e)+e}function v(e){z=Date.now(),"click"==e.type?(y=e.pageX-window.scrollX,C=e.pageY-window.scrollY):(y=e.offset().left+e.width()/2-window.scrollX,C=e.offset().top+e.height()/2-window.scrollY),W=[],particle=null,r(),$(document).height()>$(window).height()?$("body").css("overflow-y","inherit"):$("body").css("overflow-y","hidden"),$(document).width()>$(window).width()?$("body").css("overflow-x","inherit"):$("body").css("overflow-x","hidden"),$(".cs-canvas-container").css("top",window.scrollY),$(".cs-canvas-container").css("left",window.scrollX),$("#cs-particle-canvas").css("top",0),$("#cs-particle-canvas").css("left",0),$(".cs-canvas-container").show(),$("#cs-particle-canvas").show(),window.setTimeout(function(){$("#cs-particle-canvas").fadeOut()},400),X=!0,h(),window.setTimeout(function(){$("#cs-particle-canvas").hide(),$(".cs-canvas-container").hide(),$("body").css("overflow","inherit"),X=!1},800)}var I,b,y,C,k=csDefaultSpecs.particleImagePath,R=csDefaultSpecs.particleCount,P=csDefaultSpecs.particleSpeed,x=csDefaultSpecs.particleRotationSpeed,M=csDefaultSpecs.animationType,Y=csDefaultSpecs.particleSize,D=60,G=1e3/D,z=0,X=!1,W=[];return e(),window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){var i=G;t>i&&(i-=t-i,0>i&&(i=0)),window.setTimeout(e,i)}}(),{setParticleImagePath:function(e){t(e)},setParticleCount:function(e){i(e)},setParticleSpeed:function(e){n(e)},setParticleSize:function(e){a(e)},setParticleRotationSpeed:function(e){c(e)},setAnimationType:function(e){o(e)},init:function(){v(element)},fireParticles:function(e){v(e)},stdFuncOCl:function(e){v(e)}}}();