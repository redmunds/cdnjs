/*
 * ClickSpark.js
 * https://github.com/ymc-thzi/clickspark.js
 *
 * Thomas Zinnbauer @ YMC
 *
 * 2015 YMC AG | Sonnenstrasse 4 | CH-8280 Kreuzlingen | Switzerland
 * http://www.ymc.ch
 *
 */

var clickSpark=function(){var e=jQuery;csDefaultSpecs={particleImagePath:"",particleCount:35,particleSpeed:12,particleDuration:400,particleSize:12,particleRotationSpeed:0,animationType:"explosion",callback:null},e.fn.clickSpark=function(a){void 0==a&&(a={particleImagePath:csDefaultSpecs.particleImagePath,particleCount:csDefaultSpecs.particleCount,particleSpeed:csDefaultSpecs.particleSpeed,particleDuration:csDefaultSpecs.particleDuration,particleSize:csDefaultSpecs.particleSize,particleRotationSpeed:csDefaultSpecs.particleRotationSpeed,animationType:csDefaultSpecs.animationType,callback:csDefaultSpecs.callback}),e(this).on("click",function(e){t.setParticleImagePath(a.particleImagePath),t.setParticleCount(a.particleCount),t.setParticleSpeed(a.particleSpeed),t.setParticleDuration(a.particleDuration),t.setParticleSize(a.particleSize),t.setParticleRotationSpeed(a.particleRotationSpeed),t.setAnimationType(a.animationType),t.setCallback(a.callback),t.stdFuncOCl(e)})};var t=function(){function t(){p()}function a(e){void 0!=e&&(k=e)}function i(e){void 0!=e&&(x=e)}function n(e){void 0!=e&&(M=e)}function c(e){void 0!=e&&(Y=e)}function o(e){void 0!=e&&(z=e)}function s(e){void 0!=e&&(G=e)}function l(e){void 0!=e&&(O=e)}function r(e){void 0!=e&&(X=e)}function p(){e(document).ready(function(){e("body").prepend('<div class="cs-canvas-container"><canvas id="cs-particle-canvas"></canvas></div>'),e(".cs-canvas-container").hide(),e("#cs-particle-canvas").hide(),e(".cs-canvas-container").css({position:"absolute",zIndex:99999,width:"100%",height:"100%",top:window.pageYOffset,left:window.pageXOffset})})}function d(){var e={};return C&&(e.x=D,e.y=P,e.rotation=0),e.speed=b(0,M),e.angle=b(0,360)*(Math.PI/180),e.rotationSpeed=b(-1*G,G),e.size=z,e}function u(){C=document.getElementById("cs-particle-canvas"),""==k?(defaultImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAc5pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTNTwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KaBqfRAAAATZJREFUOBGtlM2NwjAQhd+MAndaSAu5cuBAC9RAAyuxVICQtgFqoAUOHLi6BbfAnY3ineeNTXYvKA6WRv59X8bxzAj+teUhLCqgeSg2CGhsuzZbmN3NPARu3uHcAu62F67lJnlkg+VXaAKwC20GEEJLjeJoUsGb+Hj7EJc2M2x1COtWsOuAddp81StwqQKO171ceDbC6FHX4mRzXmtsc1phSw+F/yjMcLKrbcZS0nm78lm+sTUomv4fpb3RPfXkaHy13xcbDRkIanK0f/7BeuHQwsgeJIdBISXKGD41YcM4mgQk7E8UT6DdCfNvANIhr8y1Cd48pcZRJi2pz9WikSdHmf1M2iJEL6KeHGUZYfbbeul1XawexuEDgEk6D/i0Scz+/oMvO56nLpWhXIKofFs9S25MqbQ/ard2fSmw8JoAAAAASUVORK5CYII=",particleImg=new Image,particleImg.src=defaultImg):(particleImg=new Image,particleImg.src=k),C&&"function"==typeof C.getContext&&(R=C.getContext("2d"),bodyWidth=document.body.clientWidth,R.canvas.width=document.body.clientWidth,R.canvas.height=document.body.clientHeight),f()}function f(){for(var e=0;x>e;e++)U.push(d())}function A(){R.clearRect(0,0,window.innerWidth,window.innerHeight);for(var e=0;x>e;e++){var t=U[e];switch(O){case"explosion":g(t);break;case"splash":w(t);break;case"falloff":m(t);break;case"blowright":h(t);break;case"blowleft":v(t);break;default:g(t)}I(t)}}function g(e){e.x=e.x+e.speed*Math.cos(e.angle),e.y=e.y+e.speed*Math.sin(e.angle)}function w(e){e.x=e.x-Math.tan(e.angle),e.y=e.y+-2*e.speed}function m(e){e.x=e.x-Math.tan(e.angle),e.y=e.y- -2*e.speed}function h(e){e.x=e.x- -2*e.speed,e.y=e.y-Math.tan(e.angle/8)}function v(e){e.x=e.x+-2*e.speed,e.y=e.y-Math.tan(e.angle/8)}function I(e){e.size=e.size*(.96+b(1,10)/100),e.rotation=e.rotation+e.rotationSpeed,R.save(),R.translate(e.x,e.y),R.rotate(e.rotation*Math.PI/180),particleImg.width=20,particleImg.height=20,R.drawImage(particleImg,-(particleImg.width/2),-(particleImg.height/2),e.size,e.size),R.restore()}function S(){if(F){var e=J;J=Date.now(),requestAnimationFrame(S,J-e),A()}}function b(e,t){return Math.random()*(t-e)+e}function y(t){function a(){e("#cs-particle-canvas").hide(),e(".cs-canvas-container").hide(),e("body").css("overflow","inherit"),F=!1,"function"==typeof X&&X.call(this)}J=Date.now(),"click"==t.type?(D=t.pageX-window.pageXOffset,P=t.pageY-window.pageYOffset):(D=t.offset().left+t.width()/2-window.pageXOffset,P=t.offset().top+t.height()/2-window.pageYOffset),U=[],particle=null,u(),e(document).height()>e(window).height()?e("body").css("overflow-y","inherit"):e("body").css("overflow-y","hidden"),e(document).width()>e(window).width()?e("body").css("overflow-x","inherit"):e("body").css("overflow-x","hidden"),e(".cs-canvas-container").css("top",window.pageYOffset),e(".cs-canvas-container").css("left",window.pageXOffset),e("#cs-particle-canvas").css("top",0),e("#cs-particle-canvas").css("left",0),e(".cs-canvas-container").show(),e("#cs-particle-canvas").show(),window.setTimeout(function(){e("#cs-particle-canvas").fadeOut(a)},Y),F=!0,S()}var C,R,D,P,k=csDefaultSpecs.particleImagePath,x=csDefaultSpecs.particleCount,M=csDefaultSpecs.particleSpeed,Y=csDefaultSpecs.particleDuration,G=csDefaultSpecs.particleRotationSpeed,O=csDefaultSpecs.animationType,z=csDefaultSpecs.particleSize,X=csDefaultSpecs.callback,W=60,Z=1e3/W,J=0,F=!1,U=[];return t(),window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){var a=Z;t>a&&(a-=t-a,0>a&&(a=0)),window.setTimeout(e,a)}}(),{setParticleImagePath:function(e){a(e)},setParticleCount:function(e){i(e)},setParticleSpeed:function(e){n(e)},setParticleDuration:function(e){c(e)},setParticleSize:function(e){o(e)},setParticleRotationSpeed:function(e){s(e)},setAnimationType:function(e){l(e)},setCallback:function(e){r(e)},init:function(){y(element)},fireParticles:function(e){y(e)},stdFuncOCl:function(e){y(e)}}}();return t}();