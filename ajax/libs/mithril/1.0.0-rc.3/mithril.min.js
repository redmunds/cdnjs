new function(){function u(c,f,r,g,k,h){return{tag:c,key:f,attrs:r,children:g,text:k,dom:h,domSize:void 0,state:{},events:void 0,instance:void 0,skip:!1}}function v(c){if(null==c||"string"!==typeof c&&null==c.view)throw Error("The selector must be either a string or a component.");if("string"===typeof c&&void 0===K[c]){for(var f,r,g=[],k={};f=R.exec(c);){var h=f[1],y=f[2];""===h&&""!==y?r=y:"#"===h?k.id=y:"."===h?g.push(y):"["===f[3][0]&&((h=f[6])&&(h=h.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),
k[f[4]]=h||!0)}0<g.length&&(k.className=g.join(" "));K[c]=function(c,e){var f=!1,x,g,h=c.className||c["class"],p;for(p in k)c[p]=k[p];void 0!==h&&(void 0!==c["class"]&&(c["class"]=void 0,c.className=h),void 0!==k.className&&(c.className=k.className+" "+h));for(p in c)if("key"!==p){f=!0;break}e instanceof Array&&1==e.length&&null!=e[0]&&"#"===e[0].tag?g=e[0].children:x=e;return u(r||"div",c.key,f?c:void 0,x,g,void 0)}}var z;null!=arguments[1]&&("object"!==typeof arguments[1]||void 0!==arguments[1].tag||
arguments[1]instanceof Array)?g=1:(z=arguments[1],g=2);if(arguments.length===g+1)f=arguments[g]instanceof Array?arguments[g]:[arguments[g]];else for(f=[];g<arguments.length;g++)f.push(arguments[g]);return"string"===typeof c?K[c](z||{},u.normalizeChildren(f)):u(c,z&&z.key,z||{},u.normalizeChildren(f),void 0,void 0)}u.normalize=function(c){return c instanceof Array?u("[",void 0,void 0,u.normalizeChildren(c),void 0,void 0):null!=c&&"object"!==typeof c?u("#",void 0,void 0,c,void 0,void 0):c};u.normalizeChildren=
function(c){for(var f=0;f<c.length;f++)c[f]=u.normalize(c[f]);return c};var R=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,K={};v.trust=function(c){null==c&&(c="");return u("<",void 0,void 0,c,void 0,void 0)};v.fragment=function(c,f){return u("[",c.key,c,u.normalizeChildren(f),void 0,void 0)};var P=function(c){function f(){function a(){0<arguments.length&&arguments[0]!==q&&g(a,arguments[0],void 0);return a._state.value}r(a);0<arguments.length&&arguments[0]!==q&&g(a,
arguments[0],void 0);return a}function r(a){a.constructor=f;a._state={id:A++,value:void 0,error:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],errorStream:void 0,endStream:void 0};a["fantasy-land/map"]=D;a["fantasy-land/ap"]=v;a["fantasy-land/of"]=f;a.valueOf=H;a.toJSON=B;a.toString=H;a.run=m;a["catch"]=x;Object.defineProperties(a,{error:{get:function(){if(!a._state.errorStream){var b=function(){0<arguments.length&&arguments[0]!==q&&g(a,void 0,arguments[0]);return a._state.error};
r(b);t(b,[a],C,C);a._state.errorStream=b}return a._state.errorStream}},end:{get:function(){if(!a._state.endStream){var b=f();b["fantasy-land/map"](function(d){!0===d&&(u(a),u(b));return d});a._state.endStream=b}return a._state.endStream}}})}function g(a,b,d){k(a,b,d);for(var n in a._state.deps)y(a._state.deps[n],!1);a._state.changed=!1;for(var e in a._state.deps)a._state.deps[e]._state.changed=!1}function k(a,b,d){d=p(b,d);if(void 0!==d&&"function"===typeof a._state.recover){if(!z(a,h,!0))return}else h(a,
b,d);a._state.changed=!0;2!==a._state.state&&(a._state.state=1)}function h(a,b,d){a._state.value=b;a._state.error=d}function y(b,e){var n=b._state.parents;0<n.length&&n.filter(F).length===n.length&&(e||0<n.filter(a).length)&&(n=n.filter(d),0<n.length?k(b,void 0,n[0]._state.error):z(b,k,!1))}function z(a,b,d){try{var n=d?a._state.recover():a._state.derive();if(n===q)return!1;b(a,n,void 0)}catch(E){b(a,void 0,null!=E.__error?E.__error:E),null==E.__error&&e(a,E)}return!0}function p(a,b){null!=a&&a.constructor===
f&&(b=void 0!==a._state.error?a._state.error:p(a._state.value,a._state.error));return b}function e(a,b){0===Object.keys(a._state.deps).length&&setTimeout(function(){0===Object.keys(a._state.deps).length&&c(b)},0)}function m(a){var b=f(),d=this;return t(b,[d],function(){return l(b,a(d()))},void 0)}function x(a){var b=f(),d=this;return t(b,[d],function(){return d._state.value},function(){return l(b,a(d._state.error))})}function w(b,e){if(e.length>e.filter(I).length)throw Error("Ensure that each item passed to m.prop.combine/m.prop.merge is a stream");
return t(f(),e,function(){var n=e.filter(d);if(0<n.length)throw{__error:n[0]._state.error};return b.apply(this,e.concat([e.filter(a)]))},void 0)}function l(a,b){if(null!=b&&b.constructor===f){var d=b,e=function(){k(a,d._state.value,d._state.error);for(var b in a._state.deps)y(a._state.deps[b],!1)};d["fantasy-land/map"](e)["catch"](function(a){e();throw{__error:a};});if(0===d._state.state)return q;if(d._state.error)throw{__error:d._state.error};b=d._state.value}return b}function t(a,d,e,c){var n=a._state;
n.derive=e;n.recover=c;n.parents=d.filter(b);G(a,n.parents);y(a,!0);return a}function G(a,b){for(var d=0;d<b.length;d++)b[d]._state.deps[a._state.id]=a,G(a,b[d]._state.parents)}function u(a){for(var b=0;b<a._state.parents.length;b++)delete a._state.parents[b]._state.deps[a._state.id];for(var d in a._state.deps){var b=a._state.deps[d],e=b._state.parents.indexOf(a);-1<e&&b._state.parents.splice(e,1)}a._state.state=2;a._state.deps={}}function D(a){return w(function(b){return a(b())},[this])}function v(a){return w(function(a,
b){return a()(b())},[a,this])}function H(){return this._state.value}function B(){return null!=this._state.value&&"function"===typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function I(a){return a._state}function F(a){return 1===a._state.state}function a(a){return a._state.changed}function b(a){return 2!==a._state.state}function d(a){return a._state.error}var A=0,C=function(){},q={};f["fantasy-land/of"]=f;f.merge=function(a){return w(function(){return a.map(function(a){return a()})},
a)};f.combine=w;f.reject=function(a){var b=f();b.error(a);return b};f.HALT=q;return f}(console.log.bind(console)),J=function(c){function f(c,h){if(h instanceof Array)for(var g=0;g<h.length;g++)f(c+"["+g+"]",h[g]);else if("[object Object]"===Object.prototype.toString.call(h))for(g in h)f(c+"["+g+"]",h[g]);else r.push(encodeURIComponent(c)+(null!=h&&""!==h?"="+encodeURIComponent(h):""))}if("[object Object]"!==Object.prototype.toString.call(c))return"";var r=[],g;for(g in c)f(g,c[g]);return r.join("&")},
L=function(c,f){function r(e,c){if(null==c)return e;for(var f=e.match(/:[^\/]+/gi)||[],g=0;g<f.length;g++){var m=f[g].slice(1);null!=c[m]&&(e=e.replace(f[g],c[m]),delete c[m])}return e}function g(e,c){var f=J(c);if(""!==f){var g=0>e.indexOf("?")?"?":"&";e+=g+f}return e}function k(e){try{return""!==e?JSON.parse(e):null}catch(m){throw Error(e);}}function h(e){return e.responseText}function y(e,c){if("function"===typeof e)if(c instanceof Array)for(var f=0;f<c.length;f++)c[f]=new e(c[f]);else return new e(c);
return c}var z=0,p;return{request:function(e){var m=f();void 0!==e.initialValue&&m(e.initialValue);e.method=e.method.toUpperCase();var x="boolean"===typeof e.useBody?e.useBody:"GET"!==e.method&&"TRACE"!==e.method;"function"!==typeof e.serialize&&(e.serialize="undefined"!==typeof FormData&&e.data instanceof FormData?function(e){return e}:JSON.stringify);"function"!==typeof e.deserialize&&(e.deserialize=k);"function"!==typeof e.extract&&(e.extract=h);e.url=r(e.url,e.data);x?e.data=e.serialize(e.data):
e.url=g(e.url,e.data);var w=new c.XMLHttpRequest;w.open(e.method,e.url,"boolean"===typeof e.async?e.async:!0,"string"===typeof e.user?e.user:void 0,"string"===typeof e.password?e.password:void 0);e.serialize===JSON.stringify&&x&&w.setRequestHeader("Content-Type","application/json; charset=utf-8");e.deserialize===k&&w.setRequestHeader("Accept","application/json, text/*");"function"===typeof e.config&&(w=e.config(w,e)||w);w.onreadystatechange=function(){if(4===w.readyState){try{var c=e.extract!==h?
e.extract(w,e):e.deserialize(e.extract(w,e));if(200<=w.status&&300>w.status||304===w.status)m(y(e.type,c));else{var f=Error(w.responseText),g;for(g in c)f[g]=c[g];m.error(f)}}catch(S){m.error(S)}"function"===typeof p&&p()}};x&&null!=e.data?w.send(e.data):w.send();return m},jsonp:function(e){var m=f();void 0!==e.initialValue&&m(e.initialValue);var h=e.callbackName||"_mithril_"+Math.round(1E16*Math.random())+"_"+z++,k=c.document.createElement("script");c[h]=function(f){k.parentNode.removeChild(k);m(y(e.type,
f));"function"===typeof p&&p();delete c[h]};k.onerror=function(){k.parentNode.removeChild(k);m.error(Error("JSONP request failed"));"function"===typeof p&&p();delete c[h]};null==e.data&&(e.data={});e.url=r(e.url,e.data);e.data[e.callbackKey||"callback"]=h;k.src=g(e.url,e.data);c.document.documentElement.appendChild(k);return m},setCompletionCallback:function(e){p=e}}}(window,P),M=function(){var c=[];return{subscribe:c.push.bind(c),unsubscribe:function(f){f=c.indexOf(f);-1<f&&c.splice(f,1)},publish:function(){for(var f=
0;f<c.length;f++)c[f].apply(this,arguments)}}}();L.setCompletionCallback(M.publish);var Q=function(c){function f(a,b,d,e,c,f,g){for(;d<e;d++){var A=b[d];null!=A&&p(a,r(A,c,g),f)}}function r(a,b,d){var c=a.tag;null!=a.attrs&&D(a.attrs,a,b);if("string"===typeof c)switch(c){case "#":return a.dom=B.createTextNode(a.children);case "<":return g(a);case "[":var h=B.createDocumentFragment();null!=a.children&&(c=a.children,f(h,c,0,c.length,b,null,d));a.dom=h.firstChild;a.domSize=h.childNodes.length;return h;
default:var q=a.tag;switch(a.tag){case "svg":d="http://www.w3.org/2000/svg";break;case "math":d="http://www.w3.org/1998/Math/MathML"}var n=(c=a.attrs)&&c.is,q=d?n?B.createElementNS(d,q,{is:n}):B.createElementNS(d,q):n?B.createElement(q,{is:n}):B.createElement(q);a.dom=q;if(null!=c)for(h in n=d,c)t(a,h,null,c[h],n);null!=a.attrs&&null!=a.attrs.contenteditable?e(a):(null!=a.text&&(""!==a.text?q.textContent=a.text:a.children=[u("#",void 0,void 0,a.text,void 0,void 0)]),null!=a.children&&(h=a.children,
f(q,h,0,h.length,b,null,d),b=a.attrs,"select"===a.tag&&null!=b&&("value"in b&&t(a,"value",null,b.value,void 0),"selectedIndex"in b&&t(a,"selectedIndex",null,b.selectedIndex,void 0))));return q}else{a.state||(a.state={});H(a.state,a.tag);h=a.tag.view;if(null!=h.reentrantLock)a=I;else if(h.reentrantLock=!0,D(a.tag,a,b),a.instance=u.normalize(h.call(a.state,a)),h.reentrantLock=null,null!=a.instance){if(a.instance===a)throw Error("A view cannot return the vnode it received as arguments");b=r(a.instance,
b,d);a.dom=a.instance.dom;a.domSize=null!=a.dom?a.instance.domSize:0;a=b}else a.domSize=0,a=I;return a}}function g(a){var b={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[(a.children.match(/^\s*?<(\w+)/im)||[])[1]]||"div",b=B.createElement(b);b.innerHTML=a.children;a.dom=b.firstChild;a.domSize=b.childNodes.length;a=B.createDocumentFragment();for(var d;d=b.firstChild;)a.appendChild(d);return a}function k(a,b,d,c,e,g){if(b!==d&&
(null!=b||null!=d))if(null==b)f(a,d,0,d.length,c,e,void 0);else if(null==d)m(b,0,b.length,d);else{var n;a:{if(null!=b.pool&&Math.abs(b.pool.length-d.length)<=Math.abs(b.length-d.length)&&(n=d[0]&&d[0].children&&d[0].children.length||0,Math.abs((b.pool[0]&&b.pool[0].children&&b.pool[0].children.length||0)-n)<=Math.abs((b[0]&&b[0].children&&b[0].children.length||0)-n))){n=!0;break a}n=!1}n&&(b=b.concat(b.pool));if(b.length===d.length&&null!=d[0]&&null==d[0].key)for(var q=0;q<b.length;q++)b[q]===d[q]||
null==b[q]&&null==d[q]||(null==b[q]?p(a,r(d[q],c,g),z(b,q+1,e)):null==d[q]?m(b,q,q+1,d):h(a,b[q],d[q],c,z(b,q+1,e),n,g),n&&b[q].tag===d[q].tag&&p(a,y(b[q]),z(b,q+1,e)));else{for(var A=q=0,k=b.length-1,x=d.length-1,w;k>=q&&x>=A;){var t=b[q],l=d[A];if(t!==l||n)if(null!=t&&null!=l&&t.key===l.key)q++,A++,h(a,t,l,c,z(b,q,e),n,g),n&&t.tag===l.tag&&p(a,y(t),e);else if(t=b[k],t!==l||n)if(null!=t&&null!=l&&t.key===l.key)h(a,t,l,c,z(b,k+1,e),n,g),(n||A<x)&&p(a,y(t),z(b,q,e)),k--,A++;else break;else k--,A++;
else q++,A++}for(;k>=q&&x>=A;){t=b[k];l=d[x];if(t!==l||n)if(null!=t&&null!=l&&t.key===l.key)h(a,t,l,c,z(b,k+1,e),n,g),n&&t.tag===l.tag&&p(a,y(t),e),null!=t.dom&&(e=t.dom),k--;else{if(!w){w=b;var t=k,C={},u;for(u=0;u<t;u++){var v=w[u];null!=v&&(v=v.key,null!=v&&(C[v]=u))}w=C}null!=l&&(t=w[l.key],null!=t?(C=b[t],h(a,C,l,c,z(b,k+1,e),n,g),p(a,y(C),e),b[t].skip=!0,null!=C.dom&&(e=C.dom)):(l=r(l,c,void 0),p(a,l,e),e=l))}else k--;x--;if(x<A)break}f(a,d,A,x+1,c,e,g);m(b,q,k+1,d)}}}function h(a,b,d,c,f,q,
n){var m=b.tag;if(m===d.tag){d.state=b.state;d.events=b.events;var x;var A;null!=d.attrs&&"function"===typeof d.attrs.onbeforeupdate&&(x=d.attrs.onbeforeupdate.call(d.state,d,b));"string"!==typeof d.tag&&"function"===typeof d.tag.onbeforeupdate&&(A=d.tag.onbeforeupdate.call(d.state,d,b));void 0===x&&void 0===A||x||A?x=!1:(d.dom=b.dom,d.domSize=b.domSize,d.instance=b.instance,x=!0);if(!x)if(null!=d.attrs&&O(d.attrs,d,c,q),"string"===typeof m)switch(m){case "#":b.children.toString()!==d.children.toString()&&
(b.dom.nodeValue=d.children);d.dom=b.dom;break;case "<":b.children!==d.children?(y(b),p(a,g(d),f)):(d.dom=b.dom,d.domSize=b.domSize);break;case "[":k(a,b.children,d.children,c,f,n);b=0;c=d.children;d.dom=null;if(null!=c){for(var l=0;l<c.length;l++)a=c[l],null!=a&&null!=a.dom&&(null==d.dom&&(d.dom=a.dom),b+=a.domSize||1);1!==b&&(d.domSize=b)}break;default:a=n;f=d.dom=b.dom;switch(d.tag){case "svg":a="http://www.w3.org/2000/svg";break;case "math":a="http://www.w3.org/1998/Math/MathML"}"textarea"===
d.tag&&(null==d.attrs&&(d.attrs={}),null!=d.text&&(d.attrs.value=d.text,d.text=void 0));q=b.attrs;n=d.attrs;m=a;if(null!=n)for(l in n)t(d,l,q&&q[l],n[l],m);if(null!=q)for(l in q)null!=n&&l in n||("className"===l&&(l="class"),"o"!==l[0]||"n"!==l[1]||G(l)?"key"!==l&&d.dom.removeAttribute(l):v(d,l,void 0));null!=d.attrs&&null!=d.attrs.contenteditable?e(d):null!=b.text&&null!=d.text&&""!==d.text?b.text.toString()!==d.text.toString()&&(b.dom.firstChild.nodeValue=d.text):(null!=b.text&&(b.children=[u("#",
void 0,void 0,b.text,void 0,b.dom.firstChild)]),null!=d.text&&(d.children=[u("#",void 0,void 0,d.text,void 0,void 0)]),k(f,b.children,d.children,c,null,a))}else d.instance=u.normalize(d.tag.view.call(d.state,d)),O(d.tag,d,c,q),null!=d.instance?(null==b.instance?p(a,r(d.instance,c,n),f):h(a,b.instance,d.instance,c,f,q,n),d.dom=d.instance.dom,d.domSize=d.instance.domSize):null!=b.instance?(w(b.instance,null),d.dom=void 0,d.domSize=0):(d.dom=b.dom,d.domSize=b.domSize)}else w(b,null),p(a,r(d,c,void 0),
f)}function y(a){var b=a.domSize;if(null!=b||null==a.dom){var d=B.createDocumentFragment();if(0<b){for(a=a.dom;--b;)d.appendChild(a.nextSibling);d.insertBefore(a,d.firstChild)}return d}return a.dom}function z(a,b,d){for(;b<a.length;b++)if(null!=a[b]&&null!=a[b].dom)return a[b].dom;return d}function p(a,b,d){d&&d.parentNode?a.insertBefore(b,d):a.appendChild(b)}function e(a){var b=a.children;if(null!=b&&1===b.length&&"<"===b[0].tag)b=b[0].children,a.dom.innerHTML!==b&&(a.dom.innerHTML=b);else if(null!=
b||null!=a.text)throw Error("Child node of a contenteditable must be trusted");}function m(a,b,d,c){for(;b<d;b++){var e=a[b];null!=e&&(e.skip?e.skip=!1:w(e,c))}}function x(a){var b=!1;return function(){b||(b=!0,a())}}function w(a,b){function d(){if(++e===c&&(l(a),a.dom)){var d=a.domSize||1;if(1<d)for(var f=a.dom;--d;){var g=f.nextSibling,h=g.parentNode;null!=h&&h.removeChild(g)}d=a.dom;f=d.parentNode;null!=f&&f.removeChild(d);if(d=null!=b&&null==a.domSize)d=a.attrs,d=!(null!=d&&(d.oncreate||d.onupdate||
d.onbeforeremove||d.onremove));d&&"string"===typeof a.tag&&(b.pool?b.pool.push(a):b.pool=[a])}}var c=1,e=0;a.attrs&&a.attrs.onbeforeremove&&(c++,a.attrs.onbeforeremove.call(a.state,a,x(d)));"string"!==typeof a.tag&&a.tag.onbeforeremove&&(c++,a.tag.onbeforeremove.call(a.state,a,x(d)));d()}function l(a){a.attrs&&a.attrs.onremove&&a.attrs.onremove.call(a.state,a);"string"!==typeof a.tag&&a.tag.onremove&&a.tag.onremove.call(a.state,a);if(null!=a.instance)l(a.instance);else if(a=a.children,a instanceof
Array)for(var b=0;b<a.length;b++){var d=a[b];null!=d&&l(d)}}function t(a,b,d,c,e){var f=a.dom;if("key"!==b&&(d!==c||"value"===b||"checked"===b||"selectedIndex"===b||"selected"===b&&a.dom===B.activeElement||"object"===typeof c)&&"undefined"!==typeof c&&!G(b)){var g=b.indexOf(":");if(-1<g&&"xlink"===b.substr(0,g))f.setAttributeNS("http://www.w3.org/1999/xlink",b.slice(g+1),c);else if("o"===b[0]&&"n"===b[1]&&"function"===typeof c)v(a,b,c);else if("style"===b)if(a=d,a===c&&(f.style.cssText="",a=null),
null==c)f.style.cssText="";else if("string"===typeof c)f.style.cssText=c;else{"string"===typeof a&&(f.style.cssText="");for(var h in c)f.style[h]=c[h];if(null!=a&&"string"!==typeof a)for(h in a)h in c||(f.style[h]="")}else if(b in f&&"href"!==b&&"list"!==b&&"form"!==b&&"width"!==b&&"height"!==b&&void 0===e){if("input"!==a.tag||"value"!==b||a.dom.value!==c||a.dom!==B.activeElement)f[b]=c}else"boolean"===typeof c?c?f.setAttribute(b,""):f.removeAttribute(b):f.setAttribute("className"===b?"class":b,c)}}
function G(a){return"oninit"===a||"oncreate"===a||"onupdate"===a||"onremove"===a||"onbeforeremove"===a||"onbeforeupdate"===a}function v(a,b,d){var c=a.dom,e=function(a){var b=d.call(c,a);"function"===typeof F&&F.call(c,a);return b};if(b in c)c[b]="function"===typeof d?e:null;else{var f=b.slice(2);void 0===a.events&&(a.events={});null!=a.events[b]&&c.removeEventListener(f,a.events[b],!1);"function"===typeof d&&(a.events[b]=e,c.addEventListener(f,a.events[b],!1))}}function D(a,b,d){"function"===typeof a.oninit&&
a.oninit.call(b.state,b);"function"===typeof a.oncreate&&d.push(a.oncreate.bind(b.state,b))}function O(a,b,d,c){c?D(a,b,d):"function"===typeof a.onupdate&&d.push(a.onupdate.bind(b.state,b))}function H(a,b){Object.keys(b).forEach(function(d){a[d]=b[d]})}var B=c.document,I=B.createDocumentFragment(),F;return{render:function(a,b){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var d=[],c=B.activeElement;null==a.vnodes&&(a.textContent="");b instanceof
Array||(b=[b]);k(a,a.vnodes,u.normalizeChildren(b),d,null,void 0);a.vnodes=b;for(var e=0;e<d.length;e++)d[e]();B.activeElement!==c&&c.focus()},setEventCallback:function(a){return F=a}}}(window),T=function(c){var f=0,r=null,g="function"===typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(k){var h=Date.now();!0===k||0===f||16<=h-f?(f=h,c()):null===r&&(r=g(function(){r=null;c();f=Date.now()},16-(h-f)))}},U=function(c,f,r,g){g=T(g);null!=f&&f.setEventCallback(function(c){!1!==
c.redraw&&r.publish()});null!=r&&(c.redraw&&r.unsubscribe(c.redraw),r.subscribe(g));return c.redraw=g};v.mount=function(c,f){return function(r,g){if(null===g)c.render(r,[]),f.unsubscribe(r.redraw),delete r.redraw;else{if(null==g.view)throw Error("m.mount(element, component) expects a component, not a vnode");U(r,c,f,function(){c.render(r,u(g,void 0,void 0,void 0,void 0,void 0))})()}}}(Q,M);var N=function(c){if(""===c||null==c)return{};"?"===c.charAt(0)&&(c=c.slice(1));c=c.split("&");for(var f={},
r={},g=0;g<c.length;g++){var k=c[g].split("="),h=decodeURIComponent(k[0]),k=2===k.length?decodeURIComponent(k[1]):"";"true"===k?k=!0:"false"===k&&(k=!1);var y=h.split(/\]\[?|\[/),u=f;-1<h.indexOf("[")&&y.pop();for(var p=0;p<y.length;p++){var h=y[p],e=y[p+1],e=""==e||!isNaN(parseInt(e,10)),m=p===y.length-1;""===h&&(h=y.slice(0,p).join(),null==r[h]&&(r[h]=0),h=r[h]++);null==u[h]&&(u[h]=m?k:e?[]:{});u=u[h]}}return f},V=function(c){function f(e){var f=c.location[e].replace(/(?:%[a-f89][a-f0-9])+/gim,
decodeURIComponent);"pathname"===e&&"/"!==f[0]&&(f="/"+f);return f}function r(c){return function(){null==e&&(e=v(function(){e=null;c()}))}}function g(c,e,f){var g=c.indexOf("?"),h=c.indexOf("#"),k=-1<g?g:-1<h?h:c.length;if(-1<g){var g=N(c.slice(g+1,-1<h?h:c.length)),m;for(m in g)e[m]=g[m]}if(-1<h)for(m in e=N(c.slice(h+1)),e)f[m]=e[m];return c.slice(0,k)}function k(){switch(p.charAt(0)){case "#":return f("hash").slice(p.length);case "?":return f("search").slice(p.length)+f("hash");default:return f("pathname").slice(p.length)+
f("search")+f("hash")}}function h(e,f,h){var k={},t={};e=g(e,k,t);if(null!=f){for(var m in f)k[m]=f[m];e=e.replace(/:([^\/]+)/g,function(c,e){delete k[e];return f[e]})}(m=J(k))&&(e+="?"+m);(t=J(t))&&(e+="#"+t);u?(h&&h.replace?c.history.replaceState(null,null,p+e):c.history.pushState(null,null,p+e),c.onpopstate()):c.location.href=p+e}var u="function"===typeof c.history.pushState,v="function"===typeof setImmediate?setImmediate:setTimeout,p="#!",e;return{setPrefix:function(c){p=c},getPath:k,setPath:h,
defineRoutes:function(e,f,h){function l(){var c=k(),l={},p=g(c,l,l),m;for(m in e){var r=new RegExp("^"+m.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(r.test(p)){p.replace(r,function(){for(var g=m.match(/:[^\/]+/g)||[],h=[].slice.call(arguments,1,-2),k=0;k<g.length;k++)l[g[k].replace(/:|\./g,"")]=decodeURIComponent(h[k]);f(e[m],l,c,m)});return}}h(c,l)}u?c.onpopstate=r(l):"#"===p.charAt(0)&&(c.onhashchange=l);l();return l},link:function(c){c.dom.setAttribute("href",p+
c.attrs.href);c.dom.onclick=function(c){c.ctrlKey||c.metaKey||c.shiftKey||2===c.which||(c.preventDefault(),c.redraw=!1,c=this.getAttribute("href"),0===c.indexOf(p)&&(c=c.slice(p.length)),h(c,void 0,void 0))}}}};v.route=function(c,f){function r(c){return c}var g=V(c),k,h,v,z,p,e={view:function(){return[v(u(h,null,z,void 0,void 0,void 0))]}},m=function(c,m,l){h="div";v=r;z=null;f(c,e);g.defineRoutes(l,function(e,f,g){var l="function"!==typeof e.view,m=r,t=k=function(r){t===k&&(k=null,h=null!=r?r:l?
"div":e,v=m,z=f,p=g,c.redraw(!0))},u=function(){t()};l&&("function"===typeof e.render&&(m=e.render.bind(e)),"function"===typeof e.onmatch&&(u=e.onmatch));u.call(e,t,f,g)},function(){g.setPath(m,null,{replace:!0})})};m.link=g.link;m.prefix=g.setPrefix;m.set=g.setPath;m.get=function(){return p};return m}(window,v.mount);v.withAttr=function(c,f,r){return function(g){return f.call(r||this,c in g.currentTarget?g.currentTarget[c]:g.currentTarget.getAttribute(c))}};v.prop=P;v.render=Q.render;v.redraw=M.publish;
v.request=L.request;v.jsonp=L.jsonp;v.parseQueryString=N;v.buildQueryString=J;v.version="1.0.0-rc.3";"undefined"!==typeof module?module.exports=v:window.m=v};