/*! num4js#0.7.0 */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.nj=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=a("cwise-compiler")},{"cwise-compiler":2}],2:[function(a,b,c){"use strict";function d(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function e(a){var b=new d;b.pre=a.pre,b.body=a.body,b.post=a.post;var c=a.args.slice(0);b.argTypes=c;for(var e=0;e<c.length;++e){var g=c[e];if("array"===g||"object"==typeof g&&g.blockIndices){if(b.argTypes[e]="array",b.arrayArgs.push(e),b.arrayBlockIndices.push(g.blockIndices?g.blockIndices:0),b.shimArgs.push("array"+e),e<b.pre.args.length&&b.pre.args[e].count>0)throw new Error("cwise: pre() block may not reference array args");if(e<b.post.args.length&&b.post.args[e].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===g)b.scalarArgs.push(e),b.shimArgs.push("scalar"+e);else if("index"===g){if(b.indexArgs.push(e),e<b.pre.args.length&&b.pre.args[e].count>0)throw new Error("cwise: pre() block may not reference array index");if(e<b.body.args.length&&b.body.args[e].lvalue)throw new Error("cwise: body() block may not write to array index");if(e<b.post.args.length&&b.post.args[e].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===g){if(b.shapeArgs.push(e),e<b.pre.args.length&&b.pre.args[e].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(e<b.body.args.length&&b.body.args[e].lvalue)throw new Error("cwise: body() block may not write to array shape");if(e<b.post.args.length&&b.post.args[e].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof g||!g.offset)throw new Error("cwise: Unknown argument type "+c[e]);b.argTypes[e]="offset",b.offsetArgs.push({array:g.array,offset:g.offset}),b.offsetArgIndex.push(e)}}if(b.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(b.pre.args.length>c.length)throw new Error("cwise: Too many arguments in pre() block");if(b.body.args.length>c.length)throw new Error("cwise: Too many arguments in body() block");if(b.post.args.length>c.length)throw new Error("cwise: Too many arguments in post() block");return b.debug=!!a.printCode||!!a.debug,b.funcName=a.funcName||"cwise",b.blockSize=a.blockSize||64,f(b)}var f=a("./lib/thunk.js");b.exports=e},{"./lib/thunk.js":4}],3:[function(a,b,c){"use strict";function d(a,b,c){var d,e,f=a.length,g=b.arrayArgs.length,h=b.indexArgs.length>0,i=[],j=[],k=0,l=0;for(d=0;f>d;++d)j.push(["i",d,"=0"].join(""));for(e=0;g>e;++e)for(d=0;f>d;++d)l=k,k=a[d],0===d?j.push(["d",e,"s",d,"=t",e,"p",k].join("")):j.push(["d",e,"s",d,"=(t",e,"p",k,"-s",l,"*t",e,"p",l,")"].join(""));for(i.push("var "+j.join(",")),d=f-1;d>=0;--d)k=a[d],i.push(["for(i",d,"=0;i",d,"<s",k,";++i",d,"){"].join(""));for(i.push(c),d=0;f>d;++d){for(l=k,k=a[d],e=0;g>e;++e)i.push(["p",e,"+=d",e,"s",d].join(""));h&&(d>0&&i.push(["index[",l,"]-=s",l].join("")),i.push(["++index[",k,"]"].join(""))),i.push("}")}return i.join("\n")}function e(a,b,c,e){for(var f=b.length,g=c.arrayArgs.length,h=c.blockSize,i=c.indexArgs.length>0,j=[],k=0;g>k;++k)j.push(["var offset",k,"=p",k].join(""));for(var k=a;f>k;++k)j.push(["for(var j"+k+"=SS[",b[k],"]|0;j",k,">0;){"].join("")),j.push(["if(j",k,"<",h,"){"].join("")),j.push(["s",b[k],"=j",k].join("")),j.push(["j",k,"=0"].join("")),j.push(["}else{s",b[k],"=",h].join("")),j.push(["j",k,"-=",h,"}"].join("")),i&&j.push(["index[",b[k],"]=j",k].join(""));for(var k=0;g>k;++k){for(var l=["offset"+k],m=a;f>m;++m)l.push(["j",m,"*t",k,"p",b[m]].join(""));j.push(["p",k,"=(",l.join("+"),")"].join(""))}j.push(d(b,c,e));for(var k=a;f>k;++k)j.push("}");return j.join("\n")}function f(a){for(var b=0,c=a[0].length;c>b;){for(var d=1;d<a.length;++d)if(a[d][b]!==a[0][b])return b;++b}return b}function g(a,b,c){for(var d=a.body,e=[],f=[],g=0;g<a.args.length;++g){var h=a.args[g];if(!(h.count<=0)){var i=new RegExp(h.name,"g"),j="",k=b.arrayArgs.indexOf(g);switch(b.argTypes[g]){case"offset":var l=b.offsetArgIndex.indexOf(g),m=b.offsetArgs[l];k=m.array,j="+q"+l;case"array":j="p"+k+j;var n="l"+g,o="a"+k;if(0===b.arrayBlockIndices[k])1===h.count?"generic"===c[k]?h.lvalue?(e.push(["var ",n,"=",o,".get(",j,")"].join("")),d=d.replace(i,n),f.push([o,".set(",j,",",n,")"].join(""))):d=d.replace(i,[o,".get(",j,")"].join("")):d=d.replace(i,[o,"[",j,"]"].join("")):"generic"===c[k]?(e.push(["var ",n,"=",o,".get(",j,")"].join("")),d=d.replace(i,n),h.lvalue&&f.push([o,".set(",j,",",n,")"].join(""))):(e.push(["var ",n,"=",o,"[",j,"]"].join("")),d=d.replace(i,n),h.lvalue&&f.push([o,"[",j,"]=",n].join("")));else{for(var p=[h.name],q=[j],r=0;r<Math.abs(b.arrayBlockIndices[k]);r++)p.push("\\s*\\[([^\\]]+)\\]"),q.push("$"+(r+1)+"*t"+k+"b"+r);if(i=new RegExp(p.join(""),"g"),j=q.join("+"),"generic"===c[k])throw new Error("cwise: Generic arrays not supported in combination with blocks!");d=d.replace(i,[o,"[",j,"]"].join(""))}break;case"scalar":d=d.replace(i,"Y"+b.scalarArgs.indexOf(g));break;case"index":d=d.replace(i,"index");break;case"shape":d=d.replace(i,"shape")}}}return[e.join("\n"),d,f.join("\n")].join("\n").trim()}function h(a){for(var b=new Array(a.length),c=!0,d=0;d<a.length;++d){var e=a[d],f=e.match(/\d+/);f=f?f[0]:"",0===e.charAt(0)?b[d]="u"+e.charAt(1)+f:b[d]=e.charAt(0)+f,d>0&&(c=c&&b[d]===b[d-1])}return c?b[0]:b.join("")}function i(a,b){for(var c=b[1].length-Math.abs(a.arrayBlockIndices[0])|0,i=new Array(a.arrayArgs.length),k=new Array(a.arrayArgs.length),l=0;l<a.arrayArgs.length;++l)k[l]=b[2*l],i[l]=b[2*l+1];for(var m=[],n=[],o=[],p=[],q=[],l=0;l<a.arrayArgs.length;++l){a.arrayBlockIndices[l]<0?(o.push(0),p.push(c),m.push(c),n.push(c+a.arrayBlockIndices[l])):(o.push(a.arrayBlockIndices[l]),p.push(a.arrayBlockIndices[l]+c),m.push(0),n.push(a.arrayBlockIndices[l]));for(var r=[],s=0;s<i[l].length;s++)o[l]<=i[l][s]&&i[l][s]<p[l]&&r.push(i[l][s]-o[l]);q.push(r)}for(var t=["SS"],u=["'use strict'"],v=[],s=0;c>s;++s)v.push(["s",s,"=SS[",s,"]"].join(""));for(var l=0;l<a.arrayArgs.length;++l){t.push("a"+l),t.push("t"+l),t.push("p"+l);for(var s=0;c>s;++s)v.push(["t",l,"p",s,"=t",l,"[",o[l]+s,"]"].join(""));for(var s=0;s<Math.abs(a.arrayBlockIndices[l]);++s)v.push(["t",l,"b",s,"=t",l,"[",m[l]+s,"]"].join(""))}for(var l=0;l<a.scalarArgs.length;++l)t.push("Y"+l);if(a.shapeArgs.length>0&&v.push("shape=SS.slice(0)"),a.indexArgs.length>0){for(var w=new Array(c),l=0;c>l;++l)w[l]="0";v.push(["index=[",w.join(","),"]"].join(""))}for(var l=0;l<a.offsetArgs.length;++l){for(var x=a.offsetArgs[l],y=[],s=0;s<x.offset.length;++s)0!==x.offset[s]&&(1===x.offset[s]?y.push(["t",x.array,"p",s].join("")):y.push([x.offset[s],"*t",x.array,"p",s].join("")));0===y.length?v.push("q"+l+"=0"):v.push(["q",l,"=",y.join("+")].join(""))}var z=j([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));v=v.concat(z),u.push("var "+v.join(","));for(var l=0;l<a.arrayArgs.length;++l)u.push("p"+l+"|=0");a.pre.body.length>3&&u.push(g(a.pre,a,k));var A=g(a.body,a,k),B=f(q);c>B?u.push(e(B,q[0],a,A)):u.push(d(q[0],a,A)),a.post.body.length>3&&u.push(g(a.post,a,k)),a.debug&&console.log("-----Generated cwise routine for ",b,":\n"+u.join("\n")+"\n----------");var C=[a.funcName||"unnamed","_cwise_loop_",i[0].join("s"),"m",B,h(k)].join(""),D=new Function(["function ",C,"(",t.join(","),"){",u.join("\n"),"} return ",C].join(""));return D()}var j=a("uniq");b.exports=i},{uniq:5}],4:[function(a,b,c){"use strict";function d(a){var b=["'use strict'","var CACHED={}"],c=[],d=a.funcName+"_cwise_thunk";b.push(["return function ",d,"(",a.shimArgs.join(","),"){"].join(""));for(var f=[],g=[],h=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),a.arrayBlockIndices[0]<0?","+a.arrayBlockIndices[0]+")":")"].join("")],i=[],j=[],k=0;k<a.arrayArgs.length;++k){var l=a.arrayArgs[k];c.push(["t",l,"=array",l,".dtype,","r",l,"=array",l,".order"].join("")),f.push("t"+l),f.push("r"+l),g.push("t"+l),g.push("r"+l+".join()"),h.push("array"+l+".data"),h.push("array"+l+".stride"),h.push("array"+l+".offset|0"),k>0&&(i.push("array"+a.arrayArgs[0]+".shape.length===array"+l+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[k]))),j.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+l+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[k])+"]"))}a.arrayArgs.length>1&&(b.push("if (!("+i.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),b.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),b.push("if (!("+j.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),b.push("}"));for(var k=0;k<a.scalarArgs.length;++k)h.push("scalar"+a.scalarArgs[k]);c.push(["type=[",g.join(","),"].join()"].join("")),c.push("proc=CACHED[type]"),b.push("var "+c.join(",")),b.push(["if(!proc){","CACHED[type]=proc=compile([",f.join(","),"])}","return proc(",h.join(","),")}"].join("")),a.debug&&console.log("-----Generated thunk:\n"+b.join("\n")+"\n----------");var m=new Function("compile",b.join("\n"));return m(e.bind(void 0,a))}var e=a("./compile.js");b.exports=d},{"./compile.js":3}],5:[function(a,b,c){"use strict";function d(a,b){for(var c=1,d=a.length,e=a[0],f=a[0],g=1;d>g;++g)if(f=e,e=a[g],b(e,f)){if(g===c){c++;continue}a[c++]=e}return a.length=c,a}function e(a){for(var b=1,c=a.length,d=a[0],e=a[0],f=1;c>f;++f,e=d)if(e=d,d=a[f],d!==e){if(f===b){b++;continue}a[b++]=d}return a.length=b,a}function f(a,b,c){return 0===a.length?a:b?(c||a.sort(b),d(a,b)):(c||a.sort(),e(a))}b.exports=f},{}],6:[function(a,b,c){(function(b){"use strict";function d(){function a(){}try{var b=new Uint8Array(1);return b.foo=function(){return 42},b.constructor=a,42===b.foo()&&b.constructor===a&&"function"==typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(c){return!1}}function e(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(a){return this instanceof f?(f.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof a?g(this,a):"string"==typeof a?h(this,a,arguments.length>1?arguments[1]:"utf8"):i(this,a)):arguments.length>1?new f(a,arguments[1]):new f(a)}function g(a,b){if(a=p(a,0>b?0:0|q(b)),!f.TYPED_ARRAY_SUPPORT)for(var c=0;b>c;c++)a[c]=0;return a}function h(a,b,c){("string"!=typeof c||""===c)&&(c="utf8");var d=0|s(b,c);return a=p(a,d),a.write(b,c),a}function i(a,b){if(f.isBuffer(b))return j(a,b);if(Y(b))return k(a,b);if(null==b)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(b.buffer instanceof ArrayBuffer)return l(a,b);if(b instanceof ArrayBuffer)return m(a,b)}return b.length?n(a,b):o(a,b)}function j(a,b){var c=0|q(b.length);return a=p(a,c),b.copy(a,0,0,c),a}function k(a,b){var c=0|q(b.length);a=p(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function l(a,b){var c=0|q(b.length);a=p(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function m(a,b){return f.TYPED_ARRAY_SUPPORT?(b.byteLength,a=f._augment(new Uint8Array(b))):a=l(a,new Uint8Array(b)),a}function n(a,b){var c=0|q(b.length);a=p(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function o(a,b){var c,d=0;"Buffer"===b.type&&Y(b.data)&&(c=b.data,d=0|q(c.length)),a=p(a,d);for(var e=0;d>e;e+=1)a[e]=255&c[e];return a}function p(a,b){f.TYPED_ARRAY_SUPPORT?(a=f._augment(new Uint8Array(b)),a.__proto__=f.prototype):(a.length=b,a._isBuffer=!0);var c=0!==b&&b<=f.poolSize>>>1;return c&&(a.parent=Z),a}function q(a){if(a>=e())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e().toString(16)+" bytes");return 0|a}function r(a,b){if(!(this instanceof r))return new r(a,b);var c=new f(a,b);return delete c.parent,c}function s(a,b){"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"binary":case"raw":case"raws":return c;case"utf8":case"utf-8":return R(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return U(a).length;default:if(d)return R(a).length;b=(""+b).toLowerCase(),d=!0}}function t(a,b,c){var d=!1;if(b=0|b,c=void 0===c||c===1/0?this.length:0|c,a||(a="utf8"),0>b&&(b=0),c>this.length&&(c=this.length),b>=c)return"";for(;;)switch(a){case"hex":return F(this,b,c);case"utf8":case"utf-8":return B(this,b,c);case"ascii":return D(this,b,c);case"binary":return E(this,b,c);case"base64":return A(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function u(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new Error("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;d>g;g++){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))throw new Error("Invalid hex string");a[c+g]=h}return g}function v(a,b,c,d){return V(R(b,a.length-c),a,c,d)}function w(a,b,c,d){return V(S(b),a,c,d)}function x(a,b,c,d){return w(a,b,c,d)}function y(a,b,c,d){return V(U(b),a,c,d)}function z(a,b,c,d){return V(T(b,a.length-c),a,c,d)}function A(a,b,c){return 0===b&&c===a.length?W.fromByteArray(a):W.fromByteArray(a.slice(b,c))}function B(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;c>e;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(c>=e+h){var i,j,k,l;switch(h){case 1:128>f&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(55296>l||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&1114112>l&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return C(d)}function C(a){var b=a.length;if($>=b)return String.fromCharCode.apply(String,a);for(var c="",d=0;b>d;)c+=String.fromCharCode.apply(String,a.slice(d,d+=$));return c}function D(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(127&a[e]);return d}function E(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function F(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=Q(a[f]);return e}function G(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function H(a,b,c){if(a%1!==0||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function I(a,b,c,d,e,g){if(!f.isBuffer(a))throw new TypeError("buffer must be a Buffer instance");if(b>e||g>b)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range")}function J(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);f>e;e++)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function K(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);f>e;e++)a[c+e]=b>>>8*(d?e:3-e)&255}function L(a,b,c,d,e,f){if(b>e||f>b)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range");if(0>c)throw new RangeError("index out of range")}function M(a,b,c,d,e){return e||L(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(a,b,c,d,23,4),c+4}function N(a,b,c,d,e){return e||L(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(a,b,c,d,52,8),c+8}function O(a){if(a=P(a).replace(aa,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function P(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function Q(a){return 16>a?"0"+a.toString(16):a.toString(16)}function R(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;d>g;g++){if(c=a.charCodeAt(g),c>55295&&57344>c){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(56320>c){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,128>c){if((b-=1)<0)break;f.push(c)}else if(2048>c){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(65536>c){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(1114112>c))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function S(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function T(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);g++)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function U(a){return W.toByteArray(O(a))}function V(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}var W=a("base64-js"),X=a("ieee754"),Y=a("isarray");c.Buffer=f,c.SlowBuffer=r,c.INSPECT_MAX_BYTES=50,f.poolSize=8192;var Z={};f.TYPED_ARRAY_SUPPORT=void 0!==b.TYPED_ARRAY_SUPPORT?b.TYPED_ARRAY_SUPPORT:d(),f.TYPED_ARRAY_SUPPORT?(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array):(f.prototype.length=void 0,f.prototype.parent=void 0),f.isBuffer=function(a){return!(null==a||!a._isBuffer)},f.compare=function(a,b){if(!f.isBuffer(a)||!f.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,g=Math.min(c,d);g>e&&a[e]===b[e];)++e;return e!==g&&(c=a[e],d=b[e]),d>c?-1:c>d?1:0},f.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(a,b){if(!Y(a))throw new TypeError("list argument must be an Array of Buffers.");if(0===a.length)return new f(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var d=new f(b),e=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(d,e),e+=g.length}return d},f.byteLength=s,f.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?B(this,0,a):t.apply(this,arguments)},f.prototype.equals=function(a){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===f.compare(this,a)},f.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},f.prototype.compare=function(a){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?0:f.compare(this,a)},f.prototype.indexOf=function(a,b){function c(a,b,c){for(var d=-1,e=0;c+e<a.length;e++)if(a[c+e]===b[-1===d?0:e-d]){if(-1===d&&(d=e),e-d+1===b.length)return c+d}else d=-1;return-1}if(b>2147483647?b=2147483647:-2147483648>b&&(b=-2147483648),b>>=0,0===this.length)return-1;if(b>=this.length)return-1;if(0>b&&(b=Math.max(this.length+b,0)),"string"==typeof a)return 0===a.length?-1:String.prototype.indexOf.call(this,a,b);if(f.isBuffer(a))return c(this,a,b);if("number"==typeof a)return f.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,a,b):c(this,[a],b);throw new TypeError("val must be string, number or Buffer")},f.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},f.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},f.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b=0|b,isFinite(c)?(c=0|c,void 0===d&&(d="utf8")):(d=c,c=void 0);else{var e=d;d=b,b=0|c,c=e}var f=this.length-b;if((void 0===c||c>f)&&(c=f),a.length>0&&(0>c||0>b)||b>this.length)throw new RangeError("attempt to write outside buffer bounds");d||(d="utf8");for(var g=!1;;)switch(d){case"hex":return u(this,a,b,c);case"utf8":case"utf-8":return v(this,a,b,c);case"ascii":return w(this,a,b,c);case"binary":return x(this,a,b,c);case"base64":return y(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,a,b,c);default:if(g)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),g=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;f.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c),0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c),a>b&&(b=a);var d;if(f.TYPED_ARRAY_SUPPORT)d=f._augment(this.subarray(a,b));else{var e=b-a;d=new f(e,void 0);for(var g=0;e>g;g++)d[g]=this[g+a]}return d.length&&(d.parent=this.parent||this),d},f.prototype.readUIntLE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},f.prototype.readUIntBE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},f.prototype.readUInt8=function(a,b){return b||H(a,1,this.length),this[a]},f.prototype.readUInt16LE=function(a,b){return b||H(a,2,this.length),this[a]|this[a+1]<<8},f.prototype.readUInt16BE=function(a,b){return b||H(a,2,this.length),this[a]<<8|this[a+1]},f.prototype.readUInt32LE=function(a,b){return b||H(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},f.prototype.readUInt32BE=function(a,b){return b||H(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},f.prototype.readIntLE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},f.prototype.readIntBE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},f.prototype.readInt8=function(a,b){return b||H(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},f.prototype.readInt16LE=function(a,b){b||H(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt16BE=function(a,b){b||H(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt32LE=function(a,b){return b||H(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},f.prototype.readInt32BE=function(a,b){return b||H(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},f.prototype.readFloatLE=function(a,b){return b||H(a,4,this.length),X.read(this,a,!0,23,4)},f.prototype.readFloatBE=function(a,b){return b||H(a,4,this.length),X.read(this,a,!1,23,4)},f.prototype.readDoubleLE=function(a,b){return b||H(a,8,this.length),X.read(this,a,!0,52,8)},f.prototype.readDoubleBE=function(a,b){return b||H(a,8,this.length),X.read(this,a,!1,52,8)},f.prototype.writeUIntLE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||I(this,a,b,c,Math.pow(2,8*c),0);var e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},f.prototype.writeUIntBE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||I(this,a,b,c,Math.pow(2,8*c),0);var e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},f.prototype.writeUInt8=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,1,255,0),f.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=255&a,b+1},f.prototype.writeUInt16LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):J(this,a,b,!0),b+2},f.prototype.writeUInt16BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):J(this,a,b,!1),b+2},f.prototype.writeUInt32LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a):K(this,a,b,!0),b+4},f.prototype.writeUInt32BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):K(this,a,b,!1),b+4},f.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);I(this,a,b,c,e-1,-e)}var f=0,g=1,h=0>a?1:0;for(this[b]=255&a;++f<c&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);I(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0>a?1:0;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeInt8=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,1,127,-128),f.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),0>a&&(a=255+a+1),this[b]=255&a,b+1},f.prototype.writeInt16LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):J(this,a,b,!0),b+2},f.prototype.writeInt16BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):J(this,a,b,!1),b+2},f.prototype.writeInt32LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):K(this,a,b,!0),b+4},f.prototype.writeInt32BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):K(this,a,b,!1),b+4},f.prototype.writeFloatLE=function(a,b,c){return M(this,a,b,!0,c)},f.prototype.writeFloatBE=function(a,b,c){return M(this,a,b,!1,c)},f.prototype.writeDoubleLE=function(a,b,c){return N(this,a,b,!0,c)},f.prototype.writeDoubleBE=function(a,b,c){return N(this,a,b,!1,c)},f.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&c>d&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e,g=d-c;if(this===a&&b>c&&d>b)for(e=g-1;e>=0;e--)a[e+b]=this[e+c];else if(1e3>g||!f.TYPED_ARRAY_SUPPORT)for(e=0;g>e;e++)a[e+b]=this[e+c];else a._set(this.subarray(c,c+g),b);return g},f.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),b>c)throw new RangeError("end < start");if(c!==b&&0!==this.length){if(0>b||b>=this.length)throw new RangeError("start out of bounds");if(0>c||c>this.length)throw new RangeError("end out of bounds");var d;if("number"==typeof a)for(d=b;c>d;d++)this[d]=a;else{var e=R(a.toString()),f=e.length;for(d=b;c>d;d++)this[d]=e[d%f]}return this}},f.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(f.TYPED_ARRAY_SUPPORT)return new f(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;c>b;b+=1)a[b]=this[b];return a.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var _=f.prototype;f._augment=function(a){return a.constructor=f,a._isBuffer=!0,a._set=a.set,a.get=_.get,a.set=_.set,a.write=_.write,a.toString=_.toString,a.toLocaleString=_.toString,a.toJSON=_.toJSON,a.equals=_.equals,a.compare=_.compare,a.indexOf=_.indexOf,a.copy=_.copy,a.slice=_.slice,a.readUIntLE=_.readUIntLE,a.readUIntBE=_.readUIntBE,a.readUInt8=_.readUInt8,a.readUInt16LE=_.readUInt16LE,a.readUInt16BE=_.readUInt16BE,a.readUInt32LE=_.readUInt32LE,a.readUInt32BE=_.readUInt32BE,a.readIntLE=_.readIntLE,a.readIntBE=_.readIntBE,a.readInt8=_.readInt8,a.readInt16LE=_.readInt16LE,a.readInt16BE=_.readInt16BE,a.readInt32LE=_.readInt32LE,a.readInt32BE=_.readInt32BE,a.readFloatLE=_.readFloatLE,a.readFloatBE=_.readFloatBE,a.readDoubleLE=_.readDoubleLE,a.readDoubleBE=_.readDoubleBE,a.writeUInt8=_.writeUInt8,a.writeUIntLE=_.writeUIntLE,a.writeUIntBE=_.writeUIntBE,a.writeUInt16LE=_.writeUInt16LE,a.writeUInt16BE=_.writeUInt16BE,a.writeUInt32LE=_.writeUInt32LE,a.writeUInt32BE=_.writeUInt32BE,a.writeIntLE=_.writeIntLE,a.writeIntBE=_.writeIntBE,a.writeInt8=_.writeInt8,a.writeInt16LE=_.writeInt16LE,a.writeInt16BE=_.writeInt16BE,a.writeInt32LE=_.writeInt32LE,a.writeInt32BE=_.writeInt32BE,a.writeFloatLE=_.writeFloatLE,a.writeFloatBE=_.writeFloatBE,a.writeDoubleLE=_.writeDoubleLE,a.writeDoubleBE=_.writeDoubleBE,a.fill=_.fill,a.inspect=_.inspect,a.toArrayBuffer=_.toArrayBuffer,a};var aa=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":7,ieee754:8,isarray:9}],7:[function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(a){"use strict";function b(a){var b=a.charCodeAt(0);return b===g||b===l?62:b===h||b===m?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function c(a){function c(a){j[l++]=a}var d,e,g,h,i,j;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=a.length;i="="===a.charAt(k-2)?2:"="===a.charAt(k-1)?1:0,j=new f(3*a.length/4-i),g=i>0?a.length-4:a.length;var l=0;for(d=0,e=0;g>d;d+=4,e+=3)h=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,c(255&h)):1===i&&(h=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return d.charAt(a)}function c(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;g>e;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=c(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0),l="-".charCodeAt(0),m="_".charCodeAt(0);a.toByteArray=c,a.fromByteArray=e}("undefined"==typeof c?this.base64js={}:c)},{}],8:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],9:[function(a,b,c){var d={}.toString;b.exports=Array.isArray||function(a){return"[object Array]"==d.call(a)}},{}],10:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){
return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:11}],11:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h&&h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],12:[function(a,b,c){"use strict";function d(a,b,c){var d,i,j=b.shape,k=j.length,l=1,m=new Array(k),n=0;for(d=k-1;d>=0;--d)if(m[d]=l,l*=j[d],n=Math.max(n,h.scratchMemory(j[d])),b.shape[d]!==c.shape[d])throw new Error("Shape mismatch, real and imaginary arrays must have same size");var o,p=4*l+n;o="array"===b.dtype||"float64"===b.dtype||"custom"===b.dtype?g.mallocDouble(p):g.mallocFloat(p);var q,r,s,t,u=f(o,j.slice(0),m,0),v=f(o,j.slice(0),m.slice(0),l),w=f(o,j.slice(0),m.slice(0),2*l),x=f(o,j.slice(0),m.slice(0),3*l),y=4*l;for(e.assign(u,b),e.assign(v,c),d=k-1;d>=0&&(h(a,l/j[d],j[d],o,u.offset,v.offset,y),0!==d);--d){for(r=1,s=w.stride,t=x.stride,i=d-1;k>i;++i)t[i]=s[i]=r,r*=j[i];for(i=d-2;i>=0;--i)t[i]=s[i]=r,r*=j[i];e.assign(w,u),e.assign(x,v),q=u,u=w,w=q,q=v,v=x,x=q}e.assign(b,u),e.assign(c,v),g.free(o)}var e=a("ndarray-ops"),f=a("ndarray"),g=a("typedarray-pool"),h=a("./lib/fft-matrix.js");b.exports=d},{"./lib/fft-matrix.js":13,ndarray:22,"ndarray-ops":17,"typedarray-pool":27}],13:[function(a,b,c){function d(a,b,c,d,e,i,j){a|=0,b|=0,c|=0,e|=0,i|=0,h.isPow2(c)?f(a,b,c,d,e,i):g(a,b,c,d,e,i,j)}function e(a){return h.isPow2(a)?0:2*a+4*h.nextPow2(2*a+1)}function f(a,b,c,d,e,f){a|=0,b|=0,c|=0,e|=0,f|=0;var g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F;for(g=c,i=h.log2(g),y=0;b>y;++y){for(n=g>>1,l=0,j=0;g-1>j;j++){for(l>j&&(t=d[e+j],d[e+j]=d[e+l],d[e+l]=t,t=d[f+j],d[f+j]=d[f+l],d[f+l]=t),m=n;l>=m;)l-=m,m>>=1;l+=m}for(r=-1,s=0,q=1,o=0;i>o;o++){for(p=q,q<<=1,w=1,x=0,l=0;p>l;l++){for(j=l;g>j;j+=q)k=j+p,z=d[e+k],A=d[f+k],B=d[e+j],C=d[f+j],D=w*(z+A),E=z*(x-w),F=A*(w+x),u=D-F,v=D+E,d[e+k]=B-u,d[f+k]=C-v,d[e+j]+=u,d[f+j]+=v;D=r*(w+x),E=w*(s-r),F=x*(r+s),w=D-F,x=D+E}s=Math.sqrt((1-r)/2),0>a&&(s=-s),r=Math.sqrt((1+r)/2)}if(0>a){var G=1/g;for(j=0;g>j;j++)d[e+j]*=G,d[f+j]*=G}e+=c,f+=c}}function g(a,b,c,d,e,g,i){a|=0,b|=0,c|=0,e|=0,g|=0,i|=0;var j,k,l,m,n,o,p,q,r,s=h.nextPow2(2*c+1),t=i,u=t+c,v=u+c,w=v+s,x=w+s,y=x+s,z=-a*Math.PI/c;for(r=0;c>r;++r)k=z*(r*r%(2*c)),m=Math.cos(k),n=Math.sin(k),d[x+(s-r)]=d[x+r]=d[t+r]=m,d[y+(s-r)]=d[y+r]=d[u+r]=n;for(r=c;s-c>=r;++r)d[x+r]=0;for(r=c;s-c>=r;++r)d[y+r]=0;for(f(1,1,s,d,x,y),z=0>a?1/c:1,j=0;b>j;++j){for(r=0;c>r;++r)k=d[e+r],l=d[g+r],m=d[t+r],n=-d[u+r],o=m*(k+l),p=k*(n-m),q=l*(m+n),d[v+r]=o-q,d[w+r]=o+p;for(r=c;s>r;++r)d[v+r]=0;for(r=c;s>r;++r)d[w+r]=0;for(f(1,1,s,d,v,w),r=0;s>r;++r)k=d[v+r],l=d[w+r],m=d[x+r],n=d[y+r],o=m*(k+l),p=k*(n-m),q=l*(m+n),d[v+r]=o-q,d[w+r]=o+p;for(f(-1,1,s,d,v,w),r=0;c>r;++r)k=d[v+r],l=d[w+r],m=d[t+r],n=-d[u+r],o=m*(k+l),p=k*(n-m),q=l*(m+n),d[e+r]=z*(o-q),d[g+r]=z*(o+p);e+=c,g+=c}}var h=a("bit-twiddle");b.exports=d,b.exports.scratchMemory=e},{"bit-twiddle":14}],14:[function(a,b,c){"use strict";"use restrict";function d(a){var b=32;return a&=-a,a&&b--,65535&a&&(b-=16),16711935&a&&(b-=8),252645135&a&&(b-=4),858993459&a&&(b-=2),1431655765&a&&(b-=1),b}var e=32;c.INT_BITS=e,c.INT_MAX=2147483647,c.INT_MIN=-1<<e-1,c.sign=function(a){return(a>0)-(0>a)},c.abs=function(a){var b=a>>e-1;return(a^b)-b},c.min=function(a,b){return b^(a^b)&-(b>a)},c.max=function(a,b){return a^(a^b)&-(b>a)},c.isPow2=function(a){return!(a&a-1||!a)},c.log2=function(a){var b,c;return b=(a>65535)<<4,a>>>=b,c=(a>255)<<3,a>>>=c,b|=c,c=(a>15)<<2,a>>>=c,b|=c,c=(a>3)<<1,a>>>=c,b|=c,b|a>>1},c.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},c.popCount=function(a){return a-=a>>>1&1431655765,a=(858993459&a)+(a>>>2&858993459),16843009*(a+(a>>>4)&252645135)>>>24},c.countTrailingZeros=d,c.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1},c.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a-(a>>>1)},c.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,a&=15,27030>>>a&1};var f=new Array(256);!function(a){for(var b=0;256>b;++b){var c=b,d=b,e=7;for(c>>>=1;c;c>>>=1)d<<=1,d|=1&c,--e;a[b]=d<<e&255}}(f),c.reverse=function(a){return f[255&a]<<24|f[a>>>8&255]<<16|f[a>>>16&255]<<8|f[a>>>24&255]},c.interleave2=function(a,b){return a&=65535,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b&=65535,b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1},c.deinterleave2=function(a,b){return a=a>>>b&1431655765,a=858993459&(a|a>>>1),a=252645135&(a|a>>>2),a=16711935&(a|a>>>4),a=65535&(a|a>>>16),a<<16>>16},c.interleave3=function(a,b,c){return a&=1023,a=4278190335&(a|a<<16),a=251719695&(a|a<<8),a=3272356035&(a|a<<4),a=1227133513&(a|a<<2),b&=1023,b=4278190335&(b|b<<16),b=251719695&(b|b<<8),b=3272356035&(b|b<<4),b=1227133513&(b|b<<2),a|=b<<1,c&=1023,c=4278190335&(c|c<<16),c=251719695&(c|c<<8),c=3272356035&(c|c<<4),c=1227133513&(c|c<<2),a|c<<2},c.deinterleave3=function(a,b){return a=a>>>b&1227133513,a=3272356035&(a|a>>>2),a=251719695&(a|a>>>4),a=4278190335&(a|a>>>8),a=1023&(a|a>>>16),a<<22>>22},c.nextCombination=function(a){var b=a|a-1;return b+1|(~b&-~b)-1>>>d(a)+1}},{}],15:[function(a,b,c){"use strict";function d(a){return Array.isArray(a)?[a.length,a[0].length]:a.shape}function e(a,b,c){var e=d(a),f=d(b),g=d(c);if(e[0]!==f[0]||e[1]!==g[1]||f[1]!==g[0])throw new Error("Mismatched array shapes for matrix product")}function f(a){if(Array.isArray(a)){if(Array.isArray(a))return["r","native"]}else if(a.shape&&2===a.shape.length)return a.order[0]?["r",a.dtype]:["c",a.dtype];throw new Error("Unrecognized data type")}function g(a,b,c,d,g){void 0===d&&(d=1),void 0===g&&(g=0);var j=1!==d,k=0!==g,l=f(a),m=f(b),n=f(c);e(a,b,c);var o=[l,m,n,j,k].join(":"),p=i[o];return p||(p=i[o]=h(l,m,n,j,k)),p(a,b,c,d,g)}b.exports=g;var h=a("./lib/planner.js"),i={}},{"./lib/planner.js":16}],16:[function(a,b,c){"use strict";function d(a,b){return"native"===b[1]?[a,"d0=",a,".length,",a,"d1=",a,"[0].length,"].join(""):[a,"d0=",a,".shape[0],",a,"d1=",a,".shape[1],",a,"s0=",a,".stride[0],",a,"s1=",a,".stride[1],",a,"o=",a,".offset,",a,"d=",a,".data,"].join("")}function e(a,b,c,d,e,f){var g=[];return"native"===c[1]?a[0]&&(d?g.push("var ",b,"p=",b,"[",d,"];"):g.push("var ",b,"p=",b,"[0];")):d&&e?f?g.push("var ",b,"t0=",b,"s",a[0],",",b,"t1=",b,"s",a[1],"-",b,"s",a[0],"*",f,",",b,"p=",b,"o+",d,"*",b,"s0+",e,"*",b,"s1;"):g.push("var ",b,"t0=",b,"s",a[0],",",b,"p=",b,"o+",d,"*",b,"s0+",e,"*",b,"s1;"):d?g.push("var ",b,"t0=",b,"s",a[0],",",b,"p=",b,"o+",d,"*",b,"s0;"):e?g.push("var ",b,"t0=",b,"s",a[0],",",b,"p=",b,"o+",e,"*",b,"s1;"):g.push("var ",b,"t0=",b,"s",a[0],",",b,"t1=",b,"s",a[1],"-",b,"s",a[0],"*",b,"d",a[0],",",b,"p=",b,"o;"),g}function f(a,b,c,d,e){var f=[];return"native"===c[1]?a[0]&&1===d&&f.push(b,"p=",b,"[",e,"+1]"):f.push(b,"p+=",b,"t",d,";"),f}function g(a,b,c,d,e,f){var g=[];return"native"===c[1]?a[0]?g.push(b,"p[",e,"]=",f,";"):g.push(b,"[",d,"][",e,"]=",f,";"):"generic"===c[1]?g.push(b,"d.set(",b,"p,",f,");"):g.push(b,"d[",b,"p]=",f,";"),g}function h(a,b,c,d,e){var f=[];return"native"===c[1]?a[0]?f.push(b,"p[",e,"]"):f.push(b,"[",d,"][",e,"]"):"generic"===c[1]?f.push(b,"d.get(",b,"p)"):f.push(b,"d[",b,"p]"),f.join("")}function i(a,b,c,d,i){var j=[],k="r"===a[0]?[1,0]:[0,1],l=[1,0],m=[0,1],n=["i","j"];return j.push.apply(j,e(k,"o",a)),k[1]?(j.push("for(j=0;j<od1;++j){"),j.push("for(i=0;i<od0;++i){")):(j.push("for(i=0;i<od0;++i){"),j.push("for(j=0;j<od1;++j){")),j.push.apply(j,e(l,"a",b,"i")),j.push.apply(j,e(m,"b",c,void 0,"j")),j.push("var r=0.0;","for(k=0;k<ad1;++k){","r+=",h(l,"a",b,"i","k"),"*",h(m,"b",c,"k","j"),";"),j.push.apply(j,f(l,"a",b,0,"k")),j.push.apply(j,f(m,"b",c,0,"k")),j.push("}"),d&&j.push("r*=A;"),i&&j.push("r+=B*",h(k,"o",a,"i","j"),";"),j.push.apply(j,g(k,"o",a,"i","j","r")),j.push.apply(j,f(k,"o",a,0,n[1])),j.push("}"),j.push.apply(j,f(k,"o",a,1,n[0])),j.push("}"),j}function j(a,b){var c,d=[],i="r"===a[0]?[1,0]:[0,1];return b&&d.push("if(B!==1.0){"),d.push.apply(d,e(i,"o",a)),i[0]?(d.push("for(i=0;i<od0;++i){for(j=0;j<od1;++j){"),c=["i","j"]):(d.push("for(j=0;j<od1;++j){for(i=0;i<od0;++i){"),c=["j","i"]),b?d.push.apply(d,g(i,"o",a,"i","j","B*"+h(i,"o",a,"i","j"))):d.push.apply(d,g(i,"o",a,"i","j","0")),d.push.apply(d,f(i,"o",a,0,c[1])),d.push("}"),d.push.apply(d,f(i,"o",a,1,c[0])),d.push("}"),b&&d.push("}"),d}function k(a,b,c,d,i){var k=[],l=["od0","od1","ad1"],n=[1,0],o=[1,0],p=[0,1];k.push.apply(k,j(a,i));for(var q=0;3>q;++q)k.push("for(var i",q,"=",l[q],";i",q,">0;){","var w",q,"=",m,";","if(i",q,"<",m,"){","w",q,"=i",q,";","i",q,"=0;","}else{","i",q,"-=",m,";","}");k.push.apply(k,e(n,"o",a,"i0","i1","w1")),k.push("for(i=0;i<w0;++i){for(j=0;j<w1;++j){var r=0.0;"),k.push.apply(k,e(o,"a",b,"(i0+i)","i2")),k.push.apply(k,e(p,"b",c,"i2","(i1+j)")),k.push("for(k=0;k<w2;++k){"),k.push("r+=",h(o,"a",b,"(i0+i)","(i2+k)"),"*",h(p,"b",c,"(i2+k)","(i1+j)"),";"),k.push.apply(k,f(o,"a",b,0,"(i2+k)")),k.push.apply(k,f(p,"b",c,0,"(i2+k)")),k.push("}");var r="r";return d&&(r="A*r"),k.push.apply(k,g(n,"o",a,"(i0+i)","(i1+j)",r+"+"+h(n,"o",a,"(i0+i)","(i1+j)"))),k.push.apply(k,f(n,"o",a,0,"(i1+j)")),k.push("}"),k.push.apply(k,f(n,"o",a,1,"(i0+i)")),k.push("}}}}"),k}function l(a,b,c,e,f){var g=["gemm",a[0],a[1],"a",b[0],b[1],"b",c[0],c[1],e?"alpha":"",f?"beta":""].join(""),h=["function ",g,"(o,a,b,A,B){","var ",d("o",a),d("a",b),d("b",c),"i,j,k;"];"r"===b[0]&&"c"===c[0]?h.push.apply(h,i(a,b,c,e,f)):h.push.apply(h,k(a,b,c,e,f)),h.push("}return ",g);var j=new Function(h.join(""));return j()}b.exports=l;var m=32},{}],17:[function(a,b,c){"use strict";function d(a){if(!a)return h;for(var b=0;b<a.args.length;++b){var c=a.args[b];0===b?a.args[b]={name:c,lvalue:!0,rvalue:!!a.rvalue,count:a.count||1}:a.args[b]={name:c,lvalue:!1,rvalue:!0,count:1}}return a.thisVars||(a.thisVars=[]),a.localVars||(a.localVars=[]),a}function e(a){return g({args:a.args,pre:d(a.pre),body:d(a.body),post:d(a.proc),funcName:a.funcName})}function f(a){for(var b=[],c=0;c<a.args.length;++c)b.push("a"+c);var d=new Function("P",["return function ",a.funcName,"_ndarrayops(",b.join(","),") {P(",b.join(","),");return a0}"].join(""));return d(e(a))}var g=a("cwise-compiler"),h={body:"",args:[],thisVars:[],localVars:[]},i={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var a in i){var b=i[a];c[a]=f({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+b+"c"},funcName:a}),c[a+"eq"]=f({args:["array","array"],body:{args:["a","b"],body:"a"+b+"=b"},rvalue:!0,funcName:a+"eq"}),c[a+"s"]=f({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+b+"s"},funcName:a+"s"}),c[a+"seq"]=f({args:["array","scalar"],body:{args:["a","s"],body:"a"+b+"=s"},rvalue:!0,funcName:a+"seq"})}}();var j={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var a in j){var b=j[a];c[a]=f({args:["array","array"],body:{args:["a","b"],body:"a="+b+"b"},funcName:a}),c[a+"eq"]=f({args:["array"],body:{args:["a"],body:"a="+b+"a"},rvalue:!0,count:2,funcName:a+"eq"})}}();var k={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var a in k){var b=k[a];c[a]=f({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+b+"c"},funcName:a}),c[a+"s"]=f({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+b+"s"},funcName:a+"s"}),c[a+"eq"]=f({args:["array","array"],body:{args:["a","b"],body:"a=a"+b+"b"},rvalue:!0,count:2,funcName:a+"eq"}),c[a+"seq"]=f({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+b+"s"},rvalue:!0,count:2,funcName:a+"seq"})}}();var l=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var a=0;a<l.length;++a){var b=l[a];c[b]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:b}),c[b+"eq"]=f({args:["array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"eq"})}}();var m=["max","min","atan2","pow"];!function(){for(var a=0;a<m.length;++a){var b=m[a];c[b]=f({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:b}),c[b+"s"]=f({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:b+"s"}),c[b+"eq"]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"eq"}),c[b+"seq"]=f({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"seq"})}}();var n=["atan2","pow"];!function(){for(var a=0;a<n.length;++a){var b=n[a];c[b+"op"]=f({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:b+"op"}),c[b+"ops"]=f({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:b+"ops"}),c[b+"opeq"]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"opeq"}),c[b+"opseq"]=f({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"opseq"})}}(),c.any=g({args:["array"],pre:h,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),c.all=g({args:["array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),c.sum=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),c.prod=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),c.norm2squared=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),c.norm2=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),c.norminf=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),c.norm1=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),c.sup=g({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),c.inf=g({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),c.argmin=g({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),c.argmax=g({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),c.random=f({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),c.assign=f({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),c.assigns=f({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),c.equals=g({args:["array","array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":18}],18:[function(a,b,c){arguments[4][2][0].apply(c,arguments)},{"./lib/thunk.js":20,dup:2}],19:[function(a,b,c){arguments[4][3][0].apply(c,arguments)},{dup:3,uniq:21}],20:[function(a,b,c){arguments[4][4][0].apply(c,arguments)},{"./compile.js":19,dup:4}],21:[function(a,b,c){arguments[4][5][0].apply(c,arguments)},{dup:5}],22:[function(a,b,c){function d(a,b){return a[0]-b[0]}function e(){var a,b=this.stride,c=new Array(b.length);for(a=0;a<c.length;++a)c[a]=[Math.abs(b[a]),a];c.sort(d);var e=new Array(c.length);for(a=0;a<e.length;++a)e[a]=c[a][1];return e}function f(a,b){var c=["View",b,"d",a].join("");0>b&&(c="View_Nil"+a);var d="generic"===a;if(-1===b){var f="function "+c+"(a){this.data=a;};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+c+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+c+"(a){return new "+c+"(a);}",g=new Function(f);return g()}if(0===b){var f="function "+c+"(a,d) {this.data = a;this.offset = d};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+c+"_copy() {return new "+c+"(this.data,this.offset)};proto.pick=function "+c+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+c+"_get(){return "+(d?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+c+"_set(v){return "+(d?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+c+"(a,b,c,d){return new "+c+"(a,d)}",g=new Function("TrivialArray",f);return g(l[a][0])}var f=["'use strict'"],h=i(b),j=h.map(function(a){return"i"+a}),k="this.offset+"+h.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),m=h.map(function(a){return"b"+a}).join(","),n=h.map(function(a){return"c"+a}).join(",");f.push("function "+c+"(a,"+m+","+n+",d){this.data=a","this.shape=["+m+"]","this.stride=["+n+"]","this.offset=d|0}","var proto="+c+".prototype","proto.dtype='"+a+"'","proto.dimension="+b),f.push("Object.defineProperty(proto,'size',{get:function "+c+"_size(){return "+h.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})"),1===b?f.push("proto.order=[0]"):(f.push("Object.defineProperty(proto,'order',{get:"),4>b?(f.push("function "+c+"_order(){"),2===b?f.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===b&&f.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):f.push("ORDER})")),f.push("proto.set=function "+c+"_set("+j.join(",")+",v){"),d?f.push("return this.data.set("+k+",v)}"):f.push("return this.data["+k+"]=v}"),f.push("proto.get=function "+c+"_get("+j.join(",")+"){"),d?f.push("return this.data.get("+k+")}"):f.push("return this.data["+k+"]}"),f.push("proto.index=function "+c+"_index(",j.join(),"){return "+k+"}"),f.push("proto.hi=function "+c+"_hi("+j.join(",")+"){return new "+c+"(this.data,"+h.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+h.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");var o=h.map(function(a){return"a"+a+"=this.shape["+a+"]"}),p=h.map(function(a){return"c"+a+"=this.stride["+a+"]"});f.push("proto.lo=function "+c+"_lo("+j.join(",")+"){var b=this.offset,d=0,"+o.join(",")+","+p.join(","));for(var q=0;b>q;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){d=i"+q+"|0;b+=c"+q+"*d;a"+q+"-=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"c"+a}).join(",")+",b)}"),f.push("proto.step=function "+c+"_step("+j.join(",")+"){var "+h.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+h.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var q=0;b>q;++q)f.push("if(typeof i"+q+"==='number'){d=i"+q+"|0;if(d<0){c+=b"+q+"*(a"+q+"-1);a"+q+"=ceil(-a"+q+"/d)}else{a"+q+"=ceil(a"+q+"/d)}b"+q+"*=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"b"+a}).join(",")+",c)}");for(var r=new Array(b),s=new Array(b),q=0;b>q;++q)r[q]="a[i"+q+"]",s[q]="b[i"+q+"]";f.push("proto.transpose=function "+c+"_transpose("+j+"){"+j.map(function(a,b){return a+"=("+a+"===undefined?"+b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+c+"(this.data,"+r.join(",")+","+s.join(",")+",this.offset)}"),f.push("proto.pick=function "+c+"_pick("+j+"){var a=[],b=[],c=this.offset");for(var q=0;b>q;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){c=(c+this.stride["+q+"]*i"+q+")|0}else{a.push(this.shape["+q+"]);b.push(this.stride["+q+"])}");f.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),f.push("return function construct_"+c+"(data,shape,stride,offset){return new "+c+"(data,"+h.map(function(a){return"shape["+a+"]"}).join(",")+","+h.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");var g=new Function("CTOR_LIST","ORDER",f.join("\n"));return g(l[a],e)}function g(a){if(j(a))return"buffer";if(k)switch(Object.prototype.toString.call(a)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}function h(a,b,c,d){if(void 0===a){var e=l.array[0];return e([])}"number"==typeof a&&(a=[a]),void 0===b&&(b=[a.length]);var h=b.length;if(void 0===c){c=new Array(h);for(var i=h-1,j=1;i>=0;--i)c[i]=j,j*=b[i]}if(void 0===d){d=0;for(var i=0;h>i;++i)c[i]<0&&(d-=(b[i]-1)*c[i])}for(var k=g(a),m=l[k];m.length<=h+1;)m.push(f(k,m.length-1));var e=m[h+1];return e(a,b,c,d)}var i=a("iota-array"),j=a("is-buffer"),k="undefined"!=typeof Float64Array,l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};b.exports=h},{"iota-array":23,"is-buffer":24}],23:[function(a,b,c){"use strict";function d(a){for(var b=new Array(a),c=0;a>c;++c)b[c]=c;return b}b.exports=d},{}],24:[function(a,b,c){b.exports=function(a){return!(null==a||!(a._isBuffer||a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)))}},{}],25:[function(a,b,c){arguments[4][14][0].apply(c,arguments)},{dup:14}],26:[function(a,b,c){"use strict";function d(a,b,c){var e=0|a[c];if(0>=e)return[];var f,g=new Array(e);if(c===a.length-1)for(f=0;e>f;++f)g[f]=b;else for(f=0;e>f;++f)g[f]=d(a,b,c+1);return g}function e(a,b){var c,d;for(c=new Array(a),d=0;a>d;++d)c[d]=b;return c}function f(a,b){switch("undefined"==typeof b&&(b=0),typeof a){case"number":if(a>0)return e(0|a,b);break;case"object":if("number"==typeof a.length)return d(a,b,0)}return[]}b.exports=f},{}],27:[function(a,b,c){(function(b,d){"use strict";function e(a){if(a){var b=a.length||a.byteLength,c=s.log2(b);w[c].push(a)}}function f(a){e(a.buffer)}function g(a){var a=s.nextPow2(a),b=s.log2(a),c=w[b];return c.length>0?c.pop():new ArrayBuffer(a)}function h(a){return new Uint8Array(g(a),0,a)}function i(a){return new Uint16Array(g(2*a),0,a)}function j(a){return new Uint32Array(g(4*a),0,a)}function k(a){return new Int8Array(g(a),0,a)}function l(a){return new Int16Array(g(2*a),0,a)}function m(a){return new Int32Array(g(4*a),0,a)}function n(a){return new Float32Array(g(4*a),0,a)}function o(a){return new Float64Array(g(8*a),0,a)}function p(a){return u?new Uint8ClampedArray(g(a),0,a):h(a)}function q(a){return new DataView(g(a),0,a)}function r(a){a=s.nextPow2(a);var b=s.log2(a),c=x[b];return c.length>0?c.pop():new d(a)}var s=a("bit-twiddle"),t=a("dup");b.__TYPEDARRAY_POOL||(b.__TYPEDARRAY_POOL={UINT8:t([32,0]),UINT16:t([32,0]),UINT32:t([32,0]),INT8:t([32,0]),INT16:t([32,0]),INT32:t([32,0]),FLOAT:t([32,0]),DOUBLE:t([32,0]),DATA:t([32,0]),UINT8C:t([32,0]),BUFFER:t([32,0])});var u="undefined"!=typeof Uint8ClampedArray,v=b.__TYPEDARRAY_POOL;v.UINT8C||(v.UINT8C=t([32,0])),v.BUFFER||(v.BUFFER=t([32,0]));var w=v.DATA,x=v.BUFFER;c.free=function(a){if(d.isBuffer(a))x[s.log2(a.length)].push(a);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),!a)return;var b=a.length||a.byteLength,c=0|s.log2(b);w[c].push(a)}},c.freeUint8=c.freeUint16=c.freeUint32=c.freeInt8=c.freeInt16=c.freeInt32=c.freeFloat32=c.freeFloat=c.freeFloat64=c.freeDouble=c.freeUint8Clamped=c.freeDataView=f,c.freeArrayBuffer=e,c.freeBuffer=function(a){x[s.log2(a.length)].push(a)},c.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return g(a);switch(b){case"uint8":return h(a);case"uint16":return i(a);case"uint32":return j(a);case"int8":return k(a);case"int16":return l(a);case"int32":return m(a);case"float":case"float32":return n(a);case"double":case"float64":return o(a);case"uint8_clamped":return p(a);case"buffer":return r(a);case"data":case"dataview":return q(a);default:return null}return null},c.mallocArrayBuffer=g,c.mallocUint8=h,c.mallocUint16=i,c.mallocUint32=j,c.mallocInt8=k,c.mallocInt16=l,c.mallocInt32=m,c.mallocFloat32=c.mallocFloat=n,c.mallocFloat64=c.mallocDouble=o,c.mallocUint8Clamped=p,c.mallocDataView=q,c.mallocBuffer=r,c.clearCache=function(){for(var a=0;32>a;++a)v.UINT8[a].length=0,v.UINT16[a].length=0,v.UINT32[a].length=0,v.INT8[a].length=0,v.INT16[a].length=0,v.INT32[a].length=0,v.FLOAT[a].length=0,v.DOUBLE[a].length=0,v.UINT8C[a].length=0,w[a].length=0,x[a].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":25,buffer:6,dup:26}],28:[function(a,b,c){"use strict";b.exports={printThreshold:7,nFloatingValues:5}},{}],29:[function(a,b,c){"use strict";b.exports={int8:Int8Array,int16:Int16Array,int32:Int32Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,float32:Float32Array,float64:Float64Array}},{}],30:[function(a,b,c){"use strict";b.exports={ValueError:function(){var a=Error.apply(this,arguments);return a.name=this.constructor.name,a},ConfigError:function(){var a=Error.apply(this,arguments);return a.name=this.constructor.name,a},NotImplementedError:function(){var a=Error.apply(this,arguments);return a.name=this.constructor.name,a}}},{}],31:[function(a,b,c){"use strict";b.exports=function(a,b,c,d,e){var f=b-1,g=b+d-1,h=a-1,i=a+c-1;return 0!==b&&0!==a?e.selection.get(h,f)-e.selection.get(i,f)-e.selection.get(h,g)+e.selection.get(i,g):0===b&&0===a?e.selection.get(a+c-1,b+d-1):0===b?-e.selection.get(h,b+d-1)+e.selection.get(a+c-1,b+d-1):-e.selection.get(i,f)+e.selection.get(i,g);
}},{}],32:[function(a,b,c){"use strict";var d=a("./area-sum");b.exports=function(a,b,c,e,f){return d(a,b,c,e,f)/(c*e)}},{"./area-sum":31}],33:[function(a,b,c){(function(c){"use strict";function d(a){return f(e.join(g,a))}var e=a("path"),f=a("./read"),g=e.join(e.resolve(c),"../../data"),h={};Object.defineProperty(h,"digit",{get:function(){return d("five.png")}}),Object.defineProperty(h,"five",{get:function(){return d("five.png")}}),Object.defineProperty(h,"node",{get:function(){return d("nodejs.png")}}),Object.defineProperty(h,"lena",{get:function(){return d("lenna.png")}}),Object.defineProperty(h,"lenna",{get:function(){return d("lenna.png")}}),Object.defineProperty(h,"moon",{get:function(){return d("moon.jpg")}}),b.exports=h}).call(this,"/src/images")},{"./read":37,path:10}],34:[function(a,b,c){"use strict";var d=a("../ndarray");b.exports=function(a){return new d(a.selection.step(null,-1))}},{"../ndarray":47}],35:[function(a,b,c){"use strict";b.exports={data:a("./data"),read:a("./read"),save:a("./save"),resize:a("./resize"),sat:a("./sat"),ssat:a("./ssat"),sobel:a("./sobel"),scharr:a("./scharr"),areaSum:a("./area-sum"),areaValue:a("./area-value"),rgb2gray:a("./rgb2gray"),flip:a("./flip")}},{"./area-sum":31,"./area-value":32,"./data":33,"./flip":34,"./read":37,"./resize":38,"./rgb2gray":39,"./sat":40,"./save":41,"./scharr":42,"./sobel":43,"./ssat":44}],36:[function(a,b,c){"use strict";var d=a("../ndarray"),e=a("cwise/lib/wrapper")({args:["array","array","array"],pre:{body:"{this_isgray=!0}",args:[],thisVars:["this_isgray"],localVars:[]},body:{body:"{(_inline_76_arg0_!==_inline_76_arg1_||_inline_76_arg1_!==_inline_76_arg2_)&&(this_isgray=!1)}",args:[{name:"_inline_76_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_76_arg1_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_76_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_isgray"],localVars:[]},post:{body:"{return this_isgray}",args:[],thisVars:["this_isgray"],localVars:[]},debug:!1,funcName:"doCheckIsGrayscaleCwise",blockSize:64});b.exports=function(a){a instanceof d&&(a=a.selection);var b=a.shape;return 1===b.length?!1:2===b.length||3===b.length&&1===b[2]?!0:3!==b.length||3!==b[2]&&4!==b[2]?!1:e(a.pick(null,null,0),a.pick(null,null,1),a.pick(null,null,2))}},{"../ndarray":47,"cwise/lib/wrapper":1}],37:[function(a,b,c){"use strict";function d(a){var b=a.getContext("2d"),c=b.getImageData(0,0,a.width,a.height),d=[a.width,a.height,4],e=[4,4*a.width,1],h=f(new Uint8Array(c.data),d,e,0),j=h.transpose(1,0);return i(j)&&(j=j.pick(null,null,0)),new g(j)}function e(a){var b=document.createElement("canvas");b.width=a.width,b.height=a.height;var c=b.getContext("2d");c.drawImage(a,0,0);var d=c.getImageData(0,0,a.width,a.height),e=[a.width,a.height,4],h=[4,4*a.width,1],j=f(new Uint8Array(d.data),e,h,0),k=j.transpose(1,0);return i(k)&&(k=k.pick(null,null,0)),new g(k)}var f=a("ndarray"),g=a("../ndarray"),h=a("../errors"),i=(a("./utils"),a("./is-grayscale"));b.exports=function(a){if(a instanceof HTMLCanvasElement)return d(a);if(a instanceof HTMLImageElement)return e(a);throw new h.ValueError("expect input to be either an HTML Canvas or a (loaded) Image")}},{"../errors":30,"../ndarray":47,"./is-grayscale":36,"./utils":45,ndarray:22}],38:[function(a,b,c){"use strict";var d=a("./utils"),e=a("ndarray"),f=a("../ndarray");b.exports=function(a,b,c){var g=a.shape,h=g[0],i=g[1],j=g[2]||1,k=document.createElement("canvas");k.height=h,k.width=i;var l=k.getContext("2d"),m=l.createImageData(i,h),n=d.setRawData(a.selection,m.data);if(n)throw n;var o=h/b,p=i/c,q=Math.min(o,p),r=b*q,s=c*q,t=(h-q*b)/2,u=(i-q*c)/2;l.putImageData(m,0,0),l.drawImage(k,u,t,s,r,0,0,c,b);var v=l.getImageData(0,0,c,b),w=[0|c,0|b,4],x=[4,4*c|0,1],y=e(new Uint8Array(v.data),w,x,0),z=y.transpose(1,0);return 2===g.length?z=z.pick(null,null,0):3===g.length&&1===j&&(z=z.pick(null,null,0)),new f(z)}},{"../ndarray":47,"./utils":45,ndarray:22}],39:[function(a,b,c){"use strict";var d=a("../ndarray"),e=a("../utils"),f=a("cwise/lib/wrapper")({args:["array","array","array","array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_73_arg0_=4899*_inline_73_arg1_+9617*_inline_73_arg2_+1868*_inline_73_arg3_+8192>>14}",args:[{name:"_inline_73_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_73_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_73_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_73_arg3_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"rgb2grayCwise",blockSize:64});b.exports=function(a){a instanceof d||(a=new d(a));var b=a.shape,c=b[0],g=b[1],h=b[2]||1;if(1===h)return a;var i=[c,g],j=new d(new Uint8Array(e.shapeSize(i)),i),k=a.selection.pick(null,null,0),l=a.selection.pick(null,null,1),m=a.selection.pick(null,null,2);return f(j.selection,k,l,m),j}},{"../ndarray":47,"../utils":48,"cwise/lib/wrapper":1}],40:[function(a,b,c){"use strict";var d=a("../ndarray"),e=a("./rgb2gray"),f=a("cwise/lib/wrapper")({args:["array","array","index",{offset:[-1,-1],array:0},{offset:[-1,0],array:0},{offset:[0,-1],array:0}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_61_arg0_=0!==_inline_61_arg2_[0]&&0!==_inline_61_arg2_[1]?_inline_61_arg1_+_inline_61_arg4_+_inline_61_arg5_-_inline_61_arg3_:0===_inline_61_arg2_[0]&&0===_inline_61_arg2_[1]?_inline_61_arg1_:0===_inline_61_arg2_[0]?_inline_61_arg1_+_inline_61_arg5_:_inline_61_arg1_+_inline_61_arg4_}",args:[{name:"_inline_61_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_61_arg1_",lvalue:!1,rvalue:!0,count:4},{name:"_inline_61_arg2_",lvalue:!1,rvalue:!0,count:5},{name:"_inline_61_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg4_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_61_arg5_",lvalue:!1,rvalue:!0,count:2}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"doIntegrateBody",blockSize:64});b.exports=function(a){var b=e(a),c=b.shape,g=c[0],h=c[1],i=new d(new Uint32Array(g*h),[g,h]);return f(i.selection,b.selection),i}},{"../ndarray":47,"./rgb2gray":39,"cwise/lib/wrapper":1}],41:[function(a,b,c){"use strict";var d=a("./utils"),e=(a("../ndarray"),a("../errors"));b.exports=function(a,b){var c=a.shape,f=c[0],g=c[1];if(!(b instanceof HTMLCanvasElement))throw new e.ValueError("expect input to be either an HTML Canvas or a (loaded) Image");var h=document.createElement("canvas");h.height=f,h.width=g;var i=h.getContext("2d"),j=i.createImageData(g,f),k=d.setRawData(a.selection,j.data);if(k)throw k;i.putImageData(j,0,0),i.drawImage(h,g,f),b.getContext("2d").drawImage(h,0,0,g,f,0,0,b.width,b.height)}},{"../errors":30,"../ndarray":47,"./utils":45}],42:[function(a,b,c){"use strict";var d=a("ndarray-ops"),e=a("../ndarray"),f=a("../utils"),g=a("./rgb2gray"),h=a("cwise/lib/wrapper")({args:["array","array",{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_70_q=3*_inline_70_arg2_+10*_inline_70_arg3_+3*_inline_70_arg4_-3*_inline_70_arg7_-10*_inline_70_arg8_-3*_inline_70_arg9_,_inline_70_s=3*_inline_70_arg2_-3*_inline_70_arg4_+10*_inline_70_arg5_-10*_inline_70_arg6_+3*_inline_70_arg7_-3*_inline_70_arg9_;_inline_70_arg0_=Math.sqrt(_inline_70_s*_inline_70_s+_inline_70_q*_inline_70_q)}",args:[{name:"_inline_70_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_70_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_70_arg2_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_70_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_70_arg4_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_70_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_70_arg6_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_70_arg7_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_70_arg8_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_70_arg9_",lvalue:!1,rvalue:!0,count:2}],thisVars:[],localVars:["_inline_70_q","_inline_70_s"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"doSobelBody",blockSize:64});b.exports=function(a){var b=g(a),c=b.shape,i=c[0],j=c[1],k=new e(new Float32Array(f.shapeSize(c)),c);return h(k.selection,b.selection),d.assigns(k.selection.pick(0,null),0),d.assigns(k.selection.pick(null,0),0),d.assigns(k.selection.pick(i-1,null),0),d.assigns(k.selection.pick(null,j-1),0),k.divide(16*Math.sqrt(2),!1)}},{"../ndarray":47,"../utils":48,"./rgb2gray":39,"cwise/lib/wrapper":1,"ndarray-ops":17}],43:[function(a,b,c){"use strict";var d=a("ndarray-ops"),e=a("../ndarray"),f=a("../utils"),g=a("./rgb2gray"),h=a("cwise/lib/wrapper")({args:["array","array",{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_67_q=_inline_67_arg2_+2*_inline_67_arg3_+_inline_67_arg4_-_inline_67_arg7_-2*_inline_67_arg8_-_inline_67_arg9_,_inline_67_s=_inline_67_arg2_-_inline_67_arg4_+2*_inline_67_arg5_-2*_inline_67_arg6_+_inline_67_arg7_-_inline_67_arg9_;_inline_67_arg0_=Math.sqrt(_inline_67_s*_inline_67_s+_inline_67_q*_inline_67_q)}",args:[{name:"_inline_67_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_67_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_67_arg2_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_67_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_67_arg4_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_67_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_67_arg6_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_67_arg7_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_67_arg8_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_67_arg9_",lvalue:!1,rvalue:!0,count:2}],thisVars:[],localVars:["_inline_67_q","_inline_67_s"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"doSobelBody",blockSize:64});b.exports=function(a){var b=g(a),c=b.shape,i=c[0],j=c[1],k=new e(new Float32Array(f.shapeSize(c)),c);return h(k.selection,b.selection),d.assigns(k.selection.pick(0,null),0),d.assigns(k.selection.pick(null,0),0),d.assigns(k.selection.pick(i-1,null),0),d.assigns(k.selection.pick(null,j-1),0),k.divide(4*Math.sqrt(2),!1)}},{"../ndarray":47,"../utils":48,"./rgb2gray":39,"cwise/lib/wrapper":1,"ndarray-ops":17}],44:[function(a,b,c){"use strict";var d=a("../ndarray"),e=a("./rgb2gray"),f=a("cwise/lib/wrapper")({args:["array","array","index",{offset:[-1,-1],array:0},{offset:[-1,0],array:0},{offset:[0,-1],array:0}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_64_arg0_=0!==_inline_64_arg2_[0]&&0!==_inline_64_arg2_[1]?_inline_64_arg1_*_inline_64_arg1_+_inline_64_arg4_+_inline_64_arg5_-_inline_64_arg3_:0===_inline_64_arg2_[0]&&0===_inline_64_arg2_[1]?_inline_64_arg1_*_inline_64_arg1_:0===_inline_64_arg2_[0]?_inline_64_arg1_*_inline_64_arg1_+_inline_64_arg5_:_inline_64_arg1_*_inline_64_arg1_+_inline_64_arg4_}",args:[{name:"_inline_64_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_64_arg1_",lvalue:!1,rvalue:!0,count:8},{name:"_inline_64_arg2_",lvalue:!1,rvalue:!0,count:5},{name:"_inline_64_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_64_arg4_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_64_arg5_",lvalue:!1,rvalue:!0,count:2}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"doIntegrateBody",blockSize:64});b.exports=function(a){var b=e(a),c=b.shape,g=c[0],h=c[1],i=new d(new Uint32Array(g*h),[g,h]);return f(i.selection,b.selection),i}},{"../ndarray":47,"./rgb2gray":39,"cwise/lib/wrapper":1}],45:[function(a,b,c){"use strict";var d=a("../ndarray");b.exports.getRawData=function(a){a instanceof d&&(a=a.selection);var b,c,e=0,f=a.shape,g=f[0],h=f[1],i=f[2]||1,j=new Uint8Array(g*h*i);if(3===a.shape.length)if(3===i)for(b=0;g>b;++b)for(c=0;h>c;++c)j[e++]=a.get(b,c,0),j[e++]=a.get(b,c,1),j[e++]=a.get(b,c,2);else if(4===i)for(b=0;g>b;++b)for(c=0;h>c;++c)j[e++]=a.get(b,c,0),j[e++]=a.get(b,c,1),j[e++]=a.get(b,c,2),j[e++]=a.get(b,c,3);else{if(1!==i)return new Error("Incompatible array shape");for(b=0;g>b;++b)for(c=0;h>c;++c)j[e++]=a.get(b,c,0)}else{if(2!==a.shape.length)return new Error("Invalid image");for(b=0;g>b;++b)for(c=0;h>c;++c)j[e++]=a.get(b,c)}return j},b.exports.setRawData=function(a,b){var c,d,e,f=0,g=a.shape[0],h=a.shape[1],i=a.shape[2]||1;if(3===a.shape.length)if(3===i)for(c=0;g>c;++c)for(d=0;h>d;++d)b[f++]=a.get(c,d,0),b[f++]=a.get(c,d,1),b[f++]=a.get(c,d,2),b[f++]=255;else if(4===i)for(c=0;g>c;++c)for(d=0;h>d;++d)b[f++]=a.get(c,d,0),b[f++]=a.get(c,d,1),b[f++]=a.get(c,d,2),b[f++]=a.get(c,d,3);else{if(1!==i)return new Error("Incompatible array shape");for(c=0;g>c;++c)for(d=0;h>d;++d)e=a.get(c,d,0),b[f++]=e,b[f++]=e,b[f++]=e,b[f++]=255}else{if(2!==a.shape.length)return new Error("Invalid image");for(c=0;g>c;++c)for(d=0;h>d;++d)e=a.get(c,d),b[f++]=e,b[f++]=e,b[f++]=e,b[f++]=255}}},{"../ndarray":47}],46:[function(a,b,c){"use strict";function d(a,b){if(0!==a.length&&0!==b.length){for(var c=a.slice().reverse(),d=b.slice().reverse(),e=Math.max(a.length,b.length),f=new Array(e),g=0;e>g;g++)if(c[g]&&1!==c[g])if(d[g]&&1!==d[g]){if(c[g]!==d[g])return;f[g]=c[g]}else f[g]=c[g];else f[g]=d[g];return f.reverse()}}function e(a,b){return Y["new"](a).add(b)}function f(a,b){return Y["new"](a).multiply(b)}function g(a,b){return Y["new"](a).divide(b)}function h(a,b){return Y["new"](a).subtract(b)}function i(a,b){return Y["new"](a).equal(b)}function j(a){return Y["new"](a).flatten()}function k(a,b){return Y["new"](a).reshape(b)}function l(a){return Y["new"](a).exp()}function m(a){return Y["new"](a).sqrt()}function n(a,b){return Y["new"](a).pow(b)}function o(a){return Y["new"](a).sum()}function p(a){return Y["new"](a).mean()}function q(a){return Y["new"](a).std()}function r(a){return Y["new"](a).min()}function s(a){return Y["new"](a).max()}function t(a,b){return Y["new"](a).transpose(b)}function u(a){return Y["new"](a).negative()}function v(a,b,c,d){1===arguments.length?(b=a,a=0,c=1):2===arguments.length&&Z.isNumber(b)?c=1:2===arguments.length?(d=b,b=a,a=0,c=1):3!==arguments.length||Z.isNumber(c)||(d=c,c=1);for(var e=[],f=0;b>a;)e[f++]=a,a+=c;return Y["new"](e,d)}function w(a,b){Z.isNumber(a)&&a>=0&&(a=[a]);var c=Z.shapeSize(a),d=Z.getType(b),e=new Y(new d(c),a);return T.assigns(e.selection,0),e}function x(a,b){Z.isNumber(a)&&a>=0&&(a=[a]);var c=Z.shapeSize(a),d=Z.getType(b),e=new Y(new d(c),a);return T.assigns(e.selection,1),e}function y(a){if(0===arguments.length)return Y["new"](Math.random());a=1===arguments.length?Z.isNumber(a)?[0|a]:a:arguments;var b=Z.shapeSize(a),c=new Y(new Array(b),a);return T.random(c.selection),c}function z(a){var b=Y["new"](a).exp(),c=b.sum();return T.divseq(b.selection,c),b}function A(a,b){return a=Y["new"](a).clone(),b=b||1,_(a.selection,b),a}function B(a,b,c){1===arguments.length?(b=0,c=1):2===arguments.length&&(c=1);var d=a instanceof Y?a.clone():Y["new"](a);return aa(d.selection,b,c),d}function C(a,b){b=b||.001;var c=a instanceof Y?a.clone():Y["new"](a);return ba(c.selection,b),c}function D(a){var b=a instanceof Y?a.clone():Y["new"](a);return ca(b.selection),b}function E(a){var b=a instanceof Y?a.clone():Y["new"](a);return T.abseq(b.selection),b}function F(a){var b=a instanceof Y?a.clone():Y["new"](a);return T.coseq(b.selection),b}function G(a){var b=a instanceof Y?a.clone():Y["new"](a);return T.acoseq(b.selection),b}function H(a){var b=a instanceof Y?a.clone():Y["new"](a);return T.sineq(b.selection),b}function I(a){var b=a instanceof Y?a.clone():Y["new"](a);return T.asineq(b.selection),b}function J(a){var b=a instanceof Y?a.clone():Y["new"](a);return T.taneq(b.selection),b}function K(a){var b=a instanceof Y?a.clone():Y["new"](a);return T.ataneq(b.selection),b}function L(a,b){a=Y["new"](a),b=Y["new"](b);var c,d,e=a.shape,f=b.shape,g=Z.getType(a.dtype);if(2===e.length&&2===f.length&&e[1]===f[0])return c=[e[0],f[1]],d=new Y(new g(Z.shapeSize(c)),c),U(d.selection,a.selection,b.selection),d;if(1===e.length&&2===f.length&&e[0]===f[0])return L(a.reshape([e[0],1]).transpose(),b).reshape(f[1]);if(2===e.length&&1===f.length&&e[1]===f[0])return L(a,b.reshape([f[0],1])).reshape(e[0]);if(1===e.length&&1===f.length&&e[0]===f[0])return L(a.reshape([e[0],1]).transpose(),b.reshape([f[0],1])).reshape([1]);throw new $.ValueError("cannot compute the matrix product of given arrays")}function M(a){arguments.length>1&&(a=[].slice.call(arguments));var b,c;for(b=0;b<a.length;b++)c=a[b],a[b]=c instanceof Y?c.tolist():Z.isNumber(c)?[c]:c;var d=a[0];for(b=1;b<a.length;b++){c=a[b];var e=Z.getShape(d),f=Z.getShape(c);if(e.length!==f.length)throw new $.ValueError("all the input arrays must have same number of dimensions");if(1===e.length&&1===f.length)d=d.concat(c);else if(2===e.length&&2===f.length&&e[0]===f[0]||1===e.length&&2===f.length&&e[0]===f[0]||2===e.length&&1===f.length&&e[0]===f[0])for(var g=0;g<e[0];g++)d[g]=d[g].concat(c[g]);else{if(!(3===e.length&&3===f.length&&e[0]===f[0]&&e[1]===f[1]||2===e.length&&3===f.length&&e[0]===f[0]&&e[1]===f[1]||3===e.length&&2===f.length&&e[0]===f[0]&&e[1]===f[1]))throw new $.ValueError('cannot concatenate  "'+e+'" with "'+f+'"');for(var h=0;h<e[0];h++){for(var i=new Array(e[1]),j=0;j<e[1];j++)i[j]=d[h][j].concat(c[h][j]);d[h]=i}}}return Y["new"](d,a[0].dtype)}function N(a){return Y["new"](a).round()}function O(a,b){return Y["new"](a).convolve(b)}function P(a,b){return Y["new"](a).fftconvolve(b)}function Q(a){a=a instanceof Y?a.clone():Y["new"](a);var b=a.shape,c=b.length;if(2!==b[c-1])throw new $.ValueError("expect last dimension of the array to have 2 values (for both real and imaginary part)");var d=new Array(c),e=new Array(c);return d[c-1]=0,e[c-1]=1,V(1,a.selection.pick.apply(a.selection,d),a.selection.pick.apply(a.selection,e)),a}function R(a){a=a instanceof Y?a.clone():Y["new"](a);var b=a.shape,c=b.length;if(2!==b[c-1])throw new $.ValueError("expect last dimension of the array to have 2 values (for both real and imaginary part)");var d=new Array(c),e=new Array(c);return d[c-1]=0,e[c-1]=1,V(-1,a.selection.pick.apply(a.selection,d),a.selection.pick.apply(a.selection,e)),a}var S=a("ndarray"),T=a("ndarray-ops"),U=a("ndarray-gemm"),V=a("ndarray-fft"),W=a("./config"),X=a("./dtypes"),Y=a("./ndarray"),Z=a("./utils"),$=a("./errors"),_=a("cwise/lib/wrapper")({args:["array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_40_arg0_=-30>_inline_40_arg0_?0:_inline_40_arg0_>30?1:1/(1+Math.exp(-1*_inline_40_arg1_*_inline_40_arg0_))}",args:[{name:"_inline_40_arg0_",lvalue:!0,rvalue:!0,count:4},{name:"_inline_40_arg1_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"sigmoidCwise",blockSize:64}),aa=a("cwise/lib/wrapper")({args:["array","scalar","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_43_arg0_=Math.min(Math.max(_inline_43_arg1_,_inline_43_arg0_),_inline_43_arg2_)}",args:[{name:"_inline_43_arg0_",lvalue:!0,rvalue:!0,count:2},{name:"_inline_43_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_43_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"clipCwise",blockSize:64}),ba=a("cwise/lib/wrapper")({args:["array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_46_arg0_=Math.max(_inline_46_arg1_*_inline_46_arg0_,_inline_46_arg0_)}",args:[{name:"_inline_46_arg0_",lvalue:!0,rvalue:!0,count:3},{name:"_inline_46_arg1_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"leakyReluCwise",blockSize:64}),ca=a("cwise/lib/wrapper")({args:["array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_49_arg0_=(Math.exp(2*_inline_49_arg0_)-1)/(Math.exp(2*_inline_49_arg0_)+1)}",args:[{name:"_inline_49_arg0_",lvalue:!0,rvalue:!0,count:3}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"tanhCwise",blockSize:64});b.exports={config:W,dtypes:X,NdArray:Y,ndarray:S,array:Y["new"],arange:v,reshape:k,zeros:w,ones:x,flatten:j,random:y,softmax:z,sigmoid:A,leakyRelu:C,abs:E,arccos:G,arcsin:I,arctan:K,cos:F,sin:H,tan:J,tanh:D,clip:B,exp:l,sqrt:m,power:n,sum:o,mean:p,std:q,dot:L,add:e,subtract:h,multiply:f,divide:g,negative:u,equal:i,max:s,min:r,concatenate:M,transpose:t,errors:$,broadcast:d,round:N,convolve:O,fftconvolve:P,fft:Q,ifft:R,int8:function(a){return Y["new"](a,X.int8)},uint8:function(a){return Y["new"](a,X.uint8)},int16:function(a){return Y["new"](a,X.int16)},uint16:function(a){return Y["new"](a,X.uint16)},int32:function(a){return Y["new"](a,X.int32)},uint32:function(a){return Y["new"](a,X.uint32)},float32:function(a){return Y["new"](a,X.float32)},float64:function(a){return Y["new"](a,X.float64)},images:a("./images")}},{"./config":28,"./dtypes":29,"./errors":30,"./images":35,"./ndarray":47,"./utils":48,"cwise/lib/wrapper":1,ndarray:22,"ndarray-fft":12,"ndarray-gemm":15,"ndarray-ops":17}],47:[function(a,b,c){"use strict";function d(a,b){if(a instanceof o)return a;var c=n.getType(b);if(n.isNumber(a))return c!==Array?new o(new c([a]),[1]):new o([a],[1]);var d=n.getShape(a);return d.length>1&&(a=n.flatten(a,!0)),a instanceof c||(a=new c(a)),new o(a,d)}function e(a,b){b=b||0;var c=0|a[b];if(0>=c)return[];var d,f=new Array(c);if(b===a.length-1)for(d=0;c>d;++d)f[d]=0;else for(d=0;c>d;++d)f[d]=e(a,b+1);return f}function f(a){var b=e(a.shape,0);return r(a,b),b}function g(a){return String(Number((a||0).toFixed(l.nFloatingValues)))}var h=a("ndarray"),i=a("ndarray-ops"),j=(a("ndarray-gemm"),a("ndarray-fft")),k=a("typedarray-pool"),l=a("./config"),m=a("./errors"),n=a("./utils"),o=function(){if(1===arguments.length)this.selection=arguments[0];else{if(0===arguments.length)throw new m.ValueError("Required argument 'data' not found");this.selection=h.apply(null,arguments)}Object.defineProperty(this,"size",{get:function(){return this.selection.size}.bind(this)}),Object.defineProperty(this,"shape",{get:function(){return this.selection.shape}.bind(this)}),Object.defineProperty(this,"ndim",{get:function(){return this.selection.shape.length}.bind(this)}),Object.defineProperty(this,"dtype",{get:function(){return this.selection.dtype}.bind(this),set:function(a){var b=n.getType(a);this.selection=h(new b(this.selection.data),this.selection.shape,this.selection.stride,this.selection.offset)}.bind(this)}),Object.defineProperty(this,"T",{get:function(){return this.transpose()}.bind(this)})};o.prototype.get=function(){return this.selection.get.apply(this.selection,arguments)},o.prototype.set=function(){return this.selection.set.apply(this.selection,arguments)},o.prototype.pick=function(a){return new o(this.selection.pick.apply(this.selection,arguments))},o.prototype.lo=function(){return new o(this.selection.lo.apply(this.selection,arguments))},o.prototype.hi=function(){return new o(this.selection.hi.apply(this.selection,arguments))},o.prototype.step=function(){return new o(this.selection.step.apply(this.selection,arguments))},o.prototype.flatten=function(){if(1===this.shape.length)return new o(this.selection);var a=n.getType(this.dtype),b=n.flatten(this.tolist(),!0);return b instanceof a||(b=new a(b)),new o(b,[this.size])},o.prototype.reshape=function(a){if(0===arguments.length)throw new m.ValueError("function takes at least one argument (0 given)");if(1===arguments.length&&n.isNumber(a)&&(a=[a]),arguments.length>1&&(a=arguments),this.size!==n.shapeSize(a))throw new m.ValueError("total size of new array must be unchanged");var b,c,d,e,f=this.selection.shape,g=this.selection.offset,h=this.selection.stride,i=f.length,j=a.length;if(i===j){var k=!0;for(d=0;j>d;++d)if(f[d]!==a[d]){k=!1;break}if(k)return new o(this.selection.data,f,h,g)}else if(1===i){for(b=new Array(j),d=j-1,e=1;d>=0;--d)b[d]=e,e*=a[d];for(c=g,d=0;j>d;++d)b[d]<0&&(c-=(a[d]-1)*b[d]);return new o(this.selection.data,a,b,c)}var l=Math.min(i,j),p=!0;for(d=0;l>d;d++)if(f[d]!==a[d]){p=!1;break}if(p){for(b=new Array(j),d=0;j>d;d++)b[d]=h[d]||1;return c=g,new o(this.selection.data,a,b,c)}return this.flatten().reshape(a)},o.prototype.transpose=function(a){if(0===arguments.length){var b=this.ndim;a=new Array(b);for(var c=0;b>c;c++)a[c]=b-c-1}else arguments.length>1&&(a=arguments);return new o(this.selection.transpose.apply(this.selection,a))},o.prototype.add=function(a,b){1===arguments.length&&(b=!0);var c=b?this.clone():this;return n.isNumber(a)?(i.addseq(c.selection,a),c):(a=d(a,this.dtype),i.addeq(c.selection,a.selection),c)},o.prototype.subtract=function(a,b){1===arguments.length&&(b=!0);var c=b?this.clone():this;return n.isNumber(a)?(i.subseq(c.selection,a),c):(a=d(a,this.dtype),i.subeq(c.selection,a.selection),c)},o.prototype.multiply=function(a,b){1===arguments.length&&(b=!0);var c=b?this.clone():this;return n.isNumber(a)?(i.mulseq(c.selection,a),c):(a=d(a,this.dtype),i.muleq(c.selection,a.selection),c)},o.prototype.divide=function(a,b){1===arguments.length&&(b=!0);var c=b?this.clone():this;return n.isNumber(a)?(i.divseq(c.selection,a),c):(a=d(a,this.dtype),i.diveq(c.selection,a.selection),c)},o.prototype.pow=function(a,b){1===arguments.length&&(b=!0);var c=b?this.clone():this;return n.isNumber(a)?(i.powseq(c.selection,a),c):(a=d(a,this.dtype),i.poweq(c.selection,a.selection),c)},o.prototype.exp=function(a){0===arguments.length&&(a=!0);var b=a?this.clone():this;return i.expeq(b.selection),b},o.prototype.sqrt=function(a){0===arguments.length&&(a=!0);var b=a?this.clone():this;return i.sqrteq(b.selection),b},o.prototype.max=function(){return 0===this.selection.size?null:i.sup(this.selection)},o.prototype.min=function(){return 0===this.selection.size?null:i.inf(this.selection)},o.prototype.sum=function(){return i.sum(this.selection)},o.prototype.std=function(){var a=this.clone();i.powseq(a.selection,2);var b=this.mean(),c=Math.abs(i.sum(a.selection)/n.shapeSize(this.shape)-b*b);return c>0?Math.sqrt(c):0},o.prototype.mean=function(){return i.sum(this.selection)/n.shapeSize(this.shape)},o.prototype.tolist=function(){return f(this.selection)},o.prototype.valueOf=function(){return this.tolist()},o.prototype.toString=function(){function a(c,d){if(n.isString(d))return d;if(n.isNumber(d)){var e=g(d);return new Array(Math.max(0,b-e.length+2)).join(" ")+e}c=c||0;var f,h=l.printThreshold,i=h/2|0;return f=d.length>h?[].concat(d.slice(0,i),[" ..."],d.slice(d.length-i)):d,new Array(c+1).join(" ")+"["+f.map(function(b,d){return a(0===d&&0===c?1:c+1,b)}).join(",")+"]"}var b=g(this.max()).length,c=/\]\,(\s*)\[/g,d="],\n$1      [",e=/\]\,(\s+)...\,(\s+)\[/g,f="],\n$2       ...\n$2      [",h=/\[\s+\[/g,i="[[",j=JSON.stringify(this.tolist(),a).replace(c,d).replace(h,i).replace(h,i).replace(e,f).slice(2,-1);switch(this.dtype){case"array":return"array(["+j+")";default:return"array(["+j+", dtype="+this.dtype+")"}},o.prototype.inspect=o.prototype.toString,o.prototype.toJSON=function(){return JSON.stringify(this.tolist())},o.prototype.clone=function(){var a=this.selection;return new o(h(a.data.slice(),a.shape,a.stride,a.offset))},o.prototype.equal=function(a){if(a=d(a),this.size!==a.size||this.ndim!==a.ndim)return!1;for(var b=this.ndim,c=0;b>c;c++)if(this.shape[c]!==a.shape[c])return!1;return i.all(i.eqeq(this.selection,a.selection))},o.prototype.round=function(a){0===arguments.length&&(a=!0);var b=a?this.clone():this;return i.roundeq(b.selection),b},o.prototype.negative=function(){var a=this.clone();return i.neg(a.selection,this.selection),a},o.prototype.iteraxis=function(a,b){var c=this.shape;if(-1===a&&(a=c.length-1),0>a||a>c.length-1)throw new m.ValueError("invalid axis");for(var e=0;e<c[a];e++){for(var g=new Array(a+1),h=0;a+1>h;h++)g[h]=h===a?e:null;var i=this.selection.pick.apply(this.selection,g),j=d(f(i),this.dtype);b(j,e)}};var p=a("cwise/lib/wrapper")({args:["array","array","array","array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_52_c=_inline_52_arg2_,_inline_52_f=_inline_52_arg3_,_inline_52_i=_inline_52_arg0_,_inline_52_o=_inline_52_arg1_,_inline_52_t=_inline_52_i*(_inline_52_c+_inline_52_f);_inline_52_arg0_=_inline_52_t-_inline_52_f*(_inline_52_i+_inline_52_o),_inline_52_arg1_=_inline_52_t+_inline_52_c*(_inline_52_o-_inline_52_i)}",args:[{name:"_inline_52_arg0_",lvalue:!0,rvalue:!0,count:2},{name:"_inline_52_arg1_",lvalue:!0,rvalue:!0,count:2},{name:"_inline_52_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_52_arg3_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_52_c","_inline_52_f","_inline_52_i","_inline_52_o","_inline_52_t"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64}),q=a("cwise/lib/wrapper")({args:["array","array"],pre:{body:"{this_sum=0}",args:[],thisVars:["this_sum"],localVars:[]},body:{body:"{this_sum+=_inline_55_arg0_*_inline_55_arg1_}",args:[{name:"_inline_55_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_55_arg1_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_sum"],localVars:[]},post:{body:"{return this_sum}",args:[],thisVars:["this_sum"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});o.prototype.convolve=function(a){a=o["new"](a);var b=this.ndim;if(b!==a.ndim)throw new m.ValueError("arrays must have the same dimensions");var c,d,e,f=new Array(b),g=new Array(b),h=this.selection,i=this.shape,j=a.selection,k=a.shape;for(c=0;b>c;c++){var l=i[c]-k[c]+1;if(0>=l)throw new m.ValueError("filter must be smoller than the array");f[c]=l,g[c]=-1}j=j.step.apply(j,g);var p=new o(new Float32Array(n.shapeSize(f)),f),r=p.selection;if(1===this.ndim)for(c=0;c<f[0];c++)r.set(c,q(h.lo(c).hi(k[0]),j));else if(2===this.ndim)for(c=0;c<f[0];c++)for(d=0;d<f[1];d++)r.set(c,d,q(h.lo(c,d).hi(k[0],k[1]),j));else{if(3!==this.ndim)throw new m.NotImplementedError;for(c=0;c<f[0];c++)for(d=0;d<f[1];d++)for(e=0;e<f[2];e++)r.set(c,d,e,q(h.lo(c,d,e).hi(k[0],k[1],k[2]),j))}return p},o.prototype.fftconvolve=function(a){if(a=o["new"](a),this.ndim!==a.ndim)throw new m.ValueError("arrays must have the same dimensions");var b,c=this.selection,d=a.selection,e=this.ndim,f=1,g=new Array(e),l=new Array(e),q=new Array(e);for(b=e-1;b>=0;--b)l[b]=c.shape[b],g[b]=f,f*=l[b],q[b]=c.shape[b]-d.shape[b]+1;var r=n.getType(c.dtype),s=new o(new r(n.shapeSize(q)),q),t=s.selection,u=k.mallocDouble(f),v=h(u,l,g,0);i.assigns(v,0),i.assign(v.hi.apply(v,c.shape),c);var w=k.mallocDouble(f),x=h(w,l,g,0);i.assigns(x,0),j(1,v,x);var y=k.mallocDouble(f),z=h(y,l,g,0);i.assigns(z,0),i.assign(z.hi.apply(z,d.shape),d);var A=k.mallocDouble(f),B=h(A,l,g,0);i.assigns(B,0),j(1,z,B),p(v,x,z,B),j(-1,v,x);var C=new Array(e),D=new Array(e),E=!1;for(b=0;e>b;++b)t.shape[b]>l[b]&&(E=!0),D[b]=+d.shape[b]-1,C[b]=Math.min(t.shape[b],l[b]-D[b]);var F;return E&&i.assign(t,0),F=v.lo.apply(v,D),F=F.hi.apply(F,C),i.assign(t.hi.apply(t,C),F),k.freeDouble(u),k.freeDouble(w),k.freeDouble(y),k.freeDouble(A),s},o["new"]=d,b.exports=o;var r=a("cwise/lib/wrapper")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_58_a,_inline_58_e=_inline_58_arg1_;for(_inline_58_a=0;_inline_58_a<_inline_58_arg2_.length-1;++_inline_58_a)_inline_58_e=_inline_58_e[_inline_58_arg2_[_inline_58_a]];_inline_58_e[_inline_58_arg2_[_inline_58_arg2_.length-1]]=_inline_58_arg0_}",args:[{name:"_inline_58_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_58_a","_inline_58_e"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"unpackCwise",blockSize:64})},{"./config":28,"./errors":30,"./utils":48,"cwise/lib/wrapper":1,ndarray:22,"ndarray-fft":12,"ndarray-gemm":15,"ndarray-ops":17,"typedarray-pool":27}],48:[function(a,b,c){"use strict";function d(a){return"number"==typeof a}function e(a){return"string"==typeof a}function f(a){return"function"==typeof a}function g(a,b,c){
c=c||[];for(var e=-1,f=a.length;++e<f;){var h=a[e];d(h)?c[c.length]=h:b?g(h,b,c):c.push(h)}return c}function h(a){for(var b=1,c=0;c<a.length;c++)b*=a[c];return b}function i(a){return f(a)?a:l[a]||Array}function j(a){for(var b=[];"object"==typeof a;)b.push(a.length),a=a[0];return b}function k(a){var b,c;return"object"==typeof a?(b=a[0],"object"==typeof b?(c=b[0],"object"==typeof c?j(a):[a.length,b.length]):[a.length]):[]}var l=a("./dtypes");b.exports={isNumber:d,isString:e,isFunction:f,flatten:g,shapeSize:h,getType:i,getShape:k}},{"./dtypes":29}]},{},[46])(46)});