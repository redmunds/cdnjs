!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.PullToRefresh=n()}(this,function(){function e(e,n){var t=10;do{if(!e||!e.tagName||!t)return null;if(e.tagName&&e.tagName===n.toUpperCase())return e;if("#"===n.charAt()&&e.id===n.substr(1))return e;if("."===n.charAt()&&e.classList.contains(n.substr(1)))return e;t-=1,e=e.parentNode}while(e.parentNode)}function n(){var e=l.classPrefix,n=l.ptrElement,t=l.iconArrow,r=l.iconRefreshing,i=l.instructionsRefreshing,s=l.instructionsPullToRefresh,o=l.instructionsReleaseToRefresh,a=n.querySelector("."+e+"icon"),c=n.querySelector("."+e+"text");"refreshing"===p?a.innerHTML=r:a.innerHTML=t,"releasing"===p&&(c.innerHTML=o),"pulling"!==p&&"pending"!==p||(c.innerHTML=s),"refreshing"===p&&(c.innerHTML=i)}function t(){function t(){var e=l.cssProp,n=l.ptrElement;n.classList.remove(r+"refresh"),n.style[e]="0px",p="pending"}var r=l.classPrefix;window.addEventListener("touchstart",function(t){var r=l.triggerElement;"pending"===p&&(clearTimeout(i),window.scrollY||(c=t.touches[0].screenY),g=e(t.target,r),p="pending",n())}),window.addEventListener("touchmove",function(e){var t=l.ptrElement,i=l.resistanceFunction,s=l.distMax,o=l.distThreshold,a=l.cssProp;g&&"refreshing"!==p&&(c?d=e.touches[0].screenY:window.scrollY||(c=e.touches[0].screenY),"pending"===p&&(t.classList.add(r+"pull"),p="pulling",n()),c&&d&&(u=d-c),u>0&&(e.preventDefault(),t.style[a]=f+"px",f=i(u/o)*Math.min(s,u),"pulling"===p&&f>o&&(t.classList.add(r+"release"),p="releasing",n()),"releasing"===p&&o>f&&(t.classList.remove(r+"release"),p="pulling",n())))},{passive:!1}),window.addEventListener("touchend",function(){var e=l.ptrElement,s=l.onRefresh,o=l.refreshTimeout,a=l.distThreshold,h=l.distReload,g=l.cssProp;if("releasing"===p&&f>a)p="refreshing",e.style[g]=h+"px",e.classList.add(r+"refresh"),i=setTimeout(function(){var e=s(t);e&&"function"==typeof e.then&&e.then(function(){return t()}),e||s.length||t()},o);else{if("refreshing"===p)return;e.style[g]="0px",p="pending"}n(),e.classList.remove(r+"release"),e.classList.remove(r+"pull"),c=d=null,u=f=0})}function r(){var e=l.mainElement,n=l.getMarkup,t=l.getStyles,r=l.classPrefix,i=l.onInit;if(!l.ptrElement){var s=document.createElement("div");e!==document.body?e.parentNode.insertBefore(s,e):document.body.insertBefore(s,document.body.firstChild),s.classList.add(r+"ptr"),s.innerHTML=n().replace(/__PREFIX__/g,r),l.ptrElement=s}var o=document.createElement("style");o.innerText=t().replace(/__PREFIX__/g,r).replace(/\s+/g," "),document.head.appendChild(o),"function"==typeof i&&i(l)}var i,s=function(){return'<div class="__PREFIX__box">\n  <div class="__PREFIX__content">\n    <div class="__PREFIX__icon"></div>\n    <div class="__PREFIX__text"></div>\n  </div>\n</div>'},o=function(){return".__PREFIX__ptr {\n  box-shadow: inset 0 -3px 5px rgba(0, 0, 0, 0.12);\n  pointer-events: none;\n  font-size: 0.85em;\n  font-weight: bold;\n  top: 0;\n  height: 0;\n  transition: height 0.3s, min-height 0.3s;\n  text-align: center;\n  width: 100%;\n  overflow: hidden;\n  display: flex;\n  align-items: flex-end;\n  align-content: stretch;\n}\n.__PREFIX__box {\n  padding: 10px;\n  flex-basis: 100%;\n}\n.__PREFIX__pull {\n  transition: none;\n}\n.__PREFIX__text {\n  margin-top: .33em;\n  color: rgba(0, 0, 0, 0.3);\n}\n.__PREFIX__icon {\n  color: rgba(0, 0, 0, 0.3);\n  transition: transform .3s;\n}\n.__PREFIX__release .__PREFIX__icon {\n  transform: rotate(180deg);\n}"},l={},a={distThreshold:60,distMax:80,distReload:50,bodyOffset:20,mainElement:"body",triggerElement:"body",ptrElement:".ptr",classPrefix:"ptr--",cssProp:"min-height",iconArrow:"&#8675;",iconRefreshing:"&hellip;",instructionsPullToRefresh:"Pull down to refresh",instructionsReleaseToRefresh:"Release to refresh",instructionsRefreshing:"Refreshing",refreshTimeout:500,getMarkup:s,getStyles:o,onInit:function(){},onRefresh:function(){return location.reload()},resistanceFunction:function(e){return Math.min(1,e/2.5)}},c=null,d=null,u=0,f=0,p="pending",h=!1,g=!1,m={init:function(e){void 0===e&&(e={}),Object.keys(a).forEach(function(n){l[n]=e[n]||a[n]}),"string"==typeof l.mainElement&&(l.mainElement=document.querySelector(l.mainElement)),"string"==typeof l.ptrElement&&(l.ptrElement=document.querySelector(l.ptrElement)),h||(t(),h=!0),r()}};return m});
//# sourceMappingURL=pulltorefresh.min.js.map