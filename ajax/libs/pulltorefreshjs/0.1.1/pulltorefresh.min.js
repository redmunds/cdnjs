!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.PullToRefresh=n()}(this,function(){function e(){var e=s.classPrefix,n=s.ptrElement,t=s.iconArrow,r=s.iconRefreshing,i=s.instructionsRefreshing,o=s.instructionsPullToRefresh,l=s.instructionsReleaseToRefresh,c=n.querySelector("."+e+"icon"),a=n.querySelector("."+e+"text");"refreshing"===u?c.innerHTML=r:c.innerHTML=t,"releasing"===u&&(a.innerHTML=l),"pulling"!==u&&"pending"!==u||(a.innerHTML=o),"refreshing"===u&&(a.innerHTML=i)}function n(){var e=s.mainElement,n=s.getMarkup,t=s.getStyles,r=s.classPrefix,i=s.onInit;if(!s.ptrElement){var o=document.createElement("div");e!==document.body?e.parentNode.insertBefore(o,e):document.body.insertBefore(o,document.body.firstChild),o.classList.add(r+"ptr"),o.innerHTML=n().replace(/__PREFIX__/g,r),s.ptrElement=o}var l=document.createElement("style");l.innerText=t().replace(/__PREFIX__/g,r).replace(/\s+/g," "),document.head.appendChild(l),"function"==typeof i&&i(s)}var t,r=function(){return'<div class="__PREFIX__box">\n  <div class="__PREFIX__content">\n    <div class="__PREFIX__icon"></div>\n    <div class="__PREFIX__text"></div>\n  </div>\n</div>'},i=function(){return".__PREFIX__ptr {\n  box-shadow: inset 0 -3px 5px rgba(0, 0, 0, 0.12);\n  pointer-events: none;\n  font-size: 0.85em;\n  font-weight: bold;\n  top: 0;\n  height: 0;\n  transition: height 0.3s, min-height 0.3s;\n  text-align: center;\n  width: 100%;\n  overflow: hidden;\n  display: flex;\n  align-items: flex-end;\n  align-content: stretch;\n}\n.__PREFIX__box {\n  padding: 10px;\n  flex-basis: 100%;\n}\n.__PREFIX__pull {\n  transition: none;\n}\n.__PREFIX__text {\n  margin-top: .33em;\n  color: rgba(0, 0, 0, 0.3);\n}\n.__PREFIX__icon {\n  color: rgba(0, 0, 0, 0.3);\n  transition: transform .3s;\n}\n.__PREFIX__release .__PREFIX__icon {\n  transform: rotate(180deg);\n}"},s={},o={distThreshold:60,distMax:80,distReload:50,bodyOffset:20,mainElement:"body",triggerElement:"body",ptrElement:".ptr",classPrefix:"ptr--",cssProp:"min-height",iconArrow:"&#8675;",iconRefreshing:"&hellip;",instructionsPullToRefresh:"Pull down to refresh",instructionsReleaseToRefresh:"Release to refresh",instructionsRefreshing:"Refreshing",refreshTimeout:500,getMarkup:r,getStyles:i,onInit:function(){},onRefresh:function(){return location.reload()},resistanceFunction:function(e){return Math.min(1,e/2.5)}},l=null,c=null,a=0,d=0,u="pending",f=!1;document.addEventListener("DOMContentLoaded",function(){function n(){var e=s.cssProp,n=s.ptrElement,t=s.classPrefix;n.classList.remove(t+"refresh"),n.style[e]="0px",u="pending"}window.addEventListener("touchstart",function(n){var r=s.triggerElement;"pending"===u&&(clearTimeout(t),window.scrollY||(l=n.touches[0].screenY),f=r.contains(n.target),u="pending",e())}),window.addEventListener("touchmove",function(n){var t=s.ptrElement,r=s.resistanceFunction,i=s.distMax,o=s.distThreshold,p=s.cssProp,g=s.classPrefix;f&&"refreshing"!==u&&(l?c=n.touches[0].screenY:window.scrollY||(l=n.touches[0].screenY),"pending"===u&&(t.classList.add(g+"pull"),u="pulling",e()),l&&c&&(a=c-l),a>0&&(n.preventDefault(),t.style[p]=d+"px",d=r(a/o)*Math.min(i,a),"pulling"===u&&d>o&&(t.classList.add(g+"release"),u="releasing",e()),"releasing"===u&&d<o&&(t.classList.remove(g+"release"),u="pulling",e())))},{passive:!1}),window.addEventListener("touchend",function(){var r=s.ptrElement,i=s.onRefresh,o=s.refreshTimeout,f=s.distThreshold,p=s.distReload,g=s.cssProp,h=s.classPrefix;if("releasing"===u&&d>f)u="refreshing",r.style[g]=p+"px",r.classList.add(h+"refresh"),t=setTimeout(function(){var e=i(n);e&&"function"==typeof e.then&&e.then(function(){return n()}),e||i.length||n()},o);else{if("refreshing"===u)return;r.style[g]="0px",u="pending"}e(),r.classList.remove(h+"release"),r.classList.remove(h+"pull"),l=c=null,a=d=0})});var p={init:function(e){void 0===e&&(e={}),Object.keys(o).forEach(function(n){s[n]=e[n]||o[n]}),"string"==typeof s.mainElement&&(s.mainElement=document.querySelector(s.mainElement)),"string"==typeof s.ptrElement&&(s.ptrElement=document.querySelector(s.ptrElement)),"string"==typeof s.triggerElement&&(s.triggerElement=document.querySelector(s.triggerElement)),n()}};return p});
//# sourceMappingURL=pulltorefresh.min.js.map