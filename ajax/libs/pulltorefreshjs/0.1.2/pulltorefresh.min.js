!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.PullToRefresh=n()}(this,function(){function e(){var e=s.classPrefix,n=s.ptrElement,t=s.iconArrow,r=s.iconRefreshing,i=s.instructionsRefreshing,o=s.instructionsPullToRefresh,l=s.instructionsReleaseToRefresh,c=n.querySelector("."+e+"icon"),a=n.querySelector("."+e+"text");"refreshing"===f?c.innerHTML=r:c.innerHTML=t,"releasing"===f&&(a.innerHTML=l),"pulling"!==f&&"pending"!==f||(a.innerHTML=o),"refreshing"===f&&(a.innerHTML=i)}function n(){function n(){var e=s.cssProp,n=s.ptrElement,t=s.classPrefix;n.classList.remove(t+"refresh"),n.style[e]="0px",f="pending"}function t(n){var t=s.triggerElement;"pending"===f&&(clearTimeout(r),window.scrollY||(c=n.touches[0].screenY),p=t.contains(n.target),f="pending",e())}function i(n){var t=s.ptrElement,r=s.resistanceFunction,i=s.distMax,o=s.distThreshold,l=s.cssProp,h=s.classPrefix;p&&"refreshing"!==f&&(c?a=n.touches[0].screenY:window.scrollY||(c=n.touches[0].screenY),"pending"===f&&(t.classList.add(h+"pull"),f="pulling",e()),c&&a&&(d=a-c),d>0&&(n.preventDefault(),t.style[l]=u+"px",u=r(d/o)*Math.min(i,d),"pulling"===f&&u>o&&(t.classList.add(h+"release"),f="releasing",e()),"releasing"===f&&u<o&&(t.classList.remove(h+"release"),f="pulling",e())))}function o(){var t=s.ptrElement,i=s.onRefresh,o=s.refreshTimeout,l=s.distThreshold,h=s.distReload,p=s.cssProp,m=s.classPrefix;if("releasing"===f&&u>l)f="refreshing",t.style[p]=h+"px",t.classList.add(m+"refresh"),r=setTimeout(function(){var e=i(n);e&&"function"==typeof e.then&&e.then(function(){return n()}),e||i.length||n()},o);else{if("refreshing"===f)return;t.style[p]="0px",f="pending"}e(),t.classList.remove(m+"release"),t.classList.remove(m+"pull"),c=a=null,d=u=0}return window.addEventListener("touchend",o),window.addEventListener("touchstart",t),window.addEventListener("touchmove",i,{passive:!1}),{onTouchStart:t,onTouchMove:i,onTouchEnd:o}}function t(){var e=s.mainElement,n=s.getMarkup,t=s.getStyles,r=s.classPrefix,i=s.onInit;if(!s.ptrElement){var o=document.createElement("div");e!==document.body?e.parentNode.insertBefore(o,e):document.body.insertBefore(o,document.body.firstChild),o.classList.add(r+"ptr"),o.innerHTML=n().replace(/__PREFIX__/g,r),s.ptrElement=o}var l=document.createElement("style");return l.textContent=t().replace(/__PREFIX__/g,r).replace(/\s+/g," "),document.head.appendChild(l),"function"==typeof i&&i(s),{styleNode:l,ptrElement:s.ptrElement}}var r,i=function(){return'<div class="__PREFIX__box">\n  <div class="__PREFIX__content">\n    <div class="__PREFIX__icon"></div>\n    <div class="__PREFIX__text"></div>\n  </div>\n</div>'},o=function(){return".__PREFIX__ptr {\n  box-shadow: inset 0 -3px 5px rgba(0, 0, 0, 0.12);\n  pointer-events: none;\n  font-size: 0.85em;\n  font-weight: bold;\n  top: 0;\n  height: 0;\n  transition: height 0.3s, min-height 0.3s;\n  text-align: center;\n  width: 100%;\n  overflow: hidden;\n  display: flex;\n  align-items: flex-end;\n  align-content: stretch;\n}\n.__PREFIX__box {\n  padding: 10px;\n  flex-basis: 100%;\n}\n.__PREFIX__pull {\n  transition: none;\n}\n.__PREFIX__text {\n  margin-top: .33em;\n  color: rgba(0, 0, 0, 0.3);\n}\n.__PREFIX__icon {\n  color: rgba(0, 0, 0, 0.3);\n  transition: transform .3s;\n}\n.__PREFIX__release .__PREFIX__icon {\n  transform: rotate(180deg);\n}"},s={},l={distThreshold:60,distMax:80,distReload:50,bodyOffset:20,mainElement:"body",triggerElement:"body",ptrElement:".ptr",classPrefix:"ptr--",cssProp:"min-height",iconArrow:"&#8675;",iconRefreshing:"&hellip;",instructionsPullToRefresh:"Pull down to refresh",instructionsReleaseToRefresh:"Release to refresh",instructionsRefreshing:"Refreshing",refreshTimeout:500,getMarkup:i,getStyles:o,onInit:function(){},onRefresh:function(){return location.reload()},resistanceFunction:function(e){return Math.min(1,e/2.5)}},c=null,a=null,d=0,u=0,f="pending",h=!1,p=!1,m={init:function(e){void 0===e&&(e={});var r;Object.keys(l).forEach(function(n){s[n]=e[n]||l[n]}),"string"==typeof s.mainElement&&(s.mainElement=document.querySelector(s.mainElement)),"string"==typeof s.ptrElement&&(s.ptrElement=document.querySelector(s.ptrElement)),"string"==typeof s.triggerElement&&(s.triggerElement=document.querySelector(s.triggerElement)),h||(r=n(),h=!0);var i=t(),o=i.styleNode,c=i.ptrElement;return{destroy:function(){window.removeEventListener("touchstart",r.onTouchStart),window.removeEventListener("touchend",r.onTouchEnd),window.removeEventListener("touchmove",r.onTouchMove),o.parentNode.removeChild(o),c.parentNode.removeChild(c),h=!1,r=null,o=null,c=null,s={}}}}};return m});
//# sourceMappingURL=pulltorefresh.min.js.map