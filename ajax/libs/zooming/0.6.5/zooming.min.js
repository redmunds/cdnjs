!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.Zooming=e()}(this,function(){"use strict";var n="WebkitAppearance"in document.documentElement.style?"-webkit-":"",e=function(n){var e={},t=["webkitTransition","transition","mozTransition"],o=["webkitTransform","transform","mozTransform"],r={transition:"transitionend",mozTransition:"transitionend",webkitTransition:"webkitTransitionEnd"};return t.some(function(t){if(void 0!==n.style[t])return e.transitionProp=t,e.transEndEvent=r[t],!0}),o.some(function(t){if(void 0!==n.style[t])return e.transformProp=t,e.transformCssProp=t.replace(/(.*)Transform/,"-$1-transform"),!0}),e},t=function(n,e){return function(t,o,r){var i=void 0;o.transition&&(i=o.transition,delete o.transition,o[n]=i),o.transform&&(i=o.transform,delete o.transform,o[e]=i);var a=t.style,s={};for(var u in o)r&&(s[u]=a[u]||""),a[u]=o[u];return s}},o=function(n,e,t){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e.forEach(function(e){o?n.addEventListener(e,t[e]):n.removeEventListener(e,t[e])})},r=function(n){return(new Image).src=n},i=function(n){return function(e){return e/n}},a=i(2),s=function(){return{x:a(window.innerWidth),y:a(window.innerHeight)}},u={defaultZoomable:'img[data-action="zoom"]',enableGrab:!0,preloadImage:!0,transitionDuration:.4,transitionTimingFunction:"cubic-bezier(0.4, 0, 0, 1)",bgColor:"rgb(255, 255, 255)",bgOpacity:1,scaleBase:1,scaleExtra:.5,scrollThreshold:40,onOpen:null,onClose:null,onRelease:null,onBeforeOpen:null,onBeforeClose:null,onBeforeGrab:null,onBeforeRelease:null},l=void 0,c=document.body,d=document.createElement("div"),f=void 0,m=void 0,v=!1,p=!1,g=!0,y=!1,b=null,h=void 0,x=void 0,E=void 0,w=void 0,T=void 0,L={close:null,open:null},k=200,C=2,B=["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"],A=e(d),z=A.transformCssProp,D=A.transEndEvent,G=t(A.transitionProp,A.transformProp),O=function(n,e,t){return G(n,e,t)},I=function(n){var e=s(),t={x:n.left+a(n.width),y:n.top+a(n.height)};return{x:e.x-t.x,y:e.y-t.y}},P=function(n,e){var t=a(n.width),o=a(n.height),r=s(),i={x:r.x-t,y:r.y-o},u=i.x/t,l=i.y/o;return e+Math.min(u,l)},R=function(n,e){var t=n.length,o=n[0],r=n.length,i=0,a=0,s={x:o.clientX,y:o.clientY},u={x:o.clientX,y:o.clientY};for(y=t>1;r--;){var l=n[r],c=[l.clientX,l.clientY],d=c[0],f=c[1];i+=d,a+=f,y&&(d<s.x?s.x=d:d>u.x&&(u.x=d),f<s.y?s.y=f:f>u.y&&(u.y=f))}if(y){var m=u.x-s.x,v=u.y-s.y;T=m>v?m/window.innerWidth*C:v/window.innerHeight*C}e(i/t,a/t)},Y={scroll:function(){var n=window.pageYOffset||(document.documentElement||c.parentNode||c).scrollTop;null===b&&(b=n);var e=b-n;Math.abs(e)>=u.scrollThreshold&&(b=null,F.close())},keydown:function(n){var e=n.key||n.code;"Escape"!==e&&27!==n.keyCode||F.close()},mousedown:function(n){n.preventDefault(),w=setTimeout(function(){F.grab(n.clientX,n.clientY,!0)},k)},mousemove:function(n){g||F.grab(n.clientX,n.clientY)},mouseup:function(){clearTimeout(w)},touchstart:function(n){n.preventDefault(),w=setTimeout(function(){R(n.touches,function(n,e){return F.grab(n,e,!0)})},k)},touchmove:function(n){g||R(n.touches,function(n,e){return F.grab(n,e)})},touchend:function(n){n.targetTouches.length>0||(clearTimeout(w),g?F.close():F.release())}},F={listen:function(e){if("string"==typeof e){for(var t=document.querySelectorAll(e),o=t.length;o--;)F.listen(t[o]);return l}if("IMG"===e.tagName)return e.style.cursor=n+"zoom-in",e.addEventListener("click",function(n){n.preventDefault(),v?g?F.close():F.release():F.open(e)}),u.preloadImage&&e.hasAttribute("data-original")&&r(e.getAttribute("data-original")),l},config:function(n){if(!n)return u;for(var e in n)u[e]=n[e];return O(d,{backgroundColor:u.bgColor,transition:"opacity\n        "+u.transitionDuration+"s\n        "+u.transitionTimingFunction}),l},open:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.onOpen;if(!v&&!p&&(f="string"==typeof e?document.querySelector(e):e,"IMG"===f.tagName)){u.onBeforeOpen&&u.onBeforeOpen(f),v=!0,p=!0,m=f.parentNode;var r=f.getBoundingClientRect();return h=I(r),x=P(r,u.scaleBase),f.offsetWidth,L.open={position:"relative",zIndex:999,cursor:""+n+(u.enableGrab?"grab":"zoom-out"),transition:z+"\n        "+u.transitionDuration+"s\n        "+u.transitionTimingFunction,transform:"translate("+h.x+"px, "+h.y+"px) scale("+x+")"},L.close=O(f,L.open,!0),m.appendChild(d),setTimeout(function(){return d.style.opacity=u.bgOpacity},30),document.addEventListener("scroll",Y.scroll),document.addEventListener("keydown",Y.keydown),f.addEventListener(D,function n(){f.removeEventListener(D,n),u.enableGrab&&o(f,B,Y,!0),p=!1,f.hasAttribute("data-original")&&(E=f.getAttribute("src"),f.setAttribute("src",f.getAttribute("data-original"))),t&&t(f)}),l}},close:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.onClose;if(v&&!p)return p=!0,u.onBeforeClose&&u.onBeforeClose(f),f.offsetWidth,d.style.opacity=0,O(f,{transform:"none"}),document.removeEventListener("scroll",Y.scroll),document.removeEventListener("keydown",Y.keydown),f.addEventListener(D,function e(){f.removeEventListener(D,e),u.enableGrab&&o(f,B,Y,!1),v=!1,p=!1,f.hasAttribute("data-original")&&f.setAttribute("src",E),O(f,L.close),m.removeChild(d),n&&n(f)}),l},grab:function(n,e,t,o){if(v&&!p){g=!1,u.onBeforeGrab&&u.onBeforeGrab(f);var r=s(),i=r.x-n,a=r.y-e,l=y?T:u.scaleExtra,c=f.style.transform.replace(/translate\(.*?\)/i,"translate("+(h.x+i)+"px, "+(h.y+a)+"px)").replace(/scale\([0-9|\.]*\)/i,"scale("+(x+l)+")");O(f,{cursor:"move",transition:z+" "+(t?u.transitionDuration+"s "+u.transitionTimingFunction:"ease"),transform:c}),f.addEventListener(D,function n(){f.removeEventListener(D,n),o&&o(f)})}},release:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.onRelease;if(v&&!p)return p=!0,u.onBeforeRelease&&u.onBeforeRelease(f),O(f,L.open),f.addEventListener(D,function e(){f.removeEventListener(D,e),p=!1,g=!0,n&&n(f)}),l}};return d.setAttribute("id","zoom-overlay"),O(d,{zIndex:998,backgroundColor:u.bgColor,position:"fixed",top:0,left:0,right:0,bottom:0,opacity:0,transition:"opacity\n    "+u.transitionDuration+"s\n    "+u.transitionTimingFunction}),d.addEventListener("click",function(){return F.close()}),document.addEventListener("DOMContentLoaded",function(){return F.listen(u.defaultZoomable)}),F});
//# sourceMappingURL=zooming.min.js.map
