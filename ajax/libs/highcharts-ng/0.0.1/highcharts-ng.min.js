"use strict";angular.module("highcharts-ng",[]).directive("highchart",function(){var e=0,i=function(i){i.forEach(function(i){angular.isDefined(i.id)||(i.id="series-"+e++)})},r=function(e,i,r){var t={chart:{renderTo:e[0]},title:{},series:[]},n={};return n=i?$.extend(!0,{},t,i):t,r&&(n.series=r),n};return{restrict:"EC",replace:!1,scope:{series:"=",options:"=",title:"="},link:function(e,t,n){var a=r(t,e.options,e.series),s=new Highcharts.Chart(a);e.$watch("series",function(e,r){if(e!==r&&e){i(e);var t=[];e.forEach(function(e){t.push(e.id);var i=s.get(e.id);i?i.update(angular.copy(e),!1):s.addSeries(angular.copy(e),!1)}),s.series.forEach(function(e){t.indexOf(e.options.id)<0&&e.remove(!1)}),s.redraw()}},!0),e.$watch("title",function(e){s.setTitle(e,!0)},!0),e.$watch("options",function(e,n,a){if(e!==n){s.destroy();var c=r(t,e);s=new Highcharts.Chart(c),s.setTitle(a.title,!0),i(a.series),a.series.forEach(function(e){s.addSeries(angular.copy(e),!1)}),s.redraw()}},!0)}}});