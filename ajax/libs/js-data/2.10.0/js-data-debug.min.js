!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.JSData=t():e.JSData=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(1),i=r(o),a=n(2),u=r(a),f=n(3),s=r(f);e.exports={DS:i.default,DSUtils:u.default,DSErrors:s.default,createStore:function(e){return new i.default(e)},version:{full:"2.10.0",major:parseInt("2",10),minor:parseInt("10",10),patch:parseInt("0",10),alpha:"false",beta:"false"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){n(null,t)}function a(e,t){return t}function u(e,t,n,r){var o=e[t],i=h.default.get(n,o[0]),a=h.default.get(r,o[0]);return h.default._s(i)&&(i=h.default.upperCase(i)),h.default._s(a)&&(a=h.default.upperCase(a)),"DESC"===o[1]?a<i?-1:a>i?1:t<e.length-1?u(e,t+1,n,r):0:i<a?-1:i>a?1:t<e.length-1?u(e,t+1,n,r):0}function f(e){return e.replace(x,"\\$1")}function s(e,t){return new RegExp("^"+f(e).replace(j,".*").replace(E,".")+"$",t)}function c(e,t){h.default.forOwn(t,function(t,n){e[n]=t,e[n].before=function(t){var r=e[n];e[n]=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return r.apply(this,t.apply(this,n)||n)}}})}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(2),h=r(p),v=n(3),y=r(v),m=n(41),g=r(m),b=n(47),_=r(b),w=function(){function e(){o(this,e)}return d(e,[{key:"errorFn",value:function(e,t){if(this.error&&"function"==typeof this.error){try{throw"string"==typeof e?new Error(e):e}catch(t){e=t}this.error(this.name||null,e||null,t||null)}}}]),e}(),A=w.prototype;A.actions={},A.afterCreate=i,A.afterCreateCollection=a,A.afterCreateInstance=a,A.afterDestroy=i,A.afterEject=a,A.afterFind=i,A.afterFindAll=i,A.afterInject=a,A.afterLoadRelations=i,A.afterReap=a,A.afterUpdate=i,A.afterValidate=i,A.allowSimpleWhere=!0,A.applyDefaultsOnInject=!1,A.basePath="",A.beforeCreate=i,A.beforeCreateCollection=a,A.beforeCreateInstance=a,A.beforeDestroy=i,A.beforeEject=a,A.beforeInject=a,A.beforeReap=a,A.beforeUpdate=i,A.beforeValidate=i,A.bypassCache=!1,A.cacheResponse=!!h.default.w,A.csp=!1,A.clearEmptyQueries=!0,A.computed={},A.defaultAdapter="http",A.debug=!1,A.defaultValues={},A.eagerEject=!1,A.eagerInject=!1,A.endpoint="",A.error=!!console&&function(e,t,n){return console["function"==typeof console.error?"error":"log"](e,t,n)},A.errorHandler=function(){return h.default.Promise.reject(arguments.length<=0?void 0:arguments[0])},A.fallbackAdapters=["http"],A.findStrictCache=!1,A.idAttribute="id",A.ignoredChanges=[/\$/],A.instanceEvents=!!h.default.w,A.keepChangeHistory=!1,A.linkRelations=!!h.default.w,A.log=!!console&&function(e,t,n,r,o){return console["function"==typeof console.info?"info":"log"](e,t,n,r,o)},A.logFn=function(e,t,n,r){var o=this;o.debug&&o.log&&"function"==typeof o.log&&o.log(o.name||null,e||null,t||null,n||null,r||null)},A.maxAge=!1,A.methods={},A.notify=!!h.default.w,A.omit=[],A.onConflict="merge",A.reapAction=h.default.w?"inject":"none",A.reapInterval=!!h.default.w&&3e4,A.relationsEnumerable=!1,A.resetHistoryOnInject=!0,A.returnMeta=!1,A.scopes={},A.strategy="single",A.upsert=!!h.default.w,A.useClass=!0,A.useFilter=!1,A.usePendingFind=!0,A.usePendingFindAll=!0,A.validate=i,A.watchChanges=!!h.default.w;var x=/([.*+?^=!:${}()|[\]\/\\])/g,j=/%/g,E=/_/g;A.defaultFilter=function(e,t,n,r){var o=this.definitions[t],i="id",a=void 0;o&&(i=o.idAttribute,a=this.store[t]);var f=e,c=null,d={skip:"",offset:"",where:"",limit:"",orderBy:"",sort:""};n=n||{},r=r||{},c=h.default._o(n.where)?n.where:{},r.allowSimpleWhere&&h.default.forOwn(n,function(e,t){t in d||t in c||(c[t]={"==":e})}),h.default.isEmpty(c)&&(c=null),c?f=h.default.filter(f,function(e){var t=!0,n=!0;return!(r.excludeTemporary&&a&&a.temporaryItems[e[i]])&&(h.default.forOwn(c,function(r,o){h.default._o(r)||(r={"==":r}),h.default.forOwn(r,function(r,i){var a=void 0,u="|"===i[0],f=h.default.get(e,o);i=u?i.substr(1):i,"=="===i?a=f==r:"==="===i?a=f===r:"!="===i?a=f!=r:"!=="===i?a=f!==r:">"===i?a=f>r:">="===i?a=f>=r:"<"===i?a=f<r:"<="===i?a=f<=r:"isectEmpty"===i?a=!h.default.intersection(f||[],r||[]).length:"isectNotEmpty"===i?a=h.default.intersection(f||[],r||[]).length:"in"===i?a=h.default._s(r)?r.indexOf(f)!==-1:h.default.contains(r,f):"notIn"===i?a=h.default._s(r)?r.indexOf(f)===-1:!h.default.contains(r,f):0===i.indexOf("like")?a=null!==s(r,i.substr(4)).exec(f):0===i.indexOf("notLike")?a=null===s(r,i.substr(7)).exec(f):"contains"===i?a=h.default._s(f)?f.indexOf(r)!==-1:h.default.contains(f,r):"notContains"===i&&(a=h.default._s(f)?f.indexOf(r)===-1:!h.default.contains(f,r)),void 0!==a&&(n=t?a:u?n||a:n&&a),t=!1})}),n)}):r.excludeTemporary&&a&&(f=h.default.filter(f,function(e){return a.temporaryItems[e[i]]}));var p=null;h.default._s(n.orderBy)?p=[[n.orderBy,"ASC"]]:h.default._a(n.orderBy)&&(p=n.orderBy),!p&&h.default._s(n.sort)?p=[[n.sort,"ASC"]]:!p&&h.default._a(n.sort)&&(p=n.sort),p&&!function(){var e=0;h.default.forEach(p,function(e,n){if(h.default._s(e))p[n]=[e,"ASC"];else if(!h.default._a(e))throw new y.default.IA('DS.filter("'+t+'"[, params][, options]): '+h.default.toJson(e)+": Must be a string or an array!",{params:{"orderBy[i]":{actual:"undefined"==typeof e?"undefined":l(e),expected:"string|array"}}})}),f=h.default.sort(f,function(t,n){return u(p,e,t,n)})}();var v=h.default._n(n.limit)?n.limit:null,m=null;return h.default._n(n.skip)?m=n.skip:h.default._n(n.offset)&&(m=n.offset),v&&m?f=h.default.slice(f,m,Math.min(f.length,m+v)):h.default._n(v)?f=h.default.slice(f,0,Math.min(f.length,v)):h.default._n(m)&&(f=m<f.length?h.default.slice(f,m):[]),f===e?f.slice():f};var O=function(){function e(t){o(this,e);var n=this;t=t||{},n.store={},n.definitions={},n.adapters={},n.defaults=new w,n.observe=h.default.observe,h.default.forOwn(t,function(e,t){"omit"===t?n.defaults.omit=e.concat(w.prototype.omit):n.defaults[t]=e}),n.defaults.logFn("new data store created",n.defaults);var r=h.default.Promise;r&&!r.prototype.spread&&(r.prototype.spread=function(e){return this.then(function(t){return e.apply(this,t)})}),h.default.Events(n)}return d(e,[{key:"getAdapterName",value:function(e){var t=!1;if(e=e||{},this.defaults.logFn("getAdapterName",e),h.default._s(e)&&(t=!0,e={adapter:e}),this.adapters[e.adapter])return e.adapter;if(t)throw new Error(e.adapter+" is not a registered adapter!");return e.defaultAdapter}},{key:"getAdapter",value:function(e){return e=e||{},this.defaults.logFn("getAdapter",e),this.adapters[this.getAdapterName(e)]}},{key:"registerAdapter",value:function(e,t,n){var r=this;n=n||{},r.defaults.logFn("registerAdapter",e,t,n),h.default.isFunction(t)?r.adapters[e]=new t(n):r.adapters[e]=t,n.default&&(r.defaults.defaultAdapter=e),r.defaults.logFn("default adapter is "+r.defaults.defaultAdapter)}},{key:"is",value:function(e,t){var n=this.definitions[e];if(!n)throw new y.default.NER(e);return t instanceof n[n.class]}},{key:"clear",value:function(){var e=this,t={};return h.default.forOwn(this.definitions,function(n){var r=n.name;t[r]=n.ejectAll(),e.store[r].completedQueries={},e.store[r].queryData={}}),t}},{key:"errorFn",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1],o=this.defaults.errorHandler,i=r?r.errorHandler:o;return i=i||o,function(e){return i.apply(void 0,[e].concat(t))}}}]),e}(),F=O.prototype;F.getAdapterName.shorthand=!1,F.getAdapter.shorthand=!1,F.registerAdapter.shorthand=!1,F.errors=y.default,F.utils=h.default,c(F,g.default),c(F,_.default),t.default=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return"[object Array]"===W.call(e)||!1}function i(e){return"[object RegExp]"===W.call(e)||!1}function a(e){return"string"==typeof e||e&&"object"===("undefined"==typeof e?"undefined":O(e))&&"[object String]"===W.call(e)||!1}function u(e){return"[object Object]"===W.call(e)||!1}function f(e){return e&&"object"===("undefined"==typeof e?"undefined":O(e))&&"[object Date]"===W.call(e)||!1}function s(e){var t="undefined"==typeof e?"undefined":O(e);return"number"===t||e&&"object"===t&&"[object Number]"===W.call(e)||!1}function c(e){return"function"==typeof e||e&&"[object Function]"===W.call(e)||!1}function l(e){return a(e)||s(e)}function d(e){return new C.default.IA('"'+e+'" must be a string or a number!')}function p(e){return new C.default.IA('"'+e+'" must be an object!')}function h(e){return new C.default.IA('"'+e+'" must be an array!')}function v(e){if(null==e)return!0;if("string"==typeof e||G(e))return!e.length;if("object"===("undefined"==typeof e?"undefined":O(e))){var t=!0;return R(e,function(){return t=!1,!1}),t}return!0}function y(e,t){if(!e||!t)return[];for(var n=[],r=void 0,o=0,i=e.length;o<i;o++)r=e[o],k(n,r)||k(t,r)&&n.push(r);return n}function m(e,t,n){var r=[];return D(e,function(e,n,o){t(e,n,o)&&r.push(e)},n),r}function g(e){var t={};e=e||this,Object.defineProperties(e,{on:{value:function(e,n,r){t[e]=t[e]||[],t[e].push({f:n,c:r})}},off:{value:function(e,n){var r=t[e];if(r)if(n){for(var o=0;o<r.length;o++)if(r[o].f===n){r.splice(o,1);break}}else r.splice(0,r.length);else t={}}},emit:{value:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=t[n.shift()]||[];if(o)for(var i=0;i<o.length;i++)o[i].f.apply(o[i].c,n)}}})}function b(e,t,n,r,o){if(t){if(e===t)throw new Error("Cannot copy! Source and destination are identical.");if(n=n||[],r=r||[],u(e)){var a=n.indexOf(e);if(a!==-1)return r[a];n.push(e),r.push(t)}var s=void 0;if(G(e)){var c=void 0;for(t.length=0,c=0;c<e.length;c++)s=b(e[c],null,n,r,o),u(e[c])&&(n.push(e[c]),r.push(s)),t.push(s)}else{G(t)?t.length=0:D(t,function(e,n){delete t[n]});for(var l in e)if(e.hasOwnProperty(l)){if(X(l,o))continue;s=b(e[l],null,n,r,o),u(e[l])&&(n.push(e[l]),r.push(s)),t[l]=s}}}else t=e,e&&(G(e)?t=b(e,[],n,r,o):f(e)?t=new Date(e.getTime()):i(e)?(t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex):u(e)&&(t=b(e,Object.create(Object.getPrototypeOf(e)),n,r,o)));return t}function _(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var n,r,o,a="undefined"==typeof e?"undefined":O(e),u="undefined"==typeof t?"undefined":O(t);if(a==u&&"object"==a){if(!G(e)){if(f(e))return!!f(t)&&_(e.getTime(),t.getTime());if(i(e)&&i(t))return e.toString()==t.toString();if(G(t))return!1;o={};for(r in e)if("$"!==r.charAt(0)&&!c(e[r])){if(!_(e[r],t[r]))return!1;o[r]=!0}for(r in t)if(!o.hasOwnProperty(r)&&"$"!==r.charAt(0)&&void 0!==t[r]&&!c(t[r]))return!1;return!0}if(!G(t))return!1;if((n=e.length)===t.length){for(r=0;r<n;r++)if(!_(e[r],t[r]))return!1;return!0}}return!1}function w(e,t){return a(t)||s(t)?t:t&&e?t[e.idAttribute]||t:t}function A(e,t){return e&&(a(t)||s(t))?e.index[t]||t:t}function x(e){return null!=e&&""!==e}function j(e,t){return t=t||"",m(e,x).join(t)}function E(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=j(t,"/");return r.replace(/([^:\/]|^)\/{2,}/g,"$1/")}Object.defineProperty(t,"__esModule",{value:!0});var O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},F=n(3),C=r(F),S=n(4),D=n(5),I=n(6),R=n(7),k=n(10),P=n(12),N=n(14),T=n(21),M=n(22),H=n(23),Q=n(24),K=n(19),U=n(25),V=n(27),$=n(29),q=n(30),L=void 0,B=void 0,J=void 0,z=Object.prototype,W=z.toString;try{B=Promise}catch(e){console.error("js-data requires a global Promise constructor!")}try{J=window.File}catch(e){J=function(){}}var G=Array.isArray||o;try{L=window,L={}}catch(e){L=null}var Y=["beforeValidate","validate","afterValidate","beforeCreate","afterCreate","beforeUpdate","afterUpdate","beforeDestroy","afterDestroy"],X=$.isBlacklisted;t.default={Promise:B,_:function(e,t){var n=this;if(e=e||{},t=t||{},t&&t.constructor===e.constructor)return t;if(!u(t))throw new C.default.IA('"options" must be an object!');D(Y,function(e){"function"==typeof t[e]&&t[e].toString().indexOf("for (var _len = arg")===-1&&(t[e]=n.promisify(t[e]))});var r=function(e){var t=this;R(e,function(e,n){t[n]=e})};return r.prototype=e,r.prototype.orig=function(){var e={};return R(this,function(t,n){e[n]=t}),e},new r(t)},_n:s,_s:a,_sn:l,_snErr:d,_o:u,_oErr:p,_a:G,_aErr:h,applyScope:function(e,t,n){var r=n.scope,o=b(t);r?a(r)&&(r=[r]):r=[],r.unshift("defaultScope"),D(r,function(r){var o=n.scopes[r];"function"==typeof o?P(t,o(e)):o&&P(t,o)}),P(t,o)},compute:function(e,t){var n=this,r=[];u(e)||(D(e.deps,function(e){r.push(U(n,e))}),V(n,t,e[e.length-1].apply(n,r)))},contains:k,copy:b,deepMixIn:P,diffObjectFromOldObject:$.diffObjectFromOldObject,BinaryHeap:S,equals:_,Events:g,filter:m,fillIn:function(e,t){return R(t,function(t,n){n in e||(e[n]=t)}),e},forEach:D,forOwn:R,fromJson:function(e){return a(e)?JSON.parse(e):e},get:U,guid:q,intersection:y,isArray:G,isBlacklisted:X,isEmpty:v,isFunction:c,isObject:u,isNumber:s,isString:a,keys:H,makePath:E,observe:$,omit:function(e,t){var n=[];return R(e,function(e,r){X(r,t)&&n.push(r)}),D(n,function(t){delete e[t]}),e},pascalCase:N,pick:M,promisify:function(e,t){var n=this;if(e){if("function"!=typeof e)throw new Error("Can only promisify functions!");return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return new n.Promise(function(n,r){o.push(function(e,t){e?r(e):n(t)});try{var i=e.apply(t||this,o);i&&i.then&&i.then(n,r)}catch(e){r(e)}})}}},remove:T,set:V,slice:I,sort:Q,toJson:JSON.stringify,updateTimestamp:function(e){var t="function"==typeof Date.now?Date.now():(new Date).getTime();return e&&t<=e?e+1:t},upperCase:K,removeCircular:function(e){return function e(t,n){var r=void 0,o=void 0;if(!("object"!==("undefined"==typeof t?"undefined":O(t))||null===t||t instanceof Boolean||t instanceof Date||t instanceof Number||t instanceof RegExp||t instanceof String||J&&t instanceof J)){for(var i=n.cur,a=n.ctx;a;){if(a.cur===i)return;a=a.ctx}if(G(t))for(o=[],r=0;r<t.length;r+=1)o[r]=e(t[r],{ctx:n,cur:t[r]});else o={},R(t,function(r,i){o[i]=e(t[i],{ctx:n,cur:t[i]})});return o}return t}(e,{ctx:null,cur:e})},resolveItem:A,resolveId:w,respond:function(e,t,n){return"array"===n.returnMeta?[e,t]:"object"===n.returnMeta?{response:e,meta:t}:e},w:L,applyRelationGettersToTarget:function(e,t,n){this.forEach(t.relationList,function(r){var o=r.relation,i=r.localField,a=r.localKey,u=r.foreignKey,f=r.localKeys,s=r.foreignKeys,c="boolean"==typeof r.enumerable?r.enumerable:!!t.relationsEnumerable;if("boolean"==typeof r.link?r.link:!!t.linkRelations){delete n[i];var l={enumerable:c};"belongsTo"===r.type?(l.get=function(){var e=U(this,a),n=!(!e&&0!==e);return n?t.getResource(o).get(e):void 0},l.set=function(e){return e&&V(this,a,U(e,t.getResource(o).idAttribute)),U(this,i)}):"hasMany"===r.type?(l.get=function(){var n={};if(u)return n[u]=this[t.idAttribute],t.getResource(o).defaultFilter.call(e,e.store[o].collection,o,n,{allowSimpleWhere:!0});if(f){var r=U(this,f)||[];return t.getResource(o).getAll(G(r)?r:H(r))}return s?(V(n,"where."+s+".contains",this[t.idAttribute]),t.getResource(o).defaultFilter.call(e,e.store[o].collection,o,n)):void 0},l.set=function(e){var n=this;return e&&e.length&&!function(){var r=U(n,t.idAttribute);u?D(e,function(e){V(e,u,r)}):f?!function(){var r=[];D(e,function(e){r.push(U(e,t.getResource(o).idAttribute))}),V(n,f,r)}():s&&D(e,function(e){var t=U(e,s);t?k(t,r)||t.push(r):V(e,s,[r])})}(),U(this,i)}):"hasOne"===r.type&&(a?(l.get=function(){var e=U(this,a),n=!(!e&&0!==e);return n?t.getResource(o).get(e):void 0},l.set=function(e){return e&&V(this,a,U(e,t.getResource(o).idAttribute)),U(this,i)}):(l.get=function(){var n={};n[u]=this[t.idAttribute];var r=n[u]?t.getResource(o).defaultFilter.call(e,e.store[o].collection,o,n,{allowSimpleWhere:!0}):[];if(r.length)return r[0]},l.set=function(e){return e&&V(e,u,U(this,t.idAttribute)),U(this,i)})),r.get&&!function(){var e=l.get;l.get=function(){var n=this;return r.get(t,r,this,function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return e.apply(n,r)})}}(),Object.defineProperty(n,i,l)}})}}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(o,o.constructor),o.type=o.constructor.name,o.message=e,o}return o(t,e),t}(Error),a=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(o,o.constructor),o.type=o.constructor.name,o.message=e,o}return o(t,e),t}(Error),u=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(o,o.constructor),o.type=o.constructor.name,o.message=e+" is not a registered resource!",o}return o(t,e),t}(Error);t.default={IllegalArgumentError:i,IA:i,RuntimeError:a,R:a,NonexistentResourceError:u,NER:u}},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t){if(e||(e=function(e){return e}),t||(t=function(e,t){return e===t}),"function"!=typeof e)throw new Error('BinaryHeap([weightFunc][, compareFunc]): "weightFunc" must be a function!');if("function"!=typeof t)throw new Error('BinaryHeap([weightFunc][, compareFunc]): "compareFunc" must be a function!');this.weightFunc=e,this.compareFunc=t,this.heap=[]}var t=function(e,t,n){for(var r=e[n],o=t(r);n>0;){var i=Math.floor((n+1)/2)-1,a=e[i];if(o>=t(a))break;e[i]=r,e[n]=a,n=i}},n=function(e,t,n){for(var r=e.length,o=e[n],i=t(o);;){var a=2*(n+1),u=a-1,f=null;if(u<r){var s=e[u],c=t(s);c<i&&(f=u)}if(a<r){var l=e[a],d=t(l);d<(null===f?i:t(e[u]))&&(f=a)}if(null===f)break;e[n]=e[f],e[f]=o,n=f}},r=e.prototype;return r.push=function(e){this.heap.push(e),t(this.heap,this.weightFunc,this.heap.length-1)},r.peek=function(){return this.heap[0]},r.pop=function(){var e=this.heap[0],t=this.heap.pop();return this.heap.length>0&&(this.heap[0]=t,n(this.heap,this.weightFunc,0)),e},r.remove=function(e){for(var r=this.heap.length,o=0;o<r;o++)if(this.compareFunc(this.heap[o],e)){var i=this.heap[o],a=this.heap.pop();return o!==r-1&&(this.heap[o]=a,t(this.heap,this.weightFunc,o),n(this.heap,this.weightFunc,o)),i}return null},r.removeAll=function(){this.heap=[]},r.size=function(){return this.heap.length},e})},function(e,t){function n(e,t,n){if(null!=e)for(var r=-1,o=e.length;++r<o&&t.call(n,e[r],r,e)!==!1;);}e.exports=n},function(e,t){function n(e,t,n){var r=e.length;t=null==t?0:t<0?Math.max(r+t,0):Math.min(t,r),n=null==n?r:n<0?Math.max(r+n,0):Math.min(n,r);for(var o=[];t<n;)o.push(e[t++]);return o}e.exports=n},function(e,t,n){function r(e,t,n){i(e,function(r,i){if(o(e,i))return t.call(n,e[i],i,e)})}var o=n(8),i=n(9);e.exports=r},function(e,t){function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=n},function(e,t,n){function r(){u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=!0;for(var e in{toString:null})a=!1}function o(e,t,n){var o,s=0;null==a&&r();for(o in e)if(i(t,e,o,n)===!1)break;if(a)for(var c=e.constructor,l=!!c&&e===c.prototype;(o=u[s++])&&("constructor"===o&&(l||!f(e,o))||e[o]===Object.prototype[o]||i(t,e,o,n)!==!1););}function i(e,t,n,r){return e.call(r,t[n],n,t)}var a,u,f=n(8);e.exports=o},function(e,t,n){function r(e,t){return o(e,t)!==-1}var o=n(11);e.exports=r},function(e,t){function n(e,t,n){if(n=n||0,null==e)return-1;for(var r=e.length,o=n<0?r+n:n;o<r;){if(e[o]===t)return o;o++}return-1}e.exports=n},function(e,t,n){function r(e,t){for(var n,r=0,a=arguments.length;++r<a;)n=arguments[r],n&&i(n,o,e);return e}function o(e,t){var n=this[t];a(e)&&a(n)?r(n,e):this[t]=e}var i=n(7),a=n(13);e.exports=r},function(e,t){function n(e){return!!e&&"object"==typeof e&&e.constructor===Object}e.exports=n},function(e,t,n){function r(e){return e=o(e),i(e).replace(/^[a-z]/,a)}var o=n(15),i=n(16),a=n(19);e.exports=r},function(e,t){function n(e){return null==e?"":e.toString()}e.exports=n},function(e,t,n){function r(e){return e=o(e),e=i(e),e=a(e).replace(/[\-_]/g," ").replace(/\s[a-z]/g,u).replace(/\s+/g,"").replace(/^[A-Z]/g,f)}var o=n(15),i=n(17),a=n(18),u=n(19),f=n(20);e.exports=r},function(e,t,n){function r(e){return e=o(e),e.search(/[\xC0-\xFF]/g)>-1&&(e=e.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),e}var o=n(15);e.exports=r},function(e,t,n){function r(e){return e=o(e),e.replace(i,"")}var o=n(15),i=/[^\x20\x2D0-9A-Z\x5Fa-z\xC0-\xD6\xD8-\xF6\xF8-\xFF]/g;e.exports=r},function(e,t,n){function r(e){return e=o(e),e.toUpperCase()}var o=n(15);e.exports=r},function(e,t,n){function r(e){return e=o(e),e.toLowerCase()}var o=n(15);e.exports=r},function(e,t,n){function r(e,t){var n=o(e,t);n!==-1&&e.splice(n,1)}var o=n(11);e.exports=r},function(e,t,n){function r(e,t){for(var n,r="string"!=typeof arguments[1]?arguments[1]:o(arguments,1),i={},a=0;n=r[a++];)i[n]=e[n];return i}var o=n(6);e.exports=r},function(e,t,n){var r=n(7),o=Object.keys||function(e){var t=[];return r(e,function(e,n){t.push(n)}),t};e.exports=o},function(e,t){function n(e,t){if(null==e)return[];if(e.length<2)return e;null==t&&(t=r);var i,a,u;return i=~~(e.length/2),a=n(e.slice(0,i),t),u=n(e.slice(i,e.length),t),o(a,u,t)}function r(e,t){return e<t?-1:e>t?1:0}function o(e,t,n){for(var r=[];e.length&&t.length;)n(e[0],t[0])<=0?r.push(e.shift()):r.push(t.shift());return e.length&&r.push.apply(r,e),t.length&&r.push.apply(r,t),r}e.exports=n},function(e,t,n){function r(e,t){for(var n=t.split("."),r=n.pop();t=n.shift();)if(e=e[t],null==e)return;return e[r]}n(26);e.exports=r},function(e,t){function n(e){switch(typeof e){case"string":case"number":case"boolean":return!0}return null==e}e.exports=n},function(e,t,n){function r(e,t,n){var r=/^(.+)\.(.+)$/.exec(t);r?o(e,r[1])[r[2]]=n:e[t]=n}var o=n(28);e.exports=r},function(e,t,n){function r(e,t){return t?(o(t.split("."),function(t){e[t]||(e[t]={}),e=e[t]}),e):e}var o=n(5);e.exports=r},function(e,t){!function(e){function t(){function e(e){t=e}if("function"!=typeof Object.observe||"function"!=typeof Array.observe)return!1;var t=[],n={},r=[];return Object.observe(n,e),Array.observe(r,e),n.id=1,n.id=2,delete n.id,r.push(1,2),r.length=0,Object.deliverChangeRecords(e),5===t.length&&("add"==t[0].type&&"update"==t[1].type&&"delete"==t[2].type&&"splice"==t[3].type&&"splice"==t[4].type&&(Object.unobserve(n,e),Array.unobserve(r,e),!0))}function n(t){for(var n=0;n<g&&t.check_();)n++;return v&&(e.dirtyCheckCycleCount=n),n>0}function r(e){for(var t in e)return!1;return!0}function o(e){return r(e.added)&&r(e.removed)&&r(e.changed)}function i(e,t){if(!t||!t.length)return!1;for(var n,r=0;r<t.length;r++)if("[object RegExp]"===Object.prototype.toString.call(t[r])&&t[r].test(e)||t[r]===e)return n=e;return!!n}function a(e,t,n,r){var o={},a={},u={};for(var f in t){var s=e[f];i(f,r)||void 0!==s&&(n?n(s,t[f]):s===t[f])||(f in e?(n?n(s,t[f]):s===t[f])||(u[f]=s):a[f]=void 0)}for(var f in e)f in t||i(f,r)||(o[f]=e[f]);return Array.isArray(e)&&e.length!==t.length&&(u.length=e.length),{added:o,removed:a,changed:u}}function u(){if(!b.length)return!1;for(var e=0;e<b.length;e++)b[e]();return b.length=0,!0}function f(){function e(e){t&&t.state_===x&&!r&&t.check_(e)}var t,n,r=!1,o=!0;return{open:function(n){if(t)throw Error("ObservedObject in use");o||Object.deliverChangeRecords(e),t=n,o=!1},observe:function(t,r){n=t,r?Array.observe(n,e):Object.observe(n,e)},deliver:function(t){r=t,Object.deliverChangeRecords(e),r=!1},close:function(){t=void 0,Object.unobserve(n,e),w.push(this)}}}function s(e,t,n){var r=w.pop()||f();return r.open(e),r.observe(t,n),r}function c(){this.state_=A,this.callback_=void 0,this.target_=void 0,this.directObserver_=void 0,this.value_=void 0,this.id_=E++}function l(e){c._allObserversCount++,F&&O.push(e)}function d(e){c._allObserversCount--}function p(e){c.call(this),this.value_=e,this.oldObject_=void 0}function h(e,t,n){for(var r={},o={},i=0;i<t.length;i++){var a=t[i];D[a.type]?(a.name in n||(n[a.name]=a.oldValue),"update"!=a.type&&("add"!=a.type?a.name in r?(delete r[a.name],delete n[a.name]):o[a.name]=!0:a.name in o?delete o[a.name]:r[a.name]=!0)):(console.error("Unknown changeRecord type: "+a.type),console.error(a))}for(var u in r)r[u]=e[u];for(var u in o)o[u]=void 0;var f={};for(var u in n)if(!(u in r||u in o)){var s=e[u];n[u]!==s&&(f[u]=s)}return{added:r,removed:o,changed:f}}var v=e.testingExposeCycleCount,y=t(),m="__proto__"in{}?function(e){return e}:function(e){var t=e.__proto__;if(!t)return e;var n=Object.create(t);return Object.getOwnPropertyNames(e).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}),n},g=1e3,b=[],_=y?function(){return function(e){return Promise.resolve().then(e)}}():function(){return function(e){b.push(e)}}(),w=[],A=0,x=1,j=2,E=1;c.prototype={open:function(e,t){if(this.state_!=A)throw Error("Observer has already been opened.");return l(this),this.callback_=e,this.target_=t,this.connect_(),this.state_=x,this.value_},close:function(){this.state_==x&&(d(this),this.disconnect_(),this.value_=void 0,this.callback_=void 0,this.target_=void 0,this.state_=j)},deliver:function(){this.state_==x&&n(this)},report_:function(e){try{this.callback_.apply(this.target_,e)}catch(e){c._errorThrownDuringCallback=!0,console.error("Exception caught during observer callback: "+(e.stack||e))}},discardChanges:function(){return this.check_(void 0,!0),this.value_}};var O,F=!y;c._allObserversCount=0,F&&(O=[]);var C=!1;e.Platform=e.Platform||{},e.Platform.performMicrotaskCheckpoint=function(){if(!C&&F){C=!0;var t,n,r=0;do{r++,n=O,O=[],t=!1;for(var o=0;o<n.length;o++){var i=n[o];i.state_==x&&(i.check_()&&(t=!0),O.push(i))}u()&&(t=!0)}while(r<g&&t);v&&(e.dirtyCheckCycleCount=r),C=!1}},F&&(e.Platform.clearObservers=function(){O=[]}),p.prototype=m({__proto__:c.prototype,arrayObserve:!1,connect_:function(e,t){y?this.directObserver_=s(this,this.value_,this.arrayObserve):this.oldObject_=this.copyObject(this.value_)},copyObject:function(e){var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=e[n];return Array.isArray(e)&&(t.length=e.length),t},check_:function(e,t){var n,r;if(y){if(!e)return!1;r={},n=h(this.value_,e,r)}else r=this.oldObject_,n=a(this.value_,this.oldObject_);return!o(n)&&(y||(this.oldObject_=this.copyObject(this.value_)),this.report_([n.added||{},n.removed||{},n.changed||{},function(e){return r[e]}]),!0)},disconnect_:function(){y?(this.directObserver_.close(),this.directObserver_=void 0):this.oldObject_=void 0},deliver:function(){this.state_==x&&(y?this.directObserver_.deliver(!1):n(this))},discardChanges:function(){return this.directObserver_?this.directObserver_.deliver(!0):this.oldObject_=this.copyObject(this.value_),this.value_}});var S={},D={add:!0,update:!0,delete:!0};e.Observer=c,e.isBlacklisted=i,e.Observer.runEOM_=_,e.Observer.observerSentinel_=S,e.Observer.hasObjectObserve=y,e.diffObjectFromOldObject=a,e.ObjectObserver=p}(t)},function(e,t,n){function r(){return o(8)+"-"+o(4)+"-4"+o(3)+"-"+i(8,9,"a","b")+o(3)+"-"+o(12)}var o=n(31),i=n(32);e.exports=r},function(e,t,n){function r(e){e=e&&e>0?e:6;for(var t="";e--;)t+=o(i);return t}var o=n(32),i="0123456789abcdef".split("");e.exports=r},function(e,t,n){function r(e){var t=1===arguments.length&&i(e)?e:arguments;return t[o(0,t.length-1)]}var o=n(33),i=n(38);e.exports=r},function(e,t,n){function r(e,t){return e=null==e?o:~~e,t=null==t?i:~~t,Math.round(a(e-.5,t+.499999999999))}var o=n(34),i=n(35),a=n(36);e.exports=r},function(e,t){e.exports=-2147483648},function(e,t){e.exports=2147483647},function(e,t,n){function r(e,t){return e=null==e?i:e,t=null==t?a:t,e+(t-e)*o()}var o=n(37),i=n(34),a=n(35);e.exports=r},function(e,t){function n(){return n.get()}n.get=Math.random,e.exports=n},function(e,t,n){var r=n(39),o=Array.isArray||function(e){return r(e,"Array")};e.exports=o},function(e,t,n){function r(e,t){return o(e)===t}var o=n(40);e.exports=r},function(e,t){function n(e){return null===e?"Null":e===r?"Undefined":o.exec(i.call(e))[1]}var r,o=/^\[object (.*)\]$/,i=Object.prototype.toString;e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return!(f.default.isEmpty(e.added)&&f.default.isEmpty(e.removed)&&f.default.isEmpty(e.changed))}function i(e,t,n,r){var o=this,i=o.definitions[t];if(r=r||{},n=f.default.resolveId(i,n),!i)throw new l(t);if(!f.default._sn(n))throw f.default._snErr("id");return n=n===h?void 0:n,r=f.default._(i,r),r.logFn(e,n,r),{_this:o,definition:i,_resourceName:t,_id:n,_options:r}}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=n(2),f=r(u),s=n(3),c=r(s),l=c.default.NER,d=c.default.IA,p=c.default.R,h="DS_"+(new Date).getTime();t.default={changes:function(e,t,n){var r=i.call(this,"changes",e,t,n),o=r._this,u=r.definition,s=r._resourceName,c=r._id,l=r._options,d=u.get(c);if(d){var p=function(){var e=o.store[s].observers[c];e&&"function"==typeof e&&e.deliver();var t=l.ignoredChanges||[];f.default.forEach(u.relationFields,function(e){f.default.contains(t,e)||t.push(e)});var n=f.default.diffObjectFromOldObject(d,o.store[s].previousAttributes[c],f.default.equals,t);return f.default.forOwn(n,function(e,t){var r=[];f.default.forOwn(e,function(e,t){f.default.isFunction(e)||r.push(t)}),n[t]=f.default.pick(n[t],r)}),f.default.forEach(u.relationFields,function(e){delete n.added[e],delete n.removed[e],delete n.changed[e]}),{v:n}}();if("object"===("undefined"==typeof p?"undefined":a(p)))return p.v}},changeHistory:function(e,t){var n=i.call(this,"changeHistory",e,t||h),r=n._this,o=n.definition,a=n._resourceName,u=n._id,f=r.store[a];if(o.keepChangeHistory){if(!a)return f.changeHistory;var s=o.get(u);if(s)return f.changeHistories[u]}else o.errorFn("changeHistory is disabled for this resource!")},commit:function(e,t){var n=i.call(this,"commit",e,t),r=n._this,o=n.definition,a=n._resourceName,u=n._id,s=r.store[a],c=r.store[a].index[u];
if(c){var l=o.relationFields||[],d={};for(var p in c)l.indexOf(p)===-1&&(d[p]=f.default.copy(c[p],null,null,null,[]));s.previousAttributes[u]=d}return s.changeHistories[u].length&&(f.default.forEach(s.changeHistories[u],function(e){f.default.remove(s.changeHistory,e)}),s.changeHistories[u].splice(0,s.changeHistories[u].length)),c},compute:function(e,t){var n=this,r=n.definitions[e];if(t=f.default.resolveItem(n.store[e],t),!r)throw new l(e);if(!t)throw new p("Item not in the store!");if(!f.default._o(t)&&!f.default._sn(t))throw new d('"instance" must be an object, string or number!');return r.logFn("compute",t),f.default.forOwn(r.computed,function(e,n){f.default.compute.call(t,e,n)}),t},createInstance:function(e,t,n){var r=this.definitions[e],o=void 0;if(t=t||{},!r)throw new l(e);if(t&&!f.default.isObject(t))throw new d('"attrs" must be an object!');n=f.default._(r,n);var i=r.relationList||[];i.length&&f.default.forEach(i,function(e){var o=f.default.get(t,e.localField);o&&(f.default.isArray(o)?!function(){var i=[],a=r.getResource(e.relation),u=n.orig();f.default.forEach(o,function(e){i.push(a.createInstance(e,u))}),f.default.set(t,e.localField,i)}():f.default.isObject(o)&&f.default.set(t,e.localField,r.getResource(e.relation).createInstance(o,n.orig())))}),n.logFn("createInstance",t,n),n.beforeCreateInstance(n,t);var a=r[r.class];return o=new a,r.instanceEvents&&f.default.Events(o),n.defaultValues&&f.default.deepMixIn(o,f.default.copy(n.defaultValues)),f.default.deepMixIn(o,t),r.computed&&r.compute(o),n.afterCreateInstance(n,o),o},createCollection:function(e,t,n,r){var o=this,i=o.definitions[e];if(t=t||[],n=n||{},!i)throw new l(e);if(t&&!f.default.isArray(t))throw new d('"arr" must be an array!');return r=f.default._(i,r),r.logFn("createCollection",t,r),r.beforeCreateCollection(r,t),Object.defineProperties(t,{fetch:{value:function(t,n){var r=this;return r.params=t||r.params,i.findAll(r.params,n).then(function(t){return t===r?r:(t.unshift(r.length),t.unshift(0),r.splice.apply(r,t),t.shift(),t.shift(),t.$$injected&&(o.store[e].queryData[f.default.toJson(r.params)]=r,r.$$injected=!0),r)})}},params:{value:n,writable:!0},resourceName:{value:e}}),r.afterCreateCollection(r,t),t},defineResource:n(42),digest:function(){this.observe.Platform.performMicrotaskCheckpoint()},eject:n(43),ejectAll:n(44),filter:n(45),get:function(e,t){var n=i.call(this,"get",e,t),r=n._this,o=n._resourceName,a=n._id;return r.store[o].index[a]},getAll:function(e,t){var n=this,r=n.definitions[e],o=n.store[e],i=[];if(!r)throw new l(e);if(t&&!f.default._a(t))throw f.default._aErr("ids");if(r.logFn("getAll",t),f.default._a(t))for(var a=t.length,u=0;u<a;u++)o.index[t[u]]&&i.push(o.index[t[u]]);else i=o.collection.slice();return i},hasChanges:function(e,t){var n=i.call(this,"hasChanges",e,t),r=n.definition,a=n._id;return!!r.get(a)&&o(r.changes(a))},inject:n(46),isNew:function(e,t){var n=i.call(this,"isNew",e,t||h),r=n._this,o=n._resourceName,a=n._id,u=r.store[o];return!!u.temporaryItems[a]},lastModified:function(e,t){var n=i.call(this,"lastModified",e,t||h),r=n._this,o=n._resourceName,a=n._id,u=r.store[o];return a?(a in u.modified||(u.modified[a]=0),u.modified[a]):u.collectionModified},lastSaved:function(e,t){var n=i.call(this,"lastSaved",e,t||h),r=n._this,o=n._resourceName,a=n._id,u=r.store[o];return a in u.saved||(u.saved[a]=0),u.saved[a]},previous:function(e,t){var n=i.call(this,"previous",e,t),r=n._this,o=n._resourceName,a=n._id,u=r.store[o];return u.previousAttributes[a]?f.default.copy(u.previousAttributes[a]):void 0},revert:function(e,t,n){var r=i.call(this,"revert",e,t,n),o=r._this,u=r.definition,s=r._resourceName,c=r._id,l=r._options,d=l.preserve||[],p={};if(0===d.length)p=o.previous(s,c);else{var h=function(){var e=u.get(t),n=o.previous(s,c);return e?void f.default.forOwn(e,function(t,r){f.default.contains(d,r)?p[r]=e[r]:p[r]=n[r]}):{v:void 0}}();if("object"===("undefined"==typeof h?"undefined":a(h)))return h.v}return u.inject(p,{onConflict:"replace"})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=n(2),a=r(i),u=n(3),f=r(u),s=["compute","eject","refresh","save","update","destroy","loadRelations","changeHistory","changes","commit","hasChanges","isNew","lastModified","lastSaved","previous","revert"];e.exports=function(e){function t(t){this.defaultValues={},this.methods={},this.computed={},this.scopes={},this.actions={},a.default.deepMixIn(this,t);var o=n.defaults;e.extends&&r[e.extends]&&(o=r[e.extends]),a.default.fillIn(this.defaultValues,o.defaultValues),a.default.fillIn(this.methods,o.methods),a.default.fillIn(this.computed,o.computed),a.default.fillIn(this.scopes,o.scopes),a.default.fillIn(this.actions,o.actions),this.endpoint="endpoint"in t?t.endpoint:this.name}var n=this,r=n.definitions;if(a.default._s(e)&&(e={name:e.replace(/\s/gi,"")}),!a.default._o(e))throw a.default._oErr("definition");if(!a.default._s(e.name))throw new f.default.IA('"name" must be a string!');if(r[e.name])throw new f.default.R(e.name+" is already registered!");try{var i,u,c=function(){if(e.extends&&r[e.extends]?t.prototype=r[e.extends]:t.prototype=n.defaults,r[e.name]=new t(e),i=r[e.name],i.getResource=function(e){return n.definitions[e]},i.logFn("Preparing resource."),!a.default._s(i.idAttribute))throw new f.default.IA('"idAttribute" must be a string!');i.relations&&(i.relationList=[],i.relationFields=[],a.default.forOwn(i.relations,function(e,t){a.default.forOwn(e,function(n,r){a.default._a(n)||(e[r]=[n]),a.default.forEach(e[r],function(e){e.type=t,e.relation=r,e.name=i.name,i.relationList.push(e),e.localField&&i.relationFields.push(e.localField)})})}),i.relations.belongsTo&&(i.parents={},a.default.forOwn(i.relations.belongsTo,function(e,t){a.default.forEach(e,function(e){e.parent&&(i.parent=t,i.parentKey=e.localKey,i.parentField=e.localField,i.parents[t]={key:i.parentKey,field:i.parentField})})})),"function"==typeof Object.freeze&&(Object.freeze(i.relations),Object.freeze(i.relationList))),u=i.class=a.default.pascalCase(i.name);try{"function"==typeof i.useClass?(i.csp?i[u]=function(){i.useClass.call(this)}:i[u]=new Function("def","return function "+u+"() { def.useClass.call(this); }")(i),i[u].prototype=function(e){function t(){}return t.prototype=e,new t}(i.useClass.prototype)):i.csp?i[u]=function(){}:i[u]=new Function("return function "+u+"() {}")()}catch(e){i[u]=function(){}}a.default.forOwn(i.methods,function(e,t){i[u].prototype[t]=e}),i[u].prototype.set=function(e,t){var n=this;return a.default.set(this,e,t),i.compute(this),i.instanceEvents&&setTimeout(function(){n.emit("DS.change",i,n)},0),i.handleChange(this),this},i[u].prototype.get=function(e){return a.default.get(this,e)},a.default.applyRelationGettersToTarget(n,i,i[u].prototype);var o=null;i.hasOwnProperty("omit")?o=n.defaults.omit:(o=i.omit,i.omit=[]),i.omit=i.omit.concat(o||[]),a.default.forOwn(i.computed,function(e,t){if(a.default.isFunction(e)&&(i.computed[t]=[e],e=i.computed[t]),i.methods&&t in i.methods&&i.errorFn('Computed property "'+t+'" conflicts with previously defined prototype method!'),i.omit.push(t),a.default.isArray(e)){var n;if(1===e.length){var r=e[0].toString().match(/function.*?\(([\s\S]*?)\)/);n=r[1].split(","),n=a.default.filter(n,function(e){return e}),i.computed[t]=n.concat(e),e=i.computed[t],n.length&&i.errorFn("Use the computed property array syntax for compatibility with minified code!")}n=e.slice(0,e.length-1),a.default.forEach(n,function(e,t){n[t]=e.trim()}),e.deps=a.default.filter(n,function(e){return!!e})}else a.default.isObject(e)&&Object.defineProperty(i[u].prototype,t,e)}),a.default.forEach(s,function(e){i[u].prototype["DS"+a.default.pascalCase(e)]=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return r.unshift(this[i.idAttribute]||this),r.unshift(i.name),n[e].apply(n,r)}}),i[u].prototype.DSCreate=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.unshift(this),t.unshift(i.name),n.create.apply(n,t)},n.store[i.name]={collection:[],expiresHeap:new a.default.BinaryHeap(function(e){return e.expires},function(e,t){return e.item===t}),completedQueries:{},queryData:{},pendingQueries:{},index:{},modified:{},saved:{},previousAttributes:{},observers:{},changeHistories:{},changeHistory:[],collectionModified:0,temporaryItems:{}};var c=n.store[i.name];i.reapInterval&&setInterval(function(){return i.reap()},i.reapInterval);var l=["registerAdapter","getAdapterName","getAdapter","is","!clear"];for(var d in n)"function"==typeof n[d]&&l.push(d);a.default.forEach(l,function(e){var t=e;"!"!==t[0]&&(n[t].shorthand!==!1?(i[t]=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return r.unshift(i.name),n[t].apply(n,r)},i[t].before=function(e){var n=i[t];i[t]=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return n.apply(i,e.apply(i,r)||r)}}):i[t]=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return n[t].apply(n,r)})}),i.beforeValidate=a.default.promisify(i.beforeValidate),i.validate=a.default.promisify(i.validate),i.afterValidate=a.default.promisify(i.afterValidate),i.beforeCreate=a.default.promisify(i.beforeCreate),i.afterCreate=a.default.promisify(i.afterCreate),i.afterFind=a.default.promisify(i.afterFind),i.afterFindAll=a.default.promisify(i.afterFindAll),i.afterLoadRelations=a.default.promisify(i.afterLoadRelations),i.beforeUpdate=a.default.promisify(i.beforeUpdate),i.afterUpdate=a.default.promisify(i.afterUpdate),i.beforeDestroy=a.default.promisify(i.beforeDestroy),i.afterDestroy=a.default.promisify(i.afterDestroy);var p=void 0;return i.hasOwnProperty("defaultAdapter")&&(p=i.defaultAdapter),a.default.forOwn(i.actions,function(e,t){if(i[t]&&!i.actions[t])throw new Error('Cannot override existing method "'+t+'"!');e.request=e.request||function(e){return e},e.response=e.response||function(e){return e},e.responseError=e.responseError||function(e){return a.default.Promise.reject(e)},i[t]=function(n,r){a.default._o(n)&&(r=n),r=r||{};var o=i.getAdapter(e.adapter||p||"http"),u=a.default.deepMixIn({},e);if(!r.hasOwnProperty("endpoint")&&u.endpoint&&(r.endpoint=u.endpoint),"function"==typeof r.getEndpoint)u.url=r.getEndpoint(i,r);else{var f=[r.basePath||i.basePath||o.defaults.basePath,o.getEndpoint(i,a.default._sn(n)?n:null,r)];a.default._sn(n)&&f.push(n),f.push(e.pathname||t),u.url=a.default.makePath.apply(null,f)}return u.method=u.method||"GET",u.resourceName=i.name,a.default.deepMixIn(u,r),new a.default.Promise(function(e){return e(u)}).then(r.request||e.request).then(function(e){return o.HTTP(e)}).then(function(e){return e&&e.config&&(e.config.resourceName=i.name),e}).then(r.response||e.response,r.responseError||e.responseError)}}),a.default.Events(i),i.handleChange=function(e){c.collectionModified=a.default.updateTimestamp(c.collectionModified),i.notify&&setTimeout(function(){i.emit("DS.change",i,e)},0)},i.logFn("Done preparing resource."),{v:i}}();if("object"===("undefined"==typeof c?"undefined":o(c)))return c.v}catch(t){throw n.defaults.errorFn(t),delete r[e.name],delete n.store[e.name],t}}},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e.exports=function(e,t,r){var o=this,i=o.utils,a=o.definitions[e],u=o.store[e],f=void 0,s=!1;if(t=i.resolveId(a,t),!a)throw new o.errors.NER(e);if(!i._sn(t))throw i._snErr("id");r=i._(a,r),r.logFn("eject",t,r);for(var c=0;c<u.collection.length;c++)if(u.collection[c][a.idAttribute]==t){f=u.collection[c],u.expiresHeap.remove(f),s=!0;break}if(s){var l=function(){a.beforeEject(r,f),r.notify&&a.emit("DS.beforeEject",a,f);var e=[];return i.forOwn(u.queryData,function(t,n){t.$$injected&&i.remove(t,f),!t.length&&r.clearEmptyQueries&&e.push(n)}),i.forEach(u.changeHistories[t],function(e){i.remove(u.changeHistory,e)}),i.forEach(e,function(e){delete u.completedQueries[e],delete u.queryData[e]}),u.observers[t]&&"function"==typeof u.observers[t].close&&u.observers[t].close(),delete u.observers[t],delete u.index[t],delete u.previousAttributes[t],delete u.completedQueries[t],delete u.pendingQueries[t],delete u.changeHistories[t],delete u.modified[t],delete u.saved[t],a.instanceEvents&&f.off&&f.off(),u.collection.splice(c,1),a.handleChange(f),a.afterEject(r,f),r.notify&&a.emit("DS.afterEject",a,f),{v:f}}();if("object"===("undefined"==typeof l?"undefined":n(l)))return l.v}}},function(e,t){"use strict";e.exports=function(e,t,n){var r=this,o=r.utils,i=r.definitions[e];if(t=t||{},!i)throw new r.errors.NER(e);if(!o._o(t))throw o._oErr("params");n=o._(i,n),i.logFn("ejectAll",t,n),o.applyScope(i,t,n);var a=r.store[e],u=o.toJson(t),f=void 0;return o.isEmpty(t)?(f=i.getAll(),a.completedQueries={}):(f=i.filter(t),delete a.completedQueries[u]),o.forEach(f,function(e){e&&e[i.idAttribute]&&i.eject(e[i.idAttribute],n)}),i.handleChange(f),f}},function(e,t){"use strict";e.exports=function(e,t,n){var r=this,o=r.utils,i=r.definitions[e];if(!i)throw new r.errors.NER(e);if(t&&!o._o(t))throw o._oErr("params");return t=t||{},n=o._(i,n),n.logFn("filter",t,n),o.applyScope(i,t,n),i.defaultFilter.call(r,r.store[e].collection,e,t,n)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=this,r=e.name;return function(o,i,a,f,s){var c=this,l=void 0,d=f&&f(e.idAttribute)?f(e.idAttribute):c[e.idAttribute];if(u.default.forEach(e.relationFields,function(e){delete o[e],delete i[e],delete a[e]}),(!u.default.isEmpty(o)||!u.default.isEmpty(i)||!u.default.isEmpty(a)||s)&&(l=n.get(r,d),t.modified[d]=u.default.updateTimestamp(t.modified[d]),l&&e.instanceEvents&&setTimeout(function(){l.emit("DS.change",e,l)},0),e.handleChange(l),e.keepChangeHistory)){var p={resourceName:r,target:l,added:o,removed:i,changed:a,timestamp:t.modified[d]};t.changeHistories[d].push(p),t.changeHistory.push(p)}e.computed&&(l=l||n.get(r,d),u.default.forOwn(e.computed,function(e,t){if(!u.default._o(e)){var n=!1;u.default.forEach(e.deps,function(e){!(e in o||e in i||e in a)&&t in l||(n=!0)}),n=n||!e.deps.length,n&&u.default.compute.call(l,e,t)}})),e.idAttribute in a&&e.errorFn('Doh! You just changed the primary key of an object! Your data for the "'+r+'" resource is now in an undefined (probably broken) state.')}}function i(e,t,n,r){var a=this,f=void 0;if(u.default._a(n)){f=[];for(var c=0;c<n.length;c++)f.push(i.call(a,e,t,n[c],r))}else{var l=e.computed,d=e.idAttribute;if(l&&l[d]?!function(){var e=[];u.default.forEach(l[d].deps,function(t){e.push(n[t])}),n[d]=l[d][l[d].length-1].apply(n,e)}():r.temporary&&(n[d]=u.default.guid()),!(d in n)){var p=new s.default.R(e.name+'.inject: "attrs" must contain the property specified by "idAttribute"!');throw r.errorFn(p),p}try{!function(){u.default.forEach(e.relationList,function(t){var o=t.relation,i=a.definitions[o],f=n[t.localField];if("function"==typeof t.inject)t.inject(e,t,n);else if(f&&t.inject!==!1){if(!i)throw new s.default.R(e.name+" relation is defined but the resource is not!");if(u.default._a(f))!function(){var s=[];u.default.forEach(f,function(f){if(f!==a.store[o].index[f[i.idAttribute]])try{var c=i.inject(f,r.orig());t.foreignKey&&u.default.set(c,t.foreignKey,n[e.idAttribute]),s.push(c)}catch(e){r.errorFn(e,"Failed to inject "+t.type+' relation: "'+o+'"!')}})}();else if(f!==a.store[o].index[f[i.idAttribute]])try{var c=i.inject(n[t.localField],r.orig());t.foreignKey&&u.default.set(c,t.foreignKey,n[e.idAttribute]),t.localKey&&u.default.set(n,t.localKey,u.default.get(c,i.idAttribute))}catch(e){r.errorFn(e,"Failed to inject "+t.type+' relation: "'+o+'"!')}}});var i=n[d],c=e.get(i),l=c?t.modified[i]:0;if(c)"merge"===r.onConflict?(u.default.deepMixIn(c,n),u.default.forOwn(e.computed,function(e,t){u.default.compute.call(c,e,t)})):"replace"===r.onConflict&&(u.default.forOwn(e.computed,function(e,t){u.default.compute.call(n,e,t)}),u.default.forOwn(c,function(t,r){r!==e.idAttribute&&(n.hasOwnProperty(r)||delete c[r])}),u.default.forOwn(n,function(t,n){n!==e.idAttribute&&(c[n]=t)})),e.resetHistoryOnInject&&a.commit(e.name,i),t.observers[i]&&"function"==typeof t.observers[i]&&t.observers[i].deliver();else{n instanceof e[e.class]?c=n:(c=new e[e.class],r.applyDefaultsOnInject&&r.defaultValues&&u.default.deepMixIn(c,u.default.copy(r.defaultValues))),e.instanceEvents&&"function"!=typeof c.emit&&u.default.Events(c),u.default.forEach(e.relationList,function(t){("boolean"==typeof t.link?t.link:!!e.linkRelations)&&delete n[t.localField]}),u.default.deepMixIn(c,n),t.collection.push(c),t.changeHistories[i]=[];var p=o.call(a,e,t);e.watchChanges&&(t.observers[i]=new a.observe.ObjectObserver(c),t.observers[i].open(p,c)),t.index[i]=c,p.call(c,{},{},{},null,!0),t.previousAttributes[i]=u.default.copy(c,null,null,null,e.relationFields),r.temporary&&(t.temporaryItems[i]=!0)}t.modified[i]=l&&t.modified[i]===l?u.default.updateTimestamp(t.modified[i]):t.modified[i],t.expiresHeap.remove(c);var h=(new Date).getTime();t.expiresHeap.push({item:c,timestamp:h,expires:e.maxAge?h+e.maxAge:Number.MAX_VALUE}),f=c}()}catch(e){r.errorFn(e,n)}}return f}var a=n(2),u=r(a),f=n(3),s=r(f);e.exports=function(e,t,n){var r=this,o=r.definitions[e],a=r.store[e],f=void 0;if(!o)throw new s.default.NER(e);if(!u.default._o(t)&&!u.default._a(t))throw new s.default.IA(e+'.inject: "attrs" must be an object or an array!');return n=u.default._(o,n),n.logFn("inject",t,n),n.beforeInject(n,t),n.notify&&o.emit("DS.beforeInject",o,t),f=i.call(r,o,a,t,n),o.handleChange(f),n.afterInject(n,f),n.notify&&o.emit("DS.afterInject",o,f),f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={create:n(48),destroy:n(49),destroyAll:n(50),find:n(51),findAll:n(52),loadRelations:n(53),reap:n(54),refresh:function(e,t,n){var r=this,o=r.utils;return new o.Promise(function(i,a){var u=r.definitions[e];t=o.resolveId(r.definitions[e],t),u?o._sn(t)?(n=o._(u,n),n.bypassCache=!0,n.logFn("refresh",t,n),i(r.get(e,t))):a(o._snErr("id")):a(new r.errors.NER(e))}).then(function(o){return o?r.find(e,t,n):o}).catch(r.errorFn("refresh",e,t,n))},refreshAll:function(e,t,n){var r=this,o=r.utils,i=r.definitions[e];return t=t||{},new o.Promise(function(a,u){i?o._o(t)?(n=o._(i,n),n.bypassCache=!0,n.logFn("refreshAll",t,n),a(r.filter(e,t,n))):u(o._oErr("params")):u(new r.errors.NER(e))}).then(function(a){return n.bypassCache=!0,r.findAll(e,t,n).then(function(e){return o.forEach(a,function(t){e.indexOf(t)===-1&&i.eject(t)}),e})}).catch(r.errorFn("refreshAll",e,t,n))},save:n(55),update:n(56),updateAll:n(57)}},function(e,t){"use strict";e.exports=function(e,t,n){var r=this,o=r.utils,i=r.definitions[e],a=r.store[e],u=void 0;n=n||{},t=t||{};var f=void 0;if(i)if(o._o(t)){if(n=o._(i,n),n.upsert&&o._sn(t[i.idAttribute])&&!a.temporaryItems[t[i.idAttribute]])return r.update(e,t[i.idAttribute],t,n);n.logFn("create",t,n)}else f=o._oErr("attrs");else f=new r.errors.NER(e);return new o.Promise(function(e,n){f?n(f):e(t)}).then(function(e){return n.beforeValidate.call(e,n,e)}).then(function(e){return n.validate.call(e,n,e)}).then(function(e){return n.afterValidate.call(e,n,e)}).then(function(e){return n.beforeCreate.call(e,n,e)}).then(function(e){return n.notify&&i.emit("DS.beforeCreate",i,e),u=r.getAdapterName(n),r.adapters[u].create(i,o.omit(e,n.omit),n)}).then(function(e){return n.afterCreate.call(e,n,e)}).then(function(t){if(n.notify&&i.emit("DS.afterCreate",i,t),n.cacheResponse){var a=r.inject(i.name,t,n.orig()),u=a[i.idAttribute],f=r.store[e];return f.completedQueries[u]=(new Date).getTime(),f.saved[u]=o.updateTimestamp(f.saved[u]),a}return r.createInstance(e,t,n)}).then(function(e){return o.respond(e,{adapter:u},n)}).catch(r.errorFn("create",e,t,n))}},function(e,t){"use strict";e.exports=function(e,t,n){var r=this,o=r.utils,i=r.definitions[e],a=void 0,u=void 0;return new o.Promise(function(u,f){t=o.resolveId(i,t),i?o._sn(t)?(a=i.get(t)||{id:t},n=o._(i,n),n.logFn("destroy",t,n),u(a)):f(o._snErr("id")):f(new r.errors.NER(e))}).then(function(e){return n.beforeDestroy.call(e,n,e)}).then(function(e){return n.notify&&i.emit("DS.beforeDestroy",i,e),n.eagerEject&&i.eject(t),u=i.getAdapter(n),u.destroy(i,t,n)}).then(function(){return n.afterDestroy.call(a,n,a)}).then(function(e){return n.notify&&i.emit("DS.afterDestroy",i,e),i.eject(t),o.respond(t,{adapter:u},n)}).catch(function(o){return n&&n.eagerEject&&a&&i.inject(a,{notify:!1}),r.errorFn("destroy",e,t,n)(o)})}},function(e,t){"use strict";e.exports=function(e,t,n){var r=this,o=r.utils,i=r.definitions[e],a=void 0,u=void 0,f=void 0;return t=t||{},new o.Promise(function(a,u){i?o._o(t)?(n=o._(i,n),n.logFn("destroyAll",t,n),o.applyScope(i,t,n),a()):u(o._oErr("attrs")):u(new r.errors.NER(e))}).then(function(){return u=i.defaultFilter.call(r,e,t),n.beforeDestroy(n,u)}).then(function(){return n.notify&&i.emit("DS.beforeDestroy",i,u),n.eagerEject&&(a=i.ejectAll(t)),f=i.getAdapterName(n),r.adapters[f].destroyAll(i,t,n)}).then(function(){return n.afterDestroy(n,u)}).then(function(){return n.notify&&i.emit("DS.afterDestroy",i,u),a||i.ejectAll(t)}).then(function(e){return o.respond(e,{adapter:f},n)}).catch(function(o){return n&&n.eagerEject&&a&&i.inject(a,{notify:!1}),r.errorFn("destroyAll",e,t,n)(o)})}},function(e,t){"use strict";e.exports=function(e,t,n){var r=this,o=r.utils,i=r.definitions[e],a=r.store[e],u=void 0;return new o.Promise(function(u,f){if(i)if(o._sn(t)){n=o._(i,n),n.logFn("find",t,n),n.params&&(n.params=o.copy(n.params)),!n.bypassCache&&n.cacheResponse||delete a.completedQueries[t];var s=n.maxAge&&t in a.completedQueries&&a.completedQueries[t]+n.maxAge<(new Date).getTime();n.findStrictCache&&!(t in a.completedQueries)||!i.get(t)||n.bypassCache||s?(delete a.completedQueries[t],u()):u(i.get(t))}else f(o._snErr("id"));else f(new r.errors.NER(e))}).then(function(f){if(f)return f;var s=o.isFunction(n.usePendingFind)?n.usePendingFind.call(this,e,t,n):n.usePendingFind;if(!(t in a.pendingQueries)&&s){var c=void 0,l=n.findStrategy||n.strategy;if("fallback"===l){var d=function e(a){return u=i.getAdapterName((n.findFallbackAdapters||n.fallbackAdapters)[a]),r.adapters[u].find(i,t,n).catch(function(t){return a++,a<n.fallbackAdapters.length?e(a):o.Promise.reject(t)})};c=d(0)}else u=i.getAdapterName(n),c=r.adapters[u].find(i,t,n);a.pendingQueries[t]=c.then(function(e){return n.afterFind.call(e,n,e)}).then(function(e){if(delete a.pendingQueries[t],n.cacheResponse){var r=i.inject(e,n.orig());return a.completedQueries[t]=(new Date).getTime(),a.saved[t]=o.updateTimestamp(a.saved[t]),r}return i.createInstance(e,n.orig())})}return a.pendingQueries[t]}).then(function(e){return o.respond(e,{adapter:u},n)}).catch(function(o){return a&&delete a.pendingQueries[t],r.errorFn("find",e,t,n)(o)})}},function(e,t){"use strict";function n(e,t,n,r){var o=this,i=o.utils,a=o.definitions[t],u=o.store[t],f=a.idAttribute,s=(new Date).getTime();e=e||[],delete u.pendingQueries[n],u.completedQueries[n]=s;var c=a.inject(e,r.orig());return i._a(c)?i.forEach(c,function(e){if(e){var t=e[f];t&&(u.completedQueries[t]=s,u.saved[t]=i.updateTimestamp(u.saved[t]))}}):(r.errorFn("response is expected to be an array!"),u.completedQueries[c[f]]=s),c}e.exports=function(e,t,r){var o=this,i=o.utils,a=o.definitions[e],u=o.store[e],f=void 0,s=void 0;return new i.Promise(function(n,s){if(t=t||{},o.definitions[e])if(i._o(t)){r=i._(a,r),f=i.toJson(t),r.logFn("findAll",t,r),r.params&&(r.params=i.copy(r.params)),i.applyScope(a,t,r),!r.bypassCache&&r.cacheResponse||(delete u.completedQueries[f],delete u.queryData[f]);var c=r.maxAge&&f in u.completedQueries&&u.completedQueries[f]+r.maxAge<(new Date).getTime();f in u.completedQueries&&!c?n(r.useFilter?r.localKeys?a.getAll(r.localKeys,r.orig()):a.filter(t,r.orig()):u.queryData[f]):n()}else s(i._oErr("params"));else s(new o.errors.NER(e))}).then(function(c){if(c)return c;var l=i.isFunction(r.usePendingFindAll)?r.usePendingFindAll.call(this,e,t,r):r.usePendingFindAll;if(!(f in u.pendingQueries)&&l){var d=void 0,p=r.findAllStrategy||r.strategy;if("fallback"===p){var h=function e(n){return s=a.getAdapterName((r.findAllFallbackAdapters||r.fallbackAdapters)[n]),o.adapters[s].findAll(a,t,r).catch(function(t){return n++,n<r.fallbackAdapters.length?e(n):i.Promise.reject(t)})};d=h(0)}else s=a.getAdapterName(r),d=o.adapters[s].findAll(a,t,r);u.pendingQueries[f]=d.then(function(e){return r.afterFindAll.call(e,r,e)}).then(function(t){return delete u.pendingQueries[f],r.cacheResponse?(u.queryData[f]=n.call(o,t,e,f,r),u.queryData[f].$$injected=!0,u.queryData[f]):(i.forEach(t,function(e,n){t[n]=a.createInstance(e,r.orig())}),t)})}return u.pendingQueries[f]}).then(function(e){return i.respond(e,{adapter:s},r)}).catch(function(n){return u&&delete u.pendingQueries[f],o.errorFn("findAll",e,t,r)(n)})}},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(e,t,r,o){var i=this,a=i.utils,u=i.errors,f=i.definitions[e],s=void 0;return new a.Promise(function(i,c){a._sn(t)&&(t=f.get(t)),a._s(r)&&(r=[r]),r=r||[],f?a._o(t)?a._a(r)?!function(){s=a._(f,o),s.logFn("loadRelations",t,r,s);var e=[];a.forEach(f.relationList,function(i){var u=i.relation,c=f.getResource(u),l=a._(c,o);if(!r.length||a.contains(r,u)||a.contains(r,i.localField)){var d=void 0,p={};l.allowSimpleWhere?p[i.foreignKey]=t[f.idAttribute]:(p.where={},p.where[i.foreignKey]={"==":t[f.idAttribute]});var h=l.orig(),v=i.localKey?a.get(t,i.localKey):null,y=!(!v&&0!==v);if("function"==typeof i.load)d=i.load(f,i,t,h);else if("hasMany"===i.type){if(i.localKeys){delete p[i.foreignKey];var m=a.get(t,i.localKeys)||[];m=a._a(m)?m:a.keys(m),p.where=n({},c.idAttribute,{in:m}),h.localKeys=m}else i.foreignKeys&&(delete p[i.foreignKey],p.where=n({},i.foreignKeys,{contains:t[f.idAttribute]}));d=c.findAll(p,h)}else"hasOne"===i.type?i.localKey&&y?d=c.find(v,h):i.foreignKey&&(d=c.findAll(p,h).then(function(e){return e.length?e[0]:null})):y&&(d=c.find(v,h));d&&(s.linkRelations||(d=d.then(function(e){t[i.localField]=e})),e.push(d))}}),i(e)}():c(new u.IA('"relations" must be a string or an array!')):c(new u.IA('"instance(id)" must be a string, number or object!')):c(new u.NER(e))}).then(function(e){return a.Promise.all(e)}).then(function(){return s.afterLoadRelations.call(t,s,t)}).catch(i.errorFn("loadRelations",e,t,r,o))}},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e.exports=function(e,t){var r=this,o=r.utils,i=r.definitions[e],a=r.store[e];return new o.Promise(function(n,u){if(i){t=o._(i,t),t.hasOwnProperty("notify")||(t.notify=!1),t.logFn("reap",t);for(var f=[],s=(new Date).getTime(),c=void 0;(c=a.expiresHeap.peek())&&c.expires<s;)f.push(c.item),delete c.item,a.expiresHeap.pop();n(f)}else u(new r.errors.NER(e))}).then(function(e){if(e.length&&(i.beforeReap(t,e),t.notify&&i.emit("DS.beforeReap",i,e)),"inject"===t.reapAction)!function(){var t=(new Date).getTime();o.forEach(e,function(e){a.expiresHeap.push({item:e,timestamp:t,expires:i.maxAge?t+i.maxAge:Number.MAX_VALUE})})}();else if("eject"===t.reapAction)o.forEach(e,function(e){i.eject(e[i.idAttribute])});else if("refresh"===t.reapAction){var r=function(){var t=[];return o.forEach(e,function(e){t.push(i.refresh(e[i.idAttribute]))}),{v:o.Promise.all(t)}}();if("object"===("undefined"==typeof r?"undefined":n(r)))return r.v}return e}).then(function(e){return e.length&&(i.afterReap(t,e),t.notify&&i.emit("DS.afterReap",i,e)),e}).catch(r.errorFn("reap",e,t))}},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e.exports=function(e,t,r){var o=this,i=o.utils,a=o.errors,u=o.definitions[e],f=o.store[e],s=void 0,c=void 0,l=void 0;return new i.Promise(function(n,o){t=i.resolveId(u,t),u?i._sn(t)?u.get(t)?(s=u.get(t),r=i._(u,r),r.logFn("save",t,r),n(s)):o(new a.R('id "'+t+'" not found in cache!')):o(i._snErr("id")):o(new a.NER(e))}).then(function(e){return r.beforeValidate.call(e,r,e)}).then(function(e){return r.validate.call(e,r,e)}).then(function(e){return r.afterValidate.call(e,r,e)}).then(function(e){return r.beforeUpdate.call(e,r,e)}).then(function(e){if(r.notify&&u.emit("DS.beforeUpdate",u,e),r.changesOnly){var a,s=function(){f.observers[t]&&"function"==typeof f.observers[t]&&f.observers[t].deliver();var n=[],o=u.changes(t);for(a in o.added)n.push(a);for(a in o.changed)n.push(a);return i.forEach(r.always,function(e){n.push(e)}),o=i.pick(e,n),i.isEmpty(o)?(r.logFn("save - no changes",t,r),c=!0,{v:e}):void(e=o)}();if("object"===("undefined"==typeof s?"undefined":n(s)))return s.v}return l=u.getAdapterName(r),o.adapters[l].update(u,t,i.omit(e,r.omit),r)}).then(function(e){return r.afterUpdate.call(e,r,e)}).then(function(e){if(r.notify&&u.emit("DS.afterUpdate",u,e),c)return e;if(r.cacheResponse){var n=u.inject(e,r.orig());return f.saved[t]=i.updateTimestamp(f.saved[t]),u.resetHistoryOnInject||(f.previousAttributes[t]=i.copy(n,null,null,null,u.relationFields)),n}return u.createInstance(e,r.orig())}).then(function(e){return i.respond(e,{adapter:l},r)}).catch(o.errorFn("save",e,t,r))}},function(e,t){"use strict";e.exports=function(e,t,n,r){var o=this,i=o.utils,a=o.errors,u=o.definitions[e],f=void 0;return new i.Promise(function(o,f){t=i.resolveId(u,t),u?i._sn(t)?(r=i._(u,r),r.logFn("update",t,n,r),o(n)):f(i._snErr("id")):f(new a.NER(e))}).then(function(e){return r.beforeValidate.call(e,r,e)}).then(function(e){return r.validate.call(e,r,e)}).then(function(e){return r.afterValidate.call(e,r,e)}).then(function(e){return r.beforeUpdate.call(e,r,e)}).then(function(e){return r.notify&&u.emit("DS.beforeUpdate",u,e),f=u.getAdapterName(r),o.adapters[f].update(u,t,i.omit(e,r.omit),r)}).then(function(e){return r.afterUpdate.call(e,r,e)}).then(function(t){if(r.notify&&u.emit("DS.afterUpdate",u,t),r.cacheResponse){var n=u.inject(t,r.orig()),a=o.store[e],f=n[u.idAttribute];return a.saved[f]=i.updateTimestamp(a.saved[f]),u.resetHistoryOnInject||(a.previousAttributes[f]=i.copy(n,null,null,null,u.relationFields)),n}return u.createInstance(t,r.orig())}).then(function(e){return i.respond(e,{adapter:f},r)}).catch(o.errorFn("update",e,t,n,r))}},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e.exports=function(e,t,r,o){var i=this,a=i.utils,u=i.errors,f=i.definitions[e],s=void 0;return new a.Promise(function(n,i){f?(o=a._(f,o),o.logFn("updateAll",t,r,o),a.applyScope(f,r,o),n(t)):i(new u.NER(e))}).then(function(e){return o.beforeValidate.call(e,o,e)}).then(function(e){return o.validate.call(e,o,e)}).then(function(e){return o.afterValidate.call(e,o,e)}).then(function(e){return o.beforeUpdate.call(e,o,e)}).then(function(e){return o.notify&&f.emit("DS.beforeUpdate",f,e),s=f.getAdapterName(o),i.adapters[s].updateAll(f,a.omit(e,o.omit),r,o)}).then(function(e){return o.afterUpdate.call(e,o,e)}).then(function(r){o.notify&&f.emit("DS.afterUpdate",f,t);var u=o.orig();if(o.cacheResponse){var s=function(){var t=f.inject(r,u),n=i.store[e];return a.forEach(t,function(e){var t=e[f.idAttribute];n.saved[t]=a.updateTimestamp(n.saved[t]),f.resetHistoryOnInject||(n.previousAttributes[t]=a.copy(e,null,null,null,f.relationFields))}),{v:t}}();if("object"===("undefined"==typeof s?"undefined":n(s)))return s.v}else{var c=function(){var e=[];return a.forEach(r,function(t){e.push(f.createInstance(t,u))}),{v:e}}();if("object"===("undefined"==typeof c?"undefined":n(c)))return c.v;
}}).then(function(e){return a.respond(e,{adapter:s},o)}).catch(i.errorFn("updateAll",e,t,r,o))}}])});
//# sourceMappingURL=js-data-debug.min.js.map