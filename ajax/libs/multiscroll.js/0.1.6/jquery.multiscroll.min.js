/**
 * multiscroll.js 0.1.6 Beta
 * https://github.com/alvarotrigo/multiscroll.js
 * MIT licensed
 *
 * Copyright (C) 2013 alvarotrigo.com - A project by Alvaro Trigo
 */
(function(a){a.fn.multiscroll=function(b){function q(){var c=window.location.hash.replace("#","");if(c.length){var b=a(".ms-left").find('[data-anchor="'+c+'"]');"undefined"!==typeof lastScrolledDestiny&&c===lastScrolledDestiny||e(b)}}function r(){t=a(window).height();a(".ms-tableCell").each(function(){a(this).css({height:u(a(this).parent())})});v();a.isFunction(b.afterResize)&&b.afterResize.call(this)}function v(){b.css3?(m(a(".ms-left"),"translate3d(0px, -"+a(".ms-left").find(".ms-section.active").position().top+ "px, 0px)",!1),m(a(".ms-right"),"translate3d(0px, -"+a(".ms-right").find(".ms-section.active").position().top+"px, 0px)",!1)):(a(".ms-left").css("top",-a(".ms-left").find(".ms-section.active").position().top),a(".ms-right").css("top",-a(".ms-right").find(".ms-section.active").position().top))}function e(c){var d=c.index(),w=a(".ms-right").find(".ms-section").eq(z-1-d),f=c.data("anchor"),e=a(".ms-left .ms-section.active").index()+1,g=A(c);h=!0;b.anchors.length&&(location.hash=f);var k={left:c.position().top, right:w.position().top};w.addClass("active").siblings().removeClass("active");c.addClass("active").siblings().removeClass("active");b.css3?(a.isFunction(b.onLeave)&&b.onLeave.call(this,e,d+1,g),c="translate3d(0px, -"+k.left+"px, 0px)",k="translate3d(0px, -"+k.right+"px, 0px)",m(a(".ms-left"),c,!0),m(a(".ms-right"),k,!0),setTimeout(function(){a.isFunction(b.afterLoad)&&b.afterLoad.call(this,f,d+1);setTimeout(function(){h=!1},600)},b.scrollingSpeed)):(a.isFunction(b.onLeave)&&b.onLeave.call(this,e, d+1,g),a(".ms-left").animate({top:-k.left},b.scrollingSpeed,b.easing,function(){a.isFunction(b.afterLoad)&&b.afterLoad.call(this,f,d+1);setTimeout(function(){h=!1},600)}),a(".ms-right").animate({top:-k.right},b.scrollingSpeed,b.easing));lastScrolledDestiny=f;B(f);C(f,d)}function x(){document.addEventListener?(document.addEventListener("mousewheel",g,!1),document.addEventListener("wheel",g,!1)):document.attachEvent("onmousewheel",g)}function g(c){c=window.event||c;c=Math.max(-1,Math.min(1,c.wheelDelta|| -c.deltaY||-c.detail));h||(0>c?a.fn.multiscroll.moveSectionDown():a.fn.multiscroll.moveSectionUp());return!1}function m(a,b,e){a.toggleClass("ms-easing",e);a.css({"-webkit-transform":b,"-moz-transform":b,"-ms-transform":b,transform:b})}function C(c,d){b.navigation&&(a("#multiscroll-nav").find(".active").removeClass("active"),c?a("#multiscroll-nav").find('a[href="#'+c+'"]').addClass("active"):a("#multiscroll-nav").find("li").eq(d).find("a").addClass("active"))}function B(c){b.menu&&(a(b.menu).find(".active").removeClass("active"), a(b.menu).find('[data-menuanchor="'+c+'"]').addClass("active"))}function A(c){var b=a(".ms-left .ms-section.active").index();c=c.index();return b>c?"up":"down"}function D(){var a=document.createElement("p"),b,e={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(a,null);for(var f in e)void 0!==a.style[f]&&(a.style[f]="translate3d(1px,1px,1px)",b=window.getComputedStyle(a).getPropertyValue(e[f])); document.body.removeChild(a);return void 0!==b&&0<b.length&&"none"!==b}function u(a){var d=t;if(b.paddingTop||b.paddingBottom)a=parseInt(a.css("padding-top"))+parseInt(a.css("padding-bottom")),d=t-a;return d}function E(c){var d=c.originalEvent;c.preventDefault();a(".ms-left .ms-section.active");h||(n=y(d).y,Math.abs(p-n)>a(window).height()/100*b.touchSensitivity&&(p>n?a.fn.multiscroll.moveSectionDown():n>p&&a.fn.multiscroll.moveSectionUp()))}function F(a){p=y(a.originalEvent).y}function y(a){var b= [];window.navigator.msPointerEnabled?(b.y=a.pageY,b.x=a.pageX):(b.y=a.touches[0].pageY,b.x=a.touches[0].pageX);return b}b=a.extend({verticalCentered:!0,scrollingSpeed:700,easing:"easeInQuart",menu:!1,sectionsColor:[],anchors:[],navigation:!1,navigationPosition:"right",navigationColor:"#000",navigationTooltips:[],loopBottom:!1,loopTop:!1,css3:!1,paddingTop:0,paddingBottom:0,fixedElements:null,normalScrollElements:null,keyboardScrolling:!0,touchSensitivity:5,sectionSelector:".ms-section",leftSelector:".ms-left", rightSelector:".ms-right",afterLoad:null,onLeave:null,afterRender:null,afterResize:null},b);var G="ontouchstart"in window||0<navigator.msMaxTouchPoints;".ms-right"!==b.rightSelector&&a(b.rightSelector).addClass("ms-right");".ms-left"!==b.leftSelector&&a(b.leftSelector).addClass("ms-left");var z=a(".ms-left").find(".ms-section").length,h=!1,l,t=a(window).height();x();G&&(MSPointer=window.PointerEvent?{down:"pointerdown",move:"pointermove"}:{down:"MSPointerDown",move:"MSPointerMove"},a(document).off("touchstart "+ MSPointer.down).on("touchstart "+MSPointer.down,F),a(document).off("touchmove "+MSPointer.move).on("touchmove "+MSPointer.move,E));b.css3&&(b.css3=D());a("html, body").css({overflow:"hidden",height:"100%"});".ms-section"!==b.sectionSelector&&a(b.sectionSelector).each(function(){a(this).addClass("ms-section")});b.navigation&&(a("body").append('<div id="multiscroll-nav"><ul></ul></div>'),l=a("#multiscroll-nav"),l.css("color",b.navigationColor),l.addClass(b.navigationPosition));a(".ms-right, .ms-left").css({width:"50%", position:"absolute",height:"100%","-ms-touch-action":"none"});a(".ms-right").css({right:"1px",top:"0","-ms-touch-action":"none","touch-action":"none"});a(".ms-left").css({left:"0",top:"0","-ms-touch-action":"none","touch-action":"none"});a(".ms-left .ms-section, .ms-right .ms-section").each(function(){var c=a(this).index();(b.paddingTop||b.paddingBottom)&&a(this).css("padding",b.paddingTop+" 0 "+b.paddingBottom+" 0");"undefined"!==typeof b.sectionsColor[c]&&a(this).css("background-color",b.sectionsColor[c]); "undefined"!==typeof b.anchors[c]&&a(this).attr("data-anchor",b.anchors[c]);if(b.verticalCentered){var d=a(this);d.addClass("ms-table").wrapInner('<div class="ms-tableCell" style="height: '+u(d)+'px" />')}a(this).closest(".ms-left").length&&b.navigation&&(d="",b.anchors.length&&(d=b.anchors[c]),c=b.navigationTooltips[c],"undefined"===typeof c&&(c=""),b.navigation&&l.find("ul").append('<li data-tooltip="'+c+'"><a href="#'+d+'"><span></span></a></li>'))});a(".ms-right").html(a(".ms-right").find(".ms-section").get().reverse()); a(".ms-left .ms-section, .ms-right .ms-section").each(function(){var c=a(this).index();a(this).css({height:"100%"});!c&&b.navigation&&l.find("li").eq(c).find("a").addClass("active")}).promise().done(function(){a(".ms-left .ms-section.active").length||(a(".ms-right").find(".ms-section").last().addClass("active"),a(".ms-left").find(".ms-section").first().addClass("active"));a.isFunction(b.afterRender)&&b.afterRender.call(this);v();a(window).on("load",function(){var b=window.location.hash.replace("#", ""),d=a('.ms-left .ms-section[data-anchor="'+b+'"]');b.length&&e(d)})});a(window).on("hashchange",q);a(document).keydown(function(c){40!=c.which&&38!=c.which||c.preventDefault();if(b.keyboardScrolling&&!h)switch(c.which){case 38:case 33:a.fn.multiscroll.moveSectionUp();break;case 40:case 34:a.fn.multiscroll.moveSectionDown();break;case 36:a.fn.multiscroll.moveTo(1);break;case 35:a.fn.multiscroll.moveTo(a(".ms-left .ms-section").length)}});a(document).mousedown(function(a){if(1==a.button)return a.preventDefault(), !1});a(document).on("click","#multiscroll-nav a",function(b){b.preventDefault();b=a(this).parent().index();e(a(".ms-left .ms-section").eq(b))});a(document).on({mouseenter:function(){var c=a(this).data("tooltip");a('<div class="multiscroll-tooltip '+b.navigationPosition+'">'+c+"</div>").hide().appendTo(a(this)).fadeIn(200)},mouseleave:function(){a(this).find(".multiscroll-tooltip").fadeOut(200,function(){a(this).remove()})}},"#multiscroll-nav li");b.normalScrollElements&&(a(document).on("mouseenter", b.normalScrollElements,function(){a.fn.multiscroll.setMouseWheelScrolling(!1)}),a(document).on("mouseleave",b.normalScrollElements,function(){a.fn.multiscroll.setMouseWheelScrolling(!0)}));a(window).on("resize",r);a.fn.multiscroll.moveSectionUp=function(){var c=a(".ms-left .ms-section.active").prev(".ms-section");!c.length&&b.loopTop&&(c=a(".ms-left .ms-section").last());c.length&&e(c)};a.fn.multiscroll.moveSectionDown=function(){var c=a(".ms-left .ms-section.active").next(".ms-section");!c.length&& b.loopBottom&&(c=a(".ms-left .ms-section").first());c.length&&e(c)};a.fn.multiscroll.moveTo=function(b){var d="",d=isNaN(b)?a('.ms-left [data-anchor="'+b+'"]'):a(".ms-left .ms-section").eq(b-1);e(d)};a.fn.multiscroll.setKeyboardScrolling=function(a){b.keyboardScrolling=a};a.fn.multiscroll.setMouseWheelScrolling=function(a){a?x():document.addEventListener?(document.removeEventListener("mousewheel",g,!1),document.removeEventListener("wheel",g,!1)):document.detachEvent("onmousewheel",g)};a.fn.multiscroll.setScrollingSpeed= function(a){b.scrollingSpeed=a};var p=0,n=0;a.fn.multiscroll.destroy=function(){a.fn.multiscroll.setKeyboardScrolling(!1);a.fn.multiscroll.setMouseWheelScrolling(!1);a(window).off("hashchange",q).off("resize",r);a(document).off("mouseenter","#multiscroll-nav li").off("mouseleave","#multiscroll-nav li").off("click","#multiscroll-nav a")};a.fn.multiscroll.build=function(){a.fn.multiscroll.setKeyboardScrolling(!0);a.fn.multiscroll.setMouseWheelScrolling(!0);a(window).on("hashchange",q).on("resize",r); a(document).on("mouseenter","#multiscroll-nav li").on("mouseleave","#multiscroll-nav li").on("click","#multiscroll-nav a")}}})(jQuery);