!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.lory=b()}):"object"==typeof exports?module.exports=b():a.lory=b()}(this,function(){"use strict";var a=function(a,b){if("undefined"==typeof b&&(b=a,a=0),a>b){var c=a;a=b,b=c}return function(c){return Math.min(Math.max(c,a),b)}},b=function(a,b){var c={};return Object.keys(b).map(function(d){c[d]=a&&a.hasOwnProperty(d)?a[d]:b[d]}),c},c=function(c,d){var e,f,g,h,i,j,k,l,m=0,n={},o=c.querySelector(".js_frame"),p=o.querySelector(".js_slides"),q=c.querySelector(".js_prev"),r=c.querySelector(".js_next"),s={slidesToScroll:1,slideSpeed:300,rewindSpeed:600,snapBackSpeed:200,ease:"ease",rewind:!1,infinite:!1,beforeInit:function(){return!0},afterInit:function(){return!0},beforePrev:function(){return!0},beforeNext:function(){return!0},beforeMove:function(){return!0},beforeResize:function(){return!0}},t=function(a){var b=a.slice(0,n.infinite),c=a.slice(a.length-n.infinite,a.length);return b.forEach(function(a){var b=a.cloneNode(!0);p.appendChild(b)}),c.reverse().forEach(function(a){var b=a.cloneNode(!0);p.insertBefore(b,p.firstChild)}),p.addEventListener("webkitTransitionEnd",A),p.addEventListener("msTransitionEnd",A),p.addEventListener("oTransitionEnd",A),p.addEventListener("otransitionend",A),p.addEventListener("transitionend",A),Array.prototype.slice.call(p.children)},u=function(){n=b(d,s),n.beforeInit(),e={x:p.offsetLeft,y:p.offsetTop},h=n.infinite?t(Array.prototype.slice.call(p.children)):Array.prototype.slice.call(p.children),v(),q&&r&&(q.addEventListener("click",w),r.addEventListener("click",x)),p.addEventListener("touchstart",B),window.addEventListener("resize",E),n.afterInit()},v=function(){f=p.getBoundingClientRect().width||p.offsetWidth,g=o.getBoundingClientRect().width||o.offsetWidth,m=0,n.infinite?(y(-1*h[m+n.infinite].offsetLeft,0,null),m+=n.infinite,e.x=-1*h[m].offsetLeft):y(0,n.rewindSpeed,n.ease)},w=function(){n.beforePrev(),z(!1)},x=function(){n.beforeNext(),z(!0)},y=function(a,b,c){var d=p&&p.style;d&&(d.webkitTransitionTimingFunction=d.MozTransitionTimingFunction=d.msTransitionTimingFunction=d.OTransitionTimingFunction=d.transitionTimingFunction=c,d.webkitTransitionDuration=d.MozTransitionDuration=d.msTransitionDuration=d.OTransitionDuration=d.transitionDuration=b+"ms",d.webkitTransform="translate3d("+a+"px, 0, 0)",d.msTransform=d.MozTransform=d.OTransform="translateX("+a+"px)")},z=function(b){var c,d=f-g,j=a(0,h.length-1),k=a(-1*d,0),l=n.slideSpeed;c=b?m+n.slidesToScroll:m-n.slidesToScroll,c=j(c);var o=k(-1*h[c].offsetLeft);n.rewind&&Math.abs(e.x)===d&&b&&(o=0,c=0,l=n.rewindSpeed),y(o,l,n.ease),e.x=o,h[c].offsetLeft<=d&&(m=c),n.infinite&&Math.abs(o)===d&&b&&(m=n.infinite,e.x=-1*h[m].offsetLeft,i=function(){y(-1*h[m].offsetLeft,0,null)}),n.infinite&&0===Math.abs(o)&&!b&&(m=h.length-2*n.infinite,e.x=-1*h[m].offsetLeft,i=function(){y(-1*h[m].offsetLeft,0,null)})},A=function(){i&&(i(),i=void 0)},B=function(a){n.beforeMove();var b=a.touches[0];j={x:b.pageX,y:b.pageY,time:Date.now()},l=void 0,k={},p.addEventListener("touchmove",C),p.addEventListener("touchend",D)},C=function(a){var b=a.touches[0];k={x:b.pageX-j.x,y:b.pageY-j.y},"undefined"==typeof l&&(l=!!(l||Math.abs(k.x)<Math.abs(k.y))),l||y(e.x+k.x,0,null)},D=function(){var a=Date.now()-j.time,b=Number(a)<300&&Math.abs(k.x)>25||Math.abs(k.x)>g/3,c=!m&&k.x>0||m===h.length-1&&k.x<0,d=k.x<0;l||(b&&!c?z(d):y(e.x,n.snapBackSpeed)),o.removeEventListener("touchmove"),o.removeEventListener("touchend")},E=function(){n.beforeResize(),v()};return u(),{setup:function(){u()},reset:function(){v()},prev:w,next:x}};return c});