!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.lory=b()}):"object"==typeof exports?module.exports=b():a.lory=b()}(this,function(){"use strict";function a(a,b,c){var d=new i(b,{detail:c,bubbles:!0,cancelable:!0});a.dispatchEvent(d)}var b,c,d;!function(){var a,e=document.createElement("_").style;""===e[a="webkitTransition"]&&(d="webkitTransitionEnd",c=a),""===e[a="transition"]&&(d="transitionend",c=a),""===e[a="webkitTransform"]&&(b=a),""===e[a="msTransform"]&&(b=a),""===e[a="transform"]&&(b=a)}();var e=[].slice,f=function(a,b){if("undefined"==typeof b&&(b=a,a=0),a>b){var c=a;a=b,b=c}return function(c){return Math.min(Math.max(c,a),b)}},g=function(a,b){var c={};return Object.keys(b).map(function(d){a&&a.hasOwnProperty(d)?c[d]=a[d]:c[d]=b[d]}),c};try{new i("test")}catch(h){var i=function(a,b){var c;return b=b||{bubbles:!1,cancelable:!1,detail:void 0},c=document.createEvent("CustomEvent"),c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c};i.prototype=window.Event.prototype,window.CustomEvent=i}var j=function(h,i){var j,k,l,m,n,o=0,p={};"undefined"!=typeof jQuery&&h instanceof jQuery&&(h=h[0]);var q,r,s,t,u,v,w,x={slidesToScroll:1,slideSpeed:300,rewindSpeed:600,snapBackSpeed:200,ease:"ease",rewind:!1,infinite:!1,classNameFrame:"js_frame",classNameSlideContainer:"js_slides",classNamePrevCtrl:"js_prev",classNameNextCtrl:"js_next"},y=function(a){var b=a.slice(0,p.infinite),c=a.slice(a.length-p.infinite,a.length);return b.forEach(function(a){var b=a.cloneNode(!0);r.appendChild(b)}),c.reverse().forEach(function(a){var b=a.cloneNode(!0);r.insertBefore(b,r.firstChild)}),r.addEventListener(d,F),e.call(r.children)},z=function(){a(h,"before.lory.init"),p=g(i,x),q=h.getElementsByClassName(p.classNameFrame)[0],r=q.getElementsByClassName(p.classNameSlideContainer)[0],s=h.getElementsByClassName(p.classNamePrevCtrl)[0],t=h.getElementsByClassName(p.classNameNextCtrl)[0],j={x:r.offsetLeft,y:r.offsetTop},m=p.infinite?y(e.call(r.children)):e.call(r.children),A(),s&&t&&(s.addEventListener("click",B),t.addEventListener("click",C)),r.addEventListener("touchstart",G),window.addEventListener("resize",J),a(h,"after.lory.init")},A=function(){k=r.getBoundingClientRect().width||r.offsetWidth,l=q.getBoundingClientRect().width||q.offsetWidth,l===k&&(k=m.reduce(function(a,b){return a+b.getBoundingClientRect().width||b.offsetWidth},0)),o=0,p.infinite?(D(-1*m[o+p.infinite].offsetLeft,0,null),o+=p.infinite,j.x=-1*m[o].offsetLeft):D(0,p.rewindSpeed,p.ease)},B=function(){E(!1,!1)},C=function(){E(!1,!0)},D=function(a,d,e){var f=r&&r.style;f&&(f[c+"TimingFunction"]=e,f[c+"Duration"]=d+"ms",f[b]="translateX("+a+"px)")},E=function(b,c){a(h,"before.lory.slide",{currentSlide:o,nextSlide:c?o+1:o-1});var d=Math.round(k-l),e=f(0,m.length-1),g=p.slideSpeed,i=f(-1*d,0);"number"!=typeof b&&(b=c?o+p.slidesToScroll:o-p.slidesToScroll),b=e(b),p.infinite&&void 0===c&&(b+=p.infinite);var q=i(-1*m[b].offsetLeft);p.rewind&&Math.abs(j.x)===d&&c&&(q=0,b=0,g=p.rewindSpeed),D(q,g,p.ease),j.x=q,m[b].offsetLeft<=d&&(o=b),p.infinite&&Math.abs(q)===d&&c&&(o=p.infinite,j.x=-1*m[o].offsetLeft,n=function(){D(-1*m[o].offsetLeft,0,null)}),p.infinite&&0===Math.abs(q)&&!c&&(o=m.length-2*p.infinite,j.x=-1*m[o].offsetLeft,n=function(){D(-1*m[o].offsetLeft,0,null)}),a(h,"after.lory.slide",{currentSlide:o})},F=function(){n&&(n(),n=void 0)},G=function(a){var b=a.touches[0];u={x:b.pageX,y:b.pageY,time:Date.now()},w=void 0,v={},r.addEventListener("touchmove",H),r.addEventListener("touchend",I)},H=function(b){var c=b.touches[0];v={x:c.pageX-u.x,y:c.pageY-u.y},"undefined"==typeof w&&(w=!!(w||Math.abs(v.x)<Math.abs(v.y))),w||(a(h,"before.lory.slide"),D(j.x+v.x,0,null))},I=function(){var a=Date.now()-u.time,b=Number(a)<300&&Math.abs(v.x)>25||Math.abs(v.x)>l/3,c=!o&&v.x>0||o===m.length-1&&v.x<0,d=v.x<0;w||(b&&!c?E(!1,d):D(j.x,p.snapBackSpeed)),q.removeEventListener("touchmove"),q.removeEventListener("touchend")},J=function(){a(h,"on.lory.resize"),A()},K=function(){return a(h,"on.lory.destroy"),r.removeEventListener(d,F),r.removeEventListener("touchstart",G),window.removeEventListener("resize",J),s&&s.removeEventListener("click",B),t&&t.removeEventListener("click",C),j=null,k=null,l=null,o=null,p=null,m=null,n=null,h=null,q=null,r=null,s=null,t=null,null};return z(),{slideTo:function(a){E(a)},returnIndex:function(){return o},setup:z,reset:A,prev:B,next:C,destroy:K}};return j});