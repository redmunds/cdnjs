!function(n,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):n.Stately=e()}(this,function(){function n(n,a){if("function"==typeof n&&(n=n()),"[object Object]"!==e.call(n))throw new t("Stately.js: Invalid states object: `"+n+"`.");var o,r=[],i=function(){for(var n=r.slice(),e=0,t=n.length;t>e;e++)n[e].apply(this,arguments)},c={getMachineState:function(){return o.name},setMachineState:function p(n){var e,a,r,u=arguments[1],l=o;if(!n||!n.name||!c[n.name])throw new t("Stately.js: Transitioned into invalid state: `"+p.caller+"`.");return o=n,e=f["onbefore"+o.name],e&&"function"==typeof e&&e.call(c,u,l.name,n.name),a=f["onenter"+o.name]||f["on"+o.name],a&&"function"==typeof a&&a.call(c,u,l.name,n.name),r=f["onleave"+l.name],r&&"function"==typeof r&&r.call(c,u,l.name,n.name),i.call(c,u,l.name,n.name),this},getMachineEvents:function(){var n=[];for(var e in o)o.hasOwnProperty(e)&&"function"==typeof o[e]&&n.push(e);return n}},f={getMachineState:c.getMachineState,getMachineEvents:c.getMachineEvents,bind:function(n){return n&&r.push(n),this},unbind:function(n){if(n)for(var e=0,t=r.length;t>e;e++)r[e]===n&&r.splice(e,1);else r=[];return this}},u=function(n,t,a){return function(){var r,i,u,l=f;return c[n]!==o?(a&&(l=a.apply(c,arguments)),l):(r=f["onbefore"+t],r&&"function"==typeof r&&r.call(c,t,o.name,o.name),l=c[n][t].apply(c,arguments),"undefined"==typeof l?(u=o,l=f):"[object Object]"===e.call(l)?(u=l===c?o:l,l=f):"[object Array]"===e.call(l)&&l.length>=1&&(u=l[0],l=l[1]),i=f["onafter"+t]||f["on"+t],i&&"function"==typeof i&&i.call(c,t,o.name,u.name),c.setMachineState(u,t),l)}};for(var l in n)if(n.hasOwnProperty(l)){c[l]=n[l];for(var s in c[l])c[l].hasOwnProperty(s)&&("string"==typeof c[l][s]&&(c[l][s]=function(n){return function(){return this[n]}}(c[l][s])),"function"==typeof c[l][s]&&(f[s]=u(l,s,f[s])));c[l].name=l,o||(o=c[l])}if("undefined"!=typeof c[a]&&(o=c[a]),!o)throw new t("Stately.js: Invalid initial state.");return f}var e=Object.prototype.toString,t=function(){function n(n){this.name="InvalidStateError",this.message=n}return n.prototype=new Error,n.prototype.constructor=n,n}();return n.machine=function(e,t){return new n(e,t)},n.InvalidStateError=t,n});
//# sourceMappingURL=Stately.min.js.map