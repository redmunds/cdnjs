!function(n,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Stately=t()}(this,function(){function n(n,o){if("function"==typeof n&&(n=n()),"[object Object]"!==t.call(n))throw new e("Stately.js: Invalid states object: `"+n+"`.");var a,r=[],i=function(){for(var n=r.slice(),t=0,e=n.length;e>t;t++)n[t].apply(this,arguments)},f={getMachineState:function(){return a.name},setMachineState:function p(n){var t,o,r=arguments[1],u=a;if("string"==typeof n&&(n=f[n]),!n||!n.name||!f[n.name])throw new e("Stately.js: Transitioned into invalid state: `"+p.caller+"`.");return a=n,t=c["onenter"+a.name]||c["on"+a.name],t&&"function"==typeof t&&t.call(f,r,u.name,n.name),o=c["onleave"+u.name],o&&"function"==typeof o&&o.call(f,r,u.name,n.name),i.call(f,r,u.name,n.name),this},getMachineEvents:function(){var n=[];for(var t in a)a.hasOwnProperty(t)&&"function"==typeof a[t]&&n.push(t);return n}},c={getMachineState:f.getMachineState,getMachineEvents:f.getMachineEvents,bind:function(n){return n&&r.push(n),this},unbind:function(n){if(n)for(var t=0,e=r.length;e>t;t++)r[t]===n&&r.splice(t,1);else r=[];return this}},u=function(n,e,o){return function(){var r,i,u,l=c;return f[n]!==a?(o&&(l=o.apply(f,arguments)),l):(r=c["onbefore"+e],r&&"function"==typeof r&&r.call(f,e,a.name,a.name),l=f[n][e].apply(f,arguments),"undefined"==typeof l?(u=a,l=c):"string"==typeof l?(u=f[l],l=c):"[object Object]"===t.call(l)?(u=l===f?a:l,l=c):"[object Array]"===t.call(l)&&l.length>=1&&(u="string"==typeof l[0]?f[l[0]]:l[0],l=l[1]),i=c["onafter"+e]||c["on"+e],i&&"function"==typeof i&&i.call(f,e,a.name,u.name),f.setMachineState(u,e),l)}};for(var l in n)if(n.hasOwnProperty(l)){f[l]=n[l];for(var s in f[l])f[l].hasOwnProperty(s)&&("string"==typeof f[l][s]&&(f[l][s]=function(n){return function(){return this[n]}}(f[l][s])),"function"==typeof f[l][s]&&(c[s]=u(l,s,c[s])));f[l].name=l,a||(a=f[l])}if("undefined"!=typeof f[o]&&(a=f[o]),!a)throw new e("Stately.js: Invalid initial state.");return c}var t=Object.prototype.toString,e=function(){function n(n){this.name="InvalidStateError",this.message=n}return n.prototype=new Error,n.prototype.constructor=n,n}();return n.machine=function(t,e){return new n(t,e)},n.InvalidStateError=e,n});
//# sourceMappingURL=Stately.min.js.map