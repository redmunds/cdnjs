!function(n,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Stately=t()}(this,function(){function n(n){if("function"==typeof n&&(n=n()),"[object Object]"!==t.call(n))throw new e("Stately.js: Invalid states object: `"+n+"`.");var a,o=[],r=function(){for(var n=o.slice(),t=0,e=n.length;e>t;t++)n[t].apply(this,arguments)},i={getMachineState:function(){return a.name},setMachineState:function s(n){var t,o,f,u=arguments[1],l=a;if(!n||!n.name||!i[n.name])throw new e("Stately.js: Transitioned into invalid state: `"+s.caller+"`.");return a=n,t=c["onbefore"+a.name],t&&"function"==typeof t&&t.call(i,u,l.name,n.name),o=c["onenter"+a.name]||c["on"+a.name],o&&"function"==typeof o&&o.call(i,u,l.name,n.name),f=c["onleave"+a.name],f&&"function"==typeof f&&f.call(i,u,l.name,n.name),r.call(i,u,l.name,n.name),this},getMachineEvents:function(){var n=[];for(var t in a)a.hasOwnProperty(t)&&"function"==typeof a[t]&&n.push(t);return n}},c={getMachineState:i.getMachineState,getMachineEvents:i.getMachineEvents,bind:function(n){return n&&o.push(n),this},unbind:function(n){if(n)for(var t=0,e=o.length;e>t;t++)o[t]===n&&o.splice(t,1);else o=[];return this}},f=function(n,e,o){return function(){var r,f,u,l=c;return i[n]!==a?(o&&(l=o.apply(i,arguments)),l):(r=c["onbefore"+e],r&&"function"==typeof r&&r.call(i,e,a.name,a.name),l=i[n][e].apply(i,arguments),"undefined"==typeof l?(u=a,l=c):"[object Object]"===t.call(l)?(u=l===i?a:l,l=c):"[object Array]"===t.call(l)&&l.length>=1&&(u=l[0],l=l[1]),f=c["onafter"+e]||c["on"+e],f&&"function"==typeof f&&f.call(i,e,a.name,u.name),i.setMachineState(u,e),l)}};for(var u in n)if(n.hasOwnProperty(u)){i[u]=n[u];for(var l in i[u])i[u].hasOwnProperty(l)&&("string"==typeof i[u][l]&&(i[u][l]=function(n){return function(){return this[n]}}(i[u][l])),"function"==typeof i[u][l]&&(c[l]=f(u,l,c[l])));i[u].name=u,a||(a=i[u])}if(!a)throw new e("Stately.js: Invalid initial state.");return c}var t=Object.prototype.toString,e=function(){function n(n){this.name="InvalidStateError",this.message=n}return n.prototype=new Error,n.prototype.constructor=n,n}();return n.machine=function(t){return new n(t)},n.InvalidStateError=e,n});
//# sourceMappingURL=Stately.min.js.map