!function(t){function e(t,e,n){var i={};return t.replace(a,function(t,s,a,r){var o=a||r;o="class"===s?o.trim().split(/\s+/):o,i[s]=o;var h=n[s]||(n[s]={});"class"!==s&&(o=[o]),o.forEach(function(t){(h[t]||(h[t]=[])).push(e)})}),i}function n(t,e,n){"string"==typeof t&&this.html(t||""),this._data=e||{},this._out="",this._map=n}var i={},s=new RegExp(["\\s*","<","(/?)","([-:\\w]+)","((?:\\s+[-\\w]+(?:","=","(?:\\w+|\"[^\"]*\"|'[^']*'))?)*)","(/?)",">"].join("\\s*"),"gi"),a=new RegExp("([-\\w]+)=(?:([-\\w]+)|[\"']([-\\w\\s]+)[\"'])","gi");i.execute=function(t){for(var n,i=0,a=n={type:"root",tag:null,elems:[],map:{}},r=[];matched=s.exec(t);){i!==matched.index&&n.elems.push({type:"text",body:[i,matched.index]}),i=matched.index+matched[0].length;var o=matched[2].toLowerCase(),h={type:"tag",name:o,elems:[],body:[matched.index,matched.index+matched[0].length]};if(h.attrs=matched[3]&&e(matched[3],h,a.map),matched[1]){for(var u;u=r.pop()&&u&&o!==u.name;);n=r[r.length-1]||a,"undefined"==typeof u&&(h.selfclose=!0,n.elems.push(h))}else matched[4]?(h.selfclose=!0,n.elems.push(h)):(n.elems.push(h),r.push(n=h))}return i!==t.length&&n.elems.push({type:"text",body:[i,t.length]}),a},n.prototype.html=function(t){return t?(this._html=t,this._tree=i.execute(this._html),this):this._html},n.prototype.data=function(t){return t?(this._data=t,this):this._data},n.prototype._reduce=function(t){t&&(this._map=t);var e,n,i=this._html,s=this._tree.map,a=[];for(var r in this._data)n=this._map&&this._map[r]||"id",e=s[n]&&s[n][r]||s["data-bind"]&&s["data-bind"][r],e&&e.forEach(function(t){a.push([t.body[1],r])});a.sort(function(t,e){return t>e?1:t===e?0:-1});var o=[],h=a.reduce(function(t,e){return o.push(i.slice(t,e[0]),e[1]),e[0]},0);return o.push(i.slice(h)),o},n.prototype.bind=function(t){var e=this;return this._reduce(t).map(function(t,n){return n%2===0?t:e._data[t]}).join("")},n.prototype.compile=function(t){var e=["return [",this._reduce(t).map(function(t,e){return e%2===0?JSON.stringify(t):"data["+JSON.stringify(t)+"]"}).join(","),"].join('')"].join("");return new Function("data",e)},"undefined"!=typeof process&&"node"===process.title?module.exports=n:window.Plates=n}();
//# sourceMappingURL=plates.min.js.map