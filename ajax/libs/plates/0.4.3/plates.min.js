var Plates="undefined"!=typeof process&&~process.title.indexOf("node")?exports:{};!function(t){function e(t){return t&&this.mappings.push({}),this.mappings[this.mappings.length-1]}var n=function(){};n.prototype={tag:new RegExp(["<","(/?)","([-:\\w]+)","((?:[-\\w]+(?:","=","(?:\\w+|[\"|'](?:.*)[\"|']))?)*)","(/?)",">"].join("\\s*")),attr:/([\-\w]*)=(?:["\']([\-\.\w\s\/]*)["\'])/gi,hasClass:function(t,e){return t.indexOf(e)>-1},bind:function(t,e,n){t=t||"",e=e||{};var a,i,s=this,r=0,o=n&&n.mappings,c=!1,h="",u=!1,l=!1;matchmode=!1;for(var f,d,p="",m=0,g=t.length;m<g;m++)if(f=t[m],"!"===f&&c&&!matchmode)c=!1,p+=t.slice(d,m+1);else if("<"!==f||c)if(">"===f&&c){if(c=!1,tagbody=t.slice(d,m+1),a=this.tag.exec(tagbody),!a)continue;if(u=a[1],h=a[2],i=a[3],l=a[4],matchmode&&(u?r<=0?matchmode=!1:--r:l||++r),i&&!u&&!matchmode)if(o&&o.length>0)for(var y=o.length-1;y>=0;y--)tagbody=tagbody.replace(this.attr,function(t,n,a,i){var r=o[y].dataKey?e[o[y].dataKey]:e[n];return o[y].replace===n?n+'="'+(r||"")+'"':(o[y].replace||o[y].attribute!==n||(o[y].value===a||s.hasClass(a,o[y].value||o.conf.where===n))&&(p+=tagbody+(r||""),matchmode=!0),t)});else tagbody.replace(this.attr,function(t,a,i,s){(a===n&&n.conf.where||e[i])&&(p+=tagbody+e[i],matchmode=!0)});matchmode||(p+=tagbody)}else c||matchmode||(p+=f);else closing=!0,c=!0,d=m;return p}};var a=function t(e){return this instanceof t?(this.mappings=[],void(this.conf=e||{})):new t(e)};a.prototype={use:function(t){return e.call(this).dataKey=t,this},to:function(t){return this.use(t)},where:function(t){return e.call(this,!0).attribute=t,this},class:function(t){return this.where("class").is(t)},is:function(t){return e.call(this).value=t,this},insert:function(t){var n=e.call(this);return n.replace=n.attribute,n.dataKey=t,this},as:function(t){return e.call(this).replace=t,this}},t.bind=function(t,e,a){var i=new n;return i.bind(t,e,a)},t.Map=a}(Plates);
//# sourceMappingURL=plates.min.js.map