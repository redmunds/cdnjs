!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.VeeValidate=t()}(this,function(){"use strict";var e=function(e){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(e)},t=function(e,t){return!!t.filter(function(t){return t==e}).length},n=function(e){return Array.isArray(e)?!!e.length:void 0!==e&&null!==e&&!!String(e).length},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},s=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(e){return Array.isArray(e)?e:Array.from(e)},l=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},c=function(e,t){var n=s(t,1),r=n[0];return void 0!==e&&null!==e&&String(e).length>=r},f=function(e,t){var n=s(t,1),r=n[0];return void 0===e||null===e?r>=0:String(e).length<=r},h=function(e,t){return!t.filter(function(t){return t==e}).length},d=function(e){return!Array.isArray(e)&&/^[a-zA-Z]*$/.test(e)},v=function(e){return!Array.isArray(e)&&/^[a-zA-Z0-9]*$/.test(e)},m=function(e){return!Array.isArray(e)&&/^[a-zA-Z0-9_-]*$/.test(e)},y=function(e){return!Array.isArray(e)&&/^[0-9]*$/.test(e)},g=function(e,t){var n=u(t),r=n[0],i=n.slice(1);return new RegExp(r,i).test(String(e))},p=function(e){return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)},b=function(e,t){for(var n=new RegExp(".("+t.join("|")+")$","i"),r=0;r<e.length;r++)if(!n.test(e[r].name))return!1;return!0},k=function(e,t){for(var n=new RegExp(t.join("|").replace("*",".+")+"$","i"),r=0;r<e.length;r++)if(!n.test(e[r].type))return!1;return!0},_=function(e,t){var n=s(t,1),r=n[0];if(isNaN(r))return!1;for(var i=1024*Number(r),a=0;a<e.length;a++)if(e[a].size>i)return!1;return!0},$=function(e,t){var n=s(t,1),r=n[0],i=String(e);return/^[0-9]*$/.test(i)&&i.length===Number(r)},w=function(e){for(var t=0;t<e.length;t++)if(!/\.(jpg|svg|jpeg|png|bmp|gif)$/i.test(e[t].name))return!1;return!0},T=function(e,t,n){var r=window.URL||window.webkitURL;return new Promise(function(i){var a=new Image;a.onerror=function(){return i({valid:!1})},a.onload=function(){return i({valid:a.width===Number(t)&&a.height===Number(n)})},a.src=r.createObjectURL(e)})},x=function(e,t){for(var n=s(t,2),r=n[0],i=n[1],a=[],o=0;o<e.length;o++){if(!/\.(jpg|svg|jpeg|png|bmp|gif)$/i.test(e[o].name))return!1;a.push(e[o])}return Promise.all(a.map(function(e){return T(e,r,i)}))},E=function(e,t){var n=s(t,2),r=n[0],i=n[1];return Number(r)<=e&&Number(i)>=e},A=function(e,t){var n=s(t,1),r=n[0],i=document.querySelector("input[name='"+r+"']");return!(!i||String(e)!==i.value)},L=function(e,t){var n=/^https?:\/\/([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w\.\(\)%-]*)*\/?$/.test(e),r=t&&t[0];return r&&n?new RegExp("^https?://(([da-z.-]+).)*("+t[0].replace(".","\\$&")+")").test(e):n},j=function(e){var t=arguments.length<=1||void 0===arguments[1]?["*"]:arguments[1],n=s(t,1),r=n[0];if(Array.isArray(e))return!1;if(null===e||void 0===e||""===e)return!0;var i="*"===r?"*":"{0,"+r+"}",a=new RegExp("^[0-9]*.?[0-9]"+i+"$");return!!a.test(e)&&!Number.isNaN(parseFloat(e))},S={email:e,min:c,max:f,required:n,"in":t,not_in:h,alpha:d,alpha_num:v,alpha_dash:m,numeric:y,regex:g,ip:p,ext:b,mimes:k,size:_,digits:$,image:w,dimensions:x,between:E,confirmed:A,url:L,decimal:j},M=function(){function e(){i(this,e),this.errors=[]}return a(e,[{key:"add",value:function(e,t,n){var r={field:e,msg:t};n&&(r.scope=n),this.errors.push(r)}},{key:"all",value:function(e){return e?this.errors.filter(function(t){return t.scope===e}).map(function(e){return e.msg}):this.errors.map(function(e){return e.msg})}},{key:"any",value:function(e){return e?!!this.errors.filter(function(t){return t.scope===e}).length:!!this.errors.length}},{key:"clear",value:function(e){return e?void(this.errors=this.errors.filter(function(t){return t.scope!==e})):void(this.errors=[])}},{key:"collect",value:function(e,t){var n=this;if(!e){var i=function(){var e={};return n.errors.forEach(function(t){e[t.field]||(e[t.field]=[]),e[t.field].push(t.msg)}),{v:e}}();if("object"===("undefined"==typeof i?"undefined":r(i)))return i.v}return t?this.errors.filter(function(n){return n.field===e&&n.scope===t}).map(function(e){return e.msg}):this.errors.filter(function(t){return t.field===e}).map(function(e){return e.msg})}},{key:"count",value:function(){return this.errors.length}},{key:"first",value:function(e,t){for(var n=0;n<this.errors.length;n++)if(this.errors[n].field===e){if(!t)return this.errors[n].msg;if(this.errors[n].scope===t)return this.errors[n].msg}return null}},{key:"has",value:function(e,t){for(var n=0;n<this.errors.length;n++)if(this.errors[n].field===e){if(!t)return!0;if(this.errors[n].scope===t)return!0}return!1}},{key:"remove",value:function(e,t){return t?void(this.errors=this.errors.filter(function(n){return n.field!==e||n.scope!==t})):void(this.errors=this.errors.filter(function(t){return t.field!==e}))}}]),e}(),N=function(){function e(t){i(this,e),this.msg=t}return a(e,[{key:"toString",value:function(){return this.msg}}]),e}(),O=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),this.dictionary={},this.merge(t)}return a(e,[{key:"hasLocale",value:function(e){return!!this.dictionary[e]}},{key:"getMessage",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"":arguments[2];return this.hasMessage(e,t)?this.dictionary[e].messages[t]:n}},{key:"getAttribute",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"":arguments[2];return this.hasAttribute(e,t)?this.dictionary[e].attributes[t]:n}},{key:"hasMessage",value:function(e,t){return!!(this.hasLocale(e)&&this.dictionary[e].messages&&this.dictionary[e].messages[t])}},{key:"hasAttribute",value:function(e,t){return!!(this.hasLocale(e)&&this.dictionary[e].attributes&&this.dictionary[e].attributes[t])}},{key:"merge",value:function(e){this._merge(this.dictionary,e)}},{key:"setMessage",value:function(e,t,n){this.hasLocale(e)||(this.dictionary[e]={messages:{},attributes:{}}),this.dictionary[e].messages[t]=n}},{key:"setAttribute",value:function(e,t,n){this.hasLocale(e)||(this.dictionary[e]={messages:{},attributes:{}}),this.dictionary[e].attributes[t]=n}},{key:"_isObject",value:function(e){return e&&"object"===("undefined"==typeof e?"undefined":r(e))&&!Array.isArray(e)&&null!==e}},{key:"_merge",value:function(e,t){var n=this;if(!this._isObject(e)||!this._isObject(t))return e;var r=Object.assign||this._assign;return Object.keys(t).forEach(function(i){return n._isObject(t[i])?(e[i]||r(e,o({},i,{})),void n._merge(e[i],t[i])):void r(e,o({},i,t[i]))}),e}},{key:"_assign",value:function(e){var t=arguments;if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=function(e){var r=t[e];void 0!==r&&null!==r&&Object.keys(r).forEach(function(e){({}).hasOwnProperty.call(r,e)&&(n[e]=r[e])})},i=1;i<arguments.length;i++)r(i);return n}}]),e}(),V={alpha_dash:function(e){return"The "+e+" may contain alpha-numeric characters as well as dashes and underscores."},alpha_num:function(e){return"The "+e+" may only contain alpha-numeric characters."},alpha:function(e){return"The "+e+" may only contain alphabetic characters."},between:function(e,t){var n=s(t,2),r=n[0],i=n[1];return"The "+e+" must be between "+r+" and "+i+"."},confirmed:function(e,t){var n=s(t,1),r=n[0];return"The "+e+" does not match the "+r+"."},decimal:function(e){var t=arguments.length<=1||void 0===arguments[1]?["*"]:arguments[1],n=s(t,1),r=n[0];return"The "+e+" must be numeric and may contain "+("*"===r?"":r)+" decimal points."},digits:function(e,t){var n=s(t,1),r=n[0];return"The "+e+" must be numeric and exactly contain "+r+" digits."},dimensions:function(e,t){var n=s(t,2),r=n[0],i=n[1];return"The "+e+" must be "+r+" pixels by "+i+" pixels."},email:function(e){return"The "+e+" must be a valid email."},ext:function(e){return"The "+e+" must be a valid file."},image:function(e){return"The "+e+" must be an image."},"in":function(e){return"The "+e+" must be a valid value."},ip:function(e){return"The "+e+" must be a valid ip address."},max:function(e,t){var n=s(t,1),r=n[0];return"The "+e+" may not be greater than "+r+" characters."},mimes:function(e){return"The "+e+" must have a valid file type."},min:function(e,t){var n=s(t,1),r=n[0];return"The "+e+" must be at least "+r+" characters."},not_in:function(e){return"The "+e+" must be a valid value."},numeric:function(e){return"The "+e+" may only contain numeric characters."},regex:function(e){return"The "+e+" format is invalid."},required:function(e){return"The "+e+" is required."},size:function(e,t){var n=s(t,1),r=n[0];return"The "+e+" must be less than "+r+" KB."},url:function(e){return"The "+e+" is not a valid URL."}},B=function(e){return e.dataset.scope||e.form&&e.form.dataset.scope},D=function(e){var t=arguments.length<=1||void 0===arguments[1]?100:arguments[1],n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];if(!t)return e;var r=void 0;return function(i){function a(){n||e.apply(c,s),r=null}var o=u(i),s=o,c=this;r?clearTimeout(r):n&&e.apply.apply(e,[c].concat(l(s))),r=setTimeout(a,t||100)}},z=function(e){console&&console.warn("vee-validate: "+e)},R=function(e){return function(t,n){var r=s(n,2),i=r[0],a=r[1],o=e(t,a,!0),u=document.querySelector("input[name='"+i+"']");if(!o.isValid()||!u)return!1;var l=e(u.value,a,!0);return!!l.isValid()&&o.isAfter(l)}},q=function(e){return function(t,n){var r=s(n,2),i=r[0],a=r[1],o=e(t,a,!0),u=document.querySelector("input[name='"+i+"']");if(!o.isValid()||!u)return!1;var l=e(u.value,a,!0);return!!l.isValid()&&o.isBefore(l)}},F=function(e){return function(t,n){var r=s(n,1),i=r[0];return e(t,i,!0).isValid()}},P=function(e){return function(t,n){var r=s(n,3),i=r[0],a=r[1],o=r[2],u=e(i,o,!0),l=e(a,o,!0),c=e(t,o,!0);return!!(u.isValid()&&l.isValid()&&c.isValid())&&c.isBetween(u,l)}},Z={after:function(e,t){var n=s(t,1),r=n[0];return"The "+e+" must be after "+r+"."},before:function(e,t){var n=s(t,1),r=n[0];return"The "+e+" must be before "+r+"."},date_between:function(e,t){var n=s(t,2),r=n[0],i=n[1];return"The "+e+" must be between "+r+" and "+i+"."},date_format:function(e,t){var n=s(t,1),r=n[0];return"The "+e+" must be in the format "+r+"."}},U={make:function(e){return{date_format:F(e),after:R(e),before:q(e),date_between:P(e)}},messages:Z,installed:!1},C="veeValidate",I="en",Y=!0,K=new O({en:{messages:V,attributes:{}}}),G=function(){function e(t,n){i(this,e),this.locale=I,this.strictMode=Y,this.$fields={},this._createFields(t),this.errorBag=new M,this.$vm=n,"function"==typeof moment&&this.installDateTimeValidators(moment)}return a(e,[{key:"installDateTimeValidators",value:function(t){e.installDateTimeValidators(t)}},{key:"setStrictMode",value:function(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0];this.strictMode=e}},{key:"setLocale",value:function(e){K.hasLocale(e)||z("You are setting the validator locale to a locale that is not defined in the dicitionary. English messages may still be generated."),this.locale=e}},{key:"attach",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];this.errorBag.remove(e),this._createField(e,t),n&&(this.$fields[e].name=n)}},{key:"updateDictionary",value:function(t){e.updateDictionary(t)}},{key:"detach",value:function(e){delete this.$fields[e]}},{key:"extend",value:function(t,n){e.extend(t,n)}},{key:"validateAll",value:function(e){var t=this;if(this.$vm&&(!e||"string"==typeof e))return this.errorBag.clear(e),void this.$vm.$emit(C,e);var n=!0,r=[];return this.errorBag.clear(),Object.keys(e).forEach(function(i){var a=t.validate(i,e[i]);return"function"==typeof a.then?void r.push(a):void(n=n&&a)}),r.length?Promise.all(r).then(function(e){return e.every(function(e){return e})&&n}):n}},{key:"validate",value:function(e,t,n){var r=this;if(!this.$fields[e])return!this.strictMode||(z('Trying to validate a non-existant field: "'+e+'". Use "attach()" first.'),!1);if(this.errorBag.remove(e,n),!this.$fields[e].required&&~[null,void 0,""].indexOf(t))return!0;var i=!0,a=[];return this.$fields[e].validations.forEach(function(o){var s=r._test(e,t,o,n);return"function"==typeof s.then?void a.push(s):void(i=i&&s)}),a.length?Promise.all(a).then(function(e){return e.every(function(e){return e})&&i}):i}},{key:"_createFields",value:function(e){var t=this;e&&Object.keys(e).forEach(function(n){t._createField(n,e[n])})}},{key:"_createField",value:function(e,t){var n=this;this.$fields[e]||(this.$fields[e]={}),this.$fields[e].validations=[],t.split("|").forEach(function(t){var r=n._normalizeRule(t,n.$fields[e].validations);"required"===r.name&&(n.$fields[e].required=!0),n.$fields[e].validations.push(r)})}},{key:"_normalizeRule",value:function(e,t){var n=[],r=e.split(":")[0];if(~e.indexOf(":")&&(n=e.split(":")[1].split(",")),U.installed&&~["after","before","date_between"].indexOf(r)){var i=t.filter(function(e){return"date_format"===e.name})[0];i&&n.push(i.params[0])}return{name:r,params:n}}},{key:"_formatErrorMessage",value:function(e,t){return K.hasLocale(this.locale)&&"function"==typeof K.getMessage(this.locale,t.name)?K.getMessage(this.locale,t.name)(e,t.params):K.getMessage("en",t.name)(e,t.params)}},{key:"_getFieldDisplayName",value:function(e){return this.$fields[e].name||K.getAttribute(this.locale,e,e)}},{key:"_test",value:function(e,t,n,r){var i=this,a=S[n.name],o=a(t,n.params),s=this._getFieldDisplayName(e);return"function"==typeof o.then?o.then(function(t){var a=Array.isArray(t)?t.every(function(e){return e.valid}):t.valid;return a||i.errorBag.add(e,i._formatErrorMessage(s,n),r),a}):(o||this.errorBag.add(e,this._formatErrorMessage(s,n),r),o)}},{key:"getErrors",value:function(){return this.errorBag}}],[{key:"setDefaultLocale",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"en":arguments[0];K.hasLocale(e)||z("You are setting the validator locale to a locale that is not defined in the dicitionary. English messages may still be generated."),I=e}},{key:"setStrictMode",value:function(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0];Y=e}},{key:"installDateTimeValidators",value:function(t){if("function"!=typeof t)return z("To use the date-time validators you must provide moment reference."),!1;if(U.installed)return!0;var n=U.make(t);return Object.keys(n).forEach(function(t){e.extend(t,n[t])}),e.updateDictionary({en:{messages:U.messages}}),U.installed=!0,!0}},{key:"updateDictionary",value:function(e){K.merge(e)}},{key:"create",value:function(t,n){return new e(t,n)}},{key:"extend",value:function(t,n){e._guardExtend(t,n),e._merge(t,n)}},{key:"_merge",value:function(e,t){return"function"==typeof t?(S[e]=t,void K.setMessage("en",e,function(e){return"The "+e+" value is not valid."})):(S[e]=t.validate,t.getMessage&&"function"==typeof t.getMessage&&K.setMessage("en",e,t.getMessage),void(t.messages&&K.merge(Object.keys(t.messages).reduce(function(n,r){var i=n;return i[r]={messages:o({},e,t.messages[r])},i},{}))))}},{key:"_guardExtend",value:function(e,t){if(S[e])throw new N("Extension Error: There is an existing validator with the same name '"+e+"'.");if("function"!=typeof t){if("function"!=typeof t.validate)throw new N("Extension Error: The validator '"+e+"' must be a function or have a 'validate' method.");if("function"!=typeof t.getMessage&&"object"!==r(t.messages))throw new N("Extension Error: The validator '"+e+"' must have a 'getMessage' method or have a 'messages' object.")}}}]),e}(),H=[],J=function(e){for(var t=0;t<H.length;t++)if(H[t].$vm===e)return H[t].$validator},Q=function(e){var t=J(e);return t||(t=G.create(void 0,e),H.push({$vm:e,$validator:t})),t},W=function(e){for(var t=0;t<H.length;t++)if(H[t].$vm===e)return H.splice(t,1),!0;return!1},X=function(e){return{data:function(){return o({},e.errorBagName,this.$validator.errorBag)},mounted:function(){this.$emit("validatorReady")},destroyed:function(){W(this)}}},ee="veeValidate",te=function(){function e(t,n,r,a){i(this,e),this.callbacks=[],this.el=t,this.binding=n,this.vm=r,this.options=a,this.fieldName=n.expression||t.name}return a(e,[{key:"_hasFieldDependency",value:function(e){var t=e.split("|").filter(function(e){return!!e.match(/confirmed|after|before/)});return!!t.length&&t[0].split(":")[1]}},{key:"_inputListener",value:function(){this.vm.$validator.validate(this.fieldName,this.el.value,B(this.el))}},{key:"_fileListener",value:function(){var e=this.vm.$validator.validate(this.fieldName,this.el.files,B(this.el));!e&&this.binding.modifiers.reject&&(el.value="")}},{key:"_radioListener",value:function(){var e=document.querySelector('input[name="'+this.el.name+'"]:checked');return e?void this.vm.$validator.validate(this.fieldName,e.value,B(this.el)):void this.vm.$validator.validate(this.fieldName,null,B(this.el))}},{key:"_getScopedListener",value:function(e){var t=this;return function(n){(!n||n===B(t.el)||n instanceof Event)&&e()}}},{key:"_attachValidatorEvent",value:function(){var e=this,t=this._getScopedListener("radio"===this.el.type?this._radioListener.bind(this):this._inputListener.bind(this));this.vm.$on(ee,t),this.callbacks.push({event:ee,listener:t});var n=this._hasFieldDependency(this.el.dataset.rules);n&&this.vm.$once("validatorReady",function(){var r=document.querySelector("input[name='"+n+"']");return r?(r.addEventListener("input",t),void e.callbacks.push({event:"input",listener:t,el:r})):void z("Cannot find target field, no additional listeners were attached.")})}},{key:"_getSuitableListener",value:function(){return"file"===this.el.type?{name:"change",listener:this._fileListener}:"radio"===this.el.type?{name:"change",listener:this._radioListener}:{name:"input",listener:this._inputListener}}},{key:"_attachFieldListeners",value:function(){var e=this,t=this._getSuitableListener(),n=D(t.listener.bind(this),this.el.dataset.delay||this.options.delay);return"radio"===this.el.type?void this.vm.$once("validatorReady",function(){[].concat(l(document.querySelectorAll('input[name="'+e.el.name+'"]'))).forEach(function(r){r.addEventListener(t.name,n),e.callbacks.push({event:t.name,callback:n,el:r})})}):(this.el.addEventListener(t.name,n),void this.callbacks.push({event:t.name,callback:n,el:this.el}))}},{key:"attach",value:function(){return this.vm.$validator.attach(this.fieldName,this.el.dataset.rules,this.el.dataset.as),this._attachValidatorEvent(),this.binding.expression?void(this.binding.modifiers.initial||this.vm.$validator.validate(this.binding.expression,this.binding.value,B(this.el))):void this._attachFieldListeners()}},{key:"detach",value:function(){this.vm.$off(ee,this.callbacks.filter(function(e){var t=e.event;return t===ee})[0]),this.callbacks.filter(function(e){var t=e.event;return t!==ee}).forEach(function(e){e.el.removeEventListener(e.event,e.listener)})}}]),e}(),ne=[],re=function(e){return{bind:function(t,n,r){var i=r.context,a=new te(t,n,i,e);a.attach(),ne.push({vm:i,el:t,instance:a})},update:function(e,t,n){var r=t.expression,i=t.value,a=(t.modifiers,t.oldValue),o=n.context;r&&i!==a&&o.$validator.validate(r||e.name,i,B(e))},unbind:function(e,t,n){var r=n.context,i=ne.filter(function(t){return t.vm===r&&t.el===e})[0];i.instance.detach(),ne.splice(ne.indexOf(i),1)}}},ie=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=t.locale,r=void 0===n?"en":n,i=t.delay,a=void 0===i?0:i,o=t.errorBagName,s=void 0===o?"errors":o,u=t.dictionary,l=void 0===u?null:u,c=t.strict,f=void 0===c||c;l&&G.updateDictionary(l),G.setDefaultLocale(r),G.setStrictMode(f);var h={locale:r,delay:a,dictionary:l,errorBagName:s};Object.defineProperties(e.prototype,{$validator:{get:function(){return Q(this)}}}),e.mixin(X(h)),e.directive("validate",re(h))},ae={install:ie,Validator:G,ErrorBag:M};return ae});
