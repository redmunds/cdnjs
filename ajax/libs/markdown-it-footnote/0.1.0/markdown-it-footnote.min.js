/*! markdown-it-footnote 0.1.0 https://github.com//markdown-it/markdown-it-footnote @license MIT */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof global?o=global:"undefined"!=typeof self&&(o=self),o.markdownitFootnote=e()}}(function(){return function e(o,t,n){function r(f,l){if(!t[f]){if(!o[f]){var i="function"==typeof require&&require;if(!l&&i)return i(f,!0);if(s)return s(f,!0);var u=new Error("Cannot find module '"+f+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[f]={exports:{}};o[f][0].call(c.exports,function(e){var t=o[f][1][e];return r(t?t:e)},c,c.exports,e,o,t,n)}return t[f].exports}for(var s="function"==typeof require&&require,f=0;f<n.length;f++)r(n[f]);return r}({1:[function(e,o){"use strict";function t(e,o){var t=Number(e[o].id+1).toString(),n="fnref"+t;return e[o].subId>0&&(n+=":"+e[o].subId),'<sup class="footnote-ref"><a href="#fn'+t+'" id="'+n+'">['+t+"]</a></sup>"}function n(e,o,t){return(t.xhtmlOut?'<hr class="footnotes-sep" />\n':'<hr class="footnotes-sep">\n')+'<section class="footnotes">\n<ol class="footnotes-list">\n'}function r(){return"</ol>\n</section>\n"}function s(e,o){var t=Number(e[o].id+1).toString();return'<li id="fn'+t+'"  class="footnote-item">'}function f(){return"</li>\n"}function l(e,o){var t=Number(e[o].id+1).toString(),n="fnref"+t;return e[o].subId>0&&(n+=":"+e[o].subId),' <a href="#'+n+'" class="footnote-backref">\u21a9</a>'}o.exports=function(e){function o(e,o,t,n){var r,s,f,l,i,u=e.bMarks[o]+e.tShift[o],c=e.eMarks[o];if(u+4>c)return!1;if(91!==e.src.charCodeAt(u))return!1;if(94!==e.src.charCodeAt(u+1))return!1;for(l=u+2;c>l;l++){if(32===e.src.charCodeAt(l))return!1;if(93===e.src.charCodeAt(l))break}return l===u+2?!1:l+1>=c||58!==e.src.charCodeAt(++l)?!1:n?!0:(l++,e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.refs||(e.env.footnotes.refs={}),i=e.src.slice(u+2,l-2),e.env.footnotes.refs[":"+i]=-1,e.tokens.push({type:"footnote_reference_open",label:i,level:e.level++}),r=e.bMarks[o],s=e.tShift[o],f=e.parentType,e.tShift[o]=e.skipSpaces(l)-l,e.bMarks[o]=l,e.blkIndent+=4,e.parentType="footnote",e.tShift[o]<e.blkIndent&&(e.tShift[o]+=e.blkIndent,e.bMarks[o]-=e.blkIndent),e.md.block.tokenize(e,o,t,!0),e.parentType=f,e.blkIndent-=4,e.tShift[o]=s,e.bMarks[o]=r,e.tokens.push({type:"footnote_reference_close",level:--e.level}),!0)}function i(e,o){var t,n,r,s,f=e.posMax,l=e.pos;return l+2>=f?!1:94!==e.src.charCodeAt(l)?!1:91!==e.src.charCodeAt(l+1)?!1:(t=l+2,n=a(e,l+1),0>n?!1:(o||(e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.list||(e.env.footnotes.list=[]),r=e.env.footnotes.list.length,e.pos=t,e.posMax=n,e.push({type:"footnote_ref",id:r,level:e.level}),s=e.tokens.length,e.md.inline.tokenize(e),e.env.footnotes.list[r]={tokens:e.tokens.splice(s)}),e.pos=n+1,e.posMax=f,!0))}function u(e,o){var t,n,r,s,f=e.posMax,l=e.pos;if(l+3>f)return!1;if(!e.env.footnotes||!e.env.footnotes.refs)return!1;if(91!==e.src.charCodeAt(l))return!1;if(94!==e.src.charCodeAt(l+1))return!1;for(n=l+2;f>n;n++){if(32===e.src.charCodeAt(n))return!1;if(10===e.src.charCodeAt(n))return!1;if(93===e.src.charCodeAt(n))break}return n===l+2?!1:n>=f?!1:(n++,t=e.src.slice(l+2,n-1),"undefined"==typeof e.env.footnotes.refs[":"+t]?!1:(o||(e.env.footnotes.list||(e.env.footnotes.list=[]),e.env.footnotes.refs[":"+t]<0?(r=e.env.footnotes.list.length,e.env.footnotes.list[r]={label:t,count:0},e.env.footnotes.refs[":"+t]=r):r=e.env.footnotes.refs[":"+t],s=e.env.footnotes.list[r].count,e.env.footnotes.list[r].count++,e.push({type:"footnote_ref",id:r,subId:s,level:e.level})),e.pos=n,e.posMax=f,!0))}function c(e){var o,t,n,r,s,f,l,i,u,c=0,a=!1,p={};if(e.env.footnotes&&(e.tokens=e.tokens.filter(function(e){return"footnote_reference_open"===e.type?(a=!0,i=[],u=e.label,!1):"footnote_reference_close"===e.type?(a=!1,p[":"+u]=i,!1):(a&&i.push(e),!a)}),e.env.footnotes.list)){for(f=e.env.footnotes.list,e.tokens.push({type:"footnote_block_open",level:c++}),o=0,t=f.length;t>o;o++){for(e.tokens.push({type:"footnote_open",id:o,level:c++}),f[o].tokens?(l=[],l.push({type:"paragraph_open",tight:!1,level:c++}),l.push({type:"inline",content:"",level:c,children:f[o].tokens}),l.push({type:"paragraph_close",tight:!1,level:--c})):f[o].label&&(l=p[":"+f[o].label]),e.tokens=e.tokens.concat(l),s="paragraph_close"===e.tokens[e.tokens.length-1].type?e.tokens.pop():null,r=f[o].count>0?f[o].count:1,n=0;r>n;n++)e.tokens.push({type:"footnote_anchor",id:o,subId:n,level:c});s&&e.tokens.push(s),e.tokens.push({type:"footnote_close",level:--c})}e.tokens.push({type:"footnote_block_close",level:--c})}}var a=e.helpers.parseLinkLabel;e.renderer.rules.footnote_ref=t,e.renderer.rules.footnote_block_open=n,e.renderer.rules.footnote_block_close=r,e.renderer.rules.footnote_open=s,e.renderer.rules.footnote_close=f,e.renderer.rules.footnote_anchor=l,e.block.ruler.before("reference","footnote_def",o,{alt:["paragraph","reference"]}),e.inline.ruler.after("image","footnote_inline",i),e.inline.ruler.after("footnote_inline","footnote_ref",u),e.core.ruler.after("inline","footnote_tail",c)}},{}]},{},[1])(1)});