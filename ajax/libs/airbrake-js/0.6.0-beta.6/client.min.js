!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Client=t():(e.airbrakeJs=e.airbrakeJs||{},e.airbrakeJs.Client=t())}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=19)}([function(e,t,r){"use strict";function n(e,t){void 0===t&&(t=1e3);var r={};for(var n in e)r[n]=i.default(e[n],t);return r}function o(e,t,r){void 0===t&&(t=1e3),void 0===r&&(r=64e3);for(var o;;){if(e.params=n(e.params,t),e.environment=n(e.environment,t),e.session=n(e.session,t),o=JSON.stringify(e),o.length<r)return o;if(0===t)break;t=Math.floor(t/2)}var i=new Error("airbrake-js: cannot jsonify notice (length="+o.length+" maxLength="+r+")");throw i.params={json:o.slice(0,Math.floor(t/2))+"..."},i}var i=r(11);Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function i(e){if(p===clearTimeout)return clearTimeout(e);if((p===n||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function s(){v&&d&&(v=!1,d.length?h=d.concat(h):m=-1,h.length&&a())}function a(){if(!v){var e=o(s);v=!0;for(var t=h.length;t;){for(d=h,h=[];++m<t;)d&&d[m].run();m=-1,t=h.length}d=null,v=!1,i(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var f,p,l=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{p="function"==typeof clearTimeout?clearTimeout:n}catch(e){p=n}}();var d,h=[],v=!1,m=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new c(e,t)),1!==h.length||v||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=u,l.addListener=u,l.once=u,l.off=u,l.removeListener=u,l.removeAllListeners=u,l.emit=u,l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(e,t,r){"use strict";(function(t){function n(e){return function(t,r,n,o,i){return i?void e.notify(i):void e.notify({error:{message:t,fileName:r,lineNumber:n,columnNumber:o}})}}var o=r(13),i=r(12),s=r(10),a=r(7),c=r(8),u=r(9),f=r(6),p=r(17),l=r(16),d=r(14),h=r(18),v=r(15),m=function(){function e(e){void 0===e&&(e={});var r=this;this.opts={},this.reporters=[],this.filters=[],this.opts.projectId=e.projectId,this.opts.projectKey=e.projectKey,this.opts.host=e.host||"https://api.airbrake.io",this.opts.timeout=e.timeout||1e4,this.processor=e.processor||i.default,this.addReporter(e.reporter||p.detectReporter(e)),this.addFilter(c.default),this.addFilter(u.default),this.addFilter(f.default),this.onerror=n(this),"undefined"!=typeof window&&(this.addFilter(s.default),window.onerror||e.onerror||(window.onerror=this.onerror)),"object"==typeof t&&(this.addFilter(a.default),e.uncaughtException||t.on("uncaughtException",function(e){throw r.notify(e),e}))}return e.prototype.setProject=function(e,t){this.opts.projectId=e,this.opts.projectKey=t},e.prototype.setHost=function(e){this.opts.host=e},e.prototype.addReporter=function(e){var t;switch(e){case"node":t=l.default;break;case"compat":t=d.default;break;case"xhr":t=h.default;break;case"jsonp":t=v.default;break;default:t=e}this.reporters.push(t)},e.prototype.addFilter=function(e){this.filters.push(e)},e.prototype.notify=function(e){var t=this,r=Object.assign({language:"JavaScript",notifier:{name:"airbrake-js",version:"0.6.0-beta.6",url:"https://github.com/airbrake/airbrake-js"}},e.context),n={id:"",errors:null,context:r,params:e.params||{},environment:e.environment||{},session:e.session||{}},i=new o.default;return this.processor(e.error||e,function(e,r){n.errors=[r];for(var o=0,s=t.filters;o<s.length;o++){var a=s[o];if(n=a(n),null===n||n===!1)return}for(var c=0,u=t.reporters;c<u.length;c++){var f=u[c];f(n,t.opts,i)}}),i},e.prototype.wrapArguments=function(e){for(var t in e){var r=e[t];"function"==typeof r&&(e[t]=this.wrap(r))}return e},e.prototype.wrap=function(e){if(e.__airbrake__)return e;var t=this,r=function(){var r=Array.prototype.slice.call(arguments),n=t.wrapArguments(r);try{return e.apply(this,n)}catch(e){return void t.notify({error:e,params:{arguments:r}})}};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r.__airbrake__=!0,r.__inner__=e,r},e.prototype.call=function(e){var t=this.wrap(e);return t.apply(this,Array.prototype.slice.call(arguments,1))},e}();e.exports=m}).call(t,r(1))},function(e,t){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){void 0===t&&(t=0);for(var r=t;r<this.length;r++)if(this[r]===e)return r;return-1}),Object.assign||(Object.assign=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=function(t){t&&Object.keys(t).forEach(function(r){return e[r]=t[r]})},o=0,i=t;o<i.length;o++){var s=i[o];n(s)}return e})},function(e,t,r){var n,o,i;!function(s,a){"use strict";o=[r(5)],n=a,i="function"==typeof n?n.apply(t,o):n,!(void 0!==i&&(e.exports=i))}(this,function(e){"use strict";var t=/(^|@)\S+\:\d+/,r=/^\s*at .*(\S+\:\d+|\(native\))/m,n=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if("undefined"!=typeof e.stacktrace||"undefined"!=typeof e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(e.indexOf(":")===-1)return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,r=t.exec(e.replace(/[\(\)]/g,""));return[r[1],r[2]||void 0,r[3]||void 0]},parseV8OrIE:function(t){var n=t.stack.split("\n").filter(function(e){return!!e.match(r)},this);return n.map(function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var r=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(r.pop()),o=r.join(" ")||void 0,i=["eval","<anonymous>"].indexOf(n[0])>-1?void 0:n[0];return new e({functionName:o,fileName:i,lineNumber:n[1],columnNumber:n[2],source:t})},this)},parseFFOrSafari:function(t){var r=t.stack.split("\n").filter(function(e){return!e.match(n)},this);return r.map(function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),t.indexOf("@")===-1&&t.indexOf(":")===-1)return new e({functionName:t});var r=t.split("@"),n=this.extractLocation(r.pop()),o=r.join("@")||void 0;return new e({functionName:o,fileName:n[0],lineNumber:n[1],columnNumber:n[2],source:t})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split("\n"),o=[],i=2,s=n.length;i<s;i+=2){var a=r.exec(n[i]);a&&o.push(new e({fileName:a[2],lineNumber:a[1],source:n[i]}))}return o},parseOpera10:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split("\n"),o=[],i=0,s=n.length;i<s;i+=2){var a=r.exec(n[i]);a&&o.push(new e({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:n[i]}))}return o},parseOpera11:function(r){var n=r.stack.split("\n").filter(function(e){return!!e.match(t)&&!e.match(/^Error created at/)},this);return n.map(function(t){var r,n=t.split("@"),o=this.extractLocation(n.pop()),i=n.shift()||"",s=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(r=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new e({functionName:s,args:a,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:t})},this)}}})},function(e,t,r){var n,o,i;!function(r,s){"use strict";o=[],n=s,i="function"==typeof n?n.apply(t,o):n,!(void 0!==i&&(e.exports=i))}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e[0].toUpperCase()+e.substring(1)}function r(e){return function(){return this[e]}}function n(e){if(e instanceof Object)for(var r=o.concat(i.concat(s.concat(a))),n=0;n<r.length;n++)e.hasOwnProperty(r[n])&&void 0!==e[r[n]]&&this["set"+t(r[n])](e[r[n]])}var o=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],s=["fileName","functionName","source"],a=["args"];n.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof n)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new n(e)}},toString:function(){var t=this.getFunctionName()||"{anonymous}",r="("+(this.getArgs()||[]).join(",")+")",n=this.getFileName()?"@"+this.getFileName():"",o=e(this.getLineNumber())?":"+this.getLineNumber():"",i=e(this.getColumnNumber())?":"+this.getColumnNumber():"";return t+r+n+o+i}};for(var c=0;c<o.length;c++)n.prototype["get"+t(o[c])]=r(o[c]),n.prototype["set"+t(o[c])]=function(e){return function(t){this[e]=Boolean(t)}}(o[c]);for(var u=0;u<i.length;u++)n.prototype["get"+t(i[u])]=r(i[u]),n.prototype["set"+t(i[u])]=function(t){return function(r){if(!e(r))throw new TypeError(t+" must be a Number");this[t]=Number(r)}}(i[u]);for(var f=0;f<s.length;f++)n.prototype["get"+t(s[f])]=r(s[f]),n.prototype["set"+t(s[f])]=function(e){return function(t){this[e]=String(t)}}(s[f]);return n})},function(e,t,r){"use strict";function n(e){var t=e.errors[0];if(""!==t.type&&"Error"!==t.type)return e;var r=t.message.match(o);return null!==r&&(t.type=r[1],t.message=r[2]),e}var o=new RegExp(["^","\\[(\\$.+)\\]","\\s","(.+)","$"].join(""));Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(module,exports,__webpack_require__){"use strict";(function(process){function filter(e){os&&(e.context.os=os.type()+"/"+os.release(),e.context.architecture=os.arch(),e.context.hostname=os.hostname()),e.context.platform=process.platform,e.context.rootDirectory||(e.context.rootDirectory=process.cwd()),process.env.NODE_ENV&&(e.context.environment=process.env.NODE_ENV),e.params.process={pid:process.pid,cwd:process.cwd(),execPath:process.execPath,argv:process.argv};for(var t in["uptime","cpuUsage","memoryUsage"])process[t]&&(e.params.process[t]=process[t]());return os&&(e.params.os={homedir:os.homedir(),uptime:os.uptime(),freemem:os.freemem(),totalmem:os.totalmem(),cpus:os.cpus(),loadavg:os.loadavg()}),e}var os;try{os=eval("require")("os")}catch(e){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=filter}).call(exports,__webpack_require__(1))},function(e,t,r){"use strict";function n(e){var t=e.errors[0].message;return o.indexOf(t)>-1?null:e}var o=["Script error","Script error."];Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e){var t=e.errors[0];if(""!==t.type&&"Error"!==t.type)return e;var r=t.message.match(o);return null!==r&&(t.type=r[1],t.message=r[2]),e}var o=new RegExp(["^","Uncaught\\s","(.+?)",":\\s","(.+)","$"].join(""));Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e){return window.navigator&&window.navigator.userAgent&&(e.context.userAgent=window.navigator.userAgent),window.location&&(e.context.url=String(window.location),e.context.rootDirectory=window.location.protocol+"//"+window.location.host),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e,t){try{return e[t]}catch(e){return}}function o(e,t,r){function o(e){for(var t=c.indexOf(e),r=[a[t]],o=t;o>=0;o--)c[o]&&n(c[o],r[0])===e&&(e=c[o],r.unshift(a[o]));return"~"+r.join(".")}function i(e,u,f){if(void 0===u&&(u=""),void 0===f&&(f=0),s++,s>t)return"[Truncated]";if(null===e||void 0===e)return e;switch(typeof e){case"boolean":case"number":case"string":case"function":return e;case"object":break;default:return String(e)}if(e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(c.indexOf(e)>=0)return"[Circular "+o(e)+"]";if(f++,f>r)return"[Truncated]";if(a.push(u),c.push(e),s--,"[object Array]"===Object.prototype.toString.apply(e)){var p=[];for(var l in e){var d=e[l];if(s++,s>=t)break;p.push(i(d,l,f))}return p}var h={};for(u in e)if(Object.prototype.hasOwnProperty.call(e,u)){if(s++,s>=t)break;var v=n(e,u);void 0!==v&&(h[u]=i(v,u,f))}return h}void 0===t&&(t=1e3),void 0===r&&(r=5);var s=0,a=[],c=[];return i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},function(e,t,r){"use strict";function n(e,t){var r;try{r=o.parse(e)}catch(e){console&&console.warn&&console.warn("airbrake-js: error-stack-parser failed",e),r=[]}for(var n=[],i=0,s=r;i<s.length;i++){var a=s[i];n.push({function:a.functionName||"",file:a.fileName,line:a.lineNumber,column:a.columnNumber})}var c;c=e.name?e.name:"";var u;return u=e.message?String(e.message):String(e),""===c&&""===u&&0===n.length?void(console&&console.warn&&console.warn("airbrake: can not process error",e)):void t("stacktracejs",{type:c,message:u,backtrace:n})}var o=r(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";var n=function(){function e(e){this.onResolved=[],this.onRejected=[],e&&e(this.resolve.bind(this),this.reject.bind(this))}return e.prototype.then=function(e,t){return e&&(this.resolvedWith?e(this.resolvedWith):this.onResolved.push(e)),t&&(this.rejectedWith?t(this.rejectedWith):this.onRejected.push(t)),this},e.prototype.catch=function(e){return this.rejectedWith?e(this.rejectedWith):this.onRejected.push(e),this},e.prototype.resolve=function(e){if(this.resolvedWith||this.rejectedWith)throw new Error("Promise is already resolved or rejected");this.resolvedWith=e;for(var t=0,r=this.onResolved;t<r.length;t++){var n=r[t];n(e)}return this},e.prototype.reject=function(e){if(this.resolvedWith||this.rejectedWith)throw new Error("Promise is already resolved or rejected");this.rejectedWith=e;for(var t=0,r=this.onRejected;t<r.length;t++){var n=r[t];n(e)}return this},e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e,t,r){var n=t.host+"/api/v3/projects/"+t.projectId+"/create-notice?key="+t.projectKey,i=o.default(e),s=new XMLHttpRequest;s.open("POST",n,!0),s.send(i),s.onreadystatechange=function(){if(4===s.readyState){if(s.status>=200&&s.status<500){var t=JSON.parse(s.responseText);if(t.id)return e.id=t.id,void r.resolve(e);if(t.error){var n=new Error(t.error);return void r.reject(n)}}var o=s.responseText.trim(),i=new Error("airbrake: unexpected response: code="+s.status+" body='"+o+"'");r.reject(i)}}}var o=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e,t,r){i++;var n="airbrakeCb"+String(i);window[n]=function(t){try{delete window[n]}catch(e){window[n]=void 0}if(t.id)return e.id=t.id,void r.resolve(e);if(t.error){var o=new Error(t.error);return void r.reject(o)}var i=new Error(t);r.reject(i)};var s=encodeURIComponent(o.default(e)),a=t.host+"/api/v3/projects/"+t.projectId+"/create-notice?key="+t.projectKey+"&callback="+n+"&body="+s,c=window.document,u=c.getElementsByTagName("head")[0],f=c.createElement("script");f.src=a,f.onload=function(){return u.removeChild(f)},f.onerror=function(){u.removeChild(f);var e=new Error("airbrake: JSONP script error");r.reject(e)},u.appendChild(f)}var o=r(0),i=0;Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(module,exports,__webpack_require__){"use strict";function report(e,t,r){var n=t.host+"/api/v3/projects/"+t.projectId+"/notices?key="+t.projectKey,o=jsonify_notice_1.default(e);request({url:n,method:"POST",body:o,headers:{"content-type":"application/json"},timeout:t.timeout},function(t,n,o){if(t)return void r.reject(t);if(n.statusCode>=200&&n.statusCode<500){var i=JSON.parse(o);if(i.id)return e.id=i.id,void r.resolve(e);if(i.error){var s=new Error(i.error);return void r.reject(s)}}o=o.trim();var a=new Error("airbrake: unexpected response: code="+n.statusCode+" body='"+o+"'");r.reject(a)})}var jsonify_notice_1=__webpack_require__(0),request;try{request=eval("require")("request")}catch(e){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=report},function(e,t,r){"use strict";function n(e){return"undefined"!=typeof XMLHttpRequest?e.host?"xhr":"compat":"undefined"!=typeof window?"jsonp":"node"}t.detectReporter=n},function(e,t,r){"use strict";function n(e,t,r){var n=t.host+"/api/v3/projects/"+t.projectId+"/notices?key="+t.projectKey,i=o.default(e),s=new XMLHttpRequest;s.open("POST",n,!0),s.setRequestHeader("Content-Type","application/json"),s.send(i),s.onreadystatechange=function(){if(4===s.readyState){if(s.status>=200&&s.status<500){var t=JSON.parse(s.responseText);if(t.id)return e.id=t.id,void r.resolve(e);if(t.error){var n=new Error(t.error);return void r.reject(n)}}var o=s.responseText.trim(),i=new Error("airbrake: unexpected response: code="+s.status+" body='"+o+"'");r.reject(i)}}}var o=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){r(3),e.exports=r(2)}])});
//# sourceMappingURL=client.min.js.map